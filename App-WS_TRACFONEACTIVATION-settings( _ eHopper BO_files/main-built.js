if (!String.prototype.endsWith) {
    String.prototype.endsWith = function (searchString, position) {
        var subjectString = this.toString();
        if (typeof position !== 'number' || !isFinite(position) || Math.floor(position) !== position || position > subjectString.length) {
            position = subjectString.length;
        }
        position -= searchString.length;
        var lastIndex = subjectString.lastIndexOf(searchString, position);
        return lastIndex !== -1 && lastIndex === position;
    };
}

if (!String.prototype.startsWith) {
    String.prototype.startsWith = function (searchString, position) {
        position = position || 0;
        return this.substr(position, searchString.length) === searchString;
    };
};
define("stringMethods", function(){});

/*!
 * Knockout JavaScript library v3.2.0
 * (c) Steven Sanderson - http://knockoutjs.com/
 * License: MIT (http://www.opensource.org/licenses/mit-license.php)
 */

(function(){
var DEBUG=true;
(function(undefined){
    // (0, eval)('this') is a robust way of getting a reference to the global object
    // For details, see http://stackoverflow.com/questions/14119988/return-this-0-evalthis/14120023#14120023
    var window = this || (0, eval)('this'),
        document = window['document'],
        navigator = window['navigator'],
        jQueryInstance = window["jQuery"],
        JSON = window["JSON"];
(function(factory) {
    // Support three module loading scenarios
    if (typeof require === 'function' && typeof exports === 'object' && typeof module === 'object') {
        // [1] CommonJS/Node.js
        var target = module['exports'] || exports; // module.exports is for Node.js
        factory(target, require);
    } else if (typeof define === 'function' && define['amd']) {
        // [2] AMD anonymous module
        define('knockout',['exports', 'require'], factory);
    } else {
        // [3] No module loader (plain <script> tag) - put directly in global namespace
        factory(window['ko'] = {});
    }
}(function(koExports, require){
// Internally, all KO objects are attached to koExports (even the non-exported ones whose names will be minified by the closure compiler).
// In the future, the following "ko" variable may be made distinct from "koExports" so that private objects are not externally reachable.
var ko = typeof koExports !== 'undefined' ? koExports : {};
// Google Closure Compiler helpers (used only to make the minified file smaller)
ko.exportSymbol = function(koPath, object) {
    var tokens = koPath.split(".");

    // In the future, "ko" may become distinct from "koExports" (so that non-exported objects are not reachable)
    // At that point, "target" would be set to: (typeof koExports !== "undefined" ? koExports : ko)
    var target = ko;

    for (var i = 0; i < tokens.length - 1; i++)
        target = target[tokens[i]];
    target[tokens[tokens.length - 1]] = object;
};
ko.exportProperty = function(owner, publicName, object) {
    owner[publicName] = object;
};
ko.version = "3.2.0";

ko.exportSymbol('version', ko.version);
ko.utils = (function () {
    function objectForEach(obj, action) {
        for (var prop in obj) {
            if (obj.hasOwnProperty(prop)) {
                action(prop, obj[prop]);
            }
        }
    }

    function extend(target, source) {
        if (source) {
            for(var prop in source) {
                if(source.hasOwnProperty(prop)) {
                    target[prop] = source[prop];
                }
            }
        }
        return target;
    }

    function setPrototypeOf(obj, proto) {
        obj.__proto__ = proto;
        return obj;
    }

    var canSetPrototype = ({ __proto__: [] } instanceof Array);

    // Represent the known event types in a compact way, then at runtime transform it into a hash with event name as key (for fast lookup)
    var knownEvents = {}, knownEventTypesByEventName = {};
    var keyEventTypeName = (navigator && /Firefox\/2/i.test(navigator.userAgent)) ? 'KeyboardEvent' : 'UIEvents';
    knownEvents[keyEventTypeName] = ['keyup', 'keydown', 'keypress'];
    knownEvents['MouseEvents'] = ['click', 'dblclick', 'mousedown', 'mouseup', 'mousemove', 'mouseover', 'mouseout', 'mouseenter', 'mouseleave'];
    objectForEach(knownEvents, function(eventType, knownEventsForType) {
        if (knownEventsForType.length) {
            for (var i = 0, j = knownEventsForType.length; i < j; i++)
                knownEventTypesByEventName[knownEventsForType[i]] = eventType;
        }
    });
    var eventsThatMustBeRegisteredUsingAttachEvent = { 'propertychange': true }; // Workaround for an IE9 issue - https://github.com/SteveSanderson/knockout/issues/406

    // Detect IE versions for bug workarounds (uses IE conditionals, not UA string, for robustness)
    // Note that, since IE 10 does not support conditional comments, the following logic only detects IE < 10.
    // Currently this is by design, since IE 10+ behaves correctly when treated as a standard browser.
    // If there is a future need to detect specific versions of IE10+, we will amend this.
    var ieVersion = document && (function() {
        var version = 3, div = document.createElement('div'), iElems = div.getElementsByTagName('i');

        // Keep constructing conditional HTML blocks until we hit one that resolves to an empty fragment
        while (
            div.innerHTML = '<!--[if gt IE ' + (++version) + ']><i></i><![endif]-->',
            iElems[0]
        ) {}
        return version > 4 ? version : undefined;
    }());
    var isIe6 = ieVersion === 6,
        isIe7 = ieVersion === 7;

    function isClickOnCheckableElement(element, eventType) {
        if ((ko.utils.tagNameLower(element) !== "input") || !element.type) return false;
        if (eventType.toLowerCase() != "click") return false;
        var inputType = element.type;
        return (inputType == "checkbox") || (inputType == "radio");
    }

    return {
        fieldsIncludedWithJsonPost: ['authenticity_token', /^__RequestVerificationToken(_.*)?$/],

        arrayForEach: function (array, action) {
            for (var i = 0, j = array.length; i < j; i++)
                action(array[i], i);
        },

        arrayIndexOf: function (array, item) {
            if (typeof Array.prototype.indexOf == "function")
                return Array.prototype.indexOf.call(array, item);
            for (var i = 0, j = array.length; i < j; i++)
                if (array[i] === item)
                    return i;
            return -1;
        },

        arrayFirst: function (array, predicate, predicateOwner) {
            for (var i = 0, j = array.length; i < j; i++)
                if (predicate.call(predicateOwner, array[i], i))
                    return array[i];
            return null;
        },

        arrayRemoveItem: function (array, itemToRemove) {
            var index = ko.utils.arrayIndexOf(array, itemToRemove);
            if (index > 0) {
                array.splice(index, 1);
            }
            else if (index === 0) {
                array.shift();
            }
        },

        arrayGetDistinctValues: function (array) {
            array = array || [];
            var result = [];
            for (var i = 0, j = array.length; i < j; i++) {
                if (ko.utils.arrayIndexOf(result, array[i]) < 0)
                    result.push(array[i]);
            }
            return result;
        },

        arrayMap: function (array, mapping) {
            array = array || [];
            var result = [];
            for (var i = 0, j = array.length; i < j; i++)
                result.push(mapping(array[i], i));
            return result;
        },

        arrayFilter: function (array, predicate) {
            array = array || [];
            var result = [];
            for (var i = 0, j = array.length; i < j; i++)
                if (predicate(array[i], i))
                    result.push(array[i]);
            return result;
        },

        arrayPushAll: function (array, valuesToPush) {
            if (valuesToPush instanceof Array)
                array.push.apply(array, valuesToPush);
            else
                for (var i = 0, j = valuesToPush.length; i < j; i++)
                    array.push(valuesToPush[i]);
            return array;
        },

        addOrRemoveItem: function(array, value, included) {
            var existingEntryIndex = ko.utils.arrayIndexOf(ko.utils.peekObservable(array), value);
            if (existingEntryIndex < 0) {
                if (included)
                    array.push(value);
            } else {
                if (!included)
                    array.splice(existingEntryIndex, 1);
            }
        },

        canSetPrototype: canSetPrototype,

        extend: extend,

        setPrototypeOf: setPrototypeOf,

        setPrototypeOfOrExtend: canSetPrototype ? setPrototypeOf : extend,

        objectForEach: objectForEach,

        objectMap: function(source, mapping) {
            if (!source)
                return source;
            var target = {};
            for (var prop in source) {
                if (source.hasOwnProperty(prop)) {
                    target[prop] = mapping(source[prop], prop, source);
                }
            }
            return target;
        },

        emptyDomNode: function (domNode) {
            while (domNode.firstChild) {
                ko.removeNode(domNode.firstChild);
            }
        },

        moveCleanedNodesToContainerElement: function(nodes) {
            // Ensure it's a real array, as we're about to reparent the nodes and
            // we don't want the underlying collection to change while we're doing that.
            var nodesArray = ko.utils.makeArray(nodes);

            var container = document.createElement('div');
            for (var i = 0, j = nodesArray.length; i < j; i++) {
                container.appendChild(ko.cleanNode(nodesArray[i]));
            }
            return container;
        },

        cloneNodes: function (nodesArray, shouldCleanNodes) {
            for (var i = 0, j = nodesArray.length, newNodesArray = []; i < j; i++) {
                var clonedNode = nodesArray[i].cloneNode(true);
                newNodesArray.push(shouldCleanNodes ? ko.cleanNode(clonedNode) : clonedNode);
            }
            return newNodesArray;
        },

        setDomNodeChildren: function (domNode, childNodes) {
            ko.utils.emptyDomNode(domNode);
            if (childNodes) {
                for (var i = 0, j = childNodes.length; i < j; i++)
                    domNode.appendChild(childNodes[i]);
            }
        },

        replaceDomNodes: function (nodeToReplaceOrNodeArray, newNodesArray) {
            var nodesToReplaceArray = nodeToReplaceOrNodeArray.nodeType ? [nodeToReplaceOrNodeArray] : nodeToReplaceOrNodeArray;
            if (nodesToReplaceArray.length > 0) {
                var insertionPoint = nodesToReplaceArray[0];
                var parent = insertionPoint.parentNode;
                for (var i = 0, j = newNodesArray.length; i < j; i++)
                    parent.insertBefore(newNodesArray[i], insertionPoint);
                for (var i = 0, j = nodesToReplaceArray.length; i < j; i++) {
                    ko.removeNode(nodesToReplaceArray[i]);
                }
            }
        },

        fixUpContinuousNodeArray: function(continuousNodeArray, parentNode) {
            // Before acting on a set of nodes that were previously outputted by a template function, we have to reconcile
            // them against what is in the DOM right now. It may be that some of the nodes have already been removed, or that
            // new nodes might have been inserted in the middle, for example by a binding. Also, there may previously have been
            // leading comment nodes (created by rewritten string-based templates) that have since been removed during binding.
            // So, this function translates the old "map" output array into its best guess of the set of current DOM nodes.
            //
            // Rules:
            //   [A] Any leading nodes that have been removed should be ignored
            //       These most likely correspond to memoization nodes that were already removed during binding
            //       See https://github.com/SteveSanderson/knockout/pull/440
            //   [B] We want to output a continuous series of nodes. So, ignore any nodes that have already been removed,
            //       and include any nodes that have been inserted among the previous collection

            if (continuousNodeArray.length) {
                // The parent node can be a virtual element; so get the real parent node
                parentNode = (parentNode.nodeType === 8 && parentNode.parentNode) || parentNode;

                // Rule [A]
                while (continuousNodeArray.length && continuousNodeArray[0].parentNode !== parentNode)
                    continuousNodeArray.shift();

                // Rule [B]
                if (continuousNodeArray.length > 1) {
                    var current = continuousNodeArray[0], last = continuousNodeArray[continuousNodeArray.length - 1];
                    // Replace with the actual new continuous node set
                    continuousNodeArray.length = 0;
                    while (current !== last) {
                        continuousNodeArray.push(current);
                        current = current.nextSibling;
                        if (!current) // Won't happen, except if the developer has manually removed some DOM elements (then we're in an undefined scenario)
                            return;
                    }
                    continuousNodeArray.push(last);
                }
            }
            return continuousNodeArray;
        },

        setOptionNodeSelectionState: function (optionNode, isSelected) {
            // IE6 sometimes throws "unknown error" if you try to write to .selected directly, whereas Firefox struggles with setAttribute. Pick one based on browser.
            if (ieVersion < 7)
                optionNode.setAttribute("selected", isSelected);
            else
                optionNode.selected = isSelected;
        },

        stringTrim: function (string) {
            return string === null || string === undefined ? '' :
                string.trim ?
                    string.trim() :
                    string.toString().replace(/^[\s\xa0]+|[\s\xa0]+$/g, '');
        },

        stringStartsWith: function (string, startsWith) {
            string = string || "";
            if (startsWith.length > string.length)
                return false;
            return string.substring(0, startsWith.length) === startsWith;
        },

        domNodeIsContainedBy: function (node, containedByNode) {
            if (node === containedByNode)
                return true;
            if (node.nodeType === 11)
                return false; // Fixes issue #1162 - can't use node.contains for document fragments on IE8
            if (containedByNode.contains)
                return containedByNode.contains(node.nodeType === 3 ? node.parentNode : node);
            if (containedByNode.compareDocumentPosition)
                return (containedByNode.compareDocumentPosition(node) & 16) == 16;
            while (node && node != containedByNode) {
                node = node.parentNode;
            }
            return !!node;
        },

        domNodeIsAttachedToDocument: function (node) {
            return ko.utils.domNodeIsContainedBy(node, node.ownerDocument.documentElement);
        },

        anyDomNodeIsAttachedToDocument: function(nodes) {
            return !!ko.utils.arrayFirst(nodes, ko.utils.domNodeIsAttachedToDocument);
        },

        tagNameLower: function(element) {
            // For HTML elements, tagName will always be upper case; for XHTML elements, it'll be lower case.
            // Possible future optimization: If we know it's an element from an XHTML document (not HTML),
            // we don't need to do the .toLowerCase() as it will always be lower case anyway.
            return element && element.tagName && element.tagName.toLowerCase();
        },

        registerEventHandler: function (element, eventType, handler) {
            var mustUseAttachEvent = ieVersion && eventsThatMustBeRegisteredUsingAttachEvent[eventType];
            if (!mustUseAttachEvent && jQueryInstance) {
                jQueryInstance(element)['bind'](eventType, handler);
            } else if (!mustUseAttachEvent && typeof element.addEventListener == "function")
                element.addEventListener(eventType, handler, false);
            else if (typeof element.attachEvent != "undefined") {
                var attachEventHandler = function (event) { handler.call(element, event); },
                    attachEventName = "on" + eventType;
                element.attachEvent(attachEventName, attachEventHandler);

                // IE does not dispose attachEvent handlers automatically (unlike with addEventListener)
                // so to avoid leaks, we have to remove them manually. See bug #856
                ko.utils.domNodeDisposal.addDisposeCallback(element, function() {
                    element.detachEvent(attachEventName, attachEventHandler);
                });
            } else
                throw new Error("Browser doesn't support addEventListener or attachEvent");
        },

        triggerEvent: function (element, eventType) {
            if (!(element && element.nodeType))
                throw new Error("element must be a DOM node when calling triggerEvent");

            // For click events on checkboxes and radio buttons, jQuery toggles the element checked state *after* the
            // event handler runs instead of *before*. (This was fixed in 1.9 for checkboxes but not for radio buttons.)
            // IE doesn't change the checked state when you trigger the click event using "fireEvent".
            // In both cases, we'll use the click method instead.
            var useClickWorkaround = isClickOnCheckableElement(element, eventType);

            if (jQueryInstance && !useClickWorkaround) {
                jQueryInstance(element)['trigger'](eventType);
            } else if (typeof document.createEvent == "function") {
                if (typeof element.dispatchEvent == "function") {
                    var eventCategory = knownEventTypesByEventName[eventType] || "HTMLEvents";
                    var event = document.createEvent(eventCategory);
                    event.initEvent(eventType, true, true, window, 0, 0, 0, 0, 0, false, false, false, false, 0, element);
                    element.dispatchEvent(event);
                }
                else
                    throw new Error("The supplied element doesn't support dispatchEvent");
            } else if (useClickWorkaround && element.click) {
                element.click();
            } else if (typeof element.fireEvent != "undefined") {
                element.fireEvent("on" + eventType);
            } else {
                throw new Error("Browser doesn't support triggering events");
            }
        },

        unwrapObservable: function (value) {
            return ko.isObservable(value) ? value() : value;
        },

        peekObservable: function (value) {
            return ko.isObservable(value) ? value.peek() : value;
        },

        toggleDomNodeCssClass: function (node, classNames, shouldHaveClass) {
            if (classNames) {
                var cssClassNameRegex = /\S+/g,
                    currentClassNames = node.className.match(cssClassNameRegex) || [];
                ko.utils.arrayForEach(classNames.match(cssClassNameRegex), function(className) {
                    ko.utils.addOrRemoveItem(currentClassNames, className, shouldHaveClass);
                });
                node.className = currentClassNames.join(" ");
            }
        },

        setTextContent: function(element, textContent) {
            var value = ko.utils.unwrapObservable(textContent);
            if ((value === null) || (value === undefined))
                value = "";

            // We need there to be exactly one child: a text node.
            // If there are no children, more than one, or if it's not a text node,
            // we'll clear everything and create a single text node.
            var innerTextNode = ko.virtualElements.firstChild(element);
            if (!innerTextNode || innerTextNode.nodeType != 3 || ko.virtualElements.nextSibling(innerTextNode)) {
                ko.virtualElements.setDomNodeChildren(element, [element.ownerDocument.createTextNode(value)]);
            } else {
                innerTextNode.data = value;
            }

            ko.utils.forceRefresh(element);
        },

        setElementName: function(element, name) {
            element.name = name;

            // Workaround IE 6/7 issue
            // - https://github.com/SteveSanderson/knockout/issues/197
            // - http://www.matts411.com/post/setting_the_name_attribute_in_ie_dom/
            if (ieVersion <= 7) {
                try {
                    element.mergeAttributes(document.createElement("<input name='" + element.name + "'/>"), false);
                }
                catch(e) {} // For IE9 with doc mode "IE9 Standards" and browser mode "IE9 Compatibility View"
            }
        },

        forceRefresh: function(node) {
            // Workaround for an IE9 rendering bug - https://github.com/SteveSanderson/knockout/issues/209
            if (ieVersion >= 9) {
                // For text nodes and comment nodes (most likely virtual elements), we will have to refresh the container
                var elem = node.nodeType == 1 ? node : node.parentNode;
                if (elem.style)
                    elem.style.zoom = elem.style.zoom;
            }
        },

        ensureSelectElementIsRenderedCorrectly: function(selectElement) {
            // Workaround for IE9 rendering bug - it doesn't reliably display all the text in dynamically-added select boxes unless you force it to re-render by updating the width.
            // (See https://github.com/SteveSanderson/knockout/issues/312, http://stackoverflow.com/questions/5908494/select-only-shows-first-char-of-selected-option)
            // Also fixes IE7 and IE8 bug that causes selects to be zero width if enclosed by 'if' or 'with'. (See issue #839)
            if (ieVersion) {
                var originalWidth = selectElement.style.width;
                selectElement.style.width = 0;
                selectElement.style.width = originalWidth;
            }
        },

        range: function (min, max) {
            min = ko.utils.unwrapObservable(min);
            max = ko.utils.unwrapObservable(max);
            var result = [];
            for (var i = min; i <= max; i++)
                result.push(i);
            return result;
        },

        makeArray: function(arrayLikeObject) {
            var result = [];
            for (var i = 0, j = arrayLikeObject.length; i < j; i++) {
                result.push(arrayLikeObject[i]);
            };
            return result;
        },

        isIe6 : isIe6,
        isIe7 : isIe7,
        ieVersion : ieVersion,

        getFormFields: function(form, fieldName) {
            var fields = ko.utils.makeArray(form.getElementsByTagName("input")).concat(ko.utils.makeArray(form.getElementsByTagName("textarea")));
            var isMatchingField = (typeof fieldName == 'string')
                ? function(field) { return field.name === fieldName }
                : function(field) { return fieldName.test(field.name) }; // Treat fieldName as regex or object containing predicate
            var matches = [];
            for (var i = fields.length - 1; i >= 0; i--) {
                if (isMatchingField(fields[i]))
                    matches.push(fields[i]);
            };
            return matches;
        },

        parseJson: function (jsonString) {
            if (typeof jsonString == "string") {
                jsonString = ko.utils.stringTrim(jsonString);
                if (jsonString) {
                    if (JSON && JSON.parse) // Use native parsing where available
                        return JSON.parse(jsonString);
                    return (new Function("return " + jsonString))(); // Fallback on less safe parsing for older browsers
                }
            }
            return null;
        },

        stringifyJson: function (data, replacer, space) {   // replacer and space are optional
            if (!JSON || !JSON.stringify)
                throw new Error("Cannot find JSON.stringify(). Some browsers (e.g., IE < 8) don't support it natively, but you can overcome this by adding a script reference to json2.js, downloadable from http://www.json.org/json2.js");
            return JSON.stringify(ko.utils.unwrapObservable(data), replacer, space);
        },

        postJson: function (urlOrForm, data, options) {
            options = options || {};
            var params = options['params'] || {};
            var includeFields = options['includeFields'] || this.fieldsIncludedWithJsonPost;
            var url = urlOrForm;

            // If we were given a form, use its 'action' URL and pick out any requested field values
            if((typeof urlOrForm == 'object') && (ko.utils.tagNameLower(urlOrForm) === "form")) {
                var originalForm = urlOrForm;
                url = originalForm.action;
                for (var i = includeFields.length - 1; i >= 0; i--) {
                    var fields = ko.utils.getFormFields(originalForm, includeFields[i]);
                    for (var j = fields.length - 1; j >= 0; j--)
                        params[fields[j].name] = fields[j].value;
                }
            }

            data = ko.utils.unwrapObservable(data);
            var form = document.createElement("form");
            form.style.display = "none";
            form.action = url;
            form.method = "post";
            for (var key in data) {
                // Since 'data' this is a model object, we include all properties including those inherited from its prototype
                var input = document.createElement("input");
                input.type = "hidden";
                input.name = key;
                input.value = ko.utils.stringifyJson(ko.utils.unwrapObservable(data[key]));
                form.appendChild(input);
            }
            objectForEach(params, function(key, value) {
                var input = document.createElement("input");
                input.type = "hidden";
                input.name = key;
                input.value = value;
                form.appendChild(input);
            });
            document.body.appendChild(form);
            options['submitter'] ? options['submitter'](form) : form.submit();
            setTimeout(function () { form.parentNode.removeChild(form); }, 0);
        }
    }
}());

ko.exportSymbol('utils', ko.utils);
ko.exportSymbol('utils.arrayForEach', ko.utils.arrayForEach);
ko.exportSymbol('utils.arrayFirst', ko.utils.arrayFirst);
ko.exportSymbol('utils.arrayFilter', ko.utils.arrayFilter);
ko.exportSymbol('utils.arrayGetDistinctValues', ko.utils.arrayGetDistinctValues);
ko.exportSymbol('utils.arrayIndexOf', ko.utils.arrayIndexOf);
ko.exportSymbol('utils.arrayMap', ko.utils.arrayMap);
ko.exportSymbol('utils.arrayPushAll', ko.utils.arrayPushAll);
ko.exportSymbol('utils.arrayRemoveItem', ko.utils.arrayRemoveItem);
ko.exportSymbol('utils.extend', ko.utils.extend);
ko.exportSymbol('utils.fieldsIncludedWithJsonPost', ko.utils.fieldsIncludedWithJsonPost);
ko.exportSymbol('utils.getFormFields', ko.utils.getFormFields);
ko.exportSymbol('utils.peekObservable', ko.utils.peekObservable);
ko.exportSymbol('utils.postJson', ko.utils.postJson);
ko.exportSymbol('utils.parseJson', ko.utils.parseJson);
ko.exportSymbol('utils.registerEventHandler', ko.utils.registerEventHandler);
ko.exportSymbol('utils.stringifyJson', ko.utils.stringifyJson);
ko.exportSymbol('utils.range', ko.utils.range);
ko.exportSymbol('utils.toggleDomNodeCssClass', ko.utils.toggleDomNodeCssClass);
ko.exportSymbol('utils.triggerEvent', ko.utils.triggerEvent);
ko.exportSymbol('utils.unwrapObservable', ko.utils.unwrapObservable);
ko.exportSymbol('utils.objectForEach', ko.utils.objectForEach);
ko.exportSymbol('utils.addOrRemoveItem', ko.utils.addOrRemoveItem);
ko.exportSymbol('unwrap', ko.utils.unwrapObservable); // Convenient shorthand, because this is used so commonly

if (!Function.prototype['bind']) {
    // Function.prototype.bind is a standard part of ECMAScript 5th Edition (December 2009, http://www.ecma-international.org/publications/files/ECMA-ST/ECMA-262.pdf)
    // In case the browser doesn't implement it natively, provide a JavaScript implementation. This implementation is based on the one in prototype.js
    Function.prototype['bind'] = function (object) {
        var originalFunction = this, args = Array.prototype.slice.call(arguments), object = args.shift();
        return function () {
            return originalFunction.apply(object, args.concat(Array.prototype.slice.call(arguments)));
        };
    };
}

ko.utils.domData = new (function () {
    var uniqueId = 0;
    var dataStoreKeyExpandoPropertyName = "__ko__" + (new Date).getTime();
    var dataStore = {};

    function getAll(node, createIfNotFound) {
        var dataStoreKey = node[dataStoreKeyExpandoPropertyName];
        var hasExistingDataStore = dataStoreKey && (dataStoreKey !== "null") && dataStore[dataStoreKey];
        if (!hasExistingDataStore) {
            if (!createIfNotFound)
                return undefined;
            dataStoreKey = node[dataStoreKeyExpandoPropertyName] = "ko" + uniqueId++;
            dataStore[dataStoreKey] = {};
        }
        return dataStore[dataStoreKey];
    }

    return {
        get: function (node, key) {
            var allDataForNode = getAll(node, false);
            return allDataForNode === undefined ? undefined : allDataForNode[key];
        },
        set: function (node, key, value) {
            if (value === undefined) {
                // Make sure we don't actually create a new domData key if we are actually deleting a value
                if (getAll(node, false) === undefined)
                    return;
            }
            var allDataForNode = getAll(node, true);
            allDataForNode[key] = value;
        },
        clear: function (node) {
            var dataStoreKey = node[dataStoreKeyExpandoPropertyName];
            if (dataStoreKey) {
                delete dataStore[dataStoreKey];
                node[dataStoreKeyExpandoPropertyName] = null;
                return true; // Exposing "did clean" flag purely so specs can infer whether things have been cleaned up as intended
            }
            return false;
        },

        nextKey: function () {
            return (uniqueId++) + dataStoreKeyExpandoPropertyName;
        }
    };
})();

ko.exportSymbol('utils.domData', ko.utils.domData);
ko.exportSymbol('utils.domData.clear', ko.utils.domData.clear); // Exporting only so specs can clear up after themselves fully

ko.utils.domNodeDisposal = new (function () {
    var domDataKey = ko.utils.domData.nextKey();
    var cleanableNodeTypes = { 1: true, 8: true, 9: true };       // Element, Comment, Document
    var cleanableNodeTypesWithDescendants = { 1: true, 9: true }; // Element, Document

    function getDisposeCallbacksCollection(node, createIfNotFound) {
        var allDisposeCallbacks = ko.utils.domData.get(node, domDataKey);
        if ((allDisposeCallbacks === undefined) && createIfNotFound) {
            allDisposeCallbacks = [];
            ko.utils.domData.set(node, domDataKey, allDisposeCallbacks);
        }
        return allDisposeCallbacks;
    }
    function destroyCallbacksCollection(node) {
        ko.utils.domData.set(node, domDataKey, undefined);
    }

    function cleanSingleNode(node) {
        // Run all the dispose callbacks
        var callbacks = getDisposeCallbacksCollection(node, false);
        if (callbacks) {
            callbacks = callbacks.slice(0); // Clone, as the array may be modified during iteration (typically, callbacks will remove themselves)
            for (var i = 0; i < callbacks.length; i++)
                callbacks[i](node);
        }

        // Erase the DOM data
        ko.utils.domData.clear(node);

        // Perform cleanup needed by external libraries (currently only jQuery, but can be extended)
        ko.utils.domNodeDisposal["cleanExternalData"](node);

        // Clear any immediate-child comment nodes, as these wouldn't have been found by
        // node.getElementsByTagName("*") in cleanNode() (comment nodes aren't elements)
        if (cleanableNodeTypesWithDescendants[node.nodeType])
            cleanImmediateCommentTypeChildren(node);
    }

    function cleanImmediateCommentTypeChildren(nodeWithChildren) {
        var child, nextChild = nodeWithChildren.firstChild;
        while (child = nextChild) {
            nextChild = child.nextSibling;
            if (child.nodeType === 8)
                cleanSingleNode(child);
        }
    }

    return {
        addDisposeCallback : function(node, callback) {
            if (typeof callback != "function")
                throw new Error("Callback must be a function");
            getDisposeCallbacksCollection(node, true).push(callback);
        },

        removeDisposeCallback : function(node, callback) {
            var callbacksCollection = getDisposeCallbacksCollection(node, false);
            if (callbacksCollection) {
                ko.utils.arrayRemoveItem(callbacksCollection, callback);
                if (callbacksCollection.length == 0)
                    destroyCallbacksCollection(node);
            }
        },

        cleanNode : function(node) {
            // First clean this node, where applicable
            if (cleanableNodeTypes[node.nodeType]) {
                cleanSingleNode(node);

                // ... then its descendants, where applicable
                if (cleanableNodeTypesWithDescendants[node.nodeType]) {
                    // Clone the descendants list in case it changes during iteration
                    var descendants = [];
                    ko.utils.arrayPushAll(descendants, node.getElementsByTagName("*"));
                    for (var i = 0, j = descendants.length; i < j; i++)
                        cleanSingleNode(descendants[i]);
                }
            }
            return node;
        },

        removeNode : function(node) {
            ko.cleanNode(node);
            if (node.parentNode)
                node.parentNode.removeChild(node);
        },

        "cleanExternalData" : function (node) {
            // Special support for jQuery here because it's so commonly used.
            // Many jQuery plugins (including jquery.tmpl) store data using jQuery's equivalent of domData
            // so notify it to tear down any resources associated with the node & descendants here.
            if (jQueryInstance && (typeof jQueryInstance['cleanData'] == "function"))
                jQueryInstance['cleanData']([node]);
        }
    }
})();
ko.cleanNode = ko.utils.domNodeDisposal.cleanNode; // Shorthand name for convenience
ko.removeNode = ko.utils.domNodeDisposal.removeNode; // Shorthand name for convenience
ko.exportSymbol('cleanNode', ko.cleanNode);
ko.exportSymbol('removeNode', ko.removeNode);
ko.exportSymbol('utils.domNodeDisposal', ko.utils.domNodeDisposal);
ko.exportSymbol('utils.domNodeDisposal.addDisposeCallback', ko.utils.domNodeDisposal.addDisposeCallback);
ko.exportSymbol('utils.domNodeDisposal.removeDisposeCallback', ko.utils.domNodeDisposal.removeDisposeCallback);
(function () {
    var leadingCommentRegex = /^(\s*)<!--(.*?)-->/;

    function simpleHtmlParse(html) {
        // Based on jQuery's "clean" function, but only accounting for table-related elements.
        // If you have referenced jQuery, this won't be used anyway - KO will use jQuery's "clean" function directly

        // Note that there's still an issue in IE < 9 whereby it will discard comment nodes that are the first child of
        // a descendant node. For example: "<div><!-- mycomment -->abc</div>" will get parsed as "<div>abc</div>"
        // This won't affect anyone who has referenced jQuery, and there's always the workaround of inserting a dummy node
        // (possibly a text node) in front of the comment. So, KO does not attempt to workaround this IE issue automatically at present.

        // Trim whitespace, otherwise indexOf won't work as expected
        var tags = ko.utils.stringTrim(html).toLowerCase(), div = document.createElement("div");

        // Finds the first match from the left column, and returns the corresponding "wrap" data from the right column
        var wrap = tags.match(/^<(thead|tbody|tfoot)/)              && [1, "<table>", "</table>"] ||
                   !tags.indexOf("<tr")                             && [2, "<table><tbody>", "</tbody></table>"] ||
                   (!tags.indexOf("<td") || !tags.indexOf("<th"))   && [3, "<table><tbody><tr>", "</tr></tbody></table>"] ||
                   /* anything else */                                 [0, "", ""];

        // Go to html and back, then peel off extra wrappers
        // Note that we always prefix with some dummy text, because otherwise, IE<9 will strip out leading comment nodes in descendants. Total madness.
        var markup = "ignored<div>" + wrap[1] + html + wrap[2] + "</div>";
        if (typeof window['innerShiv'] == "function") {
            div.appendChild(window['innerShiv'](markup));
        } else {
            div.innerHTML = markup;
        }

        // Move to the right depth
        while (wrap[0]--)
            div = div.lastChild;

        return ko.utils.makeArray(div.lastChild.childNodes);
    }

    function jQueryHtmlParse(html) {
        // jQuery's "parseHTML" function was introduced in jQuery 1.8.0 and is a documented public API.
        if (jQueryInstance['parseHTML']) {
            return jQueryInstance['parseHTML'](html) || []; // Ensure we always return an array and never null
        } else {
            // For jQuery < 1.8.0, we fall back on the undocumented internal "clean" function.
            var elems = jQueryInstance['clean']([html]);

            // As of jQuery 1.7.1, jQuery parses the HTML by appending it to some dummy parent nodes held in an in-memory document fragment.
            // Unfortunately, it never clears the dummy parent nodes from the document fragment, so it leaks memory over time.
            // Fix this by finding the top-most dummy parent element, and detaching it from its owner fragment.
            if (elems && elems[0]) {
                // Find the top-most parent element that's a direct child of a document fragment
                var elem = elems[0];
                while (elem.parentNode && elem.parentNode.nodeType !== 11 /* i.e., DocumentFragment */)
                    elem = elem.parentNode;
                // ... then detach it
                if (elem.parentNode)
                    elem.parentNode.removeChild(elem);
            }

            return elems;
        }
    }

    ko.utils.parseHtmlFragment = function(html) {
        return jQueryInstance ? jQueryHtmlParse(html)   // As below, benefit from jQuery's optimisations where possible
                              : simpleHtmlParse(html);  // ... otherwise, this simple logic will do in most common cases.
    };

    ko.utils.setHtml = function(node, html) {
        ko.utils.emptyDomNode(node);

        // There's no legitimate reason to display a stringified observable without unwrapping it, so we'll unwrap it
        html = ko.utils.unwrapObservable(html);

        if ((html !== null) && (html !== undefined)) {
            if (typeof html != 'string')
                html = html.toString();

            // jQuery contains a lot of sophisticated code to parse arbitrary HTML fragments,
            // for example <tr> elements which are not normally allowed to exist on their own.
            // If you've referenced jQuery we'll use that rather than duplicating its code.
            if (jQueryInstance) {
                jQueryInstance(node)['html'](html);
            } else {
                // ... otherwise, use KO's own parsing logic.
                var parsedNodes = ko.utils.parseHtmlFragment(html);
                for (var i = 0; i < parsedNodes.length; i++)
                    node.appendChild(parsedNodes[i]);
            }
        }
    };
})();

ko.exportSymbol('utils.parseHtmlFragment', ko.utils.parseHtmlFragment);
ko.exportSymbol('utils.setHtml', ko.utils.setHtml);

ko.memoization = (function () {
    var memos = {};

    function randomMax8HexChars() {
        return (((1 + Math.random()) * 0x100000000) | 0).toString(16).substring(1);
    }
    function generateRandomId() {
        return randomMax8HexChars() + randomMax8HexChars();
    }
    function findMemoNodes(rootNode, appendToArray) {
        if (!rootNode)
            return;
        if (rootNode.nodeType == 8) {
            var memoId = ko.memoization.parseMemoText(rootNode.nodeValue);
            if (memoId != null)
                appendToArray.push({ domNode: rootNode, memoId: memoId });
        } else if (rootNode.nodeType == 1) {
            for (var i = 0, childNodes = rootNode.childNodes, j = childNodes.length; i < j; i++)
                findMemoNodes(childNodes[i], appendToArray);
        }
    }

    return {
        memoize: function (callback) {
            if (typeof callback != "function")
                throw new Error("You can only pass a function to ko.memoization.memoize()");
            var memoId = generateRandomId();
            memos[memoId] = callback;
            return "<!--[ko_memo:" + memoId + "]-->";
        },

        unmemoize: function (memoId, callbackParams) {
            var callback = memos[memoId];
            if (callback === undefined)
                throw new Error("Couldn't find any memo with ID " + memoId + ". Perhaps it's already been unmemoized.");
            try {
                callback.apply(null, callbackParams || []);
                return true;
            }
            finally { delete memos[memoId]; }
        },

        unmemoizeDomNodeAndDescendants: function (domNode, extraCallbackParamsArray) {
            var memos = [];
            findMemoNodes(domNode, memos);
            for (var i = 0, j = memos.length; i < j; i++) {
                var node = memos[i].domNode;
                var combinedParams = [node];
                if (extraCallbackParamsArray)
                    ko.utils.arrayPushAll(combinedParams, extraCallbackParamsArray);
                ko.memoization.unmemoize(memos[i].memoId, combinedParams);
                node.nodeValue = ""; // Neuter this node so we don't try to unmemoize it again
                if (node.parentNode)
                    node.parentNode.removeChild(node); // If possible, erase it totally (not always possible - someone else might just hold a reference to it then call unmemoizeDomNodeAndDescendants again)
            }
        },

        parseMemoText: function (memoText) {
            var match = memoText.match(/^\[ko_memo\:(.*?)\]$/);
            return match ? match[1] : null;
        }
    };
})();

ko.exportSymbol('memoization', ko.memoization);
ko.exportSymbol('memoization.memoize', ko.memoization.memoize);
ko.exportSymbol('memoization.unmemoize', ko.memoization.unmemoize);
ko.exportSymbol('memoization.parseMemoText', ko.memoization.parseMemoText);
ko.exportSymbol('memoization.unmemoizeDomNodeAndDescendants', ko.memoization.unmemoizeDomNodeAndDescendants);
ko.extenders = {
    'throttle': function(target, timeout) {
        // Throttling means two things:

        // (1) For dependent observables, we throttle *evaluations* so that, no matter how fast its dependencies
        //     notify updates, the target doesn't re-evaluate (and hence doesn't notify) faster than a certain rate
        target['throttleEvaluation'] = timeout;

        // (2) For writable targets (observables, or writable dependent observables), we throttle *writes*
        //     so the target cannot change value synchronously or faster than a certain rate
        var writeTimeoutInstance = null;
        return ko.dependentObservable({
            'read': target,
            'write': function(value) {
                clearTimeout(writeTimeoutInstance);
                writeTimeoutInstance = setTimeout(function() {
                    target(value);
                }, timeout);
            }
        });
    },

    'rateLimit': function(target, options) {
        var timeout, method, limitFunction;

        if (typeof options == 'number') {
            timeout = options;
        } else {
            timeout = options['timeout'];
            method = options['method'];
        }

        limitFunction = method == 'notifyWhenChangesStop' ?  debounce : throttle;
        target.limit(function(callback) {
            return limitFunction(callback, timeout);
        });
    },

    'notify': function(target, notifyWhen) {
        target["equalityComparer"] = notifyWhen == "always" ?
            null :  // null equalityComparer means to always notify
            valuesArePrimitiveAndEqual;
    }
};

var primitiveTypes = { 'undefined':1, 'boolean':1, 'number':1, 'string':1 };
function valuesArePrimitiveAndEqual(a, b) {
    var oldValueIsPrimitive = (a === null) || (typeof(a) in primitiveTypes);
    return oldValueIsPrimitive ? (a === b) : false;
}

function throttle(callback, timeout) {
    var timeoutInstance;
    return function () {
        if (!timeoutInstance) {
            timeoutInstance = setTimeout(function() {
                timeoutInstance = undefined;
                callback();
            }, timeout);
        }
    };
}

function debounce(callback, timeout) {
    var timeoutInstance;
    return function () {
        clearTimeout(timeoutInstance);
        timeoutInstance = setTimeout(callback, timeout);
    };
}

function applyExtenders(requestedExtenders) {
    var target = this;
    if (requestedExtenders) {
        ko.utils.objectForEach(requestedExtenders, function(key, value) {
            var extenderHandler = ko.extenders[key];
            if (typeof extenderHandler == 'function') {
                target = extenderHandler(target, value) || target;
            }
        });
    }
    return target;
}

ko.exportSymbol('extenders', ko.extenders);

ko.subscription = function (target, callback, disposeCallback) {
    this.target = target;
    this.callback = callback;
    this.disposeCallback = disposeCallback;
    this.isDisposed = false;
    ko.exportProperty(this, 'dispose', this.dispose);
};
ko.subscription.prototype.dispose = function () {
    this.isDisposed = true;
    this.disposeCallback();
};

ko.subscribable = function () {
    ko.utils.setPrototypeOfOrExtend(this, ko.subscribable['fn']);
    this._subscriptions = {};
}

var defaultEvent = "change";

var ko_subscribable_fn = {
    subscribe: function (callback, callbackTarget, event) {
        var self = this;

        event = event || defaultEvent;
        var boundCallback = callbackTarget ? callback.bind(callbackTarget) : callback;

        var subscription = new ko.subscription(self, boundCallback, function () {
            ko.utils.arrayRemoveItem(self._subscriptions[event], subscription);
            if (self.afterSubscriptionRemove)
                self.afterSubscriptionRemove(event);
        });

        if (self.beforeSubscriptionAdd)
            self.beforeSubscriptionAdd(event);

        if (!self._subscriptions[event])
            self._subscriptions[event] = [];
        self._subscriptions[event].push(subscription);

        return subscription;
    },

    "notifySubscribers": function (valueToNotify, event) {
        event = event || defaultEvent;
        if (this.hasSubscriptionsForEvent(event)) {
            try {
                ko.dependencyDetection.begin(); // Begin suppressing dependency detection (by setting the top frame to undefined)
                for (var a = this._subscriptions[event].slice(0), i = 0, subscription; subscription = a[i]; ++i) {
                    // In case a subscription was disposed during the arrayForEach cycle, check
                    // for isDisposed on each subscription before invoking its callback
                    if (!subscription.isDisposed)
                        subscription.callback(valueToNotify);
                }
            } finally {
                ko.dependencyDetection.end(); // End suppressing dependency detection
            }
        }
    },

    limit: function(limitFunction) {
        var self = this, selfIsObservable = ko.isObservable(self),
            isPending, previousValue, pendingValue, beforeChange = 'beforeChange';

        if (!self._origNotifySubscribers) {
            self._origNotifySubscribers = self["notifySubscribers"];
            self["notifySubscribers"] = function(value, event) {
                if (!event || event === defaultEvent) {
                    self._rateLimitedChange(value);
                } else if (event === beforeChange) {
                    self._rateLimitedBeforeChange(value);
                } else {
                    self._origNotifySubscribers(value, event);
                }
            };
        }

        var finish = limitFunction(function() {
            // If an observable provided a reference to itself, access it to get the latest value.
            // This allows computed observables to delay calculating their value until needed.
            if (selfIsObservable && pendingValue === self) {
                pendingValue = self();
            }
            isPending = false;
            if (self.isDifferent(previousValue, pendingValue)) {
                self._origNotifySubscribers(previousValue = pendingValue);
            }
        });

        self._rateLimitedChange = function(value) {
            isPending = true;
            pendingValue = value;
            finish();
        };
        self._rateLimitedBeforeChange = function(value) {
            if (!isPending) {
                previousValue = value;
                self._origNotifySubscribers(value, beforeChange);
            }
        };
    },

    hasSubscriptionsForEvent: function(event) {
        return this._subscriptions[event] && this._subscriptions[event].length;
    },

    getSubscriptionsCount: function () {
        var total = 0;
        ko.utils.objectForEach(this._subscriptions, function(eventName, subscriptions) {
            total += subscriptions.length;
        });
        return total;
    },

    isDifferent: function(oldValue, newValue) {
        return !this['equalityComparer'] || !this['equalityComparer'](oldValue, newValue);
    },

    extend: applyExtenders
};

ko.exportProperty(ko_subscribable_fn, 'subscribe', ko_subscribable_fn.subscribe);
ko.exportProperty(ko_subscribable_fn, 'extend', ko_subscribable_fn.extend);
ko.exportProperty(ko_subscribable_fn, 'getSubscriptionsCount', ko_subscribable_fn.getSubscriptionsCount);

// For browsers that support proto assignment, we overwrite the prototype of each
// observable instance. Since observables are functions, we need Function.prototype
// to still be in the prototype chain.
if (ko.utils.canSetPrototype) {
    ko.utils.setPrototypeOf(ko_subscribable_fn, Function.prototype);
}

ko.subscribable['fn'] = ko_subscribable_fn;


ko.isSubscribable = function (instance) {
    return instance != null && typeof instance.subscribe == "function" && typeof instance["notifySubscribers"] == "function";
};

ko.exportSymbol('subscribable', ko.subscribable);
ko.exportSymbol('isSubscribable', ko.isSubscribable);

ko.computedContext = ko.dependencyDetection = (function () {
    var outerFrames = [],
        currentFrame,
        lastId = 0;

    // Return a unique ID that can be assigned to an observable for dependency tracking.
    // Theoretically, you could eventually overflow the number storage size, resulting
    // in duplicate IDs. But in JavaScript, the largest exact integral value is 2^53
    // or 9,007,199,254,740,992. If you created 1,000,000 IDs per second, it would
    // take over 285 years to reach that number.
    // Reference http://blog.vjeux.com/2010/javascript/javascript-max_int-number-limits.html
    function getId() {
        return ++lastId;
    }

    function begin(options) {
        outerFrames.push(currentFrame);
        currentFrame = options;
    }

    function end() {
        currentFrame = outerFrames.pop();
    }

    return {
        begin: begin,

        end: end,

        registerDependency: function (subscribable) {
            if (currentFrame) {
                if (!ko.isSubscribable(subscribable))
                    throw new Error("Only subscribable things can act as dependencies");
                currentFrame.callback(subscribable, subscribable._id || (subscribable._id = getId()));
            }
        },

        ignore: function (callback, callbackTarget, callbackArgs) {
            try {
                begin();
                return callback.apply(callbackTarget, callbackArgs || []);
            } finally {
                end();
            }
        },

        getDependenciesCount: function () {
            if (currentFrame)
                return currentFrame.computed.getDependenciesCount();
        },

        isInitial: function() {
            if (currentFrame)
                return currentFrame.isInitial;
        }
    };
})();

ko.exportSymbol('computedContext', ko.computedContext);
ko.exportSymbol('computedContext.getDependenciesCount', ko.computedContext.getDependenciesCount);
ko.exportSymbol('computedContext.isInitial', ko.computedContext.isInitial);
ko.exportSymbol('computedContext.isSleeping', ko.computedContext.isSleeping);
ko.observable = function (initialValue) {
    var _latestValue = initialValue;

    function observable() {
        if (arguments.length > 0) {
            // Write

            // Ignore writes if the value hasn't changed
            if (observable.isDifferent(_latestValue, arguments[0])) {
                observable.valueWillMutate();
                _latestValue = arguments[0];
                if (DEBUG) observable._latestValue = _latestValue;
                observable.valueHasMutated();
            }
            return this; // Permits chained assignments
        }
        else {
            // Read
            ko.dependencyDetection.registerDependency(observable); // The caller only needs to be notified of changes if they did a "read" operation
            return _latestValue;
        }
    }
    ko.subscribable.call(observable);
    ko.utils.setPrototypeOfOrExtend(observable, ko.observable['fn']);

    if (DEBUG) observable._latestValue = _latestValue;
    observable.peek = function() { return _latestValue };
    observable.valueHasMutated = function () { observable["notifySubscribers"](_latestValue); }
    observable.valueWillMutate = function () { observable["notifySubscribers"](_latestValue, "beforeChange"); }

    ko.exportProperty(observable, 'peek', observable.peek);
    ko.exportProperty(observable, "valueHasMutated", observable.valueHasMutated);
    ko.exportProperty(observable, "valueWillMutate", observable.valueWillMutate);

    return observable;
}

ko.observable['fn'] = {
    "equalityComparer": valuesArePrimitiveAndEqual
};

var protoProperty = ko.observable.protoProperty = "__ko_proto__";
ko.observable['fn'][protoProperty] = ko.observable;

// Note that for browsers that don't support proto assignment, the
// inheritance chain is created manually in the ko.observable constructor
if (ko.utils.canSetPrototype) {
    ko.utils.setPrototypeOf(ko.observable['fn'], ko.subscribable['fn']);
}

ko.hasPrototype = function(instance, prototype) {
    if ((instance === null) || (instance === undefined) || (instance[protoProperty] === undefined)) return false;
    if (instance[protoProperty] === prototype) return true;
    return ko.hasPrototype(instance[protoProperty], prototype); // Walk the prototype chain
};

ko.isObservable = function (instance) {
    return ko.hasPrototype(instance, ko.observable);
}
ko.isWriteableObservable = function (instance) {
    // Observable
    if ((typeof instance == "function") && instance[protoProperty] === ko.observable)
        return true;
    // Writeable dependent observable
    if ((typeof instance == "function") && (instance[protoProperty] === ko.dependentObservable) && (instance.hasWriteFunction))
        return true;
    // Anything else
    return false;
}


ko.exportSymbol('observable', ko.observable);
ko.exportSymbol('isObservable', ko.isObservable);
ko.exportSymbol('isWriteableObservable', ko.isWriteableObservable);
ko.exportSymbol('isWritableObservable', ko.isWriteableObservable);
ko.observableArray = function (initialValues) {
    initialValues = initialValues || [];

    if (typeof initialValues != 'object' || !('length' in initialValues))
        throw new Error("The argument passed when initializing an observable array must be an array, or null, or undefined.");

    var result = ko.observable(initialValues);
    ko.utils.setPrototypeOfOrExtend(result, ko.observableArray['fn']);
    return result.extend({'trackArrayChanges':true});
};

ko.observableArray['fn'] = {
    'remove': function (valueOrPredicate) {
        var underlyingArray = this.peek();
        var removedValues = [];
        var predicate = typeof valueOrPredicate == "function" && !ko.isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate; };
        for (var i = 0; i < underlyingArray.length; i++) {
            var value = underlyingArray[i];
            if (predicate(value)) {
                if (removedValues.length === 0) {
                    this.valueWillMutate();
                }
                removedValues.push(value);
                underlyingArray.splice(i, 1);
                i--;
            }
        }
        if (removedValues.length) {
            this.valueHasMutated();
        }
        return removedValues;
    },

    'removeAll': function (arrayOfValues) {
        // If you passed zero args, we remove everything
        if (arrayOfValues === undefined) {
            var underlyingArray = this.peek();
            var allValues = underlyingArray.slice(0);
            this.valueWillMutate();
            underlyingArray.splice(0, underlyingArray.length);
            this.valueHasMutated();
            return allValues;
        }
        // If you passed an arg, we interpret it as an array of entries to remove
        if (!arrayOfValues)
            return [];
        return this['remove'](function (value) {
            return ko.utils.arrayIndexOf(arrayOfValues, value) >= 0;
        });
    },

    'destroy': function (valueOrPredicate) {
        var underlyingArray = this.peek();
        var predicate = typeof valueOrPredicate == "function" && !ko.isObservable(valueOrPredicate) ? valueOrPredicate : function (value) { return value === valueOrPredicate; };
        this.valueWillMutate();
        for (var i = underlyingArray.length - 1; i >= 0; i--) {
            var value = underlyingArray[i];
            if (predicate(value))
                underlyingArray[i]["_destroy"] = true;
        }
        this.valueHasMutated();
    },

    'destroyAll': function (arrayOfValues) {
        // If you passed zero args, we destroy everything
        if (arrayOfValues === undefined)
            return this['destroy'](function() { return true });

        // If you passed an arg, we interpret it as an array of entries to destroy
        if (!arrayOfValues)
            return [];
        return this['destroy'](function (value) {
            return ko.utils.arrayIndexOf(arrayOfValues, value) >= 0;
        });
    },

    'indexOf': function (item) {
        var underlyingArray = this();
        return ko.utils.arrayIndexOf(underlyingArray, item);
    },

    'replace': function(oldItem, newItem) {
        var index = this['indexOf'](oldItem);
        if (index >= 0) {
            this.valueWillMutate();
            this.peek()[index] = newItem;
            this.valueHasMutated();
        }
    }
};

// Populate ko.observableArray.fn with read/write functions from native arrays
// Important: Do not add any additional functions here that may reasonably be used to *read* data from the array
// because we'll eval them without causing subscriptions, so ko.computed output could end up getting stale
ko.utils.arrayForEach(["pop", "push", "reverse", "shift", "sort", "splice", "unshift"], function (methodName) {
    ko.observableArray['fn'][methodName] = function () {
        // Use "peek" to avoid creating a subscription in any computed that we're executing in the context of
        // (for consistency with mutating regular observables)
        var underlyingArray = this.peek();
        this.valueWillMutate();
        this.cacheDiffForKnownOperation(underlyingArray, methodName, arguments);
        var methodCallResult = underlyingArray[methodName].apply(underlyingArray, arguments);
        this.valueHasMutated();
        return methodCallResult;
    };
});

// Populate ko.observableArray.fn with read-only functions from native arrays
ko.utils.arrayForEach(["slice"], function (methodName) {
    ko.observableArray['fn'][methodName] = function () {
        var underlyingArray = this();
        return underlyingArray[methodName].apply(underlyingArray, arguments);
    };
});

// Note that for browsers that don't support proto assignment, the
// inheritance chain is created manually in the ko.observableArray constructor
if (ko.utils.canSetPrototype) {
    ko.utils.setPrototypeOf(ko.observableArray['fn'], ko.observable['fn']);
}

ko.exportSymbol('observableArray', ko.observableArray);
var arrayChangeEventName = 'arrayChange';
ko.extenders['trackArrayChanges'] = function(target) {
    // Only modify the target observable once
    if (target.cacheDiffForKnownOperation) {
        return;
    }
    var trackingChanges = false,
        cachedDiff = null,
        pendingNotifications = 0,
        underlyingSubscribeFunction = target.subscribe;

    // Intercept "subscribe" calls, and for array change events, ensure change tracking is enabled
    target.subscribe = target['subscribe'] = function(callback, callbackTarget, event) {
        if (event === arrayChangeEventName) {
            trackChanges();
        }
        return underlyingSubscribeFunction.apply(this, arguments);
    };

    function trackChanges() {
        // Calling 'trackChanges' multiple times is the same as calling it once
        if (trackingChanges) {
            return;
        }

        trackingChanges = true;

        // Intercept "notifySubscribers" to track how many times it was called.
        var underlyingNotifySubscribersFunction = target['notifySubscribers'];
        target['notifySubscribers'] = function(valueToNotify, event) {
            if (!event || event === defaultEvent) {
                ++pendingNotifications;
            }
            return underlyingNotifySubscribersFunction.apply(this, arguments);
        };

        // Each time the array changes value, capture a clone so that on the next
        // change it's possible to produce a diff
        var previousContents = [].concat(target.peek() || []);
        cachedDiff = null;
        target.subscribe(function(currentContents) {
            // Make a copy of the current contents and ensure it's an array
            currentContents = [].concat(currentContents || []);

            // Compute the diff and issue notifications, but only if someone is listening
            if (target.hasSubscriptionsForEvent(arrayChangeEventName)) {
                var changes = getChanges(previousContents, currentContents);
                if (changes.length) {
                    target['notifySubscribers'](changes, arrayChangeEventName);
                }
            }

            // Eliminate references to the old, removed items, so they can be GCed
            previousContents = currentContents;
            cachedDiff = null;
            pendingNotifications = 0;
        });
    }

    function getChanges(previousContents, currentContents) {
        // We try to re-use cached diffs.
        // The scenarios where pendingNotifications > 1 are when using rate-limiting or the Deferred Updates
        // plugin, which without this check would not be compatible with arrayChange notifications. Normally,
        // notifications are issued immediately so we wouldn't be queueing up more than one.
        if (!cachedDiff || pendingNotifications > 1) {
            cachedDiff = ko.utils.compareArrays(previousContents, currentContents, { 'sparse': true });
        }

        return cachedDiff;
    }

    target.cacheDiffForKnownOperation = function(rawArray, operationName, args) {
        // Only run if we're currently tracking changes for this observable array
        // and there aren't any pending deferred notifications.
        if (!trackingChanges || pendingNotifications) {
            return;
        }
        var diff = [],
            arrayLength = rawArray.length,
            argsLength = args.length,
            offset = 0;

        function pushDiff(status, value, index) {
            return diff[diff.length] = { 'status': status, 'value': value, 'index': index };
        }
        switch (operationName) {
            case 'push':
                offset = arrayLength;
            case 'unshift':
                for (var index = 0; index < argsLength; index++) {
                    pushDiff('added', args[index], offset + index);
                }
                break;

            case 'pop':
                offset = arrayLength - 1;
            case 'shift':
                if (arrayLength) {
                    pushDiff('deleted', rawArray[offset], offset);
                }
                break;

            case 'splice':
                // Negative start index means 'from end of array'. After that we clamp to [0...arrayLength].
                // See https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Array/splice
                var startIndex = Math.min(Math.max(0, args[0] < 0 ? arrayLength + args[0] : args[0]), arrayLength),
                    endDeleteIndex = argsLength === 1 ? arrayLength : Math.min(startIndex + (args[1] || 0), arrayLength),
                    endAddIndex = startIndex + argsLength - 2,
                    endIndex = Math.max(endDeleteIndex, endAddIndex),
                    additions = [], deletions = [];
                for (var index = startIndex, argsIndex = 2; index < endIndex; ++index, ++argsIndex) {
                    if (index < endDeleteIndex)
                        deletions.push(pushDiff('deleted', rawArray[index], index));
                    if (index < endAddIndex)
                        additions.push(pushDiff('added', args[argsIndex], index));
                }
                ko.utils.findMovesInArrayComparison(deletions, additions);
                break;

            default:
                return;
        }
        cachedDiff = diff;
    };
};
ko.computed = ko.dependentObservable = function (evaluatorFunctionOrOptions, evaluatorFunctionTarget, options) {
    var _latestValue,
        _needsEvaluation = true,
        _isBeingEvaluated = false,
        _suppressDisposalUntilDisposeWhenReturnsFalse = false,
        _isDisposed = false,
        readFunction = evaluatorFunctionOrOptions,
        pure = false,
        isSleeping = false;

    if (readFunction && typeof readFunction == "object") {
        // Single-parameter syntax - everything is on this "options" param
        options = readFunction;
        readFunction = options["read"];
    } else {
        // Multi-parameter syntax - construct the options according to the params passed
        options = options || {};
        if (!readFunction)
            readFunction = options["read"];
    }
    if (typeof readFunction != "function")
        throw new Error("Pass a function that returns the value of the ko.computed");

    function addSubscriptionToDependency(subscribable, id) {
        if (!_subscriptionsToDependencies[id]) {
            _subscriptionsToDependencies[id] = subscribable.subscribe(evaluatePossiblyAsync);
            ++_dependenciesCount;
        }
    }

    function disposeAllSubscriptionsToDependencies() {
        ko.utils.objectForEach(_subscriptionsToDependencies, function (id, subscription) {
            subscription.dispose();
        });
        _subscriptionsToDependencies = {};
    }

    function disposeComputed() {
        disposeAllSubscriptionsToDependencies();
        _dependenciesCount = 0;
        _isDisposed = true;
        _needsEvaluation = false;
    }

    function evaluatePossiblyAsync() {
        var throttleEvaluationTimeout = dependentObservable['throttleEvaluation'];
        if (throttleEvaluationTimeout && throttleEvaluationTimeout >= 0) {
            clearTimeout(evaluationTimeoutInstance);
            evaluationTimeoutInstance = setTimeout(evaluateImmediate, throttleEvaluationTimeout);
        } else if (dependentObservable._evalRateLimited) {
            dependentObservable._evalRateLimited();
        } else {
            evaluateImmediate();
        }
    }

    function evaluateImmediate(suppressChangeNotification) {
        if (_isBeingEvaluated) {
            if (pure) {
                throw Error("A 'pure' computed must not be called recursively");
            }
            // If the evaluation of a ko.computed causes side effects, it's possible that it will trigger its own re-evaluation.
            // This is not desirable (it's hard for a developer to realise a chain of dependencies might cause this, and they almost
            // certainly didn't intend infinite re-evaluations). So, for predictability, we simply prevent ko.computeds from causing
            // their own re-evaluation. Further discussion at https://github.com/SteveSanderson/knockout/pull/387
            return;
        }

        // Do not evaluate (and possibly capture new dependencies) if disposed
        if (_isDisposed) {
            return;
        }

        if (disposeWhen && disposeWhen()) {
            // See comment below about _suppressDisposalUntilDisposeWhenReturnsFalse
            if (!_suppressDisposalUntilDisposeWhenReturnsFalse) {
                dispose();
                return;
            }
        } else {
            // It just did return false, so we can stop suppressing now
            _suppressDisposalUntilDisposeWhenReturnsFalse = false;
        }

        _isBeingEvaluated = true;

        // When sleeping, recalculate the value and return.
        if (isSleeping) {
            try {
                var dependencyTracking = {};
                ko.dependencyDetection.begin({
                    callback: function (subscribable, id) {
                        if (!dependencyTracking[id]) {
                            dependencyTracking[id] = 1;
                            ++_dependenciesCount;
                        }
                    },
                    computed: dependentObservable,
                    isInitial: undefined
                });
                _dependenciesCount = 0;
                _latestValue = readFunction.call(evaluatorFunctionTarget);
            } finally {
                ko.dependencyDetection.end();
                _isBeingEvaluated = false;
            }
        } else {
            try {
                // Initially, we assume that none of the subscriptions are still being used (i.e., all are candidates for disposal).
                // Then, during evaluation, we cross off any that are in fact still being used.
                var disposalCandidates = _subscriptionsToDependencies, disposalCount = _dependenciesCount;
                ko.dependencyDetection.begin({
                    callback: function(subscribable, id) {
                        if (!_isDisposed) {
                            if (disposalCount && disposalCandidates[id]) {
                                // Don't want to dispose this subscription, as it's still being used
                                _subscriptionsToDependencies[id] = disposalCandidates[id];
                                ++_dependenciesCount;
                                delete disposalCandidates[id];
                                --disposalCount;
                            } else {
                                // Brand new subscription - add it
                                addSubscriptionToDependency(subscribable, id);
                            }
                        }
                    },
                    computed: dependentObservable,
                    isInitial: pure ? undefined : !_dependenciesCount        // If we're evaluating when there are no previous dependencies, it must be the first time
                });

                _subscriptionsToDependencies = {};
                _dependenciesCount = 0;

                try {
                    var newValue = evaluatorFunctionTarget ? readFunction.call(evaluatorFunctionTarget) : readFunction();

                } finally {
                    ko.dependencyDetection.end();

                    // For each subscription no longer being used, remove it from the active subscriptions list and dispose it
                    if (disposalCount) {
                        ko.utils.objectForEach(disposalCandidates, function(id, toDispose) {
                            toDispose.dispose();
                        });
                    }

                    _needsEvaluation = false;
                }

                if (dependentObservable.isDifferent(_latestValue, newValue)) {
                    dependentObservable["notifySubscribers"](_latestValue, "beforeChange");

                    _latestValue = newValue;
                    if (DEBUG) dependentObservable._latestValue = _latestValue;

                    if (suppressChangeNotification !== true) {  // Check for strict true value since setTimeout in Firefox passes a numeric value to the function
                        dependentObservable["notifySubscribers"](_latestValue);
                    }
                }
            } finally {
                _isBeingEvaluated = false;
            }
        }

        if (!_dependenciesCount)
            dispose();
    }

    function dependentObservable() {
        if (arguments.length > 0) {
            if (typeof writeFunction === "function") {
                // Writing a value
                writeFunction.apply(evaluatorFunctionTarget, arguments);
            } else {
                throw new Error("Cannot write a value to a ko.computed unless you specify a 'write' option. If you wish to read the current value, don't pass any parameters.");
            }
            return this; // Permits chained assignments
        } else {
            // Reading the value
            ko.dependencyDetection.registerDependency(dependentObservable);
            if (_needsEvaluation)
                evaluateImmediate(true /* suppressChangeNotification */);
            return _latestValue;
        }
    }

    function peek() {
        // Peek won't re-evaluate, except to get the initial value when "deferEvaluation" is set, or while the computed is sleeping.
        // Those are the only times that both of these conditions will be satisfied.
        if (_needsEvaluation && !_dependenciesCount)
            evaluateImmediate(true /* suppressChangeNotification */);
        return _latestValue;
    }

    function isActive() {
        return _needsEvaluation || _dependenciesCount > 0;
    }

    // By here, "options" is always non-null
    var writeFunction = options["write"],
        disposeWhenNodeIsRemoved = options["disposeWhenNodeIsRemoved"] || options.disposeWhenNodeIsRemoved || null,
        disposeWhenOption = options["disposeWhen"] || options.disposeWhen,
        disposeWhen = disposeWhenOption,
        dispose = disposeComputed,
        _subscriptionsToDependencies = {},
        _dependenciesCount = 0,
        evaluationTimeoutInstance = null;

    if (!evaluatorFunctionTarget)
        evaluatorFunctionTarget = options["owner"];

    ko.subscribable.call(dependentObservable);
    ko.utils.setPrototypeOfOrExtend(dependentObservable, ko.dependentObservable['fn']);

    dependentObservable.peek = peek;
    dependentObservable.getDependenciesCount = function () { return _dependenciesCount; };
    dependentObservable.hasWriteFunction = typeof options["write"] === "function";
    dependentObservable.dispose = function () { dispose(); };
    dependentObservable.isActive = isActive;

    // Replace the limit function with one that delays evaluation as well.
    var originalLimit = dependentObservable.limit;
    dependentObservable.limit = function(limitFunction) {
        originalLimit.call(dependentObservable, limitFunction);
        dependentObservable._evalRateLimited = function() {
            dependentObservable._rateLimitedBeforeChange(_latestValue);

            _needsEvaluation = true;    // Mark as dirty

            // Pass the observable to the rate-limit code, which will access it when
            // it's time to do the notification.
            dependentObservable._rateLimitedChange(dependentObservable);
        }
    };

    if (options['pure']) {
        pure = true;
        isSleeping = true;     // Starts off sleeping; will awake on the first subscription
        dependentObservable.beforeSubscriptionAdd = function () {
            // If asleep, wake up the computed and evaluate to register any dependencies.
            if (isSleeping) {
                isSleeping = false;
                evaluateImmediate(true /* suppressChangeNotification */);
            }
        }
        dependentObservable.afterSubscriptionRemove = function () {
            if (!dependentObservable.getSubscriptionsCount()) {
                disposeAllSubscriptionsToDependencies();
                isSleeping = _needsEvaluation = true;
            }
        }
    } else if (options['deferEvaluation']) {
        // This will force a computed with deferEvaluation to evaluate when the first subscriptions is registered.
        dependentObservable.beforeSubscriptionAdd = function () {
            peek();
            delete dependentObservable.beforeSubscriptionAdd;
        }
    }

    ko.exportProperty(dependentObservable, 'peek', dependentObservable.peek);
    ko.exportProperty(dependentObservable, 'dispose', dependentObservable.dispose);
    ko.exportProperty(dependentObservable, 'isActive', dependentObservable.isActive);
    ko.exportProperty(dependentObservable, 'getDependenciesCount', dependentObservable.getDependenciesCount);

    // Add a "disposeWhen" callback that, on each evaluation, disposes if the node was removed without using ko.removeNode.
    if (disposeWhenNodeIsRemoved) {
        // Since this computed is associated with a DOM node, and we don't want to dispose the computed
        // until the DOM node is *removed* from the document (as opposed to never having been in the document),
        // we'll prevent disposal until "disposeWhen" first returns false.
        _suppressDisposalUntilDisposeWhenReturnsFalse = true;

        // Only watch for the node's disposal if the value really is a node. It might not be,
        // e.g., { disposeWhenNodeIsRemoved: true } can be used to opt into the "only dispose
        // after first false result" behaviour even if there's no specific node to watch. This
        // technique is intended for KO's internal use only and shouldn't be documented or used
        // by application code, as it's likely to change in a future version of KO.
        if (disposeWhenNodeIsRemoved.nodeType) {
            disposeWhen = function () {
                return !ko.utils.domNodeIsAttachedToDocument(disposeWhenNodeIsRemoved) || (disposeWhenOption && disposeWhenOption());
            };
        }
    }

    // Evaluate, unless sleeping or deferEvaluation is true
    if (!isSleeping && !options['deferEvaluation'])
        evaluateImmediate();

    // Attach a DOM node disposal callback so that the computed will be proactively disposed as soon as the node is
    // removed using ko.removeNode. But skip if isActive is false (there will never be any dependencies to dispose).
    if (disposeWhenNodeIsRemoved && isActive() && disposeWhenNodeIsRemoved.nodeType) {
        dispose = function() {
            ko.utils.domNodeDisposal.removeDisposeCallback(disposeWhenNodeIsRemoved, dispose);
            disposeComputed();
        };
        ko.utils.domNodeDisposal.addDisposeCallback(disposeWhenNodeIsRemoved, dispose);
    }

    return dependentObservable;
};

ko.isComputed = function(instance) {
    return ko.hasPrototype(instance, ko.dependentObservable);
};

var protoProp = ko.observable.protoProperty; // == "__ko_proto__"
ko.dependentObservable[protoProp] = ko.observable;

ko.dependentObservable['fn'] = {
    "equalityComparer": valuesArePrimitiveAndEqual
};
ko.dependentObservable['fn'][protoProp] = ko.dependentObservable;

// Note that for browsers that don't support proto assignment, the
// inheritance chain is created manually in the ko.dependentObservable constructor
if (ko.utils.canSetPrototype) {
    ko.utils.setPrototypeOf(ko.dependentObservable['fn'], ko.subscribable['fn']);
}

ko.exportSymbol('dependentObservable', ko.dependentObservable);
ko.exportSymbol('computed', ko.dependentObservable); // Make "ko.computed" an alias for "ko.dependentObservable"
ko.exportSymbol('isComputed', ko.isComputed);

ko.pureComputed = function (evaluatorFunctionOrOptions, evaluatorFunctionTarget) {
    if (typeof evaluatorFunctionOrOptions === 'function') {
        return ko.computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget, {'pure':true});
    } else {
        evaluatorFunctionOrOptions = ko.utils.extend({}, evaluatorFunctionOrOptions);   // make a copy of the parameter object
        evaluatorFunctionOrOptions['pure'] = true;
        return ko.computed(evaluatorFunctionOrOptions, evaluatorFunctionTarget);
    }
}
ko.exportSymbol('pureComputed', ko.pureComputed);

(function() {
    var maxNestedObservableDepth = 10; // Escape the (unlikely) pathalogical case where an observable's current value is itself (or similar reference cycle)

    ko.toJS = function(rootObject) {
        if (arguments.length == 0)
            throw new Error("When calling ko.toJS, pass the object you want to convert.");

        // We just unwrap everything at every level in the object graph
        return mapJsObjectGraph(rootObject, function(valueToMap) {
            // Loop because an observable's value might in turn be another observable wrapper
            for (var i = 0; ko.isObservable(valueToMap) && (i < maxNestedObservableDepth); i++)
                valueToMap = valueToMap();
            return valueToMap;
        });
    };

    ko.toJSON = function(rootObject, replacer, space) {     // replacer and space are optional
        var plainJavaScriptObject = ko.toJS(rootObject);
        return ko.utils.stringifyJson(plainJavaScriptObject, replacer, space);
    };

    function mapJsObjectGraph(rootObject, mapInputCallback, visitedObjects) {
        visitedObjects = visitedObjects || new objectLookup();

        rootObject = mapInputCallback(rootObject);
        var canHaveProperties = (typeof rootObject == "object") && (rootObject !== null) && (rootObject !== undefined) && (!(rootObject instanceof Date)) && (!(rootObject instanceof String)) && (!(rootObject instanceof Number)) && (!(rootObject instanceof Boolean));
        if (!canHaveProperties)
            return rootObject;

        var outputProperties = rootObject instanceof Array ? [] : {};
        visitedObjects.save(rootObject, outputProperties);

        visitPropertiesOrArrayEntries(rootObject, function(indexer) {
            var propertyValue = mapInputCallback(rootObject[indexer]);

            switch (typeof propertyValue) {
                case "boolean":
                case "number":
                case "string":
                case "function":
                    outputProperties[indexer] = propertyValue;
                    break;
                case "object":
                case "undefined":
                    var previouslyMappedValue = visitedObjects.get(propertyValue);
                    outputProperties[indexer] = (previouslyMappedValue !== undefined)
                        ? previouslyMappedValue
                        : mapJsObjectGraph(propertyValue, mapInputCallback, visitedObjects);
                    break;
            }
        });

        return outputProperties;
    }

    function visitPropertiesOrArrayEntries(rootObject, visitorCallback) {
        if (rootObject instanceof Array) {
            for (var i = 0; i < rootObject.length; i++)
                visitorCallback(i);

            // For arrays, also respect toJSON property for custom mappings (fixes #278)
            if (typeof rootObject['toJSON'] == 'function')
                visitorCallback('toJSON');
        } else {
            for (var propertyName in rootObject) {
                visitorCallback(propertyName);
            }
        }
    };

    function objectLookup() {
        this.keys = [];
        this.values = [];
    };

    objectLookup.prototype = {
        constructor: objectLookup,
        save: function(key, value) {
            var existingIndex = ko.utils.arrayIndexOf(this.keys, key);
            if (existingIndex >= 0)
                this.values[existingIndex] = value;
            else {
                this.keys.push(key);
                this.values.push(value);
            }
        },
        get: function(key) {
            var existingIndex = ko.utils.arrayIndexOf(this.keys, key);
            return (existingIndex >= 0) ? this.values[existingIndex] : undefined;
        }
    };
})();

ko.exportSymbol('toJS', ko.toJS);
ko.exportSymbol('toJSON', ko.toJSON);
(function () {
    var hasDomDataExpandoProperty = '__ko__hasDomDataOptionValue__';

    // Normally, SELECT elements and their OPTIONs can only take value of type 'string' (because the values
    // are stored on DOM attributes). ko.selectExtensions provides a way for SELECTs/OPTIONs to have values
    // that are arbitrary objects. This is very convenient when implementing things like cascading dropdowns.
    ko.selectExtensions = {
        readValue : function(element) {
            switch (ko.utils.tagNameLower(element)) {
                case 'option':
                    if (element[hasDomDataExpandoProperty] === true)
                        return ko.utils.domData.get(element, ko.bindingHandlers.options.optionValueDomDataKey);
                    return ko.utils.ieVersion <= 7
                        ? (element.getAttributeNode('value') && element.getAttributeNode('value').specified ? element.value : element.text)
                        : element.value;
                case 'select':
                    return element.selectedIndex >= 0 ? ko.selectExtensions.readValue(element.options[element.selectedIndex]) : undefined;
                default:
                    return element.value;
            }
        },

        writeValue: function(element, value, allowUnset) {
            switch (ko.utils.tagNameLower(element)) {
                case 'option':
                    switch(typeof value) {
                        case "string":
                            ko.utils.domData.set(element, ko.bindingHandlers.options.optionValueDomDataKey, undefined);
                            if (hasDomDataExpandoProperty in element) { // IE <= 8 throws errors if you delete non-existent properties from a DOM node
                                delete element[hasDomDataExpandoProperty];
                            }
                            element.value = value;
                            break;
                        default:
                            // Store arbitrary object using DomData
                            ko.utils.domData.set(element, ko.bindingHandlers.options.optionValueDomDataKey, value);
                            element[hasDomDataExpandoProperty] = true;

                            // Special treatment of numbers is just for backward compatibility. KO 1.2.1 wrote numerical values to element.value.
                            element.value = typeof value === "number" ? value : "";
                            break;
                    }
                    break;
                case 'select':
                    if (value === "" || value === null)       // A blank string or null value will select the caption
                        value = undefined;
                    var selection = -1;
                    for (var i = 0, n = element.options.length, optionValue; i < n; ++i) {
                        optionValue = ko.selectExtensions.readValue(element.options[i]);
                        // Include special check to handle selecting a caption with a blank string value
                        if (optionValue == value || (optionValue == "" && value === undefined)) {
                            selection = i;
                            break;
                        }
                    }
                    if (allowUnset || selection >= 0 || (value === undefined && element.size > 1)) {
                        element.selectedIndex = selection;
                    }
                    break;
                default:
                    if ((value === null) || (value === undefined))
                        value = "";
                    element.value = value;
                    break;
            }
        }
    };
})();

ko.exportSymbol('selectExtensions', ko.selectExtensions);
ko.exportSymbol('selectExtensions.readValue', ko.selectExtensions.readValue);
ko.exportSymbol('selectExtensions.writeValue', ko.selectExtensions.writeValue);
ko.expressionRewriting = (function () {
    var javaScriptReservedWords = ["true", "false", "null", "undefined"];

    // Matches something that can be assigned to--either an isolated identifier or something ending with a property accessor
    // This is designed to be simple and avoid false negatives, but could produce false positives (e.g., a+b.c).
    // This also will not properly handle nested brackets (e.g., obj1[obj2['prop']]; see #911).
    var javaScriptAssignmentTarget = /^(?:[$_a-z][$\w]*|(.+)(\.\s*[$_a-z][$\w]*|\[.+\]))$/i;

    function getWriteableValue(expression) {
        if (ko.utils.arrayIndexOf(javaScriptReservedWords, expression) >= 0)
            return false;
        var match = expression.match(javaScriptAssignmentTarget);
        return match === null ? false : match[1] ? ('Object(' + match[1] + ')' + match[2]) : expression;
    }

    // The following regular expressions will be used to split an object-literal string into tokens

        // These two match strings, either with double quotes or single quotes
    var stringDouble = '"(?:[^"\\\\]|\\\\.)*"',
        stringSingle = "'(?:[^'\\\\]|\\\\.)*'",
        // Matches a regular expression (text enclosed by slashes), but will also match sets of divisions
        // as a regular expression (this is handled by the parsing loop below).
        stringRegexp = '/(?:[^/\\\\]|\\\\.)*/\w*',
        // These characters have special meaning to the parser and must not appear in the middle of a
        // token, except as part of a string.
        specials = ',"\'{}()/:[\\]',
        // Match text (at least two characters) that does not contain any of the above special characters,
        // although some of the special characters are allowed to start it (all but the colon and comma).
        // The text can contain spaces, but leading or trailing spaces are skipped.
        everyThingElse = '[^\\s:,/][^' + specials + ']*[^\\s' + specials + ']',
        // Match any non-space character not matched already. This will match colons and commas, since they're
        // not matched by "everyThingElse", but will also match any other single character that wasn't already
        // matched (for example: in "a: 1, b: 2", each of the non-space characters will be matched by oneNotSpace).
        oneNotSpace = '[^\\s]',

        // Create the actual regular expression by or-ing the above strings. The order is important.
        bindingToken = RegExp(stringDouble + '|' + stringSingle + '|' + stringRegexp + '|' + everyThingElse + '|' + oneNotSpace, 'g'),

        // Match end of previous token to determine whether a slash is a division or regex.
        divisionLookBehind = /[\])"'A-Za-z0-9_$]+$/,
        keywordRegexLookBehind = {'in':1,'return':1,'typeof':1};

    function parseObjectLiteral(objectLiteralString) {
        // Trim leading and trailing spaces from the string
        var str = ko.utils.stringTrim(objectLiteralString);

        // Trim braces '{' surrounding the whole object literal
        if (str.charCodeAt(0) === 123) str = str.slice(1, -1);

        // Split into tokens
        var result = [], toks = str.match(bindingToken), key, values, depth = 0;

        if (toks) {
            // Append a comma so that we don't need a separate code block to deal with the last item
            toks.push(',');

            for (var i = 0, tok; tok = toks[i]; ++i) {
                var c = tok.charCodeAt(0);
                // A comma signals the end of a key/value pair if depth is zero
                if (c === 44) { // ","
                    if (depth <= 0) {
                        if (key)
                            result.push(values ? {key: key, value: values.join('')} : {'unknown': key});
                        key = values = depth = 0;
                        continue;
                    }
                // Simply skip the colon that separates the name and value
                } else if (c === 58) { // ":"
                    if (!values)
                        continue;
                // A set of slashes is initially matched as a regular expression, but could be division
                } else if (c === 47 && i && tok.length > 1) {  // "/"
                    // Look at the end of the previous token to determine if the slash is actually division
                    var match = toks[i-1].match(divisionLookBehind);
                    if (match && !keywordRegexLookBehind[match[0]]) {
                        // The slash is actually a division punctuator; re-parse the remainder of the string (not including the slash)
                        str = str.substr(str.indexOf(tok) + 1);
                        toks = str.match(bindingToken);
                        toks.push(',');
                        i = -1;
                        // Continue with just the slash
                        tok = '/';
                    }
                // Increment depth for parentheses, braces, and brackets so that interior commas are ignored
                } else if (c === 40 || c === 123 || c === 91) { // '(', '{', '['
                    ++depth;
                } else if (c === 41 || c === 125 || c === 93) { // ')', '}', ']'
                    --depth;
                // The key must be a single token; if it's a string, trim the quotes
                } else if (!key && !values) {
                    key = (c === 34 || c === 39) /* '"', "'" */ ? tok.slice(1, -1) : tok;
                    continue;
                }
                if (values)
                    values.push(tok);
                else
                    values = [tok];
            }
        }
        return result;
    }

    // Two-way bindings include a write function that allow the handler to update the value even if it's not an observable.
    var twoWayBindings = {};

    function preProcessBindings(bindingsStringOrKeyValueArray, bindingOptions) {
        bindingOptions = bindingOptions || {};

        function processKeyValue(key, val) {
            var writableVal;
            function callPreprocessHook(obj) {
                return (obj && obj['preprocess']) ? (val = obj['preprocess'](val, key, processKeyValue)) : true;
            }
            if (!bindingParams) {
                if (!callPreprocessHook(ko['getBindingHandler'](key)))
                    return;

                if (twoWayBindings[key] && (writableVal = getWriteableValue(val))) {
                    // For two-way bindings, provide a write method in case the value
                    // isn't a writable observable.
                    propertyAccessorResultStrings.push("'" + key + "':function(_z){" + writableVal + "=_z}");
                }
            }
            // Values are wrapped in a function so that each value can be accessed independently
            if (makeValueAccessors) {
                val = 'function(){return ' + val + ' }';
            }
            resultStrings.push("'" + key + "':" + val);
        }

        var resultStrings = [],
            propertyAccessorResultStrings = [],
            makeValueAccessors = bindingOptions['valueAccessors'],
            bindingParams = bindingOptions['bindingParams'],
            keyValueArray = typeof bindingsStringOrKeyValueArray === "string" ?
                parseObjectLiteral(bindingsStringOrKeyValueArray) : bindingsStringOrKeyValueArray;

        ko.utils.arrayForEach(keyValueArray, function(keyValue) {
            processKeyValue(keyValue.key || keyValue['unknown'], keyValue.value);
        });

        if (propertyAccessorResultStrings.length)
            processKeyValue('_ko_property_writers', "{" + propertyAccessorResultStrings.join(",") + " }");

        return resultStrings.join(",");
    }

    return {
        bindingRewriteValidators: [],

        twoWayBindings: twoWayBindings,

        parseObjectLiteral: parseObjectLiteral,

        preProcessBindings: preProcessBindings,

        keyValueArrayContainsKey: function(keyValueArray, key) {
            for (var i = 0; i < keyValueArray.length; i++)
                if (keyValueArray[i]['key'] == key)
                    return true;
            return false;
        },

        // Internal, private KO utility for updating model properties from within bindings
        // property:            If the property being updated is (or might be) an observable, pass it here
        //                      If it turns out to be a writable observable, it will be written to directly
        // allBindings:         An object with a get method to retrieve bindings in the current execution context.
        //                      This will be searched for a '_ko_property_writers' property in case you're writing to a non-observable
        // key:                 The key identifying the property to be written. Example: for { hasFocus: myValue }, write to 'myValue' by specifying the key 'hasFocus'
        // value:               The value to be written
        // checkIfDifferent:    If true, and if the property being written is a writable observable, the value will only be written if
        //                      it is !== existing value on that writable observable
        writeValueToProperty: function(property, allBindings, key, value, checkIfDifferent) {
            if (!property || !ko.isObservable(property)) {
                var propWriters = allBindings.get('_ko_property_writers');
                if (propWriters && propWriters[key])
                    propWriters[key](value);
            } else if (ko.isWriteableObservable(property) && (!checkIfDifferent || property.peek() !== value)) {
                property(value);
            }
        }
    };
})();

ko.exportSymbol('expressionRewriting', ko.expressionRewriting);
ko.exportSymbol('expressionRewriting.bindingRewriteValidators', ko.expressionRewriting.bindingRewriteValidators);
ko.exportSymbol('expressionRewriting.parseObjectLiteral', ko.expressionRewriting.parseObjectLiteral);
ko.exportSymbol('expressionRewriting.preProcessBindings', ko.expressionRewriting.preProcessBindings);

// Making bindings explicitly declare themselves as "two way" isn't ideal in the long term (it would be better if
// all bindings could use an official 'property writer' API without needing to declare that they might). However,
// since this is not, and has never been, a public API (_ko_property_writers was never documented), it's acceptable
// as an internal implementation detail in the short term.
// For those developers who rely on _ko_property_writers in their custom bindings, we expose _twoWayBindings as an
// undocumented feature that makes it relatively easy to upgrade to KO 3.0. However, this is still not an official
// public API, and we reserve the right to remove it at any time if we create a real public property writers API.
ko.exportSymbol('expressionRewriting._twoWayBindings', ko.expressionRewriting.twoWayBindings);

// For backward compatibility, define the following aliases. (Previously, these function names were misleading because
// they referred to JSON specifically, even though they actually work with arbitrary JavaScript object literal expressions.)
ko.exportSymbol('jsonExpressionRewriting', ko.expressionRewriting);
ko.exportSymbol('jsonExpressionRewriting.insertPropertyAccessorsIntoJson', ko.expressionRewriting.preProcessBindings);
(function() {
    // "Virtual elements" is an abstraction on top of the usual DOM API which understands the notion that comment nodes
    // may be used to represent hierarchy (in addition to the DOM's natural hierarchy).
    // If you call the DOM-manipulating functions on ko.virtualElements, you will be able to read and write the state
    // of that virtual hierarchy
    //
    // The point of all this is to support containerless templates (e.g., <!-- ko foreach:someCollection -->blah<!-- /ko -->)
    // without having to scatter special cases all over the binding and templating code.

    // IE 9 cannot reliably read the "nodeValue" property of a comment node (see https://github.com/SteveSanderson/knockout/issues/186)
    // but it does give them a nonstandard alternative property called "text" that it can read reliably. Other browsers don't have that property.
    // So, use node.text where available, and node.nodeValue elsewhere
    var commentNodesHaveTextProperty = document && document.createComment("test").text === "<!--test-->";

    var startCommentRegex = commentNodesHaveTextProperty ? /^<!--\s*ko(?:\s+([\s\S]+))?\s*-->$/ : /^\s*ko(?:\s+([\s\S]+))?\s*$/;
    var endCommentRegex =   commentNodesHaveTextProperty ? /^<!--\s*\/ko\s*-->$/ : /^\s*\/ko\s*$/;
    var htmlTagsWithOptionallyClosingChildren = { 'ul': true, 'ol': true };

    function isStartComment(node) {
        return (node.nodeType == 8) && startCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);
    }

    function isEndComment(node) {
        return (node.nodeType == 8) && endCommentRegex.test(commentNodesHaveTextProperty ? node.text : node.nodeValue);
    }

    function getVirtualChildren(startComment, allowUnbalanced) {
        var currentNode = startComment;
        var depth = 1;
        var children = [];
        while (currentNode = currentNode.nextSibling) {
            if (isEndComment(currentNode)) {
                depth--;
                if (depth === 0)
                    return children;
            }

            children.push(currentNode);

            if (isStartComment(currentNode))
                depth++;
        }
        if (!allowUnbalanced)
            throw new Error("Cannot find closing comment tag to match: " + startComment.nodeValue);
        return null;
    }

    function getMatchingEndComment(startComment, allowUnbalanced) {
        var allVirtualChildren = getVirtualChildren(startComment, allowUnbalanced);
        if (allVirtualChildren) {
            if (allVirtualChildren.length > 0)
                return allVirtualChildren[allVirtualChildren.length - 1].nextSibling;
            return startComment.nextSibling;
        } else
            return null; // Must have no matching end comment, and allowUnbalanced is true
    }

    function getUnbalancedChildTags(node) {
        // e.g., from <div>OK</div><!-- ko blah --><span>Another</span>, returns: <!-- ko blah --><span>Another</span>
        //       from <div>OK</div><!-- /ko --><!-- /ko -->,             returns: <!-- /ko --><!-- /ko -->
        var childNode = node.firstChild, captureRemaining = null;
        if (childNode) {
            do {
                if (captureRemaining)                   // We already hit an unbalanced node and are now just scooping up all subsequent nodes
                    captureRemaining.push(childNode);
                else if (isStartComment(childNode)) {
                    var matchingEndComment = getMatchingEndComment(childNode, /* allowUnbalanced: */ true);
                    if (matchingEndComment)             // It's a balanced tag, so skip immediately to the end of this virtual set
                        childNode = matchingEndComment;
                    else
                        captureRemaining = [childNode]; // It's unbalanced, so start capturing from this point
                } else if (isEndComment(childNode)) {
                    captureRemaining = [childNode];     // It's unbalanced (if it wasn't, we'd have skipped over it already), so start capturing
                }
            } while (childNode = childNode.nextSibling);
        }
        return captureRemaining;
    }

    ko.virtualElements = {
        allowedBindings: {},

        childNodes: function(node) {
            return isStartComment(node) ? getVirtualChildren(node) : node.childNodes;
        },

        emptyNode: function(node) {
            if (!isStartComment(node))
                ko.utils.emptyDomNode(node);
            else {
                var virtualChildren = ko.virtualElements.childNodes(node);
                for (var i = 0, j = virtualChildren.length; i < j; i++)
                    ko.removeNode(virtualChildren[i]);
            }
        },

        setDomNodeChildren: function(node, childNodes) {
            if (!isStartComment(node))
                ko.utils.setDomNodeChildren(node, childNodes);
            else {
                ko.virtualElements.emptyNode(node);
                var endCommentNode = node.nextSibling; // Must be the next sibling, as we just emptied the children
                for (var i = 0, j = childNodes.length; i < j; i++)
                    endCommentNode.parentNode.insertBefore(childNodes[i], endCommentNode);
            }
        },

        prepend: function(containerNode, nodeToPrepend) {
            if (!isStartComment(containerNode)) {
                if (containerNode.firstChild)
                    containerNode.insertBefore(nodeToPrepend, containerNode.firstChild);
                else
                    containerNode.appendChild(nodeToPrepend);
            } else {
                // Start comments must always have a parent and at least one following sibling (the end comment)
                containerNode.parentNode.insertBefore(nodeToPrepend, containerNode.nextSibling);
            }
        },

        insertAfter: function(containerNode, nodeToInsert, insertAfterNode) {
            if (!insertAfterNode) {
                ko.virtualElements.prepend(containerNode, nodeToInsert);
            } else if (!isStartComment(containerNode)) {
                // Insert after insertion point
                if (insertAfterNode.nextSibling)
                    containerNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);
                else
                    containerNode.appendChild(nodeToInsert);
            } else {
                // Children of start comments must always have a parent and at least one following sibling (the end comment)
                containerNode.parentNode.insertBefore(nodeToInsert, insertAfterNode.nextSibling);
            }
        },

        firstChild: function(node) {
            if (!isStartComment(node))
                return node.firstChild;
            if (!node.nextSibling || isEndComment(node.nextSibling))
                return null;
            return node.nextSibling;
        },

        nextSibling: function(node) {
            if (isStartComment(node))
                node = getMatchingEndComment(node);
            if (node.nextSibling && isEndComment(node.nextSibling))
                return null;
            return node.nextSibling;
        },

        hasBindingValue: isStartComment,

        virtualNodeBindingValue: function(node) {
            var regexMatch = (commentNodesHaveTextProperty ? node.text : node.nodeValue).match(startCommentRegex);
            return regexMatch ? regexMatch[1] : null;
        },

        normaliseVirtualElementDomStructure: function(elementVerified) {
            // Workaround for https://github.com/SteveSanderson/knockout/issues/155
            // (IE <= 8 or IE 9 quirks mode parses your HTML weirdly, treating closing </li> tags as if they don't exist, thereby moving comment nodes
            // that are direct descendants of <ul> into the preceding <li>)
            if (!htmlTagsWithOptionallyClosingChildren[ko.utils.tagNameLower(elementVerified)])
                return;

            // Scan immediate children to see if they contain unbalanced comment tags. If they do, those comment tags
            // must be intended to appear *after* that child, so move them there.
            var childNode = elementVerified.firstChild;
            if (childNode) {
                do {
                    if (childNode.nodeType === 1) {
                        var unbalancedTags = getUnbalancedChildTags(childNode);
                        if (unbalancedTags) {
                            // Fix up the DOM by moving the unbalanced tags to where they most likely were intended to be placed - *after* the child
                            var nodeToInsertBefore = childNode.nextSibling;
                            for (var i = 0; i < unbalancedTags.length; i++) {
                                if (nodeToInsertBefore)
                                    elementVerified.insertBefore(unbalancedTags[i], nodeToInsertBefore);
                                else
                                    elementVerified.appendChild(unbalancedTags[i]);
                            }
                        }
                    }
                } while (childNode = childNode.nextSibling);
            }
        }
    };
})();
ko.exportSymbol('virtualElements', ko.virtualElements);
ko.exportSymbol('virtualElements.allowedBindings', ko.virtualElements.allowedBindings);
ko.exportSymbol('virtualElements.emptyNode', ko.virtualElements.emptyNode);
//ko.exportSymbol('virtualElements.firstChild', ko.virtualElements.firstChild);     // firstChild is not minified
ko.exportSymbol('virtualElements.insertAfter', ko.virtualElements.insertAfter);
//ko.exportSymbol('virtualElements.nextSibling', ko.virtualElements.nextSibling);   // nextSibling is not minified
ko.exportSymbol('virtualElements.prepend', ko.virtualElements.prepend);
ko.exportSymbol('virtualElements.setDomNodeChildren', ko.virtualElements.setDomNodeChildren);
(function() {
    var defaultBindingAttributeName = "data-bind";

    ko.bindingProvider = function() {
        this.bindingCache = {};
    };

    ko.utils.extend(ko.bindingProvider.prototype, {
        'nodeHasBindings': function(node) {
            switch (node.nodeType) {
                case 1: // Element
                    return node.getAttribute(defaultBindingAttributeName) != null
                        || ko.components['getComponentNameForNode'](node);
                case 8: // Comment node
                    return ko.virtualElements.hasBindingValue(node);
                default: return false;
            }
        },

        'getBindings': function(node, bindingContext) {
            var bindingsString = this['getBindingsString'](node, bindingContext),
                parsedBindings = bindingsString ? this['parseBindingsString'](bindingsString, bindingContext, node) : null;
            return ko.components.addBindingsForCustomElement(parsedBindings, node, bindingContext, /* valueAccessors */ false);
        },

        'getBindingAccessors': function(node, bindingContext) {
            var bindingsString = this['getBindingsString'](node, bindingContext),
                parsedBindings = bindingsString ? this['parseBindingsString'](bindingsString, bindingContext, node, { 'valueAccessors': true }) : null;
            return ko.components.addBindingsForCustomElement(parsedBindings, node, bindingContext, /* valueAccessors */ true);
        },

        // The following function is only used internally by this default provider.
        // It's not part of the interface definition for a general binding provider.
        'getBindingsString': function(node, bindingContext) {
            switch (node.nodeType) {
                case 1: return node.getAttribute(defaultBindingAttributeName);   // Element
                case 8: return ko.virtualElements.virtualNodeBindingValue(node); // Comment node
                default: return null;
            }
        },

        // The following function is only used internally by this default provider.
        // It's not part of the interface definition for a general binding provider.
        'parseBindingsString': function(bindingsString, bindingContext, node, options) {
            try {
                var bindingFunction = createBindingsStringEvaluatorViaCache(bindingsString, this.bindingCache, options);
                return bindingFunction(bindingContext, node);
            } catch (ex) {
                ex.message = "Unable to parse bindings.\nBindings value: " + bindingsString + "\nMessage: " + ex.message;
                throw ex;
            }
        }
    });

    ko.bindingProvider['instance'] = new ko.bindingProvider();

    function createBindingsStringEvaluatorViaCache(bindingsString, cache, options) {
        var cacheKey = bindingsString + (options && options['valueAccessors'] || '');
        return cache[cacheKey]
            || (cache[cacheKey] = createBindingsStringEvaluator(bindingsString, options));
    }

    function createBindingsStringEvaluator(bindingsString, options) {
        // Build the source for a function that evaluates "expression"
        // For each scope variable, add an extra level of "with" nesting
        // Example result: with(sc1) { with(sc0) { return (expression) } }
        var rewrittenBindings = ko.expressionRewriting.preProcessBindings(bindingsString, options),
            functionBody = "with($context){with($data||{}){return{" + rewrittenBindings + "}}}";
        return new Function("$context", "$element", functionBody);
    }
})();

ko.exportSymbol('bindingProvider', ko.bindingProvider);
(function () {
    ko.bindingHandlers = {};

    // The following element types will not be recursed into during binding. In the future, we
    // may consider adding <template> to this list, because such elements' contents are always
    // intended to be bound in a different context from where they appear in the document.
    var bindingDoesNotRecurseIntoElementTypes = {
        // Don't want bindings that operate on text nodes to mutate <script> contents,
        // because it's unexpected and a potential XSS issue
        'script': true
    };

    // Use an overridable method for retrieving binding handlers so that a plugins may support dynamically created handlers
    ko['getBindingHandler'] = function(bindingKey) {
        return ko.bindingHandlers[bindingKey];
    };

    // The ko.bindingContext constructor is only called directly to create the root context. For child
    // contexts, use bindingContext.createChildContext or bindingContext.extend.
    ko.bindingContext = function(dataItemOrAccessor, parentContext, dataItemAlias, extendCallback) {

        // The binding context object includes static properties for the current, parent, and root view models.
        // If a view model is actually stored in an observable, the corresponding binding context object, and
        // any child contexts, must be updated when the view model is changed.
        function updateContext() {
            // Most of the time, the context will directly get a view model object, but if a function is given,
            // we call the function to retrieve the view model. If the function accesses any obsevables or returns
            // an observable, the dependency is tracked, and those observables can later cause the binding
            // context to be updated.
            var dataItemOrObservable = isFunc ? dataItemOrAccessor() : dataItemOrAccessor,
                dataItem = ko.utils.unwrapObservable(dataItemOrObservable);

            if (parentContext) {
                // When a "parent" context is given, register a dependency on the parent context. Thus whenever the
                // parent context is updated, this context will also be updated.
                if (parentContext._subscribable)
                    parentContext._subscribable();

                // Copy $root and any custom properties from the parent context
                ko.utils.extend(self, parentContext);

                // Because the above copy overwrites our own properties, we need to reset them.
                // During the first execution, "subscribable" isn't set, so don't bother doing the update then.
                if (subscribable) {
                    self._subscribable = subscribable;
                }
            } else {
                self['$parents'] = [];
                self['$root'] = dataItem;

                // Export 'ko' in the binding context so it will be available in bindings and templates
                // even if 'ko' isn't exported as a global, such as when using an AMD loader.
                // See https://github.com/SteveSanderson/knockout/issues/490
                self['ko'] = ko;
            }
            self['$rawData'] = dataItemOrObservable;
            self['$data'] = dataItem;
            if (dataItemAlias)
                self[dataItemAlias] = dataItem;

            // The extendCallback function is provided when creating a child context or extending a context.
            // It handles the specific actions needed to finish setting up the binding context. Actions in this
            // function could also add dependencies to this binding context.
            if (extendCallback)
                extendCallback(self, parentContext, dataItem);

            return self['$data'];
        }
        function disposeWhen() {
            return nodes && !ko.utils.anyDomNodeIsAttachedToDocument(nodes);
        }

        var self = this,
            isFunc = typeof(dataItemOrAccessor) == "function" && !ko.isObservable(dataItemOrAccessor),
            nodes,
            subscribable = ko.dependentObservable(updateContext, null, { disposeWhen: disposeWhen, disposeWhenNodeIsRemoved: true });

        // At this point, the binding context has been initialized, and the "subscribable" computed observable is
        // subscribed to any observables that were accessed in the process. If there is nothing to track, the
        // computed will be inactive, and we can safely throw it away. If it's active, the computed is stored in
        // the context object.
        if (subscribable.isActive()) {
            self._subscribable = subscribable;

            // Always notify because even if the model ($data) hasn't changed, other context properties might have changed
            subscribable['equalityComparer'] = null;

            // We need to be able to dispose of this computed observable when it's no longer needed. This would be
            // easy if we had a single node to watch, but binding contexts can be used by many different nodes, and
            // we cannot assume that those nodes have any relation to each other. So instead we track any node that
            // the context is attached to, and dispose the computed when all of those nodes have been cleaned.

            // Add properties to *subscribable* instead of *self* because any properties added to *self* may be overwritten on updates
            nodes = [];
            subscribable._addNode = function(node) {
                nodes.push(node);
                ko.utils.domNodeDisposal.addDisposeCallback(node, function(node) {
                    ko.utils.arrayRemoveItem(nodes, node);
                    if (!nodes.length) {
                        subscribable.dispose();
                        self._subscribable = subscribable = undefined;
                    }
                });
            };
        }
    }

    // Extend the binding context hierarchy with a new view model object. If the parent context is watching
    // any obsevables, the new child context will automatically get a dependency on the parent context.
    // But this does not mean that the $data value of the child context will also get updated. If the child
    // view model also depends on the parent view model, you must provide a function that returns the correct
    // view model on each update.
    ko.bindingContext.prototype['createChildContext'] = function (dataItemOrAccessor, dataItemAlias, extendCallback) {
        return new ko.bindingContext(dataItemOrAccessor, this, dataItemAlias, function(self, parentContext) {
            // Extend the context hierarchy by setting the appropriate pointers
            self['$parentContext'] = parentContext;
            self['$parent'] = parentContext['$data'];
            self['$parents'] = (parentContext['$parents'] || []).slice(0);
            self['$parents'].unshift(self['$parent']);
            if (extendCallback)
                extendCallback(self);
        });
    };

    // Extend the binding context with new custom properties. This doesn't change the context hierarchy.
    // Similarly to "child" contexts, provide a function here to make sure that the correct values are set
    // when an observable view model is updated.
    ko.bindingContext.prototype['extend'] = function(properties) {
        // If the parent context references an observable view model, "_subscribable" will always be the
        // latest view model object. If not, "_subscribable" isn't set, and we can use the static "$data" value.
        return new ko.bindingContext(this._subscribable || this['$data'], this, null, function(self, parentContext) {
            // This "child" context doesn't directly track a parent observable view model,
            // so we need to manually set the $rawData value to match the parent.
            self['$rawData'] = parentContext['$rawData'];
            ko.utils.extend(self, typeof(properties) == "function" ? properties() : properties);
        });
    };

    // Returns the valueAccesor function for a binding value
    function makeValueAccessor(value) {
        return function() {
            return value;
        };
    }

    // Returns the value of a valueAccessor function
    function evaluateValueAccessor(valueAccessor) {
        return valueAccessor();
    }

    // Given a function that returns bindings, create and return a new object that contains
    // binding value-accessors functions. Each accessor function calls the original function
    // so that it always gets the latest value and all dependencies are captured. This is used
    // by ko.applyBindingsToNode and getBindingsAndMakeAccessors.
    function makeAccessorsFromFunction(callback) {
        return ko.utils.objectMap(ko.dependencyDetection.ignore(callback), function(value, key) {
            return function() {
                return callback()[key];
            };
        });
    }

    // Given a bindings function or object, create and return a new object that contains
    // binding value-accessors functions. This is used by ko.applyBindingsToNode.
    function makeBindingAccessors(bindings, context, node) {
        if (typeof bindings === 'function') {
            return makeAccessorsFromFunction(bindings.bind(null, context, node));
        } else {
            return ko.utils.objectMap(bindings, makeValueAccessor);
        }
    }

    // This function is used if the binding provider doesn't include a getBindingAccessors function.
    // It must be called with 'this' set to the provider instance.
    function getBindingsAndMakeAccessors(node, context) {
        return makeAccessorsFromFunction(this['getBindings'].bind(this, node, context));
    }

    function validateThatBindingIsAllowedForVirtualElements(bindingName) {
        var validator = ko.virtualElements.allowedBindings[bindingName];
        if (!validator)
            throw new Error("The binding '" + bindingName + "' cannot be used with virtual elements")
    }

    function applyBindingsToDescendantsInternal (bindingContext, elementOrVirtualElement, bindingContextsMayDifferFromDomParentElement) {
        var currentChild,
            nextInQueue = ko.virtualElements.firstChild(elementOrVirtualElement),
            provider = ko.bindingProvider['instance'],
            preprocessNode = provider['preprocessNode'];

        // Preprocessing allows a binding provider to mutate a node before bindings are applied to it. For example it's
        // possible to insert new siblings after it, and/or replace the node with a different one. This can be used to
        // implement custom binding syntaxes, such as {{ value }} for string interpolation, or custom element types that
        // trigger insertion of <template> contents at that point in the document.
        if (preprocessNode) {
            while (currentChild = nextInQueue) {
                nextInQueue = ko.virtualElements.nextSibling(currentChild);
                preprocessNode.call(provider, currentChild);
            }
            // Reset nextInQueue for the next loop
            nextInQueue = ko.virtualElements.firstChild(elementOrVirtualElement);
        }

        while (currentChild = nextInQueue) {
            // Keep a record of the next child *before* applying bindings, in case the binding removes the current child from its position
            nextInQueue = ko.virtualElements.nextSibling(currentChild);
            applyBindingsToNodeAndDescendantsInternal(bindingContext, currentChild, bindingContextsMayDifferFromDomParentElement);
        }
    }

    function applyBindingsToNodeAndDescendantsInternal (bindingContext, nodeVerified, bindingContextMayDifferFromDomParentElement) {
        var shouldBindDescendants = true;

        // Perf optimisation: Apply bindings only if...
        // (1) We need to store the binding context on this node (because it may differ from the DOM parent node's binding context)
        //     Note that we can't store binding contexts on non-elements (e.g., text nodes), as IE doesn't allow expando properties for those
        // (2) It might have bindings (e.g., it has a data-bind attribute, or it's a marker for a containerless template)
        var isElement = (nodeVerified.nodeType === 1);
        if (isElement) // Workaround IE <= 8 HTML parsing weirdness
            ko.virtualElements.normaliseVirtualElementDomStructure(nodeVerified);

        var shouldApplyBindings = (isElement && bindingContextMayDifferFromDomParentElement)             // Case (1)
                               || ko.bindingProvider['instance']['nodeHasBindings'](nodeVerified);       // Case (2)
        if (shouldApplyBindings)
            shouldBindDescendants = applyBindingsToNodeInternal(nodeVerified, null, bindingContext, bindingContextMayDifferFromDomParentElement)['shouldBindDescendants'];

        if (shouldBindDescendants && !bindingDoesNotRecurseIntoElementTypes[ko.utils.tagNameLower(nodeVerified)]) {
            // We're recursing automatically into (real or virtual) child nodes without changing binding contexts. So,
            //  * For children of a *real* element, the binding context is certainly the same as on their DOM .parentNode,
            //    hence bindingContextsMayDifferFromDomParentElement is false
            //  * For children of a *virtual* element, we can't be sure. Evaluating .parentNode on those children may
            //    skip over any number of intermediate virtual elements, any of which might define a custom binding context,
            //    hence bindingContextsMayDifferFromDomParentElement is true
            applyBindingsToDescendantsInternal(bindingContext, nodeVerified, /* bindingContextsMayDifferFromDomParentElement: */ !isElement);
        }
    }

    var boundElementDomDataKey = ko.utils.domData.nextKey();


    function topologicalSortBindings(bindings) {
        // Depth-first sort
        var result = [],                // The list of key/handler pairs that we will return
            bindingsConsidered = {},    // A temporary record of which bindings are already in 'result'
            cyclicDependencyStack = []; // Keeps track of a depth-search so that, if there's a cycle, we know which bindings caused it
        ko.utils.objectForEach(bindings, function pushBinding(bindingKey) {
            if (!bindingsConsidered[bindingKey]) {
                var binding = ko['getBindingHandler'](bindingKey);
                if (binding) {
                    // First add dependencies (if any) of the current binding
                    if (binding['after']) {
                        cyclicDependencyStack.push(bindingKey);
                        ko.utils.arrayForEach(binding['after'], function(bindingDependencyKey) {
                            if (bindings[bindingDependencyKey]) {
                                if (ko.utils.arrayIndexOf(cyclicDependencyStack, bindingDependencyKey) !== -1) {
                                    throw Error("Cannot combine the following bindings, because they have a cyclic dependency: " + cyclicDependencyStack.join(", "));
                                } else {
                                    pushBinding(bindingDependencyKey);
                                }
                            }
                        });
                        cyclicDependencyStack.length--;
                    }
                    // Next add the current binding
                    result.push({ key: bindingKey, handler: binding });
                }
                bindingsConsidered[bindingKey] = true;
            }
        });

        return result;
    }

    function applyBindingsToNodeInternal(node, sourceBindings, bindingContext, bindingContextMayDifferFromDomParentElement) {
        // Prevent multiple applyBindings calls for the same node, except when a binding value is specified
        var alreadyBound = ko.utils.domData.get(node, boundElementDomDataKey);
        if (!sourceBindings) {
            if (alreadyBound) {
                throw Error("You cannot apply bindings multiple times to the same element.");
            }
            ko.utils.domData.set(node, boundElementDomDataKey, true);
        }

        // Optimization: Don't store the binding context on this node if it's definitely the same as on node.parentNode, because
        // we can easily recover it just by scanning up the node's ancestors in the DOM
        // (note: here, parent node means "real DOM parent" not "virtual parent", as there's no O(1) way to find the virtual parent)
        if (!alreadyBound && bindingContextMayDifferFromDomParentElement)
            ko.storedBindingContextForNode(node, bindingContext);

        // Use bindings if given, otherwise fall back on asking the bindings provider to give us some bindings
        var bindings;
        if (sourceBindings && typeof sourceBindings !== 'function') {
            bindings = sourceBindings;
        } else {
            var provider = ko.bindingProvider['instance'],
                getBindings = provider['getBindingAccessors'] || getBindingsAndMakeAccessors;

            // Get the binding from the provider within a computed observable so that we can update the bindings whenever
            // the binding context is updated or if the binding provider accesses observables.
            var bindingsUpdater = ko.dependentObservable(
                function() {
                    bindings = sourceBindings ? sourceBindings(bindingContext, node) : getBindings.call(provider, node, bindingContext);
                    // Register a dependency on the binding context to support obsevable view models.
                    if (bindings && bindingContext._subscribable)
                        bindingContext._subscribable();
                    return bindings;
                },
                null, { disposeWhenNodeIsRemoved: node }
            );

            if (!bindings || !bindingsUpdater.isActive())
                bindingsUpdater = null;
        }

        var bindingHandlerThatControlsDescendantBindings;
        if (bindings) {
            // Return the value accessor for a given binding. When bindings are static (won't be updated because of a binding
            // context update), just return the value accessor from the binding. Otherwise, return a function that always gets
            // the latest binding value and registers a dependency on the binding updater.
            var getValueAccessor = bindingsUpdater
                ? function(bindingKey) {
                    return function() {
                        return evaluateValueAccessor(bindingsUpdater()[bindingKey]);
                    };
                } : function(bindingKey) {
                    return bindings[bindingKey];
                };

            // Use of allBindings as a function is maintained for backwards compatibility, but its use is deprecated
            function allBindings() {
                return ko.utils.objectMap(bindingsUpdater ? bindingsUpdater() : bindings, evaluateValueAccessor);
            }
            // The following is the 3.x allBindings API
            allBindings['get'] = function(key) {
                return bindings[key] && evaluateValueAccessor(getValueAccessor(key));
            };
            allBindings['has'] = function(key) {
                return key in bindings;
            };

            // First put the bindings into the right order
            var orderedBindings = topologicalSortBindings(bindings);

            // Go through the sorted bindings, calling init and update for each
            ko.utils.arrayForEach(orderedBindings, function(bindingKeyAndHandler) {
                // Note that topologicalSortBindings has already filtered out any nonexistent binding handlers,
                // so bindingKeyAndHandler.handler will always be nonnull.
                var handlerInitFn = bindingKeyAndHandler.handler["init"],
                    handlerUpdateFn = bindingKeyAndHandler.handler["update"],
                    bindingKey = bindingKeyAndHandler.key;

                if (node.nodeType === 8) {
                    validateThatBindingIsAllowedForVirtualElements(bindingKey);
                }

                try {
                    // Run init, ignoring any dependencies
                    if (typeof handlerInitFn == "function") {
                        ko.dependencyDetection.ignore(function() {
                            var initResult = handlerInitFn(node, getValueAccessor(bindingKey), allBindings, bindingContext['$data'], bindingContext);

                            // If this binding handler claims to control descendant bindings, make a note of this
                            if (initResult && initResult['controlsDescendantBindings']) {
                                if (bindingHandlerThatControlsDescendantBindings !== undefined)
                                    throw new Error("Multiple bindings (" + bindingHandlerThatControlsDescendantBindings + " and " + bindingKey + ") are trying to control descendant bindings of the same element. You cannot use these bindings together on the same element.");
                                bindingHandlerThatControlsDescendantBindings = bindingKey;
                            }
                        });
                    }

                    // Run update in its own computed wrapper
                    if (typeof handlerUpdateFn == "function") {
                        ko.dependentObservable(
                            function() {
                                handlerUpdateFn(node, getValueAccessor(bindingKey), allBindings, bindingContext['$data'], bindingContext);
                            },
                            null,
                            { disposeWhenNodeIsRemoved: node }
                        );
                    }
                } catch (ex) {
                    ex.message = "Unable to process binding \"" + bindingKey + ": " + bindings[bindingKey] + "\"\nMessage: " + ex.message;
                    throw ex;
                }
            });
        }

        return {
            'shouldBindDescendants': bindingHandlerThatControlsDescendantBindings === undefined
        };
    };

    var storedBindingContextDomDataKey = ko.utils.domData.nextKey();
    ko.storedBindingContextForNode = function (node, bindingContext) {
        if (arguments.length == 2) {
            ko.utils.domData.set(node, storedBindingContextDomDataKey, bindingContext);
            if (bindingContext._subscribable)
                bindingContext._subscribable._addNode(node);
        } else {
            return ko.utils.domData.get(node, storedBindingContextDomDataKey);
        }
    }

    function getBindingContext(viewModelOrBindingContext) {
        return viewModelOrBindingContext && (viewModelOrBindingContext instanceof ko.bindingContext)
            ? viewModelOrBindingContext
            : new ko.bindingContext(viewModelOrBindingContext);
    }

    ko.applyBindingAccessorsToNode = function (node, bindings, viewModelOrBindingContext) {
        if (node.nodeType === 1) // If it's an element, workaround IE <= 8 HTML parsing weirdness
            ko.virtualElements.normaliseVirtualElementDomStructure(node);
        return applyBindingsToNodeInternal(node, bindings, getBindingContext(viewModelOrBindingContext), true);
    };

    ko.applyBindingsToNode = function (node, bindings, viewModelOrBindingContext) {
        var context = getBindingContext(viewModelOrBindingContext);
        return ko.applyBindingAccessorsToNode(node, makeBindingAccessors(bindings, context, node), context);
    };

    ko.applyBindingsToDescendants = function(viewModelOrBindingContext, rootNode) {
        if (rootNode.nodeType === 1 || rootNode.nodeType === 8)
            applyBindingsToDescendantsInternal(getBindingContext(viewModelOrBindingContext), rootNode, true);
    };

    ko.applyBindings = function (viewModelOrBindingContext, rootNode) {
        // If jQuery is loaded after Knockout, we won't initially have access to it. So save it here.
        if (!jQueryInstance && window['jQuery']) {
            jQueryInstance = window['jQuery'];
        }

        if (rootNode && (rootNode.nodeType !== 1) && (rootNode.nodeType !== 8))
            throw new Error("ko.applyBindings: first parameter should be your view model; second parameter should be a DOM node");
        rootNode = rootNode || window.document.body; // Make "rootNode" parameter optional

        applyBindingsToNodeAndDescendantsInternal(getBindingContext(viewModelOrBindingContext), rootNode, true);
    };

    // Retrieving binding context from arbitrary nodes
    ko.contextFor = function(node) {
        // We can only do something meaningful for elements and comment nodes (in particular, not text nodes, as IE can't store domdata for them)
        switch (node.nodeType) {
            case 1:
            case 8:
                var context = ko.storedBindingContextForNode(node);
                if (context) return context;
                if (node.parentNode) return ko.contextFor(node.parentNode);
                break;
        }
        return undefined;
    };
    ko.dataFor = function(node) {
        var context = ko.contextFor(node);
        return context ? context['$data'] : undefined;
    };

    ko.exportSymbol('bindingHandlers', ko.bindingHandlers);
    ko.exportSymbol('applyBindings', ko.applyBindings);
    ko.exportSymbol('applyBindingsToDescendants', ko.applyBindingsToDescendants);
    ko.exportSymbol('applyBindingAccessorsToNode', ko.applyBindingAccessorsToNode);
    ko.exportSymbol('applyBindingsToNode', ko.applyBindingsToNode);
    ko.exportSymbol('contextFor', ko.contextFor);
    ko.exportSymbol('dataFor', ko.dataFor);
})();
(function(undefined) {
    var loadingSubscribablesCache = {}, // Tracks component loads that are currently in flight
        loadedDefinitionsCache = {};    // Tracks component loads that have already completed

    ko.components = {
        get: function(componentName, callback) {
            var cachedDefinition = getObjectOwnProperty(loadedDefinitionsCache, componentName);
            if (cachedDefinition) {
                // It's already loaded and cached. Reuse the same definition object.
                // Note that for API consistency, even cache hits complete asynchronously.
                setTimeout(function() { callback(cachedDefinition) }, 0);
            } else {
                // Join the loading process that is already underway, or start a new one.
                loadComponentAndNotify(componentName, callback);
            }
        },

        clearCachedDefinition: function(componentName) {
            delete loadedDefinitionsCache[componentName];
        },

        _getFirstResultFromLoaders: getFirstResultFromLoaders
    };

    function getObjectOwnProperty(obj, propName) {
        return obj.hasOwnProperty(propName) ? obj[propName] : undefined;
    }

    function loadComponentAndNotify(componentName, callback) {
        var subscribable = getObjectOwnProperty(loadingSubscribablesCache, componentName),
            completedAsync;
        if (!subscribable) {
            // It's not started loading yet. Start loading, and when it's done, move it to loadedDefinitionsCache.
            subscribable = loadingSubscribablesCache[componentName] = new ko.subscribable();
            beginLoadingComponent(componentName, function(definition) {
                loadedDefinitionsCache[componentName] = definition;
                delete loadingSubscribablesCache[componentName];

                // For API consistency, all loads complete asynchronously. However we want to avoid
                // adding an extra setTimeout if it's unnecessary (i.e., the completion is already
                // async) since setTimeout(..., 0) still takes about 16ms or more on most browsers.
                if (completedAsync) {
                    subscribable['notifySubscribers'](definition);
                } else {
                    setTimeout(function() {
                        subscribable['notifySubscribers'](definition);
                    }, 0);
                }
            });
            completedAsync = true;
        }
        subscribable.subscribe(callback);
    }

    function beginLoadingComponent(componentName, callback) {
        getFirstResultFromLoaders('getConfig', [componentName], function(config) {
            if (config) {
                // We have a config, so now load its definition
                getFirstResultFromLoaders('loadComponent', [componentName, config], function(definition) {
                    callback(definition);
                });
            } else {
                // The component has no config - it's unknown to all the loaders.
                // Note that this is not an error (e.g., a module loading error) - that would abort the
                // process and this callback would not run. For this callback to run, all loaders must
                // have confirmed they don't know about this component.
                callback(null);
            }
        });
    }

    function getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders) {
        // On the first call in the stack, start with the full set of loaders
        if (!candidateLoaders) {
            candidateLoaders = ko.components['loaders'].slice(0); // Use a copy, because we'll be mutating this array
        }

        // Try the next candidate
        var currentCandidateLoader = candidateLoaders.shift();
        if (currentCandidateLoader) {
            var methodInstance = currentCandidateLoader[methodName];
            if (methodInstance) {
                var wasAborted = false,
                    synchronousReturnValue = methodInstance.apply(currentCandidateLoader, argsExceptCallback.concat(function(result) {
                        if (wasAborted) {
                            callback(null);
                        } else if (result !== null) {
                            // This candidate returned a value. Use it.
                            callback(result);
                        } else {
                            // Try the next candidate
                            getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders);
                        }
                    }));

                // Currently, loaders may not return anything synchronously. This leaves open the possibility
                // that we'll extend the API to support synchronous return values in the future. It won't be
                // a breaking change, because currently no loader is allowed to return anything except undefined.
                if (synchronousReturnValue !== undefined) {
                    wasAborted = true;

                    // Method to suppress exceptions will remain undocumented. This is only to keep
                    // KO's specs running tidily, since we can observe the loading got aborted without
                    // having exceptions cluttering up the console too.
                    if (!currentCandidateLoader['suppressLoaderExceptions']) {
                        throw new Error('Component loaders must supply values by invoking the callback, not by returning values synchronously.');
                    }
                }
            } else {
                // This candidate doesn't have the relevant handler. Synchronously move on to the next one.
                getFirstResultFromLoaders(methodName, argsExceptCallback, callback, candidateLoaders);
            }
        } else {
            // No candidates returned a value
            callback(null);
        }
    }

    // Reference the loaders via string name so it's possible for developers
    // to replace the whole array by assigning to ko.components.loaders
    ko.components['loaders'] = [];

    ko.exportSymbol('components', ko.components);
    ko.exportSymbol('components.get', ko.components.get);
    ko.exportSymbol('components.clearCachedDefinition', ko.components.clearCachedDefinition);
})();
(function(undefined) {

    // The default loader is responsible for two things:
    // 1. Maintaining the default in-memory registry of component configuration objects
    //    (i.e., the thing you're writing to when you call ko.components.register(someName, ...))
    // 2. Answering requests for components by fetching configuration objects
    //    from that default in-memory registry and resolving them into standard
    //    component definition objects (of the form { createViewModel: ..., template: ... })
    // Custom loaders may override either of these facilities, i.e.,
    // 1. To supply configuration objects from some other source (e.g., conventions)
    // 2. Or, to resolve configuration objects by loading viewmodels/templates via arbitrary logic.

    var defaultConfigRegistry = {};

    ko.components.register = function(componentName, config) {
        if (!config) {
            throw new Error('Invalid configuration for ' + componentName);
        }

        if (ko.components.isRegistered(componentName)) {
            throw new Error('Component ' + componentName + ' is already registered');
        }

        defaultConfigRegistry[componentName] = config;
    }

    ko.components.isRegistered = function(componentName) {
        return componentName in defaultConfigRegistry;
    }

    ko.components.unregister = function(componentName) {
        delete defaultConfigRegistry[componentName];
        ko.components.clearCachedDefinition(componentName);
    }

    ko.components.defaultLoader = {
        'getConfig': function(componentName, callback) {
            var result = defaultConfigRegistry.hasOwnProperty(componentName)
                ? defaultConfigRegistry[componentName]
                : null;
            callback(result);
        },

        'loadComponent': function(componentName, config, callback) {
            var errorCallback = makeErrorCallback(componentName);
            possiblyGetConfigFromAmd(errorCallback, config, function(loadedConfig) {
                resolveConfig(componentName, errorCallback, loadedConfig, callback);
            });
        },

        'loadTemplate': function(componentName, templateConfig, callback) {
            resolveTemplate(makeErrorCallback(componentName), templateConfig, callback);
        },

        'loadViewModel': function(componentName, viewModelConfig, callback) {
            resolveViewModel(makeErrorCallback(componentName), viewModelConfig, callback);
        }
    };

    var createViewModelKey = 'createViewModel';

    // Takes a config object of the form { template: ..., viewModel: ... }, and asynchronously convert it
    // into the standard component definition format:
    //    { template: <ArrayOfDomNodes>, createViewModel: function(params, componentInfo) { ... } }.
    // Since both template and viewModel may need to be resolved asynchronously, both tasks are performed
    // in parallel, and the results joined when both are ready. We don't depend on any promises infrastructure,
    // so this is implemented manually below.
    function resolveConfig(componentName, errorCallback, config, callback) {
        var result = {},
            makeCallBackWhenZero = 2,
            tryIssueCallback = function() {
                if (--makeCallBackWhenZero === 0) {
                    callback(result);
                }
            },
            templateConfig = config['template'],
            viewModelConfig = config['viewModel'];

        if (templateConfig) {
            possiblyGetConfigFromAmd(errorCallback, templateConfig, function(loadedConfig) {
                ko.components._getFirstResultFromLoaders('loadTemplate', [componentName, loadedConfig], function(resolvedTemplate) {
                    result['template'] = resolvedTemplate;
                    tryIssueCallback();
                });
            });
        } else {
            tryIssueCallback();
        }

        if (viewModelConfig) {
            possiblyGetConfigFromAmd(errorCallback, viewModelConfig, function(loadedConfig) {
                ko.components._getFirstResultFromLoaders('loadViewModel', [componentName, loadedConfig], function(resolvedViewModel) {
                    result[createViewModelKey] = resolvedViewModel;
                    tryIssueCallback();
                });
            });
        } else {
            tryIssueCallback();
        }
    }

    function resolveTemplate(errorCallback, templateConfig, callback) {
        if (typeof templateConfig === 'string') {
            // Markup - parse it
            callback(ko.utils.parseHtmlFragment(templateConfig));
        } else if (templateConfig instanceof Array) {
            // Assume already an array of DOM nodes - pass through unchanged
            callback(templateConfig);
        } else if (isDocumentFragment(templateConfig)) {
            // Document fragment - use its child nodes
            callback(ko.utils.makeArray(templateConfig.childNodes));
        } else if (templateConfig['element']) {
            var element = templateConfig['element'];
            if (isDomElement(element)) {
                // Element instance - copy its child nodes
                callback(cloneNodesFromTemplateSourceElement(element));
            } else if (typeof element === 'string') {
                // Element ID - find it, then copy its child nodes
                var elemInstance = document.getElementById(element);
                if (elemInstance) {
                    callback(cloneNodesFromTemplateSourceElement(elemInstance));
                } else {
                    errorCallback('Cannot find element with ID ' + element);
                }
            } else {
                errorCallback('Unknown element type: ' + element);
            }
        } else {
            errorCallback('Unknown template value: ' + templateConfig);
        }
    }

    function resolveViewModel(errorCallback, viewModelConfig, callback) {
        if (typeof viewModelConfig === 'function') {
            // Constructor - convert to standard factory function format
            // By design, this does *not* supply componentInfo to the constructor, as the intent is that
            // componentInfo contains non-viewmodel data (e.g., the component's element) that should only
            // be used in factory functions, not viewmodel constructors.
            callback(function (params /*, componentInfo */) {
                return new viewModelConfig(params);
            });
        } else if (typeof viewModelConfig[createViewModelKey] === 'function') {
            // Already a factory function - use it as-is
            callback(viewModelConfig[createViewModelKey]);
        } else if ('instance' in viewModelConfig) {
            // Fixed object instance - promote to createViewModel format for API consistency
            var fixedInstance = viewModelConfig['instance'];
            callback(function (params, componentInfo) {
                return fixedInstance;
            });
        } else if ('viewModel' in viewModelConfig) {
            // Resolved AMD module whose value is of the form { viewModel: ... }
            resolveViewModel(errorCallback, viewModelConfig['viewModel'], callback);
        } else {
            errorCallback('Unknown viewModel value: ' + viewModelConfig);
        }
    }

    function cloneNodesFromTemplateSourceElement(elemInstance) {
        switch (ko.utils.tagNameLower(elemInstance)) {
            case 'script':
                return ko.utils.parseHtmlFragment(elemInstance.text);
            case 'textarea':
                return ko.utils.parseHtmlFragment(elemInstance.value);
            case 'template':
                // For browsers with proper <template> element support (i.e., where the .content property
                // gives a document fragment), use that document fragment.
                if (isDocumentFragment(elemInstance.content)) {
                    return ko.utils.cloneNodes(elemInstance.content.childNodes);
                }
        }

        // Regular elements such as <div>, and <template> elements on old browsers that don't really
        // understand <template> and just treat it as a regular container
        return ko.utils.cloneNodes(elemInstance.childNodes);
    }

    function isDomElement(obj) {
        if (window['HTMLElement']) {
            return obj instanceof HTMLElement;
        } else {
            return obj && obj.tagName && obj.nodeType === 1;
        }
    }

    function isDocumentFragment(obj) {
        if (window['DocumentFragment']) {
            return obj instanceof DocumentFragment;
        } else {
            return obj && obj.nodeType === 11;
        }
    }

    function possiblyGetConfigFromAmd(errorCallback, config, callback) {
        if (typeof config['require'] === 'string') {
            // The config is the value of an AMD module
            if (require || window['require']) {
                (require || window['require'])([config['require']], callback);
            } else {
                errorCallback('Uses require, but no AMD loader is present');
            }
        } else {
            callback(config);
        }
    }

    function makeErrorCallback(componentName) {
        return function (message) {
            throw new Error('Component \'' + componentName + '\': ' + message);
        };
    }

    ko.exportSymbol('components.register', ko.components.register);
    ko.exportSymbol('components.isRegistered', ko.components.isRegistered);
    ko.exportSymbol('components.unregister', ko.components.unregister);

    // Expose the default loader so that developers can directly ask it for configuration
    // or to resolve configuration
    ko.exportSymbol('components.defaultLoader', ko.components.defaultLoader);

    // By default, the default loader is the only registered component loader
    ko.components['loaders'].push(ko.components.defaultLoader);

    // Privately expose the underlying config registry for use in old-IE shim
    ko.components._allRegisteredComponents = defaultConfigRegistry;
})();
(function (undefined) {
    // Overridable API for determining which component name applies to a given node. By overriding this,
    // you can for example map specific tagNames to components that are not preregistered.
    ko.components['getComponentNameForNode'] = function(node) {
        var tagNameLower = ko.utils.tagNameLower(node);
        return ko.components.isRegistered(tagNameLower) && tagNameLower;
    };

    ko.components.addBindingsForCustomElement = function(allBindings, node, bindingContext, valueAccessors) {
        // Determine if it's really a custom element matching a component
        if (node.nodeType === 1) {
            var componentName = ko.components['getComponentNameForNode'](node);
            if (componentName) {
                // It does represent a component, so add a component binding for it
                allBindings = allBindings || {};

                if (allBindings['component']) {
                    // Avoid silently overwriting some other 'component' binding that may already be on the element
                    throw new Error('Cannot use the "component" binding on a custom element matching a component');
                }

                var componentBindingValue = { 'name': componentName, 'params': getComponentParamsFromCustomElement(node, bindingContext) };

                allBindings['component'] = valueAccessors
                    ? function() { return componentBindingValue; }
                    : componentBindingValue;
            }
        }

        return allBindings;
    }

    var nativeBindingProviderInstance = new ko.bindingProvider();

    function getComponentParamsFromCustomElement(elem, bindingContext) {
        var paramsAttribute = elem.getAttribute('params');

        if (paramsAttribute) {
            var params = nativeBindingProviderInstance['parseBindingsString'](paramsAttribute, bindingContext, elem, { 'valueAccessors': true, 'bindingParams': true }),
                rawParamComputedValues = ko.utils.objectMap(params, function(paramValue, paramName) {
                    return ko.computed(paramValue, null, { disposeWhenNodeIsRemoved: elem });
                }),
                result = ko.utils.objectMap(rawParamComputedValues, function(paramValueComputed, paramName) {
                    // Does the evaluation of the parameter value unwrap any observables?
                    if (!paramValueComputed.isActive()) {
                        // No it doesn't, so there's no need for any computed wrapper. Just pass through the supplied value directly.
                        // Example: "someVal: firstName, age: 123" (whether or not firstName is an observable/computed)
                        return paramValueComputed.peek();
                    } else {
                        // Yes it does. Supply a computed property that unwraps both the outer (binding expression)
                        // level of observability, and any inner (resulting model value) level of observability.
                        // This means the component doesn't have to worry about multiple unwrapping.
                        return ko.computed(function() {
                            return ko.utils.unwrapObservable(paramValueComputed());
                        }, null, { disposeWhenNodeIsRemoved: elem });
                    }
                });

            // Give access to the raw computeds, as long as that wouldn't overwrite any custom param also called '$raw'
            // This is in case the developer wants to react to outer (binding) observability separately from inner
            // (model value) observability, or in case the model value observable has subobservables.
            if (!result.hasOwnProperty('$raw')) {
                result['$raw'] = rawParamComputedValues;
            }

            return result;
        } else {
            // For consistency, absence of a "params" attribute is treated the same as the presence of
            // any empty one. Otherwise component viewmodels need special code to check whether or not
            // 'params' or 'params.$raw' is null/undefined before reading subproperties, which is annoying.
            return { '$raw': {} };
        }
    }

    // --------------------------------------------------------------------------------
    // Compatibility code for older (pre-HTML5) IE browsers

    if (ko.utils.ieVersion < 9) {
        // Whenever you preregister a component, enable it as a custom element in the current document
        ko.components['register'] = (function(originalFunction) {
            return function(componentName) {
                document.createElement(componentName); // Allows IE<9 to parse markup containing the custom element
                return originalFunction.apply(this, arguments);
            }
        })(ko.components['register']);

        // Whenever you create a document fragment, enable all preregistered component names as custom elements
        // This is needed to make innerShiv/jQuery HTML parsing correctly handle the custom elements
        document.createDocumentFragment = (function(originalFunction) {
            return function() {
                var newDocFrag = originalFunction(),
                    allComponents = ko.components._allRegisteredComponents;
                for (var componentName in allComponents) {
                    if (allComponents.hasOwnProperty(componentName)) {
                        newDocFrag.createElement(componentName);
                    }
                }
                return newDocFrag;
            };
        })(document.createDocumentFragment);
    }
})();(function(undefined) {

    var componentLoadingOperationUniqueId = 0;

    ko.bindingHandlers['component'] = {
        'init': function(element, valueAccessor, ignored1, ignored2, bindingContext) {
            var currentViewModel,
                currentLoadingOperationId,
                disposeAssociatedComponentViewModel = function () {
                    var currentViewModelDispose = currentViewModel && currentViewModel['dispose'];
                    if (typeof currentViewModelDispose === 'function') {
                        currentViewModelDispose.call(currentViewModel);
                    }

                    // Any in-flight loading operation is no longer relevant, so make sure we ignore its completion
                    currentLoadingOperationId = null;
                };

            ko.utils.domNodeDisposal.addDisposeCallback(element, disposeAssociatedComponentViewModel);

            ko.computed(function () {
                var value = ko.utils.unwrapObservable(valueAccessor()),
                    componentName, componentParams;

                if (typeof value === 'string') {
                    componentName = value;
                } else {
                    componentName = ko.utils.unwrapObservable(value['name']);
                    componentParams = ko.utils.unwrapObservable(value['params']);
                }

                if (!componentName) {
                    throw new Error('No component name specified');
                }

                var loadingOperationId = currentLoadingOperationId = ++componentLoadingOperationUniqueId;
                ko.components.get(componentName, function(componentDefinition) {
                    // If this is not the current load operation for this element, ignore it.
                    if (currentLoadingOperationId !== loadingOperationId) {
                        return;
                    }

                    // Clean up previous state
                    disposeAssociatedComponentViewModel();

                    // Instantiate and bind new component. Implicitly this cleans any old DOM nodes.
                    if (!componentDefinition) {
                        throw new Error('Unknown component \'' + componentName + '\'');
                    }
                    cloneTemplateIntoElement(componentName, componentDefinition, element);
                    var componentViewModel = createViewModel(componentDefinition, element, componentParams),
                        childBindingContext = bindingContext['createChildContext'](componentViewModel);
                    currentViewModel = componentViewModel;
                    ko.applyBindingsToDescendants(childBindingContext, element);
                });
            }, null, { disposeWhenNodeIsRemoved: element });

            return { 'controlsDescendantBindings': true };
        }
    };

    ko.virtualElements.allowedBindings['component'] = true;

    function cloneTemplateIntoElement(componentName, componentDefinition, element) {
        var template = componentDefinition['template'];
        if (!template) {
            throw new Error('Component \'' + componentName + '\' has no template');
        }

        var clonedNodesArray = ko.utils.cloneNodes(template);
        ko.virtualElements.setDomNodeChildren(element, clonedNodesArray);
    }

    function createViewModel(componentDefinition, element, componentParams) {
        var componentViewModelFactory = componentDefinition['createViewModel'];
        return componentViewModelFactory
            ? componentViewModelFactory.call(componentDefinition, componentParams, { element: element })
            : componentParams; // Template-only component
    }

})();
var attrHtmlToJavascriptMap = { 'class': 'className', 'for': 'htmlFor' };
ko.bindingHandlers['attr'] = {
    'update': function(element, valueAccessor, allBindings) {
        var value = ko.utils.unwrapObservable(valueAccessor()) || {};
        ko.utils.objectForEach(value, function(attrName, attrValue) {
            attrValue = ko.utils.unwrapObservable(attrValue);

            // To cover cases like "attr: { checked:someProp }", we want to remove the attribute entirely
            // when someProp is a "no value"-like value (strictly null, false, or undefined)
            // (because the absence of the "checked" attr is how to mark an element as not checked, etc.)
            var toRemove = (attrValue === false) || (attrValue === null) || (attrValue === undefined);
            if (toRemove)
                element.removeAttribute(attrName);

            // In IE <= 7 and IE8 Quirks Mode, you have to use the Javascript property name instead of the
            // HTML attribute name for certain attributes. IE8 Standards Mode supports the correct behavior,
            // but instead of figuring out the mode, we'll just set the attribute through the Javascript
            // property for IE <= 8.
            if (ko.utils.ieVersion <= 8 && attrName in attrHtmlToJavascriptMap) {
                attrName = attrHtmlToJavascriptMap[attrName];
                if (toRemove)
                    element.removeAttribute(attrName);
                else
                    element[attrName] = attrValue;
            } else if (!toRemove) {
                element.setAttribute(attrName, attrValue.toString());
            }

            // Treat "name" specially - although you can think of it as an attribute, it also needs
            // special handling on older versions of IE (https://github.com/SteveSanderson/knockout/pull/333)
            // Deliberately being case-sensitive here because XHTML would regard "Name" as a different thing
            // entirely, and there's no strong reason to allow for such casing in HTML.
            if (attrName === "name") {
                ko.utils.setElementName(element, toRemove ? "" : attrValue.toString());
            }
        });
    }
};
(function() {

ko.bindingHandlers['checked'] = {
    'after': ['value', 'attr'],
    'init': function (element, valueAccessor, allBindings) {
        var checkedValue = ko.pureComputed(function() {
            // Treat "value" like "checkedValue" when it is included with "checked" binding
            if (allBindings['has']('checkedValue')) {
                return ko.utils.unwrapObservable(allBindings.get('checkedValue'));
            } else if (allBindings['has']('value')) {
                return ko.utils.unwrapObservable(allBindings.get('value'));
            }

            return element.value;
        });

        function updateModel() {
            // This updates the model value from the view value.
            // It runs in response to DOM events (click) and changes in checkedValue.
            var isChecked = element.checked,
                elemValue = useCheckedValue ? checkedValue() : isChecked;

            // When we're first setting up this computed, don't change any model state.
            if (ko.computedContext.isInitial()) {
                return;
            }

            // We can ignore unchecked radio buttons, because some other radio
            // button will be getting checked, and that one can take care of updating state.
            if (isRadio && !isChecked) {
                return;
            }

            var modelValue = ko.dependencyDetection.ignore(valueAccessor);
            if (isValueArray) {
                if (oldElemValue !== elemValue) {
                    // When we're responding to the checkedValue changing, and the element is
                    // currently checked, replace the old elem value with the new elem value
                    // in the model array.
                    if (isChecked) {
                        ko.utils.addOrRemoveItem(modelValue, elemValue, true);
                        ko.utils.addOrRemoveItem(modelValue, oldElemValue, false);
                    }

                    oldElemValue = elemValue;
                } else {
                    // When we're responding to the user having checked/unchecked a checkbox,
                    // add/remove the element value to the model array.
                    ko.utils.addOrRemoveItem(modelValue, elemValue, isChecked);
                }
            } else {
                ko.expressionRewriting.writeValueToProperty(modelValue, allBindings, 'checked', elemValue, true);
            }
        };

        function updateView() {
            // This updates the view value from the model value.
            // It runs in response to changes in the bound (checked) value.
            var modelValue = ko.utils.unwrapObservable(valueAccessor());

            if (isValueArray) {
                // When a checkbox is bound to an array, being checked represents its value being present in that array
                element.checked = ko.utils.arrayIndexOf(modelValue, checkedValue()) >= 0;
            } else if (isCheckbox) {
                // When a checkbox is bound to any other value (not an array), being checked represents the value being trueish
                element.checked = modelValue;
            } else {
                // For radio buttons, being checked means that the radio button's value corresponds to the model value
                element.checked = (checkedValue() === modelValue);
            }
        };

        var isCheckbox = element.type == "checkbox",
            isRadio = element.type == "radio";

        // Only bind to check boxes and radio buttons
        if (!isCheckbox && !isRadio) {
            return;
        }

        var isValueArray = isCheckbox && (ko.utils.unwrapObservable(valueAccessor()) instanceof Array),
            oldElemValue = isValueArray ? checkedValue() : undefined,
            useCheckedValue = isRadio || isValueArray;

        // IE 6 won't allow radio buttons to be selected unless they have a name
        if (isRadio && !element.name)
            ko.bindingHandlers['uniqueName']['init'](element, function() { return true });

        // Set up two computeds to update the binding:

        // The first responds to changes in the checkedValue value and to element clicks
        ko.computed(updateModel, null, { disposeWhenNodeIsRemoved: element });
        ko.utils.registerEventHandler(element, "click", updateModel);

        // The second responds to changes in the model value (the one associated with the checked binding)
        ko.computed(updateView, null, { disposeWhenNodeIsRemoved: element });
    }
};
ko.expressionRewriting.twoWayBindings['checked'] = true;

ko.bindingHandlers['checkedValue'] = {
    'update': function (element, valueAccessor) {
        element.value = ko.utils.unwrapObservable(valueAccessor());
    }
};

})();var classesWrittenByBindingKey = '__ko__cssValue';
ko.bindingHandlers['css'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (typeof value == "object") {
            ko.utils.objectForEach(value, function(className, shouldHaveClass) {
                shouldHaveClass = ko.utils.unwrapObservable(shouldHaveClass);
                ko.utils.toggleDomNodeCssClass(element, className, shouldHaveClass);
            });
        } else {
            value = String(value || ''); // Make sure we don't try to store or set a non-string value
            ko.utils.toggleDomNodeCssClass(element, element[classesWrittenByBindingKey], false);
            element[classesWrittenByBindingKey] = value;
            ko.utils.toggleDomNodeCssClass(element, value, true);
        }
    }
};
ko.bindingHandlers['enable'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        if (value && element.disabled)
            element.removeAttribute("disabled");
        else if ((!value) && (!element.disabled))
            element.disabled = true;
    }
};

ko.bindingHandlers['disable'] = {
    'update': function (element, valueAccessor) {
        ko.bindingHandlers['enable']['update'](element, function() { return !ko.utils.unwrapObservable(valueAccessor()) });
    }
};
// For certain common events (currently just 'click'), allow a simplified data-binding syntax
// e.g. click:handler instead of the usual full-length event:{click:handler}
function makeEventHandlerShortcut(eventName) {
    ko.bindingHandlers[eventName] = {
        'init': function(element, valueAccessor, allBindings, viewModel, bindingContext) {
            var newValueAccessor = function () {
                var result = {};
                result[eventName] = valueAccessor();
                return result;
            };
            return ko.bindingHandlers['event']['init'].call(this, element, newValueAccessor, allBindings, viewModel, bindingContext);
        }
    }
}

ko.bindingHandlers['event'] = {
    'init' : function (element, valueAccessor, allBindings, viewModel, bindingContext) {
        var eventsToHandle = valueAccessor() || {};
        ko.utils.objectForEach(eventsToHandle, function(eventName) {
            if (typeof eventName == "string") {
                ko.utils.registerEventHandler(element, eventName, function (event) {
                    var handlerReturnValue;
                    var handlerFunction = valueAccessor()[eventName];
                    if (!handlerFunction)
                        return;

                    try {
                        // Take all the event args, and prefix with the viewmodel
                        var argsForHandler = ko.utils.makeArray(arguments);
                        viewModel = bindingContext['$data'];
                        argsForHandler.unshift(viewModel);
                        handlerReturnValue = handlerFunction.apply(viewModel, argsForHandler);
                    } finally {
                        if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.
                            if (event.preventDefault)
                                event.preventDefault();
                            else
                                event.returnValue = false;
                        }
                    }

                    var bubble = allBindings.get(eventName + 'Bubble') !== false;
                    if (!bubble) {
                        event.cancelBubble = true;
                        if (event.stopPropagation)
                            event.stopPropagation();
                    }
                });
            }
        });
    }
};
// "foreach: someExpression" is equivalent to "template: { foreach: someExpression }"
// "foreach: { data: someExpression, afterAdd: myfn }" is equivalent to "template: { foreach: someExpression, afterAdd: myfn }"
ko.bindingHandlers['foreach'] = {
    makeTemplateValueAccessor: function(valueAccessor) {
        return function() {
            var modelValue = valueAccessor(),
                unwrappedValue = ko.utils.peekObservable(modelValue);    // Unwrap without setting a dependency here

            // If unwrappedValue is the array, pass in the wrapped value on its own
            // The value will be unwrapped and tracked within the template binding
            // (See https://github.com/SteveSanderson/knockout/issues/523)
            if ((!unwrappedValue) || typeof unwrappedValue.length == "number")
                return { 'foreach': modelValue, 'templateEngine': ko.nativeTemplateEngine.instance };

            // If unwrappedValue.data is the array, preserve all relevant options and unwrap again value so we get updates
            ko.utils.unwrapObservable(modelValue);
            return {
                'foreach': unwrappedValue['data'],
                'as': unwrappedValue['as'],
                'includeDestroyed': unwrappedValue['includeDestroyed'],
                'afterAdd': unwrappedValue['afterAdd'],
                'beforeRemove': unwrappedValue['beforeRemove'],
                'afterRender': unwrappedValue['afterRender'],
                'beforeMove': unwrappedValue['beforeMove'],
                'afterMove': unwrappedValue['afterMove'],
                'templateEngine': ko.nativeTemplateEngine.instance
            };
        };
    },
    'init': function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        return ko.bindingHandlers['template']['init'](element, ko.bindingHandlers['foreach'].makeTemplateValueAccessor(valueAccessor));
    },
    'update': function(element, valueAccessor, allBindings, viewModel, bindingContext) {
        return ko.bindingHandlers['template']['update'](element, ko.bindingHandlers['foreach'].makeTemplateValueAccessor(valueAccessor), allBindings, viewModel, bindingContext);
    }
};
ko.expressionRewriting.bindingRewriteValidators['foreach'] = false; // Can't rewrite control flow bindings
ko.virtualElements.allowedBindings['foreach'] = true;
var hasfocusUpdatingProperty = '__ko_hasfocusUpdating';
var hasfocusLastValue = '__ko_hasfocusLastValue';
ko.bindingHandlers['hasfocus'] = {
    'init': function(element, valueAccessor, allBindings) {
        var handleElementFocusChange = function(isFocused) {
            // Where possible, ignore which event was raised and determine focus state using activeElement,
            // as this avoids phantom focus/blur events raised when changing tabs in modern browsers.
            // However, not all KO-targeted browsers (Firefox 2) support activeElement. For those browsers,
            // prevent a loss of focus when changing tabs/windows by setting a flag that prevents hasfocus
            // from calling 'blur()' on the element when it loses focus.
            // Discussion at https://github.com/SteveSanderson/knockout/pull/352
            element[hasfocusUpdatingProperty] = true;
            var ownerDoc = element.ownerDocument;
            if ("activeElement" in ownerDoc) {
                var active;
                try {
                    active = ownerDoc.activeElement;
                } catch(e) {
                    // IE9 throws if you access activeElement during page load (see issue #703)
                    active = ownerDoc.body;
                }
                isFocused = (active === element);
            }
            var modelValue = valueAccessor();
            ko.expressionRewriting.writeValueToProperty(modelValue, allBindings, 'hasfocus', isFocused, true);

            //cache the latest value, so we can avoid unnecessarily calling focus/blur in the update function
            element[hasfocusLastValue] = isFocused;
            element[hasfocusUpdatingProperty] = false;
        };
        var handleElementFocusIn = handleElementFocusChange.bind(null, true);
        var handleElementFocusOut = handleElementFocusChange.bind(null, false);

        ko.utils.registerEventHandler(element, "focus", handleElementFocusIn);
        ko.utils.registerEventHandler(element, "focusin", handleElementFocusIn); // For IE
        ko.utils.registerEventHandler(element, "blur",  handleElementFocusOut);
        ko.utils.registerEventHandler(element, "focusout",  handleElementFocusOut); // For IE
    },
    'update': function(element, valueAccessor) {
        var value = !!ko.utils.unwrapObservable(valueAccessor()); //force boolean to compare with last value
        if (!element[hasfocusUpdatingProperty] && element[hasfocusLastValue] !== value) {
            value ? element.focus() : element.blur();
            ko.dependencyDetection.ignore(ko.utils.triggerEvent, null, [element, value ? "focusin" : "focusout"]); // For IE, which doesn't reliably fire "focus" or "blur" events synchronously
        }
    }
};
ko.expressionRewriting.twoWayBindings['hasfocus'] = true;

ko.bindingHandlers['hasFocus'] = ko.bindingHandlers['hasfocus']; // Make "hasFocus" an alias
ko.expressionRewriting.twoWayBindings['hasFocus'] = true;
ko.bindingHandlers['html'] = {
    'init': function() {
        // Prevent binding on the dynamically-injected HTML (as developers are unlikely to expect that, and it has security implications)
        return { 'controlsDescendantBindings': true };
    },
    'update': function (element, valueAccessor) {
        // setHtml will unwrap the value if needed
        ko.utils.setHtml(element, valueAccessor());
    }
};
// Makes a binding like with or if
function makeWithIfBinding(bindingKey, isWith, isNot, makeContextCallback) {
    ko.bindingHandlers[bindingKey] = {
        'init': function(element, valueAccessor, allBindings, viewModel, bindingContext) {
            var didDisplayOnLastUpdate,
                savedNodes;
            ko.computed(function() {
                var dataValue = ko.utils.unwrapObservable(valueAccessor()),
                    shouldDisplay = !isNot !== !dataValue, // equivalent to isNot ? !dataValue : !!dataValue
                    isFirstRender = !savedNodes,
                    needsRefresh = isFirstRender || isWith || (shouldDisplay !== didDisplayOnLastUpdate);

                if (needsRefresh) {
                    // Save a copy of the inner nodes on the initial update, but only if we have dependencies.
                    if (isFirstRender && ko.computedContext.getDependenciesCount()) {
                        savedNodes = ko.utils.cloneNodes(ko.virtualElements.childNodes(element), true /* shouldCleanNodes */);
                    }

                    if (shouldDisplay) {
                        if (!isFirstRender) {
                            ko.virtualElements.setDomNodeChildren(element, ko.utils.cloneNodes(savedNodes));
                        }
                        ko.applyBindingsToDescendants(makeContextCallback ? makeContextCallback(bindingContext, dataValue) : bindingContext, element);
                    } else {
                        ko.virtualElements.emptyNode(element);
                    }

                    didDisplayOnLastUpdate = shouldDisplay;
                }
            }, null, { disposeWhenNodeIsRemoved: element });
            return { 'controlsDescendantBindings': true };
        }
    };
    ko.expressionRewriting.bindingRewriteValidators[bindingKey] = false; // Can't rewrite control flow bindings
    ko.virtualElements.allowedBindings[bindingKey] = true;
}

// Construct the actual binding handlers
makeWithIfBinding('if');
makeWithIfBinding('ifnot', false /* isWith */, true /* isNot */);
makeWithIfBinding('with', true /* isWith */, false /* isNot */,
    function(bindingContext, dataValue) {
        return bindingContext['createChildContext'](dataValue);
    }
);
var captionPlaceholder = {};
ko.bindingHandlers['options'] = {
    'init': function(element) {
        if (ko.utils.tagNameLower(element) !== "select")
            throw new Error("options binding applies only to SELECT elements");

        // Remove all existing <option>s.
        while (element.length > 0) {
            element.remove(0);
        }

        // Ensures that the binding processor doesn't try to bind the options
        return { 'controlsDescendantBindings': true };
    },
    'update': function (element, valueAccessor, allBindings) {
        function selectedOptions() {
            return ko.utils.arrayFilter(element.options, function (node) { return node.selected; });
        }

        var selectWasPreviouslyEmpty = element.length == 0;
        var previousScrollTop = (!selectWasPreviouslyEmpty && element.multiple) ? element.scrollTop : null;
        var unwrappedArray = ko.utils.unwrapObservable(valueAccessor());
        var includeDestroyed = allBindings.get('optionsIncludeDestroyed');
        var arrayToDomNodeChildrenOptions = {};
        var captionValue;
        var filteredArray;
        var previousSelectedValues;

        if (element.multiple) {
            previousSelectedValues = ko.utils.arrayMap(selectedOptions(), ko.selectExtensions.readValue);
        } else {
            previousSelectedValues = element.selectedIndex >= 0 ? [ ko.selectExtensions.readValue(element.options[element.selectedIndex]) ] : [];
        }

        if (unwrappedArray) {
            if (typeof unwrappedArray.length == "undefined") // Coerce single value into array
                unwrappedArray = [unwrappedArray];

            // Filter out any entries marked as destroyed
            filteredArray = ko.utils.arrayFilter(unwrappedArray, function(item) {
                return includeDestroyed || item === undefined || item === null || !ko.utils.unwrapObservable(item['_destroy']);
            });

            // If caption is included, add it to the array
            if (allBindings['has']('optionsCaption')) {
                captionValue = ko.utils.unwrapObservable(allBindings.get('optionsCaption'));
                // If caption value is null or undefined, don't show a caption
                if (captionValue !== null && captionValue !== undefined) {
                    filteredArray.unshift(captionPlaceholder);
                }
            }
        } else {
            // If a falsy value is provided (e.g. null), we'll simply empty the select element
        }

        function applyToObject(object, predicate, defaultValue) {
            var predicateType = typeof predicate;
            if (predicateType == "function")    // Given a function; run it against the data value
                return predicate(object);
            else if (predicateType == "string") // Given a string; treat it as a property name on the data value
                return object[predicate];
            else                                // Given no optionsText arg; use the data value itself
                return defaultValue;
        }

        // The following functions can run at two different times:
        // The first is when the whole array is being updated directly from this binding handler.
        // The second is when an observable value for a specific array entry is updated.
        // oldOptions will be empty in the first case, but will be filled with the previously generated option in the second.
        var itemUpdate = false;
        function optionForArrayItem(arrayEntry, index, oldOptions) {
            if (oldOptions.length) {
                previousSelectedValues = oldOptions[0].selected ? [ ko.selectExtensions.readValue(oldOptions[0]) ] : [];
                itemUpdate = true;
            }
            var option = element.ownerDocument.createElement("option");
            if (arrayEntry === captionPlaceholder) {
                ko.utils.setTextContent(option, allBindings.get('optionsCaption'));
                ko.selectExtensions.writeValue(option, undefined);
            } else {
                // Apply a value to the option element
                var optionValue = applyToObject(arrayEntry, allBindings.get('optionsValue'), arrayEntry);
                ko.selectExtensions.writeValue(option, ko.utils.unwrapObservable(optionValue));

                // Apply some text to the option element
                var optionText = applyToObject(arrayEntry, allBindings.get('optionsText'), optionValue);
                ko.utils.setTextContent(option, optionText);
            }
            return [option];
        }

        // By using a beforeRemove callback, we delay the removal until after new items are added. This fixes a selection
        // problem in IE<=8 and Firefox. See https://github.com/knockout/knockout/issues/1208
        arrayToDomNodeChildrenOptions['beforeRemove'] =
            function (option) {
                element.removeChild(option);
            };

        function setSelectionCallback(arrayEntry, newOptions) {
            // IE6 doesn't like us to assign selection to OPTION nodes before they're added to the document.
            // That's why we first added them without selection. Now it's time to set the selection.
            if (previousSelectedValues.length) {
                var isSelected = ko.utils.arrayIndexOf(previousSelectedValues, ko.selectExtensions.readValue(newOptions[0])) >= 0;
                ko.utils.setOptionNodeSelectionState(newOptions[0], isSelected);

                // If this option was changed from being selected during a single-item update, notify the change
                if (itemUpdate && !isSelected)
                    ko.dependencyDetection.ignore(ko.utils.triggerEvent, null, [element, "change"]);
            }
        }

        var callback = setSelectionCallback;
        if (allBindings['has']('optionsAfterRender')) {
            callback = function(arrayEntry, newOptions) {
                setSelectionCallback(arrayEntry, newOptions);
                ko.dependencyDetection.ignore(allBindings.get('optionsAfterRender'), null, [newOptions[0], arrayEntry !== captionPlaceholder ? arrayEntry : undefined]);
            }
        }

        ko.utils.setDomNodeChildrenFromArrayMapping(element, filteredArray, optionForArrayItem, arrayToDomNodeChildrenOptions, callback);

        ko.dependencyDetection.ignore(function () {
            if (allBindings.get('valueAllowUnset') && allBindings['has']('value')) {
                // The model value is authoritative, so make sure its value is the one selected
                ko.selectExtensions.writeValue(element, ko.utils.unwrapObservable(allBindings.get('value')), true /* allowUnset */);
            } else {
                // Determine if the selection has changed as a result of updating the options list
                var selectionChanged;
                if (element.multiple) {
                    // For a multiple-select box, compare the new selection count to the previous one
                    // But if nothing was selected before, the selection can't have changed
                    selectionChanged = previousSelectedValues.length && selectedOptions().length < previousSelectedValues.length;
                } else {
                    // For a single-select box, compare the current value to the previous value
                    // But if nothing was selected before or nothing is selected now, just look for a change in selection
                    selectionChanged = (previousSelectedValues.length && element.selectedIndex >= 0)
                        ? (ko.selectExtensions.readValue(element.options[element.selectedIndex]) !== previousSelectedValues[0])
                        : (previousSelectedValues.length || element.selectedIndex >= 0);
                }

                // Ensure consistency between model value and selected option.
                // If the dropdown was changed so that selection is no longer the same,
                // notify the value or selectedOptions binding.
                if (selectionChanged) {
                    ko.utils.triggerEvent(element, "change");
                }
            }
        });

        // Workaround for IE bug
        ko.utils.ensureSelectElementIsRenderedCorrectly(element);

        if (previousScrollTop && Math.abs(previousScrollTop - element.scrollTop) > 20)
            element.scrollTop = previousScrollTop;
    }
};
ko.bindingHandlers['options'].optionValueDomDataKey = ko.utils.domData.nextKey();
ko.bindingHandlers['selectedOptions'] = {
    'after': ['options', 'foreach'],
    'init': function (element, valueAccessor, allBindings) {
        ko.utils.registerEventHandler(element, "change", function () {
            var value = valueAccessor(), valueToWrite = [];
            ko.utils.arrayForEach(element.getElementsByTagName("option"), function(node) {
                if (node.selected)
                    valueToWrite.push(ko.selectExtensions.readValue(node));
            });
            ko.expressionRewriting.writeValueToProperty(value, allBindings, 'selectedOptions', valueToWrite);
        });
    },
    'update': function (element, valueAccessor) {
        if (ko.utils.tagNameLower(element) != "select")
            throw new Error("values binding applies only to SELECT elements");

        var newValue = ko.utils.unwrapObservable(valueAccessor());
        if (newValue && typeof newValue.length == "number") {
            ko.utils.arrayForEach(element.getElementsByTagName("option"), function(node) {
                var isSelected = ko.utils.arrayIndexOf(newValue, ko.selectExtensions.readValue(node)) >= 0;
                ko.utils.setOptionNodeSelectionState(node, isSelected);
            });
        }
    }
};
ko.expressionRewriting.twoWayBindings['selectedOptions'] = true;
ko.bindingHandlers['style'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor() || {});
        ko.utils.objectForEach(value, function(styleName, styleValue) {
            styleValue = ko.utils.unwrapObservable(styleValue);

            if (styleValue === null || styleValue === undefined || styleValue === false) {
                // Empty string removes the value, whereas null/undefined have no effect
                styleValue = "";
            }

            element.style[styleName] = styleValue;
        });
    }
};
ko.bindingHandlers['submit'] = {
    'init': function (element, valueAccessor, allBindings, viewModel, bindingContext) {
        if (typeof valueAccessor() != "function")
            throw new Error("The value for a submit binding must be a function");
        ko.utils.registerEventHandler(element, "submit", function (event) {
            var handlerReturnValue;
            var value = valueAccessor();
            try { handlerReturnValue = value.call(bindingContext['$data'], element); }
            finally {
                if (handlerReturnValue !== true) { // Normally we want to prevent default action. Developer can override this be explicitly returning true.
                    if (event.preventDefault)
                        event.preventDefault();
                    else
                        event.returnValue = false;
                }
            }
        });
    }
};
ko.bindingHandlers['text'] = {
    'init': function() {
        // Prevent binding on the dynamically-injected text node (as developers are unlikely to expect that, and it has security implications).
        // It should also make things faster, as we no longer have to consider whether the text node might be bindable.
        return { 'controlsDescendantBindings': true };
    },
    'update': function (element, valueAccessor) {
        ko.utils.setTextContent(element, valueAccessor());
    }
};
ko.virtualElements.allowedBindings['text'] = true;
(function () {

if (window && window.navigator) {
    var parseVersion = function (matches) {
        if (matches) {
            return parseFloat(matches[1]);
        }
    };

    // Detect various browser versions because some old versions don't fully support the 'input' event
    var operaVersion = window.opera && window.opera.version && parseInt(window.opera.version()),
        userAgent = window.navigator.userAgent,
        safariVersion = parseVersion(userAgent.match(/^(?:(?!chrome).)*version\/([^ ]*) safari/i)),
        firefoxVersion = parseVersion(userAgent.match(/Firefox\/([^ ]*)/));
}

// IE 8 and 9 have bugs that prevent the normal events from firing when the value changes.
// But it does fire the 'selectionchange' event on many of those, presumably because the
// cursor is moving and that counts as the selection changing. The 'selectionchange' event is
// fired at the document level only and doesn't directly indicate which element changed. We
// set up just one event handler for the document and use 'activeElement' to determine which
// element was changed.
if (ko.utils.ieVersion < 10) {
    var selectionChangeRegisteredName = ko.utils.domData.nextKey(),
        selectionChangeHandlerName = ko.utils.domData.nextKey();
    var selectionChangeHandler = function(event) {
        var target = this.activeElement,
            handler = target && ko.utils.domData.get(target, selectionChangeHandlerName);
        if (handler) {
            handler(event);
        }
    };
    var registerForSelectionChangeEvent = function (element, handler) {
        var ownerDoc = element.ownerDocument;
        if (!ko.utils.domData.get(ownerDoc, selectionChangeRegisteredName)) {
            ko.utils.domData.set(ownerDoc, selectionChangeRegisteredName, true);
            ko.utils.registerEventHandler(ownerDoc, 'selectionchange', selectionChangeHandler);
        }
        ko.utils.domData.set(element, selectionChangeHandlerName, handler);
    };
}

ko.bindingHandlers['textInput'] = {
    'init': function (element, valueAccessor, allBindings) {

        var previousElementValue = element.value,
            timeoutHandle,
            elementValueBeforeEvent;

        var updateModel = function (event) {
            clearTimeout(timeoutHandle);
            elementValueBeforeEvent = timeoutHandle = undefined;

            var elementValue = element.value;
            if (previousElementValue !== elementValue) {
                // Provide a way for tests to know exactly which event was processed
                if (DEBUG && event) element['_ko_textInputProcessedEvent'] = event.type;
                previousElementValue = elementValue;
                ko.expressionRewriting.writeValueToProperty(valueAccessor(), allBindings, 'textInput', elementValue);
            }
        };

        var deferUpdateModel = function (event) {
            if (!timeoutHandle) {
                // The elementValueBeforeEvent variable is set *only* during the brief gap between an
                // event firing and the updateModel function running. This allows us to ignore model
                // updates that are from the previous state of the element, usually due to techniques
                // such as rateLimit. Such updates, if not ignored, can cause keystrokes to be lost.
                elementValueBeforeEvent = element.value;
                var handler = DEBUG ? updateModel.bind(element, {type: event.type}) : updateModel;
                timeoutHandle = setTimeout(handler, 4);
            }
        };

        var updateView = function () {
            var modelValue = ko.utils.unwrapObservable(valueAccessor());

            if (modelValue === null || modelValue === undefined) {
                modelValue = '';
            }

            if (elementValueBeforeEvent !== undefined && modelValue === elementValueBeforeEvent) {
                setTimeout(updateView, 4);
                return;
            }

            // Update the element only if the element and model are different. On some browsers, updating the value
            // will move the cursor to the end of the input, which would be bad while the user is typing.
            if (element.value !== modelValue) {
                previousElementValue = modelValue;  // Make sure we ignore events (propertychange) that result from updating the value
                element.value = modelValue;
            }
        };

        var onEvent = function (event, handler) {
            ko.utils.registerEventHandler(element, event, handler);
        };

        if (DEBUG && ko.bindingHandlers['textInput']['_forceUpdateOn']) {
            // Provide a way for tests to specify exactly which events are bound
            ko.utils.arrayForEach(ko.bindingHandlers['textInput']['_forceUpdateOn'], function(eventName) {
                if (eventName.slice(0,5) == 'after') {
                    onEvent(eventName.slice(5), deferUpdateModel);
                } else {
                    onEvent(eventName, updateModel);
                }
            });
        } else {
            if (ko.utils.ieVersion < 10) {
                // Internet Explorer <= 8 doesn't support the 'input' event, but does include 'propertychange' that fires whenever
                // any property of an element changes. Unlike 'input', it also fires if a property is changed from JavaScript code,
                // but that's an acceptable compromise for this binding. IE 9 does support 'input', but since it doesn't fire it
                // when using autocomplete, we'll use 'propertychange' for it also.
                onEvent('propertychange', function(event) {
                    if (event.propertyName === 'value') {
                        updateModel(event);
                    }
                });

                if (ko.utils.ieVersion == 8) {
                    // IE 8 has a bug where it fails to fire 'propertychange' on the first update following a value change from
                    // JavaScript code. It also doesn't fire if you clear the entire value. To fix this, we bind to the following
                    // events too.
                    onEvent('keyup', updateModel);      // A single keystoke
                    onEvent('keydown', updateModel);    // The first character when a key is held down
                }
                if (ko.utils.ieVersion >= 8) {
                    // Internet Explorer 9 doesn't fire the 'input' event when deleting text, including using
                    // the backspace, delete, or ctrl-x keys, clicking the 'x' to clear the input, dragging text
                    // out of the field, and cutting or deleting text using the context menu. 'selectionchange'
                    // can detect all of those except dragging text out of the field, for which we use 'dragend'.
                    // These are also needed in IE8 because of the bug described above.
                    registerForSelectionChangeEvent(element, updateModel);  // 'selectionchange' covers cut, paste, drop, delete, etc.
                    onEvent('dragend', deferUpdateModel);
                }
            } else {
                // All other supported browsers support the 'input' event, which fires whenever the content of the element is changed
                // through the user interface.
                onEvent('input', updateModel);

                if (safariVersion < 5 && ko.utils.tagNameLower(element) === "textarea") {
                    // Safari <5 doesn't fire the 'input' event for <textarea> elements (it does fire 'textInput'
                    // but only when typing). So we'll just catch as much as we can with keydown, cut, and paste.
                    onEvent('keydown', deferUpdateModel);
                    onEvent('paste', deferUpdateModel);
                    onEvent('cut', deferUpdateModel);
                } else if (operaVersion < 11) {
                    // Opera 10 doesn't always fire the 'input' event for cut, paste, undo & drop operations.
                    // We can try to catch some of those using 'keydown'.
                    onEvent('keydown', deferUpdateModel);
                } else if (firefoxVersion < 4.0) {
                    // Firefox <= 3.6 doesn't fire the 'input' event when text is filled in through autocomplete
                    onEvent('DOMAutoComplete', updateModel);

                    // Firefox <=3.5 doesn't fire the 'input' event when text is dropped into the input.
                    onEvent('dragdrop', updateModel);       // <3.5
                    onEvent('drop', updateModel);           // 3.5
                }
            }
        }

        // Bind to the change event so that we can catch programmatic updates of the value that fire this event.
        onEvent('change', updateModel);

        ko.computed(updateView, null, { disposeWhenNodeIsRemoved: element });
    }
};
ko.expressionRewriting.twoWayBindings['textInput'] = true;

// textinput is an alias for textInput
ko.bindingHandlers['textinput'] = {
    // preprocess is the only way to set up a full alias
    'preprocess': function (value, name, addBinding) {
        addBinding('textInput', value);
    }
};

})();ko.bindingHandlers['uniqueName'] = {
    'init': function (element, valueAccessor) {
        if (valueAccessor()) {
            var name = "ko_unique_" + (++ko.bindingHandlers['uniqueName'].currentIndex);
            ko.utils.setElementName(element, name);
        }
    }
};
ko.bindingHandlers['uniqueName'].currentIndex = 0;
ko.bindingHandlers['value'] = {
    'after': ['options', 'foreach'],
    'init': function (element, valueAccessor, allBindings) {
        // If the value binding is placed on a radio/checkbox, then just pass through to checkedValue and quit
        if (element.tagName.toLowerCase() == "input" && (element.type == "checkbox" || element.type == "radio")) {
            ko.applyBindingAccessorsToNode(element, { 'checkedValue': valueAccessor });
            return;
        }

        // Always catch "change" event; possibly other events too if asked
        var eventsToCatch = ["change"];
        var requestedEventsToCatch = allBindings.get("valueUpdate");
        var propertyChangedFired = false;
        var elementValueBeforeEvent = null;

        if (requestedEventsToCatch) {
            if (typeof requestedEventsToCatch == "string") // Allow both individual event names, and arrays of event names
                requestedEventsToCatch = [requestedEventsToCatch];
            ko.utils.arrayPushAll(eventsToCatch, requestedEventsToCatch);
            eventsToCatch = ko.utils.arrayGetDistinctValues(eventsToCatch);
        }

        var valueUpdateHandler = function() {
            elementValueBeforeEvent = null;
            propertyChangedFired = false;
            var modelValue = valueAccessor();
            var elementValue = ko.selectExtensions.readValue(element);
            ko.expressionRewriting.writeValueToProperty(modelValue, allBindings, 'value', elementValue);
        }

        // Workaround for https://github.com/SteveSanderson/knockout/issues/122
        // IE doesn't fire "change" events on textboxes if the user selects a value from its autocomplete list
        var ieAutoCompleteHackNeeded = ko.utils.ieVersion && element.tagName.toLowerCase() == "input" && element.type == "text"
                                       && element.autocomplete != "off" && (!element.form || element.form.autocomplete != "off");
        if (ieAutoCompleteHackNeeded && ko.utils.arrayIndexOf(eventsToCatch, "propertychange") == -1) {
            ko.utils.registerEventHandler(element, "propertychange", function () { propertyChangedFired = true });
            ko.utils.registerEventHandler(element, "focus", function () { propertyChangedFired = false });
            ko.utils.registerEventHandler(element, "blur", function() {
                if (propertyChangedFired) {
                    valueUpdateHandler();
                }
            });
        }

        ko.utils.arrayForEach(eventsToCatch, function(eventName) {
            // The syntax "after<eventname>" means "run the handler asynchronously after the event"
            // This is useful, for example, to catch "keydown" events after the browser has updated the control
            // (otherwise, ko.selectExtensions.readValue(this) will receive the control's value *before* the key event)
            var handler = valueUpdateHandler;
            if (ko.utils.stringStartsWith(eventName, "after")) {
                handler = function() {
                    // The elementValueBeforeEvent variable is non-null *only* during the brief gap between
                    // a keyX event firing and the valueUpdateHandler running, which is scheduled to happen
                    // at the earliest asynchronous opportunity. We store this temporary information so that
                    // if, between keyX and valueUpdateHandler, the underlying model value changes separately,
                    // we can overwrite that model value change with the value the user just typed. Otherwise,
                    // techniques like rateLimit can trigger model changes at critical moments that will
                    // override the user's inputs, causing keystrokes to be lost.
                    elementValueBeforeEvent = ko.selectExtensions.readValue(element);
                    setTimeout(valueUpdateHandler, 0);
                };
                eventName = eventName.substring("after".length);
            }
            ko.utils.registerEventHandler(element, eventName, handler);
        });

        var updateFromModel = function () {
            var newValue = ko.utils.unwrapObservable(valueAccessor());
            var elementValue = ko.selectExtensions.readValue(element);

            if (elementValueBeforeEvent !== null && newValue === elementValueBeforeEvent) {
                setTimeout(updateFromModel, 0);
                return;
            }

            var valueHasChanged = (newValue !== elementValue);

            if (valueHasChanged) {
                if (ko.utils.tagNameLower(element) === "select") {
                    var allowUnset = allBindings.get('valueAllowUnset');
                    var applyValueAction = function () {
                        ko.selectExtensions.writeValue(element, newValue, allowUnset);
                    };
                    applyValueAction();

                    if (!allowUnset && newValue !== ko.selectExtensions.readValue(element)) {
                        // If you try to set a model value that can't be represented in an already-populated dropdown, reject that change,
                        // because you're not allowed to have a model value that disagrees with a visible UI selection.
                        ko.dependencyDetection.ignore(ko.utils.triggerEvent, null, [element, "change"]);
                    } else {
                        // Workaround for IE6 bug: It won't reliably apply values to SELECT nodes during the same execution thread
                        // right after you've changed the set of OPTION nodes on it. So for that node type, we'll schedule a second thread
                        // to apply the value as well.
                        setTimeout(applyValueAction, 0);
                    }
                } else {
                    ko.selectExtensions.writeValue(element, newValue);
                }
            }
        };

        ko.computed(updateFromModel, null, { disposeWhenNodeIsRemoved: element });
    },
    'update': function() {} // Keep for backwards compatibility with code that may have wrapped value binding
};
ko.expressionRewriting.twoWayBindings['value'] = true;
ko.bindingHandlers['visible'] = {
    'update': function (element, valueAccessor) {
        var value = ko.utils.unwrapObservable(valueAccessor());
        var isCurrentlyVisible = !(element.style.display == "none");
        if (value && !isCurrentlyVisible)
            element.style.display = "";
        else if ((!value) && isCurrentlyVisible)
            element.style.display = "none";
    }
};
// 'click' is just a shorthand for the usual full-length event:{click:handler}
makeEventHandlerShortcut('click');
// If you want to make a custom template engine,
//
// [1] Inherit from this class (like ko.nativeTemplateEngine does)
// [2] Override 'renderTemplateSource', supplying a function with this signature:
//
//        function (templateSource, bindingContext, options) {
//            // - templateSource.text() is the text of the template you should render
//            // - bindingContext.$data is the data you should pass into the template
//            //   - you might also want to make bindingContext.$parent, bindingContext.$parents,
//            //     and bindingContext.$root available in the template too
//            // - options gives you access to any other properties set on "data-bind: { template: options }"
//            //
//            // Return value: an array of DOM nodes
//        }
//
// [3] Override 'createJavaScriptEvaluatorBlock', supplying a function with this signature:
//
//        function (script) {
//            // Return value: Whatever syntax means "Evaluate the JavaScript statement 'script' and output the result"
//            //               For example, the jquery.tmpl template engine converts 'someScript' to '${ someScript }'
//        }
//
//     This is only necessary if you want to allow data-bind attributes to reference arbitrary template variables.
//     If you don't want to allow that, you can set the property 'allowTemplateRewriting' to false (like ko.nativeTemplateEngine does)
//     and then you don't need to override 'createJavaScriptEvaluatorBlock'.

ko.templateEngine = function () { };

ko.templateEngine.prototype['renderTemplateSource'] = function (templateSource, bindingContext, options) {
    throw new Error("Override renderTemplateSource");
};

ko.templateEngine.prototype['createJavaScriptEvaluatorBlock'] = function (script) {
    throw new Error("Override createJavaScriptEvaluatorBlock");
};

ko.templateEngine.prototype['makeTemplateSource'] = function(template, templateDocument) {
    // Named template
    if (typeof template == "string") {
        templateDocument = templateDocument || document;
        var elem = templateDocument.getElementById(template);
        if (!elem)
            throw new Error("Cannot find template with ID " + template);
        return new ko.templateSources.domElement(elem);
    } else if ((template.nodeType == 1) || (template.nodeType == 8)) {
        // Anonymous template
        return new ko.templateSources.anonymousTemplate(template);
    } else
        throw new Error("Unknown template type: " + template);
};

ko.templateEngine.prototype['renderTemplate'] = function (template, bindingContext, options, templateDocument) {
    var templateSource = this['makeTemplateSource'](template, templateDocument);
    return this['renderTemplateSource'](templateSource, bindingContext, options);
};

ko.templateEngine.prototype['isTemplateRewritten'] = function (template, templateDocument) {
    // Skip rewriting if requested
    if (this['allowTemplateRewriting'] === false)
        return true;
    return this['makeTemplateSource'](template, templateDocument)['data']("isRewritten");
};

ko.templateEngine.prototype['rewriteTemplate'] = function (template, rewriterCallback, templateDocument) {
    var templateSource = this['makeTemplateSource'](template, templateDocument);
    var rewritten = rewriterCallback(templateSource['text']());
    templateSource['text'](rewritten);
    templateSource['data']("isRewritten", true);
};

ko.exportSymbol('templateEngine', ko.templateEngine);

ko.templateRewriting = (function () {
    var memoizeDataBindingAttributeSyntaxRegex = /(<([a-z]+\d*)(?:\s+(?!data-bind\s*=\s*)[a-z0-9\-]+(?:=(?:\"[^\"]*\"|\'[^\']*\'))?)*\s+)data-bind\s*=\s*(["'])([\s\S]*?)\3/gi;
    var memoizeVirtualContainerBindingSyntaxRegex = /<!--\s*ko\b\s*([\s\S]*?)\s*-->/g;

    function validateDataBindValuesForRewriting(keyValueArray) {
        var allValidators = ko.expressionRewriting.bindingRewriteValidators;
        for (var i = 0; i < keyValueArray.length; i++) {
            var key = keyValueArray[i]['key'];
            if (allValidators.hasOwnProperty(key)) {
                var validator = allValidators[key];

                if (typeof validator === "function") {
                    var possibleErrorMessage = validator(keyValueArray[i]['value']);
                    if (possibleErrorMessage)
                        throw new Error(possibleErrorMessage);
                } else if (!validator) {
                    throw new Error("This template engine does not support the '" + key + "' binding within its templates");
                }
            }
        }
    }

    function constructMemoizedTagReplacement(dataBindAttributeValue, tagToRetain, nodeName, templateEngine) {
        var dataBindKeyValueArray = ko.expressionRewriting.parseObjectLiteral(dataBindAttributeValue);
        validateDataBindValuesForRewriting(dataBindKeyValueArray);
        var rewrittenDataBindAttributeValue = ko.expressionRewriting.preProcessBindings(dataBindKeyValueArray, {'valueAccessors':true});

        // For no obvious reason, Opera fails to evaluate rewrittenDataBindAttributeValue unless it's wrapped in an additional
        // anonymous function, even though Opera's built-in debugger can evaluate it anyway. No other browser requires this
        // extra indirection.
        var applyBindingsToNextSiblingScript =
            "ko.__tr_ambtns(function($context,$element){return(function(){return{ " + rewrittenDataBindAttributeValue + " } })()},'" + nodeName.toLowerCase() + "')";
        return templateEngine['createJavaScriptEvaluatorBlock'](applyBindingsToNextSiblingScript) + tagToRetain;
    }

    return {
        ensureTemplateIsRewritten: function (template, templateEngine, templateDocument) {
            if (!templateEngine['isTemplateRewritten'](template, templateDocument))
                templateEngine['rewriteTemplate'](template, function (htmlString) {
                    return ko.templateRewriting.memoizeBindingAttributeSyntax(htmlString, templateEngine);
                }, templateDocument);
        },

        memoizeBindingAttributeSyntax: function (htmlString, templateEngine) {
            return htmlString.replace(memoizeDataBindingAttributeSyntaxRegex, function () {
                return constructMemoizedTagReplacement(/* dataBindAttributeValue: */ arguments[4], /* tagToRetain: */ arguments[1], /* nodeName: */ arguments[2], templateEngine);
            }).replace(memoizeVirtualContainerBindingSyntaxRegex, function() {
                return constructMemoizedTagReplacement(/* dataBindAttributeValue: */ arguments[1], /* tagToRetain: */ "<!-- ko -->", /* nodeName: */ "#comment", templateEngine);
            });
        },

        applyMemoizedBindingsToNextSibling: function (bindings, nodeName) {
            return ko.memoization.memoize(function (domNode, bindingContext) {
                var nodeToBind = domNode.nextSibling;
                if (nodeToBind && nodeToBind.nodeName.toLowerCase() === nodeName) {
                    ko.applyBindingAccessorsToNode(nodeToBind, bindings, bindingContext);
                }
            });
        }
    }
})();


// Exported only because it has to be referenced by string lookup from within rewritten template
ko.exportSymbol('__tr_ambtns', ko.templateRewriting.applyMemoizedBindingsToNextSibling);
(function() {
    // A template source represents a read/write way of accessing a template. This is to eliminate the need for template loading/saving
    // logic to be duplicated in every template engine (and means they can all work with anonymous templates, etc.)
    //
    // Two are provided by default:
    //  1. ko.templateSources.domElement       - reads/writes the text content of an arbitrary DOM element
    //  2. ko.templateSources.anonymousElement - uses ko.utils.domData to read/write text *associated* with the DOM element, but
    //                                           without reading/writing the actual element text content, since it will be overwritten
    //                                           with the rendered template output.
    // You can implement your own template source if you want to fetch/store templates somewhere other than in DOM elements.
    // Template sources need to have the following functions:
    //   text() 			- returns the template text from your storage location
    //   text(value)		- writes the supplied template text to your storage location
    //   data(key)			- reads values stored using data(key, value) - see below
    //   data(key, value)	- associates "value" with this template and the key "key". Is used to store information like "isRewritten".
    //
    // Optionally, template sources can also have the following functions:
    //   nodes()            - returns a DOM element containing the nodes of this template, where available
    //   nodes(value)       - writes the given DOM element to your storage location
    // If a DOM element is available for a given template source, template engines are encouraged to use it in preference over text()
    // for improved speed. However, all templateSources must supply text() even if they don't supply nodes().
    //
    // Once you've implemented a templateSource, make your template engine use it by subclassing whatever template engine you were
    // using and overriding "makeTemplateSource" to return an instance of your custom template source.

    ko.templateSources = {};

    // ---- ko.templateSources.domElement -----

    ko.templateSources.domElement = function(element) {
        this.domElement = element;
    }

    ko.templateSources.domElement.prototype['text'] = function(/* valueToWrite */) {
        var tagNameLower = ko.utils.tagNameLower(this.domElement),
            elemContentsProperty = tagNameLower === "script" ? "text"
                                 : tagNameLower === "textarea" ? "value"
                                 : "innerHTML";

        if (arguments.length == 0) {
            return this.domElement[elemContentsProperty];
        } else {
            var valueToWrite = arguments[0];
            if (elemContentsProperty === "innerHTML")
                ko.utils.setHtml(this.domElement, valueToWrite);
            else
                this.domElement[elemContentsProperty] = valueToWrite;
        }
    };

    var dataDomDataPrefix = ko.utils.domData.nextKey() + "_";
    ko.templateSources.domElement.prototype['data'] = function(key /*, valueToWrite */) {
        if (arguments.length === 1) {
            return ko.utils.domData.get(this.domElement, dataDomDataPrefix + key);
        } else {
            ko.utils.domData.set(this.domElement, dataDomDataPrefix + key, arguments[1]);
        }
    };

    // ---- ko.templateSources.anonymousTemplate -----
    // Anonymous templates are normally saved/retrieved as DOM nodes through "nodes".
    // For compatibility, you can also read "text"; it will be serialized from the nodes on demand.
    // Writing to "text" is still supported, but then the template data will not be available as DOM nodes.

    var anonymousTemplatesDomDataKey = ko.utils.domData.nextKey();
    ko.templateSources.anonymousTemplate = function(element) {
        this.domElement = element;
    }
    ko.templateSources.anonymousTemplate.prototype = new ko.templateSources.domElement();
    ko.templateSources.anonymousTemplate.prototype.constructor = ko.templateSources.anonymousTemplate;
    ko.templateSources.anonymousTemplate.prototype['text'] = function(/* valueToWrite */) {
        if (arguments.length == 0) {
            var templateData = ko.utils.domData.get(this.domElement, anonymousTemplatesDomDataKey) || {};
            if (templateData.textData === undefined && templateData.containerData)
                templateData.textData = templateData.containerData.innerHTML;
            return templateData.textData;
        } else {
            var valueToWrite = arguments[0];
            ko.utils.domData.set(this.domElement, anonymousTemplatesDomDataKey, {textData: valueToWrite});
        }
    };
    ko.templateSources.domElement.prototype['nodes'] = function(/* valueToWrite */) {
        if (arguments.length == 0) {
            var templateData = ko.utils.domData.get(this.domElement, anonymousTemplatesDomDataKey) || {};
            return templateData.containerData;
        } else {
            var valueToWrite = arguments[0];
            ko.utils.domData.set(this.domElement, anonymousTemplatesDomDataKey, {containerData: valueToWrite});
        }
    };

    ko.exportSymbol('templateSources', ko.templateSources);
    ko.exportSymbol('templateSources.domElement', ko.templateSources.domElement);
    ko.exportSymbol('templateSources.anonymousTemplate', ko.templateSources.anonymousTemplate);
})();
(function () {
    var _templateEngine;
    ko.setTemplateEngine = function (templateEngine) {
        if ((templateEngine != undefined) && !(templateEngine instanceof ko.templateEngine))
            throw new Error("templateEngine must inherit from ko.templateEngine");
        _templateEngine = templateEngine;
    }

    function invokeForEachNodeInContinuousRange(firstNode, lastNode, action) {
        var node, nextInQueue = firstNode, firstOutOfRangeNode = ko.virtualElements.nextSibling(lastNode);
        while (nextInQueue && ((node = nextInQueue) !== firstOutOfRangeNode)) {
            nextInQueue = ko.virtualElements.nextSibling(node);
            action(node, nextInQueue);
        }
    }

    function activateBindingsOnContinuousNodeArray(continuousNodeArray, bindingContext) {
        // To be used on any nodes that have been rendered by a template and have been inserted into some parent element
        // Walks through continuousNodeArray (which *must* be continuous, i.e., an uninterrupted sequence of sibling nodes, because
        // the algorithm for walking them relies on this), and for each top-level item in the virtual-element sense,
        // (1) Does a regular "applyBindings" to associate bindingContext with this node and to activate any non-memoized bindings
        // (2) Unmemoizes any memos in the DOM subtree (e.g., to activate bindings that had been memoized during template rewriting)

        if (continuousNodeArray.length) {
            var firstNode = continuousNodeArray[0],
                lastNode = continuousNodeArray[continuousNodeArray.length - 1],
                parentNode = firstNode.parentNode,
                provider = ko.bindingProvider['instance'],
                preprocessNode = provider['preprocessNode'];

            if (preprocessNode) {
                invokeForEachNodeInContinuousRange(firstNode, lastNode, function(node, nextNodeInRange) {
                    var nodePreviousSibling = node.previousSibling;
                    var newNodes = preprocessNode.call(provider, node);
                    if (newNodes) {
                        if (node === firstNode)
                            firstNode = newNodes[0] || nextNodeInRange;
                        if (node === lastNode)
                            lastNode = newNodes[newNodes.length - 1] || nodePreviousSibling;
                    }
                });

                // Because preprocessNode can change the nodes, including the first and last nodes, update continuousNodeArray to match.
                // We need the full set, including inner nodes, because the unmemoize step might remove the first node (and so the real
                // first node needs to be in the array).
                continuousNodeArray.length = 0;
                if (!firstNode) { // preprocessNode might have removed all the nodes, in which case there's nothing left to do
                    return;
                }
                if (firstNode === lastNode) {
                    continuousNodeArray.push(firstNode);
                } else {
                    continuousNodeArray.push(firstNode, lastNode);
                    ko.utils.fixUpContinuousNodeArray(continuousNodeArray, parentNode);
                }
            }

            // Need to applyBindings *before* unmemoziation, because unmemoization might introduce extra nodes (that we don't want to re-bind)
            // whereas a regular applyBindings won't introduce new memoized nodes
            invokeForEachNodeInContinuousRange(firstNode, lastNode, function(node) {
                if (node.nodeType === 1 || node.nodeType === 8)
                    ko.applyBindings(bindingContext, node);
            });
            invokeForEachNodeInContinuousRange(firstNode, lastNode, function(node) {
                if (node.nodeType === 1 || node.nodeType === 8)
                    ko.memoization.unmemoizeDomNodeAndDescendants(node, [bindingContext]);
            });

            // Make sure any changes done by applyBindings or unmemoize are reflected in the array
            ko.utils.fixUpContinuousNodeArray(continuousNodeArray, parentNode);
        }
    }

    function getFirstNodeFromPossibleArray(nodeOrNodeArray) {
        return nodeOrNodeArray.nodeType ? nodeOrNodeArray
                                        : nodeOrNodeArray.length > 0 ? nodeOrNodeArray[0]
                                        : null;
    }

    function executeTemplate(targetNodeOrNodeArray, renderMode, template, bindingContext, options) {
        options = options || {};
        var firstTargetNode = targetNodeOrNodeArray && getFirstNodeFromPossibleArray(targetNodeOrNodeArray);
        var templateDocument = firstTargetNode && firstTargetNode.ownerDocument;
        var templateEngineToUse = (options['templateEngine'] || _templateEngine);
        ko.templateRewriting.ensureTemplateIsRewritten(template, templateEngineToUse, templateDocument);
        var renderedNodesArray = templateEngineToUse['renderTemplate'](template, bindingContext, options, templateDocument);

        // Loosely check result is an array of DOM nodes
        if ((typeof renderedNodesArray.length != "number") || (renderedNodesArray.length > 0 && typeof renderedNodesArray[0].nodeType != "number"))
            throw new Error("Template engine must return an array of DOM nodes");

        var haveAddedNodesToParent = false;
        switch (renderMode) {
            case "replaceChildren":
                ko.virtualElements.setDomNodeChildren(targetNodeOrNodeArray, renderedNodesArray);
                haveAddedNodesToParent = true;
                break;
            case "replaceNode":
                ko.utils.replaceDomNodes(targetNodeOrNodeArray, renderedNodesArray);
                haveAddedNodesToParent = true;
                break;
            case "ignoreTargetNode": break;
            default:
                throw new Error("Unknown renderMode: " + renderMode);
        }

        if (haveAddedNodesToParent) {
            activateBindingsOnContinuousNodeArray(renderedNodesArray, bindingContext);
            if (options['afterRender'])
                ko.dependencyDetection.ignore(options['afterRender'], null, [renderedNodesArray, bindingContext['$data']]);
        }

        return renderedNodesArray;
    }

    function resolveTemplateName(template, data, context) {
        // The template can be specified as:
        if (ko.isObservable(template)) {
            // 1. An observable, with string value
            return template();
        } else if (typeof template === 'function') {
            // 2. A function of (data, context) returning a string
            return template(data, context);
        } else {
            // 3. A string
            return template;
        }
    }

    ko.renderTemplate = function (template, dataOrBindingContext, options, targetNodeOrNodeArray, renderMode) {
        options = options || {};
        if ((options['templateEngine'] || _templateEngine) == undefined)
            throw new Error("Set a template engine before calling renderTemplate");
        renderMode = renderMode || "replaceChildren";

        if (targetNodeOrNodeArray) {
            var firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray);

            var whenToDispose = function () { return (!firstTargetNode) || !ko.utils.domNodeIsAttachedToDocument(firstTargetNode); }; // Passive disposal (on next evaluation)
            var activelyDisposeWhenNodeIsRemoved = (firstTargetNode && renderMode == "replaceNode") ? firstTargetNode.parentNode : firstTargetNode;

            return ko.dependentObservable( // So the DOM is automatically updated when any dependency changes
                function () {
                    // Ensure we've got a proper binding context to work with
                    var bindingContext = (dataOrBindingContext && (dataOrBindingContext instanceof ko.bindingContext))
                        ? dataOrBindingContext
                        : new ko.bindingContext(ko.utils.unwrapObservable(dataOrBindingContext));

                    var templateName = resolveTemplateName(template, bindingContext['$data'], bindingContext),
                        renderedNodesArray = executeTemplate(targetNodeOrNodeArray, renderMode, templateName, bindingContext, options);

                    if (renderMode == "replaceNode") {
                        targetNodeOrNodeArray = renderedNodesArray;
                        firstTargetNode = getFirstNodeFromPossibleArray(targetNodeOrNodeArray);
                    }
                },
                null,
                { disposeWhen: whenToDispose, disposeWhenNodeIsRemoved: activelyDisposeWhenNodeIsRemoved }
            );
        } else {
            // We don't yet have a DOM node to evaluate, so use a memo and render the template later when there is a DOM node
            return ko.memoization.memoize(function (domNode) {
                ko.renderTemplate(template, dataOrBindingContext, options, domNode, "replaceNode");
            });
        }
    };

    ko.renderTemplateForEach = function (template, arrayOrObservableArray, options, targetNode, parentBindingContext) {
        // Since setDomNodeChildrenFromArrayMapping always calls executeTemplateForArrayItem and then
        // activateBindingsCallback for added items, we can store the binding context in the former to use in the latter.
        var arrayItemContext;

        // This will be called by setDomNodeChildrenFromArrayMapping to get the nodes to add to targetNode
        var executeTemplateForArrayItem = function (arrayValue, index) {
            // Support selecting template as a function of the data being rendered
            arrayItemContext = parentBindingContext['createChildContext'](arrayValue, options['as'], function(context) {
                context['$index'] = index;
            });

            var templateName = resolveTemplateName(template, arrayValue, arrayItemContext);
            return executeTemplate(null, "ignoreTargetNode", templateName, arrayItemContext, options);
        }

        // This will be called whenever setDomNodeChildrenFromArrayMapping has added nodes to targetNode
        var activateBindingsCallback = function(arrayValue, addedNodesArray, index) {
            activateBindingsOnContinuousNodeArray(addedNodesArray, arrayItemContext);
            if (options['afterRender'])
                options['afterRender'](addedNodesArray, arrayValue);
        };

        return ko.dependentObservable(function () {
            var unwrappedArray = ko.utils.unwrapObservable(arrayOrObservableArray) || [];
            if (typeof unwrappedArray.length == "undefined") // Coerce single value into array
                unwrappedArray = [unwrappedArray];

            // Filter out any entries marked as destroyed
            var filteredArray = ko.utils.arrayFilter(unwrappedArray, function(item) {
                return options['includeDestroyed'] || item === undefined || item === null || !ko.utils.unwrapObservable(item['_destroy']);
            });

            // Call setDomNodeChildrenFromArrayMapping, ignoring any observables unwrapped within (most likely from a callback function).
            // If the array items are observables, though, they will be unwrapped in executeTemplateForArrayItem and managed within setDomNodeChildrenFromArrayMapping.
            ko.dependencyDetection.ignore(ko.utils.setDomNodeChildrenFromArrayMapping, null, [targetNode, filteredArray, executeTemplateForArrayItem, options, activateBindingsCallback]);

        }, null, { disposeWhenNodeIsRemoved: targetNode });
    };

    var templateComputedDomDataKey = ko.utils.domData.nextKey();
    function disposeOldComputedAndStoreNewOne(element, newComputed) {
        var oldComputed = ko.utils.domData.get(element, templateComputedDomDataKey);
        if (oldComputed && (typeof(oldComputed.dispose) == 'function'))
            oldComputed.dispose();
        ko.utils.domData.set(element, templateComputedDomDataKey, (newComputed && newComputed.isActive()) ? newComputed : undefined);
    }

    ko.bindingHandlers['template'] = {
        'init': function(element, valueAccessor) {
            // Support anonymous templates
            var bindingValue = ko.utils.unwrapObservable(valueAccessor());
            if (typeof bindingValue == "string" || bindingValue['name']) {
                // It's a named template - clear the element
                ko.virtualElements.emptyNode(element);
            } else {
                // It's an anonymous template - store the element contents, then clear the element
                var templateNodes = ko.virtualElements.childNodes(element),
                    container = ko.utils.moveCleanedNodesToContainerElement(templateNodes); // This also removes the nodes from their current parent
                new ko.templateSources.anonymousTemplate(element)['nodes'](container);
            }
            return { 'controlsDescendantBindings': true };
        },
        'update': function (element, valueAccessor, allBindings, viewModel, bindingContext) {
            var value = valueAccessor(),
                dataValue,
                options = ko.utils.unwrapObservable(value),
                shouldDisplay = true,
                templateComputed = null,
                templateName;

            if (typeof options == "string") {
                templateName = value;
                options = {};
            } else {
                templateName = options['name'];

                // Support "if"/"ifnot" conditions
                if ('if' in options)
                    shouldDisplay = ko.utils.unwrapObservable(options['if']);
                if (shouldDisplay && 'ifnot' in options)
                    shouldDisplay = !ko.utils.unwrapObservable(options['ifnot']);

                dataValue = ko.utils.unwrapObservable(options['data']);
            }

            if ('foreach' in options) {
                // Render once for each data point (treating data set as empty if shouldDisplay==false)
                var dataArray = (shouldDisplay && options['foreach']) || [];
                templateComputed = ko.renderTemplateForEach(templateName || element, dataArray, options, element, bindingContext);
            } else if (!shouldDisplay) {
                ko.virtualElements.emptyNode(element);
            } else {
                // Render once for this single data point (or use the viewModel if no data was provided)
                var innerBindingContext = ('data' in options) ?
                    bindingContext['createChildContext'](dataValue, options['as']) :  // Given an explitit 'data' value, we create a child binding context for it
                    bindingContext;                                                        // Given no explicit 'data' value, we retain the same binding context
                templateComputed = ko.renderTemplate(templateName || element, innerBindingContext, options, element);
            }

            // It only makes sense to have a single template computed per element (otherwise which one should have its output displayed?)
            disposeOldComputedAndStoreNewOne(element, templateComputed);
        }
    };

    // Anonymous templates can't be rewritten. Give a nice error message if you try to do it.
    ko.expressionRewriting.bindingRewriteValidators['template'] = function(bindingValue) {
        var parsedBindingValue = ko.expressionRewriting.parseObjectLiteral(bindingValue);

        if ((parsedBindingValue.length == 1) && parsedBindingValue[0]['unknown'])
            return null; // It looks like a string literal, not an object literal, so treat it as a named template (which is allowed for rewriting)

        if (ko.expressionRewriting.keyValueArrayContainsKey(parsedBindingValue, "name"))
            return null; // Named templates can be rewritten, so return "no error"
        return "This template engine does not support anonymous templates nested within its templates";
    };

    ko.virtualElements.allowedBindings['template'] = true;
})();

ko.exportSymbol('setTemplateEngine', ko.setTemplateEngine);
ko.exportSymbol('renderTemplate', ko.renderTemplate);
// Go through the items that have been added and deleted and try to find matches between them.
ko.utils.findMovesInArrayComparison = function (left, right, limitFailedCompares) {
    if (left.length && right.length) {
        var failedCompares, l, r, leftItem, rightItem;
        for (failedCompares = l = 0; (!limitFailedCompares || failedCompares < limitFailedCompares) && (leftItem = left[l]); ++l) {
            for (r = 0; rightItem = right[r]; ++r) {
                if (leftItem['value'] === rightItem['value']) {
                    leftItem['moved'] = rightItem['index'];
                    rightItem['moved'] = leftItem['index'];
                    right.splice(r, 1);         // This item is marked as moved; so remove it from right list
                    failedCompares = r = 0;     // Reset failed compares count because we're checking for consecutive failures
                    break;
                }
            }
            failedCompares += r;
        }
    }
};

ko.utils.compareArrays = (function () {
    var statusNotInOld = 'added', statusNotInNew = 'deleted';

    // Simple calculation based on Levenshtein distance.
    function compareArrays(oldArray, newArray, options) {
        // For backward compatibility, if the third arg is actually a bool, interpret
        // it as the old parameter 'dontLimitMoves'. Newer code should use { dontLimitMoves: true }.
        options = (typeof options === 'boolean') ? { 'dontLimitMoves': options } : (options || {});
        oldArray = oldArray || [];
        newArray = newArray || [];

        if (oldArray.length <= newArray.length)
            return compareSmallArrayToBigArray(oldArray, newArray, statusNotInOld, statusNotInNew, options);
        else
            return compareSmallArrayToBigArray(newArray, oldArray, statusNotInNew, statusNotInOld, options);
    }

    function compareSmallArrayToBigArray(smlArray, bigArray, statusNotInSml, statusNotInBig, options) {
        var myMin = Math.min,
            myMax = Math.max,
            editDistanceMatrix = [],
            smlIndex, smlIndexMax = smlArray.length,
            bigIndex, bigIndexMax = bigArray.length,
            compareRange = (bigIndexMax - smlIndexMax) || 1,
            maxDistance = smlIndexMax + bigIndexMax + 1,
            thisRow, lastRow,
            bigIndexMaxForRow, bigIndexMinForRow;

        for (smlIndex = 0; smlIndex <= smlIndexMax; smlIndex++) {
            lastRow = thisRow;
            editDistanceMatrix.push(thisRow = []);
            bigIndexMaxForRow = myMin(bigIndexMax, smlIndex + compareRange);
            bigIndexMinForRow = myMax(0, smlIndex - 1);
            for (bigIndex = bigIndexMinForRow; bigIndex <= bigIndexMaxForRow; bigIndex++) {
                if (!bigIndex)
                    thisRow[bigIndex] = smlIndex + 1;
                else if (!smlIndex)  // Top row - transform empty array into new array via additions
                    thisRow[bigIndex] = bigIndex + 1;
                else if (smlArray[smlIndex - 1] === bigArray[bigIndex - 1])
                    thisRow[bigIndex] = lastRow[bigIndex - 1];                  // copy value (no edit)
                else {
                    var northDistance = lastRow[bigIndex] || maxDistance;       // not in big (deletion)
                    var westDistance = thisRow[bigIndex - 1] || maxDistance;    // not in small (addition)
                    thisRow[bigIndex] = myMin(northDistance, westDistance) + 1;
                }
            }
        }

        var editScript = [], meMinusOne, notInSml = [], notInBig = [];
        for (smlIndex = smlIndexMax, bigIndex = bigIndexMax; smlIndex || bigIndex;) {
            meMinusOne = editDistanceMatrix[smlIndex][bigIndex] - 1;
            if (bigIndex && meMinusOne === editDistanceMatrix[smlIndex][bigIndex-1]) {
                notInSml.push(editScript[editScript.length] = {     // added
                    'status': statusNotInSml,
                    'value': bigArray[--bigIndex],
                    'index': bigIndex });
            } else if (smlIndex && meMinusOne === editDistanceMatrix[smlIndex - 1][bigIndex]) {
                notInBig.push(editScript[editScript.length] = {     // deleted
                    'status': statusNotInBig,
                    'value': smlArray[--smlIndex],
                    'index': smlIndex });
            } else {
                --bigIndex;
                --smlIndex;
                if (!options['sparse']) {
                    editScript.push({
                        'status': "retained",
                        'value': bigArray[bigIndex] });
                }
            }
        }

        // Set a limit on the number of consecutive non-matching comparisons; having it a multiple of
        // smlIndexMax keeps the time complexity of this algorithm linear.
        ko.utils.findMovesInArrayComparison(notInSml, notInBig, smlIndexMax * 10);

        return editScript.reverse();
    }

    return compareArrays;
})();

ko.exportSymbol('utils.compareArrays', ko.utils.compareArrays);
(function () {
    // Objective:
    // * Given an input array, a container DOM node, and a function from array elements to arrays of DOM nodes,
    //   map the array elements to arrays of DOM nodes, concatenate together all these arrays, and use them to populate the container DOM node
    // * Next time we're given the same combination of things (with the array possibly having mutated), update the container DOM node
    //   so that its children is again the concatenation of the mappings of the array elements, but don't re-map any array elements that we
    //   previously mapped - retain those nodes, and just insert/delete other ones

    // "callbackAfterAddingNodes" will be invoked after any "mapping"-generated nodes are inserted into the container node
    // You can use this, for example, to activate bindings on those nodes.

    function mapNodeAndRefreshWhenChanged(containerNode, mapping, valueToMap, callbackAfterAddingNodes, index) {
        // Map this array value inside a dependentObservable so we re-map when any dependency changes
        var mappedNodes = [];
        var dependentObservable = ko.dependentObservable(function() {
            var newMappedNodes = mapping(valueToMap, index, ko.utils.fixUpContinuousNodeArray(mappedNodes, containerNode)) || [];

            // On subsequent evaluations, just replace the previously-inserted DOM nodes
            if (mappedNodes.length > 0) {
                ko.utils.replaceDomNodes(mappedNodes, newMappedNodes);
                if (callbackAfterAddingNodes)
                    ko.dependencyDetection.ignore(callbackAfterAddingNodes, null, [valueToMap, newMappedNodes, index]);
            }

            // Replace the contents of the mappedNodes array, thereby updating the record
            // of which nodes would be deleted if valueToMap was itself later removed
            mappedNodes.length = 0;
            ko.utils.arrayPushAll(mappedNodes, newMappedNodes);
        }, null, { disposeWhenNodeIsRemoved: containerNode, disposeWhen: function() { return !ko.utils.anyDomNodeIsAttachedToDocument(mappedNodes); } });
        return { mappedNodes : mappedNodes, dependentObservable : (dependentObservable.isActive() ? dependentObservable : undefined) };
    }

    var lastMappingResultDomDataKey = ko.utils.domData.nextKey();

    ko.utils.setDomNodeChildrenFromArrayMapping = function (domNode, array, mapping, options, callbackAfterAddingNodes) {
        // Compare the provided array against the previous one
        array = array || [];
        options = options || {};
        var isFirstExecution = ko.utils.domData.get(domNode, lastMappingResultDomDataKey) === undefined;
        var lastMappingResult = ko.utils.domData.get(domNode, lastMappingResultDomDataKey) || [];
        var lastArray = ko.utils.arrayMap(lastMappingResult, function (x) { return x.arrayEntry; });
        var editScript = ko.utils.compareArrays(lastArray, array, options['dontLimitMoves']);

        // Build the new mapping result
        var newMappingResult = [];
        var lastMappingResultIndex = 0;
        var newMappingResultIndex = 0;

        var nodesToDelete = [];
        var itemsToProcess = [];
        var itemsForBeforeRemoveCallbacks = [];
        var itemsForMoveCallbacks = [];
        var itemsForAfterAddCallbacks = [];
        var mapData;

        function itemMovedOrRetained(editScriptIndex, oldPosition) {
            mapData = lastMappingResult[oldPosition];
            if (newMappingResultIndex !== oldPosition)
                itemsForMoveCallbacks[editScriptIndex] = mapData;
            // Since updating the index might change the nodes, do so before calling fixUpContinuousNodeArray
            mapData.indexObservable(newMappingResultIndex++);
            ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes, domNode);
            newMappingResult.push(mapData);
            itemsToProcess.push(mapData);
        }

        function callCallback(callback, items) {
            if (callback) {
                for (var i = 0, n = items.length; i < n; i++) {
                    if (items[i]) {
                        ko.utils.arrayForEach(items[i].mappedNodes, function(node) {
                            callback(node, i, items[i].arrayEntry);
                        });
                    }
                }
            }
        }

        for (var i = 0, editScriptItem, movedIndex; editScriptItem = editScript[i]; i++) {
            movedIndex = editScriptItem['moved'];
            switch (editScriptItem['status']) {
                case "deleted":
                    if (movedIndex === undefined) {
                        mapData = lastMappingResult[lastMappingResultIndex];

                        // Stop tracking changes to the mapping for these nodes
                        if (mapData.dependentObservable)
                            mapData.dependentObservable.dispose();

                        // Queue these nodes for later removal
                        nodesToDelete.push.apply(nodesToDelete, ko.utils.fixUpContinuousNodeArray(mapData.mappedNodes, domNode));
                        if (options['beforeRemove']) {
                            itemsForBeforeRemoveCallbacks[i] = mapData;
                            itemsToProcess.push(mapData);
                        }
                    }
                    lastMappingResultIndex++;
                    break;

                case "retained":
                    itemMovedOrRetained(i, lastMappingResultIndex++);
                    break;

                case "added":
                    if (movedIndex !== undefined) {
                        itemMovedOrRetained(i, movedIndex);
                    } else {
                        mapData = { arrayEntry: editScriptItem['value'], indexObservable: ko.observable(newMappingResultIndex++) };
                        newMappingResult.push(mapData);
                        itemsToProcess.push(mapData);
                        if (!isFirstExecution)
                            itemsForAfterAddCallbacks[i] = mapData;
                    }
                    break;
            }
        }

        // Call beforeMove first before any changes have been made to the DOM
        callCallback(options['beforeMove'], itemsForMoveCallbacks);

        // Next remove nodes for deleted items (or just clean if there's a beforeRemove callback)
        ko.utils.arrayForEach(nodesToDelete, options['beforeRemove'] ? ko.cleanNode : ko.removeNode);

        // Next add/reorder the remaining items (will include deleted items if there's a beforeRemove callback)
        for (var i = 0, nextNode = ko.virtualElements.firstChild(domNode), lastNode, node; mapData = itemsToProcess[i]; i++) {
            // Get nodes for newly added items
            if (!mapData.mappedNodes)
                ko.utils.extend(mapData, mapNodeAndRefreshWhenChanged(domNode, mapping, mapData.arrayEntry, callbackAfterAddingNodes, mapData.indexObservable));

            // Put nodes in the right place if they aren't there already
            for (var j = 0; node = mapData.mappedNodes[j]; nextNode = node.nextSibling, lastNode = node, j++) {
                if (node !== nextNode)
                    ko.virtualElements.insertAfter(domNode, node, lastNode);
            }

            // Run the callbacks for newly added nodes (for example, to apply bindings, etc.)
            if (!mapData.initialized && callbackAfterAddingNodes) {
                callbackAfterAddingNodes(mapData.arrayEntry, mapData.mappedNodes, mapData.indexObservable);
                mapData.initialized = true;
            }
        }

        // If there's a beforeRemove callback, call it after reordering.
        // Note that we assume that the beforeRemove callback will usually be used to remove the nodes using
        // some sort of animation, which is why we first reorder the nodes that will be removed. If the
        // callback instead removes the nodes right away, it would be more efficient to skip reordering them.
        // Perhaps we'll make that change in the future if this scenario becomes more common.
        callCallback(options['beforeRemove'], itemsForBeforeRemoveCallbacks);

        // Finally call afterMove and afterAdd callbacks
        callCallback(options['afterMove'], itemsForMoveCallbacks);
        callCallback(options['afterAdd'], itemsForAfterAddCallbacks);

        // Store a copy of the array items we just considered so we can difference it next time
        ko.utils.domData.set(domNode, lastMappingResultDomDataKey, newMappingResult);
    }
})();

ko.exportSymbol('utils.setDomNodeChildrenFromArrayMapping', ko.utils.setDomNodeChildrenFromArrayMapping);
ko.nativeTemplateEngine = function () {
    this['allowTemplateRewriting'] = false;
}

ko.nativeTemplateEngine.prototype = new ko.templateEngine();
ko.nativeTemplateEngine.prototype.constructor = ko.nativeTemplateEngine;
ko.nativeTemplateEngine.prototype['renderTemplateSource'] = function (templateSource, bindingContext, options) {
    var useNodesIfAvailable = !(ko.utils.ieVersion < 9), // IE<9 cloneNode doesn't work properly
        templateNodesFunc = useNodesIfAvailable ? templateSource['nodes'] : null,
        templateNodes = templateNodesFunc ? templateSource['nodes']() : null;

    if (templateNodes) {
        return ko.utils.makeArray(templateNodes.cloneNode(true).childNodes);
    } else {
        var templateText = templateSource['text']();
        return ko.utils.parseHtmlFragment(templateText);
    }
};

ko.nativeTemplateEngine.instance = new ko.nativeTemplateEngine();
ko.setTemplateEngine(ko.nativeTemplateEngine.instance);

ko.exportSymbol('nativeTemplateEngine', ko.nativeTemplateEngine);
(function() {
    ko.jqueryTmplTemplateEngine = function () {
        // Detect which version of jquery-tmpl you're using. Unfortunately jquery-tmpl
        // doesn't expose a version number, so we have to infer it.
        // Note that as of Knockout 1.3, we only support jQuery.tmpl 1.0.0pre and later,
        // which KO internally refers to as version "2", so older versions are no longer detected.
        var jQueryTmplVersion = this.jQueryTmplVersion = (function() {
            if (!jQueryInstance || !(jQueryInstance['tmpl']))
                return 0;
            // Since it exposes no official version number, we use our own numbering system. To be updated as jquery-tmpl evolves.
            try {
                if (jQueryInstance['tmpl']['tag']['tmpl']['open'].toString().indexOf('__') >= 0) {
                    // Since 1.0.0pre, custom tags should append markup to an array called "__"
                    return 2; // Final version of jquery.tmpl
                }
            } catch(ex) { /* Apparently not the version we were looking for */ }

            return 1; // Any older version that we don't support
        })();

        function ensureHasReferencedJQueryTemplates() {
            if (jQueryTmplVersion < 2)
                throw new Error("Your version of jQuery.tmpl is too old. Please upgrade to jQuery.tmpl 1.0.0pre or later.");
        }

        function executeTemplate(compiledTemplate, data, jQueryTemplateOptions) {
            return jQueryInstance['tmpl'](compiledTemplate, data, jQueryTemplateOptions);
        }

        this['renderTemplateSource'] = function(templateSource, bindingContext, options) {
            options = options || {};
            ensureHasReferencedJQueryTemplates();

            // Ensure we have stored a precompiled version of this template (don't want to reparse on every render)
            var precompiled = templateSource['data']('precompiled');
            if (!precompiled) {
                var templateText = templateSource['text']() || "";
                // Wrap in "with($whatever.koBindingContext) { ... }"
                templateText = "{{ko_with $item.koBindingContext}}" + templateText + "{{/ko_with}}";

                precompiled = jQueryInstance['template'](null, templateText);
                templateSource['data']('precompiled', precompiled);
            }

            var data = [bindingContext['$data']]; // Prewrap the data in an array to stop jquery.tmpl from trying to unwrap any arrays
            var jQueryTemplateOptions = jQueryInstance['extend']({ 'koBindingContext': bindingContext }, options['templateOptions']);

            var resultNodes = executeTemplate(precompiled, data, jQueryTemplateOptions);
            resultNodes['appendTo'](document.createElement("div")); // Using "appendTo" forces jQuery/jQuery.tmpl to perform necessary cleanup work

            jQueryInstance['fragments'] = {}; // Clear jQuery's fragment cache to avoid a memory leak after a large number of template renders
            return resultNodes;
        };

        this['createJavaScriptEvaluatorBlock'] = function(script) {
            return "{{ko_code ((function() { return " + script + " })()) }}";
        };

        this['addTemplate'] = function(templateName, templateMarkup) {
            document.write("<script type='text/html' id='" + templateName + "'>" + templateMarkup + "<" + "/script>");
        };

        if (jQueryTmplVersion > 0) {
            jQueryInstance['tmpl']['tag']['ko_code'] = {
                open: "__.push($1 || '');"
            };
            jQueryInstance['tmpl']['tag']['ko_with'] = {
                open: "with($1) {",
                close: "} "
            };
        }
    };

    ko.jqueryTmplTemplateEngine.prototype = new ko.templateEngine();
    ko.jqueryTmplTemplateEngine.prototype.constructor = ko.jqueryTmplTemplateEngine;

    // Use this one by default *only if jquery.tmpl is referenced*
    var jqueryTmplTemplateEngineInstance = new ko.jqueryTmplTemplateEngine();
    if (jqueryTmplTemplateEngineInstance.jQueryTmplVersion > 0)
        ko.setTemplateEngine(jqueryTmplTemplateEngineInstance);

    ko.exportSymbol('jqueryTmplTemplateEngine', ko.jqueryTmplTemplateEngine);
})();
}));
}());
})();

/// Knockout Mapping plugin v2.4.1
/// (c) 2013 Steven Sanderson, Roy Jacobs - http://knockoutjs.com/
/// License: MIT (http://www.opensource.org/licenses/mit-license.php)
(function (factory) {
	// Module systems magic dance.

	if (typeof require === "function" && typeof exports === "object" && typeof module === "object") {
		// CommonJS or Node: hard-coded dependency on "knockout"
		factory(require("knockout"), exports);
	} else if (typeof define === "function" && define["amd"]) {
		// AMD anonymous module with hard-coded dependency on "knockout"
		define('knockout.mapping',["knockout", "exports"], factory);
	} else {
		// <script> tag: use the global `ko` object, attaching a `mapping` property
		factory(ko, ko.mapping = {});
	}
}(function (ko, exports) {
	var DEBUG=true;
	var mappingProperty = "__ko_mapping__";
	var realKoDependentObservable = ko.dependentObservable;
	var mappingNesting = 0;
	var dependentObservables;
	var visitedObjects;
	var recognizedRootProperties = ["create", "update", "key", "arrayChanged"];
	var emptyReturn = {};

	var _defaultOptions = {
		include: ["_destroy"],
		ignore: [],
		copy: [],
		observe: []
	};
	var defaultOptions = _defaultOptions;

	// Author: KennyTM @ StackOverflow
	function unionArrays (x, y) {
		var obj = {};
		for (var i = x.length - 1; i >= 0; -- i) obj[x[i]] = x[i];
		for (var i = y.length - 1; i >= 0; -- i) obj[y[i]] = y[i];
		var res = [];

		for (var k in obj) {
			res.push(obj[k]);
		};

		return res;
	}

	function extendObject(destination, source) {
		var destType;

		for (var key in source) {
			if (source.hasOwnProperty(key) && source[key]) {
				destType = exports.getType(destination[key]);
				if (key && destination[key] && destType !== "array" && destType !== "string") {
					extendObject(destination[key], source[key]);
				} else {
					var bothArrays = exports.getType(destination[key]) === "array" && exports.getType(source[key]) === "array";
					if (bothArrays) {
						destination[key] = unionArrays(destination[key], source[key]);
					} else {
						destination[key] = source[key];
					}
				}
			}
		}
	}

	function merge(obj1, obj2) {
		var merged = {};
		extendObject(merged, obj1);
		extendObject(merged, obj2);

		return merged;
	}

	exports.isMapped = function (viewModel) {
		var unwrapped = ko.utils.unwrapObservable(viewModel);
		return unwrapped && unwrapped[mappingProperty];
	}

	exports.fromJS = function (jsObject /*, inputOptions, target*/ ) {
		if (arguments.length == 0) throw new Error("When calling ko.fromJS, pass the object you want to convert.");

		try {
			if (!mappingNesting++) {
				dependentObservables = [];
				visitedObjects = new objectLookup();
			}

			var options;
			var target;

			if (arguments.length == 2) {
				if (arguments[1][mappingProperty]) {
					target = arguments[1];
				} else {
					options = arguments[1];
				}
			}
			if (arguments.length == 3) {
				options = arguments[1];
				target = arguments[2];
			}

			if (target) {
				options = merge(options, target[mappingProperty]);
			}
			options = fillOptions(options);

			var result = updateViewModel(target, jsObject, options);
			if (target) {
				result = target;
			}

			// Evaluate any dependent observables that were proxied.
			// Do this after the model's observables have been created
			if (!--mappingNesting) {
				while (dependentObservables.length) {
					var DO = dependentObservables.pop();
					if (DO) {
						DO();
						
						// Move this magic property to the underlying dependent observable
						DO.__DO["throttleEvaluation"] = DO["throttleEvaluation"];
					}
				}
			}

			// Save any new mapping options in the view model, so that updateFromJS can use them later.
			result[mappingProperty] = merge(result[mappingProperty], options);

			return result;
		} catch(e) {
			mappingNesting = 0;
			throw e;
		}
	};

	exports.fromJSON = function (jsonString /*, options, target*/ ) {
		var parsed = ko.utils.parseJson(jsonString);
		arguments[0] = parsed;
		return exports.fromJS.apply(this, arguments);
	};

	exports.updateFromJS = function (viewModel) {
		throw new Error("ko.mapping.updateFromJS, use ko.mapping.fromJS instead. Please note that the order of parameters is different!");
	};

	exports.updateFromJSON = function (viewModel) {
		throw new Error("ko.mapping.updateFromJSON, use ko.mapping.fromJSON instead. Please note that the order of parameters is different!");
	};

	exports.toJS = function (rootObject, options) {
		if (!defaultOptions) exports.resetDefaultOptions();

		if (arguments.length == 0) throw new Error("When calling ko.mapping.toJS, pass the object you want to convert.");
		if (exports.getType(defaultOptions.ignore) !== "array") throw new Error("ko.mapping.defaultOptions().ignore should be an array.");
		if (exports.getType(defaultOptions.include) !== "array") throw new Error("ko.mapping.defaultOptions().include should be an array.");
		if (exports.getType(defaultOptions.copy) !== "array") throw new Error("ko.mapping.defaultOptions().copy should be an array.");

		// Merge in the options used in fromJS
		options = fillOptions(options, rootObject[mappingProperty]);

		// We just unwrap everything at every level in the object graph
		return exports.visitModel(rootObject, function (x) {
			return ko.utils.unwrapObservable(x)
		}, options);
	};

	exports.toJSON = function (rootObject, options) {
		var plainJavaScriptObject = exports.toJS(rootObject, options);
		return ko.utils.stringifyJson(plainJavaScriptObject);
	};

	exports.defaultOptions = function () {
		if (arguments.length > 0) {
			defaultOptions = arguments[0];
		} else {
			return defaultOptions;
		}
	};

	exports.resetDefaultOptions = function () {
		defaultOptions = {
			include: _defaultOptions.include.slice(0),
			ignore: _defaultOptions.ignore.slice(0),
			copy: _defaultOptions.copy.slice(0)
		};
	};

	exports.getType = function(x) {
		if ((x) && (typeof (x) === "object")) {
			if (x.constructor === Date) return "date";
			if (x.constructor === Array) return "array";
		}
		return typeof x;
	}

	function fillOptions(rawOptions, otherOptions) {
		var options = merge({}, rawOptions);

		// Move recognized root-level properties into a root namespace
		for (var i = recognizedRootProperties.length - 1; i >= 0; i--) {
			var property = recognizedRootProperties[i];
			
			// Carry on, unless this property is present
			if (!options[property]) continue;
			
			// Move the property into the root namespace
			if (!(options[""] instanceof Object)) options[""] = {};
			options[""][property] = options[property];
			delete options[property];
		}

		if (otherOptions) {
			options.ignore = mergeArrays(otherOptions.ignore, options.ignore);
			options.include = mergeArrays(otherOptions.include, options.include);
			options.copy = mergeArrays(otherOptions.copy, options.copy);
			options.observe = mergeArrays(otherOptions.observe, options.observe);
		}
		options.ignore = mergeArrays(options.ignore, defaultOptions.ignore);
		options.include = mergeArrays(options.include, defaultOptions.include);
		options.copy = mergeArrays(options.copy, defaultOptions.copy);
		options.observe = mergeArrays(options.observe, defaultOptions.observe);

		options.mappedProperties = options.mappedProperties || {};
		options.copiedProperties = options.copiedProperties || {};
		return options;
	}

	function mergeArrays(a, b) {
		if (exports.getType(a) !== "array") {
			if (exports.getType(a) === "undefined") a = [];
			else a = [a];
		}
		if (exports.getType(b) !== "array") {
			if (exports.getType(b) === "undefined") b = [];
			else b = [b];
		}

		return ko.utils.arrayGetDistinctValues(a.concat(b));
	}

	// When using a 'create' callback, we proxy the dependent observable so that it doesn't immediately evaluate on creation.
	// The reason is that the dependent observables in the user-specified callback may contain references to properties that have not been mapped yet.
	function withProxyDependentObservable(dependentObservables, callback) {
		var localDO = ko.dependentObservable;
		ko.dependentObservable = function (read, owner, options) {
			options = options || {};

			if (read && typeof read == "object") { // mirrors condition in knockout implementation of DO's
				options = read;
			}

			var realDeferEvaluation = options.deferEvaluation;

			var isRemoved = false;

			// We wrap the original dependent observable so that we can remove it from the 'dependentObservables' list we need to evaluate after mapping has
			// completed if the user already evaluated the DO themselves in the meantime.
			var wrap = function (DO) {
				// Temporarily revert ko.dependentObservable, since it is used in ko.isWriteableObservable
				var tmp = ko.dependentObservable;
				ko.dependentObservable = realKoDependentObservable;
				var isWriteable = ko.isWriteableObservable(DO);
				ko.dependentObservable = tmp;

				var wrapped = realKoDependentObservable({
					read: function () {
						if (!isRemoved) {
							ko.utils.arrayRemoveItem(dependentObservables, DO);
							isRemoved = true;
						}
						return DO.apply(DO, arguments);
					},
					write: isWriteable && function (val) {
						return DO(val);
					},
					deferEvaluation: true
				});
				if (DEBUG) wrapped._wrapper = true;
				wrapped.__DO = DO;
				return wrapped;
			};
			
			options.deferEvaluation = true; // will either set for just options, or both read/options.
			var realDependentObservable = new realKoDependentObservable(read, owner, options);

			if (!realDeferEvaluation) {
				realDependentObservable = wrap(realDependentObservable);
				dependentObservables.push(realDependentObservable);
			}

			return realDependentObservable;
		}
		ko.dependentObservable.fn = realKoDependentObservable.fn;
		ko.computed = ko.dependentObservable;
		var result = callback();
		ko.dependentObservable = localDO;
		ko.computed = ko.dependentObservable;
		return result;
	}

	function updateViewModel(mappedRootObject, rootObject, options, parentName, parent, parentPropertyName, mappedParent) {
		var isArray = exports.getType(ko.utils.unwrapObservable(rootObject)) === "array";

		parentPropertyName = parentPropertyName || "";

		// If this object was already mapped previously, take the options from there and merge them with our existing ones.
		if (exports.isMapped(mappedRootObject)) {
			var previousMapping = ko.utils.unwrapObservable(mappedRootObject)[mappingProperty];
			options = merge(previousMapping, options);
		}

		var callbackParams = {
			data: rootObject,
			parent: mappedParent || parent
		};

		var hasCreateCallback = function () {
			return options[parentName] && options[parentName].create instanceof Function;
		};

		var createCallback = function (data) {
			return withProxyDependentObservable(dependentObservables, function () {
				
				if (ko.utils.unwrapObservable(parent) instanceof Array) {
					return options[parentName].create({
						data: data || callbackParams.data,
						parent: callbackParams.parent,
						skip: emptyReturn
					});
				} else {
					return options[parentName].create({
						data: data || callbackParams.data,
						parent: callbackParams.parent
					});
				}				
			});
		};

		var hasUpdateCallback = function () {
			return options[parentName] && options[parentName].update instanceof Function;
		};

		var updateCallback = function (obj, data) {
			var params = {
				data: data || callbackParams.data,
				parent: callbackParams.parent,
				target: ko.utils.unwrapObservable(obj)
			};

			if (ko.isWriteableObservable(obj)) {
				params.observable = obj;
			}

			return options[parentName].update(params);
		}

		var alreadyMapped = visitedObjects.get(rootObject);
		if (alreadyMapped) {
			return alreadyMapped;
		}

		parentName = parentName || "";

		if (!isArray) {
			// For atomic types, do a direct update on the observable
			if (!canHaveProperties(rootObject)) {
				switch (exports.getType(rootObject)) {
				case "function":
					if (hasUpdateCallback()) {
						if (ko.isWriteableObservable(rootObject)) {
							rootObject(updateCallback(rootObject));
							mappedRootObject = rootObject;
						} else {
							mappedRootObject = updateCallback(rootObject);
						}
					} else {
						mappedRootObject = rootObject;
					}
					break;
				default:
					if (ko.isWriteableObservable(mappedRootObject)) {
						if (hasUpdateCallback()) {
							var valueToWrite = updateCallback(mappedRootObject);
							mappedRootObject(valueToWrite);
							return valueToWrite;
						} else {
							var valueToWrite = ko.utils.unwrapObservable(rootObject);
							mappedRootObject(valueToWrite);
							return valueToWrite;
						}
					} else {
						var hasCreateOrUpdateCallback = hasCreateCallback() || hasUpdateCallback();
						
						if (hasCreateCallback()) {
							mappedRootObject = createCallback();
						} else {
							mappedRootObject = ko.observable(ko.utils.unwrapObservable(rootObject));
						}

						if (hasUpdateCallback()) {
							mappedRootObject(updateCallback(mappedRootObject));
						}
						
						if (hasCreateOrUpdateCallback) return mappedRootObject;
					}
				}

			} else {
				mappedRootObject = ko.utils.unwrapObservable(mappedRootObject);
				if (!mappedRootObject) {
					if (hasCreateCallback()) {
						var result = createCallback();

						if (hasUpdateCallback()) {
							result = updateCallback(result);
						}

						return result;
					} else {
						if (hasUpdateCallback()) {
							return updateCallback(result);
						}

						mappedRootObject = {};
					}
				}

				if (hasUpdateCallback()) {
					mappedRootObject = updateCallback(mappedRootObject);
				}

				visitedObjects.save(rootObject, mappedRootObject);
				if (hasUpdateCallback()) return mappedRootObject;

				// For non-atomic types, visit all properties and update recursively
				visitPropertiesOrArrayEntries(rootObject, function (indexer) {
					var fullPropertyName = parentPropertyName.length ? parentPropertyName + "." + indexer : indexer;

					if (ko.utils.arrayIndexOf(options.ignore, fullPropertyName) != -1) {
						return;
					}

					if (ko.utils.arrayIndexOf(options.copy, fullPropertyName) != -1) {
						mappedRootObject[indexer] = rootObject[indexer];
						return;
					}

					if(typeof rootObject[indexer] != "object" && typeof rootObject[indexer] != "array" && options.observe.length > 0 && ko.utils.arrayIndexOf(options.observe, fullPropertyName) == -1)
					{
						mappedRootObject[indexer] = rootObject[indexer];
						options.copiedProperties[fullPropertyName] = true;
						return;
					}
					
					// In case we are adding an already mapped property, fill it with the previously mapped property value to prevent recursion.
					// If this is a property that was generated by fromJS, we should use the options specified there
					var prevMappedProperty = visitedObjects.get(rootObject[indexer]);
					var retval = updateViewModel(mappedRootObject[indexer], rootObject[indexer], options, indexer, mappedRootObject, fullPropertyName, mappedRootObject);
					var value = prevMappedProperty || retval;
					
					if(options.observe.length > 0 && ko.utils.arrayIndexOf(options.observe, fullPropertyName) == -1)
					{
						mappedRootObject[indexer] = value();
						options.copiedProperties[fullPropertyName] = true;
						return;
					}
					
					if (ko.isWriteableObservable(mappedRootObject[indexer])) {
						value = ko.utils.unwrapObservable(value);
						if (mappedRootObject[indexer]() !== value) {
							mappedRootObject[indexer](value);
						}
					} else {
						value = mappedRootObject[indexer] === undefined ? value : ko.utils.unwrapObservable(value);
						mappedRootObject[indexer] = value;
					}

					options.mappedProperties[fullPropertyName] = true;
				});
			}
		} else { //mappedRootObject is an array
			var changes = [];

			var hasKeyCallback = false;
			var keyCallback = function (x) {
				return x;
			}
			if (options[parentName] && options[parentName].key) {
				keyCallback = options[parentName].key;
				hasKeyCallback = true;
			}

			if (!ko.isObservable(mappedRootObject)) {
				// When creating the new observable array, also add a bunch of utility functions that take the 'key' of the array items into account.
				mappedRootObject = ko.observableArray([]);

				mappedRootObject.mappedRemove = function (valueOrPredicate) {
					var predicate = typeof valueOrPredicate == "function" ? valueOrPredicate : function (value) {
							return value === keyCallback(valueOrPredicate);
						};
					return mappedRootObject.remove(function (item) {
						return predicate(keyCallback(item));
					});
				}

				mappedRootObject.mappedRemoveAll = function (arrayOfValues) {
					var arrayOfKeys = filterArrayByKey(arrayOfValues, keyCallback);
					return mappedRootObject.remove(function (item) {
						return ko.utils.arrayIndexOf(arrayOfKeys, keyCallback(item)) != -1;
					});
				}

				mappedRootObject.mappedDestroy = function (valueOrPredicate) {
					var predicate = typeof valueOrPredicate == "function" ? valueOrPredicate : function (value) {
							return value === keyCallback(valueOrPredicate);
						};
					return mappedRootObject.destroy(function (item) {
						return predicate(keyCallback(item));
					});
				}

				mappedRootObject.mappedDestroyAll = function (arrayOfValues) {
					var arrayOfKeys = filterArrayByKey(arrayOfValues, keyCallback);
					return mappedRootObject.destroy(function (item) {
						return ko.utils.arrayIndexOf(arrayOfKeys, keyCallback(item)) != -1;
					});
				}

				mappedRootObject.mappedIndexOf = function (item) {
					var keys = filterArrayByKey(mappedRootObject(), keyCallback);
					var key = keyCallback(item);
					return ko.utils.arrayIndexOf(keys, key);
				}

				mappedRootObject.mappedGet = function (item) {
					return mappedRootObject()[mappedRootObject.mappedIndexOf(item)];
				}

				mappedRootObject.mappedCreate = function (value) {
					if (mappedRootObject.mappedIndexOf(value) !== -1) {
						throw new Error("There already is an object with the key that you specified.");
					}

					var item = hasCreateCallback() ? createCallback(value) : value;
					if (hasUpdateCallback()) {
						var newValue = updateCallback(item, value);
						if (ko.isWriteableObservable(item)) {
							item(newValue);
						} else {
							item = newValue;
						}
					}
					mappedRootObject.push(item);
					return item;
				}
			}

			var currentArrayKeys = filterArrayByKey(ko.utils.unwrapObservable(mappedRootObject), keyCallback).sort();
			var newArrayKeys = filterArrayByKey(rootObject, keyCallback);
			if (hasKeyCallback) newArrayKeys.sort();
			var editScript = ko.utils.compareArrays(currentArrayKeys, newArrayKeys);

			var ignoreIndexOf = {};
			
			var i, j;

			var unwrappedRootObject = ko.utils.unwrapObservable(rootObject);
			var itemsByKey = {};
			var optimizedKeys = true;
			for (i = 0, j = unwrappedRootObject.length; i < j; i++) {
				var key = keyCallback(unwrappedRootObject[i]);
				if (key === undefined || key instanceof Object) {
					optimizedKeys = false;
					break;
				}
				itemsByKey[key] = unwrappedRootObject[i];
			}

			var newContents = [];
			var passedOver = 0;
			for (i = 0, j = editScript.length; i < j; i++) {
				var key = editScript[i];
				var mappedItem;
				var fullPropertyName = parentPropertyName + "[" + i + "]";
				switch (key.status) {
				case "added":
					var item = optimizedKeys ? itemsByKey[key.value] : getItemByKey(ko.utils.unwrapObservable(rootObject), key.value, keyCallback);
					mappedItem = updateViewModel(undefined, item, options, parentName, mappedRootObject, fullPropertyName, parent);
					if(!hasCreateCallback()) {
						mappedItem = ko.utils.unwrapObservable(mappedItem);
					}

					var index = ignorableIndexOf(ko.utils.unwrapObservable(rootObject), item, ignoreIndexOf);
					
					if (mappedItem === emptyReturn) {
						passedOver++;
					} else {
						newContents[index - passedOver] = mappedItem;
					}
						
					ignoreIndexOf[index] = true;
					break;
				case "retained":
					var item = optimizedKeys ? itemsByKey[key.value] : getItemByKey(ko.utils.unwrapObservable(rootObject), key.value, keyCallback);
					mappedItem = getItemByKey(mappedRootObject, key.value, keyCallback);
					updateViewModel(mappedItem, item, options, parentName, mappedRootObject, fullPropertyName, parent);

					var index = ignorableIndexOf(ko.utils.unwrapObservable(rootObject), item, ignoreIndexOf);
					newContents[index] = mappedItem;
					ignoreIndexOf[index] = true;
					break;
				case "deleted":
					mappedItem = getItemByKey(mappedRootObject, key.value, keyCallback);
					break;
				}

				changes.push({
					event: key.status,
					item: mappedItem
				});
			}

			mappedRootObject(newContents);

			if (options[parentName] && options[parentName].arrayChanged) {
				ko.utils.arrayForEach(changes, function (change) {
					options[parentName].arrayChanged(change.event, change.item);
				});
			}
		}

		return mappedRootObject;
	}

	function ignorableIndexOf(array, item, ignoreIndices) {
		for (var i = 0, j = array.length; i < j; i++) {
			if (ignoreIndices[i] === true) continue;
			if (array[i] === item) return i;
		}
		return null;
	}

	function mapKey(item, callback) {
		var mappedItem;
		if (callback) mappedItem = callback(item);
		if (exports.getType(mappedItem) === "undefined") mappedItem = item;

		return ko.utils.unwrapObservable(mappedItem);
	}

	function getItemByKey(array, key, callback) {
		array = ko.utils.unwrapObservable(array);
		for (var i = 0, j = array.length; i < j; i++) {
			var item = array[i];
			if (mapKey(item, callback) === key) return item;
		}

		throw new Error("When calling ko.update*, the key '" + key + "' was not found!");
	}

	function filterArrayByKey(array, callback) {
		return ko.utils.arrayMap(ko.utils.unwrapObservable(array), function (item) {
			if (callback) {
				return mapKey(item, callback);
			} else {
				return item;
			}
		});
	}

	function visitPropertiesOrArrayEntries(rootObject, visitorCallback) {
		if (exports.getType(rootObject) === "array") {
			for (var i = 0; i < rootObject.length; i++)
			visitorCallback(i);
		} else {
			for (var propertyName in rootObject)
			visitorCallback(propertyName);
		}
	};

	function canHaveProperties(object) {
		var type = exports.getType(object);
		return ((type === "object") || (type === "array")) && (object !== null);
	}

	// Based on the parentName, this creates a fully classified name of a property

	function getPropertyName(parentName, parent, indexer) {
		var propertyName = parentName || "";
		if (exports.getType(parent) === "array") {
			if (parentName) {
				propertyName += "[" + indexer + "]";
			}
		} else {
			if (parentName) {
				propertyName += ".";
			}
			propertyName += indexer;
		}
		return propertyName;
	}

	exports.visitModel = function (rootObject, callback, options) {
		options = options || {};
		options.visitedObjects = options.visitedObjects || new objectLookup();

		var mappedRootObject;
		var unwrappedRootObject = ko.utils.unwrapObservable(rootObject);

		if (!canHaveProperties(unwrappedRootObject)) {
			return callback(rootObject, options.parentName);
		} else {
			options = fillOptions(options, unwrappedRootObject[mappingProperty]);

			// Only do a callback, but ignore the results
			callback(rootObject, options.parentName);
			mappedRootObject = exports.getType(unwrappedRootObject) === "array" ? [] : {};
		}

		options.visitedObjects.save(rootObject, mappedRootObject);

		var parentName = options.parentName;
		visitPropertiesOrArrayEntries(unwrappedRootObject, function (indexer) {
			if (options.ignore && ko.utils.arrayIndexOf(options.ignore, indexer) != -1) return;

			var propertyValue = unwrappedRootObject[indexer];
			options.parentName = getPropertyName(parentName, unwrappedRootObject, indexer);

			// If we don't want to explicitly copy the unmapped property...
			if (ko.utils.arrayIndexOf(options.copy, indexer) === -1) {
				// ...find out if it's a property we want to explicitly include
				if (ko.utils.arrayIndexOf(options.include, indexer) === -1) {
					// The mapped properties object contains all the properties that were part of the original object.
					// If a property does not exist, and it is not because it is part of an array (e.g. "myProp[3]"), then it should not be unmapped.
				    if (unwrappedRootObject[mappingProperty]
				        && unwrappedRootObject[mappingProperty].mappedProperties && !unwrappedRootObject[mappingProperty].mappedProperties[indexer]
				        && unwrappedRootObject[mappingProperty].copiedProperties && !unwrappedRootObject[mappingProperty].copiedProperties[indexer]
				        && !(exports.getType(unwrappedRootObject) === "array")) {
						return;
					}
				}
			}

			var outputProperty;
			switch (exports.getType(ko.utils.unwrapObservable(propertyValue))) {
			case "object":
			case "array":
			case "undefined":
				var previouslyMappedValue = options.visitedObjects.get(propertyValue);
				mappedRootObject[indexer] = (exports.getType(previouslyMappedValue) !== "undefined") ? previouslyMappedValue : exports.visitModel(propertyValue, callback, options);
				break;
			default:
				mappedRootObject[indexer] = callback(propertyValue, options.parentName);
			}
		});

		return mappedRootObject;
	}

	function simpleObjectLookup() {
		var keys = [];
		var values = [];
		this.save = function (key, value) {
			var existingIndex = ko.utils.arrayIndexOf(keys, key);
			if (existingIndex >= 0) values[existingIndex] = value;
			else {
				keys.push(key);
				values.push(value);
			}
		};
		this.get = function (key) {
			var existingIndex = ko.utils.arrayIndexOf(keys, key);
			var value = (existingIndex >= 0) ? values[existingIndex] : undefined;
			return value;
		};
	};
	
	function objectLookup() {
		var buckets = {};
		
		var findBucket = function(key) {
			var bucketKey;
			try {
				bucketKey = key;//JSON.stringify(key);
			}
			catch (e) {
				bucketKey = "$$$";
			}

			var bucket = buckets[bucketKey];
			if (bucket === undefined) {
				bucket = new simpleObjectLookup();
				buckets[bucketKey] = bucket;
			}
			return bucket;
		};
		
		this.save = function (key, value) {
			findBucket(key).save(key, value);
		};
		this.get = function (key) {
			return findBucket(key).get(key);
		};
	};
}));

/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(a,b){"object"==typeof module&&"object"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error("jQuery requires a window with a document");return b(a)}:b(a)}("undefined"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m="2.1.3",n=function(a,b){return new n.fn.init(a,b)},o=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,p=/^-ms-/,q=/-([\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:"",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for("boolean"==typeof g&&(j=g,g=arguments[h]||{},h++),"object"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:"jQuery"+(m+Math.random()).replace(/\D/g,""),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return"function"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return"object"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,"isPrototypeOf")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+"":"object"==typeof a||"function"==typeof a?h[i.call(a)]||"object":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf("use strict")?(b=l.createElement("script"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,"ms-").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?"":(a+"").replace(o,"")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,"string"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return"string"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(a,b){h["[object "+b+"]"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return"function"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:"array"===c||0===b||"number"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u="sizzle"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",L="[\\x20\\t\\r\\n\\f]",M="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",N=M.replace("w","w#"),O="\\["+L+"*("+M+")(?:"+L+"*([*^$|!~]?=)"+L+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+N+"))|)"+L+"*\\]",P=":("+M+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+O+")*)|.*)\\)|)",Q=new RegExp(L+"+","g"),R=new RegExp("^"+L+"+|((?:^|[^\\\\])(?:\\\\.)*)"+L+"+$","g"),S=new RegExp("^"+L+"*,"+L+"*"),T=new RegExp("^"+L+"*([>+~]|"+L+")"+L+"*"),U=new RegExp("="+L+"*([^\\]'\"]*?)"+L+"*\\]","g"),V=new RegExp(P),W=new RegExp("^"+N+"$"),X={ID:new RegExp("^#("+M+")"),CLASS:new RegExp("^\\.("+M+")"),TAG:new RegExp("^("+M.replace("w","w*")+")"),ATTR:new RegExp("^"+O),PSEUDO:new RegExp("^"+P),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+L+"*(even|odd|(([+-]|)(\\d*)n|)"+L+"*(?:([+-]|)"+L+"*(\\d+)|))"+L+"*\\)|)","i"),bool:new RegExp("^(?:"+K+")$","i"),needsContext:new RegExp("^"+L+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+L+"*((?:-\\d)?\\d*)"+L+"*\\)|)(?=[^-]|$)","i")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\d$/i,$=/^[^{]+\{\s*\[native \w/,_=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ab=/[+~]/,bb=/'|\\/g,cb=new RegExp("\\\\([\\da-f]{1,6}"+L+"?|("+L+")|.)","ig"),db=function(a,b,c){var d="0x"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},eb=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function gb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,"string"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&"object"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute("id"))?s=r.replace(bb,"\\$&"):b.setAttribute("id",s),s="[id='"+s+"'] ",l=o.length;while(l--)o[l]=s+rb(o[l]);w=ab.test(a)&&pb(b.parentNode)||b,x=o.join(",")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute("id")}}}return i(a.replace(R,"$1"),b,d,e)}function hb(){var a=[];function b(c,e){return a.push(c+" ")>d.cacheLength&&delete b[a.shift()],b[c+" "]=e}return b}function ib(a){return a[u]=!0,a}function jb(a){var b=n.createElement("div");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function kb(a,b){var c=a.split("|"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function lb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return"input"===c&&b.type===a}}function nb(a){return function(b){var c=b.nodeName.toLowerCase();return("input"===c||"button"===c)&&b.type===a}}function ob(a){return ib(function(b){return b=+b,ib(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pb(a){return a&&"undefined"!=typeof a.getElementsByTagName&&a}c=gb.support={},f=gb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?"HTML"!==b.nodeName:!1},m=gb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener("unload",eb,!1):e.attachEvent&&e.attachEvent("onunload",eb)),p=!f(g),c.attributes=jb(function(a){return a.className="i",!a.getAttribute("className")}),c.getElementsByTagName=jb(function(a){return a.appendChild(g.createComment("")),!a.getElementsByTagName("*").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=jb(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if("undefined"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute("id")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c="undefined"!=typeof a.getAttributeNode&&a.getAttributeNode("id");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return"undefined"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if("*"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(jb(function(a){o.appendChild(a).innerHTML="<a id='"+u+"'></a><select id='"+u+"-\f]' msallowcapture=''><option selected=''></option></select>",a.querySelectorAll("[msallowcapture^='']").length&&q.push("[*^$]="+L+"*(?:''|\"\")"),a.querySelectorAll("[selected]").length||q.push("\\["+L+"*(?:value|"+K+")"),a.querySelectorAll("[id~="+u+"-]").length||q.push("~="),a.querySelectorAll(":checked").length||q.push(":checked"),a.querySelectorAll("a#"+u+"+*").length||q.push(".#.+[+~]")}),jb(function(a){var b=g.createElement("input");b.setAttribute("type","hidden"),a.appendChild(b).setAttribute("name","D"),a.querySelectorAll("[name=d]").length&&q.push("name"+L+"*[*^$|!~]?="),a.querySelectorAll(":enabled").length||q.push(":enabled",":disabled"),a.querySelectorAll("*,:x"),q.push(",.*:")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&jb(function(a){c.disconnectedMatch=s.call(a,"div"),s.call(a,"[s!='']:x"),r.push("!=",P)}),q=q.length&&new RegExp(q.join("|")),r=r.length&&new RegExp(r.join("|")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return lb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?lb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},gb.matches=function(a,b){return gb(a,null,null,b)},gb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,"='$1']"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return gb(b,n,null,[a]).length>0},gb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},gb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},gb.error=function(a){throw new Error("Syntax error, unrecognized expression: "+a)},gb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=gb.getText=function(a){var b,c="",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=gb.selectors={cacheLength:50,createPseudo:ib,match:X,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||"").replace(cb,db),"~="===a[2]&&(a[3]=" "+a[3]+" "),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),"nth"===a[1].slice(0,3)?(a[3]||gb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*("even"===a[3]||"odd"===a[3])),a[5]=+(a[7]+a[8]||"odd"===a[3])):a[3]&&gb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(")",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return"*"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+" "];return b||(b=new RegExp("(^|"+L+")"+a+"("+L+"|$)"))&&y(a,function(a){return b.test("string"==typeof a.className&&a.className||"undefined"!=typeof a.getAttribute&&a.getAttribute("class")||"")})},ATTR:function(a,b,c){return function(d){var e=gb.attr(d,a);return null==e?"!="===b:b?(e+="","="===b?e===c:"!="===b?e!==c:"^="===b?c&&0===e.indexOf(c):"*="===b?c&&e.indexOf(c)>-1:"$="===b?c&&e.slice(-c.length)===c:"~="===b?(" "+e.replace(Q," ")+" ").indexOf(c)>-1:"|="===b?e===c||e.slice(0,c.length+1)===c+"-":!1):!0}},CHILD:function(a,b,c,d,e){var f="nth"!==a.slice(0,3),g="last"!==a.slice(-4),h="of-type"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?"nextSibling":"previousSibling",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p="only"===a&&!o&&"nextSibling"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||gb.error("unsupported pseudo: "+a);return e[u]?e(b):e.length>1?(c=[a,a,"",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ib(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ib(function(a){var b=[],c=[],d=h(a.replace(R,"$1"));return d[u]?ib(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ib(function(a){return function(b){return gb(a,b).length>0}}),contains:ib(function(a){return a=a.replace(cb,db),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ib(function(a){return W.test(a||"")||gb.error("unsupported lang: "+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute("xml:lang")||b.getAttribute("lang"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+"-");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&!!a.checked||"option"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return"input"===b&&"button"===a.type||"button"===b},text:function(a){var b;return"input"===a.nodeName.toLowerCase()&&"text"===a.type&&(null==(b=a.getAttribute("type"))||"text"===b.toLowerCase())},first:ob(function(){return[0]}),last:ob(function(a,b){return[b-1]}),eq:ob(function(a,b,c){return[0>c?c+b:c]}),even:ob(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:ob(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:ob(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:ob(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=mb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=nb(b);function qb(){}qb.prototype=d.filters=d.pseudos,d.setFilters=new qb,g=gb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+" "];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R," ")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?gb.error(a):z(a,i).slice(0)};function rb(a){for(var b=0,c=a.length,d="";c>b;b++)d+=a[b].value;return d}function sb(a,b,c){var d=b.dir,e=c&&"parentNode"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function tb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ub(a,b,c){for(var d=0,e=b.length;e>d;d++)gb(a,b[d],c);return c}function vb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wb(a,b,c,d,e,f){return d&&!d[u]&&(d=wb(d)),e&&!e[u]&&(e=wb(e,f)),ib(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ub(b||"*",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:vb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=vb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=vb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[" "],i=g?1:0,k=sb(function(a){return a===b},h,!0),l=sb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sb(tb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wb(i>1&&tb(m),i>1&&rb(a.slice(0,i-1).concat({value:" "===a[i-2].type?"*":""})).replace(R,"$1"),c,e>i&&xb(a.slice(i,e)),f>e&&xb(a=a.slice(e)),f>e&&rb(a))}m.push(c)}return tb(m)}function yb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q="0",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG("*",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=vb(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&gb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ib(f):f}return h=gb.compile=function(a,b){var c,d=[],e=[],f=A[a+" "];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,yb(e,d)),f.selector=a}return f},i=gb.select=function(a,b,e,f){var i,j,k,l,m,n="function"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&"ID"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&pb(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&rb(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&pb(b.parentNode)||b),e},c.sortStable=u.split("").sort(B).join("")===u,c.detectDuplicates=!!l,m(),c.sortDetached=jb(function(a){return 1&a.compareDocumentPosition(n.createElement("div"))}),jb(function(a){return a.innerHTML="<a href='#'></a>","#"===a.firstChild.getAttribute("href")})||kb("type|href|height|width",function(a,b,c){return c?void 0:a.getAttribute(b,"type"===b.toLowerCase()?1:2)}),c.attributes&&jb(function(a){return a.innerHTML="<input/>",a.firstChild.setAttribute("value",""),""===a.firstChild.getAttribute("value")})||kb("value",function(a,b,c){return c||"input"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),jb(function(a){return null==a.getAttribute("disabled")})||kb(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),gb}(a);n.find=t,n.expr=t.selectors,n.expr[":"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,w=/^.[^:#\[\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if("string"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=":not("+a+")"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if("string"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+" "+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,"string"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if("string"==typeof a){if(c="<"===a[0]&&">"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?"undefined"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||"string"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?"string"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,"parentNode")},parentsUntil:function(a,b,c){return n.dir(a,"parentNode",c)},next:function(a){return D(a,"nextSibling")},prev:function(a){return D(a,"previousSibling")},nextAll:function(a){return n.dir(a,"nextSibling")},prevAll:function(a){return n.dir(a,"previousSibling")},nextUntil:function(a,b,c){return n.dir(a,"nextSibling",c)},prevUntil:function(a,b,c){return n.dir(a,"previousSibling",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return"Until"!==a.slice(-5)&&(d=c),d&&"string"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a="string"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);"function"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&"string"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[["resolve","done",n.Callbacks("once memory"),"resolved"],["reject","fail",n.Callbacks("once memory"),"rejected"],["notify","progress",n.Callbacks("memory")]],c="pending",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+"With"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+"With"](this===e?d:this,arguments),this},e[f[0]+"With"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler("ready"),n(l).off("ready"))))}});function I(){l.removeEventListener("DOMContentLoaded",I,!1),a.removeEventListener("load",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),"complete"===l.readyState?setTimeout(n.ready):(l.addEventListener("DOMContentLoaded",I,!1),a.addEventListener("load",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if("object"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if("string"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&"string"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d="data-"+b.replace(O,"-$1").toLowerCase(),c=a.getAttribute(d),"string"==typeof c){try{c="true"===c?!0:"false"===c?!1:"null"===c?null:+c+""===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)
},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,"hasDataAttrs"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf("data-")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,"hasDataAttrs",!0)}return e}return"object"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf("-")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||"fx")+"queue",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||"fx";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};"inprogress"===e&&(e=c.shift(),d--),e&&("fx"===b&&c.unshift("inprogress"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+"queueHooks";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks("once memory").add(function(){L.remove(a,[b+"queue",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return"string"!=typeof a&&(b=a,a="fx",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),"fx"===a&&"inprogress"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||"fx",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};"string"!=typeof a&&(b=a,a=void 0),a=a||"fx";while(g--)c=L.get(f[g],a+"queueHooks"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,R=["Top","Right","Bottom","Left"],S=function(a,b){return a=b||a,"none"===n.css(a,"display")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement("div")),c=l.createElement("input");c.setAttribute("type","radio"),c.setAttribute("checked","checked"),c.setAttribute("name","t"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML="<textarea>x</textarea>",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U="undefined";k.focusinBubbles="onfocusin"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||"").match(E)||[""],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(".")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||"").match(E)||[""],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||"").split(".").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp("(^|\\.)"+p.join("\\.(?:.*\\.|)")+"(\\.|$)"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&("**"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,"events"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,"type")?b.type:b,r=j.call(b,"namespace")?b.namespace.split("."):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(".")>=0&&(r=q.split("."),q=r.shift(),r.sort()),k=q.indexOf(":")<0&&"on"+q,b=b[n.expando]?b:new n.Event(q,"object"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join("."),b.namespace_re=b.namespace?new RegExp("(^|\\.)"+r.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,"events")||{})[b.type]&&L.get(g,"handle"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,"events")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||"click"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||"click"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+" ",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&n.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,"a")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:"focusin",blur:"focusout"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if("object"==typeof a){"string"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&("string"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+"."+d.namespace:d.origType,d.selector,d.handler),this;if("object"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||"function"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,bb=/<([\w:]+)/,cb=/<|&#?\w+;/,db=/<(?:script|style|link)/i,eb=/checked\s*(?:[^=]|=\s*.checked.)/i,fb=/^$|\/(?:java|ecma)script/i,gb=/^true\/(.*)/,hb=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,ib={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,"table")&&n.nodeName(11!==b.nodeType?b:b.firstChild,"tr")?a.getElementsByTagName("tbody")[0]||a.appendChild(a.ownerDocument.createElement("tbody")):a}function kb(a){return a.type=(null!==a.getAttribute("type"))+"/"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute("type"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],"globalEval",!b||L.get(b[c],"globalEval"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||"*"):a.querySelectorAll?a.querySelectorAll(b||"*"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();"input"===c&&T.test(a.type)?b.checked=a.checked:("input"===c||"textarea"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,"script"),g.length>0&&mb(g,!i&&ob(a,"script")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if("object"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement("div")),g=(bb.exec(e)||["",""])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,"<$1></$2>")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=""}else l.push(b.createTextNode(e));k.textContent="",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),"script"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||"")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,"script")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent="");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if("string"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||["",""])[1].toLowerCase()]){a=a.replace(ab,"<$1></$2>");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&"string"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,"script"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,"script"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||"")&&!L.access(h,"globalEval")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,"")))}return this}}),n.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],"display");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),"none"!==c&&c||(qb=(qb||n("<iframe frameborder='0' width='0' height='0'/>")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp("^("+Q+")(?!px)[a-z%]+$","i"),wb=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(""!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+"":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement("div"),f=l.createElement("div");if(f.style){f.style.backgroundClip="content-box",f.cloneNode(!0).style.backgroundClip="",k.clearCloneStyle="content-box"===f.style.backgroundClip,e.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",e.appendChild(f);function g(){f.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",f.innerHTML="",d.appendChild(e);var g=a.getComputedStyle(f,null);b="1%"!==g.top,c="4px"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement("div"));return c.style.cssText=f.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",c.style.marginRight=c.style.width="0",f.style.width="1px",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp("^("+Q+")(.*)$","i"),Bb=new RegExp("^([+-])=("+Q+")","i"),Cb={position:"absolute",visibility:"hidden",display:"block"},Db={letterSpacing:"0",fontWeight:"400"},Eb=["Webkit","O","Moz","ms"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||"px"):b}function Hb(a,b,c,d,e){for(var f=c===(d?"border":"content")?4:"width"===b?1:0,g=0;4>f;f+=2)"margin"===c&&(g+=n.css(a,c+R[f],!0,e)),d?("content"===c&&(g-=n.css(a,"padding"+R[f],!0,e)),"margin"!==c&&(g-=n.css(a,"border"+R[f]+"Width",!0,e))):(g+=n.css(a,"padding"+R[f],!0,e),"padding"!==c&&(g+=n.css(a,"border"+R[f]+"Width",!0,e)));return g}function Ib(a,b,c){var d=!0,e="width"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g="border-box"===n.css(a,"boxSizing",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?"border":"content"),d,f)+"px"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,"olddisplay"),c=d.style.display,b?(f[g]||"none"!==c||(d.style.display=""),""===d.style.display&&S(d)&&(f[g]=L.access(d,"olddisplay",tb(d.nodeName)))):(e=S(d),"none"===c&&e||L.set(d,"olddisplay",e?c:n.css(d,"display"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&"none"!==d.style.display&&""!==d.style.display||(d.style.display=b?f[g]||"":"none"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,"opacity");return""===c?"1":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":"cssFloat"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&"get"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,"string"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f="number"),null!=c&&c===c&&("number"!==f||n.cssNumber[h]||(c+="px"),k.clearCloneStyle||""!==c||0!==b.indexOf("background")||(i[b]="inherit"),g&&"set"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&"get"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),"normal"===e&&b in Db&&(e=Db[b]),""===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each(["height","width"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,"display"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,"border-box"===n.css(a,"boxSizing",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:"inline-block"},xb,[a,"marginRight"]):void 0}),n.each({margin:"",padding:"",border:"Width"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f="string"==typeof c?c.split(" "):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return"boolean"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||"swing",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?"":"px")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,""),b&&"auto"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp("^(?:([+-])=|)("+Q+")([a-z%]*)$","i"),Pb=/queueHooks$/,Qb=[Vb],Rb={"*":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?"":"px"),g=(n.cssNumber[a]||"px"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||".5",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e["margin"+c]=e["padding"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb["*"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,"fxshow");c.queue||(h=n._queueHooks(a,"fx"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,"fx").length||h.empty.fire()})})),1===a.nodeType&&("height"in b||"width"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,"display"),k="none"===j?L.get(a,"olddisplay")||tb(a.nodeName):j,"inline"===k&&"none"===n.css(a,"float")&&(o.display="inline-block")),c.overflow&&(o.overflow="hidden",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||"toggle"===e,e===(p?"hide":"show")){if("show"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))"inline"===("none"===j?tb(a.nodeName):j)&&(o.display=j);else{q?"hidden"in q&&(p=q.hidden):q=L.access(a,"fxshow",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,"fxshow");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start="width"===d||"height"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&"expand"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=["*"]):a=a.split(" ");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&"object"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:"number"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue="fx"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css("opacity",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,"finish"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return"string"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||"fx",[]),this.each(function(){var b=!0,e=null!=a&&a+"queueHooks",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||"fx"),this.each(function(){var b,c=L.get(this),d=c[a+"queue"],e=c[a+"queueHooks"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each(["toggle","show","hide"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||"boolean"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb("show"),slideUp:Tb("hide"),slideToggle:Tb("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||"fx",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement("input"),b=l.createElement("select"),c=b.appendChild(l.createElement("option"));a.type="checkbox",k.checkOn=""!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement("input"),a.value="t",a.type="radio",k.radioValue="t"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&"get"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&"set"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+""),c):void n.removeAttr(a,b))
},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&"radio"===b&&n.nodeName(a,"input")){var c=a.value;return a.setAttribute("type",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&"set"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&"get"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute("tabindex")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\t\r\n\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h="string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):" ")){f=0;while(e=b[f++])d.indexOf(" "+e+" ")<0&&(d+=e+" ");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||"string"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||"").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(" "+c.className+" ").replace(ac," "):"")){f=0;while(e=b[f++])while(d.indexOf(" "+e+" ")>=0)d=d.replace(" "+e+" "," ");g=a?n.trim(d):"",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return"boolean"==typeof b&&"string"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if("string"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||"boolean"===c)&&(this.className&&L.set(this,"__className__",this.className),this.className=this.className||a===!1?"":L.get(this,"__className__")||"")})},hasClass:function(a){for(var b=" "+a+" ",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(" "+this[c].className+" ").replace(ac," ").indexOf(b)>=0)return!0;return!1}});var bc=/\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e="":"number"==typeof e?e+="":n.isArray(e)&&(e=n.map(e,function(a){return null==a?"":a+""})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&"set"in b&&void 0!==b.set(this,e,"value")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&"get"in b&&void 0!==(c=b.get(e,"value"))?c:(c=e.value,"string"==typeof c?c.replace(bc,""):null==c?"":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,"value");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f="select-one"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute("disabled"))||c.parentNode.disabled&&n.nodeName(c.parentNode,"optgroup"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each(["radio","checkbox"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute("value")?"on":a.value})}),n.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,"**"):this.off(b,a||"**",c)}});var cc=n.now(),dc=/\?/;n.parseJSON=function(a){return JSON.parse(a+"")},n.parseXML=function(a){var b,c;if(!a||"string"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,"text/xml")}catch(d){b=void 0}return(!b||b.getElementsByTagName("parsererror").length)&&n.error("Invalid XML: "+a),b};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \t]*([^\r\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\/\//,kc=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,lc={},mc={},nc="*/".concat("*"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];function qc(a){return function(b,c){"string"!=typeof b&&(c=b,b="*");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])"+"===d[0]?(d=d.slice(1)||"*",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rc(a,b,c,d){var e={},f=a===mc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return"string"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e["*"]&&g("*")}function sc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while("*"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader("Content-Type"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+" "+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function uc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if("*"===f)f=i;else if("*"!==i&&i!==f){if(g=j[i+" "+f]||j["* "+f],!g)for(e in j)if(h=e.split(" "),h[1]===f&&(g=j[i+" "+h[0]]||j["* "+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a["throws"])b=g(b);else try{b=g(b)}catch(l){return{state:"parsererror",error:g?l:"No conversion from "+i+" to "+f}}}return{state:"success",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:"GET",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":nc,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":n.parseJSON,"text xml":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sc(sc(a,n.ajaxSettings),b):sc(n.ajaxSettings,a)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(a,b){"object"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks("once memory"),q=k.statusCode||{},r={},s={},t=0,u="canceled",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gc.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||oc)+"").replace(ec,"").replace(jc,pc[1]+"//"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||"*").toLowerCase().match(E)||[""],null==k.crossDomain&&(h=kc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pc[1]&&h[2]===pc[2]&&(h[3]||("http:"===h[1]?"80":"443"))===(pc[3]||("http:"===pc[1]?"80":"443")))),k.data&&k.processData&&"string"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rc(lc,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger("ajaxStart"),k.type=k.type.toUpperCase(),k.hasContent=!ic.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?"&":"?")+k.data,delete k.data),k.cache===!1&&(k.url=fc.test(d)?d.replace(fc,"$1_="+cc++):d+(dc.test(d)?"&":"?")+"_="+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader("If-Modified-Since",n.lastModified[d]),n.etag[d]&&v.setRequestHeader("If-None-Match",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader("Content-Type",k.contentType),v.setRequestHeader("Accept",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+("*"!==k.dataTypes[0]?", "+nc+"; q=0.01":""):k.accepts["*"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u="abort";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rc(mc,k,b,v)){v.readyState=1,i&&m.trigger("ajaxSend",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort("timeout")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,"No Transport");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||"",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tc(k,v,f)),u=uc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader("Last-Modified"),w&&(n.lastModified[d]=w),w=v.getResponseHeader("etag"),w&&(n.etag[d]=w)),204===a||"HEAD"===k.type?x="nocontent":304===a?x="notmodified":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x="error",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+"",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?"ajaxSuccess":"ajaxError",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger("ajaxComplete",[v,k]),--n.active||n.event.trigger("ajaxStop")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,"json")},getScript:function(a,b){return n.get(a,void 0,b,"script")}}),n.each(["get","post"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,"body")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vc=/%20/g,wc=/\[\]$/,xc=/\r?\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;function Ac(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wc.test(a)?d(a,e):Ac(a+"["+("object"==typeof e?b:"")+"]",e,c,d)});else if(c||"object"!==n.type(b))d(a,b);else for(e in b)Ac(a+"["+e+"]",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?"":b,d[d.length]=encodeURIComponent(a)+"="+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ac(c,a[c],b,e);return d.join("&").replace(vc,"+")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,"elements");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(":disabled")&&zc.test(this.nodeName)&&!yc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xc,"\r\n")}}):{name:b.name,value:c.replace(xc,"\r\n")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent("onunload",function(){for(var a in Cc)Cc[a]()}),k.cors=!!Ec&&"withCredentials"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(a){var b;return k.cors||Ec&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c["X-Requested-With"]||(c["X-Requested-With"]="XMLHttpRequest");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cc[g],b=f.onload=f.onerror=null,"abort"===a?f.abort():"error"===a?d(f.status,f.statusText):d(Dc[f.status]||f.status,f.statusText,"string"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b("error"),b=Cc[g]=b("abort");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter("script",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type="GET")}),n.ajaxTransport("script",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n("<script>").prop({async:!0,charset:a.scriptCharset,src:a.url}).on("load error",c=function(a){b.remove(),c=null,a&&e("error"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fc=[],Gc=/(=)\?(?=&|$)|\?\?/;n.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var a=Fc.pop()||n.expando+"_"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter("json jsonp",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gc.test(b.url)?"url":"string"==typeof b.data&&!(b.contentType||"").indexOf("application/x-www-form-urlencoded")&&Gc.test(b.data)&&"data");return h||"jsonp"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gc,"$1"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?"&":"?")+b.jsonp+"="+e),b.converters["script json"]=function(){return g||n.error(e+" was not called"),g[0]},b.dataTypes[0]="json",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),"script"):void 0}),n.parseHTML=function(a,b,c){if(!a||"string"!=typeof a)return null;"boolean"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hc=n.fn.load;n.fn.load=function(a,b,c){if("string"!=typeof a&&Hc)return Hc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(" ");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&"object"==typeof b&&(e="POST"),g.length>0&&n.ajax({url:a,type:e,dataType:"html",data:b}).done(function(a){f=arguments,g.html(d?n("<div>").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ic=a.document.documentElement;function Jc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,"position"),l=n(a),m={};"static"===k&&(a.style.position="relative"),h=l.offset(),f=n.css(a,"top"),i=n.css(a,"left"),j=("absolute"===k||"fixed"===k)&&(f+i).indexOf("auto")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),"using"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return"fixed"===n.css(c,"position")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],"html")||(d=a.offset()),d.top+=n.css(a[0],"borderTopWidth",!0),d.left+=n.css(a[0],"borderLeftWidth",!0)),{top:b.top-d.top-n.css(c,"marginTop",!0),left:b.left-d.left-n.css(c,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ic;while(a&&!n.nodeName(a,"html")&&"static"===n.css(a,"position"))a=a.offsetParent;return a||Ic})}}),n.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(b,c){var d="pageYOffset"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each(["top","left"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+"px":c):void 0})}),n.each({Height:"height",Width:"width"},function(a,b){n.each({padding:"inner"+a,content:b,"":"outer"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||"boolean"!=typeof d),g=c||(d===!0||e===!0?"margin":"border");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement["client"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body["scroll"+a],e["scroll"+a],b.body["offset"+a],e["offset"+a],e["client"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lc),b&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n});

define('durandal/system',["require","jquery"],function(e,t){function n(e){var t="[object "+e+"]";r["is"+e]=function(e){return s.call(e)==t}}var r,a=!1,o=Object.keys,i=Object.prototype.hasOwnProperty,s=Object.prototype.toString,l=!1,u=Array.isArray,c=Array.prototype.slice;if(String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Function.prototype.bind&&("object"==typeof console||"function"==typeof console)&&"object"==typeof console.log)try{["log","info","warn","error","assert","dir","clear","profile","profileEnd"].forEach(function(e){console[e]=this.call(console[e],console)},Function.prototype.bind)}catch(d){l=!0}e.on&&e.on("moduleLoaded",function(e,t){r.setModuleId(e,t)}),"undefined"!=typeof requirejs&&(requirejs.onResourceLoad=function(e,t){r.setModuleId(e.defined[t.id],t.id)});var p=function(){},f=function(){try{if("undefined"!=typeof console&&"function"==typeof console.log)if(window.opera)for(var e=0;e<arguments.length;)console.log("Item "+(e+1)+": "+arguments[e]),e++;else 1==c.call(arguments).length&&"string"==typeof c.call(arguments)[0]?console.log(c.call(arguments).toString()):console.log.apply(console,c.call(arguments));else Function.prototype.bind&&!l||"undefined"==typeof console||"object"!=typeof console.log||Function.prototype.call.call(console.log,console,c.call(arguments))}catch(t){}},m=function(e,t){var n;n=e instanceof Error?e:new Error(e),n.innerError=t;try{"undefined"!=typeof console&&"function"==typeof console.error?console.error(n):Function.prototype.bind&&!l||"undefined"==typeof console||"object"!=typeof console.error||Function.prototype.call.call(console.error,console,n)}catch(r){}throw n};r={version:"2.1.0",noop:p,getModuleId:function(e){return e?"function"==typeof e&&e.prototype?e.prototype.__moduleId__:"string"==typeof e?null:e.__moduleId__:null},setModuleId:function(e,t){return e?"function"==typeof e&&e.prototype?(e.prototype.__moduleId__=t,void 0):("string"!=typeof e&&(e.__moduleId__=t),void 0):void 0},resolveObject:function(e){return r.isFunction(e)?new e:e},debug:function(e){return 1==arguments.length&&(a=e,a?(this.log=f,this.error=m,this.log("Debug:Enabled")):(this.log("Debug:Disabled"),this.log=p,this.error=p)),a},log:p,error:p,assert:function(e,t){e||r.error(new Error(t||"Assert:Failed"))},defer:function(e){return t.Deferred(e)},guid:function(){var e=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=0|(e+16*Math.random())%16;return e=Math.floor(e/16),("x"==t?n:8|7&n).toString(16)})},acquire:function(){var t,n=arguments[0],a=!1;return r.isArray(n)?(t=n,a=!0):t=c.call(arguments,0),this.defer(function(n){e(t,function(){var e=arguments;setTimeout(function(){e.length>1||a?n.resolve(c.call(e,0)):n.resolve(e[0])},1)},function(e){n.reject(e)})}).promise()},extend:function(e){for(var t=c.call(arguments,1),n=0;n<t.length;n++){var r=t[n];if(r)for(var a in r)e[a]=r[a]}return e},wait:function(e){return r.defer(function(t){setTimeout(t.resolve,e)}).promise()}},r.keys=o||function(e){if(e!==Object(e))throw new TypeError("Invalid object");var t=[];for(var n in e)i.call(e,n)&&(t[t.length]=n);return t},r.isElement=function(e){return!(!e||1!==e.nodeType)},r.isArray=u||function(e){return"[object Array]"==s.call(e)},r.isObject=function(e){return e===Object(e)},r.isBoolean=function(e){return"boolean"==typeof e},r.isPromise=function(e){return e&&r.isFunction(e.then)};for(var g=["Arguments","Function","String","Number","Date","RegExp"],v=0;v<g.length;v++)n(g[v]);return r});
define('data/permissions',["durandal/system"],function(){function e(e){window.localStorage.setItem(a,e)}function t(){return window.localStorage.getItem(a)}function n(){return $.getJSON("api/Account/UserPermissions/"+(new Date).getTime()).done(function(t){e(t),console.log("User permissions are set:"),console.log(t)})}function o(){window.localStorage.removeItem(a)}function r(e){var n=t(),o=n&&n.indexOf&&-1!=n.indexOf(e);return console.log('Permission "'+e+'" '+(o?"granted":"revoked")),o}var a="Permissions",i={setPermissions:n,clearPermissions:o,hasPermission:r};return i});
(function (factory) {
    if (typeof exports === 'object') {
        // CommonJS
        factory(exports, require('knockout'));
    } else if (typeof define === 'function' && define.amd) {
        // AMD (anonymous module)        
        define('ko.bindingHandlers', ['exports', 'knockout'], factory);
    } else {
        // export to global
        factory(window, window.knockout || window.ko);
    }
})(function (exports, ko) {

    ko.extenders.async = function (computedDeferred, initialValue) {

        var plainObservable = ko.observable(initialValue), currentDeferred;
        plainObservable.inProgress = ko.observable(false);

        ko.computed(function () {
            if (currentDeferred) {
                currentDeferred.reject();
                currentDeferred = null;
            }

            var newDeferred = computedDeferred();
            if (newDeferred &&
                (typeof newDeferred.done == "function")) {

                // It's a deferred
                plainObservable.inProgress(true);

                // Create our own wrapper so we can reject
                currentDeferred = $.Deferred().done(function (data) {
                    plainObservable.inProgress(false);
                    plainObservable(data);
                });
                newDeferred.done(currentDeferred.resolve);
            } else {
                // A real value, so just publish it immediately
                plainObservable(newDeferred);
            }
        });

        return plainObservable;
    };

    ko.bindingHandlers.date = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            var bindOptions = valueAccessor();

            var format = bindOptions.format;
            var field = bindOptions.field;

            var val = moment(field()).format(format);
            $(element).html(val);
        }
    };

    ko.bindingHandlers.percentVal = {
        init: function (element, valueAccessor, allBindings, viewModel, context) {
            var value = valueAccessor();

            var val = ko.unwrap(value);
            
            $(element).val(val.toString().replace(/[^0-9]/g, '') + " %");

            $(element).on('focus', function () {
                var val1 = ko.unwrap(value);
               
                $(element).val(val1.toString().replace(/[^0-9]/g, ''));
            });

            $(element).on('blur', function () {
                var val1 = ko.unwrap(value);
               
                $(element).val(val1.toString().replace(/[^0-9]/g, '') + " %");
            });

            return ko.bindingHandlers.value.init(element, valueAccessor, allBindings, viewModel, context);
        },

        update: function (element, valueAccessor, allBindings, viewModel, context) {
            return ko.bindingHandlers.value.update(element, valueAccessor, allBindings, viewModel, context);
        }
    };

    ko.bindingHandlers.afterRender = {
        update: function(element, options) {
            ko.utils.unwrapObservable(options().data);

            if (options().callback != null) {
                options().callback(options().data);
            }
        }
    };

    ko.bindingHandlers.sortableList = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            var options = allBindingsAccessor().sortableOptions || {};
            var list = valueAccessor();

            var defaults = {
                scroll: false,
                items: 'tr',
                handle: '.drag-modifier',
                axis: 'y',
                // preserve height of sortable control
                start: function (e, ui) {
                    ui.placeholder.height(ui.helper.outerHeight(true));
                },
                // prevent row from changing it's width
                helper: function(e, ui) {
                    ui.children().each(function() {
                        $(this).width($(this).outerWidth());
                    });

                    return ui;
                },
                update: function(e, ui) {
                    //saveOrder($(this).sortable('toArray'));

                    var item = ko.dataFor(ui.item[0]);
                    //figure out its new position
                    var position = ko.utils.arrayIndexOf(ui.item.parent().children(), ui.item[0]);
                    //remove the item and add it back in the right spot
                    if (position >= 0) {
                        list.remove(item);
                        list.splice(position, 0, item);
                    }

                    ui.item.remove();
                }
            };

            var sortableOpts = $.extend({}, defaults, options);
            $(element).sortable(sortableOpts);
        }
    };

    ko.bindingHandlers.multipleSelect = {
        update: function(element, valueAccessor, allBindingsAccessor) {
            var data = valueAccessor();

            var defaults = {
                filter: true,
                selectAll: false,
            };

            var userOptions = allBindingsAccessor().multipleSelectOptions || {};
            var options = $.extend({}, defaults, userOptions);
            options.selectedItemsArr = allBindingsAccessor().selectedElements;
            options.data = data;

            var $mltSelect = $(element).multipleSelect(options);
            if (options.afterInit) {
                options.afterInit($mltSelect);
            }
        }
    };

    ko.bindingHandlers.phoneFilter = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            element.addEventListener('keypress', function (e) {
                if ((e.charCode < 48) || (e.charCode > 57) || (e.target.value.length > 18)) {
                    e.preventDefault();
                }
            });
            element.addEventListener('input', function (e) {
                e.target.value = e.target.value.replace(/\D/g, '');
            });
        }
    };

    ko.bindingHandlers.datepicker = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            //initialize datepicker with some optional options
            var options = allBindingsAccessor().datepickerOptions || {};
            options.tooltips = {};
            options.tooltips.selectTime = ko.local('reports/productMixReport.selectTime');
            options.tooltips.selectDate = ko.local('reports/productMixReport.selectDate');
            $(element).datetimepicker(options);

            //handle the field changing
            $(element).bind("dp.hide", function (e) {
                var observable = valueAccessor();
                observable(new Date(e.date));
            });

            //handle disposal (if KO removes by the template binding)
            ko.utils.domNodeDisposal.addDisposeCallback(element, function () {
                $(element).datetimepicker("destroy");
            });

        },
        //update the control when the view model changes
        update: function (element, valueAccessor) {
            var value = ko.utils.unwrapObservable(valueAccessor()),
                current = $(element).datetimepicker("getDate");

            if (value - current !== 0) {
                $(element).datetimepicker("setDate", value);
            }
        }
    };

    ko.bindingHandlers.digitFilter = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            element.addEventListener('keypress', function (e) {
                if ((e.charCode < 48) || (e.charCode > 57)) {
                    e.preventDefault();
                }
            });
            element.addEventListener('input', function (e) {
                e.target.value = e.target.value.replace(/\D/g, '');
            });
        }
    };

    // var permissionService;

    ko.bindingHandlers.permission = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            require(['data/permissions'], function(permissionService) {
                var perm = valueAccessor();
                if (perm && !permissionService.hasPermission(perm)) {
                    element.parentNode.removeChild(element);
                }
            });
        }
    };

    //submit terms and conditions on keypress on the submit button
    ko.bindingHandlers.submitTermsOnEnter = {
        init: function (element, valueAccessor, allBindingsAccessor, viewModel) {
            var callback = valueAccessor();
            var result = true;
            var enterFunc = function (event) {
                console.log('pressed', event.which, !result);
                if (!result || element.disabled) return;
                var keyCode = (event.which ? event.which : event.keyCode);
                if (keyCode !== 13) return;
                result = callback.call(viewModel);
                document.removeEventListener('keypress', enterFunc);
            }
            document.addEventListener('keypress', enterFunc);
        }
    };

    exports.ko = exports.ko || {};
    exports.ko.bindingHandlers = ko.bindingHandlers;
});
(function (root, factory) {
    if (typeof exports === 'object') {
        // CommonJS
        factory(exports, require('knockout'));
    } else if (typeof define === 'function' && define.amd) {
        // AMD (anonymous module)        
        define('knockout.extenders', ['exports', 'knockout'], factory);
    } else {
        // export to global
        factory(window, window.knockout);
    }
})(this, function (exports, ko) {

    function formatNumber(value) {
        return value.toString().replace(/\d(?=(\d{3})+(\.|\,|$))/g, '$&,');
    }

    ko.extenders.formattedNumber = function (target, option) {
        target.formattedNumber = ko.computed({
            read: function () {
                return formatNumber(this());
            },
            write: function (value) {
                this(Number(value.toString().replace(/,/g, '')));
            },
            owner: target
        });

        return target;
    };

    ko.extenders.defaultIfBlank = function(target, defaultValue) {
        var result = ko.computed({
            read: function () {
                if (target() != "") {
                    return target();
                }
                return defaultValue;
            },  //always return the original observables value
            write: function(newValue) {
                if (newValue == "") {
                    target(defaultValue);
                } else {
                    target(newValue);
                }
            }
        });
        //initialize with current value to make sure it is not blank
        result(target());

        //return the new computed observable
        return result;
    };

    
    ko.extenders.percentExt = function (target, option) {
        target.percent = ko.computed({
            read: function () {
                if (!this()) return '0 %';

                return Number(this())+ " %";
            },
            write: function (value) {
                var val = Number(value.toString().replace(/[^0-9]/g, ''));
                if (val > 100)
                    val = 100;

                //if (val.toString() != value && this() == val) {
                //    this('');
                //}

                this(val);
            },
            owner: target
        });

        return target;
    };

    ko.extenders.date = function (target, option) {
        target.date = ko.computed({
            read: function () {
                var date = this() != null
                    ? new Date(this())
                    : new Date();

                var day = date.getDate();
                day = day < 10 ? '0' + day : day;

                var month = date.getMonth() + 1;
                month = month < 10 ? '0' + month : month;

                var year = date.getFullYear();


                return year + '/' + month + '/' + day;
            },
            write: function (value) {
                this(value);
            },
            owner: target
        });

        return target;
    };


    ko.extenders.base64 = function (target, option) {
        target.mimeType = ko.observable('data:image/jpeg;base64,');

        target.image = ko.computed({
            read: function () {
                var image = this();
                return image != '' && image != null ? this.mimeType() + image : '';
            },
            write: function (value) {
                var image = value.replace(/data:(\S+?);base64,/, '');
                this(image);
            },
            owner: target
        });

        return target;
    };


    ko.extenders.phone = function (target, option) {
        target.formatToDisplay = function (value) {
            var phoneRegex = getPhoneRegex(value),
                matches = phoneRegex.exec(value);

            if (!matches) {
                matches = [];
            }

            var countryCode = parseCountryCode(matches[1]),
                stateCode = parseStateCode(matches[2]),
                phoneFirstDigits = parseFirstThreeDigits(matches[3]),
                phoneLastDigits = parseLastFourDigits(matches[4]);

            return countryCode + stateCode + phoneFirstDigits + phoneLastDigits;
        };

        target.formatToValue = function (value) {
            return value.toString().replace(/[()\s-]/g, '');
        };
        
        target.phone = ko.computed({
            read: function() {
                if (!this()) return '';
                return target.formatToDisplay(target.formatToValue(this().toString()));
            },
            write: function(value) {
                this(target.formatToValue(value));
            },
            owner: target
        }).extend({
            phoneNumber: option.message != null ? { message: option.message } : true
        });

        if (option.required) {
            target.phone = target.phone.extend({ required: true });
        }

        function getPhoneRegex(value) {
            if (value.indexOf('+') != -1) {
                return /^(\+?\d+?)?(\d{3})?(\d{0,3})?(\d{0,4})?$/g;
            }

            if (value.length <= 10) {
                return /()(\d{3})?(\d{0,3})?(\d{0,4})?/g;
            }

            return /^(\+?\d+?)?(\d{3})(\d{0,3})(\d{0,4})$/g;
        }

        function parseCountryCode(countryCode) {
            countryCode = countryCode != null && countryCode != '' ? countryCode + ' ' : '';
            countryCode = countryCode.length > 0 && countryCode.indexOf('+') == -1 ? '+' + countryCode : countryCode;

            return countryCode;
        }

        function parseStateCode(stateCode) {
            stateCode = stateCode != null ? stateCode : '';
            stateCode = stateCode.length == 3 ? '(' + stateCode + ') ' : stateCode;

            return stateCode;
        }

        function parseFirstThreeDigits(phoneFirstDigits) {
            phoneFirstDigits = phoneFirstDigits != null ? phoneFirstDigits : '';
            phoneFirstDigits = phoneFirstDigits.length === 3 ? phoneFirstDigits + '-' : phoneFirstDigits;

            return phoneFirstDigits;
        }

        function parseLastFourDigits(phoneLastDigits) {
            phoneLastDigits = phoneLastDigits != null ? phoneLastDigits : '';

            return phoneLastDigits;
        }

        return target;
    };


    ko.extenders.decimal = function (target, decimalDigits) {
        target.decimal = ko.computed({
            read: target,
            write: function(value) {
                var oldValue = this();
                if (value == '-' || value == '') {
                    this(value);
                } else if (!isNaN(Number(value))) {
                    var precision = ko.utils.unwrapObservable(decimalDigits);
                    var newValue = roundValue(value, precision);
                    this(newValue);
                    this.notifySubscribers(newValue);
                } else {
                    this.notifySubscribers(oldValue);
                }
            },
            owner: target
        }).extend({ notify: 'always' });

        decimalDigits.subscribe(function () {
            if (target.decimal != null) {
                target.decimal(target.decimal());
            }
        });


        function roundValue(value, precision) {
            //if (precision == null || isNaN(Number(precision))) precision = 0;
            //else precision = Number(precision);

            //if (precision > 0 && endsWith(value, '.')) return value;

            //if (value == null || value == '' || isNaN(Number(value))) return '';

            //var roundingMultiplier = Math.pow(10, precision);

            //return (Math.floor(Number(value) * roundingMultiplier) / roundingMultiplier);

            if (precision == null || isNaN(Number(precision))) precision = 0;
            else precision = Number(precision);

            if (value == null || value == '' || isNaN(Number(value))) return '';

            value = value.toString();

            if (precision == 0 && endsWith(value, '.')) return value.substring(0, value.length - 1);

            var valueParts = value.split('.');
            if (valueParts.length == 2) {
                if (valueParts[1].length > precision) {
                    var returnValue = value.substring(0, value.length + precision - valueParts[1].length);
                    if (endsWith(returnValue, '.')) {
                        returnValue = returnValue.substring(0, returnValue.length - 1);
                    }

                    return returnValue;
                }
            }

            return value;
        }

        function endsWith(str, suffix) {
            str = str.toString();
            return str.indexOf(suffix, str.length - suffix.length) !== -1;
        }

        return target;
    };


    ko.extenders.sneakyUpdate = function (target) {
        target.notifySubscribers = function () {
            if (!target.pauseNotifications) {
                ko.subscribable.fn.notifySubscribers.apply(target, arguments);
            }
        };

        target.sneakyUpdate = function (newValue) {
            target.pauseNotifications = true;
            target(newValue);
            target.pauseNotifications = false;
        };


        return target;
    };

    //wrapper for a computed observable that can pause its subscriptions
    ko.pauseableComputed = function (evaluatorFunction, evaluatorFunctionTarget) {
        var _cachedValue = "";
        var _isPaused = ko.observable(false);
        var _trigger = ko.observable(1);
        //the computed observable that we will return
        var result = ko.computed(function () {
            var paused;
            ko.computed(function () {
                paused = _isPaused();
            }).dispose();
            var triggerVal = _trigger();
            if (!paused) {
                //call the actual function that was passed in
                return evaluatorFunction.call(evaluatorFunctionTarget);
            }
            return _cachedValue;
        }, evaluatorFunctionTarget);

        //keep track of our current value and set the pause flag to release our actual subscriptions
        result.pause = function () {
            _cachedValue = this();
            _isPaused(true);
        }.bind(result);

        //clear the cached value and allow our computed observable to be re-evaluated
        result.resume = function () {
            _cachedValue = "";
            _isPaused(false);
            _trigger(_trigger() + 1);
        }

        return result;
    };
});
/*
*   Knockout Validation
*   Created By Eric M. Barnard (https://github.com/ericmbarnard)
*
*   Source: https://github.com/ericmbarnard/Knockout-Validation
*   MIT License: http://www.opensource.org/licenses/MIT
*/
(function (factory) {
    if (typeof exports === 'object') {
        // CommonJS
        factory(exports, require('knockout'));
    } else if (typeof define === 'function' && define.amd) {
        // AMD (anonymous module)        
        define('knockout.validation', ['exports', 'knockout'], factory);
    } else {
        // export to global
        factory(window, window.knockout || window.ko);
    }
})(function (exports, ko) {

    if (typeof (ko) === undefined) { throw 'Knockout is required, please ensure it is loaded before loading this validation plug-in'; }

    var defaults = {
        registerExtenders: true,
        messagesOnModified: true,
        messageTemplate: null,
        insertMessages: true,           // automatically inserts validation messages as <span></span>
        parseInputAttributes: false,    // parses the HTML5 validation attribute from a form element and adds that to the object
        writeInputAttributes: false,    // adds HTML5 input validation attributes to form elements that ko observable's are bound to
        decorateElement: false,         // false to keep backward compatibility
        errorClass: null,               // single class for error message and element
        errorElementClass: 'validationElement',  // class to decorate error element
        errorMessageClass: 'validationMessage',  // class to decorate error message
        grouping: {
            deep: false,        //by default grouping is shallow
            observable: true    //and using observables
        }
    };

    // make a copy  so we can use 'reset' later
    var configuration = ko.utils.extend({}, defaults);

    var html5Attributes = ['required', 'pattern', 'min', 'max', 'step'];

    var async = function (expr) {
        if (window.setImmediate) { window.setImmediate(expr); }
        else { window.setTimeout(expr, 0); }
    };

    //#region Utilities

    var utils = (function () {
        var seedId = new Date().getTime();

        var domData = {}; //hash of data objects that we reference from dom elements
        var domDataKey = '__ko_validation__';

        return {
            // get http://stackoverflow.com/questions/19119826/move-validation-from-observable-to-computed
            copyValidation: function(observable, newObservable) {
                if (observable.__valid__) {
                    newObservable.extend({ validatable: true });
                    ko.utils.arrayForEach(observable.rules(), function(rule) {
                        newObservable.rules.push(rule);
                    });
                    //observable.extend({ validatable: false });
                     observable.rules([]);
                }
            },
            isArray: function (o) {
                return o.isArray || Object.prototype.toString.call(o) === '[object Array]';
            },
            isObject: function (o) {
                return o !== null && typeof o === 'object';
            },
            values: function (o) {
                var r = [];
                for (var i in o) {
                    if (o.hasOwnProperty(i)) {
                        r.push(o[i]);
                    }
                }
                return r;
            },
            getValue: function (o) {
                return (typeof o === 'function' ? o() : o);
            },
            hasAttribute: function (node, attr) {
                return node.getAttribute(attr) !== null;
            },
            hasClass: function (node, className) {
                var hasClass = node.classList.contains(className);
                return hasClass;
            },
            isValidatable: function (o) {
                return o.rules && o.isValid && o.isModified;
            },
            insertAfter: function (node, newNode) {
                var parent = node.parentNode;
                if (this.hasClass(parent, 'input-group')) {
                    parent.parentNode.insertBefore(newNode, parent.nextSibling);
                } else {
                    parent.insertBefore(newNode, node.nextSibling);
                }
            },
            newId: function () {
                return seedId += 1;
            },
            getConfigOptions: function (element) {
                var options = utils.contextFor(element);

                return options || configuration;
            },
            setDomData: function (node, data) {
                var key = node[domDataKey];

                if (!key) {
                    node[domDataKey] = key = utils.newId();
                }

                domData[key] = data;
            },
            getDomData: function (node) {
                var key = node[domDataKey];

                if (!key) {
                    return undefined;
                }

                return domData[key];
            },
            contextFor: function (node) {
                switch (node.nodeType) {
                    case 1:
                    case 8:
                        var context = utils.getDomData(node);
                        if (context) return context;
                        if (node.parentNode) return utils.contextFor(node.parentNode);
                        break;
                }
                return undefined;
            },
            isEmptyVal: function (val) {
                if (val === undefined) {
                    return true;
                }
                if (val === null) {
                    return true;
                }
                if (val === "") {
                    return true;
                }
            }
        };
    } ());

    //#endregion

    //#region Public API
    ko.validation = (function () {

        var isInitialized = 0;

        return {
            utils: utils,

            //Call this on startup
            //any config can be overridden with the passed in options
            init: function (options, force) {
                //done run this multiple times if we don't really want to
                if (isInitialized > 0 && !force) {
                    return;
                }

                //becuase we will be accessing options properties it has to be an object at least
                options = options || {};
                //if specific error classes are not provided then apply generic errorClass
                //it has to be done on option so that options.errorClass can override default
                //errorElementClass and errorMessage class but not those provided in options
                options.errorElementClass = options.errorElementClass || options.errorClass || configuration.errorElementClass;
                options.errorMessageClass = options.errorMessageClass || options.errorClass || configuration.errorMessageClass;

                ko.utils.extend(configuration, options);

                if (configuration.registerExtenders) {
                    ko.validation.registerExtenders();
                }

                isInitialized = 1;
            },
            // backwards compatability
            configure: function (options) { ko.validation.init(options); },

            // resets the config back to its original state
            reset: function () { configuration = $.extend(configuration, defaults); },

            // recursivly walks a viewModel and creates an object that
            // provides validation information for the entire viewModel
            // obj -> the viewModel to walk
            // options -> {
            //      deep: false, // if true, will walk past the first level of viewModel properties
            //      observable: false // if true, returns a computed observable indicating if the viewModel is valid
            // }
            group: function group(obj, options) { // array of observables or viewModel
                var options = ko.utils.extend(configuration.grouping, options),
                validatables = ko.observableArray([]),
                result = null,

                //anonymous, immediate function to traverse objects hierarchically
                //if !options.deep then it will stop on top level
                traverse = function traverse(obj, level) {
                    var objValues = [],
                        val = ko.utils.unwrapObservable(obj);

                    //default level value depends on deep option.
                    level = (level !== undefined ? level : options.deep ? 1 : -1);

                    // if object is observable then add it to the list
                    if (ko.isObservable(obj)) {

                        //make sure it is validatable object
                        if (!obj.isValid) obj.extend({ validatable: true });
                        validatables.push(obj);
                    }

                    //get list of values either from array or object but ignore non-objects
                    if (val) {
                        if (utils.isArray(val)) {
                            objValues = val;
                        } else if (utils.isObject(val)) {
                            objValues = utils.values(val);
                        }
                    }

                    //process recurisvely if it is deep grouping
                    if (level !== 0) {
                        ko.utils.arrayForEach(objValues, function (observable) {

                            //but not falsy things and not HTML Elements
                            if (observable && !observable.nodeType) traverse(observable, level + 1);
                        });
                    }
                };

                //if using observables then traverse structure once and add observables
                if (options.observable) {

                    traverse(obj);

                    result = ko.computed(function () {
                        var errors = [];
                        ko.utils.arrayForEach(validatables(), function (observable) {
                            if (!observable.isValid()) {
                                errors.push(observable.error);
                            }
                        });
                        return errors;
                    });

                } else { //if not using observables then every call to error() should traverse the structure
                    result = function () {
                        var errors = [];
                        validatables([]); //clear validatables
                        traverse(obj); // and traverse tree again
                        ko.utils.arrayForEach(validatables(), function (observable) {
                            if (!observable.isValid()) {
                                errors.push(observable.error);
                            }
                        });
                        return errors;
                    };


                }

                result.showAllMessages = function (show) { // thanks @heliosPortal
                    if (show == undefined) //default to true
                        show = true;

                    // ensure we have latest changes
                    result();

                    ko.utils.arrayForEach(validatables(), function (observable) {
                        observable.isModified && observable.isModified(show);
                    });
                };

                obj.errors = result;
                obj.isValid = function () {
                    return obj.errors().length === 0;
                };
                obj.isAnyMessageShown = function() {
                    var invalidAndModifiedPresent = false;
                    
                    // ensure we have latest changes
                    result();
                    
                    ko.utils.arrayForEach(validatables(), function (observable) {
                        if (!observable.isValid() && observable.isModified()) {
                            invalidAndModifiedPresent = true;
                        }
                    });
                    return invalidAndModifiedPresent;
                };

                return result;
            },

            formatMessage: function (message, params) {
                return message.replace(/\{0\}/gi, params);
            },

            // addRule:
            // This takes in a ko.observable and a Rule Context - which is just a rule name and params to supply to the validator
            // ie: ko.validation.addRule(myObservable, {
            //          rule: 'required',
            //          params: true
            //      });
            //
            addRule: function (observable, rule) {
                observable.extend({ validatable: true });

                //push a Rule Context to the observables local array of Rule Contexts
                observable.rules.push(rule);
                return observable;
            },

            // addAnonymousRule:
            // Anonymous Rules essentially have all the properties of a Rule, but are only specific for a certain property
            // and developers typically are wanting to add them on the fly or not register a rule with the 'ko.validation.rules' object
            //
            // Example:
            // var test = ko.observable('something').extend{(
            //      validation: {
            //          validator: function(val, someOtherVal){
            //              return true;
            //          },
            //          message: "Something must be really wrong!',
            //          params: true
            //      }
            //  )};
            addAnonymousRule: function (observable, ruleObj) {
                var ruleName = utils.newId();

                if ( ruleObj['message'] === undefined ) {
                    rulesObj['message'] = 'Error';
                }

                //Create an anonymous rule to reference
                ko.validation.rules[ruleName] = ruleObj;

                //add the anonymous rule to the observable
                ko.validation.addRule(observable, {
                    rule: ruleName,
                    params: ruleObj.params
                });
            },

            addExtender: function (ruleName) {
                ko.extenders[ruleName] = function (observable, params) {
                    //params can come in a few flavors
                    // 1. Just the params to be passed to the validator
                    // 2. An object containing the Message to be used and the Params to pass to the validator
                    // 3. A condition when the validation rule to be applied
                    //
                    // Example:
                    // var test = ko.observable(3).extend({
                    //      max: {
                    //          message: 'This special field has a Max of {0}',
                    //          params: 2,
                    //          onlyIf: function() {
                    //                      return specialField.IsVisible();
                    //                  }  
                    //      }
                    //  )};
                    //
                    if (params.message || params.onlyIf) { //if it has a message or condition object, then its an object literal to use
                        return ko.validation.addRule(observable, {
                            rule: ruleName,
                            message: params.message,
                            params: utils.isEmptyVal(params.params) ? true : params.params,
                            condition: params.onlyIf
                        });
                    } else {
                        return ko.validation.addRule(observable, {
                            rule: ruleName,
                            params: params
                        });
                    }
                };
            },

            // loops through all ko.validation.rules and adds them as extenders to
            // ko.extenders
            registerExtenders: function () { // root extenders optional, use 'validation' extender if would cause conflicts
                if (configuration.registerExtenders) {
                    for (var ruleName in ko.validation.rules) {
                        if (ko.validation.rules.hasOwnProperty(ruleName)) {
                            if (!ko.extenders[ruleName]) {
                                ko.validation.addExtender(ruleName);
                            }
                        }
                    }
                }
            },

            //creates a span next to the @element with the specified error class
            insertValidationMessage: function (element) {
                var span = document.createElement('SPAN');
                span.className = utils.getConfigOptions(element).errorMessageClass;
                utils.insertAfter(element, span);
                return span;
            },

            // if html-5 validation attributes have been specified, this parses
            // the attributes on @element
            parseInputValidationAttributes: function (element, valueAccessor) {
                ko.utils.arrayForEach(html5Attributes, function (attr) {
                    if (utils.hasAttribute(element, attr)) {
                        ko.validation.addRule(valueAccessor(), {
                            rule: attr,
                            params: element.getAttribute(attr) || true
                        });
                    }
                });
            },

            // writes html5 validation attributes on the element passed in
            writeInputValidationAttributes: function (element, valueAccessor) {
                var observable = valueAccessor();

                if (!observable || !observable.rules) {
                    return;
                }

                var contexts = observable.rules(); // observable array

                // loop through the attributes and add the information needed
                ko.utils.arrayForEach(html5Attributes, function (attr) {
                    var params;
                    var ctx = ko.utils.arrayFirst(contexts, function (ctx) {
                        return ctx.rule.toLowerCase() === attr.toLowerCase();
                    });

                    if (!ctx)
                        return;

                    params = ctx.params;

                    // we have to do some special things for the pattern validation
                    if (ctx.rule == "pattern") {
                        if (ctx.params instanceof RegExp) {
                            params = ctx.params.source; // we need the pure string representation of the RegExpr without the //gi stuff
                        }
                    }

                    // we have a rule matching a validation attribute at this point
                    // so lets add it to the element along with the params
                    element.setAttribute(attr, params);
                });

                contexts = null;
            }
        };
    } ());
    //#endregion

    //#region Core Validation Rules

    //Validation Rules:
    // You can view and override messages or rules via:
    // ko.validation.rules[ruleName]
    //
    // To implement a custom Rule, simply use this template:
    // ko.validation.rules['<custom rule name>'] = {
    //      validator: function (val, param) {
    //          <custom logic>
    //          return <true or false>;
    //      },
    //      message: '<custom validation message>' //optionally you can also use a '{0}' to denote a placeholder that will be replaced with your 'param'
    // };
    //
    // Example:
    // ko.validation.rules['mustEqual'] = {
    //      validator: function( val, mustEqualVal ){
    //          return val === mustEqualVal;
    //      },
    //      message: 'This field must equal {0}'
    // };
    //
    ko.validation.rules = {};
    ko.validation.rules['required'] = {
        validator: function (val, required) {
            var stringTrimRegEx = /^\s+|\s+$/g,
                testVal;

            if (val === undefined || val === null) {
                return !required;
            }

            testVal = val;
            if (typeof (val) == "string") {
                testVal = val.replace(stringTrimRegEx, '');
            }

            return required && (testVal + '').length > 0;
        },
        message: 'This field is required.'
    };

    ko.validation.rules['min'] = {
        validator: function (val, min) {
            return utils.isEmptyVal(val) || val >= min;
        },
        message: 'Please enter a value greater than or equal to {0}.'
    };

    ko.validation.rules['max'] = {
        validator: function (val, max) {
            return utils.isEmptyVal(val) || val <= max;
        },
        message: 'Please enter a value less than or equal to {0}.'
    };

    ko.validation.rules['minLength'] = {
        validator: function (val, minLength) {
            return utils.isEmptyVal(val) || val.length >= minLength;
        },
        message: 'Please enter at least {0} characters.'
    };

    ko.validation.rules['maxLength'] = {
        validator: function (val, maxLength) {
            return utils.isEmptyVal(val) || val.length <= maxLength;
        },
        message: 'Please enter no more than {0} characters.'
    };

    ko.validation.rules['pattern'] = {
        validator: function (val, regex) {
            return utils.isEmptyVal(val) || val.match(regex) != null;
        },
        message: 'Please check this value.'
    };

    ko.validation.rules['step'] = {
        validator: function (val, step) {

            // in order to handle steps of .1 & .01 etc.. Modulus won't work
            // if the value is a decimal, so we have to correct for that
            return utils.isEmptyVal(val) || (val * 100) % (step * 100) === 0;
        },
        message: 'The value must increment by {0}'
    };

    ko.validation.rules['email'] = {
        validator: function (val, validate) {
            //I think an empty email address is also a valid entry
            //if one want's to enforce entry it should be done with 'required: true'
            return utils.isEmptyVal(val) || (
                validate && /^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(val)
            );
        },
        message: 'Please enter a proper email address'
    };

    ko.validation.rules['date'] = {
        validator: function (value, validate) {
            return utils.isEmptyVal(value) || (validate && !/Invalid|NaN/.test(new Date(value)));
        },
        message: 'Please enter a proper date'
    };

    ko.validation.rules['dateISO'] = {
        validator: function (value, validate) {
            return utils.isEmptyVal(value) || (validate && /^\d{4}[\/-]\d{1,2}[\/-]\d{1,2}$/.test(value));
        },
        message: 'Please enter a proper date'
    };

    ko.validation.rules['number'] = {
        validator: function (value, validate) {
            return utils.isEmptyVal(value) || (validate && /^-?(?:\d*|\d{1,3}(?:,\d{3})+)(?:\.\d+)?$/.test(value));
        },
        message: 'Please enter a number'
    };

    ko.validation.rules['digit'] = {
        validator: function (value, validate) {
            return utils.isEmptyVal(value) || (validate && /^\d+$/.test(value));
        },
        message: 'Please enter a digit'
    };

    ko.validation.rules['phoneUS'] = {
        validator: function (phoneNumber, validate) {
            this.message = ko.T('common.pleaseSpecifyValidPhoneNumber');
            // check if it is empty first
            if (utils.isEmptyVal(phoneNumber)) { return true; } // makes it optional, use 'required' rule if it should be required
            if (typeof (phoneNumber) !== 'string') { return false; }
            phoneNumber = phoneNumber.replace(/\s+/g, "");
            return validate && phoneNumber.length > 9 && phoneNumber.match(/^(1-?)?(\([2-9]\d{2}\)|[2-9]\d{2})-?[2-9]\d{2}-?\d{4}$/);
        }
    };

    ko.validation.rules['phoneNumber'] = {
        validator: function (value, validate) {
            this.message = ko.T('common.pleaseSpecifyValidPhoneNumber');
            if (!value) return false;
            value = value.replace(/\D/g, '');
            return (value.length >= 10) && (value.length <= 13);
        }
    };

    ko.validation.rules['equal'] = {
        validator: function (val, params) {
            var otherValue = params;
            return val === utils.getValue(otherValue);
        },
        message: 'Values must equal'
    };

    ko.validation.rules['notEqual'] = {
        validator: function (val, params) {
            var otherValue = params;
            return val !== utils.getValue(otherValue);
        },
        message: 'Please choose another value.'
    };

    //unique in collection
    // options are:
    //    collection: array or function returning (observable) array
    //              in which the value has to be unique
    //    valueAccessor: function that returns value from an object stored in collection
    //              if it is null the value is compared directly
    //    external: set to true when object you are validating is automatically updating collection
    ko.validation.rules['unique'] = {
        validator: function (val, options) {
            var c = utils.getValue(options.collection),
                external = utils.getValue(options.externalValue),
                counter = 0;

            if (!val || !c) return true;

            ko.utils.arrayFilter(ko.utils.unwrapObservable(c), function (item) {
                if (val === (options.valueAccessor ? options.valueAccessor(item) : item)) counter++;
            });
            // if value is external even 1 same value in collection means the value is not unique
            return counter < (external !== undefined && val !== external ? 1 : 2);
        },
        message: 'Please make sure the value is unique.'
    };


    //now register all of these!
    (function () {
        ko.validation.registerExtenders();
    } ());

    //#endregion

    //#region Knockout Binding Handlers

    // The core binding handler
    // this allows us to setup any value binding that internally always
    // performs the same functionality
    ko.bindingHandlers['validationCore'] = (function () {

        return {
            init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                var config = utils.getConfigOptions(element);

                // parse html5 input validation attributes, optional feature
                if (config.parseInputAttributes) {
                    async(function () { ko.validation.parseInputValidationAttributes(element, valueAccessor) });
                }

                // if requested insert message element and apply bindings
                if (config.insertMessages && utils.isValidatable(valueAccessor())) {

                    // insert the <span></span>
                    var validationMessageElement = ko.validation.insertValidationMessage(element);

                    // if we're told to use a template, make sure that gets rendered
                    if (config.messageTemplate) {
                        ko.renderTemplate(config.messageTemplate, { field: valueAccessor() }, null, validationMessageElement, 'replaceNode');
                    } else {
                        ko.applyBindingsToNode(validationMessageElement, { validationMessage: valueAccessor() });
                    }
                }

                // write the html5 attributes if indicated by the config
                if (config.writeInputAttributes && utils.isValidatable(valueAccessor())) {

                    ko.validation.writeInputValidationAttributes(element, valueAccessor);
                }

                // if requested, add binding to decorate element
                if (config.decorateElement && utils.isValidatable(valueAccessor())) {
                    ko.applyBindingsToNode(element, { validationElement: valueAccessor() });
                }
            },

            update: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                // hook for future extensibility
            }
        };

    }());

    // override for KO's default 'value' binding
    (function () {
        var init = ko.bindingHandlers['value'].init;

        ko.bindingHandlers['value'].init = function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {

            init(element, valueAccessor, allBindingsAccessor);

            return ko.bindingHandlers['validationCore'].init(element, valueAccessor, allBindingsAccessor, viewModel, bindingContext);
        };
    } ());


    ko.bindingHandlers['validationMessage'] = { // individual error message, if modified or post binding
        update: function (element, valueAccessor) {
            var obsv = valueAccessor(),
                config = utils.getConfigOptions(element),
                val = ko.utils.unwrapObservable(obsv),
                msg = null,
                isModified = false,
                isValid = false;
                
            obsv.extend({ validatable: true });

            isModified = obsv.isModified();
            isValid = obsv.isValid();
            
            // create a handler to correctly return an error message
            var errorMsgAccessor = function () {
                if (!config.messagesOnModified || isModified) {
                    return isValid ? null : obsv.error;
                } else {
                    return null;
                }
            };

            //toggle visibility on validation messages when validation hasn't been evaluated, or when the object isValid
            var visiblityAccessor = function () {
                return isModified ? !isValid : false;
            };

            ko.bindingHandlers.text.update(element, errorMsgAccessor);
            ko.bindingHandlers.visible.update(element, visiblityAccessor);
        }
    };

    ko.bindingHandlers['validationElement'] = {
        update: function (element, valueAccessor) {
            var obsv = valueAccessor(),
                config = utils.getConfigOptions(element),
                val = ko.utils.unwrapObservable(obsv),
                msg = null,
                isModified = false,
                isValid = false;

            obsv.extend({ validatable: true });

            isModified = obsv.isModified();
            isValid = obsv.isValid();

            // create an evaluator function that will return something like:
            // css: { validationElement: true }
            var cssSettingsAccessor = function () {
                var css = {};

                var shouldShow = (isModified ? !isValid : false);

                if (!config.decorateElement) { shouldShow = false; }

                // css: { validationElement: false }
                css[config.errorElementClass] = shouldShow;

                return css;
            };

            //add or remove class on the element;
            ko.bindingHandlers.css.update(element, cssSettingsAccessor);
        }
    };

    // ValidationOptions:
    // This binding handler allows you to override the initial config by setting any of the options for a specific element or context of elements
    //
    // Example:
    // <div data-bind="validationOptions: { insertMessages: true, messageTemplate: 'customTemplate', errorMessageClass: 'mySpecialClass'}">
    //      <input type="text" data-bind="value: someValue"/>
    //      <input type="text" data-bind="value: someValue2"/>
    // </div>
    ko.bindingHandlers['validationOptions'] = (function () {
        return {
            init: function (element, valueAccessor, allBindingsAccessor, viewModel, bindingContext) {
                var options = ko.utils.unwrapObservable(valueAccessor());
                if (options) {
                    var newConfig = ko.utils.extend({}, configuration);
                    ko.utils.extend(newConfig, options);

                    //store the validation options on the node so we can retrieve it later
                    utils.setDomData(element, newConfig);
                }
            }
        };
    } ());
    //#endregion

    //#region Knockout Extenders

    // Validation Extender:
    // This is for creating custom validation logic on the fly
    // Example:
    // var test = ko.observable('something').extend{(
    //      validation: {
    //          validator: function(val, someOtherVal){
    //              return true;
    //          },
    //          message: "Something must be really wrong!',
    //          params: true
    //      }
    //  )};
    ko.extenders['validation'] = function (observable, rules) { // allow single rule or array
        ko.utils.arrayForEach(utils.isArray(rules) ? rules : [rules], function (rule) {
            // the 'rule' being passed in here has no name to identify a core Rule,
            // so we add it as an anonymous rule
            // If the developer is wanting to use a core Rule, but use a different message see the 'addExtender' logic for examples
            ko.validation.addAnonymousRule(observable, rule);
        });
        return observable;
    };

    //This is the extender that makes a Knockout Observable also 'Validatable'
    //examples include:
    // 1. var test = ko.observable('something').extend({validatable: true});
    // this will ensure that the Observable object is setup properly to respond to rules
    //
    // 2. test.extend({validatable: false});
    // this will remove the validation properties from the Observable object should you need to do that.
    ko.extenders['validatable'] = function (observable, enable) {
        if (enable && !utils.isValidatable(observable)) {

            observable.error = null; // holds the error message, we only need one since we stop processing validators when one is invalid

            // observable.rules:
            // ObservableArray of Rule Contexts, where a Rule Context is simply the name of a rule and the params to supply to it
            //
            // Rule Context = { rule: '<rule name>', params: '<passed in params>', message: '<Override of default Message>' }
            observable.rules = ko.observableArray(); //holds the rule Contexts to use as part of validation

            //in case async validation is occuring
            observable.isValidating = ko.observable(false);

            //the true holder of whether the observable is valid or not
            observable.__valid__ = ko.observable(true);

            observable.isModified = ko.observable(false);

            // we use a computed here to ensure that anytime a dependency changes, the
            // validation logic evaluates
            var h_obsValidationTrigger = ko.computed(function () {
                var obs = observable(),
                    ruleContexts = observable.rules();

                ko.validation.validateObservable(observable);

                return true;
            });

            // a semi-protected observable
            observable.isValid = ko.computed(function () {
                return observable.__valid__();
            });

            //subscribe to changes in the observable
            var h_change = observable.subscribe(function () {
                observable.isModified(true);
            });

            observable._disposeValidation = function () {
                //first dispose of the subscriptions
                observable.isValid.dispose();
                observable.rules.removeAll();
                observable.isModified._subscriptions['change'] = [];
                observable.isValidating._subscriptions['change'] = [];
                observable.__valid__._subscriptions['change'] = [];
                h_change.dispose();
                h_obsValidationTrigger.dispose();

                delete observable['rules'];
                delete observable['error'];
                delete observable['isValid'];
                delete observable['isValidating'];
                delete observable['__valid__'];
                delete observable['isModified'];
            };
        } else if (enable === false && utils.isValidatable(observable)) {

            if (observable._disposeValidation) {
                observable._disposeValidation();
            }
        }
        return observable;
    };

    function validateSync(observable, rule, ctx) {
        //Execute the validator and see if its valid
        if (!rule.validator(observable(), ctx.params === undefined ? true : ctx.params)) { // default param is true, eg. required = true

            //not valid, so format the error message and stick it in the 'error' variable
            observable.error = ko.validation.formatMessage(ctx.message || rule.message, ctx.params);
            observable.__valid__(false);
            return false;
        } else {
            return true;
        }
    }

    function validateAsync(observable, rule, ctx) {
        observable.isValidating(true);

        var callBack = function (valObj) {
            var isValid = false,
                msg = '';

            if (!observable.__valid__()) {

                // since we're returning early, make sure we turn this off
                observable.isValidating(false);

                return; //if its already NOT valid, don't add to that
            }

            //we were handed back a complex object
            if (valObj['message']) {
                isValid = valObj.isValid;
                msg = valObj.message;
            } else {
                isValid = valObj;
            }

            if (!isValid) {
                //not valid, so format the error message and stick it in the 'error' variable
                observable.error = ko.validation.formatMessage(msg || ctx.message || rule.message, ctx.params);
                observable.__valid__(isValid);
            }

            // tell it that we're done
            observable.isValidating(false);
        };

        //fire the validator and hand it the callback
        rule.validator(observable(), ctx.params || true, callBack);
    }

    ko.validation.validateObservable = function (observable) {
        var i = 0,
            rule, // the rule validator to execute
            ctx, // the current Rule Context for the loop
            ruleContexts = observable.rules(), //cache for iterator
            len = ruleContexts.length; //cache for iterator

        for (; i < len; i++) {

            //get the Rule Context info to give to the core Rule
            ctx = ruleContexts[i];

            // checks an 'onlyIf' condition
            if (ctx.condition && !ctx.condition())
                continue;

            //get the core Rule to use for validation
            rule = ko.validation.rules[ctx.rule];

            if (rule['async'] || ctx['async']) {
                //run async validation
                validateAsync(observable, rule, ctx);

            } else {
                //run normal sync validation
                if (!validateSync(observable, rule, ctx)) {
                    return false; //break out of the loop
                }
            }
        }
        //finally if we got this far, make the observable valid again!
        observable.error = null;
        observable.__valid__(true);
        return true;
    };

    //#endregion

    //#region Validated Observable

    ko.validatedObservable = function (initialValue) {
        if (!ko.validation.utils.isObject(initialValue)) { return ko.observable(initialValue).extend({ validatable: true }); }

        var obsv = ko.observable(initialValue);
        obsv.errors = ko.validation.group(initialValue);
        obsv.isValid = ko.computed(function () {
            return obsv.errors().length === 0;
        });

        return obsv;
    };

    //#endregion

    //#region Localization

    //quick function to override rule messages
    ko.validation.localize = function (msgTranslations) {

        var msg, rule;

        //loop the properties in the object and assign the msg to the rule
        for (rule in msgTranslations) {
            if (ko.validation.rules.hasOwnProperty(rule)) {
                ko.validation.rules[rule].message = msgTranslations[rule];
            }
        }
    };
    //#endregion

    //#region ApplyBindings Added Functionality
    ko.applyBindingsWithValidation = function (viewModel, rootNode, options) {
        var len = arguments.length,
            node, config;

        if (len > 2) { // all parameters were passed
            node = rootNode;
            config = options;
        } else if (len < 2) {
            node = document.body;
        } else { //have to figure out if they passed in a root node or options
            if (arguments[1].nodeType) { //its a node
                node = rootNode;
            } else {
                config = arguments[1];
            }
        }

        ko.validation.init();

        if (config) { ko.validation.utils.setDomData(node, config); }

        ko.applyBindings(viewModel, rootNode);
    };

    //override the original applyBindings so that we can ensure all new rules and what not are correctly registered
    var origApplyBindings = ko.applyBindings;
    ko.applyBindings = function (viewModel, rootNode) {

        ko.validation.init();

        origApplyBindings(viewModel, rootNode);
    };

    //#endregion

    exports.ko = exports.ko || {};
    exports.ko.validation = ko.validation;
});

define('knockout.validation.extenders',['jquery', 'knockout', 'knockout.validation'], (function ($, ko) {
    ko.validation.rules['uniqueName'] = {
        validateIfEqual: function (val1, val2) {
            if (val1 == null || val2 == null) return false;

            return val1.toString().toUpperCase().trim() == val2.toString().toUpperCase().trim();
        },
        validator: function (val, options) {

            this.message = ko.T('common.nameMustBeUnique');

            var self = this;

            options.array = options.array || [];

            //throw new Error("Option array is required for 'uniqueName' validator.");

            if (options.ignore == null)
                options.ignore = [];

            var ignoreArray = [];
            
            if (ko.isObservable(options.ignore)) {
                if ($.isArray(options.ignore()))
                    ignoreArray = options.ignore();
                else
                    ignoreArray.push(options.ignore());
            } else {
                if ($.isArray(options.ignore))
                    ignoreArray = options.ignore;
                else
                    ignoreArray.push(options.ignore);
            }

            var shouldBeIgnored = Enumerable.From(ignoreArray).Any(function(i) {
                return self.validateIfEqual(i, val);
            });

            var presentInArray = Enumerable.From(options.array).Any(function(el) {
                return self.validateIfEqual(el, val);
            });

            return shouldBeIgnored || !presentInArray;
        }
    };

    ko.validation.rules['arrayElementUniqueProperty'] = {
        validateIfEqual: function (val1, val2) {
            if (val1 == null || val2 == null) return false;

            return val1.toString().toUpperCase() == val2.toString().toUpperCase();
        },
        setError: function(observable, message) {
            if (observable.error == null) {
                observable.error = message;
                observable.__valid__(false);
                observable.isModified(true);
            }
        },
        clearError: function(observable, message) {
            if (observable.error == message) {
                observable.error = null;
                observable.__valid__(true);
            }
        },
        validator: function (val, options) {

            this.message = ko.T('common.allArrayElementsMustBeUnique');

            var self = this;

            if (options.propertyName == null)
                throw new Error('Option "propertyName" is required.');

            var allUnique = true;
            var invalidNames = [];
            for (var i = 0; i < val.length; i++) {
                self.clearError(val[i][options.propertyName], options.errorMessage);
                for (var j = i + 1; j < val.length; j++) {
                    if (self.validateIfEqual(ko.utils.unwrapObservable(val[i][options.propertyName]), ko.utils.unwrapObservable(val[j][options.propertyName]))) {
                        allUnique = false;
                        invalidNames.push(val[i][options.propertyName]);
                        invalidNames.push(val[j][options.propertyName]);
                    }
                }
            }

            invalidNames.forEach(function(name) {
                self.setError(name, options.errorMessage);
            });

            return allUnique;
        }
    };

    ko.validation.rules['localizationUniqueProperty'] = {
        setError: function (observable, message) {
            if (observable.error == null) {
                observable.error = message;
                observable.__valid__(false);
                observable.isModified(true);
            }
        },
        clearError: function (observable, message) {
            if (observable.error == message) {
                observable.error = null;
                observable.__valid__(true);
            }
        },
        validator: function (val, options) {

            this.message = ko.T('common.allArrayElementsMustBeUnique');

            if (!val || !val.length) {
                return true;
            }

            var self = this,
                allUnique = true,
                invalidNames = [],
                languageIds = val[0].names().map(function (elem) { return elem.languageId; }),
                localName,
                localType,
                localization,
                uniqueValues = [],
                foundUniqueNames = [],
                nameObservableInstance;
            
            languageIds.forEach(function (langId) {

                uniqueValues = [];

                val.forEach(function (item) {

                    self.clearError(item.name, options.errorMessage);

                    localization = item.names().filter(function (nameObj) {
                        return nameObj.languageId === langId;
                    });

                    if (localization && localization.length && localization[0].name()) {

                        nameObservableInstance = item.name;
                        localName = localization[0].name().toUpperCase();
                        localType = item.itemModifierTypeCode();

                        foundUniqueNames = uniqueValues.filter(
                            /**
                             * @param {object} uniqueValue
                             * @param {string} uniqueValue.name
                             * @param {number} uniqueValue.typeCode
                             * @returns {boolean}
                             */
                            function (uniqueValue) {
                                return uniqueValue.name == localName && uniqueValue.typeCode == localType;
                            }
                        );

                        if (foundUniqueNames.length > 0) {

                            invalidNames.push(item.name);

                            foundUniqueNames.forEach(function (foundUniqueName) {
                                if (invalidNames.indexOf(foundUniqueName.nameObservableInstance) === -1) {
                                    invalidNames.push(foundUniqueName.nameObservableInstance);
                                }
                            });

                            allUnique = false;

                        } else {
                            if (item.name()) {
                                uniqueValues.push({
                                    name: item.name().toUpperCase(),
                                    typeCode: localType,
                                    nameObservableInstance: nameObservableInstance
                                });
                            }
                        }
                    }
                });
            });

            invalidNames.forEach(function (name) {
                self.setError(name, options.errorMessage);
            });

            return allUnique;
        }
    };


    ko.validation.rules['upc'] = {
        validator: function (val) {

            this.message = ko.T('common.upcIsInvalid');

            if (val != null) {
                var upcRegex = /^(\d{8}|\d{12,13})?$/i;
                return upcRegex.test(val);
            }

            return true;
        }
    };

    ko.validation.rules['upc2'] = {
        validator: function (val) {

            this.message = ko.T('common.upcIsInvalid');

            if (val != null) {
                var upcRegex = /^([a-z0-9]{1,20})?$/i;
                return upcRegex.test(val);
            }

            return true;
        }
    };

    ko.validation.rules['greaterThan'] = {
        validator: function (val, other) {

            this.message = ko.T('common.mustBeGreaterThanOrEqual');

            if (val != null && val != "" && other != null) {
                var first = parseInt(val);
                var second = parseInt(ko.unwrap(other));
                if (!isNaN(first) && !isNaN(second)) {
                    return first > second;
                }
            }

            return true;
        }
    };

    ko.validation.rules['percent'] = {
        validator: function (val) {

            this.message = ko.T('common.valueMustBeValidPercent');

            if (val != null) {
                var percent = Number(val);
                return percent >= 0 && percent <= 100;
            }

            return true;
        }
    };

    ko.validation.rules['website'] = {
        validator: function (val) {

            this.message = ko.T('common.websiteIsInvalid');

            if (val) {
                var websiteRegexp = new RegExp("^(https?|ftp):\\/\\/(((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:)*@)?(((\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5])\\.(\\d|[1-9]\\d|1\\d\\d|2[0-4]\\d|25[0-5]))|((([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|\\d|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.)+(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])*([a-z]|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])))\\.?)(:\\d*)?)(\\/((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)+(\\/(([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)*)*)?)?(\\?((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|[\\uE000-\\uF8FF]|\\/|\\?)*)?(\\#((([a-z]|\\d|-|\\.|_|~|[\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF])|(%[\\da-f]{2})|[!\\$&'\\(\\)\\*\\+,;=]|:|@)|\\/|\\?)*)?$", 'i');
                return websiteRegexp.test(val);
            }

            return true;
        }
    };


    ko.validation.rules['url'] = {
        validator: function (val, required) {

            this.message = ko.T('common.thisFieldHasToBeValidURL');

            if (!val) {
                return !required;
            }
            val = val.replace(/^\s+|\s+$/, ''); //Strip whitespace
            //Regex by Diego Perini from: http://mathiasbynens.be/demo/url-regex
            return val.match(/^(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!10(?:\.\d{1,3}){3})(?!127(?:\.‌​\d{1,3}){3})(?!169\.254(?:\.\d{1,3}){2})(?!192\.168(?:\.\d{1,3}){2})(?!172\.(?:1[‌​6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1‌​,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00‌​a1-\uffff0-9]+-?)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]+-?)*[a-z\u‌​00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,})))(?::\d{2,5})?(?:\/[^\s]*)?$/i);
        }
    };

    ko.validation.rules['range'] = {
        defaults: {
            maxValue: null,
            includeMaxValue: false,
            minValue: null,
            includeMinValue: false,
            onlyInteger: false
        },

        validator: function (value, options) {

            this.message = ko.T('common.numberIsNotInRange');

            var opts = $.extend({}, this.defaults, options),
                val = Number(value);

            if (isNaN(val)) return false;

            var lessThanMaxValue = true;
            if (opts.maxValue != null) {
                lessThanMaxValue = opts.includeMaxValue ? val <= opts.maxValue : val < opts.maxValue;
            }

            var biggerThanMinValue = true;
            if (opts.minValue != null) {
                biggerThanMinValue = opts.includeMinValue ? val >= opts.minValue : val > opts.minValue;
            }

            var integerSatisfied = true;
            if (opts.onlyInteger) {
                integerSatisfied = (val - Math.floor(val) === 0);
            }

            return lessThanMaxValue && biggerThanMinValue && integerSatisfied;
        }
    };

    ko.validation.rules['lessThan'] = {
        defaults: {
            target: null,
            canBeEqual: false
        },
        validator: function (val, options) {

            this.message = ko.T('common.fieldShouldBeLessThan');

            var params = options.params || options;
            var opts = $.extend({}, this.defaults, params);
            val = Number(val);

            if (isNaN(val)) return true;

            if (opts.target != null) {
                var targetVal = ko.utils.unwrapObservable(opts.target);
                var self = this;

                var validateInternal = function(targetValue) {
                    if (targetValue != null && targetValue !== '') {
                        if (opts.message) {
                            var msg = opts.message;
                            msg = msg.replace(/\{0\}/gi, Number(targetValue));
                            self.message = msg;
                        } else
                            self.message = ko.T('common.fieldShouldBeLessThan') + ' ' + targetValue;
                        return opts.canBeEqual ? val <= targetValue : val < targetValue;
                    }
                    return true;
                };

                return validateInternal(targetVal);
            }

            return true;
        }
    };

    ko.validation.rules['pin'] = {
        validator: function (val) {

            this.message = ko.T('common.invalidPin');

            if (val != null) {
                var upcRegex = /^(\d{6})?|(\*{6})?$/i;
                return upcRegex.test(val);
            }

            return true;
        }
    };


    ko.validation.rules['conditionalRequired'] = {
        validator: function (val, required) {

            this.message = ko.T('common.thisFieldIsRequired');

            var stringTrimRegEx = /^\s+|\s+$/g,
                testVal;

            if (val === undefined || val === null) {
                return !required;
            }

            testVal = val;
            if (typeof (val) == "string") {
                testVal = val.replace(stringTrimRegEx, '');
            }

            return !required || (testVal + '').length > 0;
        }
    };

    ko.validation.rules['step'] = {
        validator: function (val, step) {
            if (ko.validation.utils.isEmptyVal(val) || step === 'any')
                return true;

            var nStep = parseFloat(step);
            if (isNaN(nStep) || nStep <= 0)
                return true; // invalid step

            var d = this._decimalPlaces(nStep);
            var prec = Math.pow(10, d);

            var v = new Number(val) * prec;
            var v1 = parseFloat(v.toFixed(0));
            var v2 = v;
            if (v1 !== v2 && (v2 - v1) != 1.4210854715202004e-14 && (v2 - v1) != -1.4210854715202004e-14)
                return false; // 'val' has more decimal places than 'step'

            nStep = parseFloat((nStep * prec).toFixed(0));

            return (v1 % nStep) === 0;
        },
        message: 'The value must increment by {0}',
        _decimalPlaces: function (num) {  //Helper Funktion: determines the number of decimals
            var match = ('' + num).match(/(?:\.(\d+))?(?:[eE]([+-]?\d+))?$/);
            if (!match) { return 0; }
            return Math.max(
                 0,
                 // Number of digits right of decimal point.
                 (match[1] ? match[1].length : 0)
                 // Adjust for scientific notation.
                 - (match[2] ? +match[2] : 0));
        }
    }

    ko.validation.rules['areSame'] = {
        getValue: function (o) {
            return (typeof o === 'function' ? o() : o);
        },
        validator: function (val, options) {
            var params = options.params || options;
            if (params.target) {
                return val === this.getValue(params.target);
            } else {
                return val === this.getValue(params);
            }
        },
        message: 'The fields must have the same value'
    };

    ko.validation.registerExtenders();
}));
(function (factory) {
    if (typeof exports === 'object') {
        // CommonJS
        factory(exports, require('knockout'));
    } else if (typeof define === 'function' && define.amd) {
        // AMD (anonymous module)        
        define('ko.localBindings', ['exports', 'knockout'], factory);
    } else {
        // export to global
        factory(window, window.knockout || window.ko);
    }
})(function (exports, ko) {

    ko.local = ko.T = function (key, lang, param) {
        return ko.lang ? ko.lang.getString(key, lang, param) : null;
    };

    ko.bindingHandlers.local = {
        init: function (element, valueAccessor, allBindingsAccessor) {

            var lang = allBindingsAccessor().lang;
            var key = ko.unwrap(valueAccessor());
            var localString = ko.T(key, lang);

            if (allBindingsAccessor().localAttr) {
                element.setAttribute(allBindingsAccessor().localAttr, localString);
            }
            else if (element.tagName === 'INPUT') {
                element.value = localString;
            }
            else {
                element.textContent = localString;
            }
        },
        update: function (element, valueAccessor, allBindings, viewModel, context) {
            return ko.bindingHandlers.value.update(element, valueAccessor, allBindings, viewModel, context);
        }
    };

    ko.bindingHandlers.currency = {
        init: function (element, valueAccessor, allBindingsAccessor) {
            var currencyCode = ko.unwrap(allBindingsAccessor().currencyCode);

            var value = ko.unwrap(valueAccessor());
            if (ko.formatCurrency) {
                $(element).text(ko.formatCurrency(value, currencyCode));
            } else {
                $(element).text(value);
            }

        },
        update: function (element, valueAccessor, allBindingsAccessor, viewModel, context) {
            var currencyCode = ko.unwrap(allBindingsAccessor().currencyCode);

            var value = ko.unwrap(valueAccessor());
            if (ko.formatCurrency) {
                $(element).text(ko.formatCurrency(value, currencyCode));
            } else {
                $(element).text(value);
            }
        }
    }


    ko.bindingHandlers.currencyVal = {
        init: function (element, valueAccessor, allBindings, viewModel, context) {
            ko.bindingHandlers.value.init(element, valueAccessor, allBindings, viewModel, context);

            var value = valueAccessor();

            var formatCurrency = function () {
                var val = ko.unwrap(value);

                $(element).val(ko.numeric.formatCurrency(ko.numeric.toNumber(val)));
            }

            formatCurrency();

            $(element).on('focus', function () {
                var val1 = ko.unwrap(value);

                $(element).val(ko.numeric.toNumber(val1));
            });

            $(element).on('blur', function () {
                formatCurrency();
            });
        },

        update: function (element, valueAccessor, allBindings, viewModel, context) {
            //      return ko.bindingHandlers.value.update(element, valueAccessor, allBindings, viewModel, context);
        }
    };

    function formatNumber(value) {
        return value.toString().replace(/\d(?=(\d{3})+(\.|\,|$))/g, '$&,');
    }

    ko.bindingHandlers.formatNumber = {
        init: function (element, valueAccessor, allBindingsAccessor) {

            var value = ko.unwrap(valueAccessor());
            $(element).text(formatNumber(value));
        },
        update: function (element, valueAccessor, allBindings, viewModel, context) {
            var value = ko.unwrap(valueAccessor());
            $(element).text(formatNumber(value));

        }
    };

    ko.extenders.amount = function (target, option) {
        target.amount = ko.computed({
            read: function () {
                if (ko.numeric) {
                    if (!this()) {
                        return ko.formatCurrency(0, option.currency, true);
                    }
                    return ko.formatCurrency(this(), option.currency, true);
                } else {
                    if (!this()) {
                        return '0.00';
                    }
                    return formatNumber(Number(this()).toFixed(2));
                }


            },
            write: function (value) {
                if (ko.numeric) {
                    this(ko.numeric.toNumber(value));
                } else {
                    this(Number(value.toString().replace(/,/g, '')));
                }

            },
            owner: target
        });

        return target;
    };


    exports.ko = exports.ko || {};
    exports.ko.localBindings = ko.localBindings;
});
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/jakearchibald/es6-promise/master/LICENSE
 * @version   2.0.0
 */

(function(){function r(a,b){n[l]=a;n[l+1]=b;l+=2;2===l&&A()}function s(a){return"function"===typeof a}function F(){return function(){process.nextTick(t)}}function G(){var a=0,b=new B(t),c=document.createTextNode("");b.observe(c,{characterData:!0});return function(){c.data=a=++a%2}}function H(){var a=new MessageChannel;a.port1.onmessage=t;return function(){a.port2.postMessage(0)}}function I(){return function(){setTimeout(t,1)}}function t(){for(var a=0;a<l;a+=2)(0,n[a])(n[a+1]),n[a]=void 0,n[a+1]=void 0;
l=0}function p(){}function J(a,b,c,d){try{a.call(b,c,d)}catch(e){return e}}function K(a,b,c){r(function(a){var e=!1,f=J(c,b,function(c){e||(e=!0,b!==c?q(a,c):m(a,c))},function(b){e||(e=!0,g(a,b))});!e&&f&&(e=!0,g(a,f))},a)}function L(a,b){1===b.a?m(a,b.b):2===a.a?g(a,b.b):u(b,void 0,function(b){q(a,b)},function(b){g(a,b)})}function q(a,b){if(a===b)g(a,new TypeError("You cannot resolve a promise with itself"));else if("function"===typeof b||"object"===typeof b&&null!==b)if(b.constructor===a.constructor)L(a,
b);else{var c;try{c=b.then}catch(d){v.error=d,c=v}c===v?g(a,v.error):void 0===c?m(a,b):s(c)?K(a,b,c):m(a,b)}else m(a,b)}function M(a){a.f&&a.f(a.b);x(a)}function m(a,b){void 0===a.a&&(a.b=b,a.a=1,0!==a.e.length&&r(x,a))}function g(a,b){void 0===a.a&&(a.a=2,a.b=b,r(M,a))}function u(a,b,c,d){var e=a.e,f=e.length;a.f=null;e[f]=b;e[f+1]=c;e[f+2]=d;0===f&&a.a&&r(x,a)}function x(a){var b=a.e,c=a.a;if(0!==b.length){for(var d,e,f=a.b,g=0;g<b.length;g+=3)d=b[g],e=b[g+c],d?C(c,d,e,f):e(f);a.e.length=0}}function D(){this.error=
null}function C(a,b,c,d){var e=s(c),f,k,h,l;if(e){try{f=c(d)}catch(n){y.error=n,f=y}f===y?(l=!0,k=f.error,f=null):h=!0;if(b===f){g(b,new TypeError("A promises callback cannot return that same promise."));return}}else f=d,h=!0;void 0===b.a&&(e&&h?q(b,f):l?g(b,k):1===a?m(b,f):2===a&&g(b,f))}function N(a,b){try{b(function(b){q(a,b)},function(b){g(a,b)})}catch(c){g(a,c)}}function k(a,b,c,d){this.n=a;this.c=new a(p,d);this.i=c;this.o(b)?(this.m=b,this.d=this.length=b.length,this.l(),0===this.length?m(this.c,
this.b):(this.length=this.length||0,this.k(),0===this.d&&m(this.c,this.b))):g(this.c,this.p())}function h(a){O++;this.b=this.a=void 0;this.e=[];if(p!==a){if(!s(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof h))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");N(this,a)}}var E=Array.isArray?Array.isArray:function(a){return"[object Array]"===
Object.prototype.toString.call(a)},l=0,w="undefined"!==typeof window?window:{},B=w.MutationObserver||w.WebKitMutationObserver,w="undefined"!==typeof Uint8ClampedArray&&"undefined"!==typeof importScripts&&"undefined"!==typeof MessageChannel,n=Array(1E3),A;A="undefined"!==typeof process&&"[object process]"==={}.toString.call(process)?F():B?G():w?H():I();var v=new D,y=new D;k.prototype.o=function(a){return E(a)};k.prototype.p=function(){return Error("Array Methods must be provided an Array")};k.prototype.l=
function(){this.b=Array(this.length)};k.prototype.k=function(){for(var a=this.length,b=this.c,c=this.m,d=0;void 0===b.a&&d<a;d++)this.j(c[d],d)};k.prototype.j=function(a,b){var c=this.n;"object"===typeof a&&null!==a?a.constructor===c&&void 0!==a.a?(a.f=null,this.g(a.a,b,a.b)):this.q(c.resolve(a),b):(this.d--,this.b[b]=this.h(a))};k.prototype.g=function(a,b,c){var d=this.c;void 0===d.a&&(this.d--,this.i&&2===a?g(d,c):this.b[b]=this.h(c));0===this.d&&m(d,this.b)};k.prototype.h=function(a){return a};
k.prototype.q=function(a,b){var c=this;u(a,void 0,function(a){c.g(1,b,a)},function(a){c.g(2,b,a)})};var O=0;h.all=function(a,b){return(new k(this,a,!0,b)).c};h.race=function(a,b){function c(a){q(e,a)}function d(a){g(e,a)}var e=new this(p,b);if(!E(a))return (g(e,new TypeError("You must pass an array to race.")), e);for(var f=a.length,h=0;void 0===e.a&&h<f;h++)u(this.resolve(a[h]),void 0,c,d);return e};h.resolve=function(a,b){if(a&&"object"===typeof a&&a.constructor===this)return a;var c=new this(p,b);
q(c,a);return c};h.reject=function(a,b){var c=new this(p,b);g(c,a);return c};h.prototype={constructor:h,then:function(a,b){var c=this.a;if(1===c&&!a||2===c&&!b)return this;var d=new this.constructor(p),e=this.b;if(c){var f=arguments[c-1];r(function(){C(c,d,f,e)})}else u(this,d,a,b);return d},"catch":function(a){return this.then(null,a)}};var z={Promise:h,polyfill:function(){var a;a="undefined"!==typeof global?global:"undefined"!==typeof window&&window.document?window:self;"Promise"in a&&"resolve"in
a.Promise&&"reject"in a.Promise&&"all"in a.Promise&&"race"in a.Promise&&function(){var b;new a.Promise(function(a){b=a});return s(b)}()||(a.Promise=h)}};"function"===typeof define&&define.amd?define('es6-promise',[],function(){return z}):"undefined"!==typeof module&&module.exports?module.exports=z:"undefined"!==typeof this&&(this.ES6Promise=z)}).call(this);

/*!
 * Bootstrap v3.3.1 (http://getbootstrap.com)
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */

if (typeof jQuery === 'undefined') {
  throw new Error('Bootstrap\'s JavaScript requires jQuery')
}

+function ($) {
  var version = $.fn.jquery.split(' ')[0].split('.')
  if ((version[0] < 2 && version[1] < 9) || (version[0] == 1 && version[1] == 9 && version[2] < 1)) {
    throw new Error('Bootstrap\'s JavaScript requires jQuery version 1.9.1 or higher')
  }
}(jQuery);

/* ========================================================================
 * Bootstrap: transition.js v3.3.1
 * http://getbootstrap.com/javascript/#transitions
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // CSS TRANSITION SUPPORT (Shoutout: http://www.modernizr.com/)
  // ============================================================

  function transitionEnd() {
    var el = document.createElement('bootstrap')

    var transEndEventNames = {
      WebkitTransition : 'webkitTransitionEnd',
      MozTransition    : 'transitionend',
      OTransition      : 'oTransitionEnd otransitionend',
      transition       : 'transitionend'
    }

    for (var name in transEndEventNames) {
      if (el.style[name] !== undefined) {
        return { end: transEndEventNames[name] }
      }
    }

    return false // explicit for ie8 (  ._.)
  }

  // http://blog.alexmaccaw.com/css-transitions
  $.fn.emulateTransitionEnd = function (duration) {
    var called = false
    var $el = this
    $(this).one('bsTransitionEnd', function () { called = true })
    var callback = function () { if (!called) $($el).trigger($.support.transition.end) }
    setTimeout(callback, duration)
    return this
  }

  $(function () {
    $.support.transition = transitionEnd()

    if (!$.support.transition) return

    $.event.special.bsTransitionEnd = {
      bindType: $.support.transition.end,
      delegateType: $.support.transition.end,
      handle: function (e) {
        if ($(e.target).is(this)) return e.handleObj.handler.apply(this, arguments)
      }
    }
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: alert.js v3.3.1
 * http://getbootstrap.com/javascript/#alerts
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // ALERT CLASS DEFINITION
  // ======================

  var dismiss = '[data-dismiss="alert"]'
  var Alert   = function (el) {
    $(el).on('click', dismiss, this.close)
  }

  Alert.VERSION = '3.3.1'

  Alert.TRANSITION_DURATION = 150

  Alert.prototype.close = function (e) {
    var $this    = $(this)
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = $(selector)

    if (e) e.preventDefault()

    if (!$parent.length) {
      $parent = $this.closest('.alert')
    }

    $parent.trigger(e = $.Event('close.bs.alert'))

    if (e.isDefaultPrevented()) return

    $parent.removeClass('in')

    function removeElement() {
      // detach from parent, fire event then clean up data
      $parent.detach().trigger('closed.bs.alert').remove()
    }

    $.support.transition && $parent.hasClass('fade') ?
      $parent
        .one('bsTransitionEnd', removeElement)
        .emulateTransitionEnd(Alert.TRANSITION_DURATION) :
      removeElement()
  }


  // ALERT PLUGIN DEFINITION
  // =======================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.alert')

      if (!data) $this.data('bs.alert', (data = new Alert(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.alert

  $.fn.alert             = Plugin
  $.fn.alert.Constructor = Alert


  // ALERT NO CONFLICT
  // =================

  $.fn.alert.noConflict = function () {
    $.fn.alert = old
    return this
  }


  // ALERT DATA-API
  // ==============

  $(document).on('click.bs.alert.data-api', dismiss, Alert.prototype.close)

}(jQuery);

/* ========================================================================
 * Bootstrap: button.js v3.3.1
 * http://getbootstrap.com/javascript/#buttons
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // BUTTON PUBLIC CLASS DEFINITION
  // ==============================

  var Button = function (element, options) {
    this.$element  = $(element)
    this.options   = $.extend({}, Button.DEFAULTS, options)
    this.isLoading = false
  }

  Button.VERSION  = '3.3.1'

  Button.DEFAULTS = {
    loadingText: 'loading...'
  }

  Button.prototype.setState = function (state) {
    var d    = 'disabled'
    var $el  = this.$element
    var val  = $el.is('input') ? 'val' : 'html'
    var data = $el.data()

    state = state + 'Text'

    if (data.resetText == null) $el.data('resetText', $el[val]())

    // push to event loop to allow forms to submit
    setTimeout($.proxy(function () {
      $el[val](data[state] == null ? this.options[state] : data[state])

      if (state == 'loadingText') {
        this.isLoading = true
        $el.addClass(d).attr(d, d)
      } else if (this.isLoading) {
        this.isLoading = false
        $el.removeClass(d).removeAttr(d)
      }
    }, this), 0)
  }

  Button.prototype.toggle = function () {
    var changed = true
    var $parent = this.$element.closest('[data-toggle="buttons"]')

    if ($parent.length) {
      var $input = this.$element.find('input')
      if ($input.prop('type') == 'radio') {
        if ($input.prop('checked') && this.$element.hasClass('active')) changed = false
        else $parent.find('.active').removeClass('active')
      }
      if (changed) $input.prop('checked', !this.$element.hasClass('active')).trigger('change')
    } else {
      this.$element.attr('aria-pressed', !this.$element.hasClass('active'))
    }

    if (changed) this.$element.toggleClass('active')
  }


  // BUTTON PLUGIN DEFINITION
  // ========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.button')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.button', (data = new Button(this, options)))

      if (option == 'toggle') data.toggle()
      else if (option) data.setState(option)
    })
  }

  var old = $.fn.button

  $.fn.button             = Plugin
  $.fn.button.Constructor = Button


  // BUTTON NO CONFLICT
  // ==================

  $.fn.button.noConflict = function () {
    $.fn.button = old
    return this
  }


  // BUTTON DATA-API
  // ===============

  $(document)
    .on('click.bs.button.data-api', '[data-toggle^="button"]', function (e) {
      var $btn = $(e.target)
      if (!$btn.hasClass('btn')) $btn = $btn.closest('.btn')
      Plugin.call($btn, 'toggle')
      e.preventDefault()
    })
    .on('focus.bs.button.data-api blur.bs.button.data-api', '[data-toggle^="button"]', function (e) {
      $(e.target).closest('.btn').toggleClass('focus', /^focus(in)?$/.test(e.type))
    })

}(jQuery);

/* ========================================================================
 * Bootstrap: carousel.js v3.3.1
 * http://getbootstrap.com/javascript/#carousel
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // CAROUSEL CLASS DEFINITION
  // =========================

  var Carousel = function (element, options) {
    this.$element    = $(element)
    this.$indicators = this.$element.find('.carousel-indicators')
    this.options     = options
    this.paused      =
    this.sliding     =
    this.interval    =
    this.$active     =
    this.$items      = null

    this.options.keyboard && this.$element.on('keydown.bs.carousel', $.proxy(this.keydown, this))

    this.options.pause == 'hover' && !('ontouchstart' in document.documentElement) && this.$element
      .on('mouseenter.bs.carousel', $.proxy(this.pause, this))
      .on('mouseleave.bs.carousel', $.proxy(this.cycle, this))
  }

  Carousel.VERSION  = '3.3.1'

  Carousel.TRANSITION_DURATION = 600

  Carousel.DEFAULTS = {
    interval: 5000,
    pause: 'hover',
    wrap: true,
    keyboard: true
  }

  Carousel.prototype.keydown = function (e) {
    if (/input|textarea/i.test(e.target.tagName)) return
    switch (e.which) {
      case 37: this.prev(); break
      case 39: this.next(); break
      default: return
    }

    e.preventDefault()
  }

  Carousel.prototype.cycle = function (e) {
    e || (this.paused = false)

    this.interval && clearInterval(this.interval)

    this.options.interval
      && !this.paused
      && (this.interval = setInterval($.proxy(this.next, this), this.options.interval))

    return this
  }

  Carousel.prototype.getItemIndex = function (item) {
    this.$items = item.parent().children('.item')
    return this.$items.index(item || this.$active)
  }

  Carousel.prototype.getItemForDirection = function (direction, active) {
    var delta = direction == 'prev' ? -1 : 1
    var activeIndex = this.getItemIndex(active)
    var itemIndex = (activeIndex + delta) % this.$items.length
    return this.$items.eq(itemIndex)
  }

  Carousel.prototype.to = function (pos) {
    var that        = this
    var activeIndex = this.getItemIndex(this.$active = this.$element.find('.item.active'))

    if (pos > (this.$items.length - 1) || pos < 0) return

    if (this.sliding)       return this.$element.one('slid.bs.carousel', function () { that.to(pos) }) // yes, "slid"
    if (activeIndex == pos) return this.pause().cycle()

    return this.slide(pos > activeIndex ? 'next' : 'prev', this.$items.eq(pos))
  }

  Carousel.prototype.pause = function (e) {
    e || (this.paused = true)

    if (this.$element.find('.next, .prev').length && $.support.transition) {
      this.$element.trigger($.support.transition.end)
      this.cycle(true)
    }

    this.interval = clearInterval(this.interval)

    return this
  }

  Carousel.prototype.next = function () {
    if (this.sliding) return
    return this.slide('next')
  }

  Carousel.prototype.prev = function () {
    if (this.sliding) return
    return this.slide('prev')
  }

  Carousel.prototype.slide = function (type, next) {
    var $active   = this.$element.find('.item.active')
    var $next     = next || this.getItemForDirection(type, $active)
    var isCycling = this.interval
    var direction = type == 'next' ? 'left' : 'right'
    var fallback  = type == 'next' ? 'first' : 'last'
    var that      = this

    if (!$next.length) {
      if (!this.options.wrap) return
      $next = this.$element.find('.item')[fallback]()
    }

    if ($next.hasClass('active')) return (this.sliding = false)

    var relatedTarget = $next[0]
    var slideEvent = $.Event('slide.bs.carousel', {
      relatedTarget: relatedTarget,
      direction: direction
    })
    this.$element.trigger(slideEvent)
    if (slideEvent.isDefaultPrevented()) return

    this.sliding = true

    isCycling && this.pause()

    if (this.$indicators.length) {
      this.$indicators.find('.active').removeClass('active')
      var $nextIndicator = $(this.$indicators.children()[this.getItemIndex($next)])
      $nextIndicator && $nextIndicator.addClass('active')
    }

    var slidEvent = $.Event('slid.bs.carousel', { relatedTarget: relatedTarget, direction: direction }) // yes, "slid"
    if ($.support.transition && this.$element.hasClass('slide')) {
      $next.addClass(type)
      $next[0].offsetWidth // force reflow
      $active.addClass(direction)
      $next.addClass(direction)
      $active
        .one('bsTransitionEnd', function () {
          $next.removeClass([type, direction].join(' ')).addClass('active')
          $active.removeClass(['active', direction].join(' '))
          that.sliding = false
          setTimeout(function () {
            that.$element.trigger(slidEvent)
          }, 0)
        })
        .emulateTransitionEnd(Carousel.TRANSITION_DURATION)
    } else {
      $active.removeClass('active')
      $next.addClass('active')
      this.sliding = false
      this.$element.trigger(slidEvent)
    }

    isCycling && this.cycle()

    return this
  }


  // CAROUSEL PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.carousel')
      var options = $.extend({}, Carousel.DEFAULTS, $this.data(), typeof option == 'object' && option)
      var action  = typeof option == 'string' ? option : options.slide

      if (!data) $this.data('bs.carousel', (data = new Carousel(this, options)))
      if (typeof option == 'number') data.to(option)
      else if (action) data[action]()
      else if (options.interval) data.pause().cycle()
    })
  }

  var old = $.fn.carousel

  $.fn.carousel             = Plugin
  $.fn.carousel.Constructor = Carousel


  // CAROUSEL NO CONFLICT
  // ====================

  $.fn.carousel.noConflict = function () {
    $.fn.carousel = old
    return this
  }


  // CAROUSEL DATA-API
  // =================

  var clickHandler = function (e) {
    var href
    var $this   = $(this)
    var $target = $($this.attr('data-target') || (href = $this.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '')) // strip for ie7
    if (!$target.hasClass('carousel')) return
    var options = $.extend({}, $target.data(), $this.data())
    var slideIndex = $this.attr('data-slide-to')
    if (slideIndex) options.interval = false

    Plugin.call($target, options)

    if (slideIndex) {
      $target.data('bs.carousel').to(slideIndex)
    }

    e.preventDefault()
  }

  $(document)
    .on('click.bs.carousel.data-api', '[data-slide]', clickHandler)
    .on('click.bs.carousel.data-api', '[data-slide-to]', clickHandler)

  $(window).on('load', function () {
    $('[data-ride="carousel"]').each(function () {
      var $carousel = $(this)
      Plugin.call($carousel, $carousel.data())
    })
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: collapse.js v3.3.1
 * http://getbootstrap.com/javascript/#collapse
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // COLLAPSE PUBLIC CLASS DEFINITION
  // ================================

  var Collapse = function (element, options) {
    this.$element      = $(element)
    this.options       = $.extend({}, Collapse.DEFAULTS, options)
    this.$trigger      = $(this.options.trigger).filter('[href="#' + element.id + '"], [data-target="#' + element.id + '"]')
    this.transitioning = null

    if (this.options.parent) {
      this.$parent = this.getParent()
    } else {
      this.addAriaAndCollapsedClass(this.$element, this.$trigger)
    }

    if (this.options.toggle) this.toggle()
  }

  Collapse.VERSION  = '3.3.1'

  Collapse.TRANSITION_DURATION = 350

  Collapse.DEFAULTS = {
    toggle: true,
    trigger: '[data-toggle="collapse"]'
  }

  Collapse.prototype.dimension = function () {
    var hasWidth = this.$element.hasClass('width')
    return hasWidth ? 'width' : 'height'
  }

  Collapse.prototype.show = function () {
    if (this.transitioning || this.$element.hasClass('in')) return

    var activesData
    var actives = this.$parent && this.$parent.find('> .panel').children('.in, .collapsing')

    if (actives && actives.length) {
      activesData = actives.data('bs.collapse')
      if (activesData && activesData.transitioning) return
    }

    var startEvent = $.Event('show.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    if (actives && actives.length) {
      Plugin.call(actives, 'hide')
      activesData || actives.data('bs.collapse', null)
    }

    var dimension = this.dimension()

    this.$element
      .removeClass('collapse')
      .addClass('collapsing')[dimension](0)
      .attr('aria-expanded', true)

    this.$trigger
      .removeClass('collapsed')
      .attr('aria-expanded', true)

    this.transitioning = 1

    var complete = function () {
      this.$element
        .removeClass('collapsing')
        .addClass('collapse in')[dimension]('')
      this.transitioning = 0
      this.$element
        .trigger('shown.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    var scrollSize = $.camelCase(['scroll', dimension].join('-'))

    this.$element
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)[dimension](this.$element[0][scrollSize])
  }

  Collapse.prototype.hide = function () {
    if (this.transitioning || !this.$element.hasClass('in')) return

    var startEvent = $.Event('hide.bs.collapse')
    this.$element.trigger(startEvent)
    if (startEvent.isDefaultPrevented()) return

    var dimension = this.dimension()

    this.$element[dimension](this.$element[dimension]())[0].offsetHeight

    this.$element
      .addClass('collapsing')
      .removeClass('collapse in')
      .attr('aria-expanded', false)

    this.$trigger
      .addClass('collapsed')
      .attr('aria-expanded', false)

    this.transitioning = 1

    var complete = function () {
      this.transitioning = 0
      this.$element
        .removeClass('collapsing')
        .addClass('collapse')
        .trigger('hidden.bs.collapse')
    }

    if (!$.support.transition) return complete.call(this)

    this.$element
      [dimension](0)
      .one('bsTransitionEnd', $.proxy(complete, this))
      .emulateTransitionEnd(Collapse.TRANSITION_DURATION)
  }

  Collapse.prototype.toggle = function () {
    this[this.$element.hasClass('in') ? 'hide' : 'show']()
  }

  Collapse.prototype.getParent = function () {
    return $(this.options.parent)
      .find('[data-toggle="collapse"][data-parent="' + this.options.parent + '"]')
      .each($.proxy(function (i, element) {
        var $element = $(element)
        this.addAriaAndCollapsedClass(getTargetFromTrigger($element), $element)
      }, this))
      .end()
  }

  Collapse.prototype.addAriaAndCollapsedClass = function ($element, $trigger) {
    var isOpen = $element.hasClass('in')

    $element.attr('aria-expanded', isOpen)
    $trigger
      .toggleClass('collapsed', !isOpen)
      .attr('aria-expanded', isOpen)
  }

  function getTargetFromTrigger($trigger) {
    var href
    var target = $trigger.attr('data-target')
      || (href = $trigger.attr('href')) && href.replace(/.*(?=#[^\s]+$)/, '') // strip for ie7

    return $(target)
  }


  // COLLAPSE PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.collapse')
      var options = $.extend({}, Collapse.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data && options.toggle && option == 'show') options.toggle = false
      if (!data) $this.data('bs.collapse', (data = new Collapse(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.collapse

  $.fn.collapse             = Plugin
  $.fn.collapse.Constructor = Collapse


  // COLLAPSE NO CONFLICT
  // ====================

  $.fn.collapse.noConflict = function () {
    $.fn.collapse = old
    return this
  }


  // COLLAPSE DATA-API
  // =================

  $(document).on('click.bs.collapse.data-api', '[data-toggle="collapse"]', function (e) {
    var $this   = $(this)

    if (!$this.attr('data-target')) e.preventDefault()

    var $target = getTargetFromTrigger($this)
    var data    = $target.data('bs.collapse')
    var option  = data ? 'toggle' : $.extend({}, $this.data(), { trigger: this })

    Plugin.call($target, option)
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: dropdown.js v3.3.1
 * http://getbootstrap.com/javascript/#dropdowns
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // DROPDOWN CLASS DEFINITION
  // =========================

  var backdrop = '.dropdown-backdrop'
  var toggle   = '[data-toggle="dropdown"]'
  var Dropdown = function (element) {
    $(element).on('click.bs.dropdown', this.toggle)
  }

  Dropdown.VERSION = '3.3.1'

  Dropdown.prototype.toggle = function (e) {
    var $this = $(this)

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    clearMenus()

    if (!isActive) {
      if ('ontouchstart' in document.documentElement && !$parent.closest('.navbar-nav').length) {
        // if mobile we use a backdrop because click events don't delegate
        $('<div class="dropdown-backdrop"/>').insertAfter($(this)).on('click', clearMenus)
      }

      var relatedTarget = { relatedTarget: this }
      $parent.trigger(e = $.Event('show.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this
        .trigger('focus')
        .attr('aria-expanded', 'true')

      $parent
        .toggleClass('open')
        .trigger('shown.bs.dropdown', relatedTarget)
    }

    return false
  }

  Dropdown.prototype.keydown = function (e) {
    if (!/(38|40|27|32)/.test(e.which) || /input|textarea/i.test(e.target.tagName)) return

    var $this = $(this)

    e.preventDefault()
    e.stopPropagation()

    if ($this.is('.disabled, :disabled')) return

    var $parent  = getParent($this)
    var isActive = $parent.hasClass('open')

    if ((!isActive && e.which != 27) || (isActive && e.which == 27)) {
      if (e.which == 27) $parent.find(toggle).trigger('focus')
      return $this.trigger('click')
    }

    var desc = ' li:not(.divider):visible a'
    var $items = $parent.find('[role="menu"]' + desc + ', [role="listbox"]' + desc)

    if (!$items.length) return

    var index = $items.index(e.target)

    if (e.which == 38 && index > 0)                 index--                        // up
    if (e.which == 40 && index < $items.length - 1) index++                        // down
    if (!~index)                                      index = 0

    $items.eq(index).trigger('focus')
  }

  function clearMenus(e) {
    if (e && e.which === 3) return
    $(backdrop).remove()
    $(toggle).each(function () {
      var $this         = $(this)
      var $parent       = getParent($this)
      var relatedTarget = { relatedTarget: this }

      if (!$parent.hasClass('open')) return

      $parent.trigger(e = $.Event('hide.bs.dropdown', relatedTarget))

      if (e.isDefaultPrevented()) return

      $this.attr('aria-expanded', 'false')
      $parent.removeClass('open').trigger('hidden.bs.dropdown', relatedTarget)
    })
  }

  function getParent($this) {
    var selector = $this.attr('data-target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && /#[A-Za-z]/.test(selector) && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    var $parent = selector && $(selector)

    return $parent && $parent.length ? $parent : $this.parent()
  }


  // DROPDOWN PLUGIN DEFINITION
  // ==========================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.dropdown')

      if (!data) $this.data('bs.dropdown', (data = new Dropdown(this)))
      if (typeof option == 'string') data[option].call($this)
    })
  }

  var old = $.fn.dropdown

  $.fn.dropdown             = Plugin
  $.fn.dropdown.Constructor = Dropdown


  // DROPDOWN NO CONFLICT
  // ====================

  $.fn.dropdown.noConflict = function () {
    $.fn.dropdown = old
    return this
  }


  // APPLY TO STANDARD DROPDOWN ELEMENTS
  // ===================================

  $(document)
    .on('click.bs.dropdown.data-api', clearMenus)
    .on('click.bs.dropdown.data-api', '.dropdown form', function (e) { e.stopPropagation() })
    .on('click.bs.dropdown.data-api', toggle, Dropdown.prototype.toggle)
    .on('keydown.bs.dropdown.data-api', toggle, Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '[role="menu"]', Dropdown.prototype.keydown)
    .on('keydown.bs.dropdown.data-api', '[role="listbox"]', Dropdown.prototype.keydown)

}(jQuery);

/* ========================================================================
 * Bootstrap: modal.js v3.3.1
 * http://getbootstrap.com/javascript/#modals
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // MODAL CLASS DEFINITION
  // ======================

  var Modal = function (element, options) {
    this.options        = options
    this.$body          = $(document.body)
    this.$element       = $(element)
    this.$backdrop      =
    this.isShown        = null
    this.scrollbarWidth = 0

    if (this.options.remote) {
      this.$element
        .find('.modal-content')
        .load(this.options.remote, $.proxy(function () {
          this.$element.trigger('loaded.bs.modal')
        }, this))
    }
  }

  Modal.VERSION  = '3.3.1'

  Modal.TRANSITION_DURATION = 300
  Modal.BACKDROP_TRANSITION_DURATION = 150

  Modal.DEFAULTS = {
    backdrop: true,
    keyboard: true,
    show: true
  }

  Modal.prototype.toggle = function (_relatedTarget) {
    return this.isShown ? this.hide() : this.show(_relatedTarget)
  }

  Modal.prototype.show = function (_relatedTarget) {
    var that = this
    var e    = $.Event('show.bs.modal', { relatedTarget: _relatedTarget })

    this.$element.trigger(e)

    if (this.isShown || e.isDefaultPrevented()) return

    this.isShown = true

    this.checkScrollbar()
    this.setScrollbar()
    this.$body.addClass('modal-open')

    this.escape()
    this.resize()

    this.$element.on('click.dismiss.bs.modal', '[data-dismiss="modal"]', $.proxy(this.hide, this))

    this.backdrop(function () {
      var transition = $.support.transition && that.$element.hasClass('fade')

      if (!that.$element.parent().length) {
        that.$element.appendTo(that.$body) // don't move modals dom position
      }

      that.$element
        .show()
        .scrollTop(0)

      if (that.options.backdrop) that.adjustBackdrop()
      that.adjustDialog()

      if (transition) {
        that.$element[0].offsetWidth // force reflow
      }

      that.$element
        .addClass('in')
        .attr('aria-hidden', false)

      that.enforceFocus()

      var e = $.Event('shown.bs.modal', { relatedTarget: _relatedTarget })

      transition ?
        that.$element.find('.modal-dialog') // wait for modal to slide in
          .one('bsTransitionEnd', function () {
            that.$element.trigger('focus').trigger(e)
          })
          .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
        that.$element.trigger('focus').trigger(e)
    })
  }

  Modal.prototype.hide = function (e) {
    if (e) e.preventDefault()

    e = $.Event('hide.bs.modal')

    this.$element.trigger(e)

    if (!this.isShown || e.isDefaultPrevented()) return

    this.isShown = false

    this.escape()
    this.resize()

    $(document).off('focusin.bs.modal')

    this.$element
      .removeClass('in')
      .attr('aria-hidden', true)
      .off('click.dismiss.bs.modal')

    $.support.transition && this.$element.hasClass('fade') ?
      this.$element
        .one('bsTransitionEnd', $.proxy(this.hideModal, this))
        .emulateTransitionEnd(Modal.TRANSITION_DURATION) :
      this.hideModal()
  }

  Modal.prototype.enforceFocus = function () {
    $(document)
      .off('focusin.bs.modal') // guard against infinite focus loop
      .on('focusin.bs.modal', $.proxy(function (e) {
        if (this.$element[0] !== e.target && !this.$element.has(e.target).length) {
          this.$element.trigger('focus')
        }
      }, this))
  }

  Modal.prototype.escape = function () {
    if (this.isShown && this.options.keyboard) {
      this.$element.on('keydown.dismiss.bs.modal', $.proxy(function (e) {
        e.which == 27 && this.hide()
      }, this))
    } else if (!this.isShown) {
      this.$element.off('keydown.dismiss.bs.modal')
    }
  }

  Modal.prototype.resize = function () {
    if (this.isShown) {
      $(window).on('resize.bs.modal', $.proxy(this.handleUpdate, this))
    } else {
      $(window).off('resize.bs.modal')
    }
  }

  Modal.prototype.hideModal = function () {
    var that = this
    this.$element.hide()
    this.backdrop(function () {
      that.$body.removeClass('modal-open')
      that.resetAdjustments()
      that.resetScrollbar()
      that.$element.trigger('hidden.bs.modal')
    })
  }

  Modal.prototype.removeBackdrop = function () {
    this.$backdrop && this.$backdrop.remove()
    this.$backdrop = null
  }

  Modal.prototype.backdrop = function (callback) {
    var that = this
    var animate = this.$element.hasClass('fade') ? 'fade' : ''

    if (this.isShown && this.options.backdrop) {
      var doAnimate = $.support.transition && animate

      this.$backdrop = $('<div class="modal-backdrop ' + animate + '" />')
        .prependTo(this.$element)
        .on('click.dismiss.bs.modal', $.proxy(function (e) {
          if (e.target !== e.currentTarget) return
          this.options.backdrop == 'static'
            ? this.$element[0].focus.call(this.$element[0])
            : this.hide.call(this)
        }, this))

      if (doAnimate) this.$backdrop[0].offsetWidth // force reflow

      this.$backdrop.addClass('in')

      if (!callback) return

      doAnimate ?
        this.$backdrop
          .one('bsTransitionEnd', callback)
          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
        callback()

    } else if (!this.isShown && this.$backdrop) {
      this.$backdrop.removeClass('in')

      var callbackRemove = function () {
        that.removeBackdrop()
        callback && callback()
      }
      $.support.transition && this.$element.hasClass('fade') ?
        this.$backdrop
          .one('bsTransitionEnd', callbackRemove)
          .emulateTransitionEnd(Modal.BACKDROP_TRANSITION_DURATION) :
        callbackRemove()

    } else if (callback) {
      callback()
    }
  }

  // these following methods are used to handle overflowing modals

  Modal.prototype.handleUpdate = function () {
    if (this.options.backdrop) this.adjustBackdrop()
    this.adjustDialog()
  }

  Modal.prototype.adjustBackdrop = function () {
    this.$backdrop
      .css('height', 0)
      .css('height', this.$element[0].scrollHeight)
  }

  Modal.prototype.adjustDialog = function () {
    var modalIsOverflowing = this.$element[0].scrollHeight > document.documentElement.clientHeight

    this.$element.css({
      paddingLeft:  !this.bodyIsOverflowing && modalIsOverflowing ? this.scrollbarWidth : '',
      paddingRight: this.bodyIsOverflowing && !modalIsOverflowing ? this.scrollbarWidth : ''
    })
  }

  Modal.prototype.resetAdjustments = function () {
    this.$element.css({
      paddingLeft: '',
      paddingRight: ''
    })
  }

  Modal.prototype.checkScrollbar = function () {
    this.bodyIsOverflowing = document.body.scrollHeight > document.documentElement.clientHeight
    this.scrollbarWidth = this.measureScrollbar()
  }

  Modal.prototype.setScrollbar = function () {
    var bodyPad = parseInt((this.$body.css('padding-right') || 0), 10)
    if (this.bodyIsOverflowing) this.$body.css('padding-right', bodyPad + this.scrollbarWidth)
  }

  Modal.prototype.resetScrollbar = function () {
    this.$body.css('padding-right', '')
  }

  Modal.prototype.measureScrollbar = function () { // thx walsh
    var scrollDiv = document.createElement('div')
    scrollDiv.className = 'modal-scrollbar-measure'
    this.$body.append(scrollDiv)
    var scrollbarWidth = scrollDiv.offsetWidth - scrollDiv.clientWidth
    this.$body[0].removeChild(scrollDiv)
    return scrollbarWidth
  }


  // MODAL PLUGIN DEFINITION
  // =======================

  function Plugin(option, _relatedTarget) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.modal')
      var options = $.extend({}, Modal.DEFAULTS, $this.data(), typeof option == 'object' && option)

      if (!data) $this.data('bs.modal', (data = new Modal(this, options)))
      if (typeof option == 'string') data[option](_relatedTarget)
      else if (options.show) data.show(_relatedTarget)
    })
  }

  var old = $.fn.modal

  $.fn.modal             = Plugin
  $.fn.modal.Constructor = Modal


  // MODAL NO CONFLICT
  // =================

  $.fn.modal.noConflict = function () {
    $.fn.modal = old
    return this
  }


  // MODAL DATA-API
  // ==============

  $(document).on('click.bs.modal.data-api', '[data-toggle="modal"]', function (e) {
    var $this   = $(this)
    var href    = $this.attr('href')
    var $target = $($this.attr('data-target') || (href && href.replace(/.*(?=#[^\s]+$)/, ''))) // strip for ie7
    var option  = $target.data('bs.modal') ? 'toggle' : $.extend({ remote: !/#/.test(href) && href }, $target.data(), $this.data())

    if ($this.is('a')) e.preventDefault()

    $target.one('show.bs.modal', function (showEvent) {
      if (showEvent.isDefaultPrevented()) return // only register focus restorer if modal will actually get shown
      $target.one('hidden.bs.modal', function () {
        $this.is(':visible') && $this.trigger('focus')
      })
    })
    Plugin.call($target, option, this)
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: tooltip.js v3.3.1
 * http://getbootstrap.com/javascript/#tooltip
 * Inspired by the original jQuery.tipsy by Jason Frame
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // TOOLTIP PUBLIC CLASS DEFINITION
  // ===============================

  var Tooltip = function (element, options) {
    this.type       =
    this.options    =
    this.enabled    =
    this.timeout    =
    this.hoverState =
    this.$element   = null

    this.init('tooltip', element, options)
  }

  Tooltip.VERSION  = '3.3.1'

  Tooltip.TRANSITION_DURATION = 150

  Tooltip.DEFAULTS = {
    animation: true,
    placement: 'top',
    selector: false,
    template: '<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',
    trigger: 'hover focus',
    title: '',
    delay: 0,
    html: false,
    container: false,
    viewport: {
      selector: 'body',
      padding: 0
    }
  }

  Tooltip.prototype.init = function (type, element, options) {
    this.enabled   = true
    this.type      = type
    this.$element  = $(element)
    this.options   = this.getOptions(options)
    this.$viewport = this.options.viewport && $(this.options.viewport.selector || this.options.viewport)

    var triggers = this.options.trigger.split(' ')

    for (var i = triggers.length; i--;) {
      var trigger = triggers[i]

      if (trigger == 'click') {
        this.$element.on('click.' + this.type, this.options.selector, $.proxy(this.toggle, this))
      } else if (trigger != 'manual') {
        var eventIn  = trigger == 'hover' ? 'mouseenter' : 'focusin'
        var eventOut = trigger == 'hover' ? 'mouseleave' : 'focusout'

        this.$element.on(eventIn  + '.' + this.type, this.options.selector, $.proxy(this.enter, this))
        this.$element.on(eventOut + '.' + this.type, this.options.selector, $.proxy(this.leave, this))
      }
    }

    this.options.selector ?
      (this._options = $.extend({}, this.options, { trigger: 'manual', selector: '' })) :
      this.fixTitle()
  }

  Tooltip.prototype.getDefaults = function () {
    return Tooltip.DEFAULTS
  }

  Tooltip.prototype.getOptions = function (options) {
    options = $.extend({}, this.getDefaults(), this.$element.data(), options)

    if (options.delay && typeof options.delay == 'number') {
      options.delay = {
        show: options.delay,
        hide: options.delay
      }
    }

    return options
  }

  Tooltip.prototype.getDelegateOptions = function () {
    var options  = {}
    var defaults = this.getDefaults()

    this._options && $.each(this._options, function (key, value) {
      if (defaults[key] != value) options[key] = value
    })

    return options
  }

  Tooltip.prototype.enter = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget).data('bs.' + this.type)

    if (self && self.$tip && self.$tip.is(':visible')) {
      self.hoverState = 'in'
      return
    }

    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())
      $(obj.currentTarget).data('bs.' + this.type, self)
    }

    clearTimeout(self.timeout)

    self.hoverState = 'in'

    if (!self.options.delay || !self.options.delay.show) return self.show()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'in') self.show()
    }, self.options.delay.show)
  }

  Tooltip.prototype.leave = function (obj) {
    var self = obj instanceof this.constructor ?
      obj : $(obj.currentTarget).data('bs.' + this.type)

    if (!self) {
      self = new this.constructor(obj.currentTarget, this.getDelegateOptions())
      $(obj.currentTarget).data('bs.' + this.type, self)
    }

    clearTimeout(self.timeout)

    self.hoverState = 'out'

    if (!self.options.delay || !self.options.delay.hide) return self.hide()

    self.timeout = setTimeout(function () {
      if (self.hoverState == 'out') self.hide()
    }, self.options.delay.hide)
  }

  Tooltip.prototype.show = function () {
    var e = $.Event('show.bs.' + this.type)

    if (this.hasContent() && this.enabled) {
      this.$element.trigger(e)

      var inDom = $.contains(this.$element[0].ownerDocument.documentElement, this.$element[0])
      if (e.isDefaultPrevented() || !inDom) return
      var that = this

      var $tip = this.tip()

      var tipId = this.getUID(this.type)

      this.setContent()
      $tip.attr('id', tipId)
      this.$element.attr('aria-describedby', tipId)

      if (this.options.animation) $tip.addClass('fade')

      var placement = typeof this.options.placement == 'function' ?
        this.options.placement.call(this, $tip[0], this.$element[0]) :
        this.options.placement

      var autoToken = /\s?auto?\s?/i
      var autoPlace = autoToken.test(placement)
      if (autoPlace) placement = placement.replace(autoToken, '') || 'top'

      $tip
        .detach()
        .css({ top: 0, left: 0, display: 'block' })
        .addClass(placement)
        .data('bs.' + this.type, this)

      this.options.container ? $tip.appendTo(this.options.container) : $tip.insertAfter(this.$element)

      var pos          = this.getPosition()
      var actualWidth  = $tip[0].offsetWidth
      var actualHeight = $tip[0].offsetHeight

      if (autoPlace) {
        var orgPlacement = placement
        var $container   = this.options.container ? $(this.options.container) : this.$element.parent()
        var containerDim = this.getPosition($container)

        placement = placement == 'bottom' && pos.bottom + actualHeight > containerDim.bottom ? 'top'    :
                    placement == 'top'    && pos.top    - actualHeight < containerDim.top    ? 'bottom' :
                    placement == 'right'  && pos.right  + actualWidth  > containerDim.width  ? 'left'   :
                    placement == 'left'   && pos.left   - actualWidth  < containerDim.left   ? 'right'  :
                    placement

        $tip
          .removeClass(orgPlacement)
          .addClass(placement)
      }

      var calculatedOffset = this.getCalculatedOffset(placement, pos, actualWidth, actualHeight)

      this.applyPlacement(calculatedOffset, placement)

      var complete = function () {
        var prevHoverState = that.hoverState
        that.$element.trigger('shown.bs.' + that.type)
        that.hoverState = null

        if (prevHoverState == 'out') that.leave(that)
      }

      $.support.transition && this.$tip.hasClass('fade') ?
        $tip
          .one('bsTransitionEnd', complete)
          .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :
        complete()
    }
  }

  Tooltip.prototype.applyPlacement = function (offset, placement) {
    var $tip   = this.tip()
    var width  = $tip[0].offsetWidth
    var height = $tip[0].offsetHeight

    // manually read margins because getBoundingClientRect includes difference
    var marginTop = parseInt($tip.css('margin-top'), 10)
    var marginLeft = parseInt($tip.css('margin-left'), 10)

    // we must check for NaN for ie 8/9
    if (isNaN(marginTop))  marginTop  = 0
    if (isNaN(marginLeft)) marginLeft = 0

    offset.top  = offset.top  + marginTop
    offset.left = offset.left + marginLeft

    // $.fn.offset doesn't round pixel values
    // so we use setOffset directly with our own function B-0
    $.offset.setOffset($tip[0], $.extend({
      using: function (props) {
        $tip.css({
          top: Math.round(props.top),
          left: Math.round(props.left)
        })
      }
    }, offset), 0)

    $tip.addClass('in')

    // check to see if placing tip in new offset caused the tip to resize itself
    var actualWidth  = $tip[0].offsetWidth
    var actualHeight = $tip[0].offsetHeight

    if (placement == 'top' && actualHeight != height) {
      offset.top = offset.top + height - actualHeight
    }

    var delta = this.getViewportAdjustedDelta(placement, offset, actualWidth, actualHeight)

    if (delta.left) offset.left += delta.left
    else offset.top += delta.top

    var isVertical          = /top|bottom/.test(placement)
    var arrowDelta          = isVertical ? delta.left * 2 - width + actualWidth : delta.top * 2 - height + actualHeight
    var arrowOffsetPosition = isVertical ? 'offsetWidth' : 'offsetHeight'

    $tip.offset(offset)
    this.replaceArrow(arrowDelta, $tip[0][arrowOffsetPosition], isVertical)
  }

  Tooltip.prototype.replaceArrow = function (delta, dimension, isHorizontal) {
    this.arrow()
      .css(isHorizontal ? 'left' : 'top', 50 * (1 - delta / dimension) + '%')
      .css(isHorizontal ? 'top' : 'left', '')
  }

  Tooltip.prototype.setContent = function () {
    var $tip  = this.tip()
    var title = this.getTitle()

    $tip.find('.tooltip-inner')[this.options.html ? 'html' : 'text'](title)
    $tip.removeClass('fade in top bottom left right')
  }

  Tooltip.prototype.hide = function (callback) {
    var that = this
    var $tip = this.tip()
    var e    = $.Event('hide.bs.' + this.type)

    function complete() {
      if (that.hoverState != 'in') $tip.detach()
      that.$element
        .removeAttr('aria-describedby')
        .trigger('hidden.bs.' + that.type)
      callback && callback()
    }

    this.$element.trigger(e)

    if (e.isDefaultPrevented()) return

    $tip.removeClass('in')

    $.support.transition && this.$tip.hasClass('fade') ?
      $tip
        .one('bsTransitionEnd', complete)
        .emulateTransitionEnd(Tooltip.TRANSITION_DURATION) :
      complete()

    this.hoverState = null

    return this
  }

  Tooltip.prototype.fixTitle = function () {
    var $e = this.$element
    if ($e.attr('title') || typeof ($e.attr('data-original-title')) != 'string') {
      $e.attr('data-original-title', $e.attr('title') || '').attr('title', '')
    }
  }

  Tooltip.prototype.hasContent = function () {
    return this.getTitle()
  }

  Tooltip.prototype.getPosition = function ($element) {
    $element   = $element || this.$element

    var el     = $element[0]
    var isBody = el.tagName == 'BODY'

    var elRect    = el.getBoundingClientRect()
    if (elRect.width == null) {
      // width and height are missing in IE8, so compute them manually; see https://github.com/twbs/bootstrap/issues/14093
      elRect = $.extend({}, elRect, { width: elRect.right - elRect.left, height: elRect.bottom - elRect.top })
    }
    var elOffset  = isBody ? { top: 0, left: 0 } : $element.offset()
    var scroll    = { scroll: isBody ? document.documentElement.scrollTop || document.body.scrollTop : $element.scrollTop() }
    var outerDims = isBody ? { width: $(window).width(), height: $(window).height() } : null

    return $.extend({}, elRect, scroll, outerDims, elOffset)
  }

  Tooltip.prototype.getCalculatedOffset = function (placement, pos, actualWidth, actualHeight) {
    return placement == 'bottom' ? { top: pos.top + pos.height,   left: pos.left + pos.width / 2 - actualWidth / 2  } :
           placement == 'top'    ? { top: pos.top - actualHeight, left: pos.left + pos.width / 2 - actualWidth / 2  } :
           placement == 'left'   ? { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left - actualWidth } :
        /* placement == 'right' */ { top: pos.top + pos.height / 2 - actualHeight / 2, left: pos.left + pos.width   }

  }

  Tooltip.prototype.getViewportAdjustedDelta = function (placement, pos, actualWidth, actualHeight) {
    var delta = { top: 0, left: 0 }
    if (!this.$viewport) return delta

    var viewportPadding = this.options.viewport && this.options.viewport.padding || 0
    var viewportDimensions = this.getPosition(this.$viewport)

    if (/right|left/.test(placement)) {
      var topEdgeOffset    = pos.top - viewportPadding - viewportDimensions.scroll
      var bottomEdgeOffset = pos.top + viewportPadding - viewportDimensions.scroll + actualHeight
      if (topEdgeOffset < viewportDimensions.top) { // top overflow
        delta.top = viewportDimensions.top - topEdgeOffset
      } else if (bottomEdgeOffset > viewportDimensions.top + viewportDimensions.height) { // bottom overflow
        delta.top = viewportDimensions.top + viewportDimensions.height - bottomEdgeOffset
      }
    } else {
      var leftEdgeOffset  = pos.left - viewportPadding
      var rightEdgeOffset = pos.left + viewportPadding + actualWidth
      if (leftEdgeOffset < viewportDimensions.left) { // left overflow
        delta.left = viewportDimensions.left - leftEdgeOffset
      } else if (rightEdgeOffset > viewportDimensions.width) { // right overflow
        delta.left = viewportDimensions.left + viewportDimensions.width - rightEdgeOffset
      }
    }

    return delta
  }

  Tooltip.prototype.getTitle = function () {
    var title
    var $e = this.$element
    var o  = this.options

    title = $e.attr('data-original-title')
      || (typeof o.title == 'function' ? o.title.call($e[0]) :  o.title)

    return title
  }

  Tooltip.prototype.getUID = function (prefix) {
    do prefix += ~~(Math.random() * 1000000)
    while (document.getElementById(prefix))
    return prefix
  }

  Tooltip.prototype.tip = function () {
    return (this.$tip = this.$tip || $(this.options.template))
  }

  Tooltip.prototype.arrow = function () {
    return (this.$arrow = this.$arrow || this.tip().find('.tooltip-arrow'))
  }

  Tooltip.prototype.enable = function () {
    this.enabled = true
  }

  Tooltip.prototype.disable = function () {
    this.enabled = false
  }

  Tooltip.prototype.toggleEnabled = function () {
    this.enabled = !this.enabled
  }

  Tooltip.prototype.toggle = function (e) {
    var self = this
    if (e) {
      self = $(e.currentTarget).data('bs.' + this.type)
      if (!self) {
        self = new this.constructor(e.currentTarget, this.getDelegateOptions())
        $(e.currentTarget).data('bs.' + this.type, self)
      }
    }

    self.tip().hasClass('in') ? self.leave(self) : self.enter(self)
  }

  Tooltip.prototype.destroy = function () {
    var that = this
    clearTimeout(this.timeout)
    this.hide(function () {
      that.$element.off('.' + that.type).removeData('bs.' + that.type)
    })
  }


  // TOOLTIP PLUGIN DEFINITION
  // =========================

  function Plugin(option) {
    return this.each(function () {
      var $this    = $(this)
      var data     = $this.data('bs.tooltip')
      var options  = typeof option == 'object' && option
      var selector = options && options.selector

      if (!data && option == 'destroy') return
      if (selector) {
        if (!data) $this.data('bs.tooltip', (data = {}))
        if (!data[selector]) data[selector] = new Tooltip(this, options)
      } else {
        if (!data) $this.data('bs.tooltip', (data = new Tooltip(this, options)))
      }
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.tooltip

  $.fn.tooltip             = Plugin
  $.fn.tooltip.Constructor = Tooltip


  // TOOLTIP NO CONFLICT
  // ===================

  $.fn.tooltip.noConflict = function () {
    $.fn.tooltip = old
    return this
  }

}(jQuery);

/* ========================================================================
 * Bootstrap: popover.js v3.3.1
 * http://getbootstrap.com/javascript/#popovers
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // POPOVER PUBLIC CLASS DEFINITION
  // ===============================

  var Popover = function (element, options) {
    this.init('popover', element, options)
  }

  if (!$.fn.tooltip) throw new Error('Popover requires tooltip.js')

  Popover.VERSION  = '3.3.1'

  Popover.DEFAULTS = $.extend({}, $.fn.tooltip.Constructor.DEFAULTS, {
    placement: 'right',
    trigger: 'click',
    content: '',
    template: '<div class="popover" role="tooltip"><div class="arrow"></div><h3 class="popover-title"></h3><div class="popover-content"></div></div>'
  })


  // NOTE: POPOVER EXTENDS tooltip.js
  // ================================

  Popover.prototype = $.extend({}, $.fn.tooltip.Constructor.prototype)

  Popover.prototype.constructor = Popover

  Popover.prototype.getDefaults = function () {
    return Popover.DEFAULTS
  }

  Popover.prototype.setContent = function () {
    var $tip    = this.tip()
    var title   = this.getTitle()
    var content = this.getContent()

    $tip.find('.popover-title')[this.options.html ? 'html' : 'text'](title)
    $tip.find('.popover-content').children().detach().end()[ // we use append for html objects to maintain js events
      this.options.html ? (typeof content == 'string' ? 'html' : 'append') : 'text'
    ](content)

    $tip.removeClass('fade top bottom left right in')

    // IE8 doesn't accept hiding via the `:empty` pseudo selector, we have to do
    // this manually by checking the contents.
    if (!$tip.find('.popover-title').html()) $tip.find('.popover-title').hide()
  }

  Popover.prototype.hasContent = function () {
    return this.getTitle() || this.getContent()
  }

  Popover.prototype.getContent = function () {
    var $e = this.$element
    var o  = this.options

    return $e.attr('data-content')
      || (typeof o.content == 'function' ?
            o.content.call($e[0]) :
            o.content)
  }

  Popover.prototype.arrow = function () {
    return (this.$arrow = this.$arrow || this.tip().find('.arrow'))
  }

  Popover.prototype.tip = function () {
    if (!this.$tip) this.$tip = $(this.options.template)
    return this.$tip
  }


  // POPOVER PLUGIN DEFINITION
  // =========================

  function Plugin(option) {
    return this.each(function () {
      var $this    = $(this)
      var data     = $this.data('bs.popover')
      var options  = typeof option == 'object' && option
      var selector = options && options.selector

      if (!data && option == 'destroy') return
      if (selector) {
        if (!data) $this.data('bs.popover', (data = {}))
        if (!data[selector]) data[selector] = new Popover(this, options)
      } else {
        if (!data) $this.data('bs.popover', (data = new Popover(this, options)))
      }
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.popover

  $.fn.popover             = Plugin
  $.fn.popover.Constructor = Popover


  // POPOVER NO CONFLICT
  // ===================

  $.fn.popover.noConflict = function () {
    $.fn.popover = old
    return this
  }

}(jQuery);

/* ========================================================================
 * Bootstrap: scrollspy.js v3.3.1
 * http://getbootstrap.com/javascript/#scrollspy
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // SCROLLSPY CLASS DEFINITION
  // ==========================

  function ScrollSpy(element, options) {
    var process  = $.proxy(this.process, this)

    this.$body          = $('body')
    this.$scrollElement = $(element).is('body') ? $(window) : $(element)
    this.options        = $.extend({}, ScrollSpy.DEFAULTS, options)
    this.selector       = (this.options.target || '') + ' .nav li > a'
    this.offsets        = []
    this.targets        = []
    this.activeTarget   = null
    this.scrollHeight   = 0

    this.$scrollElement.on('scroll.bs.scrollspy', process)
    this.refresh()
    this.process()
  }

  ScrollSpy.VERSION  = '3.3.1'

  ScrollSpy.DEFAULTS = {
    offset: 10
  }

  ScrollSpy.prototype.getScrollHeight = function () {
    return this.$scrollElement[0].scrollHeight || Math.max(this.$body[0].scrollHeight, document.documentElement.scrollHeight)
  }

  ScrollSpy.prototype.refresh = function () {
    var offsetMethod = 'offset'
    var offsetBase   = 0

    if (!$.isWindow(this.$scrollElement[0])) {
      offsetMethod = 'position'
      offsetBase   = this.$scrollElement.scrollTop()
    }

    this.offsets = []
    this.targets = []
    this.scrollHeight = this.getScrollHeight()

    var self     = this

    this.$body
      .find(this.selector)
      .map(function () {
        var $el   = $(this)
        var href  = $el.data('target') || $el.attr('href')
        var $href = /^#./.test(href) && $(href)

        return ($href
          && $href.length
          && $href.is(':visible')
          && [[$href[offsetMethod]().top + offsetBase, href]]) || null
      })
      .sort(function (a, b) { return a[0] - b[0] })
      .each(function () {
        self.offsets.push(this[0])
        self.targets.push(this[1])
      })
  }

  ScrollSpy.prototype.process = function () {
    var scrollTop    = this.$scrollElement.scrollTop() + this.options.offset
    var scrollHeight = this.getScrollHeight()
    var maxScroll    = this.options.offset + scrollHeight - this.$scrollElement.height()
    var offsets      = this.offsets
    var targets      = this.targets
    var activeTarget = this.activeTarget
    var i

    if (this.scrollHeight != scrollHeight) {
      this.refresh()
    }

    if (scrollTop >= maxScroll) {
      return activeTarget != (i = targets[targets.length - 1]) && this.activate(i)
    }

    if (activeTarget && scrollTop < offsets[0]) {
      this.activeTarget = null
      return this.clear()
    }

    for (i = offsets.length; i--;) {
      activeTarget != targets[i]
        && scrollTop >= offsets[i]
        && (!offsets[i + 1] || scrollTop <= offsets[i + 1])
        && this.activate(targets[i])
    }
  }

  ScrollSpy.prototype.activate = function (target) {
    this.activeTarget = target

    this.clear()

    var selector = this.selector +
        '[data-target="' + target + '"],' +
        this.selector + '[href="' + target + '"]'

    var active = $(selector)
      .parents('li')
      .addClass('active')

    if (active.parent('.dropdown-menu').length) {
      active = active
        .closest('li.dropdown')
        .addClass('active')
    }

    active.trigger('activate.bs.scrollspy')
  }

  ScrollSpy.prototype.clear = function () {
    $(this.selector)
      .parentsUntil(this.options.target, '.active')
      .removeClass('active')
  }


  // SCROLLSPY PLUGIN DEFINITION
  // ===========================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.scrollspy')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.scrollspy', (data = new ScrollSpy(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.scrollspy

  $.fn.scrollspy             = Plugin
  $.fn.scrollspy.Constructor = ScrollSpy


  // SCROLLSPY NO CONFLICT
  // =====================

  $.fn.scrollspy.noConflict = function () {
    $.fn.scrollspy = old
    return this
  }


  // SCROLLSPY DATA-API
  // ==================

  $(window).on('load.bs.scrollspy.data-api', function () {
    $('[data-spy="scroll"]').each(function () {
      var $spy = $(this)
      Plugin.call($spy, $spy.data())
    })
  })

}(jQuery);

/* ========================================================================
 * Bootstrap: tab.js v3.3.1
 * http://getbootstrap.com/javascript/#tabs
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // TAB CLASS DEFINITION
  // ====================

  var Tab = function (element) {
    this.element = $(element)
  }

  Tab.VERSION = '3.3.1'

  Tab.TRANSITION_DURATION = 150

  Tab.prototype.show = function () {
    var $this    = this.element
    var $ul      = $this.closest('ul:not(.dropdown-menu)')
    var selector = $this.data('target')

    if (!selector) {
      selector = $this.attr('href')
      selector = selector && selector.replace(/.*(?=#[^\s]*$)/, '') // strip for ie7
    }

    if ($this.parent('li').hasClass('active')) return

    var $previous = $ul.find('.active:last a')
    var hideEvent = $.Event('hide.bs.tab', {
      relatedTarget: $this[0]
    })
    var showEvent = $.Event('show.bs.tab', {
      relatedTarget: $previous[0]
    })

    $previous.trigger(hideEvent)
    $this.trigger(showEvent)

    if (showEvent.isDefaultPrevented() || hideEvent.isDefaultPrevented()) return

    var $target = $(selector)

    this.activate($this.closest('li'), $ul)
    this.activate($target, $target.parent(), function () {
      $previous.trigger({
        type: 'hidden.bs.tab',
        relatedTarget: $this[0]
      })
      $this.trigger({
        type: 'shown.bs.tab',
        relatedTarget: $previous[0]
      })
    })
  }

  Tab.prototype.activate = function (element, container, callback) {
    var $active    = container.find('> .active')
    var transition = callback
      && $.support.transition
      && (($active.length && $active.hasClass('fade')) || !!container.find('> .fade').length)

    function next() {
      $active
        .removeClass('active')
        .find('> .dropdown-menu > .active')
          .removeClass('active')
        .end()
        .find('[data-toggle="tab"]')
          .attr('aria-expanded', false)

      element
        .addClass('active')
        .find('[data-toggle="tab"]')
          .attr('aria-expanded', true)

      if (transition) {
        element[0].offsetWidth // reflow for transition
        element.addClass('in')
      } else {
        element.removeClass('fade')
      }

      if (element.parent('.dropdown-menu')) {
        element
          .closest('li.dropdown')
            .addClass('active')
          .end()
          .find('[data-toggle="tab"]')
            .attr('aria-expanded', true)
      }

      callback && callback()
    }

    $active.length && transition ?
      $active
        .one('bsTransitionEnd', next)
        .emulateTransitionEnd(Tab.TRANSITION_DURATION) :
      next()

    $active.removeClass('in')
  }


  // TAB PLUGIN DEFINITION
  // =====================

  function Plugin(option) {
    return this.each(function () {
      var $this = $(this)
      var data  = $this.data('bs.tab')

      if (!data) $this.data('bs.tab', (data = new Tab(this)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.tab

  $.fn.tab             = Plugin
  $.fn.tab.Constructor = Tab


  // TAB NO CONFLICT
  // ===============

  $.fn.tab.noConflict = function () {
    $.fn.tab = old
    return this
  }


  // TAB DATA-API
  // ============

  var clickHandler = function (e) {
    e.preventDefault()
    Plugin.call($(this), 'show')
  }

  $(document)
    .on('click.bs.tab.data-api', '[data-toggle="tab"]', clickHandler)
    .on('click.bs.tab.data-api', '[data-toggle="pill"]', clickHandler)

}(jQuery);

/* ========================================================================
 * Bootstrap: affix.js v3.3.1
 * http://getbootstrap.com/javascript/#affix
 * ========================================================================
 * Copyright 2011-2014 Twitter, Inc.
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 * ======================================================================== */


+function ($) {
  

  // AFFIX CLASS DEFINITION
  // ======================

  var Affix = function (element, options) {
    this.options = $.extend({}, Affix.DEFAULTS, options)

    this.$target = $(this.options.target)
      .on('scroll.bs.affix.data-api', $.proxy(this.checkPosition, this))
      .on('click.bs.affix.data-api',  $.proxy(this.checkPositionWithEventLoop, this))

    this.$element     = $(element)
    this.affixed      =
    this.unpin        =
    this.pinnedOffset = null

    this.checkPosition()
  }

  Affix.VERSION  = '3.3.1'

  Affix.RESET    = 'affix affix-top affix-bottom'

  Affix.DEFAULTS = {
    offset: 0,
    target: window
  }

  Affix.prototype.getState = function (scrollHeight, height, offsetTop, offsetBottom) {
    var scrollTop    = this.$target.scrollTop()
    var position     = this.$element.offset()
    var targetHeight = this.$target.height()

    if (offsetTop != null && this.affixed == 'top') return scrollTop < offsetTop ? 'top' : false

    if (this.affixed == 'bottom') {
      if (offsetTop != null) return (scrollTop + this.unpin <= position.top) ? false : 'bottom'
      return (scrollTop + targetHeight <= scrollHeight - offsetBottom) ? false : 'bottom'
    }

    var initializing   = this.affixed == null
    var colliderTop    = initializing ? scrollTop : position.top
    var colliderHeight = initializing ? targetHeight : height

    if (offsetTop != null && colliderTop <= offsetTop) return 'top'
    if (offsetBottom != null && (colliderTop + colliderHeight >= scrollHeight - offsetBottom)) return 'bottom'

    return false
  }

  Affix.prototype.getPinnedOffset = function () {
    if (this.pinnedOffset) return this.pinnedOffset
    this.$element.removeClass(Affix.RESET).addClass('affix')
    var scrollTop = this.$target.scrollTop()
    var position  = this.$element.offset()
    return (this.pinnedOffset = position.top - scrollTop)
  }

  Affix.prototype.checkPositionWithEventLoop = function () {
    setTimeout($.proxy(this.checkPosition, this), 1)
  }

  Affix.prototype.checkPosition = function () {
    if (!this.$element.is(':visible')) return

    var height       = this.$element.height()
    var offset       = this.options.offset
    var offsetTop    = offset.top
    var offsetBottom = offset.bottom
    var scrollHeight = $('body').height()

    if (typeof offset != 'object')         offsetBottom = offsetTop = offset
    if (typeof offsetTop == 'function')    offsetTop    = offset.top(this.$element)
    if (typeof offsetBottom == 'function') offsetBottom = offset.bottom(this.$element)

    var affix = this.getState(scrollHeight, height, offsetTop, offsetBottom)

    if (this.affixed != affix) {
      if (this.unpin != null) this.$element.css('top', '')

      var affixType = 'affix' + (affix ? '-' + affix : '')
      var e         = $.Event(affixType + '.bs.affix')

      this.$element.trigger(e)

      if (e.isDefaultPrevented()) return

      this.affixed = affix
      this.unpin = affix == 'bottom' ? this.getPinnedOffset() : null

      this.$element
        .removeClass(Affix.RESET)
        .addClass(affixType)
        .trigger(affixType.replace('affix', 'affixed') + '.bs.affix')
    }

    if (affix == 'bottom') {
      this.$element.offset({
        top: scrollHeight - height - offsetBottom
      })
    }
  }


  // AFFIX PLUGIN DEFINITION
  // =======================

  function Plugin(option) {
    return this.each(function () {
      var $this   = $(this)
      var data    = $this.data('bs.affix')
      var options = typeof option == 'object' && option

      if (!data) $this.data('bs.affix', (data = new Affix(this, options)))
      if (typeof option == 'string') data[option]()
    })
  }

  var old = $.fn.affix

  $.fn.affix             = Plugin
  $.fn.affix.Constructor = Affix


  // AFFIX NO CONFLICT
  // =================

  $.fn.affix.noConflict = function () {
    $.fn.affix = old
    return this
  }


  // AFFIX DATA-API
  // ==============

  $(window).on('load', function () {
    $('[data-spy="affix"]').each(function () {
      var $spy = $(this)
      var data = $spy.data()

      data.offset = data.offset || {}

      if (data.offsetBottom != null) data.offset.bottom = data.offsetBottom
      if (data.offsetTop    != null) data.offset.top    = data.offsetTop

      Plugin.call($spy, data)
    })
  })

}(jQuery);

define("bootstrap", function(){});

define('durandal/viewEngine',["durandal/system","jquery"],function(e,t){var n;return n=t.parseHTML?function(e){return t.parseHTML(e)}:function(e){return t(e).get()},{cache:{},viewExtension:".html",viewPlugin:"text",viewPluginParameters:"",isViewUrl:function(e){return-1!==e.indexOf(this.viewExtension,e.length-this.viewExtension.length)},convertViewUrlToViewId:function(e){return e.substring(0,e.length-this.viewExtension.length)},convertViewIdToRequirePath:function(e){var t=this.viewPlugin?this.viewPlugin+"!":"";return t+e+this.viewExtension+this.viewPluginParameters},parseMarkup:n,processMarkup:function(e){var t=this.parseMarkup(e);return this.ensureSingleElement(t)},ensureSingleElement:function(e){if(1==e.length)return e[0];for(var n=[],r=0;r<e.length;r++){var a=e[r];if(8!=a.nodeType){if(3==a.nodeType){var o=/\S/.test(a.nodeValue);if(!o)continue}n.push(a)}}return n.length>1?t(n).wrapAll('<div class="durandal-wrapper"></div>').parent().get(0):n[0]},tryGetViewFromCache:function(e){return this.cache[e]},putViewInCache:function(e,t){this.cache[e]=t},createView:function(t){var n=this,r=this.convertViewIdToRequirePath(t),a=this.tryGetViewFromCache(r);return a?e.defer(function(e){e.resolve(a.cloneNode(!0))}).promise():e.defer(function(a){e.acquire(r).then(function(e){var o=n.processMarkup(e);o.setAttribute("data-view",t),n.putViewInCache(r,o),a.resolve(o.cloneNode(!0))}).fail(function(e){n.createFallbackView(t,r,e).then(function(e){e.setAttribute("data-view",t),n.cache[r]=e,a.resolve(e.cloneNode(!0))})})}).promise()},createFallbackView:function(t,n){var r=this,a='View Not Found. Searched for "'+t+'" via path "'+n+'".';return e.defer(function(e){e.resolve(r.processMarkup('<div class="durandal-view-404">'+a+"</div>"))}).promise()}}});
define('durandal/viewLocator',["durandal/system","durandal/viewEngine"],function(e,t){function n(e,t){for(var n=0;n<e.length;n++){var r=e[n],a=r.getAttribute("data-view");if(a==t)return r}}function r(e){return(e+"").replace(/([\\\.\+\*\?\[\^\]\$\(\)\{\}\=\!\<\>\|\:])/g,"\\$1")}return{useConvention:function(e,t,n){e=e||"viewmodels",t=t||"views",n=n||t;var a=new RegExp(r(e),"gi");this.convertModuleIdToViewId=function(e){return e.replace(a,t)},this.translateViewIdToArea=function(e,t){return t&&"partial"!=t?n+"/"+t+"/"+e:n+"/"+e}},locateViewForObject:function(t,n,r){var a;if(t.getView&&(a=t.getView()))return this.locateView(a,n,r);if(t.viewUrl)return this.locateView(t.viewUrl,n,r);var o=e.getModuleId(t);return o?this.locateView(this.convertModuleIdToViewId(o),n,r):this.locateView(this.determineFallbackViewId(t),n,r)},convertModuleIdToViewId:function(e){return e},determineFallbackViewId:function(e){var t=/function (.{1,})\(/,n=t.exec(e.constructor.toString()),r=n&&n.length>1?n[1]:"";return r=r.trim(),"views/"+r},translateViewIdToArea:function(e){return e},locateView:function(r,a,o){if("string"==typeof r){var i;if(i=t.isViewUrl(r)?t.convertViewUrlToViewId(r):r,a&&(i=this.translateViewIdToArea(i,a)),o){var s=n(o,i);if(s)return e.defer(function(e){e.resolve(s)}).promise()}return t.createView(i)}return e.defer(function(e){e.resolve(r)}).promise()}}});
define('durandal/binder',["durandal/system","knockout"],function(e,t){function n(t){return void 0===t?{applyBindings:!0}:e.isBoolean(t)?{applyBindings:t}:(void 0===t.applyBindings&&(t.applyBindings=!0),t)}function r(r,u,c,d){if(!u||!c)return a.throwOnErrors?e.error(o):e.log(o,u,d),void 0;if(!u.getAttribute)return a.throwOnErrors?e.error(i):e.log(i,u,d),void 0;var p=u.getAttribute("data-view");try{var m;return r&&r.binding&&(m=r.binding(u)),m=n(m),a.binding(d,u,m),m.applyBindings?(e.log("Binding",p,d),t.applyBindings(c,u)):r&&t.utils.domData.set(u,l,{$data:r}),a.bindingComplete(d,u,m),r&&r.bindingComplete&&r.bindingComplete(u),t.utils.domData.set(u,s,m),m}catch(f){f.message=f.message+";\nView: "+p+";\nModuleId: "+e.getModuleId(d),a.throwOnErrors?e.error(f):e.log(f.message)}}var a,o="Insufficient Information to Bind",i="Unexpected View Type",s="durandal-binding-instruction",l="__ko_bindingContext__";return a={binding:e.noop,bindingComplete:e.noop,throwOnErrors:!1,getBindingInstruction:function(e){return t.utils.domData.get(e,s)},bindContext:function(e,t,n,a){return n&&e&&(e=e.createChildContext(n,"string"==typeof a?a:null)),r(n,t,e,n||(e?e.$data:null))},bind:function(e,t){return r(e,t,e,e)}}});
define('durandal/activator',["durandal/system","knockout"],function(e,t){function n(t){return void 0==t&&(t={}),e.isBoolean(t.closeOnDeactivate)||(t.closeOnDeactivate=u.defaults.closeOnDeactivate),t.beforeActivate||(t.beforeActivate=u.defaults.beforeActivate),t.afterDeactivate||(t.afterDeactivate=u.defaults.afterDeactivate),t.affirmations||(t.affirmations=u.defaults.affirmations),t.interpretResponse||(t.interpretResponse=u.defaults.interpretResponse),t.areSameItem||(t.areSameItem=u.defaults.areSameItem),t.findChildActivator||(t.findChildActivator=u.defaults.findChildActivator),t}function r(t,n,r){return e.isArray(r)?t[n].apply(t,r):t[n](r)}function a(t,n,r,a,o){if(t&&t.deactivate){e.log("Deactivating",t);var i;try{i=t.deactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),a.resolve(!1),void 0}i&&i.then?i.then(function(){r.afterDeactivate(t,n,o),a.resolve(!0)},function(t){e.log(t),a.resolve(!1)}):(r.afterDeactivate(t,n,o),a.resolve(!0))}else t&&r.afterDeactivate(t,n,o),a.resolve(!0)}function o(t,n,a,o){var i;if(t&&t.activate){e.log("Activating",t);try{i=r(t,"activate",o)}catch(s){return e.log("ERROR: "+s.message,s),a(!1),void 0}}i&&i.then?i.then(function(){n(t),a(!0)},function(t){e.log("ERROR: "+t.message,t),a(!1)}):(n(t),a(!0))}function i(t,n,r,a){return a=e.extend({},c,a),r.lifecycleData=null,e.defer(function(o){function i(){if(t&&t.canDeactivate&&a.canDeactivate){var i;try{i=t.canDeactivate(n)}catch(s){return e.log("ERROR: "+s.message,s),o.resolve(!1),void 0}i.then?i.then(function(e){r.lifecycleData=e,o.resolve(r.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),o.resolve(!1)}):(r.lifecycleData=i,o.resolve(r.interpretResponse(i)))}else o.resolve(!0)}var s=r.findChildActivator(t);s?s.canDeactivate().then(function(e){e?i():o.resolve(!1)}):i()}).promise()}function s(t,n,a,o,i){return a.lifecycleData=null,e.defer(function(s){if(a.areSameItem(n(),t,o,i))return s.resolve(!0),void 0;if(t&&t.canActivate){var l;try{l=r(t,"canActivate",i)}catch(u){return e.log("ERROR: "+u.message,u),s.resolve(!1),void 0}l.then?l.then(function(e){a.lifecycleData=e,s.resolve(a.interpretResponse(e))},function(t){e.log("ERROR: "+t.message,t),s.resolve(!1)}):(a.lifecycleData=l,s.resolve(a.interpretResponse(l)))}else s.resolve(!0)}).promise()}function l(r,l){var u,c=t.observable(null);l=n(l);var d=t.computed({read:function(){return c()},write:function(e){d.viaSetter=!0,d.activateItem(e)}});return d.__activator__=!0,d.settings=l,l.activator=d,d.isActivating=t.observable(!1),d.forceActiveItem=function(e){c(e)},d.canDeactivateItem=function(e,t,n){return i(e,t,l,n)},d.deactivateItem=function(t,n){return e.defer(function(e){d.canDeactivateItem(t,n).then(function(r){r?a(t,n,l,e,c):(d.notifySubscribers(),e.resolve(!1))})}).promise()},d.canActivateItem=function(e,t){return s(e,c,l,u,t)},d.activateItem=function(t,n,r){var i=d.viaSetter;return d.viaSetter=!1,e.defer(function(s){if(d.isActivating())return s.resolve(!1),void 0;d.isActivating(!0);var p=c();return l.areSameItem(p,t,u,n)?(d.isActivating(!1),s.resolve(!0),void 0):(d.canDeactivateItem(p,l.closeOnDeactivate,r).then(function(r){r?d.canActivateItem(t,n).then(function(r){r?e.defer(function(e){a(p,l.closeOnDeactivate,l,e)}).promise().then(function(){t=l.beforeActivate(t,n),o(t,c,function(e){u=n,d.isActivating(!1),s.resolve(e)},n)}):(i&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))}):(i&&d.notifySubscribers(),d.isActivating(!1),s.resolve(!1))}),void 0)}).promise()},d.canActivate=function(){var e;return r?(e=r,r=!1):e=d(),d.canActivateItem(e)},d.activate=function(){var e;return r?(e=r,r=!1):e=d(),d.activateItem(e)},d.canDeactivate=function(e){return d.canDeactivateItem(d(),e)},d.deactivate=function(e){return d.deactivateItem(d(),e)},d.includeIn=function(e){e.canActivate=function(){return d.canActivate()},e.activate=function(){return d.activate()},e.canDeactivate=function(e){return d.canDeactivate(e)},e.deactivate=function(e){return d.deactivate(e)}},l.includeIn?d.includeIn(l.includeIn):r&&d.activate(),d.forItems=function(t){l.closeOnDeactivate=!1,l.determineNextItemToActivate=function(e,t){var n=t-1;return-1==n&&e.length>1?e[1]:n>-1&&n<e.length-1?e[n]:null},l.beforeActivate=function(e){var n=d();if(e){var r=t.indexOf(e);-1==r?t.push(e):e=t()[r]}else e=l.determineNextItemToActivate(t,n?t.indexOf(n):0);return e},l.afterDeactivate=function(e,n){n&&t.remove(e)};var n=d.canDeactivate;d.canDeactivate=function(r){return r?e.defer(function(e){function n(){for(var t=0;t<o.length;t++)if(!o[t])return e.resolve(!1),void 0;e.resolve(!0)}for(var a=t(),o=[],i=0;i<a.length;i++)d.canDeactivateItem(a[i],r).then(function(e){o.push(e),o.length==a.length&&n()})}).promise():n()};var r=d.deactivate;return d.deactivate=function(n){return n?e.defer(function(e){function r(r){setTimeout(function(){d.deactivateItem(r,n).then(function(){o++,t.remove(r),o==i&&e.resolve()})},1)}for(var a=t(),o=0,i=a.length,s=0;i>s;s++)r(a[s])}).promise():r()},d},d}var u,c={canDeactivate:!0},d={closeOnDeactivate:!0,affirmations:["yes","ok","true"],interpretResponse:function(n){return e.isObject(n)&&(n=n.can||!1),e.isString(n)?-1!==t.utils.arrayIndexOf(this.affirmations,n.toLowerCase()):n},areSameItem:function(e,t){return e==t},beforeActivate:function(e){return e},afterDeactivate:function(e,t,n){t&&n&&n(null)},findChildActivator:function(){return null}};return u={defaults:d,create:l,isActivator:function(e){return e&&e.__activator__}}});
define('durandal/composition',["durandal/system","durandal/viewLocator","durandal/binder","durandal/viewEngine","durandal/activator","jquery","knockout"],function(e,t,n,r,a,o,i){function s(t,n,r){try{if(t.onError)try{t.onError(n,r)}catch(a){e.error(a)}else e.error(n)}finally{u(t,r,!0)}}function l(e){for(var t=[],n={childElements:t,activeView:null},r=i.virtualElements.firstChild(e);r;)1==r.nodeType&&(t.push(r),r.getAttribute(x)&&(n.activeView=r)),r=i.virtualElements.nextSibling(r);return n.activeView||(n.activeView=t[0]),n}function u(e,t,n){if(S--,0===S){var r=w;w=[],n||setTimeout(function(){for(var n=r.length;n--;)try{r[n]()}catch(a){s(e,a,t)}},1)}c(e)}function c(e){delete e.activeView,delete e.viewElements}function d(t,n,r,a){if(r)n();else if(t.activate&&t.model&&t.model.activate){var o;try{o=e.isArray(t.activationData)?t.model.activate.apply(t.model,t.activationData):t.model.activate(t.activationData),o&&o.then?o.then(n,function(e){s(t,e,a),n()}):o||void 0===o?n():u(t,a)}catch(i){s(t,i,a)}}else n()}function p(t,n){var t=this;if(t.activeView&&t.activeView.removeAttribute(x),t.child)try{t.model&&t.model.attached&&(t.composingNewView||t.alwaysTriggerAttach)&&t.model.attached(t.child,t.parent,t),t.attached&&t.attached(t.child,t.parent,t),t.child.setAttribute(x,!0),t.composingNewView&&t.model&&t.model.detached&&i.utils.domNodeDisposal.addDisposeCallback(t.child,function(){try{t.model.detached(t.child,t.parent,t)}catch(e){s(t,e,n)}})}catch(r){s(t,r,n)}t.triggerAttach=e.noop}function m(t){if(e.isString(t.transition)){if(t.activeView){if(t.activeView==t.child)return!1;if(!t.child)return!0;if(t.skipTransitionOnSameViewId){var n=t.activeView.getAttribute("data-view"),r=t.child.getAttribute("data-view");return n!=r}}return!0}return!1}function f(e){for(var t=0,n=e.length,r=[];n>t;t++){var a=e[t].cloneNode(!0);r.push(a)}return r}function g(t){var n=f(t.parts),r=T.getParts(n),a=T.getParts(t.child);for(var i in r){var s=a[i];s||(s=o('[data-part="'+i+'"]',t.child).get(0))?s.parentNode.replaceChild(r[i],s):e.log("Could not find part to override: "+i)}}function v(t){var n,r,a=i.virtualElements.childNodes(t.parent);if(!e.isArray(a)){var o=[];for(n=0,r=a.length;r>n;n++)o[n]=a[n];a=o}for(n=1,r=a.length;r>n;n++)i.removeNode(a[n])}function b(e){i.utils.domData.set(e,C,e.style.display),e.style.display="none"}function y(e){var t=i.utils.domData.get(e,C);e.style.display="none"===t?"block":t}function h(e){var t=e.getAttribute("data-bind");if(!t)return!1;for(var n=0,r=M.length;r>n;n++)if(t.indexOf(M[n])>-1)return!0;return!1}var T,I={},x="data-active-view",w=[],S=0,A="durandal-composition-data",E="data-part",k=["model","view","transition","area","strategy","activationData","onError"],C="durandal-visibility-data",M=["compose:"],F={complete:function(e){w.push(e)}};return T={composeBindings:M,convertTransitionToModuleId:function(e){return"transitions/"+e},defaultTransitionName:null,current:F,addBindingHandler:function(e,t,n){var r,a,o="composition-handler-"+e;t=t||i.bindingHandlers[e],n=n||function(){return void 0},a=i.bindingHandlers[e]={init:function(e,r,a,s,l){if(S>0){var u={trigger:i.observable(null)};T.current.complete(function(){t.init&&t.init(e,r,a,s,l),t.update&&(i.utils.domData.set(e,o,t),u.trigger("trigger"))}),i.utils.domData.set(e,o,u)}else i.utils.domData.set(e,o,t),t.init&&t.init(e,r,a,s,l);return n(e,r,a,s,l)},update:function(e,t,n,r,a){var s=i.utils.domData.get(e,o);return s.update?s.update(e,t,n,r,a):(s.trigger&&s.trigger(),void 0)}};for(r in t)"init"!==r&&"update"!==r&&(a[r]=t[r])},getParts:function(e,t){if(t=t||{},!e)return t;void 0===e.length&&(e=[e]);for(var n=0,r=e.length;r>n;n++){var a,o=e[n];o.getAttribute&&(a=o.getAttribute(E),a&&(t[a]=o),o.hasChildNodes()&&!h(o)&&T.getParts(o.childNodes,t))}return t},cloneNodes:f,finalize:function(t,r){if(void 0===t.transition&&(t.transition=this.defaultTransitionName),t.child||t.activeView)if(m(t)){var a=this.convertTransitionToModuleId(t.transition);e.acquire(a).then(function(e){t.transition=e,e(t).then(function(){if(t.cacheViews){if(t.activeView){var e=n.getBindingInstruction(t.activeView);e&&void 0!=e.cacheViews&&!e.cacheViews?i.removeNode(t.activeView):b(t.activeView)}}else t.child?v(t):i.virtualElements.emptyNode(t.parent);t.child&&y(t.child),t.triggerAttach(t,r),u(t,r)})}).fail(function(e){s(t,"Failed to load transition ("+a+"). Details: "+e.message,r)})}else{if(t.child!=t.activeView){if(t.cacheViews&&t.activeView){var o=n.getBindingInstruction(t.activeView);!o||void 0!=o.cacheViews&&!o.cacheViews?i.removeNode(t.activeView):b(t.activeView)}t.child?(t.cacheViews||v(t),y(t.child)):t.cacheViews||i.virtualElements.emptyNode(t.parent)}t.triggerAttach(t,r),u(t,r)}else t.cacheViews||i.virtualElements.emptyNode(t.parent),t.triggerAttach(t,r),u(t,r)},bindAndShow:function(e,t,a,o){a.child=e,a.parent.__composition_context=a,a.composingNewView=a.cacheViews?-1==i.utils.arrayIndexOf(a.viewElements,e):!0,d(a,function(){if(a.parent.__composition_context==a){if(delete a.parent.__composition_context,a.binding&&a.binding(a.child,a.parent,a),a.preserveContext&&a.bindingContext)a.composingNewView&&(a.parts&&g(a),b(e),i.virtualElements.prepend(a.parent,e),n.bindContext(a.bindingContext,e,a.model,a.as));else if(e){var o=a.model||I,s=i.dataFor(e);if(s!=o){if(!a.composingNewView)return i.removeNode(e),r.createView(e.getAttribute("data-view")).then(function(e){T.bindAndShow(e,t,a,!0)}),void 0;a.parts&&g(a),b(e),i.virtualElements.prepend(a.parent,e),n.bind(o,e)}}T.finalize(a,t)}else u(a,t)},o,t)},defaultStrategy:function(e){return t.locateViewForObject(e.model,e.area,e.viewElements)},getSettings:function(t){var n,o=t(),s=i.utils.unwrapObservable(o)||{},l=a.isActivator(o);if(e.isString(s))return s=r.isViewUrl(s)?{view:s}:{model:s,activate:!l};if(n=e.getModuleId(s))return s={model:s,activate:!l};!l&&s.model&&(l=a.isActivator(s.model));for(var u in s)s[u]=-1!=i.utils.arrayIndexOf(k,u)?i.utils.unwrapObservable(s[u]):s[u];return l?s.activate=!1:void 0===s.activate&&(s.activate=!0),s},executeStrategy:function(e,t){e.strategy(e).then(function(n){T.bindAndShow(n,t,e)})},inject:function(n,r){return n.model?n.view?(t.locateView(n.view,n.area,n.viewElements).then(function(e){T.bindAndShow(e,r,n)}),void 0):(n.strategy||(n.strategy=this.defaultStrategy),e.isString(n.strategy)?e.acquire(n.strategy).then(function(e){n.strategy=e,T.executeStrategy(n,r)}).fail(function(e){s(n,"Failed to load view strategy ("+n.strategy+"). Details: "+e.message,r)}):this.executeStrategy(n,r),void 0):(this.bindAndShow(null,r,n),void 0)},compose:function(n,r,a,o){S++,o||(r=T.getSettings(function(){return r},n)),r.compositionComplete&&w.push(function(){r.compositionComplete(r.child,r.parent,r)}),w.push(function(){r.composingNewView&&r.model&&r.model.compositionComplete&&r.model.compositionComplete(r.child,r.parent,r)});var i=l(n);r.activeView=i.activeView,r.parent=n,r.triggerAttach=p,r.bindingContext=a,r.cacheViews&&!r.viewElements&&(r.viewElements=i.childElements),r.model?e.isString(r.model)?e.acquire(r.model).then(function(t){r.model=e.resolveObject(t),T.inject(r,n)}).fail(function(e){s(r,"Failed to load composed module ("+r.model+"). Details: "+e.message,n)}):T.inject(r,n):r.view?(r.area=r.area||"partial",r.preserveContext=!0,t.locateView(r.view,r.area,r.viewElements).then(function(e){T.bindAndShow(e,n,r)})):this.bindAndShow(null,n,r)}},i.bindingHandlers.compose={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,a,o){var s=T.getSettings(t,e);if(s.mode){var l=i.utils.domData.get(e,A);if(!l){var u=i.virtualElements.childNodes(e);l={},"inline"===s.mode?l.view=r.ensureSingleElement(u):"templated"===s.mode&&(l.parts=f(u)),i.virtualElements.emptyNode(e),i.utils.domData.set(e,A,l)}"inline"===s.mode?s.view=l.view.cloneNode(!0):"templated"===s.mode&&(s.parts=l.parts),s.preserveContext=!0}T.compose(e,s,o,!0)}},i.virtualElements.allowedBindings.compose=!0,T});
define('durandal/events',["durandal/system"],function(e){var t=/\s+/,n=function(){},r=function(e,t){this.owner=e,this.events=t};return r.prototype.then=function(e,t){return this.callback=e||this.callback,this.context=t||this.context,this.callback?(this.owner.on(this.events,this.callback,this.context),this):this},r.prototype.on=r.prototype.then,r.prototype.off=function(){return this.owner.off(this.events,this.callback,this.context),this},n.prototype.on=function(e,n,a){var o,i,s;if(n){for(o=this.callbacks||(this.callbacks={}),e=e.split(t);i=e.shift();)s=o[i]||(o[i]=[]),s.push(n,a);return this}return new r(this,e)},n.prototype.off=function(n,r,a){var o,i,s,l;if(!(i=this.callbacks))return this;if(!(n||r||a))return delete this.callbacks,this;for(n=n?n.split(t):e.keys(i);o=n.shift();)if((s=i[o])&&(r||a))for(l=s.length-2;l>=0;l-=2)r&&s[l]!==r||a&&s[l+1]!==a||s.splice(l,2);else delete i[o];return this},n.prototype.trigger=function(e){var n,r,a,o,i,s,l,u;if(!(r=this.callbacks))return this;for(u=[],e=e.split(t),o=1,i=arguments.length;i>o;o++)u[o-1]=arguments[o];for(;n=e.shift();){if((l=r.all)&&(l=l.slice()),(a=r[n])&&(a=a.slice()),a)for(o=0,i=a.length;i>o;o+=2)a[o].apply(a[o+1]||this,u);if(l)for(s=[n].concat(u),o=0,i=l.length;i>o;o+=2)l[o].apply(l[o+1]||this,s)}return this},n.prototype.proxy=function(e){var t=this;return function(n){t.trigger(e,n)}},n.includeIn=function(e){e.on=n.prototype.on,e.off=n.prototype.off,e.trigger=n.prototype.trigger,e.proxy=n.prototype.proxy},n});
define('durandal/app',["durandal/system","durandal/viewEngine","durandal/composition","durandal/events","jquery"],function(e,t,n,r,a){function o(){return e.defer(function(t){return 0==s.length?(t.resolve(),void 0):(e.acquire(s).then(function(n){for(var r=0;r<n.length;r++){var a=n[r];if(a.install){var o=l[r];e.isObject(o)||(o={}),a.install(o),e.log("Plugin:Installed "+s[r])}else e.log("Plugin:Loaded "+s[r])}t.resolve()}).fail(function(t){e.error("Failed to load plugin(s). Details: "+t.message)}),void 0)}).promise()}var i,s=[],l=[];return i={title:"Application",configurePlugins:function(t,n){var r=e.keys(t);n=n||"plugins/",-1===n.indexOf("/",n.length-1)&&(n+="/");for(var a=0;a<r.length;a++){var o=r[a];s.push(n+o),l.push(t[o])}},start:function(){return e.log("Application:Starting"),this.title&&(document.title=this.title),e.defer(function(t){a(function(){o().then(function(){t.resolve(),e.log("Application:Started")})})}).promise()},setRoot:function(r,a,o){function i(){if(l.model)if(l.model.canActivate)try{var t=l.model.canActivate();t&&t.then?t.then(function(e){e&&n.compose(s,l)}).fail(function(t){e.error(t)}):t&&n.compose(s,l)}catch(r){e.error(r)}else n.compose(s,l);else n.compose(s,l)}var s,l={activate:!0,transition:a};s=!o||e.isString(o)?document.getElementById(o||"applicationHost"):o,e.isString(r)?t.isViewUrl(r)?l.view=r:l.model=r:l.model=r,e.isString(l.model)?e.acquire(l.model).then(function(t){l.model=e.resolveObject(t),i()}).fail(function(t){e.error("Failed to load root module ("+l.model+"). Details: "+t.message)}):i()}},r.includeIn(i),i});
define('plugins/history',["durandal/system","jquery"],function(e,t){function n(e,t,n){if(n){var r=e.href.replace(/(javascript:|#).*$/,"");s.history.replaceState?s.history.replaceState({},document.title,r+"#"+t):e.replace(r+"#"+t)}else e.hash="#"+t}var r=/^[#\/]|\s+$/g,a=/^\/+|\/+$/g,o=/msie [\w.]+/,i=/\/$/,s={interval:50,active:!1};return"undefined"!=typeof window&&(s.location=window.location,s.history=window.history),s.getHash=function(e){var t=(e||s).location.href.match(/#(.*)$/);return t?t[1]:""},s.getFragment=function(e,t){if(null==e)if(s._hasPushState||!s._wantsHashChange||t){e=s.location.pathname+s.location.search;var n=s.root.replace(i,"");e.indexOf(n)||(e=e.substr(n.length))}else e=s.getHash();return e.replace(r,"")},s.activate=function(n){s.active&&e.error("History has already been activated."),s.active=!0,s.options=e.extend({},{root:"/"},s.options,n),s.root=s.options.root,s._wantsHashChange=s.options.hashChange!==!1,s._wantsPushState=!!s.options.pushState,s._hasPushState=!!(s.options.pushState&&s.history&&s.history.pushState);var i=s.getFragment(),l=document.documentMode,u=o.exec(navigator.userAgent.toLowerCase())&&(!l||7>=l);s.root=("/"+s.root+"/").replace(a,"/"),u&&s._wantsHashChange&&(s.iframe=t('<iframe src="javascript:0" tabindex="-1" />').hide().appendTo("body")[0].contentWindow,s.navigate(i,!1)),s._hasPushState?t(window).on("popstate",s.checkUrl):s._wantsHashChange&&"onhashchange"in window&&!u?t(window).on("hashchange",s.checkUrl):s._wantsHashChange&&(s._checkUrlInterval=setInterval(s.checkUrl,s.interval)),s.fragment=i;var c=s.location,d=c.pathname.replace(/[^\/]$/,"$&/")===s.root;if(s._wantsHashChange&&s._wantsPushState){if(!s._hasPushState&&!d)return s.fragment=s.getFragment(null,!0),s.location.replace(s.root+s.location.search+"#"+s.fragment),!0;s._hasPushState&&d&&c.hash&&(this.fragment=s.getHash().replace(r,""),this.history.replaceState({},document.title,s.root+s.fragment+c.search))}return s.options.silent?void 0:s.loadUrl(n.startRoute)},s.deactivate=function(){t(window).off("popstate",s.checkUrl).off("hashchange",s.checkUrl),clearInterval(s._checkUrlInterval),s.active=!1},s.checkUrl=function(){var e=s.getFragment();return e===s.fragment&&s.iframe&&(e=s.getFragment(s.getHash(s.iframe))),e===s.fragment?!1:(s.iframe&&s.navigate(e,!1),s.loadUrl(),void 0)},s.loadUrl=function(e){var t=s.fragment=s.getFragment(e);return s.options.routeHandler?s.options.routeHandler(t):!1},s.navigate=function(t,r){if(!s.active)return!1;if(void 0===r?r={trigger:!0}:e.isBoolean(r)&&(r={trigger:r}),t=s.getFragment(t||""),s.fragment!==t){s.fragment=t;var a=s.root+t;if(""===t&&"/"!==a&&(a=a.slice(0,-1)),s._hasPushState)s.history[r.replace?"replaceState":"pushState"]({},document.title,a);else{if(!s._wantsHashChange)return s.location.assign(a);n(s.location,t,r.replace),s.iframe&&t!==s.getFragment(s.getHash(s.iframe))&&(r.replace||s.iframe.document.open().close(),n(s.iframe.location,t,r.replace))}return r.trigger?s.loadUrl(t):void 0}},s.navigateBack=function(){s.history.back()},s});
define('plugins/router',["durandal/system","durandal/app","durandal/activator","durandal/events","durandal/composition","plugins/history","knockout","jquery"],function(e,t,n,r,a,o,i,s){function l(e){return e=e.replace(y,"\\$&").replace(g,"(?:$1)?").replace(v,function(e,t){return t?e:"([^/]+)"}).replace(b,"(.*?)"),new RegExp("^"+e+"$",T?void 0:"i")}function u(e){var t=e.indexOf(":"),n=t>0?t-1:e.length;return e.substring(0,n)}function c(e,t){return-1!==e.indexOf(t,e.length-t.length)}function d(e,t){if(!e||!t)return!1;if(e.length!=t.length)return!1;for(var n=0,r=e.length;r>n;n++)if(e[n]!=t[n])return!1;return!0}function p(e){return e.queryString?e.fragment+"?"+e.queryString:e.fragment}var f,m,g=/\((.*?)\)/g,v=/(\(\?)?:\w+/g,b=/\*\w+/g,y=/[\-{}\[\]+?.,\\\^$|#\s]/g,h=/\/$/,T=!1,I="/",x="/",w=function(){function a(e,t){return e.router&&e.router.parent==t}function s(e){L&&L.config.isActive&&L.config.isActive(e)}function g(t,n,r){e.log("Navigation Complete",t,n);var o=e.getModuleId(O);o&&j.trigger("router:navigation:from:"+o),O=t,s(!1),L=n,s(!0);var i=e.getModuleId(O);switch(i&&j.trigger("router:navigation:to:"+i),a(t,j)||j.updateDocumentTitle(t,n),r){case"rootRouter":I=p(L);break;case"rootRouterWithChild":x=p(L);break;case"lastChildRouter":I=x}m.explicitNavigation=!1,m.navigatingBack=!1,j.trigger("router:navigation:complete",t,n,j)}function b(t,n){e.log("Navigation Cancelled"),j.activeInstruction(L),j.navigate(I,!1),N(!1),m.explicitNavigation=!1,m.navigatingBack=!1,j.trigger("router:navigation:cancelled",t,n,j)}function y(t){e.log("Navigation Redirecting"),N(!1),m.explicitNavigation=!1,m.navigatingBack=!1,j.navigate(t,{trigger:!0,replace:!0})}function T(t,n,r){m.navigatingBack=!m.explicitNavigation&&O!=r.fragment,j.trigger("router:route:activating",n,r,j);var o={canDeactivate:!j.parent};t.activateItem(n,r.params,o).then(function(e){if(e){var o=O,i=a(n,j),s="";if(j.parent?i||(s="lastChildRouter"):s=i?"rootRouterWithChild":"rootRouter",g(n,r,s),i){n.router.trigger("router:route:before-child-routes",n,r,j);var l=r.fragment;r.queryString&&(l+="?"+r.queryString),n.router.loadUrl(l)}o==n&&(j.attached(),j.compositionComplete())}else t.settings.lifecycleData&&t.settings.lifecycleData.redirect?y(t.settings.lifecycleData.redirect):b(n,r);f&&(f.resolve(),f=null)}).fail(function(t){e.error(t)})}function S(t,n,r){var a=j.guardRoute(n,r);a||""===a?a.then?a.then(function(a){a?e.isString(a)?y(a):T(t,n,r):b(n,r)}):e.isString(a)?y(a):T(t,n,r):b(n,r)}function A(e,t,n){j.guardRoute?S(e,t,n):T(e,t,n)}function E(e){return L&&L.config.moduleId==e.config.moduleId&&O&&(O.canReuseForRoute&&O.canReuseForRoute.apply(O,e.params)||!O.canReuseForRoute&&O.router&&O.router.loadUrl)}function k(){if(!N()){var t=R.shift();if(R=[],t)if(N(!0),j.activeInstruction(t),j.trigger("router:navigation:processing",t,j),E(t)){var r=n.create();r.forceActiveItem(O),r.settings.areSameItem=D.settings.areSameItem,r.settings.findChildActivator=D.settings.findChildActivator,A(r,O,t)}else t.config.moduleId?e.acquire(t.config.moduleId).then(function(n){var r=e.resolveObject(n);t.config.viewUrl&&(r.viewUrl=t.config.viewUrl),A(D,r,t)}).fail(function(n){e.error("Failed to load routed module ("+t.config.moduleId+"). Details: "+n.message,n)}):A(D,{viewUrl:t.config.viewUrl,canReuseForRoute:function(){return!0}},t)}}function C(e){R.unshift(e),k()}function M(e,t,n){for(var r=e.exec(t).slice(1),a=0;a<r.length;a++){var o=r[a];r[a]=o?decodeURIComponent(o):null}var i=j.parseQueryString(n);return i&&r.push(i),{params:r,queryParams:i}}function _(t){j.trigger("router:route:before-config",t,j),e.isRegExp(t.route)?t.routePattern=t.route:(t.title=t.title||j.convertRouteToTitle(t.route),t.viewUrl||(t.moduleId=t.moduleId||j.convertRouteToModuleId(t.route)),t.hash=t.hash||j.convertRouteToHash(t.route),t.hasChildRoutes&&(t.route=t.route+"*childRoutes"),t.routePattern=l(t.route)),t.isActive=t.isActive||i.observable(!1),j.trigger("router:route:after-config",t,j),j.routes.push(t),j.route(t.routePattern,function(e,n){var r=M(t.routePattern,e,n);C({fragment:e,queryString:n,config:t,params:r.params,queryParams:r.queryParams})})}function P(t){if(e.isArray(t.route))for(var n=t.isActive||i.observable(!1),r=0,a=t.route.length;a>r;r++){var o=e.extend({},t);o.route=t.route[r],o.isActive=n,r>0&&delete o.nav,_(o)}else _(t);return j}function F(e){var n=i.unwrap(t.title);document.title=n?e+" | "+n:e}var O,L,R=[],N=i.observable(!1),D=n.create(),j={handlers:[],routes:[],navigationModel:i.observableArray([]),activeItem:D,isNavigating:i.computed(function(){var e=D(),t=N(),n=e&&e.router&&e.router!=j&&e.router.isNavigating()?!0:!1;return t||n}),activeInstruction:i.observable(null),__router__:!0};r.includeIn(j),D.settings.areSameItem=function(e,t,n,r){return e==t?d(n,r):!1},D.settings.findChildActivator=function(e){return e&&e.router&&e.router.parent==j?e.router.activeItem:null},j.parseQueryString=function(t){var n,r;if(!t)return null;if(r=t.split("&"),0==r.length)return null;n={};for(var a=0;a<r.length;a++){var o=r[a];if(""!==o){var i=o.split(/=(.+)?/),s=i[0],l=i[1]&&decodeURIComponent(i[1].replace(/\+/g," ")),u=n[s];u?e.isArray(u)?u.push(l):n[s]=[u,l]:n[s]=l}}return n},j.route=function(e,t){j.handlers.push({routePattern:e,callback:t})},j.loadUrl=function(t){var n=j.handlers,r=null,a=t,i=t.indexOf("?");if(-1!=i&&(a=t.substring(0,i),r=t.substr(i+1)),j.relativeToParentRouter){var s=this.parent.activeInstruction();a=-1==i?s.params.join("/"):s.params.slice(0,-1).join("/"),a&&"/"==a.charAt(0)&&(a=a.substr(1)),a||(a=""),a=a.replace("//","/").replace("//","/")}a=a.replace(h,"");var l=new RegExp("^code",["i"]).test(t)===!0;if(l){var u=n.find(function(e){return e.routePattern.test("ssoLogin")});return u.callback("ssoLogin",a),!0}for(var c=0;c<n.length;c++){var d=n[c];if(d.routePattern.test(a))return d.callback(a,r),!0}return e.log("Route Not Found",t,L),j.trigger("router:route:not-found",t,j),j.parent&&(I=x),o.navigate(I,{trigger:!1,replace:!0}),m.explicitNavigation=!1,m.navigatingBack=!1,!1};var V;return i.isObservable(t.title)&&t.title.subscribe(function(){var e=j.activeInstruction(),t=null!=e?i.unwrap(e.config.title):"";F(t)}),j.updateDocumentTitle=function(e,n){var r=i.unwrap(t.title),a=n.config.title;V&&V.dispose(),a?i.isObservable(a)?(V=a.subscribe(F),F(a())):F(a):r&&(document.title=r)},j.navigate=function(t,n){return t&&-1!=t.indexOf("://")?(window.location.href=t,!0):((void 0===n||e.isBoolean(n)&&n||e.isObject(n)&&n.trigger)&&(m.explicitNavigation=!0),(e.isBoolean(n)&&!n||n&&void 0!=n.trigger&&!n.trigger)&&(I=t),o.navigate(t,n))},j.navigateBack=function(){o.navigateBack()},j.attached=function(){j.trigger("router:navigation:attached",O,L,j)},j.compositionComplete=function(){N(!1),j.trigger("router:navigation:composition-complete",O,L,j),k()},j.convertRouteToHash=function(e){if(e=e.replace(/\*.*$/,""),j.relativeToParentRouter){var t=j.parent.activeInstruction(),n=e?t.config.hash+"/"+e:t.config.hash;return o._hasPushState&&(n="/"+n),n=n.replace("//","/").replace("//","/")}return o._hasPushState?e:"#"+e},j.convertRouteToModuleId=function(e){return u(e)},j.convertRouteToTitle=function(e){var t=u(e);return t.substring(0,1).toUpperCase()+t.substring(1)},j.map=function(t,n){if(e.isArray(t)){for(var r=0;r<t.length;r++)j.map(t[r]);return j}return e.isString(t)||e.isRegExp(t)?(n?e.isString(n)&&(n={moduleId:n}):n={},n.route=t):n=t,P(n)},j.buildNavigationModel=function(t){for(var n=[],r=j.routes,a=t||100,o=0;o<r.length;o++){var i=r[o];i.nav&&(e.isNumber(i.nav)||(i.nav=++a),n.push(i))}return n.sort(function(e,t){return e.nav-t.nav}),j.navigationModel(n),j},j.mapUnknownRoutes=function(t,n){var r="*catchall",a=l(r);return j.route(a,function(i,s){var l=M(a,i,s),u={fragment:i,queryString:s,config:{route:r,routePattern:a},params:l.params,queryParams:l.queryParams};if(t)if(e.isString(t))u.config.moduleId=t,n&&o.navigate(n,{trigger:!1,replace:!0});else if(e.isFunction(t)){var c=t(u);if(c&&c.then)return c.then(function(){j.trigger("router:route:before-config",u.config,j),j.trigger("router:route:after-config",u.config,j),C(u)}),void 0}else u.config=t,u.config.route=r,u.config.routePattern=a;else u.config.moduleId=i;j.trigger("router:route:before-config",u.config,j),j.trigger("router:route:after-config",u.config,j),C(u)}),j},j.reset=function(){return L=O=void 0,j.handlers=[],j.routes=[],j.off(),delete j.options,j},j.makeRelative=function(t){return e.isString(t)&&(t={moduleId:t,route:t}),t.moduleId&&!c(t.moduleId,"/")&&(t.moduleId+="/"),t.route&&!c(t.route,"/")&&(t.route+="/"),t.fromParent&&(j.relativeToParentRouter=!0),j.on("router:route:before-config").then(function(e){t.moduleId&&(e.moduleId=t.moduleId+e.moduleId),t.route&&(e.route=""===e.route?t.route.substring(0,t.route.length-1):t.route+e.route)}),t.dynamicHash&&(j.on("router:route:after-config").then(function(e){e.routePattern=l(e.route?t.dynamicHash+"/"+e.route:t.dynamicHash),e.dynamicHash=e.dynamicHash||i.observable(e.hash)}),j.on("router:route:before-child-routes").then(function(e,t){for(var n=e.router,r=0;r<n.routes.length;r++){var a=n.routes[r],o=t.params.slice(0);a.hash=n.convertRouteToHash(a.route).replace(v,function(e){return o.length>0?o.shift():e}),a.dynamicHash(a.hash)}})),j},j.createChildRouter=function(){var e=w();return e.parent=j,e},j};return m=w(),m.explicitNavigation=!1,m.navigatingBack=!1,m.makeRoutesCaseSensitive=function(){T=!0},m.targetIsThisWindow=function(e){var t=s(e.target).attr("target");return!t||t===window.name||"_self"===t||"top"===t&&window===window.top?!0:!1},m.activate=function(t){return e.defer(function(n){if(f=n,m.options=e.extend({routeHandler:m.loadUrl},m.options,t),o.activate(m.options),o._hasPushState)for(var r=m.routes,a=r.length;a--;){var i=r[a];i.hash=i.hash.replace("#","/")}var l=m.options.root&&new RegExp("^"+m.options.root+"/");s(document).delegate("a","click",function(e){if(o._hasPushState){if(!e.altKey&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&m.targetIsThisWindow(e)){var t=s(this).attr("href");null==t||"#"===t.charAt(0)||/^[a-z]+:/i.test(t)||(m.explicitNavigation=!0,e.preventDefault(),l&&(t=t.replace(l,"")),o.navigate(t))}}else m.explicitNavigation=!0}),o.options.silent&&f&&(f.resolve(),f=null)}).promise()},m.deactivate=function(){o.deactivate()},m.install=function(){i.bindingHandlers.router={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,o){var s=i.utils.unwrapObservable(t())||{};if(s.__router__)s={model:s.activeItem(),attached:s.attached,compositionComplete:s.compositionComplete,activate:!1};else{var l=i.utils.unwrapObservable(s.router||r.router)||m;s.model=l.activeItem(),s.attached=l.attached,s.compositionComplete=l.compositionComplete,s.activate=!1}a.compose(e,s,o)}},i.virtualElements.allowedBindings.router=!0},m});
// ┌────────────────────────────────────────────────────────────────────┐ \\
// │ Raphaël 2.1.2 - JavaScript Vector Library                          │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Copyright © 2008-2012 Dmitry Baranovskiy (http://raphaeljs.com)    │ \\
// │ Copyright © 2008-2012 Sencha Labs (http://sencha.com)              │ \\
// ├────────────────────────────────────────────────────────────────────┤ \\
// │ Licensed under the MIT (http://raphaeljs.com/license.html) license.│ \\
// └────────────────────────────────────────────────────────────────────┘ \\
!function (a) { var b, c, d = "0.4.2", e = "hasOwnProperty", f = /[\.\/]/, g = "*", h = function () { }, i = function (a, b) { return a - b }, j = { n: {} }, k = function (a, d) { a = String(a); var e, f = c, g = Array.prototype.slice.call(arguments, 2), h = k.listeners(a), j = 0, l = [], m = {}, n = [], o = b; b = a, c = 0; for (var p = 0, q = h.length; q > p; p++) "zIndex" in h[p] && (l.push(h[p].zIndex), h[p].zIndex < 0 && (m[h[p].zIndex] = h[p])); for (l.sort(i) ; l[j] < 0;) if (e = m[l[j++]], n.push(e.apply(d, g)), c) return c = f, n; for (p = 0; q > p; p++) if (e = h[p], "zIndex" in e) if (e.zIndex == l[j]) { if (n.push(e.apply(d, g)), c) break; do if (j++, e = m[l[j]], e && n.push(e.apply(d, g)), c) break; while (e) } else m[e.zIndex] = e; else if (n.push(e.apply(d, g)), c) break; return c = f, b = o, n.length ? n : null }; k._events = j, k.listeners = function (a) { var b, c, d, e, h, i, k, l, m = a.split(f), n = j, o = [n], p = []; for (e = 0, h = m.length; h > e; e++) { for (l = [], i = 0, k = o.length; k > i; i++) for (n = o[i].n, c = [n[m[e]], n[g]], d = 2; d--;) b = c[d], b && (l.push(b), p = p.concat(b.f || [])); o = l } return p }, k.on = function (a, b) { if (a = String(a), "function" != typeof b) return function () { }; for (var c = a.split(f), d = j, e = 0, g = c.length; g > e; e++) d = d.n, d = d.hasOwnProperty(c[e]) && d[c[e]] || (d[c[e]] = { n: {} }); for (d.f = d.f || [], e = 0, g = d.f.length; g > e; e++) if (d.f[e] == b) return h; return d.f.push(b), function (a) { +a == +a && (b.zIndex = +a) } }, k.f = function (a) { var b = [].slice.call(arguments, 1); return function () { k.apply(null, [a, null].concat(b).concat([].slice.call(arguments, 0))) } }, k.stop = function () { c = 1 }, k.nt = function (a) { return a ? new RegExp("(?:\\.|\\/|^)" + a + "(?:\\.|\\/|$)").test(b) : b }, k.nts = function () { return b.split(f) }, k.off = k.unbind = function (a, b) { if (!a) return void (k._events = j = { n: {} }); var c, d, h, i, l, m, n, o = a.split(f), p = [j]; for (i = 0, l = o.length; l > i; i++) for (m = 0; m < p.length; m += h.length - 2) { if (h = [m, 1], c = p[m].n, o[i] != g) c[o[i]] && h.push(c[o[i]]); else for (d in c) c[e](d) && h.push(c[d]); p.splice.apply(p, h) } for (i = 0, l = p.length; l > i; i++) for (c = p[i]; c.n;) { if (b) { if (c.f) { for (m = 0, n = c.f.length; n > m; m++) if (c.f[m] == b) { c.f.splice(m, 1); break } !c.f.length && delete c.f } for (d in c.n) if (c.n[e](d) && c.n[d].f) { var q = c.n[d].f; for (m = 0, n = q.length; n > m; m++) if (q[m] == b) { q.splice(m, 1); break } !q.length && delete c.n[d].f } } else { delete c.f; for (d in c.n) c.n[e](d) && c.n[d].f && delete c.n[d].f } c = c.n } }, k.once = function (a, b) { var c = function () { return k.unbind(a, c), b.apply(this, arguments) }; return k.on(a, c) }, k.version = d, k.toString = function () { return "You are running Eve " + d }, "undefined" != typeof module && module.exports ? module.exports = k : "undefined" != typeof define ? define("eve", [], function () { return k }) : a.eve = k }(window || this), function (a, b) { "function" == typeof define && define.amd ? define('raphael',["eve"], function (c) { return b(a, c) }) : b(a, a.eve) }(this, function (a, b) {
    function c(a) { if (c.is(a, "function")) return u ? a() : b.on("raphael.DOMload", a); if (c.is(a, V)) return c._engine.create[D](c, a.splice(0, 3 + c.is(a[0], T))).add(a); var d = Array.prototype.slice.call(arguments, 0); if (c.is(d[d.length - 1], "function")) { var e = d.pop(); return u ? e.call(c._engine.create[D](c, d)) : b.on("raphael.DOMload", function () { e.call(c._engine.create[D](c, d)) }) } return c._engine.create[D](c, arguments) } function d(a) { if ("function" == typeof a || Object(a) !== a) return a; var b = new a.constructor; for (var c in a) a[z](c) && (b[c] = d(a[c])); return b } function e(a, b) { for (var c = 0, d = a.length; d > c; c++) if (a[c] === b) return a.push(a.splice(c, 1)[0]) } function f(a, b, c) { function d() { var f = Array.prototype.slice.call(arguments, 0), g = f.join("␀"), h = d.cache = d.cache || {}, i = d.count = d.count || []; return h[z](g) ? (e(i, g), c ? c(h[g]) : h[g]) : (i.length >= 1e3 && delete h[i.shift()], i.push(g), h[g] = a[D](b, f), c ? c(h[g]) : h[g]) } return d } function g() { return this.hex } function h(a, b) { for (var c = [], d = 0, e = a.length; e - 2 * !b > d; d += 2) { var f = [{ x: +a[d - 2], y: +a[d - 1] }, { x: +a[d], y: +a[d + 1] }, { x: +a[d + 2], y: +a[d + 3] }, { x: +a[d + 4], y: +a[d + 5] }]; b ? d ? e - 4 == d ? f[3] = { x: +a[0], y: +a[1] } : e - 2 == d && (f[2] = { x: +a[0], y: +a[1] }, f[3] = { x: +a[2], y: +a[3] }) : f[0] = { x: +a[e - 2], y: +a[e - 1] } : e - 4 == d ? f[3] = f[2] : d || (f[0] = { x: +a[d], y: +a[d + 1] }), c.push(["C", (-f[0].x + 6 * f[1].x + f[2].x) / 6, (-f[0].y + 6 * f[1].y + f[2].y) / 6, (f[1].x + 6 * f[2].x - f[3].x) / 6, (f[1].y + 6 * f[2].y - f[3].y) / 6, f[2].x, f[2].y]) } return c } function i(a, b, c, d, e) { var f = -3 * b + 9 * c - 9 * d + 3 * e, g = a * f + 6 * b - 12 * c + 6 * d; return a * g - 3 * b + 3 * c } function j(a, b, c, d, e, f, g, h, j) { null == j && (j = 1), j = j > 1 ? 1 : 0 > j ? 0 : j; for (var k = j / 2, l = 12, m = [-.1252, .1252, -.3678, .3678, -.5873, .5873, -.7699, .7699, -.9041, .9041, -.9816, .9816], n = [.2491, .2491, .2335, .2335, .2032, .2032, .1601, .1601, .1069, .1069, .0472, .0472], o = 0, p = 0; l > p; p++) { var q = k * m[p] + k, r = i(q, a, c, e, g), s = i(q, b, d, f, h), t = r * r + s * s; o += n[p] * N.sqrt(t) } return k * o } function k(a, b, c, d, e, f, g, h, i) { if (!(0 > i || j(a, b, c, d, e, f, g, h) < i)) { var k, l = 1, m = l / 2, n = l - m, o = .01; for (k = j(a, b, c, d, e, f, g, h, n) ; Q(k - i) > o;) m /= 2, n += (i > k ? 1 : -1) * m, k = j(a, b, c, d, e, f, g, h, n); return n } } function l(a, b, c, d, e, f, g, h) { if (!(O(a, c) < P(e, g) || P(a, c) > O(e, g) || O(b, d) < P(f, h) || P(b, d) > O(f, h))) { var i = (a * d - b * c) * (e - g) - (a - c) * (e * h - f * g), j = (a * d - b * c) * (f - h) - (b - d) * (e * h - f * g), k = (a - c) * (f - h) - (b - d) * (e - g); if (k) { var l = i / k, m = j / k, n = +l.toFixed(2), o = +m.toFixed(2); if (!(n < +P(a, c).toFixed(2) || n > +O(a, c).toFixed(2) || n < +P(e, g).toFixed(2) || n > +O(e, g).toFixed(2) || o < +P(b, d).toFixed(2) || o > +O(b, d).toFixed(2) || o < +P(f, h).toFixed(2) || o > +O(f, h).toFixed(2))) return { x: l, y: m } } } } function m(a, b, d) { var e = c.bezierBBox(a), f = c.bezierBBox(b); if (!c.isBBoxIntersect(e, f)) return d ? 0 : []; for (var g = j.apply(0, a), h = j.apply(0, b), i = O(~~(g / 5), 1), k = O(~~(h / 5), 1), m = [], n = [], o = {}, p = d ? 0 : [], q = 0; i + 1 > q; q++) { var r = c.findDotsAtSegment.apply(c, a.concat(q / i)); m.push({ x: r.x, y: r.y, t: q / i }) } for (q = 0; k + 1 > q; q++) r = c.findDotsAtSegment.apply(c, b.concat(q / k)), n.push({ x: r.x, y: r.y, t: q / k }); for (q = 0; i > q; q++) for (var s = 0; k > s; s++) { var t = m[q], u = m[q + 1], v = n[s], w = n[s + 1], x = Q(u.x - t.x) < .001 ? "y" : "x", y = Q(w.x - v.x) < .001 ? "y" : "x", z = l(t.x, t.y, u.x, u.y, v.x, v.y, w.x, w.y); if (z) { if (o[z.x.toFixed(4)] == z.y.toFixed(4)) continue; o[z.x.toFixed(4)] = z.y.toFixed(4); var A = t.t + Q((z[x] - t[x]) / (u[x] - t[x])) * (u.t - t.t), B = v.t + Q((z[y] - v[y]) / (w[y] - v[y])) * (w.t - v.t); A >= 0 && 1.001 >= A && B >= 0 && 1.001 >= B && (d ? p++ : p.push({ x: z.x, y: z.y, t1: P(A, 1), t2: P(B, 1) })) } } return p } function n(a, b, d) { a = c._path2curve(a), b = c._path2curve(b); for (var e, f, g, h, i, j, k, l, n, o, p = d ? 0 : [], q = 0, r = a.length; r > q; q++) { var s = a[q]; if ("M" == s[0]) e = i = s[1], f = j = s[2]; else { "C" == s[0] ? (n = [e, f].concat(s.slice(1)), e = n[6], f = n[7]) : (n = [e, f, e, f, i, j, i, j], e = i, f = j); for (var t = 0, u = b.length; u > t; t++) { var v = b[t]; if ("M" == v[0]) g = k = v[1], h = l = v[2]; else { "C" == v[0] ? (o = [g, h].concat(v.slice(1)), g = o[6], h = o[7]) : (o = [g, h, g, h, k, l, k, l], g = k, h = l); var w = m(n, o, d); if (d) p += w; else { for (var x = 0, y = w.length; y > x; x++) w[x].segment1 = q, w[x].segment2 = t, w[x].bez1 = n, w[x].bez2 = o; p = p.concat(w) } } } } } return p } function o(a, b, c, d, e, f) { null != a ? (this.a = +a, this.b = +b, this.c = +c, this.d = +d, this.e = +e, this.f = +f) : (this.a = 1, this.b = 0, this.c = 0, this.d = 1, this.e = 0, this.f = 0) } function p() { return this.x + H + this.y + H + this.width + " × " + this.height } function q(a, b, c, d, e, f) { function g(a) { return ((l * a + k) * a + j) * a } function h(a, b) { var c = i(a, b); return ((o * c + n) * c + m) * c } function i(a, b) { var c, d, e, f, h, i; for (e = a, i = 0; 8 > i; i++) { if (f = g(e) - a, Q(f) < b) return e; if (h = (3 * l * e + 2 * k) * e + j, Q(h) < 1e-6) break; e -= f / h } if (c = 0, d = 1, e = a, c > e) return c; if (e > d) return d; for (; d > c;) { if (f = g(e), Q(f - a) < b) return e; a > f ? c = e : d = e, e = (d - c) / 2 + c } return e } var j = 3 * b, k = 3 * (d - b) - j, l = 1 - j - k, m = 3 * c, n = 3 * (e - c) - m, o = 1 - m - n; return h(a, 1 / (200 * f)) } function r(a, b) { var c = [], d = {}; if (this.ms = b, this.times = 1, a) { for (var e in a) a[z](e) && (d[_(e)] = a[e], c.push(_(e))); c.sort(lb) } this.anim = d, this.top = c[c.length - 1], this.percents = c } function s(a, d, e, f, g, h) { e = _(e); var i, j, k, l, m, n, p = a.ms, r = {}, s = {}, t = {}; if (f) for (v = 0, x = ic.length; x > v; v++) { var u = ic[v]; if (u.el.id == d.id && u.anim == a) { u.percent != e ? (ic.splice(v, 1), k = 1) : j = u, d.attr(u.totalOrigin); break } } else f = +s; for (var v = 0, x = a.percents.length; x > v; v++) { if (a.percents[v] == e || a.percents[v] > f * a.top) { e = a.percents[v], m = a.percents[v - 1] || 0, p = p / a.top * (e - m), l = a.percents[v + 1], i = a.anim[e]; break } f && d.attr(a.anim[a.percents[v]]) } if (i) { if (j) j.initstatus = f, j.start = new Date - j.ms * f; else { for (var y in i) if (i[z](y) && (db[z](y) || d.paper.customAttributes[z](y))) switch (r[y] = d.attr(y), null == r[y] && (r[y] = cb[y]), s[y] = i[y], db[y]) { case T: t[y] = (s[y] - r[y]) / p; break; case "colour": r[y] = c.getRGB(r[y]); var A = c.getRGB(s[y]); t[y] = { r: (A.r - r[y].r) / p, g: (A.g - r[y].g) / p, b: (A.b - r[y].b) / p }; break; case "path": var B = Kb(r[y], s[y]), C = B[1]; for (r[y] = B[0], t[y] = [], v = 0, x = r[y].length; x > v; v++) { t[y][v] = [0]; for (var D = 1, F = r[y][v].length; F > D; D++) t[y][v][D] = (C[v][D] - r[y][v][D]) / p } break; case "transform": var G = d._, H = Pb(G[y], s[y]); if (H) for (r[y] = H.from, s[y] = H.to, t[y] = [], t[y].real = !0, v = 0, x = r[y].length; x > v; v++) for (t[y][v] = [r[y][v][0]], D = 1, F = r[y][v].length; F > D; D++) t[y][v][D] = (s[y][v][D] - r[y][v][D]) / p; else { var K = d.matrix || new o, L = { _: { transform: G.transform }, getBBox: function () { return d.getBBox(1) } }; r[y] = [K.a, K.b, K.c, K.d, K.e, K.f], Nb(L, s[y]), s[y] = L._.transform, t[y] = [(L.matrix.a - K.a) / p, (L.matrix.b - K.b) / p, (L.matrix.c - K.c) / p, (L.matrix.d - K.d) / p, (L.matrix.e - K.e) / p, (L.matrix.f - K.f) / p] } break; case "csv": var M = I(i[y])[J](w), N = I(r[y])[J](w); if ("clip-rect" == y) for (r[y] = N, t[y] = [], v = N.length; v--;) t[y][v] = (M[v] - r[y][v]) / p; s[y] = M; break; default: for (M = [][E](i[y]), N = [][E](r[y]), t[y] = [], v = d.paper.customAttributes[y].length; v--;) t[y][v] = ((M[v] || 0) - (N[v] || 0)) / p } var O = i.easing, P = c.easing_formulas[O]; if (!P) if (P = I(O).match(Z), P && 5 == P.length) { var Q = P; P = function (a) { return q(a, +Q[1], +Q[2], +Q[3], +Q[4], p) } } else P = nb; if (n = i.start || a.start || +new Date, u = { anim: a, percent: e, timestamp: n, start: n + (a.del || 0), status: 0, initstatus: f || 0, stop: !1, ms: p, easing: P, from: r, diff: t, to: s, el: d, callback: i.callback, prev: m, next: l, repeat: h || a.times, origin: d.attr(), totalOrigin: g }, ic.push(u), f && !j && !k && (u.stop = !0, u.start = new Date - p * f, 1 == ic.length)) return kc(); k && (u.start = new Date - u.ms * f), 1 == ic.length && jc(kc) } b("raphael.anim.start." + d.id, d, a) } } function t(a) { for (var b = 0; b < ic.length; b++) ic[b].el.paper == a && ic.splice(b--, 1) } c.version = "2.1.2", c.eve = b; var u, v, w = /[, ]+/, x = { circle: 1, rect: 1, path: 1, ellipse: 1, text: 1, image: 1 }, y = /\{(\d+)\}/g, z = "hasOwnProperty", A = { doc: document, win: a }, B = { was: Object.prototype[z].call(A.win, "Raphael"), is: A.win.Raphael }, C = function () { this.ca = this.customAttributes = {} }, D = "apply", E = "concat", F = "ontouchstart" in A.win || A.win.DocumentTouch && A.doc instanceof DocumentTouch, G = "", H = " ", I = String, J = "split", K = "click dblclick mousedown mousemove mouseout mouseover mouseup touchstart touchmove touchend touchcancel"[J](H), L = { mousedown: "touchstart", mousemove: "touchmove", mouseup: "touchend" }, M = I.prototype.toLowerCase, N = Math, O = N.max, P = N.min, Q = N.abs, R = N.pow, S = N.PI, T = "number", U = "string", V = "array", W = Object.prototype.toString, X = (c._ISURL = /^url\(['"]?([^\)]+?)['"]?\)$/i, /^\s*((#[a-f\d]{6})|(#[a-f\d]{3})|rgba?\(\s*([\d\.]+%?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+%?(?:\s*,\s*[\d\.]+%?)?)\s*\)|hsba?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\)|hsla?\(\s*([\d\.]+(?:deg|\xb0|%)?\s*,\s*[\d\.]+%?\s*,\s*[\d\.]+(?:%?\s*,\s*[\d\.]+)?)%?\s*\))\s*$/i), Y = { NaN: 1, Infinity: 1, "-Infinity": 1 }, Z = /^(?:cubic-)?bezier\(([^,]+),([^,]+),([^,]+),([^\)]+)\)/, $ = N.round, _ = parseFloat, ab = parseInt, bb = I.prototype.toUpperCase, cb = c._availableAttrs = { "arrow-end": "none", "arrow-start": "none", blur: 0, "clip-rect": "0 0 1e9 1e9", cursor: "default", cx: 0, cy: 0, fill: "#fff", "fill-opacity": 1, font: '10px "Arial"', "font-family": '"Arial"', "font-size": "10", "font-style": "normal", "font-weight": 400, gradient: 0, height: 0, href: "http://raphaeljs.com/", "letter-spacing": 0, opacity: 1, path: "M0,0", r: 0, rx: 0, ry: 0, src: "", stroke: "#000", "stroke-dasharray": "", "stroke-linecap": "butt", "stroke-linejoin": "butt", "stroke-miterlimit": 0, "stroke-opacity": 1, "stroke-width": 1, target: "_blank", "text-anchor": "middle", title: "Raphael", transform: "", width: 0, x: 0, y: 0 }, db = c._availableAnimAttrs = { blur: T, "clip-rect": "csv", cx: T, cy: T, fill: "colour", "fill-opacity": T, "font-size": T, height: T, opacity: T, path: "path", r: T, rx: T, ry: T, stroke: "colour", "stroke-opacity": T, "stroke-width": T, transform: "transform", width: T, x: T, y: T }, eb = /[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/, fb = { hs: 1, rg: 1 }, gb = /,?([achlmqrstvxz]),?/gi, hb = /([achlmrqstvz])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, ib = /([rstm])[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029,]*((-?\d*\.?\d*(?:e[\-+]?\d+)?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*)+)/gi, jb = /(-?\d*\.?\d*(?:e[\-+]?\d+)?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,?[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*/gi, kb = (c._radial_gradient = /^r(?:\(([^,]+?)[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*,[\x09\x0a\x0b\x0c\x0d\x20\xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029]*([^\)]+?)\))?/, {}), lb = function (a, b) { return _(a) - _(b) }, mb = function () { }, nb = function (a) { return a }, ob = c._rectPath = function (a, b, c, d, e) { return e ? [["M", a + e, b], ["l", c - 2 * e, 0], ["a", e, e, 0, 0, 1, e, e], ["l", 0, d - 2 * e], ["a", e, e, 0, 0, 1, -e, e], ["l", 2 * e - c, 0], ["a", e, e, 0, 0, 1, -e, -e], ["l", 0, 2 * e - d], ["a", e, e, 0, 0, 1, e, -e], ["z"]] : [["M", a, b], ["l", c, 0], ["l", 0, d], ["l", -c, 0], ["z"]] }, pb = function (a, b, c, d) { return null == d && (d = c), [["M", a, b], ["m", 0, -d], ["a", c, d, 0, 1, 1, 0, 2 * d], ["a", c, d, 0, 1, 1, 0, -2 * d], ["z"]] }, qb = c._getPath = { path: function (a) { return a.attr("path") }, circle: function (a) { var b = a.attrs; return pb(b.cx, b.cy, b.r) }, ellipse: function (a) { var b = a.attrs; return pb(b.cx, b.cy, b.rx, b.ry) }, rect: function (a) { var b = a.attrs; return ob(b.x, b.y, b.width, b.height, b.r) }, image: function (a) { var b = a.attrs; return ob(b.x, b.y, b.width, b.height) }, text: function (a) { var b = a._getBBox(); return ob(b.x, b.y, b.width, b.height) }, set: function (a) { var b = a._getBBox(); return ob(b.x, b.y, b.width, b.height) } }, rb = c.mapPath = function (a, b) { if (!b) return a; var c, d, e, f, g, h, i; for (a = Kb(a), e = 0, g = a.length; g > e; e++) for (i = a[e], f = 1, h = i.length; h > f; f += 2) c = b.x(i[f], i[f + 1]), d = b.y(i[f], i[f + 1]), i[f] = c, i[f + 1] = d; return a }; if (c._g = A, c.type = A.win.SVGAngle || A.doc.implementation.hasFeature("http://www.w3.org/TR/SVG11/feature#BasicStructure", "1.1") ? "SVG" : "VML", "VML" == c.type) { var sb, tb = A.doc.createElement("div"); if (tb.innerHTML = '<v:shape adj="1"/>', sb = tb.firstChild, sb.style.behavior = "url(#default#VML)", !sb || "object" != typeof sb.adj) return c.type = G; tb = null } c.svg = !(c.vml = "VML" == c.type), c._Paper = C, c.fn = v = C.prototype = c.prototype, c._id = 0, c._oid = 0, c.is = function (a, b) { return b = M.call(b), "finite" == b ? !Y[z](+a) : "array" == b ? a instanceof Array : "null" == b && null === a || b == typeof a && null !== a || "object" == b && a === Object(a) || "array" == b && Array.isArray && Array.isArray(a) || W.call(a).slice(8, -1).toLowerCase() == b }, c.angle = function (a, b, d, e, f, g) { if (null == f) { var h = a - d, i = b - e; return h || i ? (180 + 180 * N.atan2(-i, -h) / S + 360) % 360 : 0 } return c.angle(a, b, f, g) - c.angle(d, e, f, g) }, c.rad = function (a) { return a % 360 * S / 180 }, c.deg = function (a) { return 180 * a / S % 360 }, c.snapTo = function (a, b, d) { if (d = c.is(d, "finite") ? d : 10, c.is(a, V)) { for (var e = a.length; e--;) if (Q(a[e] - b) <= d) return a[e] } else { a = +a; var f = b % a; if (d > f) return b - f; if (f > a - d) return b - f + a } return b }; c.createUUID = function (a, b) { return function () { return "xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(a, b).toUpperCase() } }(/[xy]/g, function (a) { var b = 16 * N.random() | 0, c = "x" == a ? b : 3 & b | 8; return c.toString(16) }); c.setWindow = function (a) { b("raphael.setWindow", c, A.win, a), A.win = a, A.doc = A.win.document, c._engine.initWin && c._engine.initWin(A.win) }; var ub = function (a) { if (c.vml) { var b, d = /^\s+|\s+$/g; try { var e = new ActiveXObject("htmlfile"); e.write("<body>"), e.close(), b = e.body } catch (g) { b = createPopup().document.body } var h = b.createTextRange(); ub = f(function (a) { try { b.style.color = I(a).replace(d, G); var c = h.queryCommandValue("ForeColor"); return c = (255 & c) << 16 | 65280 & c | (16711680 & c) >>> 16, "#" + ("000000" + c.toString(16)).slice(-6) } catch (e) { return "none" } }) } else { var i = A.doc.createElement("i"); i.title = "Raphaël Colour Picker", i.style.display = "none", A.doc.body.appendChild(i), ub = f(function (a) { return i.style.color = a, A.doc.defaultView.getComputedStyle(i, G).getPropertyValue("color") }) } return ub(a) }, vb = function () { return "hsb(" + [this.h, this.s, this.b] + ")" }, wb = function () { return "hsl(" + [this.h, this.s, this.l] + ")" }, xb = function () { return this.hex }, yb = function (a, b, d) { if (null == b && c.is(a, "object") && "r" in a && "g" in a && "b" in a && (d = a.b, b = a.g, a = a.r), null == b && c.is(a, U)) { var e = c.getRGB(a); a = e.r, b = e.g, d = e.b } return (a > 1 || b > 1 || d > 1) && (a /= 255, b /= 255, d /= 255), [a, b, d] }, zb = function (a, b, d, e) { a *= 255, b *= 255, d *= 255; var f = { r: a, g: b, b: d, hex: c.rgb(a, b, d), toString: xb }; return c.is(e, "finite") && (f.opacity = e), f }; c.color = function (a) { var b; return c.is(a, "object") && "h" in a && "s" in a && "b" in a ? (b = c.hsb2rgb(a), a.r = b.r, a.g = b.g, a.b = b.b, a.hex = b.hex) : c.is(a, "object") && "h" in a && "s" in a && "l" in a ? (b = c.hsl2rgb(a), a.r = b.r, a.g = b.g, a.b = b.b, a.hex = b.hex) : (c.is(a, "string") && (a = c.getRGB(a)), c.is(a, "object") && "r" in a && "g" in a && "b" in a ? (b = c.rgb2hsl(a), a.h = b.h, a.s = b.s, a.l = b.l, b = c.rgb2hsb(a), a.v = b.b) : (a = { hex: "none" }, a.r = a.g = a.b = a.h = a.s = a.v = a.l = -1)), a.toString = xb, a }, c.hsb2rgb = function (a, b, c, d) { this.is(a, "object") && "h" in a && "s" in a && "b" in a && (c = a.b, b = a.s, a = a.h, d = a.o), a *= 360; var e, f, g, h, i; return a = a % 360 / 60, i = c * b, h = i * (1 - Q(a % 2 - 1)), e = f = g = c - i, a = ~~a, e += [i, h, 0, 0, h, i][a], f += [h, i, i, h, 0, 0][a], g += [0, 0, h, i, i, h][a], zb(e, f, g, d) }, c.hsl2rgb = function (a, b, c, d) { this.is(a, "object") && "h" in a && "s" in a && "l" in a && (c = a.l, b = a.s, a = a.h), (a > 1 || b > 1 || c > 1) && (a /= 360, b /= 100, c /= 100), a *= 360; var e, f, g, h, i; return a = a % 360 / 60, i = 2 * b * (.5 > c ? c : 1 - c), h = i * (1 - Q(a % 2 - 1)), e = f = g = c - i / 2, a = ~~a, e += [i, h, 0, 0, h, i][a], f += [h, i, i, h, 0, 0][a], g += [0, 0, h, i, i, h][a], zb(e, f, g, d) }, c.rgb2hsb = function (a, b, c) { c = yb(a, b, c), a = c[0], b = c[1], c = c[2]; var d, e, f, g; return f = O(a, b, c), g = f - P(a, b, c), d = 0 == g ? null : f == a ? (b - c) / g : f == b ? (c - a) / g + 2 : (a - b) / g + 4, d = (d + 360) % 6 * 60 / 360, e = 0 == g ? 0 : g / f, { h: d, s: e, b: f, toString: vb } }, c.rgb2hsl = function (a, b, c) { c = yb(a, b, c), a = c[0], b = c[1], c = c[2]; var d, e, f, g, h, i; return g = O(a, b, c), h = P(a, b, c), i = g - h, d = 0 == i ? null : g == a ? (b - c) / i : g == b ? (c - a) / i + 2 : (a - b) / i + 4, d = (d + 360) % 6 * 60 / 360, f = (g + h) / 2, e = 0 == i ? 0 : .5 > f ? i / (2 * f) : i / (2 - 2 * f), { h: d, s: e, l: f, toString: wb } }, c._path2string = function () { return this.join(",").replace(gb, "$1") }; c._preload = function (a, b) { var c = A.doc.createElement("img"); c.style.cssText = "position:absolute;left:-9999em;top:-9999em", c.onload = function () { b.call(this), this.onload = null, A.doc.body.removeChild(this) }, c.onerror = function () { A.doc.body.removeChild(this) }, A.doc.body.appendChild(c), c.src = a }; c.getRGB = f(function (a) { if (!a || (a = I(a)).indexOf("-") + 1) return { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: g }; if ("none" == a) return { r: -1, g: -1, b: -1, hex: "none", toString: g }; !(fb[z](a.toLowerCase().substring(0, 2)) || "#" == a.charAt()) && (a = ub(a)); var b, d, e, f, h, i, j = a.match(X); return j ? (j[2] && (e = ab(j[2].substring(5), 16), d = ab(j[2].substring(3, 5), 16), b = ab(j[2].substring(1, 3), 16)), j[3] && (e = ab((h = j[3].charAt(3)) + h, 16), d = ab((h = j[3].charAt(2)) + h, 16), b = ab((h = j[3].charAt(1)) + h, 16)), j[4] && (i = j[4][J](eb), b = _(i[0]), "%" == i[0].slice(-1) && (b *= 2.55), d = _(i[1]), "%" == i[1].slice(-1) && (d *= 2.55), e = _(i[2]), "%" == i[2].slice(-1) && (e *= 2.55), "rgba" == j[1].toLowerCase().slice(0, 4) && (f = _(i[3])), i[3] && "%" == i[3].slice(-1) && (f /= 100)), j[5] ? (i = j[5][J](eb), b = _(i[0]), "%" == i[0].slice(-1) && (b *= 2.55), d = _(i[1]), "%" == i[1].slice(-1) && (d *= 2.55), e = _(i[2]), "%" == i[2].slice(-1) && (e *= 2.55), ("deg" == i[0].slice(-3) || "°" == i[0].slice(-1)) && (b /= 360), "hsba" == j[1].toLowerCase().slice(0, 4) && (f = _(i[3])), i[3] && "%" == i[3].slice(-1) && (f /= 100), c.hsb2rgb(b, d, e, f)) : j[6] ? (i = j[6][J](eb), b = _(i[0]), "%" == i[0].slice(-1) && (b *= 2.55), d = _(i[1]), "%" == i[1].slice(-1) && (d *= 2.55), e = _(i[2]), "%" == i[2].slice(-1) && (e *= 2.55), ("deg" == i[0].slice(-3) || "°" == i[0].slice(-1)) && (b /= 360), "hsla" == j[1].toLowerCase().slice(0, 4) && (f = _(i[3])), i[3] && "%" == i[3].slice(-1) && (f /= 100), c.hsl2rgb(b, d, e, f)) : (j = { r: b, g: d, b: e, toString: g }, j.hex = "#" + (16777216 | e | d << 8 | b << 16).toString(16).slice(1), c.is(f, "finite") && (j.opacity = f), j)) : { r: -1, g: -1, b: -1, hex: "none", error: 1, toString: g } }, c), c.hsb = f(function (a, b, d) { return c.hsb2rgb(a, b, d).hex }), c.hsl = f(function (a, b, d) { return c.hsl2rgb(a, b, d).hex }), c.rgb = f(function (a, b, c) { return "#" + (16777216 | c | b << 8 | a << 16).toString(16).slice(1) }), c.getColor = function (a) { var b = this.getColor.start = this.getColor.start || { h: 0, s: 1, b: a || .75 }, c = this.hsb2rgb(b.h, b.s, b.b); return b.h += .075, b.h > 1 && (b.h = 0, b.s -= .2, b.s <= 0 && (this.getColor.start = { h: 0, s: 1, b: b.b })), c.hex }, c.getColor.reset = function () { delete this.start }, c.parsePathString = function (a) { if (!a) return null; var b = Ab(a); if (b.arr) return Cb(b.arr); var d = { a: 7, c: 6, h: 1, l: 2, m: 2, r: 4, q: 4, s: 4, t: 2, v: 1, z: 0 }, e = []; return c.is(a, V) && c.is(a[0], V) && (e = Cb(a)), e.length || I(a).replace(hb, function (a, b, c) { var f = [], g = b.toLowerCase(); if (c.replace(jb, function (a, b) { b && f.push(+b) }), "m" == g && f.length > 2 && (e.push([b][E](f.splice(0, 2))), g = "l", b = "m" == b ? "l" : "L"), "r" == g) e.push([b][E](f)); else for (; f.length >= d[g] && (e.push([b][E](f.splice(0, d[g]))), d[g]) ;); }), e.toString = c._path2string, b.arr = Cb(e), e }, c.parseTransformString = f(function (a) { if (!a) return null; var b = []; return c.is(a, V) && c.is(a[0], V) && (b = Cb(a)), b.length || I(a).replace(ib, function (a, c, d) { { var e = []; M.call(c) } d.replace(jb, function (a, b) { b && e.push(+b) }), b.push([c][E](e)) }), b.toString = c._path2string, b }); var Ab = function (a) { var b = Ab.ps = Ab.ps || {}; return b[a] ? b[a].sleep = 100 : b[a] = { sleep: 100 }, setTimeout(function () { for (var c in b) b[z](c) && c != a && (b[c].sleep--, !b[c].sleep && delete b[c]) }), b[a] }; c.findDotsAtSegment = function (a, b, c, d, e, f, g, h, i) { var j = 1 - i, k = R(j, 3), l = R(j, 2), m = i * i, n = m * i, o = k * a + 3 * l * i * c + 3 * j * i * i * e + n * g, p = k * b + 3 * l * i * d + 3 * j * i * i * f + n * h, q = a + 2 * i * (c - a) + m * (e - 2 * c + a), r = b + 2 * i * (d - b) + m * (f - 2 * d + b), s = c + 2 * i * (e - c) + m * (g - 2 * e + c), t = d + 2 * i * (f - d) + m * (h - 2 * f + d), u = j * a + i * c, v = j * b + i * d, w = j * e + i * g, x = j * f + i * h, y = 90 - 180 * N.atan2(q - s, r - t) / S; return (q > s || t > r) && (y += 180), { x: o, y: p, m: { x: q, y: r }, n: { x: s, y: t }, start: { x: u, y: v }, end: { x: w, y: x }, alpha: y } }, c.bezierBBox = function (a, b, d, e, f, g, h, i) { c.is(a, "array") || (a = [a, b, d, e, f, g, h, i]); var j = Jb.apply(null, a); return { x: j.min.x, y: j.min.y, x2: j.max.x, y2: j.max.y, width: j.max.x - j.min.x, height: j.max.y - j.min.y } }, c.isPointInsideBBox = function (a, b, c) { return b >= a.x && b <= a.x2 && c >= a.y && c <= a.y2 }, c.isBBoxIntersect = function (a, b) { var d = c.isPointInsideBBox; return d(b, a.x, a.y) || d(b, a.x2, a.y) || d(b, a.x, a.y2) || d(b, a.x2, a.y2) || d(a, b.x, b.y) || d(a, b.x2, b.y) || d(a, b.x, b.y2) || d(a, b.x2, b.y2) || (a.x < b.x2 && a.x > b.x || b.x < a.x2 && b.x > a.x) && (a.y < b.y2 && a.y > b.y || b.y < a.y2 && b.y > a.y) }, c.pathIntersection = function (a, b) { return n(a, b) }, c.pathIntersectionNumber = function (a, b) { return n(a, b, 1) }, c.isPointInsidePath = function (a, b, d) { var e = c.pathBBox(a); return c.isPointInsideBBox(e, b, d) && n(a, [["M", b, d], ["H", e.x2 + 10]], 1) % 2 == 1 }, c._removedFactory = function (a) { return function () { b("raphael.log", null, "Raphaël: you are calling to method “" + a + "” of removed object", a) } }; var Bb = c.pathBBox = function (a) { var b = Ab(a); if (b.bbox) return d(b.bbox); if (!a) return { x: 0, y: 0, width: 0, height: 0, x2: 0, y2: 0 }; a = Kb(a); for (var c, e = 0, f = 0, g = [], h = [], i = 0, j = a.length; j > i; i++) if (c = a[i], "M" == c[0]) e = c[1], f = c[2], g.push(e), h.push(f); else { var k = Jb(e, f, c[1], c[2], c[3], c[4], c[5], c[6]); g = g[E](k.min.x, k.max.x), h = h[E](k.min.y, k.max.y), e = c[5], f = c[6] } var l = P[D](0, g), m = P[D](0, h), n = O[D](0, g), o = O[D](0, h), p = n - l, q = o - m, r = { x: l, y: m, x2: n, y2: o, width: p, height: q, cx: l + p / 2, cy: m + q / 2 }; return b.bbox = d(r), r }, Cb = function (a) { var b = d(a); return b.toString = c._path2string, b }, Db = c._pathToRelative = function (a) { var b = Ab(a); if (b.rel) return Cb(b.rel); c.is(a, V) && c.is(a && a[0], V) || (a = c.parsePathString(a)); var d = [], e = 0, f = 0, g = 0, h = 0, i = 0; "M" == a[0][0] && (e = a[0][1], f = a[0][2], g = e, h = f, i++, d.push(["M", e, f])); for (var j = i, k = a.length; k > j; j++) { var l = d[j] = [], m = a[j]; if (m[0] != M.call(m[0])) switch (l[0] = M.call(m[0]), l[0]) { case "a": l[1] = m[1], l[2] = m[2], l[3] = m[3], l[4] = m[4], l[5] = m[5], l[6] = +(m[6] - e).toFixed(3), l[7] = +(m[7] - f).toFixed(3); break; case "v": l[1] = +(m[1] - f).toFixed(3); break; case "m": g = m[1], h = m[2]; default: for (var n = 1, o = m.length; o > n; n++) l[n] = +(m[n] - (n % 2 ? e : f)).toFixed(3) } else { l = d[j] = [], "m" == m[0] && (g = m[1] + e, h = m[2] + f); for (var p = 0, q = m.length; q > p; p++) d[j][p] = m[p] } var r = d[j].length; switch (d[j][0]) { case "z": e = g, f = h; break; case "h": e += +d[j][r - 1]; break; case "v": f += +d[j][r - 1]; break; default: e += +d[j][r - 2], f += +d[j][r - 1] } } return d.toString = c._path2string, b.rel = Cb(d), d }, Eb = c._pathToAbsolute = function (a) { var b = Ab(a); if (b.abs) return Cb(b.abs); if (c.is(a, V) && c.is(a && a[0], V) || (a = c.parsePathString(a)), !a || !a.length) return [["M", 0, 0]]; var d = [], e = 0, f = 0, g = 0, i = 0, j = 0; "M" == a[0][0] && (e = +a[0][1], f = +a[0][2], g = e, i = f, j++, d[0] = ["M", e, f]); for (var k, l, m = 3 == a.length && "M" == a[0][0] && "R" == a[1][0].toUpperCase() && "Z" == a[2][0].toUpperCase(), n = j, o = a.length; o > n; n++) { if (d.push(k = []), l = a[n], l[0] != bb.call(l[0])) switch (k[0] = bb.call(l[0]), k[0]) { case "A": k[1] = l[1], k[2] = l[2], k[3] = l[3], k[4] = l[4], k[5] = l[5], k[6] = +(l[6] + e), k[7] = +(l[7] + f); break; case "V": k[1] = +l[1] + f; break; case "H": k[1] = +l[1] + e; break; case "R": for (var p = [e, f][E](l.slice(1)), q = 2, r = p.length; r > q; q++) p[q] = +p[q] + e, p[++q] = +p[q] + f; d.pop(), d = d[E](h(p, m)); break; case "M": g = +l[1] + e, i = +l[2] + f; default: for (q = 1, r = l.length; r > q; q++) k[q] = +l[q] + (q % 2 ? e : f) } else if ("R" == l[0]) p = [e, f][E](l.slice(1)), d.pop(), d = d[E](h(p, m)), k = ["R"][E](l.slice(-2)); else for (var s = 0, t = l.length; t > s; s++) k[s] = l[s]; switch (k[0]) { case "Z": e = g, f = i; break; case "H": e = k[1]; break; case "V": f = k[1]; break; case "M": g = k[k.length - 2], i = k[k.length - 1]; default: e = k[k.length - 2], f = k[k.length - 1] } } return d.toString = c._path2string, b.abs = Cb(d), d }, Fb = function (a, b, c, d) { return [a, b, c, d, c, d] }, Gb = function (a, b, c, d, e, f) { var g = 1 / 3, h = 2 / 3; return [g * a + h * c, g * b + h * d, g * e + h * c, g * f + h * d, e, f] }, Hb = function (a, b, c, d, e, g, h, i, j, k) { var l, m = 120 * S / 180, n = S / 180 * (+e || 0), o = [], p = f(function (a, b, c) { var d = a * N.cos(c) - b * N.sin(c), e = a * N.sin(c) + b * N.cos(c); return { x: d, y: e } }); if (k) y = k[0], z = k[1], w = k[2], x = k[3]; else { l = p(a, b, -n), a = l.x, b = l.y, l = p(i, j, -n), i = l.x, j = l.y; var q = (N.cos(S / 180 * e), N.sin(S / 180 * e), (a - i) / 2), r = (b - j) / 2, s = q * q / (c * c) + r * r / (d * d); s > 1 && (s = N.sqrt(s), c = s * c, d = s * d); var t = c * c, u = d * d, v = (g == h ? -1 : 1) * N.sqrt(Q((t * u - t * r * r - u * q * q) / (t * r * r + u * q * q))), w = v * c * r / d + (a + i) / 2, x = v * -d * q / c + (b + j) / 2, y = N.asin(((b - x) / d).toFixed(9)), z = N.asin(((j - x) / d).toFixed(9)); y = w > a ? S - y : y, z = w > i ? S - z : z, 0 > y && (y = 2 * S + y), 0 > z && (z = 2 * S + z), h && y > z && (y -= 2 * S), !h && z > y && (z -= 2 * S) } var A = z - y; if (Q(A) > m) { var B = z, C = i, D = j; z = y + m * (h && z > y ? 1 : -1), i = w + c * N.cos(z), j = x + d * N.sin(z), o = Hb(i, j, c, d, e, 0, h, C, D, [z, B, w, x]) } A = z - y; var F = N.cos(y), G = N.sin(y), H = N.cos(z), I = N.sin(z), K = N.tan(A / 4), L = 4 / 3 * c * K, M = 4 / 3 * d * K, O = [a, b], P = [a + L * G, b - M * F], R = [i + L * I, j - M * H], T = [i, j]; if (P[0] = 2 * O[0] - P[0], P[1] = 2 * O[1] - P[1], k) return [P, R, T][E](o); o = [P, R, T][E](o).join()[J](","); for (var U = [], V = 0, W = o.length; W > V; V++) U[V] = V % 2 ? p(o[V - 1], o[V], n).y : p(o[V], o[V + 1], n).x; return U }, Ib = function (a, b, c, d, e, f, g, h, i) { var j = 1 - i; return { x: R(j, 3) * a + 3 * R(j, 2) * i * c + 3 * j * i * i * e + R(i, 3) * g, y: R(j, 3) * b + 3 * R(j, 2) * i * d + 3 * j * i * i * f + R(i, 3) * h } }, Jb = f(function (a, b, c, d, e, f, g, h) { var i, j = e - 2 * c + a - (g - 2 * e + c), k = 2 * (c - a) - 2 * (e - c), l = a - c, m = (-k + N.sqrt(k * k - 4 * j * l)) / 2 / j, n = (-k - N.sqrt(k * k - 4 * j * l)) / 2 / j, o = [b, h], p = [a, g]; return Q(m) > "1e12" && (m = .5), Q(n) > "1e12" && (n = .5), m > 0 && 1 > m && (i = Ib(a, b, c, d, e, f, g, h, m), p.push(i.x), o.push(i.y)), n > 0 && 1 > n && (i = Ib(a, b, c, d, e, f, g, h, n), p.push(i.x), o.push(i.y)), j = f - 2 * d + b - (h - 2 * f + d), k = 2 * (d - b) - 2 * (f - d), l = b - d, m = (-k + N.sqrt(k * k - 4 * j * l)) / 2 / j, n = (-k - N.sqrt(k * k - 4 * j * l)) / 2 / j, Q(m) > "1e12" && (m = .5), Q(n) > "1e12" && (n = .5), m > 0 && 1 > m && (i = Ib(a, b, c, d, e, f, g, h, m), p.push(i.x), o.push(i.y)), n > 0 && 1 > n && (i = Ib(a, b, c, d, e, f, g, h, n), p.push(i.x), o.push(i.y)), { min: { x: P[D](0, p), y: P[D](0, o) }, max: { x: O[D](0, p), y: O[D](0, o) } } }), Kb = c._path2curve = f(function (a, b) { var c = !b && Ab(a); if (!b && c.curve) return Cb(c.curve); for (var d = Eb(a), e = b && Eb(b), f = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, g = { x: 0, y: 0, bx: 0, by: 0, X: 0, Y: 0, qx: null, qy: null }, h = (function (a, b, c) { var d, e, f = { T: 1, Q: 1 }; if (!a) return ["C", b.x, b.y, b.x, b.y, b.x, b.y]; switch (!(a[0] in f) && (b.qx = b.qy = null), a[0]) { case "M": b.X = a[1], b.Y = a[2]; break; case "A": a = ["C"][E](Hb[D](0, [b.x, b.y][E](a.slice(1)))); break; case "S": "C" == c || "S" == c ? (d = 2 * b.x - b.bx, e = 2 * b.y - b.by) : (d = b.x, e = b.y), a = ["C", d, e][E](a.slice(1)); break; case "T": "Q" == c || "T" == c ? (b.qx = 2 * b.x - b.qx, b.qy = 2 * b.y - b.qy) : (b.qx = b.x, b.qy = b.y), a = ["C"][E](Gb(b.x, b.y, b.qx, b.qy, a[1], a[2])); break; case "Q": b.qx = a[1], b.qy = a[2], a = ["C"][E](Gb(b.x, b.y, a[1], a[2], a[3], a[4])); break; case "L": a = ["C"][E](Fb(b.x, b.y, a[1], a[2])); break; case "H": a = ["C"][E](Fb(b.x, b.y, a[1], b.y)); break; case "V": a = ["C"][E](Fb(b.x, b.y, b.x, a[1])); break; case "Z": a = ["C"][E](Fb(b.x, b.y, b.X, b.Y)) } return a }), i = function (a, b) { if (a[b].length > 7) { a[b].shift(); for (var c = a[b]; c.length;) a.splice(b++, 0, ["C"][E](c.splice(0, 6))); a.splice(b, 1), l = O(d.length, e && e.length || 0) } }, j = function (a, b, c, f, g) { a && b && "M" == a[g][0] && "M" != b[g][0] && (b.splice(g, 0, ["M", f.x, f.y]), c.bx = 0, c.by = 0, c.x = a[g][1], c.y = a[g][2], l = O(d.length, e && e.length || 0)) }, k = 0, l = O(d.length, e && e.length || 0) ; l > k; k++) { d[k] = h(d[k], f), i(d, k), e && (e[k] = h(e[k], g)), e && i(e, k), j(d, e, f, g, k), j(e, d, g, f, k); var m = d[k], n = e && e[k], o = m.length, p = e && n.length; f.x = m[o - 2], f.y = m[o - 1], f.bx = _(m[o - 4]) || f.x, f.by = _(m[o - 3]) || f.y, g.bx = e && (_(n[p - 4]) || g.x), g.by = e && (_(n[p - 3]) || g.y), g.x = e && n[p - 2], g.y = e && n[p - 1] } return e || (c.curve = Cb(d)), e ? [d, e] : d }, null, Cb), Lb = (c._parseDots = f(function (a) { for (var b = [], d = 0, e = a.length; e > d; d++) { var f = {}, g = a[d].match(/^([^:]*):?([\d\.]*)/); if (f.color = c.getRGB(g[1]), f.color.error) return null; f.color = f.color.hex, g[2] && (f.offset = g[2] + "%"), b.push(f) } for (d = 1, e = b.length - 1; e > d; d++) if (!b[d].offset) { for (var h = _(b[d - 1].offset || 0), i = 0, j = d + 1; e > j; j++) if (b[j].offset) { i = b[j].offset; break } i || (i = 100, j = e), i = _(i); for (var k = (i - h) / (j - d + 1) ; j > d; d++) h += k, b[d].offset = h + "%" } return b }), c._tear = function (a, b) { a == b.top && (b.top = a.prev), a == b.bottom && (b.bottom = a.next), a.next && (a.next.prev = a.prev), a.prev && (a.prev.next = a.next) }), Mb = (c._tofront = function (a, b) { b.top !== a && (Lb(a, b), a.next = null, a.prev = b.top, b.top.next = a, b.top = a) }, c._toback = function (a, b) { b.bottom !== a && (Lb(a, b), a.next = b.bottom, a.prev = null, b.bottom.prev = a, b.bottom = a) }, c._insertafter = function (a, b, c) { Lb(a, c), b == c.top && (c.top = a), b.next && (b.next.prev = a), a.next = b.next, a.prev = b, b.next = a }, c._insertbefore = function (a, b, c) { Lb(a, c), b == c.bottom && (c.bottom = a), b.prev && (b.prev.next = a), a.prev = b.prev, b.prev = a, a.next = b }, c.toMatrix = function (a, b) { var c = Bb(a), d = { _: { transform: G }, getBBox: function () { return c } }; return Nb(d, b), d.matrix }), Nb = (c.transformPath = function (a, b) { return rb(a, Mb(a, b)) }, c._extractTransform = function (a, b) { if (null == b) return a._.transform; b = I(b).replace(/\.{3}|\u2026/g, a._.transform || G); var d = c.parseTransformString(b), e = 0, f = 0, g = 0, h = 1, i = 1, j = a._, k = new o; if (j.transform = d || [], d) for (var l = 0, m = d.length; m > l; l++) { var n, p, q, r, s, t = d[l], u = t.length, v = I(t[0]).toLowerCase(), w = t[0] != v, x = w ? k.invert() : 0; "t" == v && 3 == u ? w ? (n = x.x(0, 0), p = x.y(0, 0), q = x.x(t[1], t[2]), r = x.y(t[1], t[2]), k.translate(q - n, r - p)) : k.translate(t[1], t[2]) : "r" == v ? 2 == u ? (s = s || a.getBBox(1), k.rotate(t[1], s.x + s.width / 2, s.y + s.height / 2), e += t[1]) : 4 == u && (w ? (q = x.x(t[2], t[3]), r = x.y(t[2], t[3]), k.rotate(t[1], q, r)) : k.rotate(t[1], t[2], t[3]), e += t[1]) : "s" == v ? 2 == u || 3 == u ? (s = s || a.getBBox(1), k.scale(t[1], t[u - 1], s.x + s.width / 2, s.y + s.height / 2), h *= t[1], i *= t[u - 1]) : 5 == u && (w ? (q = x.x(t[3], t[4]), r = x.y(t[3], t[4]), k.scale(t[1], t[2], q, r)) : k.scale(t[1], t[2], t[3], t[4]), h *= t[1], i *= t[2]) : "m" == v && 7 == u && k.add(t[1], t[2], t[3], t[4], t[5], t[6]), j.dirtyT = 1, a.matrix = k } a.matrix = k, j.sx = h, j.sy = i, j.deg = e, j.dx = f = k.e, j.dy = g = k.f, 1 == h && 1 == i && !e && j.bbox ? (j.bbox.x += +f, j.bbox.y += +g) : j.dirtyT = 1 }), Ob = function (a) { var b = a[0]; switch (b.toLowerCase()) { case "t": return [b, 0, 0]; case "m": return [b, 1, 0, 0, 1, 0, 0]; case "r": return 4 == a.length ? [b, 0, a[2], a[3]] : [b, 0]; case "s": return 5 == a.length ? [b, 1, 1, a[3], a[4]] : 3 == a.length ? [b, 1, 1] : [b, 1] } }, Pb = c._equaliseTransform = function (a, b) {
        b = I(b).replace(/\.{3}|\u2026/g, a), a = c.parseTransformString(a) || [], b = c.parseTransformString(b) || []; for (var d, e, f, g, h = O(a.length, b.length), i = [], j = [], k = 0; h > k; k++) {
            if (f = a[k] || Ob(b[k]), g = b[k] || Ob(f), f[0] != g[0] || "r" == f[0].toLowerCase() && (f[2] != g[2] || f[3] != g[3]) || "s" == f[0].toLowerCase() && (f[3] != g[3] || f[4] != g[4])) return; for (i[k] = [], j[k] = [], d = 0, e = O(f.length, g.length) ; e > d; d++) d in f && (i[k][d] = f[d]), d in g && (j[k][d] = g[d])
        } return { from: i, to: j }
    }; c._getContainer = function (a, b, d, e) { var f; return f = null != e || c.is(a, "object") ? a : A.doc.getElementById(a), null != f ? f.tagName ? null == b ? { container: f, width: f.style.pixelWidth || f.offsetWidth, height: f.style.pixelHeight || f.offsetHeight } : { container: f, width: b, height: d } : { container: 1, x: a, y: b, width: d, height: e } : void 0 }, c.pathToRelative = Db, c._engine = {}, c.path2curve = Kb, c.matrix = function (a, b, c, d, e, f) { return new o(a, b, c, d, e, f) }, function (a) { function b(a) { return a[0] * a[0] + a[1] * a[1] } function d(a) { var c = N.sqrt(b(a)); a[0] && (a[0] /= c), a[1] && (a[1] /= c) } a.add = function (a, b, c, d, e, f) { var g, h, i, j, k = [[], [], []], l = [[this.a, this.c, this.e], [this.b, this.d, this.f], [0, 0, 1]], m = [[a, c, e], [b, d, f], [0, 0, 1]]; for (a && a instanceof o && (m = [[a.a, a.c, a.e], [a.b, a.d, a.f], [0, 0, 1]]), g = 0; 3 > g; g++) for (h = 0; 3 > h; h++) { for (j = 0, i = 0; 3 > i; i++) j += l[g][i] * m[i][h]; k[g][h] = j } this.a = k[0][0], this.b = k[1][0], this.c = k[0][1], this.d = k[1][1], this.e = k[0][2], this.f = k[1][2] }, a.invert = function () { var a = this, b = a.a * a.d - a.b * a.c; return new o(a.d / b, -a.b / b, -a.c / b, a.a / b, (a.c * a.f - a.d * a.e) / b, (a.b * a.e - a.a * a.f) / b) }, a.clone = function () { return new o(this.a, this.b, this.c, this.d, this.e, this.f) }, a.translate = function (a, b) { this.add(1, 0, 0, 1, a, b) }, a.scale = function (a, b, c, d) { null == b && (b = a), (c || d) && this.add(1, 0, 0, 1, c, d), this.add(a, 0, 0, b, 0, 0), (c || d) && this.add(1, 0, 0, 1, -c, -d) }, a.rotate = function (a, b, d) { a = c.rad(a), b = b || 0, d = d || 0; var e = +N.cos(a).toFixed(9), f = +N.sin(a).toFixed(9); this.add(e, f, -f, e, b, d), this.add(1, 0, 0, 1, -b, -d) }, a.x = function (a, b) { return a * this.a + b * this.c + this.e }, a.y = function (a, b) { return a * this.b + b * this.d + this.f }, a.get = function (a) { return +this[I.fromCharCode(97 + a)].toFixed(4) }, a.toString = function () { return c.svg ? "matrix(" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)].join() + ")" : [this.get(0), this.get(2), this.get(1), this.get(3), 0, 0].join() }, a.toFilter = function () { return "progid:DXImageTransform.Microsoft.Matrix(M11=" + this.get(0) + ", M12=" + this.get(2) + ", M21=" + this.get(1) + ", M22=" + this.get(3) + ", Dx=" + this.get(4) + ", Dy=" + this.get(5) + ", sizingmethod='auto expand')" }, a.offset = function () { return [this.e.toFixed(4), this.f.toFixed(4)] }, a.split = function () { var a = {}; a.dx = this.e, a.dy = this.f; var e = [[this.a, this.c], [this.b, this.d]]; a.scalex = N.sqrt(b(e[0])), d(e[0]), a.shear = e[0][0] * e[1][0] + e[0][1] * e[1][1], e[1] = [e[1][0] - e[0][0] * a.shear, e[1][1] - e[0][1] * a.shear], a.scaley = N.sqrt(b(e[1])), d(e[1]), a.shear /= a.scaley; var f = -e[0][1], g = e[1][1]; return 0 > g ? (a.rotate = c.deg(N.acos(g)), 0 > f && (a.rotate = 360 - a.rotate)) : a.rotate = c.deg(N.asin(f)), a.isSimple = !(+a.shear.toFixed(9) || a.scalex.toFixed(9) != a.scaley.toFixed(9) && a.rotate), a.isSuperSimple = !+a.shear.toFixed(9) && a.scalex.toFixed(9) == a.scaley.toFixed(9) && !a.rotate, a.noRotation = !+a.shear.toFixed(9) && !a.rotate, a }, a.toTransformString = function (a) { var b = a || this[J](); return b.isSimple ? (b.scalex = +b.scalex.toFixed(4), b.scaley = +b.scaley.toFixed(4), b.rotate = +b.rotate.toFixed(4), (b.dx || b.dy ? "t" + [b.dx, b.dy] : G) + (1 != b.scalex || 1 != b.scaley ? "s" + [b.scalex, b.scaley, 0, 0] : G) + (b.rotate ? "r" + [b.rotate, 0, 0] : G)) : "m" + [this.get(0), this.get(1), this.get(2), this.get(3), this.get(4), this.get(5)] } }(o.prototype); var Qb = navigator.userAgent.match(/Version\/(.*?)\s/) || navigator.userAgent.match(/Chrome\/(\d+)/); v.safari = "Apple Computer, Inc." == navigator.vendor && (Qb && Qb[1] < 4 || "iP" == navigator.platform.slice(0, 2)) || "Google Inc." == navigator.vendor && Qb && Qb[1] < 8 ? function () { var a = this.rect(-99, -99, this.width + 99, this.height + 99).attr({ stroke: "none" }); setTimeout(function () { a.remove() }) } : mb; for (var Rb = function () { this.returnValue = !1 }, Sb = function () { return this.originalEvent.preventDefault() }, Tb = function () { this.cancelBubble = !0 }, Ub = function () { return this.originalEvent.stopPropagation() }, Vb = function (a) { var b = A.doc.documentElement.scrollTop || A.doc.body.scrollTop, c = A.doc.documentElement.scrollLeft || A.doc.body.scrollLeft; return { x: a.clientX + c, y: a.clientY + b } }, Wb = function () { return A.doc.addEventListener ? function (a, b, c, d) { var e = function (a) { var b = Vb(a); return c.call(d, a, b.x, b.y) }; if (a.addEventListener(b, e, !1), F && L[b]) { var f = function (b) { for (var e = Vb(b), f = b, g = 0, h = b.targetTouches && b.targetTouches.length; h > g; g++) if (b.targetTouches[g].target == a) { b = b.targetTouches[g], b.originalEvent = f, b.preventDefault = Sb, b.stopPropagation = Ub; break } return c.call(d, b, e.x, e.y) }; a.addEventListener(L[b], f, !1) } return function () { return a.removeEventListener(b, e, !1), F && L[b] && a.removeEventListener(L[b], e, !1), !0 } } : A.doc.attachEvent ? function (a, b, c, d) { var e = function (a) { a = a || A.win.event; var b = A.doc.documentElement.scrollTop || A.doc.body.scrollTop, e = A.doc.documentElement.scrollLeft || A.doc.body.scrollLeft, f = a.clientX + e, g = a.clientY + b; return a.preventDefault = a.preventDefault || Rb, a.stopPropagation = a.stopPropagation || Tb, c.call(d, a, f, g) }; a.attachEvent("on" + b, e); var f = function () { return a.detachEvent("on" + b, e), !0 }; return f } : void 0 }(), Xb = [], Yb = function (a) { for (var c, d = a.clientX, e = a.clientY, f = A.doc.documentElement.scrollTop || A.doc.body.scrollTop, g = A.doc.documentElement.scrollLeft || A.doc.body.scrollLeft, h = Xb.length; h--;) { if (c = Xb[h], F && a.touches) { for (var i, j = a.touches.length; j--;) if (i = a.touches[j], i.identifier == c.el._drag.id) { d = i.clientX, e = i.clientY, (a.originalEvent ? a.originalEvent : a).preventDefault(); break } } else a.preventDefault(); var k, l = c.el.node, m = l.nextSibling, n = l.parentNode, o = l.style.display; A.win.opera && n.removeChild(l), l.style.display = "none", k = c.el.paper.getElementByPoint(d, e), l.style.display = o, A.win.opera && (m ? n.insertBefore(l, m) : n.appendChild(l)), k && b("raphael.drag.over." + c.el.id, c.el, k), d += g, e += f, b("raphael.drag.move." + c.el.id, c.move_scope || c.el, d - c.el._drag.x, e - c.el._drag.y, d, e, a) } }, Zb = function (a) { c.unmousemove(Yb).unmouseup(Zb); for (var d, e = Xb.length; e--;) d = Xb[e], d.el._drag = {}, b("raphael.drag.end." + d.el.id, d.end_scope || d.start_scope || d.move_scope || d.el, a); Xb = [] }, $b = c.el = {}, _b = K.length; _b--;) !function (a) { c[a] = $b[a] = function (b, d) { return c.is(b, "function") && (this.events = this.events || [], this.events.push({ name: a, f: b, unbind: Wb(this.shape || this.node || A.doc, a, b, d || this) })), this }, c["un" + a] = $b["un" + a] = function (b) { for (var d = this.events || [], e = d.length; e--;) d[e].name != a || !c.is(b, "undefined") && d[e].f != b || (d[e].unbind(), d.splice(e, 1), !d.length && delete this.events); return this } }(K[_b]); $b.data = function (a, d) { var e = kb[this.id] = kb[this.id] || {}; if (0 == arguments.length) return e; if (1 == arguments.length) { if (c.is(a, "object")) { for (var f in a) a[z](f) && this.data(f, a[f]); return this } return b("raphael.data.get." + this.id, this, e[a], a), e[a] } return e[a] = d, b("raphael.data.set." + this.id, this, d, a), this }, $b.removeData = function (a) { return null == a ? kb[this.id] = {} : kb[this.id] && delete kb[this.id][a], this }, $b.getData = function () { return d(kb[this.id] || {}) }, $b.hover = function (a, b, c, d) { return this.mouseover(a, c).mouseout(b, d || c) }, $b.unhover = function (a, b) { return this.unmouseover(a).unmouseout(b) }; var ac = []; $b.drag = function (a, d, e, f, g, h) { function i(i) { (i.originalEvent || i).preventDefault(); var j = i.clientX, k = i.clientY, l = A.doc.documentElement.scrollTop || A.doc.body.scrollTop, m = A.doc.documentElement.scrollLeft || A.doc.body.scrollLeft; if (this._drag.id = i.identifier, F && i.touches) for (var n, o = i.touches.length; o--;) if (n = i.touches[o], this._drag.id = n.identifier, n.identifier == this._drag.id) { j = n.clientX, k = n.clientY; break } this._drag.x = j + m, this._drag.y = k + l, !Xb.length && c.mousemove(Yb).mouseup(Zb), Xb.push({ el: this, move_scope: f, start_scope: g, end_scope: h }), d && b.on("raphael.drag.start." + this.id, d), a && b.on("raphael.drag.move." + this.id, a), e && b.on("raphael.drag.end." + this.id, e), b("raphael.drag.start." + this.id, g || f || this, i.clientX + m, i.clientY + l, i) } return this._drag = {}, ac.push({ el: this, start: i }), this.mousedown(i), this }, $b.onDragOver = function (a) { a ? b.on("raphael.drag.over." + this.id, a) : b.unbind("raphael.drag.over." + this.id) }, $b.undrag = function () { for (var a = ac.length; a--;) ac[a].el == this && (this.unmousedown(ac[a].start), ac.splice(a, 1), b.unbind("raphael.drag.*." + this.id)); !ac.length && c.unmousemove(Yb).unmouseup(Zb), Xb = [] }, v.circle = function (a, b, d) { var e = c._engine.circle(this, a || 0, b || 0, d || 0); return this.__set__ && this.__set__.push(e), e }, v.rect = function (a, b, d, e, f) { var g = c._engine.rect(this, a || 0, b || 0, d || 0, e || 0, f || 0); return this.__set__ && this.__set__.push(g), g }, v.ellipse = function (a, b, d, e) { var f = c._engine.ellipse(this, a || 0, b || 0, d || 0, e || 0); return this.__set__ && this.__set__.push(f), f }, v.path = function (a) { a && !c.is(a, U) && !c.is(a[0], V) && (a += G); var b = c._engine.path(c.format[D](c, arguments), this); return this.__set__ && this.__set__.push(b), b }, v.image = function (a, b, d, e, f) { var g = c._engine.image(this, a || "about:blank", b || 0, d || 0, e || 0, f || 0); return this.__set__ && this.__set__.push(g), g }, v.text = function (a, b, d) { var e = c._engine.text(this, a || 0, b || 0, I(d)); return this.__set__ && this.__set__.push(e), e }, v.set = function (a) { !c.is(a, "array") && (a = Array.prototype.splice.call(arguments, 0, arguments.length)); var b = new mc(a); return this.__set__ && this.__set__.push(b), b.paper = this, b.type = "set", b }, v.setStart = function (a) { this.__set__ = a || this.set() }, v.setFinish = function () { var a = this.__set__; return delete this.__set__, a }, v.setSize = function (a, b) { return c._engine.setSize.call(this, a, b) }, v.setViewBox = function (a, b, d, e, f) { return c._engine.setViewBox.call(this, a, b, d, e, f) }, v.top = v.bottom = null, v.raphael = c; var bc = function (a) { var b = a.getBoundingClientRect(), c = a.ownerDocument, d = c.body, e = c.documentElement, f = e.clientTop || d.clientTop || 0, g = e.clientLeft || d.clientLeft || 0, h = b.top + (A.win.pageYOffset || e.scrollTop || d.scrollTop) - f, i = b.left + (A.win.pageXOffset || e.scrollLeft || d.scrollLeft) - g; return { y: h, x: i } }; v.getElementByPoint = function (a, b) { var c = this, d = c.canvas, e = A.doc.elementFromPoint(a, b); if (A.win.opera && "svg" == e.tagName) { var f = bc(d), g = d.createSVGRect(); g.x = a - f.x, g.y = b - f.y, g.width = g.height = 1; var h = d.getIntersectionList(g, null); h.length && (e = h[h.length - 1]) } if (!e) return null; for (; e.parentNode && e != d.parentNode && !e.raphael;) e = e.parentNode; return e == c.canvas.parentNode && (e = d), e = e && e.raphael ? c.getById(e.raphaelid) : null }, v.getElementsByBBox = function (a) { var b = this.set(); return this.forEach(function (d) { c.isBBoxIntersect(d.getBBox(), a) && b.push(d) }), b }, v.getById = function (a) { for (var b = this.bottom; b;) { if (b.id == a) return b; b = b.next } return null }, v.forEach = function (a, b) { for (var c = this.bottom; c;) { if (a.call(b, c) === !1) return this; c = c.next } return this }, v.getElementsByPoint = function (a, b) { var c = this.set(); return this.forEach(function (d) { d.isPointInside(a, b) && c.push(d) }), c }, $b.isPointInside = function (a, b) { var d = this.realPath = qb[this.type](this); return this.attr("transform") && this.attr("transform").length && (d = c.transformPath(d, this.attr("transform"))), c.isPointInsidePath(d, a, b) }, $b.getBBox = function (a) { if (this.removed) return {}; var b = this._; return a ? ((b.dirty || !b.bboxwt) && (this.realPath = qb[this.type](this), b.bboxwt = Bb(this.realPath), b.bboxwt.toString = p, b.dirty = 0), b.bboxwt) : ((b.dirty || b.dirtyT || !b.bbox) && ((b.dirty || !this.realPath) && (b.bboxwt = 0, this.realPath = qb[this.type](this)), b.bbox = Bb(rb(this.realPath, this.matrix)), b.bbox.toString = p, b.dirty = b.dirtyT = 0), b.bbox) }, $b.clone = function () { if (this.removed) return null; var a = this.paper[this.type]().attr(this.attr()); return this.__set__ && this.__set__.push(a), a }, $b.glow = function (a) { if ("text" == this.type) return null; a = a || {}; var b = { width: (a.width || 10) + (+this.attr("stroke-width") || 1), fill: a.fill || !1, opacity: a.opacity || .5, offsetx: a.offsetx || 0, offsety: a.offsety || 0, color: a.color || "#000" }, c = b.width / 2, d = this.paper, e = d.set(), f = this.realPath || qb[this.type](this); f = this.matrix ? rb(f, this.matrix) : f; for (var g = 1; c + 1 > g; g++) e.push(d.path(f).attr({ stroke: b.color, fill: b.fill ? b.color : "none", "stroke-linejoin": "round", "stroke-linecap": "round", "stroke-width": +(b.width / c * g).toFixed(3), opacity: +(b.opacity / c).toFixed(3) })); return e.insertBefore(this).translate(b.offsetx, b.offsety) }; var cc = function (a, b, d, e, f, g, h, i, l) { return null == l ? j(a, b, d, e, f, g, h, i) : c.findDotsAtSegment(a, b, d, e, f, g, h, i, k(a, b, d, e, f, g, h, i, l)) }, dc = function (a, b) { return function (d, e, f) { d = Kb(d); for (var g, h, i, j, k, l = "", m = {}, n = 0, o = 0, p = d.length; p > o; o++) { if (i = d[o], "M" == i[0]) g = +i[1], h = +i[2]; else { if (j = cc(g, h, i[1], i[2], i[3], i[4], i[5], i[6]), n + j > e) { if (b && !m.start) { if (k = cc(g, h, i[1], i[2], i[3], i[4], i[5], i[6], e - n), l += ["C" + k.start.x, k.start.y, k.m.x, k.m.y, k.x, k.y], f) return l; m.start = l, l = ["M" + k.x, k.y + "C" + k.n.x, k.n.y, k.end.x, k.end.y, i[5], i[6]].join(), n += j, g = +i[5], h = +i[6]; continue } if (!a && !b) return k = cc(g, h, i[1], i[2], i[3], i[4], i[5], i[6], e - n), { x: k.x, y: k.y, alpha: k.alpha } } n += j, g = +i[5], h = +i[6] } l += i.shift() + i } return m.end = l, k = a ? n : b ? m : c.findDotsAtSegment(g, h, i[0], i[1], i[2], i[3], i[4], i[5], 1), k.alpha && (k = { x: k.x, y: k.y, alpha: k.alpha }), k } }, ec = dc(1), fc = dc(), gc = dc(0, 1); c.getTotalLength = ec, c.getPointAtLength = fc, c.getSubpath = function (a, b, c) { if (this.getTotalLength(a) - c < 1e-6) return gc(a, b).end; var d = gc(a, c, 1); return b ? gc(d, b).end : d }, $b.getTotalLength = function () { var a = this.getPath(); if (a) return this.node.getTotalLength ? this.node.getTotalLength() : ec(a) }, $b.getPointAtLength = function (a) { var b = this.getPath(); if (b) return fc(b, a) }, $b.getPath = function () { var a, b = c._getPath[this.type]; if ("text" != this.type && "set" != this.type) return b && (a = b(this)), a }, $b.getSubpath = function (a, b) { var d = this.getPath(); if (d) return c.getSubpath(d, a, b) }; var hc = c.easing_formulas = { linear: function (a) { return a }, "<": function (a) { return R(a, 1.7) }, ">": function (a) { return R(a, .48) }, "<>": function (a) { var b = .48 - a / 1.04, c = N.sqrt(.1734 + b * b), d = c - b, e = R(Q(d), 1 / 3) * (0 > d ? -1 : 1), f = -c - b, g = R(Q(f), 1 / 3) * (0 > f ? -1 : 1), h = e + g + .5; return 3 * (1 - h) * h * h + h * h * h }, backIn: function (a) { var b = 1.70158; return a * a * ((b + 1) * a - b) }, backOut: function (a) { a -= 1; var b = 1.70158; return a * a * ((b + 1) * a + b) + 1 }, elastic: function (a) { return a == !!a ? a : R(2, -10 * a) * N.sin(2 * (a - .075) * S / .3) + 1 }, bounce: function (a) { var b, c = 7.5625, d = 2.75; return 1 / d > a ? b = c * a * a : 2 / d > a ? (a -= 1.5 / d, b = c * a * a + .75) : 2.5 / d > a ? (a -= 2.25 / d, b = c * a * a + .9375) : (a -= 2.625 / d, b = c * a * a + .984375), b } }; hc.easeIn = hc["ease-in"] = hc["<"], hc.easeOut = hc["ease-out"] = hc[">"], hc.easeInOut = hc["ease-in-out"] = hc["<>"], hc["back-in"] = hc.backIn, hc["back-out"] = hc.backOut; var ic = [], jc = a.requestAnimationFrame || a.webkitRequestAnimationFrame || a.mozRequestAnimationFrame || a.oRequestAnimationFrame || a.msRequestAnimationFrame || function (a) { setTimeout(a, 16) }, kc = function () { for (var a = +new Date, d = 0; d < ic.length; d++) { var e = ic[d]; if (!e.el.removed && !e.paused) { var f, g, h = a - e.start, i = e.ms, j = e.easing, k = e.from, l = e.diff, m = e.to, n = (e.t, e.el), o = {}, p = {}; if (e.initstatus ? (h = (e.initstatus * e.anim.top - e.prev) / (e.percent - e.prev) * i, e.status = e.initstatus, delete e.initstatus, e.stop && ic.splice(d--, 1)) : e.status = (e.prev + (e.percent - e.prev) * (h / i)) / e.anim.top, !(0 > h)) if (i > h) { var q = j(h / i); for (var r in k) if (k[z](r)) { switch (db[r]) { case T: f = +k[r] + q * i * l[r]; break; case "colour": f = "rgb(" + [lc($(k[r].r + q * i * l[r].r)), lc($(k[r].g + q * i * l[r].g)), lc($(k[r].b + q * i * l[r].b))].join(",") + ")"; break; case "path": f = []; for (var t = 0, u = k[r].length; u > t; t++) { f[t] = [k[r][t][0]]; for (var v = 1, w = k[r][t].length; w > v; v++) f[t][v] = +k[r][t][v] + q * i * l[r][t][v]; f[t] = f[t].join(H) } f = f.join(H); break; case "transform": if (l[r].real) for (f = [], t = 0, u = k[r].length; u > t; t++) for (f[t] = [k[r][t][0]], v = 1, w = k[r][t].length; w > v; v++) f[t][v] = k[r][t][v] + q * i * l[r][t][v]; else { var x = function (a) { return +k[r][a] + q * i * l[r][a] }; f = [["m", x(0), x(1), x(2), x(3), x(4), x(5)]] } break; case "csv": if ("clip-rect" == r) for (f = [], t = 4; t--;) f[t] = +k[r][t] + q * i * l[r][t]; break; default: var y = [][E](k[r]); for (f = [], t = n.paper.customAttributes[r].length; t--;) f[t] = +y[t] + q * i * l[r][t] } o[r] = f } n.attr(o), function (a, c, d) { setTimeout(function () { b("raphael.anim.frame." + a, c, d) }) }(n.id, n, e.anim) } else { if (function (a, d, e) { setTimeout(function () { b("raphael.anim.frame." + d.id, d, e), b("raphael.anim.finish." + d.id, d, e), c.is(a, "function") && a.call(d) }) }(e.callback, n, e.anim), n.attr(m), ic.splice(d--, 1), e.repeat > 1 && !e.next) { for (g in m) m[z](g) && (p[g] = e.totalOrigin[g]); e.el.attr(p), s(e.anim, e.el, e.anim.percents[0], null, e.totalOrigin, e.repeat - 1) } e.next && !e.stop && s(e.anim, e.el, e.next, null, e.totalOrigin, e.repeat) } } } c.svg && n && n.paper && n.paper.safari(), ic.length && jc(kc) }, lc = function (a) { return a > 255 ? 255 : 0 > a ? 0 : a }; $b.animateWith = function (a, b, d, e, f, g) { var h = this; if (h.removed) return g && g.call(h), h; var i = d instanceof r ? d : c.animation(d, e, f, g); s(i, h, i.percents[0], null, h.attr()); for (var j = 0, k = ic.length; k > j; j++) if (ic[j].anim == b && ic[j].el == a) { ic[k - 1].start = ic[j].start; break } return h }, $b.onAnimation = function (a) { return a ? b.on("raphael.anim.frame." + this.id, a) : b.unbind("raphael.anim.frame." + this.id), this }, r.prototype.delay = function (a) { var b = new r(this.anim, this.ms); return b.times = this.times, b.del = +a || 0, b }, r.prototype.repeat = function (a) { var b = new r(this.anim, this.ms); return b.del = this.del, b.times = N.floor(O(a, 0)) || 1, b }, c.animation = function (a, b, d, e) { if (a instanceof r) return a; (c.is(d, "function") || !d) && (e = e || d || null, d = null), a = Object(a), b = +b || 0; var f, g, h = {}; for (g in a) a[z](g) && _(g) != g && _(g) + "%" != g && (f = !0, h[g] = a[g]); return f ? (d && (h.easing = d), e && (h.callback = e), new r({ 100: h }, b)) : new r(a, b) }, $b.animate = function (a, b, d, e) { var f = this; if (f.removed) return e && e.call(f), f; var g = a instanceof r ? a : c.animation(a, b, d, e); return s(g, f, g.percents[0], null, f.attr()), f }, $b.setTime = function (a, b) { return a && null != b && this.status(a, P(b, a.ms) / a.ms), this }, $b.status = function (a, b) { var c, d, e = [], f = 0; if (null != b) return s(a, this, -1, P(b, 1)), this; for (c = ic.length; c > f; f++) if (d = ic[f], d.el.id == this.id && (!a || d.anim == a)) { if (a) return d.status; e.push({ anim: d.anim, status: d.status }) } return a ? 0 : e }, $b.pause = function (a) { for (var c = 0; c < ic.length; c++) ic[c].el.id != this.id || a && ic[c].anim != a || b("raphael.anim.pause." + this.id, this, ic[c].anim) !== !1 && (ic[c].paused = !0); return this }, $b.resume = function (a) { for (var c = 0; c < ic.length; c++) if (ic[c].el.id == this.id && (!a || ic[c].anim == a)) { var d = ic[c]; b("raphael.anim.resume." + this.id, this, d.anim) !== !1 && (delete d.paused, this.status(d.anim, d.status)) } return this }, $b.stop = function (a) { for (var c = 0; c < ic.length; c++) ic[c].el.id != this.id || a && ic[c].anim != a || b("raphael.anim.stop." + this.id, this, ic[c].anim) !== !1 && ic.splice(c--, 1); return this }, b.on("raphael.remove", t), b.on("raphael.clear", t), $b.toString = function () { return "Raphaël’s object" }; var mc = function (a) { if (this.items = [], this.length = 0, this.type = "set", a) for (var b = 0, c = a.length; c > b; b++) !a[b] || a[b].constructor != $b.constructor && a[b].constructor != mc || (this[this.items.length] = this.items[this.items.length] = a[b], this.length++) }, nc = mc.prototype; nc.push = function () { for (var a, b, c = 0, d = arguments.length; d > c; c++) a = arguments[c], !a || a.constructor != $b.constructor && a.constructor != mc || (b = this.items.length, this[b] = this.items[b] = a, this.length++); return this }, nc.pop = function () { return this.length && delete this[this.length--], this.items.pop() }, nc.forEach = function (a, b) { for (var c = 0, d = this.items.length; d > c; c++) if (a.call(b, this.items[c], c) === !1) return this; return this }; for (var oc in $b) $b[z](oc) && (nc[oc] = function (a) { return function () { var b = arguments; return this.forEach(function (c) { c[a][D](c, b) }) } }(oc)); return nc.attr = function (a, b) { if (a && c.is(a, V) && c.is(a[0], "object")) for (var d = 0, e = a.length; e > d; d++) this.items[d].attr(a[d]); else for (var f = 0, g = this.items.length; g > f; f++) this.items[f].attr(a, b); return this }, nc.clear = function () { for (; this.length;) this.pop() }, nc.splice = function (a, b) { a = 0 > a ? O(this.length + a, 0) : a, b = O(0, P(this.length - a, b)); var c, d = [], e = [], f = []; for (c = 2; c < arguments.length; c++) f.push(arguments[c]); for (c = 0; b > c; c++) e.push(this[a + c]); for (; c < this.length - a; c++) d.push(this[a + c]); var g = f.length; for (c = 0; c < g + d.length; c++) this.items[a + c] = this[a + c] = g > c ? f[c] : d[c - g]; for (c = this.items.length = this.length -= b - g; this[c];) delete this[c++]; return new mc(e) }, nc.exclude = function (a) { for (var b = 0, c = this.length; c > b; b++) if (this[b] == a) return this.splice(b, 1), !0 }, nc.animate = function (a, b, d, e) { (c.is(d, "function") || !d) && (e = d || null); var f, g, h = this.items.length, i = h, j = this; if (!h) return this; e && (g = function () { !--h && e.call(j) }), d = c.is(d, U) ? d : g; var k = c.animation(a, b, d, g); for (f = this.items[--i].animate(k) ; i--;) this.items[i] && !this.items[i].removed && this.items[i].animateWith(f, k, k), this.items[i] && !this.items[i].removed || h--; return this }, nc.insertAfter = function (a) { for (var b = this.items.length; b--;) this.items[b].insertAfter(a); return this }, nc.getBBox = function () { for (var a = [], b = [], c = [], d = [], e = this.items.length; e--;) if (!this.items[e].removed) { var f = this.items[e].getBBox(); a.push(f.x), b.push(f.y), c.push(f.x + f.width), d.push(f.y + f.height) } return a = P[D](0, a), b = P[D](0, b), c = O[D](0, c), d = O[D](0, d), { x: a, y: b, x2: c, y2: d, width: c - a, height: d - b } }, nc.clone = function (a) { a = this.paper.set(); for (var b = 0, c = this.items.length; c > b; b++) a.push(this.items[b].clone()); return a }, nc.toString = function () { return "Raphaël‘s set" }, nc.glow = function (a) { var b = this.paper.set(); return this.forEach(function (c) { var d = c.glow(a); null != d && d.forEach(function (a) { b.push(a) }) }), b }, nc.isPointInside = function (a, b) { var c = !1; return this.forEach(function (d) { return d.isPointInside(a, b) ? (c = !0, !1) : void 0 }), c }, c.registerFont = function (a) { if (!a.face) return a; this.fonts = this.fonts || {}; var b = { w: a.w, face: {}, glyphs: {} }, c = a.face["font-family"]; for (var d in a.face) a.face[z](d) && (b.face[d] = a.face[d]); if (this.fonts[c] ? this.fonts[c].push(b) : this.fonts[c] = [b], !a.svg) { b.face["units-per-em"] = ab(a.face["units-per-em"], 10); for (var e in a.glyphs) if (a.glyphs[z](e)) { var f = a.glyphs[e]; if (b.glyphs[e] = { w: f.w, k: {}, d: f.d && "M" + f.d.replace(/[mlcxtrv]/g, function (a) { return { l: "L", c: "C", x: "z", t: "m", r: "l", v: "c" }[a] || "M" }) + "z" }, f.k) for (var g in f.k) f[z](g) && (b.glyphs[e].k[g] = f.k[g]) } } return a }, v.getFont = function (a, b, d, e) { if (e = e || "normal", d = d || "normal", b = +b || { normal: 400, bold: 700, lighter: 300, bolder: 800 }[b] || 400, c.fonts) { var f = c.fonts[a]; if (!f) { var g = new RegExp("(^|\\s)" + a.replace(/[^\w\d\s+!~.:_-]/g, G) + "(\\s|$)", "i"); for (var h in c.fonts) if (c.fonts[z](h) && g.test(h)) { f = c.fonts[h]; break } } var i; if (f) for (var j = 0, k = f.length; k > j && (i = f[j], i.face["font-weight"] != b || i.face["font-style"] != d && i.face["font-style"] || i.face["font-stretch"] != e) ; j++); return i } }, v.print = function (a, b, d, e, f, g, h, i) { g = g || "middle", h = O(P(h || 0, 1), -1), i = O(P(i || 1, 3), 1); var j, k = I(d)[J](G), l = 0, m = 0, n = G; if (c.is(e, "string") && (e = this.getFont(e)), e) { j = (f || 16) / e.face["units-per-em"]; for (var o = e.face.bbox[J](w), p = +o[0], q = o[3] - o[1], r = 0, s = +o[1] + ("baseline" == g ? q + +e.face.descent : q / 2), t = 0, u = k.length; u > t; t++) { if ("\n" == k[t]) l = 0, x = 0, m = 0, r += q * i; else { var v = m && e.glyphs[k[t - 1]] || {}, x = e.glyphs[k[t]]; l += m ? (v.w || e.w) + (v.k && v.k[k[t]] || 0) + e.w * h : 0, m = 1 } x && x.d && (n += c.transformPath(x.d, ["t", l * j, r * j, "s", j, j, p, s, "t", (a - p) / j, (b - s) / j])) } } return this.path(n).attr({ fill: "#000", stroke: "none" }) }, v.add = function (a) { if (c.is(a, "array")) for (var b, d = this.set(), e = 0, f = a.length; f > e; e++) b = a[e] || {}, x[z](b.type) && d.push(this[b.type]().attr(b)); return d }, c.format = function (a, b) { var d = c.is(b, V) ? [0][E](b) : arguments; return a && c.is(a, U) && d.length - 1 && (a = a.replace(y, function (a, b) { return null == d[++b] ? G : d[b] })), a || G }, c.fullfill = function () { var a = /\{([^\}]+)\}/g, b = /(?:(?:^|\.)(.+?)(?=\[|\.|$|\()|\[('|")(.+?)\2\])(\(\))?/g, c = function (a, c, d) { var e = d; return c.replace(b, function (a, b, c, d, f) { b = b || d, e && (b in e && (e = e[b]), "function" == typeof e && f && (e = e())) }), e = (null == e || e == d ? a : e) + "" }; return function (b, d) { return String(b).replace(a, function (a, b) { return c(a, b, d) }) } }(), c.ninja = function () { return B.was ? A.win.Raphael = B.is : delete Raphael, c }, c.st = nc, function (a, b, d) { function e() { /in/.test(a.readyState) ? setTimeout(e, 9) : c.eve("raphael.DOMload") } null == a.readyState && a.addEventListener && (a.addEventListener(b, d = function () { a.removeEventListener(b, d, !1), a.readyState = "complete" }, !1), a.readyState = "loading"), e() }(document, "DOMContentLoaded"), b.on("raphael.DOMload", function () { u = !0 }), function () {
        if (c.svg) {
            var a = "hasOwnProperty", b = String, d = parseFloat, e = parseInt, f = Math, g = f.max, h = f.abs, i = f.pow, j = /[, ]+/, k = c.eve, l = "", m = " ", n = "http://www.w3.org/1999/xlink", o = { block: "M5,0 0,2.5 5,5z", classic: "M5,0 0,2.5 5,5 3.5,3 3.5,2z", diamond: "M2.5,0 5,2.5 2.5,5 0,2.5z", open: "M6,1 1,3.5 6,6", oval: "M2.5,0A2.5,2.5,0,0,1,2.5,5 2.5,2.5,0,0,1,2.5,0z" }, p = {}; c.toString = function () { return "Your browser supports SVG.\nYou are running Raphaël " + this.version }; var q = function (d, e) { if (e) { "string" == typeof d && (d = q(d)); for (var f in e) e[a](f) && ("xlink:" == f.substring(0, 6) ? d.setAttributeNS(n, f.substring(6), b(e[f])) : d.setAttribute(f, b(e[f]))) } else d = c._g.doc.createElementNS("http://www.w3.org/2000/svg", d), d.style && (d.style.webkitTapHighlightColor = "rgba(0,0,0,0)"); return d }, r = function (a, e) { var j = "linear", k = a.id + e, m = .5, n = .5, o = a.node, p = a.paper, r = o.style, s = c._g.doc.getElementById(k); if (!s) { if (e = b(e).replace(c._radial_gradient, function (a, b, c) { if (j = "radial", b && c) { m = d(b), n = d(c); var e = 2 * (n > .5) - 1; i(m - .5, 2) + i(n - .5, 2) > .25 && (n = f.sqrt(.25 - i(m - .5, 2)) * e + .5) && .5 != n && (n = n.toFixed(5) - 1e-5 * e) } return l }), e = e.split(/\s*\-\s*/), "linear" == j) { var t = e.shift(); if (t = -d(t), isNaN(t)) return null; var u = [0, 0, f.cos(c.rad(t)), f.sin(c.rad(t))], v = 1 / (g(h(u[2]), h(u[3])) || 1); u[2] *= v, u[3] *= v, u[2] < 0 && (u[0] = -u[2], u[2] = 0), u[3] < 0 && (u[1] = -u[3], u[3] = 0) } var w = c._parseDots(e); if (!w) return null; if (k = k.replace(/[\(\)\s,\xb0#]/g, "_"), a.gradient && k != a.gradient.id && (p.defs.removeChild(a.gradient), delete a.gradient), !a.gradient) { s = q(j + "Gradient", { id: k }), a.gradient = s, q(s, "radial" == j ? { fx: m, fy: n } : { x1: u[0], y1: u[1], x2: u[2], y2: u[3], gradientTransform: a.matrix.invert() }), p.defs.appendChild(s); for (var x = 0, y = w.length; y > x; x++) s.appendChild(q("stop", { offset: w[x].offset ? w[x].offset : x ? "100%" : "0%", "stop-color": w[x].color || "#fff" })) } } return q(o, { fill: "url(#" + k + ")", opacity: 1, "fill-opacity": 1 }), r.fill = l, r.opacity = 1, r.fillOpacity = 1, 1 }, s = function (a) { var b = a.getBBox(1); q(a.pattern, { patternTransform: a.matrix.invert() + " translate(" + b.x + "," + b.y + ")" }) }, t = function (d, e, f) { if ("path" == d.type) { for (var g, h, i, j, k, m = b(e).toLowerCase().split("-"), n = d.paper, r = f ? "end" : "start", s = d.node, t = d.attrs, u = t["stroke-width"], v = m.length, w = "classic", x = 3, y = 3, z = 5; v--;) switch (m[v]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": w = m[v]; break; case "wide": y = 5; break; case "narrow": y = 2; break; case "long": x = 5; break; case "short": x = 2 } if ("open" == w ? (x += 2, y += 2, z += 2, i = 1, j = f ? 4 : 1, k = { fill: "none", stroke: t.stroke }) : (j = i = x / 2, k = { fill: t.stroke, stroke: "none" }), d._.arrows ? f ? (d._.arrows.endPath && p[d._.arrows.endPath]--, d._.arrows.endMarker && p[d._.arrows.endMarker]--) : (d._.arrows.startPath && p[d._.arrows.startPath]--, d._.arrows.startMarker && p[d._.arrows.startMarker]--) : d._.arrows = {}, "none" != w) { var A = "raphael-marker-" + w, B = "raphael-marker-" + r + w + x + y; c._g.doc.getElementById(A) ? p[A]++ : (n.defs.appendChild(q(q("path"), { "stroke-linecap": "round", d: o[w], id: A })), p[A] = 1); var C, D = c._g.doc.getElementById(B); D ? (p[B]++, C = D.getElementsByTagName("use")[0]) : (D = q(q("marker"), { id: B, markerHeight: y, markerWidth: x, orient: "auto", refX: j, refY: y / 2 }), C = q(q("use"), { "xlink:href": "#" + A, transform: (f ? "rotate(180 " + x / 2 + " " + y / 2 + ") " : l) + "scale(" + x / z + "," + y / z + ")", "stroke-width": (1 / ((x / z + y / z) / 2)).toFixed(4) }), D.appendChild(C), n.defs.appendChild(D), p[B] = 1), q(C, k); var E = i * ("diamond" != w && "oval" != w); f ? (g = d._.arrows.startdx * u || 0, h = c.getTotalLength(t.path) - E * u) : (g = E * u, h = c.getTotalLength(t.path) - (d._.arrows.enddx * u || 0)), k = {}, k["marker-" + r] = "url(#" + B + ")", (h || g) && (k.d = c.getSubpath(t.path, g, h)), q(s, k), d._.arrows[r + "Path"] = A, d._.arrows[r + "Marker"] = B, d._.arrows[r + "dx"] = E, d._.arrows[r + "Type"] = w, d._.arrows[r + "String"] = e } else f ? (g = d._.arrows.startdx * u || 0, h = c.getTotalLength(t.path) - g) : (g = 0, h = c.getTotalLength(t.path) - (d._.arrows.enddx * u || 0)), d._.arrows[r + "Path"] && q(s, { d: c.getSubpath(t.path, g, h) }), delete d._.arrows[r + "Path"], delete d._.arrows[r + "Marker"], delete d._.arrows[r + "dx"], delete d._.arrows[r + "Type"], delete d._.arrows[r + "String"]; for (k in p) if (p[a](k) && !p[k]) { var F = c._g.doc.getElementById(k); F && F.parentNode.removeChild(F) } } }, u = { "": [0], none: [0], "-": [3, 1], ".": [1, 1], "-.": [3, 1, 1, 1], "-..": [3, 1, 1, 1, 1, 1], ". ": [1, 3], "- ": [4, 3], "--": [8, 3], "- .": [4, 3, 1, 3], "--.": [8, 3, 1, 3], "--..": [8, 3, 1, 3, 1, 3] }, v = function (a, c, d) { if (c = u[b(c).toLowerCase()]) { for (var e = a.attrs["stroke-width"] || "1", f = { round: e, square: e, butt: 0 }[a.attrs["stroke-linecap"] || d["stroke-linecap"]] || 0, g = [], h = c.length; h--;) g[h] = c[h] * e + (h % 2 ? 1 : -1) * f; q(a.node, { "stroke-dasharray": g.join(",") }) } }, w = function (d, f) { var i = d.node, k = d.attrs, m = i.style.visibility; i.style.visibility = "hidden"; for (var o in f) if (f[a](o)) { if (!c._availableAttrs[a](o)) continue; var p = f[o]; switch (k[o] = p, o) { case "blur": d.blur(p); break; case "title": var u = i.getElementsByTagName("title"); if (u.length && (u = u[0])) u.firstChild.nodeValue = p; else { u = q("title"); var w = c._g.doc.createTextNode(p); u.appendChild(w), i.appendChild(u) } break; case "href": case "target": var x = i.parentNode; if ("a" != x.tagName.toLowerCase()) { var z = q("a"); x.insertBefore(z, i), z.appendChild(i), x = z } "target" == o ? x.setAttributeNS(n, "show", "blank" == p ? "new" : p) : x.setAttributeNS(n, o, p); break; case "cursor": i.style.cursor = p; break; case "transform": d.transform(p); break; case "arrow-start": t(d, p); break; case "arrow-end": t(d, p, 1); break; case "clip-rect": var A = b(p).split(j); if (4 == A.length) { d.clip && d.clip.parentNode.parentNode.removeChild(d.clip.parentNode); var B = q("clipPath"), C = q("rect"); B.id = c.createUUID(), q(C, { x: A[0], y: A[1], width: A[2], height: A[3] }), B.appendChild(C), d.paper.defs.appendChild(B), q(i, { "clip-path": "url(#" + B.id + ")" }), d.clip = C } if (!p) { var D = i.getAttribute("clip-path"); if (D) { var E = c._g.doc.getElementById(D.replace(/(^url\(#|\)$)/g, l)); E && E.parentNode.removeChild(E), q(i, { "clip-path": l }), delete d.clip } } break; case "path": "path" == d.type && (q(i, { d: p ? k.path = c._pathToAbsolute(p) : "M0,0" }), d._.dirty = 1, d._.arrows && ("startString" in d._.arrows && t(d, d._.arrows.startString), "endString" in d._.arrows && t(d, d._.arrows.endString, 1))); break; case "width": if (i.setAttribute(o, p), d._.dirty = 1, !k.fx) break; o = "x", p = k.x; case "x": k.fx && (p = -k.x - (k.width || 0)); case "rx": if ("rx" == o && "rect" == d.type) break; case "cx": i.setAttribute(o, p), d.pattern && s(d), d._.dirty = 1; break; case "height": if (i.setAttribute(o, p), d._.dirty = 1, !k.fy) break; o = "y", p = k.y; case "y": k.fy && (p = -k.y - (k.height || 0)); case "ry": if ("ry" == o && "rect" == d.type) break; case "cy": i.setAttribute(o, p), d.pattern && s(d), d._.dirty = 1; break; case "r": "rect" == d.type ? q(i, { rx: p, ry: p }) : i.setAttribute(o, p), d._.dirty = 1; break; case "src": "image" == d.type && i.setAttributeNS(n, "href", p); break; case "stroke-width": (1 != d._.sx || 1 != d._.sy) && (p /= g(h(d._.sx), h(d._.sy)) || 1), d.paper._vbSize && (p *= d.paper._vbSize), i.setAttribute(o, p), k["stroke-dasharray"] && v(d, k["stroke-dasharray"], f), d._.arrows && ("startString" in d._.arrows && t(d, d._.arrows.startString), "endString" in d._.arrows && t(d, d._.arrows.endString, 1)); break; case "stroke-dasharray": v(d, p, f); break; case "fill": var F = b(p).match(c._ISURL); if (F) { B = q("pattern"); var G = q("image"); B.id = c.createUUID(), q(B, { x: 0, y: 0, patternUnits: "userSpaceOnUse", height: 1, width: 1 }), q(G, { x: 0, y: 0, "xlink:href": F[1] }), B.appendChild(G), function (a) { c._preload(F[1], function () { var b = this.offsetWidth, c = this.offsetHeight; q(a, { width: b, height: c }), q(G, { width: b, height: c }), d.paper.safari() }) }(B), d.paper.defs.appendChild(B), q(i, { fill: "url(#" + B.id + ")" }), d.pattern = B, d.pattern && s(d); break } var H = c.getRGB(p); if (H.error) { if (("circle" == d.type || "ellipse" == d.type || "r" != b(p).charAt()) && r(d, p)) { if ("opacity" in k || "fill-opacity" in k) { var I = c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g, l)); if (I) { var J = I.getElementsByTagName("stop"); q(J[J.length - 1], { "stop-opacity": ("opacity" in k ? k.opacity : 1) * ("fill-opacity" in k ? k["fill-opacity"] : 1) }) } } k.gradient = p, k.fill = "none"; break } } else delete f.gradient, delete k.gradient, !c.is(k.opacity, "undefined") && c.is(f.opacity, "undefined") && q(i, { opacity: k.opacity }), !c.is(k["fill-opacity"], "undefined") && c.is(f["fill-opacity"], "undefined") && q(i, { "fill-opacity": k["fill-opacity"] }); H[a]("opacity") && q(i, { "fill-opacity": H.opacity > 1 ? H.opacity / 100 : H.opacity }); case "stroke": H = c.getRGB(p), i.setAttribute(o, H.hex), "stroke" == o && H[a]("opacity") && q(i, { "stroke-opacity": H.opacity > 1 ? H.opacity / 100 : H.opacity }), "stroke" == o && d._.arrows && ("startString" in d._.arrows && t(d, d._.arrows.startString), "endString" in d._.arrows && t(d, d._.arrows.endString, 1)); break; case "gradient": ("circle" == d.type || "ellipse" == d.type || "r" != b(p).charAt()) && r(d, p); break; case "opacity": k.gradient && !k[a]("stroke-opacity") && q(i, { "stroke-opacity": p > 1 ? p / 100 : p }); case "fill-opacity": if (k.gradient) { I = c._g.doc.getElementById(i.getAttribute("fill").replace(/^url\(#|\)$/g, l)), I && (J = I.getElementsByTagName("stop"), q(J[J.length - 1], { "stop-opacity": p })); break } default: "font-size" == o && (p = e(p, 10) + "px"); var K = o.replace(/(\-.)/g, function (a) { return a.substring(1).toUpperCase() }); i.style[K] = p, d._.dirty = 1, i.setAttribute(o, p) } } y(d, f), i.style.visibility = m }, x = 1.2, y = function (d, f) {
                if ("text" == d.type && (f[a]("text") || f[a]("font") || f[a]("font-size") || f[a]("x") || f[a]("y"))) {
                    var g = d.attrs, h = d.node, i = h.firstChild ? e(c._g.doc.defaultView.getComputedStyle(h.firstChild, l).getPropertyValue("font-size"), 10) : 10;
                    if (f[a]("text")) { for (g.text = f.text; h.firstChild;) h.removeChild(h.firstChild); for (var j, k = b(f.text).split("\n"), m = [], n = 0, o = k.length; o > n; n++) j = q("tspan"), n && q(j, { dy: i * x, x: g.x }), j.appendChild(c._g.doc.createTextNode(k[n])), h.appendChild(j), m[n] = j } else for (m = h.getElementsByTagName("tspan"), n = 0, o = m.length; o > n; n++) n ? q(m[n], { dy: i * x, x: g.x }) : q(m[0], { dy: 0 }); q(h, { x: g.x, y: g.y }), d._.dirty = 1; var p = d._getBBox(), r = g.y - (p.y + p.height / 2); r && c.is(r, "finite") && q(m[0], { dy: r })
                }
            }, z = function (a, b) { this[0] = this.node = a, a.raphael = !0, this.id = c._oid++, a.raphaelid = this.id, this.matrix = c.matrix(), this.realPath = null, this.paper = b, this.attrs = this.attrs || {}, this._ = { transform: [], sx: 1, sy: 1, deg: 0, dx: 0, dy: 0, dirty: 1 }, !b.bottom && (b.bottom = this), this.prev = b.top, b.top && (b.top.next = this), b.top = this, this.next = null }, A = c.el; z.prototype = A, A.constructor = z, c._engine.path = function (a, b) { var c = q("path"); b.canvas && b.canvas.appendChild(c); var d = new z(c, b); return d.type = "path", w(d, { fill: "none", stroke: "#000", path: a }), d }, A.rotate = function (a, c, e) { if (this.removed) return this; if (a = b(a).split(j), a.length - 1 && (c = d(a[1]), e = d(a[2])), a = d(a[0]), null == e && (c = e), null == c || null == e) { var f = this.getBBox(1); c = f.x + f.width / 2, e = f.y + f.height / 2 } return this.transform(this._.transform.concat([["r", a, c, e]])), this }, A.scale = function (a, c, e, f) { if (this.removed) return this; if (a = b(a).split(j), a.length - 1 && (c = d(a[1]), e = d(a[2]), f = d(a[3])), a = d(a[0]), null == c && (c = a), null == f && (e = f), null == e || null == f) var g = this.getBBox(1); return e = null == e ? g.x + g.width / 2 : e, f = null == f ? g.y + g.height / 2 : f, this.transform(this._.transform.concat([["s", a, c, e, f]])), this }, A.translate = function (a, c) { return this.removed ? this : (a = b(a).split(j), a.length - 1 && (c = d(a[1])), a = d(a[0]) || 0, c = +c || 0, this.transform(this._.transform.concat([["t", a, c]])), this) }, A.transform = function (b) { var d = this._; if (null == b) return d.transform; if (c._extractTransform(this, b), this.clip && q(this.clip, { transform: this.matrix.invert() }), this.pattern && s(this), this.node && q(this.node, { transform: this.matrix }), 1 != d.sx || 1 != d.sy) { var e = this.attrs[a]("stroke-width") ? this.attrs["stroke-width"] : 1; this.attr({ "stroke-width": e }) } return this }, A.hide = function () { return !this.removed && this.paper.safari(this.node.style.display = "none"), this }, A.show = function () { return !this.removed && this.paper.safari(this.node.style.display = ""), this }, A.remove = function () { if (!this.removed && this.node.parentNode) { var a = this.paper; a.__set__ && a.__set__.exclude(this), k.unbind("raphael.*.*." + this.id), this.gradient && a.defs.removeChild(this.gradient), c._tear(this, a), "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.removeChild(this.node.parentNode) : this.node.parentNode.removeChild(this.node); for (var b in this) this[b] = "function" == typeof this[b] ? c._removedFactory(b) : null; this.removed = !0 } }, A._getBBox = function () { if ("none" == this.node.style.display) { this.show(); var a = !0 } var b = {}; try { b = this.node.getBBox() } catch (c) { } finally { b = b || {} } return a && this.hide(), b }, A.attr = function (b, d) { if (this.removed) return this; if (null == b) { var e = {}; for (var f in this.attrs) this.attrs[a](f) && (e[f] = this.attrs[f]); return e.gradient && "none" == e.fill && (e.fill = e.gradient) && delete e.gradient, e.transform = this._.transform, e } if (null == d && c.is(b, "string")) { if ("fill" == b && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; if ("transform" == b) return this._.transform; for (var g = b.split(j), h = {}, i = 0, l = g.length; l > i; i++) b = g[i], h[b] = b in this.attrs ? this.attrs[b] : c.is(this.paper.customAttributes[b], "function") ? this.paper.customAttributes[b].def : c._availableAttrs[b]; return l - 1 ? h : h[g[0]] } if (null == d && c.is(b, "array")) { for (h = {}, i = 0, l = b.length; l > i; i++) h[b[i]] = this.attr(b[i]); return h } if (null != d) { var m = {}; m[b] = d } else null != b && c.is(b, "object") && (m = b); for (var n in m) k("raphael.attr." + n + "." + this.id, this, m[n]); for (n in this.paper.customAttributes) if (this.paper.customAttributes[a](n) && m[a](n) && c.is(this.paper.customAttributes[n], "function")) { var o = this.paper.customAttributes[n].apply(this, [].concat(m[n])); this.attrs[n] = m[n]; for (var p in o) o[a](p) && (m[p] = o[p]) } return w(this, m), this }, A.toFront = function () { if (this.removed) return this; "a" == this.node.parentNode.tagName.toLowerCase() ? this.node.parentNode.parentNode.appendChild(this.node.parentNode) : this.node.parentNode.appendChild(this.node); var a = this.paper; return a.top != this && c._tofront(this, a), this }, A.toBack = function () { if (this.removed) return this; var a = this.node.parentNode; "a" == a.tagName.toLowerCase() ? a.parentNode.insertBefore(this.node.parentNode, this.node.parentNode.parentNode.firstChild) : a.firstChild != this.node && a.insertBefore(this.node, this.node.parentNode.firstChild), c._toback(this, this.paper); this.paper; return this }, A.insertAfter = function (a) { if (this.removed) return this; var b = a.node || a[a.length - 1].node; return b.nextSibling ? b.parentNode.insertBefore(this.node, b.nextSibling) : b.parentNode.appendChild(this.node), c._insertafter(this, a, this.paper), this }, A.insertBefore = function (a) { if (this.removed) return this; var b = a.node || a[0].node; return b.parentNode.insertBefore(this.node, b), c._insertbefore(this, a, this.paper), this }, A.blur = function (a) { var b = this; if (0 !== +a) { var d = q("filter"), e = q("feGaussianBlur"); b.attrs.blur = a, d.id = c.createUUID(), q(e, { stdDeviation: +a || 1.5 }), d.appendChild(e), b.paper.defs.appendChild(d), b._blur = d, q(b.node, { filter: "url(#" + d.id + ")" }) } else b._blur && (b._blur.parentNode.removeChild(b._blur), delete b._blur, delete b.attrs.blur), b.node.removeAttribute("filter"); return b }, c._engine.circle = function (a, b, c, d) { var e = q("circle"); a.canvas && a.canvas.appendChild(e); var f = new z(e, a); return f.attrs = { cx: b, cy: c, r: d, fill: "none", stroke: "#000" }, f.type = "circle", q(e, f.attrs), f }, c._engine.rect = function (a, b, c, d, e, f) { var g = q("rect"); a.canvas && a.canvas.appendChild(g); var h = new z(g, a); return h.attrs = { x: b, y: c, width: d, height: e, r: f || 0, rx: f || 0, ry: f || 0, fill: "none", stroke: "#000" }, h.type = "rect", q(g, h.attrs), h }, c._engine.ellipse = function (a, b, c, d, e) { var f = q("ellipse"); a.canvas && a.canvas.appendChild(f); var g = new z(f, a); return g.attrs = { cx: b, cy: c, rx: d, ry: e, fill: "none", stroke: "#000" }, g.type = "ellipse", q(f, g.attrs), g }, c._engine.image = function (a, b, c, d, e, f) { var g = q("image"); q(g, { x: c, y: d, width: e, height: f, preserveAspectRatio: "none" }), g.setAttributeNS(n, "href", b), a.canvas && a.canvas.appendChild(g); var h = new z(g, a); return h.attrs = { x: c, y: d, width: e, height: f, src: b }, h.type = "image", h }, c._engine.text = function (a, b, d, e) { var f = q("text"); a.canvas && a.canvas.appendChild(f); var g = new z(f, a); return g.attrs = { x: b, y: d, "text-anchor": "middle", text: e, font: c._availableAttrs.font, stroke: "none", fill: "#000" }, g.type = "text", w(g, g.attrs), g }, c._engine.setSize = function (a, b) { return this.width = a || this.width, this.height = b || this.height, this.canvas.setAttribute("width", this.width), this.canvas.setAttribute("height", this.height), this._viewBox && this.setViewBox.apply(this, this._viewBox), this }, c._engine.create = function () { var a = c._getContainer.apply(0, arguments), b = a && a.container, d = a.x, e = a.y, f = a.width, g = a.height; if (!b) throw new Error("SVG container not found."); var h, i = q("svg"), j = "overflow:hidden;"; return d = d || 0, e = e || 0, f = f || 512, g = g || 342, q(i, { height: g, version: 1.1, width: f, xmlns: "http://www.w3.org/2000/svg" }), 1 == b ? (i.style.cssText = j + "position:absolute;left:" + d + "px;top:" + e + "px", c._g.doc.body.appendChild(i), h = 1) : (i.style.cssText = j + "position:relative", b.firstChild ? b.insertBefore(i, b.firstChild) : b.appendChild(i)), b = new c._Paper, b.width = f, b.height = g, b.canvas = i, b.clear(), b._left = b._top = 0, h && (b.renderfix = function () { }), b.renderfix(), b }, c._engine.setViewBox = function (a, b, c, d, e) { k("raphael.setViewBox", this, this._viewBox, [a, b, c, d, e]); var f, h, i = g(c / this.width, d / this.height), j = this.top, l = e ? "xMidYMid meet" : "xMinYMin"; for (null == a ? (this._vbSize && (i = 1), delete this._vbSize, f = "0 0 " + this.width + m + this.height) : (this._vbSize = i, f = a + m + b + m + c + m + d), q(this.canvas, { viewBox: f, preserveAspectRatio: l }) ; i && j;) h = "stroke-width" in j.attrs ? j.attrs["stroke-width"] : 1, j.attr({ "stroke-width": h }), j._.dirty = 1, j._.dirtyT = 1, j = j.prev; return this._viewBox = [a, b, c, d, !!e], this }, c.prototype.renderfix = function () { var a, b = this.canvas, c = b.style; try { a = b.getScreenCTM() || b.createSVGMatrix() } catch (d) { a = b.createSVGMatrix() } var e = -a.e % 1, f = -a.f % 1; (e || f) && (e && (this._left = (this._left + e) % 1, c.left = this._left + "px"), f && (this._top = (this._top + f) % 1, c.top = this._top + "px")) }, c.prototype.clear = function () { c.eve("raphael.clear", this); for (var a = this.canvas; a.firstChild;) a.removeChild(a.firstChild); this.bottom = this.top = null, (this.desc = q("desc")).appendChild(c._g.doc.createTextNode("Created with Raphaël " + c.version)), a.appendChild(this.desc), a.appendChild(this.defs = q("defs")) }, c.prototype.remove = function () { k("raphael.remove", this), this.canvas.parentNode && this.canvas.parentNode.removeChild(this.canvas); for (var a in this) this[a] = "function" == typeof this[a] ? c._removedFactory(a) : null }; var B = c.st; for (var C in A) A[a](C) && !B[a](C) && (B[C] = function (a) { return function () { var b = arguments; return this.forEach(function (c) { c[a].apply(c, b) }) } }(C))
        }
    }(), function () { if (c.vml) { var a = "hasOwnProperty", b = String, d = parseFloat, e = Math, f = e.round, g = e.max, h = e.min, i = e.abs, j = "fill", k = /[, ]+/, l = c.eve, m = " progid:DXImageTransform.Microsoft", n = " ", o = "", p = { M: "m", L: "l", C: "c", Z: "x", m: "t", l: "r", c: "v", z: "x" }, q = /([clmz]),?([^clmz]*)/gi, r = / progid:\S+Blur\([^\)]+\)/g, s = /-?[^,\s-]+/g, t = "position:absolute;left:0;top:0;width:1px;height:1px", u = 21600, v = { path: 1, rect: 1, image: 1 }, w = { circle: 1, ellipse: 1 }, x = function (a) { var d = /[ahqstv]/gi, e = c._pathToAbsolute; if (b(a).match(d) && (e = c._path2curve), d = /[clmz]/g, e == c._pathToAbsolute && !b(a).match(d)) { var g = b(a).replace(q, function (a, b, c) { var d = [], e = "m" == b.toLowerCase(), g = p[b]; return c.replace(s, function (a) { e && 2 == d.length && (g += d + p["m" == b ? "l" : "L"], d = []), d.push(f(a * u)) }), g + d }); return g } var h, i, j = e(a); g = []; for (var k = 0, l = j.length; l > k; k++) { h = j[k], i = j[k][0].toLowerCase(), "z" == i && (i = "x"); for (var m = 1, r = h.length; r > m; m++) i += f(h[m] * u) + (m != r - 1 ? "," : o); g.push(i) } return g.join(n) }, y = function (a, b, d) { var e = c.matrix(); return e.rotate(-a, .5, .5), { dx: e.x(b, d), dy: e.y(b, d) } }, z = function (a, b, c, d, e, f) { var g = a._, h = a.matrix, k = g.fillpos, l = a.node, m = l.style, o = 1, p = "", q = u / b, r = u / c; if (m.visibility = "hidden", b && c) { if (l.coordsize = i(q) + n + i(r), m.rotation = f * (0 > b * c ? -1 : 1), f) { var s = y(f, d, e); d = s.dx, e = s.dy } if (0 > b && (p += "x"), 0 > c && (p += " y") && (o = -1), m.flip = p, l.coordorigin = d * -q + n + e * -r, k || g.fillsize) { var t = l.getElementsByTagName(j); t = t && t[0], l.removeChild(t), k && (s = y(f, h.x(k[0], k[1]), h.y(k[0], k[1])), t.position = s.dx * o + n + s.dy * o), g.fillsize && (t.size = g.fillsize[0] * i(b) + n + g.fillsize[1] * i(c)), l.appendChild(t) } m.visibility = "visible" } }; c.toString = function () { return "Your browser doesn’t support SVG. Falling down to VML.\nYou are running Raphaël " + this.version }; var A = function (a, c, d) { for (var e = b(c).toLowerCase().split("-"), f = d ? "end" : "start", g = e.length, h = "classic", i = "medium", j = "medium"; g--;) switch (e[g]) { case "block": case "classic": case "oval": case "diamond": case "open": case "none": h = e[g]; break; case "wide": case "narrow": j = e[g]; break; case "long": case "short": i = e[g] } var k = a.node.getElementsByTagName("stroke")[0]; k[f + "arrow"] = h, k[f + "arrowlength"] = i, k[f + "arrowwidth"] = j }, B = function (e, i) { e.attrs = e.attrs || {}; var l = e.node, m = e.attrs, p = l.style, q = v[e.type] && (i.x != m.x || i.y != m.y || i.width != m.width || i.height != m.height || i.cx != m.cx || i.cy != m.cy || i.rx != m.rx || i.ry != m.ry || i.r != m.r), r = w[e.type] && (m.cx != i.cx || m.cy != i.cy || m.r != i.r || m.rx != i.rx || m.ry != i.ry), s = e; for (var t in i) i[a](t) && (m[t] = i[t]); if (q && (m.path = c._getPath[e.type](e), e._.dirty = 1), i.href && (l.href = i.href), i.title && (l.title = i.title), i.target && (l.target = i.target), i.cursor && (p.cursor = i.cursor), "blur" in i && e.blur(i.blur), (i.path && "path" == e.type || q) && (l.path = x(~b(m.path).toLowerCase().indexOf("r") ? c._pathToAbsolute(m.path) : m.path), "image" == e.type && (e._.fillpos = [m.x, m.y], e._.fillsize = [m.width, m.height], z(e, 1, 1, 0, 0, 0))), "transform" in i && e.transform(i.transform), r) { var y = +m.cx, B = +m.cy, D = +m.rx || +m.r || 0, E = +m.ry || +m.r || 0; l.path = c.format("ar{0},{1},{2},{3},{4},{1},{4},{1}x", f((y - D) * u), f((B - E) * u), f((y + D) * u), f((B + E) * u), f(y * u)), e._.dirty = 1 } if ("clip-rect" in i) { var G = b(i["clip-rect"]).split(k); if (4 == G.length) { G[2] = +G[2] + +G[0], G[3] = +G[3] + +G[1]; var H = l.clipRect || c._g.doc.createElement("div"), I = H.style; I.clip = c.format("rect({1}px {2}px {3}px {0}px)", G), l.clipRect || (I.position = "absolute", I.top = 0, I.left = 0, I.width = e.paper.width + "px", I.height = e.paper.height + "px", l.parentNode.insertBefore(H, l), H.appendChild(l), l.clipRect = H) } i["clip-rect"] || l.clipRect && (l.clipRect.style.clip = "auto") } if (e.textpath) { var J = e.textpath.style; i.font && (J.font = i.font), i["font-family"] && (J.fontFamily = '"' + i["font-family"].split(",")[0].replace(/^['"]+|['"]+$/g, o) + '"'), i["font-size"] && (J.fontSize = i["font-size"]), i["font-weight"] && (J.fontWeight = i["font-weight"]), i["font-style"] && (J.fontStyle = i["font-style"]) } if ("arrow-start" in i && A(s, i["arrow-start"]), "arrow-end" in i && A(s, i["arrow-end"], 1), null != i.opacity || null != i["stroke-width"] || null != i.fill || null != i.src || null != i.stroke || null != i["stroke-width"] || null != i["stroke-opacity"] || null != i["fill-opacity"] || null != i["stroke-dasharray"] || null != i["stroke-miterlimit"] || null != i["stroke-linejoin"] || null != i["stroke-linecap"]) { var K = l.getElementsByTagName(j), L = !1; if (K = K && K[0], !K && (L = K = F(j)), "image" == e.type && i.src && (K.src = i.src), i.fill && (K.on = !0), (null == K.on || "none" == i.fill || null === i.fill) && (K.on = !1), K.on && i.fill) { var M = b(i.fill).match(c._ISURL); if (M) { K.parentNode == l && l.removeChild(K), K.rotate = !0, K.src = M[1], K.type = "tile"; var N = e.getBBox(1); K.position = N.x + n + N.y, e._.fillpos = [N.x, N.y], c._preload(M[1], function () { e._.fillsize = [this.offsetWidth, this.offsetHeight] }) } else K.color = c.getRGB(i.fill).hex, K.src = o, K.type = "solid", c.getRGB(i.fill).error && (s.type in { circle: 1, ellipse: 1 } || "r" != b(i.fill).charAt()) && C(s, i.fill, K) && (m.fill = "none", m.gradient = i.fill, K.rotate = !1) } if ("fill-opacity" in i || "opacity" in i) { var O = ((+m["fill-opacity"] + 1 || 2) - 1) * ((+m.opacity + 1 || 2) - 1) * ((+c.getRGB(i.fill).o + 1 || 2) - 1); O = h(g(O, 0), 1), K.opacity = O, K.src && (K.color = "none") } l.appendChild(K); var P = l.getElementsByTagName("stroke") && l.getElementsByTagName("stroke")[0], Q = !1; !P && (Q = P = F("stroke")), (i.stroke && "none" != i.stroke || i["stroke-width"] || null != i["stroke-opacity"] || i["stroke-dasharray"] || i["stroke-miterlimit"] || i["stroke-linejoin"] || i["stroke-linecap"]) && (P.on = !0), ("none" == i.stroke || null === i.stroke || null == P.on || 0 == i.stroke || 0 == i["stroke-width"]) && (P.on = !1); var R = c.getRGB(i.stroke); P.on && i.stroke && (P.color = R.hex), O = ((+m["stroke-opacity"] + 1 || 2) - 1) * ((+m.opacity + 1 || 2) - 1) * ((+R.o + 1 || 2) - 1); var S = .75 * (d(i["stroke-width"]) || 1); if (O = h(g(O, 0), 1), null == i["stroke-width"] && (S = m["stroke-width"]), i["stroke-width"] && (P.weight = S), S && 1 > S && (O *= S) && (P.weight = 1), P.opacity = O, i["stroke-linejoin"] && (P.joinstyle = i["stroke-linejoin"] || "miter"), P.miterlimit = i["stroke-miterlimit"] || 8, i["stroke-linecap"] && (P.endcap = "butt" == i["stroke-linecap"] ? "flat" : "square" == i["stroke-linecap"] ? "square" : "round"), "stroke-dasharray" in i) { var T = { "-": "shortdash", ".": "shortdot", "-.": "shortdashdot", "-..": "shortdashdotdot", ". ": "dot", "- ": "dash", "--": "longdash", "- .": "dashdot", "--.": "longdashdot", "--..": "longdashdotdot" }; P.dashstyle = T[a](i["stroke-dasharray"]) ? T[i["stroke-dasharray"]] : o } Q && l.appendChild(P) } if ("text" == s.type) { s.paper.canvas.style.display = o; var U = s.paper.span, V = 100, W = m.font && m.font.match(/\d+(?:\.\d*)?(?=px)/); p = U.style, m.font && (p.font = m.font), m["font-family"] && (p.fontFamily = m["font-family"]), m["font-weight"] && (p.fontWeight = m["font-weight"]), m["font-style"] && (p.fontStyle = m["font-style"]), W = d(m["font-size"] || W && W[0]) || 10, p.fontSize = W * V + "px", s.textpath.string && (U.innerHTML = b(s.textpath.string).replace(/</g, "&#60;").replace(/&/g, "&#38;").replace(/\n/g, "<br>")); var X = U.getBoundingClientRect(); s.W = m.w = (X.right - X.left) / V, s.H = m.h = (X.bottom - X.top) / V, s.X = m.x, s.Y = m.y + s.H / 2, ("x" in i || "y" in i) && (s.path.v = c.format("m{0},{1}l{2},{1}", f(m.x * u), f(m.y * u), f(m.x * u) + 1)); for (var Y = ["x", "y", "text", "font", "font-family", "font-weight", "font-style", "font-size"], Z = 0, $ = Y.length; $ > Z; Z++) if (Y[Z] in i) { s._.dirty = 1; break } switch (m["text-anchor"]) { case "start": s.textpath.style["v-text-align"] = "left", s.bbx = s.W / 2; break; case "end": s.textpath.style["v-text-align"] = "right", s.bbx = -s.W / 2; break; default: s.textpath.style["v-text-align"] = "center", s.bbx = 0 } s.textpath.style["v-text-kern"] = !0 } }, C = function (a, f, g) { a.attrs = a.attrs || {}; var h = (a.attrs, Math.pow), i = "linear", j = ".5 .5"; if (a.attrs.gradient = f, f = b(f).replace(c._radial_gradient, function (a, b, c) { return i = "radial", b && c && (b = d(b), c = d(c), h(b - .5, 2) + h(c - .5, 2) > .25 && (c = e.sqrt(.25 - h(b - .5, 2)) * (2 * (c > .5) - 1) + .5), j = b + n + c), o }), f = f.split(/\s*\-\s*/), "linear" == i) { var k = f.shift(); if (k = -d(k), isNaN(k)) return null } var l = c._parseDots(f); if (!l) return null; if (a = a.shape || a.node, l.length) { a.removeChild(g), g.on = !0, g.method = "none", g.color = l[0].color, g.color2 = l[l.length - 1].color; for (var m = [], p = 0, q = l.length; q > p; p++) l[p].offset && m.push(l[p].offset + n + l[p].color); g.colors = m.length ? m.join() : "0% " + g.color, "radial" == i ? (g.type = "gradientTitle", g.focus = "100%", g.focussize = "0 0", g.focusposition = j, g.angle = 0) : (g.type = "gradient", g.angle = (270 - k) % 360), a.appendChild(g) } return 1 }, D = function (a, b) { this[0] = this.node = a, a.raphael = !0, this.id = c._oid++, a.raphaelid = this.id, this.X = 0, this.Y = 0, this.attrs = {}, this.paper = b, this.matrix = c.matrix(), this._ = { transform: [], sx: 1, sy: 1, dx: 0, dy: 0, deg: 0, dirty: 1, dirtyT: 1 }, !b.bottom && (b.bottom = this), this.prev = b.top, b.top && (b.top.next = this), b.top = this, this.next = null }, E = c.el; D.prototype = E, E.constructor = D, E.transform = function (a) { if (null == a) return this._.transform; var d, e = this.paper._viewBoxShift, f = e ? "s" + [e.scale, e.scale] + "-1-1t" + [e.dx, e.dy] : o; e && (d = a = b(a).replace(/\.{3}|\u2026/g, this._.transform || o)), c._extractTransform(this, f + a); var g, h = this.matrix.clone(), i = this.skew, j = this.node, k = ~b(this.attrs.fill).indexOf("-"), l = !b(this.attrs.fill).indexOf("url("); if (h.translate(1, 1), l || k || "image" == this.type) if (i.matrix = "1 0 0 1", i.offset = "0 0", g = h.split(), k && g.noRotation || !g.isSimple) { j.style.filter = h.toFilter(); var m = this.getBBox(), p = this.getBBox(1), q = m.x - p.x, r = m.y - p.y; j.coordorigin = q * -u + n + r * -u, z(this, 1, 1, q, r, 0) } else j.style.filter = o, z(this, g.scalex, g.scaley, g.dx, g.dy, g.rotate); else j.style.filter = o, i.matrix = b(h), i.offset = h.offset(); return d && (this._.transform = d), this }, E.rotate = function (a, c, e) { if (this.removed) return this; if (null != a) { if (a = b(a).split(k), a.length - 1 && (c = d(a[1]), e = d(a[2])), a = d(a[0]), null == e && (c = e), null == c || null == e) { var f = this.getBBox(1); c = f.x + f.width / 2, e = f.y + f.height / 2 } return this._.dirtyT = 1, this.transform(this._.transform.concat([["r", a, c, e]])), this } }, E.translate = function (a, c) { return this.removed ? this : (a = b(a).split(k), a.length - 1 && (c = d(a[1])), a = d(a[0]) || 0, c = +c || 0, this._.bbox && (this._.bbox.x += a, this._.bbox.y += c), this.transform(this._.transform.concat([["t", a, c]])), this) }, E.scale = function (a, c, e, f) { if (this.removed) return this; if (a = b(a).split(k), a.length - 1 && (c = d(a[1]), e = d(a[2]), f = d(a[3]), isNaN(e) && (e = null), isNaN(f) && (f = null)), a = d(a[0]), null == c && (c = a), null == f && (e = f), null == e || null == f) var g = this.getBBox(1); return e = null == e ? g.x + g.width / 2 : e, f = null == f ? g.y + g.height / 2 : f, this.transform(this._.transform.concat([["s", a, c, e, f]])), this._.dirtyT = 1, this }, E.hide = function () { return !this.removed && (this.node.style.display = "none"), this }, E.show = function () { return !this.removed && (this.node.style.display = o), this }, E._getBBox = function () { return this.removed ? {} : { x: this.X + (this.bbx || 0) - this.W / 2, y: this.Y - this.H, width: this.W, height: this.H } }, E.remove = function () { if (!this.removed && this.node.parentNode) { this.paper.__set__ && this.paper.__set__.exclude(this), c.eve.unbind("raphael.*.*." + this.id), c._tear(this, this.paper), this.node.parentNode.removeChild(this.node), this.shape && this.shape.parentNode.removeChild(this.shape); for (var a in this) this[a] = "function" == typeof this[a] ? c._removedFactory(a) : null; this.removed = !0 } }, E.attr = function (b, d) { if (this.removed) return this; if (null == b) { var e = {}; for (var f in this.attrs) this.attrs[a](f) && (e[f] = this.attrs[f]); return e.gradient && "none" == e.fill && (e.fill = e.gradient) && delete e.gradient, e.transform = this._.transform, e } if (null == d && c.is(b, "string")) { if (b == j && "none" == this.attrs.fill && this.attrs.gradient) return this.attrs.gradient; for (var g = b.split(k), h = {}, i = 0, m = g.length; m > i; i++) b = g[i], h[b] = b in this.attrs ? this.attrs[b] : c.is(this.paper.customAttributes[b], "function") ? this.paper.customAttributes[b].def : c._availableAttrs[b]; return m - 1 ? h : h[g[0]] } if (this.attrs && null == d && c.is(b, "array")) { for (h = {}, i = 0, m = b.length; m > i; i++) h[b[i]] = this.attr(b[i]); return h } var n; null != d && (n = {}, n[b] = d), null == d && c.is(b, "object") && (n = b); for (var o in n) l("raphael.attr." + o + "." + this.id, this, n[o]); if (n) { for (o in this.paper.customAttributes) if (this.paper.customAttributes[a](o) && n[a](o) && c.is(this.paper.customAttributes[o], "function")) { var p = this.paper.customAttributes[o].apply(this, [].concat(n[o])); this.attrs[o] = n[o]; for (var q in p) p[a](q) && (n[q] = p[q]) } n.text && "text" == this.type && (this.textpath.string = n.text), B(this, n) } return this }, E.toFront = function () { return !this.removed && this.node.parentNode.appendChild(this.node), this.paper && this.paper.top != this && c._tofront(this, this.paper), this }, E.toBack = function () { return this.removed ? this : (this.node.parentNode.firstChild != this.node && (this.node.parentNode.insertBefore(this.node, this.node.parentNode.firstChild), c._toback(this, this.paper)), this) }, E.insertAfter = function (a) { return this.removed ? this : (a.constructor == c.st.constructor && (a = a[a.length - 1]), a.node.nextSibling ? a.node.parentNode.insertBefore(this.node, a.node.nextSibling) : a.node.parentNode.appendChild(this.node), c._insertafter(this, a, this.paper), this) }, E.insertBefore = function (a) { return this.removed ? this : (a.constructor == c.st.constructor && (a = a[0]), a.node.parentNode.insertBefore(this.node, a.node), c._insertbefore(this, a, this.paper), this) }, E.blur = function (a) { var b = this.node.runtimeStyle, d = b.filter; return d = d.replace(r, o), 0 !== +a ? (this.attrs.blur = a, b.filter = d + n + m + ".Blur(pixelradius=" + (+a || 1.5) + ")", b.margin = c.format("-{0}px 0 0 -{0}px", f(+a || 1.5))) : (b.filter = d, b.margin = 0, delete this.attrs.blur), this }, c._engine.path = function (a, b) { var c = F("shape"); c.style.cssText = t, c.coordsize = u + n + u, c.coordorigin = b.coordorigin; var d = new D(c, b), e = { fill: "none", stroke: "#000" }; a && (e.path = a), d.type = "path", d.path = [], d.Path = o, B(d, e), b.canvas.appendChild(c); var f = F("skew"); return f.on = !0, c.appendChild(f), d.skew = f, d.transform(o), d }, c._engine.rect = function (a, b, d, e, f, g) { var h = c._rectPath(b, d, e, f, g), i = a.path(h), j = i.attrs; return i.X = j.x = b, i.Y = j.y = d, i.W = j.width = e, i.H = j.height = f, j.r = g, j.path = h, i.type = "rect", i }, c._engine.ellipse = function (a, b, c, d, e) { { var f = a.path(); f.attrs } return f.X = b - d, f.Y = c - e, f.W = 2 * d, f.H = 2 * e, f.type = "ellipse", B(f, { cx: b, cy: c, rx: d, ry: e }), f }, c._engine.circle = function (a, b, c, d) { { var e = a.path(); e.attrs } return e.X = b - d, e.Y = c - d, e.W = e.H = 2 * d, e.type = "circle", B(e, { cx: b, cy: c, r: d }), e }, c._engine.image = function (a, b, d, e, f, g) { var h = c._rectPath(d, e, f, g), i = a.path(h).attr({ stroke: "none" }), k = i.attrs, l = i.node, m = l.getElementsByTagName(j)[0]; return k.src = b, i.X = k.x = d, i.Y = k.y = e, i.W = k.width = f, i.H = k.height = g, k.path = h, i.type = "image", m.parentNode == l && l.removeChild(m), m.rotate = !0, m.src = b, m.type = "tile", i._.fillpos = [d, e], i._.fillsize = [f, g], l.appendChild(m), z(i, 1, 1, 0, 0, 0), i }, c._engine.text = function (a, d, e, g) { var h = F("shape"), i = F("path"), j = F("textpath"); d = d || 0, e = e || 0, g = g || "", i.v = c.format("m{0},{1}l{2},{1}", f(d * u), f(e * u), f(d * u) + 1), i.textpathok = !0, j.string = b(g), j.on = !0, h.style.cssText = t, h.coordsize = u + n + u, h.coordorigin = "0 0"; var k = new D(h, a), l = { fill: "#000", stroke: "none", font: c._availableAttrs.font, text: g }; k.shape = h, k.path = i, k.textpath = j, k.type = "text", k.attrs.text = b(g), k.attrs.x = d, k.attrs.y = e, k.attrs.w = 1, k.attrs.h = 1, B(k, l), h.appendChild(j), h.appendChild(i), a.canvas.appendChild(h); var m = F("skew"); return m.on = !0, h.appendChild(m), k.skew = m, k.transform(o), k }, c._engine.setSize = function (a, b) { var d = this.canvas.style; return this.width = a, this.height = b, a == +a && (a += "px"), b == +b && (b += "px"), d.width = a, d.height = b, d.clip = "rect(0 " + a + " " + b + " 0)", this._viewBox && c._engine.setViewBox.apply(this, this._viewBox), this }, c._engine.setViewBox = function (a, b, d, e, f) { c.eve("raphael.setViewBox", this, this._viewBox, [a, b, d, e, f]); var h, i, j = this.width, k = this.height, l = 1 / g(d / j, e / k); return f && (h = k / e, i = j / d, j > d * h && (a -= (j - d * h) / 2 / h), k > e * i && (b -= (k - e * i) / 2 / i)), this._viewBox = [a, b, d, e, !!f], this._viewBoxShift = { dx: -a, dy: -b, scale: l }, this.forEach(function (a) { a.transform("...") }), this }; var F; c._engine.initWin = function (a) { var b = a.document; b.createStyleSheet().addRule(".rvml", "behavior:url(#default#VML)"); try { !b.namespaces.rvml && b.namespaces.add("rvml", "urn:schemas-microsoft-com:vml"), F = function (a) { return b.createElement("<rvml:" + a + ' class="rvml">') } } catch (c) { F = function (a) { return b.createElement("<" + a + ' xmlns="urn:schemas-microsoft.com:vml" class="rvml">') } } }, c._engine.initWin(c._g.win), c._engine.create = function () { var a = c._getContainer.apply(0, arguments), b = a.container, d = a.height, e = a.width, f = a.x, g = a.y; if (!b) throw new Error("VML container not found."); var h = new c._Paper, i = h.canvas = c._g.doc.createElement("div"), j = i.style; return f = f || 0, g = g || 0, e = e || 512, d = d || 342, h.width = e, h.height = d, e == +e && (e += "px"), d == +d && (d += "px"), h.coordsize = 1e3 * u + n + 1e3 * u, h.coordorigin = "0 0", h.span = c._g.doc.createElement("span"), h.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;", i.appendChild(h.span), j.cssText = c.format("top:0;left:0;width:{0};height:{1};display:inline-block;position:relative;clip:rect(0 {0} {1} 0);overflow:hidden", e, d), 1 == b ? (c._g.doc.body.appendChild(i), j.left = f + "px", j.top = g + "px", j.position = "absolute") : b.firstChild ? b.insertBefore(i, b.firstChild) : b.appendChild(i), h.renderfix = function () { }, h }, c.prototype.clear = function () { c.eve("raphael.clear", this), this.canvas.innerHTML = o, this.span = c._g.doc.createElement("span"), this.span.style.cssText = "position:absolute;left:-9999em;top:-9999em;padding:0;margin:0;line-height:1;display:inline;", this.canvas.appendChild(this.span), this.bottom = this.top = null }, c.prototype.remove = function () { c.eve("raphael.remove", this), this.canvas.parentNode.removeChild(this.canvas); for (var a in this) this[a] = "function" == typeof this[a] ? c._removedFactory(a) : null; return !0 }; var G = c.st; for (var H in E) E[a](H) && !G[a](H) && (G[H] = function (a) { return function () { var b = arguments; return this.forEach(function (c) { c[a].apply(c, b) }) } }(H)) } }(), B.was ? A.win.Raphael = c : Raphael = c, c
});
(function() {
  var $, Morris, minutesSpecHelper, secondsSpecHelper,
    __slice = [].slice,
    __hasProp = {}.hasOwnProperty,
    __extends = function(child, parent) { for (var key in parent) { if (__hasProp.call(parent, key)) child[key] = parent[key]; } function ctor() { this.constructor = child; } ctor.prototype = parent.prototype; child.prototype = new ctor(); child.__super__ = parent.prototype; return child; },
    __bind = function(fn, me){ return function(){ return fn.apply(me, arguments); }; },
    __indexOf = [].indexOf || function(item) { for (var i = 0, l = this.length; i < l; i++) { if (i in this && this[i] === item) return i; } return -1; };

  Morris = window.Morris = {};

  $ = jQuery;

  Morris.EventEmitter = (function() {

    function EventEmitter() {}

    EventEmitter.prototype.on = function(name, handler) {
      if (this.handlers == null) {
        this.handlers = {};
      }
      if (this.handlers[name] == null) {
        this.handlers[name] = [];
      }
      this.handlers[name].push(handler);
      return this;
    };

    EventEmitter.prototype.fire = function() {
      var args, handler, name, _i, _len, _ref, _results;
      name = arguments[0], args = 2 <= arguments.length ? __slice.call(arguments, 1) : [];
      if ((this.handlers != null) && (this.handlers[name] != null)) {
        _ref = this.handlers[name];
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          handler = _ref[_i];
          _results.push(handler.apply(null, args));
        }
        return _results;
      }
    };

    return EventEmitter;

  })();

  Morris.commas = function(num) {
    var absnum, intnum, ret, strabsnum;
    if (num != null) {
      ret = num < 0 ? "-" : "";
      absnum = Math.abs(num);
      intnum = Math.floor(absnum).toFixed(0);
      ret += intnum.replace(/(?=(?:\d{3})+$)(?!^)/g, ',');
      strabsnum = absnum.toString();
      if (strabsnum.length > intnum.length) {
        ret += strabsnum.slice(intnum.length);
      }
      return ret;
    } else {
      return '-';
    }
  };

  Morris.pad2 = function(number) {
    return (number < 10 ? '0' : '') + number;
  };

  Morris.Grid = (function(_super) {

    __extends(Grid, _super);

    function Grid(options) {
      var _this = this;
      if (typeof options.element === 'string') {
        this.el = $(document.getElementById(options.element));
      } else {
        this.el = $(options.element);
      }
      if (!(this.el != null) || this.el.length === 0) {
        throw new Error("Graph container element not found");
      }
      if (this.el.css('position') === 'static') {
        this.el.css('position', 'relative');
      }
      this.options = $.extend({}, this.gridDefaults, this.defaults || {}, options);
      if (typeof this.options.units === 'string') {
        this.options.postUnits = options.units;
      }
      this.raphael = new Raphael(this.el[0]);
      this.elementWidth = null;
      this.elementHeight = null;
      this.dirty = false;
      if (this.init) {
        this.init();
      }
      this.setData(this.options.data);
      this.el.bind('mousemove', function(evt) {
        var offset;
        offset = _this.el.offset();
        return _this.fire('hovermove', evt.pageX - offset.left, evt.pageY - offset.top);
      });
      this.el.bind('mouseout', function(evt) {
        return _this.fire('hoverout');
      });
      this.el.bind('touchstart touchmove touchend', function(evt) {
        var offset, touch;
        touch = evt.originalEvent.touches[0] || evt.originalEvent.changedTouches[0];
        offset = _this.el.offset();
        _this.fire('hover', touch.pageX - offset.left, touch.pageY - offset.top);
        return touch;
      });
      this.el.bind('click', function(evt) {
        var offset;
        offset = _this.el.offset();
        return _this.fire('gridclick', evt.pageX - offset.left, evt.pageY - offset.top);
      });
      if (this.postInit) {
        this.postInit();
      }
    }

    Grid.prototype.gridDefaults = {
      dateFormat: null,
      axes: true,
      grid: true,
      gridLineColor: '#aaa',
      gridStrokeWidth: 0.5,
      gridTextColor: '#888',
      gridTextSize: 12,
      gridTextFamily: 'sans-serif',
      gridTextWeight: 'normal',
      hideHover: false,
      yLabelFormat: null,
      xLabelAngle: 0,
      numLines: 5,
      padding: 25,
      parseTime: true,
      postUnits: '',
      preUnits: '',
      ymax: 'auto',
      ymin: 'auto 0',
      goals: [],
      goalStrokeWidth: 1.0,
      goalLineColors: ['#666633', '#999966', '#cc6666', '#663333'],
      events: [],
      eventStrokeWidth: 1.0,
      eventLineColors: ['#005a04', '#ccffbb', '#3a5f0b', '#005502']
    };

    Grid.prototype.setData = function(data, redraw) {
      var e, idx, index, maxGoal, minGoal, ret, row, step, total, y, ykey, ymax, ymin, yval;
      if (redraw == null) {
        redraw = true;
      }
      this.options.data = data;
      if (!(data != null) || data.length === 0) {
        this.data = [];
        this.raphael.clear();
        if (this.hover != null) {
          this.hover.hide();
        }
        return;
      }
      ymax = this.cumulative ? 0 : null;
      ymin = this.cumulative ? 0 : null;
      if (this.options.goals.length > 0) {
        minGoal = Math.min.apply(null, this.options.goals);
        maxGoal = Math.max.apply(null, this.options.goals);
        ymin = ymin != null ? Math.min(ymin, minGoal) : minGoal;
        ymax = ymax != null ? Math.max(ymax, maxGoal) : maxGoal;
      }
      this.data = (function() {
        var _i, _len, _results;
        _results = [];
        for (index = _i = 0, _len = data.length; _i < _len; index = ++_i) {
          row = data[index];
          ret = {};
          ret.label = row[this.options.xkey];
          if (this.options.parseTime) {
            ret.x = Morris.parseDate(ret.label);
            if (this.options.dateFormat) {
              ret.label = this.options.dateFormat(ret.x);
            } else if (typeof ret.label === 'number') {
              ret.label = new Date(ret.label).toString();
            }
          } else {
            ret.x = index;
            if (this.options.xLabelFormat) {
              ret.label = this.options.xLabelFormat(ret);
            }
          }
          total = 0;
          ret.y = (function() {
            var _j, _len1, _ref, _results1;
            _ref = this.options.ykeys;
            _results1 = [];
            for (idx = _j = 0, _len1 = _ref.length; _j < _len1; idx = ++_j) {
              ykey = _ref[idx];
              yval = row[ykey];
              if (typeof yval === 'string') {
                yval = parseFloat(yval);
              }
              if ((yval != null) && typeof yval !== 'number') {
                yval = null;
              }
              if (yval != null) {
                if (this.cumulative) {
                  total += yval;
                } else {
                  if (ymax != null) {
                    ymax = Math.max(yval, ymax);
                    ymin = Math.min(yval, ymin);
                  } else {
                    ymax = ymin = yval;
                  }
                }
              }
              if (this.cumulative && (total != null)) {
                ymax = Math.max(total, ymax);
                ymin = Math.min(total, ymin);
              }
              _results1.push(yval);
            }
            return _results1;
          }).call(this);
          _results.push(ret);
        }
        return _results;
      }).call(this);
      if (this.options.parseTime) {
        this.data = this.data.sort(function(a, b) {
          return (a.x > b.x) - (b.x > a.x);
        });
      }
      this.xmin = this.data[0].x;
      this.xmax = this.data[this.data.length - 1].x;
      this.events = [];
      if (this.options.parseTime && this.options.events.length > 0) {
        this.events = (function() {
          var _i, _len, _ref, _results;
          _ref = this.options.events;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            e = _ref[_i];
            _results.push(Morris.parseDate(e));
          }
          return _results;
        }).call(this);
        this.xmax = Math.max(this.xmax, Math.max.apply(null, this.events));
        this.xmin = Math.min(this.xmin, Math.min.apply(null, this.events));
      }
      if (this.xmin === this.xmax) {
        this.xmin -= 1;
        this.xmax += 1;
      }
      this.ymin = this.yboundary('min', ymin);
      this.ymax = this.yboundary('max', ymax);
      if (this.ymin === this.ymax) {
        if (ymin) {
          this.ymin -= 1;
        }
        this.ymax += 1;
      }
      if (this.options.axes === true || this.options.grid === true) {
        if (this.options.ymax === this.gridDefaults.ymax && this.options.ymin === this.gridDefaults.ymin) {
          this.grid = this.autoGridLines(this.ymin, this.ymax, this.options.numLines);
          this.ymin = Math.min(this.ymin, this.grid[0]);
          this.ymax = Math.max(this.ymax, this.grid[this.grid.length - 1]);
        } else {
          step = (this.ymax - this.ymin) / (this.options.numLines - 1);
          this.grid = (function() {
            var _i, _ref, _ref1, _results;
            _results = [];
            for (y = _i = _ref = this.ymin, _ref1 = this.ymax; _ref <= _ref1 ? _i <= _ref1 : _i >= _ref1; y = _i += step) {
              _results.push(y);
            }
            return _results;
          }).call(this);
        }
      }
      this.dirty = true;
      if (redraw) {
        return this.redraw();
      }
    };

    Grid.prototype.yboundary = function(boundaryType, currentValue) {
      var boundaryOption, suggestedValue;
      boundaryOption = this.options["y" + boundaryType];
      if (typeof boundaryOption === 'string') {
        if (boundaryOption.slice(0, 4) === 'auto') {
          if (boundaryOption.length > 5) {
            suggestedValue = parseInt(boundaryOption.slice(5), 10);
            if (currentValue == null) {
              return suggestedValue;
            }
            return Math[boundaryType](currentValue, suggestedValue);
          } else {
            if (currentValue != null) {
              return currentValue;
            } else {
              return 0;
            }
          }
        } else {
          return parseInt(boundaryOption, 10);
        }
      } else {
        return boundaryOption;
      }
    };

    Grid.prototype.autoGridLines = function(ymin, ymax, nlines) {
      var gmax, gmin, grid, smag, span, step, unit, y, ymag;
      span = ymax - ymin;
      ymag = Math.floor(Math.log(span) / Math.log(10));
      unit = Math.pow(10, ymag);
      gmin = Math.floor(ymin / unit) * unit;
      gmax = Math.ceil(ymax / unit) * unit;
      step = (gmax - gmin) / (nlines - 1);
      if (unit === 1 && step > 1 && Math.ceil(step) !== step) {
        step = Math.ceil(step);
        gmax = gmin + step * (nlines - 1);
      }
      if (gmin < 0 && gmax > 0) {
        gmin = Math.floor(ymin / step) * step;
        gmax = Math.ceil(ymax / step) * step;
      }
      if (step < 1) {
        smag = Math.floor(Math.log(step) / Math.log(10));
        grid = (function() {
          var _i, _results;
          _results = [];
          for (y = _i = gmin; gmin <= gmax ? _i <= gmax : _i >= gmax; y = _i += step) {
            _results.push(parseFloat(y.toFixed(1 - smag)));
          }
          return _results;
        })();
      } else {
        grid = (function() {
          var _i, _results;
          _results = [];
          for (y = _i = gmin; gmin <= gmax ? _i <= gmax : _i >= gmax; y = _i += step) {
            _results.push(y);
          }
          return _results;
        })();
      }
      return grid;
    };

    Grid.prototype._calc = function() {
      var bottomOffsets, gridLine, h, i, w, yLabelWidths;
      w = this.el.width();
      h = this.el.height();
      if (this.elementWidth !== w || this.elementHeight !== h || this.dirty) {
        this.elementWidth = w;
        this.elementHeight = h;
        this.dirty = false;
        this.left = this.options.padding;
        this.right = this.elementWidth - this.options.padding;
        this.top = this.options.padding;
        this.bottom = this.elementHeight - this.options.padding;
        if (this.options.axes) {
          yLabelWidths = (function() {
            var _i, _len, _ref, _results;
            _ref = this.grid;
            _results = [];
            for (_i = 0, _len = _ref.length; _i < _len; _i++) {
              gridLine = _ref[_i];
              _results.push(this.measureText(this.yAxisFormat(gridLine)).width);
            }
            return _results;
          }).call(this);
          this.left += Math.max.apply(Math, yLabelWidths);
          bottomOffsets = (function() {
            var _i, _ref, _results;
            _results = [];
            for (i = _i = 0, _ref = this.data.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
              _results.push(this.measureText(this.data[i].text, -this.options.xLabelAngle).height);
            }
            return _results;
          }).call(this);
          this.bottom -= Math.max.apply(Math, bottomOffsets);
        }
        this.width = Math.max(1, this.right - this.left);
        this.height = Math.max(1, this.bottom - this.top);
        this.dx = this.width / (this.xmax - this.xmin);
        this.dy = this.height / (this.ymax - this.ymin);
        if (this.calc) {
          return this.calc();
        }
      }
    };

    Grid.prototype.transY = function(y) {
      return this.bottom - (y - this.ymin) * this.dy;
    };

    Grid.prototype.transX = function(x) {
      if (this.data.length === 1) {
        return (this.left + this.right) / 2;
      } else {
        return this.left + (x - this.xmin) * this.dx;
      }
    };

    Grid.prototype.redraw = function() {
      this.raphael.clear();
      this._calc();
      this.drawGrid();
      this.drawGoals();
      this.drawEvents();
      if (this.draw) {
        return this.draw();
      }
    };

    Grid.prototype.measureText = function(text, angle) {
      var ret, tt;
      if (angle == null) {
        angle = 0;
      }
      tt = this.raphael.text(100, 100, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).rotate(angle);
      ret = tt.getBBox();
      tt.remove();
      return ret;
    };

    Grid.prototype.yAxisFormat = function(label) {
      return this.yLabelFormat(label);
    };

    Grid.prototype.yLabelFormat = function(label) {
      if (typeof this.options.yLabelFormat === 'function') {
        return this.options.yLabelFormat(label);
      } else {
        return "" + this.options.preUnits + (Morris.commas(label)) + this.options.postUnits;
      }
    };

    Grid.prototype.updateHover = function(x, y) {
      var hit, _ref;
      hit = this.hitTest(x, y);
      if (hit != null) {
        return (_ref = this.hover).update.apply(_ref, hit);
      }
    };

    Grid.prototype.drawGrid = function() {
      var lineY, y, _i, _len, _ref, _results;
      if (this.options.grid === false && this.options.axes === false) {
        return;
      }
      _ref = this.grid;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        lineY = _ref[_i];
        y = this.transY(lineY);
        if (this.options.axes) {
          this.drawYAxisLabel(this.left - this.options.padding / 2, y, this.yAxisFormat(lineY));
        }
        if (this.options.grid) {
          _results.push(this.drawGridLine("M" + this.left + "," + y + "H" + (this.left + this.width)));
        } else {
          _results.push(void 0);
        }
      }
      return _results;
    };

    Grid.prototype.drawGoals = function() {
      var color, goal, i, _i, _len, _ref, _results;
      _ref = this.options.goals;
      _results = [];
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        goal = _ref[i];
        color = this.options.goalLineColors[i % this.options.goalLineColors.length];
        _results.push(this.drawGoal(goal, color));
      }
      return _results;
    };

    Grid.prototype.drawEvents = function() {
      var color, event, i, _i, _len, _ref, _results;
      _ref = this.events;
      _results = [];
      for (i = _i = 0, _len = _ref.length; _i < _len; i = ++_i) {
        event = _ref[i];
        color = this.options.eventLineColors[i % this.options.eventLineColors.length];
        _results.push(this.drawEvent(event, color));
      }
      return _results;
    };

    Grid.prototype.drawGoal = function(goal, color) {
      return this.raphael.path("M" + this.left + "," + (this.transY(goal)) + "H" + this.right).attr('stroke', color).attr('stroke-width', this.options.goalStrokeWidth);
    };

    Grid.prototype.drawEvent = function(event, color) {
      return this.raphael.path("M" + (this.transX(event)) + "," + this.bottom + "V" + this.top).attr('stroke', color).attr('stroke-width', this.options.eventStrokeWidth);
    };

    Grid.prototype.drawYAxisLabel = function(xPos, yPos, text) {
      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor).attr('text-anchor', 'end');
    };

    Grid.prototype.drawGridLine = function(path) {
      return this.raphael.path(path).attr('stroke', this.options.gridLineColor).attr('stroke-width', this.options.gridStrokeWidth);
    };

    return Grid;

  })(Morris.EventEmitter);

  Morris.parseDate = function(date) {
    var isecs, m, msecs, n, o, offsetmins, p, q, r, ret, secs;
    if (typeof date === 'number') {
      return date;
    }
    m = date.match(/^(\d+) Q(\d)$/);
    n = date.match(/^(\d+)-(\d+)$/);
    o = date.match(/^(\d+)-(\d+)-(\d+)$/);
    p = date.match(/^(\d+) W(\d+)$/);
    q = date.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+)(Z|([+-])(\d\d):?(\d\d))?$/);
    r = date.match(/^(\d+)-(\d+)-(\d+)[ T](\d+):(\d+):(\d+(\.\d+)?)(Z|([+-])(\d\d):?(\d\d))?$/);
    if (m) {
      return new Date(parseInt(m[1], 10), parseInt(m[2], 10) * 3 - 1, 1).getTime();
    } else if (n) {
      return new Date(parseInt(n[1], 10), parseInt(n[2], 10) - 1, 1).getTime();
    } else if (o) {
      return new Date(parseInt(o[1], 10), parseInt(o[2], 10) - 1, parseInt(o[3], 10)).getTime();
    } else if (p) {
      ret = new Date(parseInt(p[1], 10), 0, 1);
      if (ret.getDay() !== 4) {
        ret.setMonth(0, 1 + ((4 - ret.getDay()) + 7) % 7);
      }
      return ret.getTime() + parseInt(p[2], 10) * 604800000;
    } else if (q) {
      if (!q[6]) {
        return new Date(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10)).getTime();
      } else {
        offsetmins = 0;
        if (q[6] !== 'Z') {
          offsetmins = parseInt(q[8], 10) * 60 + parseInt(q[9], 10);
          if (q[7] === '+') {
            offsetmins = 0 - offsetmins;
          }
        }
        return Date.UTC(parseInt(q[1], 10), parseInt(q[2], 10) - 1, parseInt(q[3], 10), parseInt(q[4], 10), parseInt(q[5], 10) + offsetmins);
      }
    } else if (r) {
      secs = parseFloat(r[6]);
      isecs = Math.floor(secs);
      msecs = Math.round((secs - isecs) * 1000);
      if (!r[8]) {
        return new Date(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10), isecs, msecs).getTime();
      } else {
        offsetmins = 0;
        if (r[8] !== 'Z') {
          offsetmins = parseInt(r[10], 10) * 60 + parseInt(r[11], 10);
          if (r[9] === '+') {
            offsetmins = 0 - offsetmins;
          }
        }
        return Date.UTC(parseInt(r[1], 10), parseInt(r[2], 10) - 1, parseInt(r[3], 10), parseInt(r[4], 10), parseInt(r[5], 10) + offsetmins, isecs, msecs);
      }
    } else {
      return new Date(parseInt(date, 10), 0, 1).getTime();
    }
  };

  Morris.Hover = (function() {

    Hover.defaults = {
      "class": 'morris-hover morris-default-style'
    };

    function Hover(options) {
      if (options == null) {
        options = {};
      }
      this.options = $.extend({}, Morris.Hover.defaults, options);
      this.el = $("<div class='" + this.options["class"] + "'></div>");
      this.el.hide();
      this.options.parent.append(this.el);
    }

    Hover.prototype.update = function(html, x, y) {
      this.html(html);
      this.show();
      return this.moveTo(x, y);
    };

    Hover.prototype.html = function(content) {
      return this.el.html(content);
    };

    Hover.prototype.moveTo = function(x, y) {
      var hoverHeight, hoverWidth, left, parentHeight, parentWidth, top;
      parentWidth = this.options.parent.innerWidth();
      parentHeight = this.options.parent.innerHeight();
      hoverWidth = this.el.outerWidth();
      hoverHeight = this.el.outerHeight();
      left = Math.min(Math.max(0, x - hoverWidth / 2), parentWidth - hoverWidth);
      if (y != null) {
        top = y - hoverHeight - 10;
        if (top < 0) {
          top = y + 10;
          if (top + hoverHeight > parentHeight) {
            top = parentHeight / 2 - hoverHeight / 2;
          }
        }
      } else {
        top = parentHeight / 2 - hoverHeight / 2;
      }
      return this.el.css({
        left: left + "px",
        top: parseInt(top) + "px"
      });
    };

    Hover.prototype.show = function() {
      return this.el.show();
    };

    Hover.prototype.hide = function() {
      return this.el.hide();
    };

    return Hover;

  })();

  Morris.Line = (function(_super) {

    __extends(Line, _super);

    function Line(options) {
      this.hilight = __bind(this.hilight, this);

      this.onHoverOut = __bind(this.onHoverOut, this);

      this.onHoverMove = __bind(this.onHoverMove, this);

      this.onGridClick = __bind(this.onGridClick, this);
      if (!(this instanceof Morris.Line)) {
        return new Morris.Line(options);
      }
      Line.__super__.constructor.call(this, options);
    }

    Line.prototype.init = function() {
      this.pointGrow = Raphael.animation({
        r: this.options.pointSize + 3
      }, 25, 'linear');
      this.pointShrink = Raphael.animation({
        r: this.options.pointSize
      }, 25, 'linear');
      if (this.options.hideHover !== 'always') {
        this.hover = new Morris.Hover({
          parent: this.el
        });
        this.on('hovermove', this.onHoverMove);
        this.on('hoverout', this.onHoverOut);
        return this.on('gridclick', this.onGridClick);
      }
    };

    Line.prototype.defaults = {
      lineWidth: 3,
      pointSize: 4,
      lineColors: ['#0b62a4', '#7A92A3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],
      pointWidths: [1],
      pointStrokeColors: ['#ffffff'],
      pointFillColors: [],
      smooth: true,
      xLabels: 'auto',
      xLabelFormat: null,
      xLabelMargin: 24,
      continuousLine: true,
      hideHover: false
    };

    Line.prototype.calc = function() {
      this.calcPoints();
      return this.generatePaths();
    };

    Line.prototype.calcPoints = function() {
      var row, y, _i, _len, _ref, _results;
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        row = _ref[_i];
        row._x = this.transX(row.x);
        row._y = (function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (y != null) {
              _results1.push(this.transY(y));
            } else {
              _results1.push(y);
            }
          }
          return _results1;
        }).call(this);
        _results.push(row._ymax = Math.min.apply(null, [this.bottom].concat((function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row._y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (y != null) {
              _results1.push(y);
            }
          }
          return _results1;
        })())));
      }
      return _results;
    };

    Line.prototype.hitTest = function(x, y) {
      var index, r, _i, _len, _ref;
      if (this.data.length === 0) {
        return null;
      }
      _ref = this.data.slice(1);
      for (index = _i = 0, _len = _ref.length; _i < _len; index = ++_i) {
        r = _ref[index];
        if (x < (r._x + this.data[index]._x) / 2) {
          break;
        }
      }
      return index;
    };

    Line.prototype.onGridClick = function(x, y) {
      var index;
      index = this.hitTest(x, y);
      return this.fire('click', index, this.options.data[index], x, y);
    };

    Line.prototype.onHoverMove = function(x, y) {
      var index;
      index = this.hitTest(x, y);
      return this.displayHoverForRow(index);
    };

    Line.prototype.onHoverOut = function() {
      if (this.options.hideHover !== false) {
        return this.displayHoverForRow(null);
      }
    };

    Line.prototype.displayHoverForRow = function(index) {
      var _ref;
      if (index != null) {
        (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));
        return this.hilight(index);
      } else {
        this.hover.hide();
        return this.hilight();
      }
    };

    Line.prototype.hoverContentForRow = function(index) {
      var content, j, row, y, _i, _len, _ref;
      row = this.data[index];
      content = "<div class='morris-hover-row-label'>" + row.label + "</div>";
      _ref = row.y;
      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {
        y = _ref[j];
        content += "<div class='morris-hover-point' style='color: " + (this.colorFor(row, j, 'label')) + "'>\n  " + this.options.labels[j] + ":\n  " + (this.yLabelFormat(y)) + "\n</div>";
      }
      if (typeof this.options.hoverCallback === 'function') {
        content = this.options.hoverCallback(index, this.options, content);
      }
      return [content, row._x, row._ymax];
    };

    Line.prototype.generatePaths = function() {
      var c, coords, i, r, smooth;
      return this.paths = (function() {
        var _i, _ref, _ref1, _results;
        _results = [];
        for (i = _i = 0, _ref = this.options.ykeys.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
          smooth = this.options.smooth === true || (_ref1 = this.options.ykeys[i], __indexOf.call(this.options.smooth, _ref1) >= 0);
          coords = (function() {
            var _j, _len, _ref2, _results1;
            _ref2 = this.data;
            _results1 = [];
            for (_j = 0, _len = _ref2.length; _j < _len; _j++) {
              r = _ref2[_j];
              if (r._y[i] !== void 0) {
                _results1.push({
                  x: r._x,
                  y: r._y[i]
                });
              }
            }
            return _results1;
          }).call(this);
          if (this.options.continuousLine) {
            coords = (function() {
              var _j, _len, _results1;
              _results1 = [];
              for (_j = 0, _len = coords.length; _j < _len; _j++) {
                c = coords[_j];
                if (c.y !== null) {
                  _results1.push(c);
                }
              }
              return _results1;
            })();
          }
          if (coords.length > 1) {
            _results.push(Morris.Line.createPath(coords, smooth, this.bottom));
          } else {
            _results.push(null);
          }
        }
        return _results;
      }).call(this);
    };

    Line.prototype.draw = function() {
      if (this.options.axes) {
        this.drawXAxis();
      }
      this.drawSeries();
      if (this.options.hideHover === false) {
        return this.displayHoverForRow(this.data.length - 1);
      }
    };

    Line.prototype.drawXAxis = function() {
      var drawLabel, l, labels, prevAngleMargin, prevLabelMargin, row, ypos, _i, _len, _results,
        _this = this;
      ypos = this.bottom + this.options.padding / 2;
      prevLabelMargin = null;
      prevAngleMargin = null;
      drawLabel = function(labelText, xpos) {
        var label, labelBox, margin, offset, textBox;
        label = _this.drawXAxisLabel(_this.transX(xpos), ypos, labelText);
        textBox = label.getBBox();
        label.transform("r" + (-_this.options.xLabelAngle));
        labelBox = label.getBBox();
        label.transform("t0," + (labelBox.height / 2) + "...");
        if (_this.options.xLabelAngle !== 0) {
          offset = -0.5 * textBox.width * Math.cos(_this.options.xLabelAngle * Math.PI / 180.0);
          label.transform("t" + offset + ",0...");
        }
        labelBox = label.getBBox();
        if ((!(prevLabelMargin != null) || prevLabelMargin >= labelBox.x + labelBox.width || (prevAngleMargin != null) && prevAngleMargin >= labelBox.x) && labelBox.x >= 0 && (labelBox.x + labelBox.width) < _this.el.width()) {
          if (_this.options.xLabelAngle !== 0) {
            margin = 1.25 * _this.options.gridTextSize / Math.sin(_this.options.xLabelAngle * Math.PI / 180.0);
            prevAngleMargin = labelBox.x - margin;
          }
          return prevLabelMargin = labelBox.x - _this.options.xLabelMargin;
        } else {
          return label.remove();
        }
      };
      if (this.options.parseTime) {
        if (this.data.length === 1 && this.options.xLabels === 'auto') {
          labels = [[this.data[0].label, this.data[0].x]];
        } else {
          labels = Morris.labelSeries(this.xmin, this.xmax, this.width, this.options.xLabels, this.options.xLabelFormat);
        }
      } else {
        labels = (function() {
          var _i, _len, _ref, _results;
          _ref = this.data;
          _results = [];
          for (_i = 0, _len = _ref.length; _i < _len; _i++) {
            row = _ref[_i];
            _results.push([row.label, row.x]);
          }
          return _results;
        }).call(this);
      }
      labels.reverse();
      _results = [];
      for (_i = 0, _len = labels.length; _i < _len; _i++) {
        l = labels[_i];
        _results.push(drawLabel(l[0], l[1]));
      }
      return _results;
    };

    Line.prototype.drawSeries = function() {
      var i, _i, _j, _ref, _ref1, _results;
      this.seriesPoints = [];
      for (i = _i = _ref = this.options.ykeys.length - 1; _ref <= 0 ? _i <= 0 : _i >= 0; i = _ref <= 0 ? ++_i : --_i) {
        this._drawLineFor(i);
      }
      _results = [];
      for (i = _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; i = _ref1 <= 0 ? ++_j : --_j) {
        _results.push(this._drawPointFor(i));
      }
      return _results;
    };

    Line.prototype._drawPointFor = function(index) {
      var circle, row, _i, _len, _ref, _results;
      this.seriesPoints[index] = [];
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        row = _ref[_i];
        circle = null;
        if (row._y[index] != null) {
          circle = this.drawLinePoint(row._x, row._y[index], this.options.pointSize, this.colorFor(row, index, 'point'), index);
        }
        _results.push(this.seriesPoints[index].push(circle));
      }
      return _results;
    };

    Line.prototype._drawLineFor = function(index) {
      var path;
      path = this.paths[index];
      if (path !== null) {
        return this.drawLinePath(path, this.colorFor(null, index, 'line'));
      }
    };

    Line.createPath = function(coords, smooth, bottom) {
      var coord, g, grads, i, ix, lg, path, prevCoord, x1, x2, y1, y2, _i, _len;
      path = "";
      if (smooth) {
        grads = Morris.Line.gradients(coords);
      }
      prevCoord = {
        y: null
      };
      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {
        coord = coords[i];
        if (coord.y != null) {
          if (prevCoord.y != null) {
            if (smooth) {
              g = grads[i];
              lg = grads[i - 1];
              ix = (coord.x - prevCoord.x) / 4;
              x1 = prevCoord.x + ix;
              y1 = Math.min(bottom, prevCoord.y + ix * lg);
              x2 = coord.x - ix;
              y2 = Math.min(bottom, coord.y - ix * g);
              path += "C" + x1 + "," + y1 + "," + x2 + "," + y2 + "," + coord.x + "," + coord.y;
            } else {
              path += "L" + coord.x + "," + coord.y;
            }
          } else {
            if (!smooth || (grads[i] != null)) {
              path += "M" + coord.x + "," + coord.y;
            }
          }
        }
        prevCoord = coord;
      }
      return path;
    };

    Line.gradients = function(coords) {
      var coord, grad, i, nextCoord, prevCoord, _i, _len, _results;
      grad = function(a, b) {
        return (a.y - b.y) / (a.x - b.x);
      };
      _results = [];
      for (i = _i = 0, _len = coords.length; _i < _len; i = ++_i) {
        coord = coords[i];
        if (coord.y != null) {
          nextCoord = coords[i + 1] || {
            y: null
          };
          prevCoord = coords[i - 1] || {
            y: null
          };
          if ((prevCoord.y != null) && (nextCoord.y != null)) {
            _results.push(grad(prevCoord, nextCoord));
          } else if (prevCoord.y != null) {
            _results.push(grad(prevCoord, coord));
          } else if (nextCoord.y != null) {
            _results.push(grad(coord, nextCoord));
          } else {
            _results.push(null);
          }
        } else {
          _results.push(null);
        }
      }
      return _results;
    };

    Line.prototype.hilight = function(index) {
      var i, _i, _j, _ref, _ref1;
      if (this.prevHilight !== null && this.prevHilight !== index) {
        for (i = _i = 0, _ref = this.seriesPoints.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; i = 0 <= _ref ? ++_i : --_i) {
          if (this.seriesPoints[i][this.prevHilight]) {
            this.seriesPoints[i][this.prevHilight].animate(this.pointShrink);
          }
        }
      }
      if (index !== null && this.prevHilight !== index) {
        for (i = _j = 0, _ref1 = this.seriesPoints.length - 1; 0 <= _ref1 ? _j <= _ref1 : _j >= _ref1; i = 0 <= _ref1 ? ++_j : --_j) {
          if (this.seriesPoints[i][index]) {
            this.seriesPoints[i][index].animate(this.pointGrow);
          }
        }
      }
      return this.prevHilight = index;
    };

    Line.prototype.colorFor = function(row, sidx, type) {
      if (typeof this.options.lineColors === 'function') {
        return this.options.lineColors.call(this, row, sidx, type);
      } else if (type === 'point') {
        return this.options.pointFillColors[sidx % this.options.pointFillColors.length] || this.options.lineColors[sidx % this.options.lineColors.length];
      } else {
        return this.options.lineColors[sidx % this.options.lineColors.length];
      }
    };

    Line.prototype.drawXAxisLabel = function(xPos, yPos, text) {
      return this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);
    };

    Line.prototype.drawLinePath = function(path, lineColor) {
      return this.raphael.path(path).attr('stroke', lineColor).attr('stroke-width', this.options.lineWidth);
    };

    Line.prototype.drawLinePoint = function(xPos, yPos, size, pointColor, lineIndex) {
      return this.raphael.circle(xPos, yPos, size).attr('fill', pointColor).attr('stroke-width', this.strokeWidthForSeries(lineIndex)).attr('stroke', this.strokeForSeries(lineIndex));
    };

    Line.prototype.strokeWidthForSeries = function(index) {
      return this.options.pointWidths[index % this.options.pointWidths.length];
    };

    Line.prototype.strokeForSeries = function(index) {
      return this.options.pointStrokeColors[index % this.options.pointStrokeColors.length];
    };

    return Line;

  })(Morris.Grid);

  Morris.labelSeries = function(dmin, dmax, pxwidth, specName, xLabelFormat) {
    var d, d0, ddensity, name, ret, s, spec, t, _i, _len, _ref;
    ddensity = 200 * (dmax - dmin) / pxwidth;
    d0 = new Date(dmin);
    spec = Morris.LABEL_SPECS[specName];
    if (spec === void 0) {
      _ref = Morris.AUTO_LABEL_ORDER;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        name = _ref[_i];
        s = Morris.LABEL_SPECS[name];
        if (ddensity >= s.span) {
          spec = s;
          break;
        }
      }
    }
    if (spec === void 0) {
      spec = Morris.LABEL_SPECS["second"];
    }
    if (xLabelFormat) {
      spec = $.extend({}, spec, {
        fmt: xLabelFormat
      });
    }
    d = spec.start(d0);
    ret = [];
    while ((t = d.getTime()) <= dmax) {
      if (t >= dmin) {
        ret.push([spec.fmt(d), t]);
      }
      spec.incr(d);
    }
    return ret;
  };

  minutesSpecHelper = function(interval) {
    return {
      span: interval * 60 * 1000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours());
      },
      fmt: function(d) {
        return "" + (Morris.pad2(d.getHours())) + ":" + (Morris.pad2(d.getMinutes()));
      },
      incr: function(d) {
        return d.setUTCMinutes(d.getUTCMinutes() + interval);
      }
    };
  };

  secondsSpecHelper = function(interval) {
    return {
      span: interval * 1000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), d.getDate(), d.getHours(), d.getMinutes());
      },
      fmt: function(d) {
        return "" + (Morris.pad2(d.getHours())) + ":" + (Morris.pad2(d.getMinutes())) + ":" + (Morris.pad2(d.getSeconds()));
      },
      incr: function(d) {
        return d.setUTCSeconds(d.getUTCSeconds() + interval);
      }
    };
  };

  Morris.LABEL_SPECS = {
    "decade": {
      span: 172800000000,
      start: function(d) {
        return new Date(d.getFullYear() - d.getFullYear() % 10, 0, 1);
      },
      fmt: function(d) {
        return "" + (d.getFullYear());
      },
      incr: function(d) {
        return d.setFullYear(d.getFullYear() + 10);
      }
    },
    "year": {
      span: 17280000000,
      start: function(d) {
        return new Date(d.getFullYear(), 0, 1);
      },
      fmt: function(d) {
        return "" + (d.getFullYear());
      },
      incr: function(d) {
        return d.setFullYear(d.getFullYear() + 1);
      }
    },
    "month": {
      span: 2419200000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), 1);
      },
      fmt: function(d) {
        return "" + (d.getFullYear()) + "-" + (Morris.pad2(d.getMonth() + 1));
      },
      incr: function(d) {
        return d.setMonth(d.getMonth() + 1);
      }
    },
    "day": {
      span: 86400000,
      start: function(d) {
        return new Date(d.getFullYear(), d.getMonth(), d.getDate());
      },
      fmt: function(d) {
        return "" + (d.getFullYear()) + "-" + (Morris.pad2(d.getMonth() + 1)) + "-" + (Morris.pad2(d.getDate()));
      },
      incr: function(d) {
        return d.setDate(d.getDate() + 1);
      }
    },
    "hour": minutesSpecHelper(60),
    "30min": minutesSpecHelper(30),
    "15min": minutesSpecHelper(15),
    "10min": minutesSpecHelper(10),
    "5min": minutesSpecHelper(5),
    "minute": minutesSpecHelper(1),
    "30sec": secondsSpecHelper(30),
    "15sec": secondsSpecHelper(15),
    "10sec": secondsSpecHelper(10),
    "5sec": secondsSpecHelper(5),
    "second": secondsSpecHelper(1)
  };

  Morris.AUTO_LABEL_ORDER = ["decade", "year", "month", "day", "hour", "30min", "15min", "10min", "5min", "minute", "30sec", "15sec", "10sec", "5sec", "second"];

  Morris.Area = (function(_super) {
    var areaDefaults;

    __extends(Area, _super);

    areaDefaults = {
      fillOpacity: 'auto',
      behaveLikeLine: false
    };

    function Area(options) {
      var areaOptions;
      if (!(this instanceof Morris.Area)) {
        return new Morris.Area(options);
      }
      areaOptions = $.extend({}, areaDefaults, options);
      this.cumulative = !areaOptions.behaveLikeLine;
      if (areaOptions.fillOpacity === 'auto') {
        areaOptions.fillOpacity = areaOptions.behaveLikeLine ? .8 : 1;
      }
      Area.__super__.constructor.call(this, areaOptions);
    }

    Area.prototype.calcPoints = function() {
      var row, total, y, _i, _len, _ref, _results;
      _ref = this.data;
      _results = [];
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        row = _ref[_i];
        row._x = this.transX(row.x);
        total = 0;
        row._y = (function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (this.options.behaveLikeLine) {
              _results1.push(this.transY(y));
            } else {
              total += y || 0;
              _results1.push(this.transY(total));
            }
          }
          return _results1;
        }).call(this);
        _results.push(row._ymax = Math.max.apply(Math, row._y));
      }
      return _results;
    };

    Area.prototype.drawSeries = function() {
      var i, range, _i, _j, _k, _len, _ref, _ref1, _results, _results1, _results2;
      this.seriesPoints = [];
      if (this.options.behaveLikeLine) {
        range = (function() {
          _results = [];
          for (var _i = 0, _ref = this.options.ykeys.length - 1; 0 <= _ref ? _i <= _ref : _i >= _ref; 0 <= _ref ? _i++ : _i--){ _results.push(_i); }
          return _results;
        }).apply(this);
      } else {
        range = (function() {
          _results1 = [];
          for (var _j = _ref1 = this.options.ykeys.length - 1; _ref1 <= 0 ? _j <= 0 : _j >= 0; _ref1 <= 0 ? _j++ : _j--){ _results1.push(_j); }
          return _results1;
        }).apply(this);
      }
      _results2 = [];
      for (_k = 0, _len = range.length; _k < _len; _k++) {
        i = range[_k];
        this._drawFillFor(i);
        this._drawLineFor(i);
        _results2.push(this._drawPointFor(i));
      }
      return _results2;
    };

    Area.prototype._drawFillFor = function(index) {
      var path;
      path = this.paths[index];
      if (path !== null) {
        path = path + ("L" + (this.transX(this.xmax)) + "," + this.bottom + "L" + (this.transX(this.xmin)) + "," + this.bottom + "Z");
        return this.drawFilledPath(path, this.fillForSeries(index));
      }
    };

    Area.prototype.fillForSeries = function(i) {
      var color;
      color = Raphael.rgb2hsl(this.colorFor(this.data[i], i, 'line'));
      return Raphael.hsl(color.h, this.options.behaveLikeLine ? color.s * 0.9 : color.s * 0.75, Math.min(0.98, this.options.behaveLikeLine ? color.l * 1.2 : color.l * 1.25));
    };

    Area.prototype.drawFilledPath = function(path, fill) {
      return this.raphael.path(path).attr('fill', fill).attr('fill-opacity', this.options.fillOpacity).attr('stroke-width', 0);
    };

    return Area;

  })(Morris.Line);

  Morris.Bar = (function(_super) {

    __extends(Bar, _super);

    function Bar(options) {
      this.onHoverOut = __bind(this.onHoverOut, this);

      this.onHoverMove = __bind(this.onHoverMove, this);

      this.onGridClick = __bind(this.onGridClick, this);
      if (!(this instanceof Morris.Bar)) {
        return new Morris.Bar(options);
      }
      Bar.__super__.constructor.call(this, $.extend({}, options, {
        parseTime: false
      }));
    }

    Bar.prototype.init = function() {
      this.cumulative = this.options.stacked;
      if (this.options.hideHover !== 'always') {
        this.hover = new Morris.Hover({
          parent: this.el
        });
        this.on('hovermove', this.onHoverMove);
        this.on('hoverout', this.onHoverOut);
        return this.on('gridclick', this.onGridClick);
      }
    };

    Bar.prototype.defaults = {
      barSizeRatio: 0.75,
      barGap: 3,
      barColors: ['#0b62a4', '#7a92a3', '#4da74d', '#afd8f8', '#edc240', '#cb4b4b', '#9440ed'],
      xLabelMargin: 50
    };

    Bar.prototype.calc = function() {
      var _ref;
      this.calcBars();
      if (this.options.hideHover === false) {
        return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(this.data.length - 1));
      }
    };

    Bar.prototype.calcBars = function() {
      var idx, row, y, _i, _len, _ref, _results;
      _ref = this.data;
      _results = [];
      for (idx = _i = 0, _len = _ref.length; _i < _len; idx = ++_i) {
        row = _ref[idx];
        row._x = this.left + this.width * (idx + 0.5) / this.data.length;
        _results.push(row._y = (function() {
          var _j, _len1, _ref1, _results1;
          _ref1 = row.y;
          _results1 = [];
          for (_j = 0, _len1 = _ref1.length; _j < _len1; _j++) {
            y = _ref1[_j];
            if (y != null) {
              _results1.push(this.transY(y));
            } else {
              _results1.push(null);
            }
          }
          return _results1;
        }).call(this));
      }
      return _results;
    };

    Bar.prototype.draw = function() {
      if (this.options.axes) {
        this.drawXAxis();
      }
      return this.drawSeries();
    };

    Bar.prototype.drawXAxis = function() {
      var i, label, labelBox, margin, offset, prevAngleMargin, prevLabelMargin, row, textBox, ypos, _i, _ref, _results;
      ypos = this.bottom + this.options.padding / 2;
      prevLabelMargin = null;
      prevAngleMargin = null;
      _results = [];
      for (i = _i = 0, _ref = this.data.length; 0 <= _ref ? _i < _ref : _i > _ref; i = 0 <= _ref ? ++_i : --_i) {
        row = this.data[this.data.length - 1 - i];
        label = this.drawXAxisLabel(row._x, ypos, row.label);
        textBox = label.getBBox();
        label.transform("r" + (-this.options.xLabelAngle));
        labelBox = label.getBBox();
        label.transform("t0," + (labelBox.height / 2) + "...");
        if (this.options.xLabelAngle !== 0) {
          offset = -0.5 * textBox.width * Math.cos(this.options.xLabelAngle * Math.PI / 180.0);
          label.transform("t" + offset + ",0...");
        }
        if ((!(prevLabelMargin != null) || prevLabelMargin >= labelBox.x + labelBox.width || (prevAngleMargin != null) && prevAngleMargin >= labelBox.x) && labelBox.x >= 0 && (labelBox.x + labelBox.width) < this.el.width()) {
          if (this.options.xLabelAngle !== 0) {
            margin = 1.25 * this.options.gridTextSize / Math.sin(this.options.xLabelAngle * Math.PI / 180.0);
            prevAngleMargin = labelBox.x - margin;
          }
          _results.push(prevLabelMargin = labelBox.x - this.options.xLabelMargin);
        } else {
          _results.push(label.remove());
        }
      }
      return _results;
    };

    Bar.prototype.drawSeries = function() {
      var barWidth, bottom, groupWidth, idx, lastTop, left, leftPadding, numBars, row, sidx, size, top, ypos, zeroPos;
      groupWidth = this.width / this.options.data.length;
      numBars = this.options.stacked != null ? 1 : this.options.ykeys.length;
      barWidth = (groupWidth * this.options.barSizeRatio - this.options.barGap * (numBars - 1)) / numBars;
      leftPadding = groupWidth * (1 - this.options.barSizeRatio) / 2;
      zeroPos = this.ymin <= 0 && this.ymax >= 0 ? this.transY(0) : null;
      return this.bars = (function() {
        var _i, _len, _ref, _results;
        _ref = this.data;
        _results = [];
        for (idx = _i = 0, _len = _ref.length; _i < _len; idx = ++_i) {
          row = _ref[idx];
          lastTop = 0;
          _results.push((function() {
            var _j, _len1, _ref1, _results1;
            _ref1 = row._y;
            _results1 = [];
            for (sidx = _j = 0, _len1 = _ref1.length; _j < _len1; sidx = ++_j) {
              ypos = _ref1[sidx];
              if (ypos !== null) {
                if (zeroPos) {
                  top = Math.min(ypos, zeroPos);
                  bottom = Math.max(ypos, zeroPos);
                } else {
                  top = ypos;
                  bottom = this.bottom;
                }
                left = this.left + idx * groupWidth + leftPadding;
                if (!this.options.stacked) {
                  left += sidx * (barWidth + this.options.barGap);
                }
                size = bottom - top;
                if (this.options.stacked) {
                  top -= lastTop;
                }
                this.drawBar(left, top, barWidth, size, this.colorFor(row, sidx, 'bar'));
                _results1.push(lastTop += size);
              } else {
                _results1.push(null);
              }
            }
            return _results1;
          }).call(this));
        }
        return _results;
      }).call(this);
    };

    Bar.prototype.colorFor = function(row, sidx, type) {
      var r, s;
      if (typeof this.options.barColors === 'function') {
        r = {
          x: row.x,
          y: row.y[sidx],
          label: row.label
        };
        s = {
          index: sidx,
          key: this.options.ykeys[sidx],
          label: this.options.labels[sidx]
        };
        return this.options.barColors.call(this, r, s, type);
      } else {
        return this.options.barColors[sidx % this.options.barColors.length];
      }
    };

    Bar.prototype.hitTest = function(x, y) {
      if (this.data.length === 0) {
        return null;
      }
      x = Math.max(Math.min(x, this.right), this.left);
      return Math.min(this.data.length - 1, Math.floor((x - this.left) / (this.width / this.data.length)));
    };

    Bar.prototype.onGridClick = function(x, y) {
      var index;
      index = this.hitTest(x, y);
      return this.fire('click', index, this.options.data[index], x, y);
    };

    Bar.prototype.onHoverMove = function(x, y) {
      var index, _ref;
      index = this.hitTest(x, y);
      return (_ref = this.hover).update.apply(_ref, this.hoverContentForRow(index));
    };

    Bar.prototype.onHoverOut = function() {
      if (this.options.hideHover !== false) {
        return this.hover.hide();
      }
    };

    Bar.prototype.hoverContentForRow = function(index) {
      var content, j, row, x, y, _i, _len, _ref;
      row = this.data[index];
      content = "<div class='morris-hover-row-label'>" + row.label + "</div>";
      _ref = row.y;
      for (j = _i = 0, _len = _ref.length; _i < _len; j = ++_i) {
        y = _ref[j];
        content += "<div class='morris-hover-point' style='color: " + (this.colorFor(row, j, 'label')) + "'>\n  " + this.options.labels[j] + ":\n  " + (this.yLabelFormat(y)) + "\n</div>";
      }
      if (typeof this.options.hoverCallback === 'function') {
        content = this.options.hoverCallback(index, this.options, content);
      }
      x = this.left + (index + 0.5) * this.width / this.data.length;
      return [content, x];
    };

    Bar.prototype.drawXAxisLabel = function(xPos, yPos, text) {
      var label;
      return label = this.raphael.text(xPos, yPos, text).attr('font-size', this.options.gridTextSize).attr('font-family', this.options.gridTextFamily).attr('font-weight', this.options.gridTextWeight).attr('fill', this.options.gridTextColor);
    };

    Bar.prototype.drawBar = function(xPos, yPos, width, height, barColor) {
      return this.raphael.rect(xPos, yPos, width, height).attr('fill', barColor).attr('stroke-width', 0);
    };

    return Bar;

  })(Morris.Grid);

  Morris.Donut = (function(_super) {

    __extends(Donut, _super);

    Donut.prototype.defaults = {
      colors: ['#0B62A4', '#3980B5', '#679DC6', '#95BBD7', '#B0CCE1', '#095791', '#095085', '#083E67', '#052C48', '#042135'],
      backgroundColor: '#FFFFFF',
      labelColor: '#000000',
      formatter: Morris.commas
    };

    function Donut(options) {
      this.select = __bind(this.select, this);

      this.click = __bind(this.click, this);

      var row;
      if (!(this instanceof Morris.Donut)) {
        return new Morris.Donut(options);
      }
      if (typeof options.element === 'string') {
        this.el = $(document.getElementById(options.element));
      } else {
        this.el = $(options.element);
      }
      this.options = $.extend({}, this.defaults, options);
      if (this.el === null || this.el.length === 0) {
        throw new Error("Graph placeholder not found.");
      }
      if (options.data === void 0 || options.data.length === 0) {
        return;
      }
      this.data = options.data;
      this.values = (function() {
        var _i, _len, _ref, _results;
        _ref = this.data;
        _results = [];
        for (_i = 0, _len = _ref.length; _i < _len; _i++) {
          row = _ref[_i];
          _results.push(parseFloat(row.value));
        }
        return _results;
      }).call(this);
      this.redraw();
    }

    Donut.prototype.redraw = function() {
      var C, cx, cy, i, idx, last, max_value, min, next, seg, total, value, w, _i, _j, _k, _len, _len1, _len2, _ref, _ref1, _ref2, _results;
      this.el.empty();
      this.raphael = new Raphael(this.el[0]);
      cx = this.el.width() / 2;
      cy = this.el.height() / 2;
      w = (Math.min(cx, cy) - 10) / 3;
      total = 0;
      _ref = this.values;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        value = _ref[_i];
        total += value;
      }
      min = 5 / (2 * w);
      C = 1.9999 * Math.PI - min * this.data.length;
      last = 0;
      idx = 0;
      this.segments = [];
      _ref1 = this.values;
      for (i = _j = 0, _len1 = _ref1.length; _j < _len1; i = ++_j) {
        value = _ref1[i];
        next = last + min + C * (value / total);
        seg = new Morris.DonutSegment(cx, cy, w * 2, w, last, next, this.options.colors[idx % this.options.colors.length], this.options.backgroundColor, idx, this.raphael);
        seg.render();
        this.segments.push(seg);
        seg.on('hover', this.select);
        seg.on('click', this.click);
        last = next;
        idx += 1;
      }
      this.text1 = this.drawEmptyDonutLabel(cx, cy - 10, this.options.labelColor, 15, 800);
      this.text2 = this.drawEmptyDonutLabel(cx, cy + 10, this.options.labelColor, 14);
      max_value = Math.max.apply(null, (function() {
        var _k, _len2, _ref2, _results;
        _ref2 = this.values;
        _results = [];
        for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
          value = _ref2[_k];
          _results.push(value);
        }
        return _results;
      }).call(this));
      idx = 0;
      _ref2 = this.values;
      _results = [];
      for (_k = 0, _len2 = _ref2.length; _k < _len2; _k++) {
        value = _ref2[_k];
        if (value === max_value) {
          this.select(idx);
          break;
        }
        _results.push(idx += 1);
      }
      return _results;
    };

    Donut.prototype.click = function(idx) {
      return this.fire('click', idx, this.data[idx]);
    };

    Donut.prototype.select = function(idx) {
      var row, s, segment, _i, _len, _ref;
      _ref = this.segments;
      for (_i = 0, _len = _ref.length; _i < _len; _i++) {
        s = _ref[_i];
        s.deselect();
      }
      segment = this.segments[idx];
      segment.select();
      row = this.data[idx];
      return this.setLabels(row.label, this.options.totalNumber);
    };

    Donut.prototype.setLabels = function(label1, label2) {
      var inner, maxHeightBottom, maxHeightTop, maxWidth, text1bbox, text1scale, text2bbox, text2scale;
      inner = (Math.min(this.el.width() / 2, this.el.height() / 2) - 10) * 2 / 3;
      maxWidth = 1.8 * inner;
      maxHeightTop = inner / 2;
      maxHeightBottom = inner / 3;
      this.text1.attr({
        text: label1,
        transform: ''
      });
      text1bbox = this.text1.getBBox();
      text1scale = Math.min(maxWidth / text1bbox.width, maxHeightTop / text1bbox.height);
      this.text1.attr({
        transform: "S" + text1scale + "," + text1scale + "," + (text1bbox.x + text1bbox.width / 2) + "," + (text1bbox.y + text1bbox.height)
      });
      this.text2.attr({
        text: label2,
        transform: ''
      });
      text2bbox = this.text2.getBBox();
      text2scale = Math.min(maxWidth / text2bbox.width, maxHeightBottom / text2bbox.height);
      return this.text2.attr({
        transform: "S" + text2scale + "," + text2scale + "," + (text2bbox.x + text2bbox.width / 2) + "," + text2bbox.y
      });
    };

    Donut.prototype.drawEmptyDonutLabel = function(xPos, yPos, color, fontSize, fontWeight) {
      var text;
      text = this.raphael.text(xPos, yPos, '').attr('font-size', fontSize).attr('fill', color);
      if (fontWeight != null) {
        text.attr('font-weight', fontWeight);
      }
      return text;
    };

    return Donut;

  })(Morris.EventEmitter);

  Morris.DonutSegment = (function(_super) {

    __extends(DonutSegment, _super);

    function DonutSegment(cx, cy, inner, outer, p0, p1, color, backgroundColor, index, raphael) {
      this.cx = cx;
      this.cy = cy;
      this.inner = inner;
      this.outer = outer;
      this.color = color;
      this.backgroundColor = backgroundColor;
      this.index = index;
      this.raphael = raphael;
      this.deselect = __bind(this.deselect, this);

      this.select = __bind(this.select, this);

      this.sin_p0 = Math.sin(p0);
      this.cos_p0 = Math.cos(p0);
      this.sin_p1 = Math.sin(p1);
      this.cos_p1 = Math.cos(p1);
      this.is_long = (p1 - p0) > Math.PI ? 1 : 0;
      this.path = this.calcSegment(this.inner + 3, this.inner + this.outer - 5);
      this.selectedPath = this.calcSegment(this.inner + 3, this.inner + this.outer);
      this.hilight = this.calcArc(this.inner);
    }

    DonutSegment.prototype.calcArcPoints = function(r) {
      return [this.cx + r * this.sin_p0, this.cy + r * this.cos_p0, this.cx + r * this.sin_p1, this.cy + r * this.cos_p1];
    };

    DonutSegment.prototype.calcSegment = function(r1, r2) {
      var ix0, ix1, iy0, iy1, ox0, ox1, oy0, oy1, _ref, _ref1;
      _ref = this.calcArcPoints(r1), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];
      _ref1 = this.calcArcPoints(r2), ox0 = _ref1[0], oy0 = _ref1[1], ox1 = _ref1[2], oy1 = _ref1[3];
      return ("M" + ix0 + "," + iy0) + ("A" + r1 + "," + r1 + ",0," + this.is_long + ",0," + ix1 + "," + iy1) + ("L" + ox1 + "," + oy1) + ("A" + r2 + "," + r2 + ",0," + this.is_long + ",1," + ox0 + "," + oy0) + "Z";
    };

    DonutSegment.prototype.calcArc = function(r) {
      var ix0, ix1, iy0, iy1, _ref;
      _ref = this.calcArcPoints(r), ix0 = _ref[0], iy0 = _ref[1], ix1 = _ref[2], iy1 = _ref[3];
      return ("M" + ix0 + "," + iy0) + ("A" + r + "," + r + ",0," + this.is_long + ",0," + ix1 + "," + iy1);
    };

    DonutSegment.prototype.render = function() {
      var _this = this;
      this.arc = this.drawDonutArc(this.hilight, this.color);
      return this.seg = this.drawDonutSegment(this.path, this.color, this.backgroundColor, function() {
        return null;
      }, function() {
        return _this.fire('click', _this.index);
      });
    };

    DonutSegment.prototype.drawDonutArc = function(path, color) {
      return this.raphael.path(path).attr({
        stroke: color,
        'stroke-width': 3,
        opacity: 0
      });
    };

    DonutSegment.prototype.drawDonutSegment = function(path, fillColor, strokeColor, hoverFunction, clickFunction) {
      return this.raphael.path(path).attr({
        fill: fillColor,
        stroke: strokeColor,
        'stroke-width': 4
      }).hover(hoverFunction).click(clickFunction);
    };

    DonutSegment.prototype.select = function() {
     /* if (!this.selected) {
        this.seg.animate({
          path: this.selectedPath
        }, 150, '<>');
        this.arc.animate({
          opacity: 1
        }, 150, '<>');
        return this.selected = true;
      }*/
    };

    DonutSegment.prototype.deselect = function() {
      /*if (this.selected) {
        this.seg.animate({
          path: this.path
        }, 150, '<>');
        this.arc.animate({
          opacity: 0
        }, 150, '<>');
        return this.selected = false;
      }*/
    };

    return DonutSegment;

  })(Morris.EventEmitter);

}).call(this);

define("morris", function(){});

/*! DataTables 1.10.13
 * ©2008-2016 SpryMedia Ltd - datatables.net/license
 */

/**
 * @summary     DataTables
 * @description Paginate, search and order HTML tables
 * @version     1.10.13
 * @file        jquery.dataTables.js
 * @author      SpryMedia Ltd
 * @contact     www.datatables.net
 * @copyright   Copyright 2008-2016 SpryMedia Ltd.
 *
 * This source file is free software, available under the following license:
 *   MIT license - http://datatables.net/license
 *
 * This source file is distributed in the hope that it will be useful, but
 * WITHOUT ANY WARRANTY; without even the implied warranty of MERCHANTABILITY
 * or FITNESS FOR A PARTICULAR PURPOSE. See the license files for details.
 *
 * For details please refer to: http://www.datatables.net
 */

/*jslint evil: true, undef: true, browser: true */
/*globals $,require,jQuery,define,_selector_run,_selector_opts,_selector_first,_selector_row_indexes,_ext,_Api,_api_register,_api_registerPlural,_re_new_lines,_re_html,_re_formatted_numeric,_re_escape_regex,_empty,_intVal,_numToDecimal,_isNumber,_isHtml,_htmlNumeric,_pluck,_pluck_order,_range,_stripHtml,_unique,_fnBuildAjax,_fnAjaxUpdate,_fnAjaxParameters,_fnAjaxUpdateDraw,_fnAjaxDataSrc,_fnAddColumn,_fnColumnOptions,_fnAdjustColumnSizing,_fnVisibleToColumnIndex,_fnColumnIndexToVisible,_fnVisbleColumns,_fnGetColumns,_fnColumnTypes,_fnApplyColumnDefs,_fnHungarianMap,_fnCamelToHungarian,_fnLanguageCompat,_fnBrowserDetect,_fnAddData,_fnAddTr,_fnNodeToDataIndex,_fnNodeToColumnIndex,_fnGetCellData,_fnSetCellData,_fnSplitObjNotation,_fnGetObjectDataFn,_fnSetObjectDataFn,_fnGetDataMaster,_fnClearTable,_fnDeleteIndex,_fnInvalidate,_fnGetRowElements,_fnCreateTr,_fnBuildHead,_fnDrawHead,_fnDraw,_fnReDraw,_fnAddOptionsHtml,_fnDetectHeader,_fnGetUniqueThs,_fnFeatureHtmlFilter,_fnFilterComplete,_fnFilterCustom,_fnFilterColumn,_fnFilter,_fnFilterCreateSearch,_fnEscapeRegex,_fnFilterData,_fnFeatureHtmlInfo,_fnUpdateInfo,_fnInfoMacros,_fnInitialise,_fnInitComplete,_fnLengthChange,_fnFeatureHtmlLength,_fnFeatureHtmlPaginate,_fnPageChange,_fnFeatureHtmlProcessing,_fnProcessingDisplay,_fnFeatureHtmlTable,_fnScrollDraw,_fnApplyToChildren,_fnCalculateColumnWidths,_fnThrottle,_fnConvertToWidth,_fnGetWidestNode,_fnGetMaxLenString,_fnStringToCss,_fnSortFlatten,_fnSort,_fnSortAria,_fnSortListener,_fnSortAttachListener,_fnSortingClasses,_fnSortData,_fnSaveState,_fnLoadState,_fnSettingsFromNode,_fnLog,_fnMap,_fnBindAction,_fnCallbackReg,_fnCallbackFire,_fnLengthOverflow,_fnRenderer,_fnDataSource,_fnRowAttributes*/

(function( factory ) {
	

	if ( typeof define === 'function' && define.amd ) {
		// AMD
		define( 'datatables',['jquery'], function ( $ ) {
			return factory( $, window, document );
		} );
	}
	else if ( typeof exports === 'object' ) {
		// CommonJS
		module.exports = function (root, $) {
			if ( ! root ) {
				// CommonJS environments without a window global must pass a
				// root. This will give an error otherwise
				root = window;
			}

			if ( ! $ ) {
				$ = typeof window !== 'undefined' ? // jQuery's factory checks for a global window
					require('jquery') :
					require('jquery')( root );
			}

			return factory( $, root, root.document );
		};
	}
	else {
		// Browser
		factory( jQuery, window, document );
	}
}
(function( $, window, document, undefined ) {
	

	/**
	 * DataTables is a plug-in for the jQuery Javascript library. It is a highly
	 * flexible tool, based upon the foundations of progressive enhancement,
	 * which will add advanced interaction controls to any HTML table. For a
	 * full list of features please refer to
	 * [DataTables.net](href="http://datatables.net).
	 *
	 * Note that the `DataTable` object is not a global variable but is aliased
	 * to `jQuery.fn.DataTable` and `jQuery.fn.dataTable` through which it may
	 * be  accessed.
	 *
	 *  @class
	 *  @param {object} [init={}] Configuration object for DataTables. Options
	 *    are defined by {@link DataTable.defaults}
	 *  @requires jQuery 1.7+
	 *
	 *  @example
	 *    // Basic initialisation
	 *    $(document).ready( function {
	 *      $('#example').dataTable();
	 *    } );
	 *
	 *  @example
	 *    // Initialisation with configuration options - in this case, disable
	 *    // pagination and sorting.
	 *    $(document).ready( function {
	 *      $('#example').dataTable( {
	 *        "paginate": false,
	 *        "sort": false
	 *      } );
	 *    } );
	 */
	var DataTable = function ( options )
	{
		/**
		 * Perform a jQuery selector action on the table's TR elements (from the tbody) and
		 * return the resulting jQuery object.
		 *  @param {string|node|jQuery} sSelector jQuery selector or node collection to act on
		 *  @param {object} [oOpts] Optional parameters for modifying the rows to be included
		 *  @param {string} [oOpts.filter=none] Select TR elements that meet the current filter
		 *    criterion ("applied") or all TR elements (i.e. no filter).
		 *  @param {string} [oOpts.order=current] Order of the TR elements in the processed array.
		 *    Can be either 'current', whereby the current sorting of the table is used, or
		 *    'original' whereby the original order the data was read into the table is used.
		 *  @param {string} [oOpts.page=all] Limit the selection to the currently displayed page
		 *    ("current") or not ("all"). If 'current' is given, then order is assumed to be
		 *    'current' and filter is 'applied', regardless of what they might be given as.
		 *  @returns {object} jQuery object, filtered by the given selector.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Highlight every second row
		 *      oTable.$('tr:odd').css('backgroundColor', 'blue');
		 *    } );
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Filter to rows with 'Webkit' in them, add a background colour and then
		 *      // remove the filter, thus highlighting the 'Webkit' rows only.
		 *      oTable.fnFilter('Webkit');
		 *      oTable.$('tr', {"search": "applied"}).css('backgroundColor', 'blue');
		 *      oTable.fnFilter('');
		 *    } );
		 */
		this.$ = function ( sSelector, oOpts )
		{
			return this.api(true).$( sSelector, oOpts );
		};
		
		
		/**
		 * Almost identical to $ in operation, but in this case returns the data for the matched
		 * rows - as such, the jQuery selector used should match TR row nodes or TD/TH cell nodes
		 * rather than any descendants, so the data can be obtained for the row/cell. If matching
		 * rows are found, the data returned is the original data array/object that was used to
		 * create the row (or a generated array if from a DOM source).
		 *
		 * This method is often useful in-combination with $ where both functions are given the
		 * same parameters and the array indexes will match identically.
		 *  @param {string|node|jQuery} sSelector jQuery selector or node collection to act on
		 *  @param {object} [oOpts] Optional parameters for modifying the rows to be included
		 *  @param {string} [oOpts.filter=none] Select elements that meet the current filter
		 *    criterion ("applied") or all elements (i.e. no filter).
		 *  @param {string} [oOpts.order=current] Order of the data in the processed array.
		 *    Can be either 'current', whereby the current sorting of the table is used, or
		 *    'original' whereby the original order the data was read into the table is used.
		 *  @param {string} [oOpts.page=all] Limit the selection to the currently displayed page
		 *    ("current") or not ("all"). If 'current' is given, then order is assumed to be
		 *    'current' and filter is 'applied', regardless of what they might be given as.
		 *  @returns {array} Data for the matched elements. If any elements, as a result of the
		 *    selector, were not TR, TD or TH elements in the DataTable, they will have a null
		 *    entry in the array.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Get the data from the first row in the table
		 *      var data = oTable._('tr:first');
		 *
		 *      // Do something useful with the data
		 *      alert( "First cell is: "+data[0] );
		 *    } );
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Filter to 'Webkit' and get all data for
		 *      oTable.fnFilter('Webkit');
		 *      var data = oTable._('tr', {"search": "applied"});
		 *
		 *      // Do something with the data
		 *      alert( data.length+" rows matched the search" );
		 *    } );
		 */
		this._ = function ( sSelector, oOpts )
		{
			return this.api(true).rows( sSelector, oOpts ).data();
		};
		
		
		/**
		 * Create a DataTables Api instance, with the currently selected tables for
		 * the Api's context.
		 * @param {boolean} [traditional=false] Set the API instance's context to be
		 *   only the table referred to by the `DataTable.ext.iApiIndex` option, as was
		 *   used in the API presented by DataTables 1.9- (i.e. the traditional mode),
		 *   or if all tables captured in the jQuery object should be used.
		 * @return {DataTables.Api}
		 */
		this.api = function ( traditional )
		{
			return traditional ?
				new _Api(
					_fnSettingsFromNode( this[ _ext.iApiIndex ] )
				) :
				new _Api( this );
		};
		
		
		/**
		 * Add a single new row or multiple rows of data to the table. Please note
		 * that this is suitable for client-side processing only - if you are using
		 * server-side processing (i.e. "bServerSide": true), then to add data, you
		 * must add it to the data source, i.e. the server-side, through an Ajax call.
		 *  @param {array|object} data The data to be added to the table. This can be:
		 *    <ul>
		 *      <li>1D array of data - add a single row with the data provided</li>
		 *      <li>2D array of arrays - add multiple rows in a single call</li>
		 *      <li>object - data object when using <i>mData</i></li>
		 *      <li>array of objects - multiple data objects when using <i>mData</i></li>
		 *    </ul>
		 *  @param {bool} [redraw=true] redraw the table or not
		 *  @returns {array} An array of integers, representing the list of indexes in
		 *    <i>aoData</i> ({@link DataTable.models.oSettings}) that have been added to
		 *    the table.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    // Global var for counter
		 *    var giCount = 2;
		 *
		 *    $(document).ready(function() {
		 *      $('#example').dataTable();
		 *    } );
		 *
		 *    function fnClickAddRow() {
		 *      $('#example').dataTable().fnAddData( [
		 *        giCount+".1",
		 *        giCount+".2",
		 *        giCount+".3",
		 *        giCount+".4" ]
		 *      );
		 *
		 *      giCount++;
		 *    }
		 */
		this.fnAddData = function( data, redraw )
		{
			var api = this.api( true );
		
			/* Check if we want to add multiple rows or not */
			var rows = $.isArray(data) && ( $.isArray(data[0]) || $.isPlainObject(data[0]) ) ?
				api.rows.add( data ) :
				api.row.add( data );
		
			if ( redraw === undefined || redraw ) {
				api.draw();
			}
		
			return rows.flatten().toArray();
		};
		
		
		/**
		 * This function will make DataTables recalculate the column sizes, based on the data
		 * contained in the table and the sizes applied to the columns (in the DOM, CSS or
		 * through the sWidth parameter). This can be useful when the width of the table's
		 * parent element changes (for example a window resize).
		 *  @param {boolean} [bRedraw=true] Redraw the table or not, you will typically want to
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable( {
		 *        "sScrollY": "200px",
		 *        "bPaginate": false
		 *      } );
		 *
		 *      $(window).on('resize', function () {
		 *        oTable.fnAdjustColumnSizing();
		 *      } );
		 *    } );
		 */
		this.fnAdjustColumnSizing = function ( bRedraw )
		{
			var api = this.api( true ).columns.adjust();
			var settings = api.settings()[0];
			var scroll = settings.oScroll;
		
			if ( bRedraw === undefined || bRedraw ) {
				api.draw( false );
			}
			else if ( scroll.sX !== "" || scroll.sY !== "" ) {
				/* If not redrawing, but scrolling, we want to apply the new column sizes anyway */
				_fnScrollDraw( settings );
			}
		};
		
		
		/**
		 * Quickly and simply clear a table
		 *  @param {bool} [bRedraw=true] redraw the table or not
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Immediately 'nuke' the current rows (perhaps waiting for an Ajax callback...)
		 *      oTable.fnClearTable();
		 *    } );
		 */
		this.fnClearTable = function( bRedraw )
		{
			var api = this.api( true ).clear();
		
			if ( bRedraw === undefined || bRedraw ) {
				api.draw();
			}
		};
		
		
		/**
		 * The exact opposite of 'opening' a row, this function will close any rows which
		 * are currently 'open'.
		 *  @param {node} nTr the table row to 'close'
		 *  @returns {int} 0 on success, or 1 if failed (can't find the row)
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable;
		 *
		 *      // 'open' an information row when a row is clicked on
		 *      $('#example tbody tr').click( function () {
		 *        if ( oTable.fnIsOpen(this) ) {
		 *          oTable.fnClose( this );
		 *        } else {
		 *          oTable.fnOpen( this, "Temporary row opened", "info_row" );
		 *        }
		 *      } );
		 *
		 *      oTable = $('#example').dataTable();
		 *    } );
		 */
		this.fnClose = function( nTr )
		{
			this.api( true ).row( nTr ).child.hide();
		};
		
		
		/**
		 * Remove a row for the table
		 *  @param {mixed} target The index of the row from aoData to be deleted, or
		 *    the TR element you want to delete
		 *  @param {function|null} [callBack] Callback function
		 *  @param {bool} [redraw=true] Redraw the table or not
		 *  @returns {array} The row that was deleted
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Immediately remove the first row
		 *      oTable.fnDeleteRow( 0 );
		 *    } );
		 */
		this.fnDeleteRow = function( target, callback, redraw )
		{
			var api = this.api( true );
			var rows = api.rows( target );
			var settings = rows.settings()[0];
			var data = settings.aoData[ rows[0][0] ];
		
			rows.remove();
		
			if ( callback ) {
				callback.call( this, settings, data );
			}
		
			if ( redraw === undefined || redraw ) {
				api.draw();
			}
		
			return data;
		};
		
		
		/**
		 * Restore the table to it's original state in the DOM by removing all of DataTables
		 * enhancements, alterations to the DOM structure of the table and event listeners.
		 *  @param {boolean} [remove=false] Completely remove the table from the DOM
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      // This example is fairly pointless in reality, but shows how fnDestroy can be used
		 *      var oTable = $('#example').dataTable();
		 *      oTable.fnDestroy();
		 *    } );
		 */
		this.fnDestroy = function ( remove )
		{
			this.api( true ).destroy( remove );
		};
		
		
		/**
		 * Redraw the table
		 *  @param {bool} [complete=true] Re-filter and resort (if enabled) the table before the draw.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Re-draw the table - you wouldn't want to do it here, but it's an example :-)
		 *      oTable.fnDraw();
		 *    } );
		 */
		this.fnDraw = function( complete )
		{
			// Note that this isn't an exact match to the old call to _fnDraw - it takes
			// into account the new data, but can hold position.
			this.api( true ).draw( complete );
		};
		
		
		/**
		 * Filter the input based on data
		 *  @param {string} sInput String to filter the table on
		 *  @param {int|null} [iColumn] Column to limit filtering to
		 *  @param {bool} [bRegex=false] Treat as regular expression or not
		 *  @param {bool} [bSmart=true] Perform smart filtering or not
		 *  @param {bool} [bShowGlobal=true] Show the input global filter in it's input box(es)
		 *  @param {bool} [bCaseInsensitive=true] Do case-insensitive matching (true) or not (false)
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Sometime later - filter...
		 *      oTable.fnFilter( 'test string' );
		 *    } );
		 */
		this.fnFilter = function( sInput, iColumn, bRegex, bSmart, bShowGlobal, bCaseInsensitive )
		{
			var api = this.api( true );
		
			if ( iColumn === null || iColumn === undefined ) {
				api.search( sInput, bRegex, bSmart, bCaseInsensitive );
			}
			else {
				api.column( iColumn ).search( sInput, bRegex, bSmart, bCaseInsensitive );
			}
		
			api.draw();
		};
		
		
		/**
		 * Get the data for the whole table, an individual row or an individual cell based on the
		 * provided parameters.
		 *  @param {int|node} [src] A TR row node, TD/TH cell node or an integer. If given as
		 *    a TR node then the data source for the whole row will be returned. If given as a
		 *    TD/TH cell node then iCol will be automatically calculated and the data for the
		 *    cell returned. If given as an integer, then this is treated as the aoData internal
		 *    data index for the row (see fnGetPosition) and the data for that row used.
		 *  @param {int} [col] Optional column index that you want the data of.
		 *  @returns {array|object|string} If mRow is undefined, then the data for all rows is
		 *    returned. If mRow is defined, just data for that row, and is iCol is
		 *    defined, only data for the designated cell is returned.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    // Row data
		 *    $(document).ready(function() {
		 *      oTable = $('#example').dataTable();
		 *
		 *      oTable.$('tr').click( function () {
		 *        var data = oTable.fnGetData( this );
		 *        // ... do something with the array / object of data for the row
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Individual cell data
		 *    $(document).ready(function() {
		 *      oTable = $('#example').dataTable();
		 *
		 *      oTable.$('td').click( function () {
		 *        var sData = oTable.fnGetData( this );
		 *        alert( 'The cell clicked on had the value of '+sData );
		 *      } );
		 *    } );
		 */
		this.fnGetData = function( src, col )
		{
			var api = this.api( true );
		
			if ( src !== undefined ) {
				var type = src.nodeName ? src.nodeName.toLowerCase() : '';
		
				return col !== undefined || type == 'td' || type == 'th' ?
					api.cell( src, col ).data() :
					api.row( src ).data() || null;
			}
		
			return api.data().toArray();
		};
		
		
		/**
		 * Get an array of the TR nodes that are used in the table's body. Note that you will
		 * typically want to use the '$' API method in preference to this as it is more
		 * flexible.
		 *  @param {int} [iRow] Optional row index for the TR element you want
		 *  @returns {array|node} If iRow is undefined, returns an array of all TR elements
		 *    in the table's body, or iRow is defined, just the TR element requested.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Get the nodes from the table
		 *      var nNodes = oTable.fnGetNodes( );
		 *    } );
		 */
		this.fnGetNodes = function( iRow )
		{
			var api = this.api( true );
		
			return iRow !== undefined ?
				api.row( iRow ).node() :
				api.rows().nodes().flatten().toArray();
		};
		
		
		/**
		 * Get the array indexes of a particular cell from it's DOM element
		 * and column index including hidden columns
		 *  @param {node} node this can either be a TR, TD or TH in the table's body
		 *  @returns {int} If nNode is given as a TR, then a single index is returned, or
		 *    if given as a cell, an array of [row index, column index (visible),
		 *    column index (all)] is given.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      $('#example tbody td').click( function () {
		 *        // Get the position of the current data from the node
		 *        var aPos = oTable.fnGetPosition( this );
		 *
		 *        // Get the data array for this row
		 *        var aData = oTable.fnGetData( aPos[0] );
		 *
		 *        // Update the data array and return the value
		 *        aData[ aPos[1] ] = 'clicked';
		 *        this.innerHTML = 'clicked';
		 *      } );
		 *
		 *      // Init DataTables
		 *      oTable = $('#example').dataTable();
		 *    } );
		 */
		this.fnGetPosition = function( node )
		{
			var api = this.api( true );
			var nodeName = node.nodeName.toUpperCase();
		
			if ( nodeName == 'TR' ) {
				return api.row( node ).index();
			}
			else if ( nodeName == 'TD' || nodeName == 'TH' ) {
				var cell = api.cell( node ).index();
		
				return [
					cell.row,
					cell.columnVisible,
					cell.column
				];
			}
			return null;
		};
		
		
		/**
		 * Check to see if a row is 'open' or not.
		 *  @param {node} nTr the table row to check
		 *  @returns {boolean} true if the row is currently open, false otherwise
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable;
		 *
		 *      // 'open' an information row when a row is clicked on
		 *      $('#example tbody tr').click( function () {
		 *        if ( oTable.fnIsOpen(this) ) {
		 *          oTable.fnClose( this );
		 *        } else {
		 *          oTable.fnOpen( this, "Temporary row opened", "info_row" );
		 *        }
		 *      } );
		 *
		 *      oTable = $('#example').dataTable();
		 *    } );
		 */
		this.fnIsOpen = function( nTr )
		{
			return this.api( true ).row( nTr ).child.isShown();
		};
		
		
		/**
		 * This function will place a new row directly after a row which is currently
		 * on display on the page, with the HTML contents that is passed into the
		 * function. This can be used, for example, to ask for confirmation that a
		 * particular record should be deleted.
		 *  @param {node} nTr The table row to 'open'
		 *  @param {string|node|jQuery} mHtml The HTML to put into the row
		 *  @param {string} sClass Class to give the new TD cell
		 *  @returns {node} The row opened. Note that if the table row passed in as the
		 *    first parameter, is not found in the table, this method will silently
		 *    return.
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable;
		 *
		 *      // 'open' an information row when a row is clicked on
		 *      $('#example tbody tr').click( function () {
		 *        if ( oTable.fnIsOpen(this) ) {
		 *          oTable.fnClose( this );
		 *        } else {
		 *          oTable.fnOpen( this, "Temporary row opened", "info_row" );
		 *        }
		 *      } );
		 *
		 *      oTable = $('#example').dataTable();
		 *    } );
		 */
		this.fnOpen = function( nTr, mHtml, sClass )
		{
			return this.api( true )
				.row( nTr )
				.child( mHtml, sClass )
				.show()
				.child()[0];
		};
		
		
		/**
		 * Change the pagination - provides the internal logic for pagination in a simple API
		 * function. With this function you can have a DataTables table go to the next,
		 * previous, first or last pages.
		 *  @param {string|int} mAction Paging action to take: "first", "previous", "next" or "last"
		 *    or page number to jump to (integer), note that page 0 is the first page.
		 *  @param {bool} [bRedraw=true] Redraw the table or not
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *      oTable.fnPageChange( 'next' );
		 *    } );
		 */
		this.fnPageChange = function ( mAction, bRedraw )
		{
			var api = this.api( true ).page( mAction );
		
			if ( bRedraw === undefined || bRedraw ) {
				api.draw(false);
			}
		};
		
		
		/**
		 * Show a particular column
		 *  @param {int} iCol The column whose display should be changed
		 *  @param {bool} bShow Show (true) or hide (false) the column
		 *  @param {bool} [bRedraw=true] Redraw the table or not
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Hide the second column after initialisation
		 *      oTable.fnSetColumnVis( 1, false );
		 *    } );
		 */
		this.fnSetColumnVis = function ( iCol, bShow, bRedraw )
		{
			var api = this.api( true ).column( iCol ).visible( bShow );
		
			if ( bRedraw === undefined || bRedraw ) {
				api.columns.adjust().draw();
			}
		};
		
		
		/**
		 * Get the settings for a particular table for external manipulation
		 *  @returns {object} DataTables settings object. See
		 *    {@link DataTable.models.oSettings}
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *      var oSettings = oTable.fnSettings();
		 *
		 *      // Show an example parameter from the settings
		 *      alert( oSettings._iDisplayStart );
		 *    } );
		 */
		this.fnSettings = function()
		{
			return _fnSettingsFromNode( this[_ext.iApiIndex] );
		};
		
		
		/**
		 * Sort the table by a particular column
		 *  @param {int} iCol the data index to sort on. Note that this will not match the
		 *    'display index' if you have hidden data entries
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Sort immediately with columns 0 and 1
		 *      oTable.fnSort( [ [0,'asc'], [1,'asc'] ] );
		 *    } );
		 */
		this.fnSort = function( aaSort )
		{
			this.api( true ).order( aaSort ).draw();
		};
		
		
		/**
		 * Attach a sort listener to an element for a given column
		 *  @param {node} nNode the element to attach the sort listener to
		 *  @param {int} iColumn the column that a click on this node will sort on
		 *  @param {function} [fnCallback] callback function when sort is run
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *
		 *      // Sort on column 1, when 'sorter' is clicked on
		 *      oTable.fnSortListener( document.getElementById('sorter'), 1 );
		 *    } );
		 */
		this.fnSortListener = function( nNode, iColumn, fnCallback )
		{
			this.api( true ).order.listener( nNode, iColumn, fnCallback );
		};
		
		
		/**
		 * Update a table cell or row - this method will accept either a single value to
		 * update the cell with, an array of values with one element for each column or
		 * an object in the same format as the original data source. The function is
		 * self-referencing in order to make the multi column updates easier.
		 *  @param {object|array|string} mData Data to update the cell/row with
		 *  @param {node|int} mRow TR element you want to update or the aoData index
		 *  @param {int} [iColumn] The column to update, give as null or undefined to
		 *    update a whole row.
		 *  @param {bool} [bRedraw=true] Redraw the table or not
		 *  @param {bool} [bAction=true] Perform pre-draw actions or not
		 *  @returns {int} 0 on success, 1 on error
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *      oTable.fnUpdate( 'Example update', 0, 0 ); // Single cell
		 *      oTable.fnUpdate( ['a', 'b', 'c', 'd', 'e'], $('tbody tr')[0] ); // Row
		 *    } );
		 */
		this.fnUpdate = function( mData, mRow, iColumn, bRedraw, bAction )
		{
			var api = this.api( true );
		
			if ( iColumn === undefined || iColumn === null ) {
				api.row( mRow ).data( mData );
			}
			else {
				api.cell( mRow, iColumn ).data( mData );
			}
		
			if ( bAction === undefined || bAction ) {
				api.columns.adjust();
			}
		
			if ( bRedraw === undefined || bRedraw ) {
				api.draw();
			}
			return 0;
		};
		
		
		/**
		 * Provide a common method for plug-ins to check the version of DataTables being used, in order
		 * to ensure compatibility.
		 *  @param {string} sVersion Version string to check for, in the format "X.Y.Z". Note that the
		 *    formats "X" and "X.Y" are also acceptable.
		 *  @returns {boolean} true if this version of DataTables is greater or equal to the required
		 *    version, or false if this version of DataTales is not suitable
		 *  @method
		 *  @dtopt API
		 *  @deprecated Since v1.10
		 *
		 *  @example
		 *    $(document).ready(function() {
		 *      var oTable = $('#example').dataTable();
		 *      alert( oTable.fnVersionCheck( '1.9.0' ) );
		 *    } );
		 */
		this.fnVersionCheck = _ext.fnVersionCheck;
		

		var _that = this;
		var emptyInit = options === undefined;
		var len = this.length;

		if ( emptyInit ) {
			options = {};
		}

		this.oApi = this.internal = _ext.internal;

		// Extend with old style plug-in API methods
		for ( var fn in DataTable.ext.internal ) {
			if ( fn ) {
				this[fn] = _fnExternApiFunc(fn);
			}
		}

		this.each(function() {
			// For each initialisation we want to give it a clean initialisation
			// object that can be bashed around
			var o = {};
			var oInit = len > 1 ? // optimisation for single table case
				_fnExtend( o, options, true ) :
				options;

			/*global oInit,_that,emptyInit*/
			var i=0, iLen, j, jLen, k, kLen;
			var sId = this.getAttribute( 'id' );
			var bInitHandedOff = false;
			var defaults = DataTable.defaults;
			var $this = $(this);
			
			
			/* Sanity check */
			if ( this.nodeName.toLowerCase() != 'table' )
			{
				_fnLog( null, 0, 'Non-table node initialisation ('+this.nodeName+')', 2 );
				return;
			}
			
			/* Backwards compatibility for the defaults */
			_fnCompatOpts( defaults );
			_fnCompatCols( defaults.column );
			
			/* Convert the camel-case defaults to Hungarian */
			_fnCamelToHungarian( defaults, defaults, true );
			_fnCamelToHungarian( defaults.column, defaults.column, true );
			
			/* Setting up the initialisation object */
			_fnCamelToHungarian( defaults, $.extend( oInit, $this.data() ) );
			
			
			
			/* Check to see if we are re-initialising a table */
			var allSettings = DataTable.settings;
			for ( i=0, iLen=allSettings.length ; i<iLen ; i++ )
			{
				var s = allSettings[i];
			
				/* Base check on table node */
				if ( s.nTable == this || s.nTHead.parentNode == this || (s.nTFoot && s.nTFoot.parentNode == this) )
				{
					var bRetrieve = oInit.bRetrieve !== undefined ? oInit.bRetrieve : defaults.bRetrieve;
					var bDestroy = oInit.bDestroy !== undefined ? oInit.bDestroy : defaults.bDestroy;
			
					if ( emptyInit || bRetrieve )
					{
						return s.oInstance;
					}
					else if ( bDestroy )
					{
						s.oInstance.fnDestroy();
						break;
					}
					else
					{
						_fnLog( s, 0, 'Cannot reinitialise DataTable', 3 );
						return;
					}
				}
			
				/* If the element we are initialising has the same ID as a table which was previously
				 * initialised, but the table nodes don't match (from before) then we destroy the old
				 * instance by simply deleting it. This is under the assumption that the table has been
				 * destroyed by other methods. Anyone using non-id selectors will need to do this manually
				 */
				if ( s.sTableId == this.id )
				{
					allSettings.splice( i, 1 );
					break;
				}
			}
			
			/* Ensure the table has an ID - required for accessibility */
			if ( sId === null || sId === "" )
			{
				sId = "DataTables_Table_"+(DataTable.ext._unique++);
				this.id = sId;
			}
			
			/* Create the settings object for this table and set some of the default parameters */
			var oSettings = $.extend( true, {}, DataTable.models.oSettings, {
				"sDestroyWidth": $this[0].style.width,
				"sInstance":     sId,
				"sTableId":      sId
			} );
			oSettings.nTable = this;
			oSettings.oApi   = _that.internal;
			oSettings.oInit  = oInit;
			
			allSettings.push( oSettings );
			
			// Need to add the instance after the instance after the settings object has been added
			// to the settings array, so we can self reference the table instance if more than one
			oSettings.oInstance = (_that.length===1) ? _that : $this.dataTable();
			
			// Backwards compatibility, before we apply all the defaults
			_fnCompatOpts( oInit );
			
			if ( oInit.oLanguage )
			{
				_fnLanguageCompat( oInit.oLanguage );
			}
			
			// If the length menu is given, but the init display length is not, use the length menu
			if ( oInit.aLengthMenu && ! oInit.iDisplayLength )
			{
				oInit.iDisplayLength = $.isArray( oInit.aLengthMenu[0] ) ?
					oInit.aLengthMenu[0][0] : oInit.aLengthMenu[0];
			}
			
			// Apply the defaults and init options to make a single init object will all
			// options defined from defaults and instance options.
			oInit = _fnExtend( $.extend( true, {}, defaults ), oInit );
			
			
			// Map the initialisation options onto the settings object
			_fnMap( oSettings.oFeatures, oInit, [
				"bPaginate",
				"bLengthChange",
				"bFilter",
				"bSort",
				"bSortMulti",
				"bInfo",
				"bProcessing",
				"bAutoWidth",
				"bSortClasses",
				"bServerSide",
				"bDeferRender"
			] );
			_fnMap( oSettings, oInit, [
				"asStripeClasses",
				"ajax",
				"fnServerData",
				"fnFormatNumber",
				"sServerMethod",
				"aaSorting",
				"aaSortingFixed",
				"aLengthMenu",
				"sPaginationType",
				"sAjaxSource",
				"sAjaxDataProp",
				"iStateDuration",
				"sDom",
				"bSortCellsTop",
				"iTabIndex",
				"fnStateLoadCallback",
				"fnStateSaveCallback",
				"renderer",
				"searchDelay",
				"rowId",
				[ "iCookieDuration", "iStateDuration" ], // backwards compat
				[ "oSearch", "oPreviousSearch" ],
				[ "aoSearchCols", "aoPreSearchCols" ],
				[ "iDisplayLength", "_iDisplayLength" ],
				[ "bJQueryUI", "bJUI" ]
			] );
			_fnMap( oSettings.oScroll, oInit, [
				[ "sScrollX", "sX" ],
				[ "sScrollXInner", "sXInner" ],
				[ "sScrollY", "sY" ],
				[ "bScrollCollapse", "bCollapse" ]
			] );
			_fnMap( oSettings.oLanguage, oInit, "fnInfoCallback" );
			
			/* Callback functions which are array driven */
			_fnCallbackReg( oSettings, 'aoDrawCallback',       oInit.fnDrawCallback,      'user' );
			_fnCallbackReg( oSettings, 'aoServerParams',       oInit.fnServerParams,      'user' );
			_fnCallbackReg( oSettings, 'aoStateSaveParams',    oInit.fnStateSaveParams,   'user' );
			_fnCallbackReg( oSettings, 'aoStateLoadParams',    oInit.fnStateLoadParams,   'user' );
			_fnCallbackReg( oSettings, 'aoStateLoaded',        oInit.fnStateLoaded,       'user' );
			_fnCallbackReg( oSettings, 'aoRowCallback',        oInit.fnRowCallback,       'user' );
			_fnCallbackReg( oSettings, 'aoRowCreatedCallback', oInit.fnCreatedRow,        'user' );
			_fnCallbackReg( oSettings, 'aoHeaderCallback',     oInit.fnHeaderCallback,    'user' );
			_fnCallbackReg( oSettings, 'aoFooterCallback',     oInit.fnFooterCallback,    'user' );
			_fnCallbackReg( oSettings, 'aoInitComplete',       oInit.fnInitComplete,      'user' );
			_fnCallbackReg( oSettings, 'aoPreDrawCallback',    oInit.fnPreDrawCallback,   'user' );
			
			oSettings.rowIdFn = _fnGetObjectDataFn( oInit.rowId );
			
			/* Browser support detection */
			_fnBrowserDetect( oSettings );
			
			var oClasses = oSettings.oClasses;
			
			// @todo Remove in 1.11
			if ( oInit.bJQueryUI )
			{
				/* Use the JUI classes object for display. You could clone the oStdClasses object if
				 * you want to have multiple tables with multiple independent classes
				 */
				$.extend( oClasses, DataTable.ext.oJUIClasses, oInit.oClasses );
			
				if ( oInit.sDom === defaults.sDom && defaults.sDom === "lfrtip" )
				{
					/* Set the DOM to use a layout suitable for jQuery UI's theming */
					oSettings.sDom = '<"H"lfr>t<"F"ip>';
				}
			
				if ( ! oSettings.renderer ) {
					oSettings.renderer = 'jqueryui';
				}
				else if ( $.isPlainObject( oSettings.renderer ) && ! oSettings.renderer.header ) {
					oSettings.renderer.header = 'jqueryui';
				}
			}
			else
			{
				$.extend( oClasses, DataTable.ext.classes, oInit.oClasses );
			}
			$this.addClass( oClasses.sTable );
			
			
			if ( oSettings.iInitDisplayStart === undefined )
			{
				/* Display start point, taking into account the save saving */
				oSettings.iInitDisplayStart = oInit.iDisplayStart;
				oSettings._iDisplayStart = oInit.iDisplayStart;
			}
			
			if ( oInit.iDeferLoading !== null )
			{
				oSettings.bDeferLoading = true;
				var tmp = $.isArray( oInit.iDeferLoading );
				oSettings._iRecordsDisplay = tmp ? oInit.iDeferLoading[0] : oInit.iDeferLoading;
				oSettings._iRecordsTotal = tmp ? oInit.iDeferLoading[1] : oInit.iDeferLoading;
			}
			
			/* Language definitions */
			var oLanguage = oSettings.oLanguage;
			$.extend( true, oLanguage, oInit.oLanguage );
			
			if ( oLanguage.sUrl )
			{
				/* Get the language definitions from a file - because this Ajax call makes the language
				 * get async to the remainder of this function we use bInitHandedOff to indicate that
				 * _fnInitialise will be fired by the returned Ajax handler, rather than the constructor
				 */
				$.ajax( {
					dataType: 'json',
					url: oLanguage.sUrl,
					success: function ( json ) {
						_fnLanguageCompat( json );
						_fnCamelToHungarian( defaults.oLanguage, json );
						$.extend( true, oLanguage, json );
						_fnInitialise( oSettings );
					},
					error: function () {
						// Error occurred loading language file, continue on as best we can
						_fnInitialise( oSettings );
					}
				} );
				bInitHandedOff = true;
			}
			
			/*
			 * Stripes
			 */
			if ( oInit.asStripeClasses === null )
			{
				oSettings.asStripeClasses =[
					oClasses.sStripeOdd,
					oClasses.sStripeEven
				];
			}
			
			/* Remove row stripe classes if they are already on the table row */
			var stripeClasses = oSettings.asStripeClasses;
			var rowOne = $this.children('tbody').find('tr').eq(0);
			if ( $.inArray( true, $.map( stripeClasses, function(el, i) {
				return rowOne.hasClass(el);
			} ) ) !== -1 ) {
				$('tbody tr', this).removeClass( stripeClasses.join(' ') );
				oSettings.asDestroyStripes = stripeClasses.slice();
			}
			
			/*
			 * Columns
			 * See if we should load columns automatically or use defined ones
			 */
			var anThs = [];
			var aoColumnsInit;
			var nThead = this.getElementsByTagName('thead');
			if ( nThead.length !== 0 )
			{
				_fnDetectHeader( oSettings.aoHeader, nThead[0] );
				anThs = _fnGetUniqueThs( oSettings );
			}
			
			/* If not given a column array, generate one with nulls */
			if ( oInit.aoColumns === null )
			{
				aoColumnsInit = [];
				for ( i=0, iLen=anThs.length ; i<iLen ; i++ )
				{
					aoColumnsInit.push( null );
				}
			}
			else
			{
				aoColumnsInit = oInit.aoColumns;
			}
			
			/* Add the columns */
			for ( i=0, iLen=aoColumnsInit.length ; i<iLen ; i++ )
			{
				_fnAddColumn( oSettings, anThs ? anThs[i] : null );
			}
			
			/* Apply the column definitions */
			_fnApplyColumnDefs( oSettings, oInit.aoColumnDefs, aoColumnsInit, function (iCol, oDef) {
				_fnColumnOptions( oSettings, iCol, oDef );
			} );
			
			/* HTML5 attribute detection - build an mData object automatically if the
			 * attributes are found
			 */
			if ( rowOne.length ) {
				var a = function ( cell, name ) {
					return cell.getAttribute( 'data-'+name ) !== null ? name : null;
				};
			
				$( rowOne[0] ).children('th, td').each( function (i, cell) {
					var col = oSettings.aoColumns[i];
			
					if ( col.mData === i ) {
						var sort = a( cell, 'sort' ) || a( cell, 'order' );
						var filter = a( cell, 'filter' ) || a( cell, 'search' );
			
						if ( sort !== null || filter !== null ) {
							col.mData = {
								_:      i+'.display',
								sort:   sort !== null   ? i+'.@data-'+sort   : undefined,
								type:   sort !== null   ? i+'.@data-'+sort   : undefined,
								filter: filter !== null ? i+'.@data-'+filter : undefined
							};
			
							_fnColumnOptions( oSettings, i );
						}
					}
				} );
			}
			
			var features = oSettings.oFeatures;
			var loadedInit = function () {
				/*
				 * Sorting
				 * @todo For modularisation (1.11) this needs to do into a sort start up handler
				 */
			
				// If aaSorting is not defined, then we use the first indicator in asSorting
				// in case that has been altered, so the default sort reflects that option
				if ( oInit.aaSorting === undefined ) {
					var sorting = oSettings.aaSorting;
					for ( i=0, iLen=sorting.length ; i<iLen ; i++ ) {
						sorting[i][1] = oSettings.aoColumns[ i ].asSorting[0];
					}
				}
			
				/* Do a first pass on the sorting classes (allows any size changes to be taken into
				 * account, and also will apply sorting disabled classes if disabled
				 */
				_fnSortingClasses( oSettings );
			
				if ( features.bSort ) {
					_fnCallbackReg( oSettings, 'aoDrawCallback', function () {
						if ( oSettings.bSorted ) {
							var aSort = _fnSortFlatten( oSettings );
							var sortedColumns = {};
			
							$.each( aSort, function (i, val) {
								sortedColumns[ val.src ] = val.dir;
							} );
			
							_fnCallbackFire( oSettings, null, 'order', [oSettings, aSort, sortedColumns] );
							_fnSortAria( oSettings );
						}
					} );
				}
			
				_fnCallbackReg( oSettings, 'aoDrawCallback', function () {
					if ( oSettings.bSorted || _fnDataSource( oSettings ) === 'ssp' || features.bDeferRender ) {
						_fnSortingClasses( oSettings );
					}
				}, 'sc' );
			
			
				/*
				 * Final init
				 * Cache the header, body and footer as required, creating them if needed
				 */
			
				// Work around for Webkit bug 83867 - store the caption-side before removing from doc
				var captions = $this.children('caption').each( function () {
					this._captionSide = $(this).css('caption-side');
				} );
			
				var thead = $this.children('thead');
				if ( thead.length === 0 ) {
					thead = $('<thead/>').appendTo($this);
				}
				oSettings.nTHead = thead[0];
			
				var tbody = $this.children('tbody');
				if ( tbody.length === 0 ) {
					tbody = $('<tbody/>').appendTo($this);
				}
				oSettings.nTBody = tbody[0];
			
				var tfoot = $this.children('tfoot');
				if ( tfoot.length === 0 && captions.length > 0 && (oSettings.oScroll.sX !== "" || oSettings.oScroll.sY !== "") ) {
					// If we are a scrolling table, and no footer has been given, then we need to create
					// a tfoot element for the caption element to be appended to
					tfoot = $('<tfoot/>').appendTo($this);
				}
			
				if ( tfoot.length === 0 || tfoot.children().length === 0 ) {
					$this.addClass( oClasses.sNoFooter );
				}
				else if ( tfoot.length > 0 ) {
					oSettings.nTFoot = tfoot[0];
					_fnDetectHeader( oSettings.aoFooter, oSettings.nTFoot );
				}
			
				/* Check if there is data passing into the constructor */
				if ( oInit.aaData ) {
					for ( i=0 ; i<oInit.aaData.length ; i++ ) {
						_fnAddData( oSettings, oInit.aaData[ i ] );
					}
				}
				else if ( oSettings.bDeferLoading || _fnDataSource( oSettings ) == 'dom' ) {
					/* Grab the data from the page - only do this when deferred loading or no Ajax
					 * source since there is no point in reading the DOM data if we are then going
					 * to replace it with Ajax data
					 */
					_fnAddTr( oSettings, $(oSettings.nTBody).children('tr') );
				}
			
				/* Copy the data index array */
				oSettings.aiDisplay = oSettings.aiDisplayMaster.slice();
			
				/* Initialisation complete - table can be drawn */
				oSettings.bInitialised = true;
			
				/* Check if we need to initialise the table (it might not have been handed off to the
				 * language processor)
				 */
				if ( bInitHandedOff === false ) {
					_fnInitialise( oSettings );
				}
			};
			
			/* Must be done after everything which can be overridden by the state saving! */
			if ( oInit.bStateSave )
			{
				features.bStateSave = true;
				_fnCallbackReg( oSettings, 'aoDrawCallback', _fnSaveState, 'state_save' );
				_fnLoadState( oSettings, oInit, loadedInit );
			}
			else {
				loadedInit();
			}
			
		} );
		_that = null;
		return this;
	};

	
	/*
	 * It is useful to have variables which are scoped locally so only the
	 * DataTables functions can access them and they don't leak into global space.
	 * At the same time these functions are often useful over multiple files in the
	 * core and API, so we list, or at least document, all variables which are used
	 * by DataTables as private variables here. This also ensures that there is no
	 * clashing of variable names and that they can easily referenced for reuse.
	 */
	
	
	// Defined else where
	//  _selector_run
	//  _selector_opts
	//  _selector_first
	//  _selector_row_indexes
	
	var _ext; // DataTable.ext
	var _Api; // DataTable.Api
	var _api_register; // DataTable.Api.register
	var _api_registerPlural; // DataTable.Api.registerPlural
	
	var _re_dic = {};
	var _re_new_lines = /[\r\n]/g;
	var _re_html = /<.*?>/g;
	
	// This is not strict ISO8601 - Date.parse() is quite lax, although
	// implementations differ between browsers.
	var _re_date = /^\d{2,4}[\.\/\-]\d{1,2}[\.\/\-]\d{1,2}([T ]{1}\d{1,2}[:\.]\d{2}([\.:]\d{2})?)?$/;
	
	// Escape regular expression special characters
	var _re_escape_regex = new RegExp( '(\\' + [ '/', '.', '*', '+', '?', '|', '(', ')', '[', ']', '{', '}', '\\', '$', '^', '-' ].join('|\\') + ')', 'g' );
	
	// http://en.wikipedia.org/wiki/Foreign_exchange_market
	// - \u20BD - Russian ruble.
	// - \u20a9 - South Korean Won
	// - \u20BA - Turkish Lira
	// - \u20B9 - Indian Rupee
	// - R - Brazil (R$) and South Africa
	// - fr - Swiss Franc
	// - kr - Swedish krona, Norwegian krone and Danish krone
	// - \u2009 is thin space and \u202F is narrow no-break space, both used in many
	//   standards as thousands separators.
	var _re_formatted_numeric = /[',$£€¥%\u2009\u202F\u20BD\u20a9\u20BArfk]/gi;
	
	
	var _empty = function ( d ) {
		return !d || d === true || d === '-' ? true : false;
	};
	
	
	var _intVal = function ( s ) {
		var integer = parseInt( s, 10 );
		return !isNaN(integer) && isFinite(s) ? integer : null;
	};
	
	// Convert from a formatted number with characters other than `.` as the
	// decimal place, to a Javascript number
	var _numToDecimal = function ( num, decimalPoint ) {
		// Cache created regular expressions for speed as this function is called often
		if ( ! _re_dic[ decimalPoint ] ) {
			_re_dic[ decimalPoint ] = new RegExp( _fnEscapeRegex( decimalPoint ), 'g' );
		}
		return typeof num === 'string' && decimalPoint !== '.' ?
			num.replace( /\./g, '' ).replace( _re_dic[ decimalPoint ], '.' ) :
			num;
	};
	
	
	var _isNumber = function ( d, decimalPoint, formatted ) {
		var strType = typeof d === 'string';
	
		// If empty return immediately so there must be a number if it is a
		// formatted string (this stops the string "k", or "kr", etc being detected
		// as a formatted number for currency
		if ( _empty( d ) ) {
			return true;
		}
	
		if ( decimalPoint && strType ) {
			d = _numToDecimal( d, decimalPoint );
		}
	
		if ( formatted && strType ) {
			d = d.replace( _re_formatted_numeric, '' );
		}
	
		return !isNaN( parseFloat(d) ) && isFinite( d );
	};
	
	
	// A string without HTML in it can be considered to be HTML still
	var _isHtml = function ( d ) {
		return _empty( d ) || typeof d === 'string';
	};
	
	
	var _htmlNumeric = function ( d, decimalPoint, formatted ) {
		if ( _empty( d ) ) {
			return true;
		}
	
		var html = _isHtml( d );
		return ! html ?
			null :
			_isNumber( _stripHtml( d ), decimalPoint, formatted ) ?
				true :
				null;
	};
	
	
	var _pluck = function ( a, prop, prop2 ) {
		var out = [];
		var i=0, ien=a.length;
	
		// Could have the test in the loop for slightly smaller code, but speed
		// is essential here
		if ( prop2 !== undefined ) {
			for ( ; i<ien ; i++ ) {
				if ( a[i] && a[i][ prop ] ) {
					out.push( a[i][ prop ][ prop2 ] );
				}
			}
		}
		else {
			for ( ; i<ien ; i++ ) {
				if ( a[i] ) {
					out.push( a[i][ prop ] );
				}
			}
		}
	
		return out;
	};
	
	
	// Basically the same as _pluck, but rather than looping over `a` we use `order`
	// as the indexes to pick from `a`
	var _pluck_order = function ( a, order, prop, prop2 )
	{
		var out = [];
		var i=0, ien=order.length;
	
		// Could have the test in the loop for slightly smaller code, but speed
		// is essential here
		if ( prop2 !== undefined ) {
			for ( ; i<ien ; i++ ) {
				if ( a[ order[i] ][ prop ] ) {
					out.push( a[ order[i] ][ prop ][ prop2 ] );
				}
			}
		}
		else {
			for ( ; i<ien ; i++ ) {
				out.push( a[ order[i] ][ prop ] );
			}
		}
	
		return out;
	};
	
	
	var _range = function ( len, start )
	{
		var out = [];
		var end;
	
		if ( start === undefined ) {
			start = 0;
			end = len;
		}
		else {
			end = start;
			start = len;
		}
	
		for ( var i=start ; i<end ; i++ ) {
			out.push( i );
		}
	
		return out;
	};
	
	
	var _removeEmpty = function ( a )
	{
		var out = [];
	
		for ( var i=0, ien=a.length ; i<ien ; i++ ) {
			if ( a[i] ) { // careful - will remove all falsy values!
				out.push( a[i] );
			}
		}
	
		return out;
	};
	
	
	var _stripHtml = function ( d ) {
		return d.replace( _re_html, '' );
	};
	
	
	/**
	 * Find the unique elements in a source array.
	 *
	 * @param  {array} src Source array
	 * @return {array} Array of unique items
	 * @ignore
	 */
	var _unique = function ( src )
	{
		// A faster unique method is to use object keys to identify used values,
		// but this doesn't work with arrays or objects, which we must also
		// consider. See jsperf.com/compare-array-unique-versions/4 for more
		// information.
		var
			out = [],
			val,
			i, ien=src.length,
			j, k=0;
	
		again: for ( i=0 ; i<ien ; i++ ) {
			val = src[i];
	
			for ( j=0 ; j<k ; j++ ) {
				if ( out[j] === val ) {
					continue again;
				}
			}
	
			out.push( val );
			k++;
		}
	
		return out;
	};
	
	
	/**
	 * DataTables utility methods
	 * 
	 * This namespace provides helper methods that DataTables uses internally to
	 * create a DataTable, but which are not exclusively used only for DataTables.
	 * These methods can be used by extension authors to save the duplication of
	 * code.
	 *
	 *  @namespace
	 */
	DataTable.util = {
		/**
		 * Throttle the calls to a function. Arguments and context are maintained
		 * for the throttled function.
		 *
		 * @param {function} fn Function to be called
		 * @param {integer} freq Call frequency in mS
		 * @return {function} Wrapped function
		 */
		throttle: function ( fn, freq ) {
			var
				frequency = freq !== undefined ? freq : 200,
				last,
				timer;
	
			return function () {
				var
					that = this,
					now  = +new Date(),
					args = arguments;
	
				if ( last && now < last + frequency ) {
					clearTimeout( timer );
	
					timer = setTimeout( function () {
						last = undefined;
						fn.apply( that, args );
					}, frequency );
				}
				else {
					last = now;
					fn.apply( that, args );
				}
			};
		},
	
	
		/**
		 * Escape a string such that it can be used in a regular expression
		 *
		 *  @param {string} val string to escape
		 *  @returns {string} escaped string
		 */
		escapeRegex: function ( val ) {
			return val.replace( _re_escape_regex, '\\$1' );
		}
	};
	
	
	
	/**
	 * Create a mapping object that allows camel case parameters to be looked up
	 * for their Hungarian counterparts. The mapping is stored in a private
	 * parameter called `_hungarianMap` which can be accessed on the source object.
	 *  @param {object} o
	 *  @memberof DataTable#oApi
	 */
	function _fnHungarianMap ( o )
	{
		var
			hungarian = 'a aa ai ao as b fn i m o s ',
			match,
			newKey,
			map = {};
	
		$.each( o, function (key, val) {
			match = key.match(/^([^A-Z]+?)([A-Z])/);
	
			if ( match && hungarian.indexOf(match[1]+' ') !== -1 )
			{
				newKey = key.replace( match[0], match[2].toLowerCase() );
				map[ newKey ] = key;
	
				if ( match[1] === 'o' )
				{
					_fnHungarianMap( o[key] );
				}
			}
		} );
	
		o._hungarianMap = map;
	}
	
	
	/**
	 * Convert from camel case parameters to Hungarian, based on a Hungarian map
	 * created by _fnHungarianMap.
	 *  @param {object} src The model object which holds all parameters that can be
	 *    mapped.
	 *  @param {object} user The object to convert from camel case to Hungarian.
	 *  @param {boolean} force When set to `true`, properties which already have a
	 *    Hungarian value in the `user` object will be overwritten. Otherwise they
	 *    won't be.
	 *  @memberof DataTable#oApi
	 */
	function _fnCamelToHungarian ( src, user, force )
	{
		if ( ! src._hungarianMap ) {
			_fnHungarianMap( src );
		}
	
		var hungarianKey;
	
		$.each( user, function (key, val) {
			hungarianKey = src._hungarianMap[ key ];
	
			if ( hungarianKey !== undefined && (force || user[hungarianKey] === undefined) )
			{
				// For objects, we need to buzz down into the object to copy parameters
				if ( hungarianKey.charAt(0) === 'o' )
				{
					// Copy the camelCase options over to the hungarian
					if ( ! user[ hungarianKey ] ) {
						user[ hungarianKey ] = {};
					}
					$.extend( true, user[hungarianKey], user[key] );
	
					_fnCamelToHungarian( src[hungarianKey], user[hungarianKey], force );
				}
				else {
					user[hungarianKey] = user[ key ];
				}
			}
		} );
	}
	
	
	/**
	 * Language compatibility - when certain options are given, and others aren't, we
	 * need to duplicate the values over, in order to provide backwards compatibility
	 * with older language files.
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnLanguageCompat( lang )
	{
		var defaults = DataTable.defaults.oLanguage;
		var zeroRecords = lang.sZeroRecords;
	
		/* Backwards compatibility - if there is no sEmptyTable given, then use the same as
		 * sZeroRecords - assuming that is given.
		 */
		if ( ! lang.sEmptyTable && zeroRecords &&
			defaults.sEmptyTable === "No data available in table" )
		{
			_fnMap( lang, lang, 'sZeroRecords', 'sEmptyTable' );
		}
	
		/* Likewise with loading records */
		if ( ! lang.sLoadingRecords && zeroRecords &&
			defaults.sLoadingRecords === "Loading..." )
		{
			_fnMap( lang, lang, 'sZeroRecords', 'sLoadingRecords' );
		}
	
		// Old parameter name of the thousands separator mapped onto the new
		if ( lang.sInfoThousands ) {
			lang.sThousands = lang.sInfoThousands;
		}
	
		var decimal = lang.sDecimal;
		if ( decimal ) {
			_addNumericSort( decimal );
		}
	}
	
	
	/**
	 * Map one parameter onto another
	 *  @param {object} o Object to map
	 *  @param {*} knew The new parameter name
	 *  @param {*} old The old parameter name
	 */
	var _fnCompatMap = function ( o, knew, old ) {
		if ( o[ knew ] !== undefined ) {
			o[ old ] = o[ knew ];
		}
	};
	
	
	/**
	 * Provide backwards compatibility for the main DT options. Note that the new
	 * options are mapped onto the old parameters, so this is an external interface
	 * change only.
	 *  @param {object} init Object to map
	 */
	function _fnCompatOpts ( init )
	{
		_fnCompatMap( init, 'ordering',      'bSort' );
		_fnCompatMap( init, 'orderMulti',    'bSortMulti' );
		_fnCompatMap( init, 'orderClasses',  'bSortClasses' );
		_fnCompatMap( init, 'orderCellsTop', 'bSortCellsTop' );
		_fnCompatMap( init, 'order',         'aaSorting' );
		_fnCompatMap( init, 'orderFixed',    'aaSortingFixed' );
		_fnCompatMap( init, 'paging',        'bPaginate' );
		_fnCompatMap( init, 'pagingType',    'sPaginationType' );
		_fnCompatMap( init, 'pageLength',    'iDisplayLength' );
		_fnCompatMap( init, 'searching',     'bFilter' );
	
		// Boolean initialisation of x-scrolling
		if ( typeof init.sScrollX === 'boolean' ) {
			init.sScrollX = init.sScrollX ? '100%' : '';
		}
		if ( typeof init.scrollX === 'boolean' ) {
			init.scrollX = init.scrollX ? '100%' : '';
		}
	
		// Column search objects are in an array, so it needs to be converted
		// element by element
		var searchCols = init.aoSearchCols;
	
		if ( searchCols ) {
			for ( var i=0, ien=searchCols.length ; i<ien ; i++ ) {
				if ( searchCols[i] ) {
					_fnCamelToHungarian( DataTable.models.oSearch, searchCols[i] );
				}
			}
		}
	}
	
	
	/**
	 * Provide backwards compatibility for column options. Note that the new options
	 * are mapped onto the old parameters, so this is an external interface change
	 * only.
	 *  @param {object} init Object to map
	 */
	function _fnCompatCols ( init )
	{
		_fnCompatMap( init, 'orderable',     'bSortable' );
		_fnCompatMap( init, 'orderData',     'aDataSort' );
		_fnCompatMap( init, 'orderSequence', 'asSorting' );
		_fnCompatMap( init, 'orderDataType', 'sortDataType' );
	
		// orderData can be given as an integer
		var dataSort = init.aDataSort;
		if ( dataSort && ! $.isArray( dataSort ) ) {
			init.aDataSort = [ dataSort ];
		}
	}
	
	
	/**
	 * Browser feature detection for capabilities, quirks
	 *  @param {object} settings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnBrowserDetect( settings )
	{
		// We don't need to do this every time DataTables is constructed, the values
		// calculated are specific to the browser and OS configuration which we
		// don't expect to change between initialisations
		if ( ! DataTable.__browser ) {
			var browser = {};
			DataTable.__browser = browser;
	
			// Scrolling feature / quirks detection
			var n = $('<div/>')
				.css( {
					position: 'fixed',
					top: 0,
					left: $(window).scrollLeft()*-1, // allow for scrolling
					height: 1,
					width: 1,
					overflow: 'hidden'
				} )
				.append(
					$('<div/>')
						.css( {
							position: 'absolute',
							top: 1,
							left: 1,
							width: 100,
							overflow: 'scroll'
						} )
						.append(
							$('<div/>')
								.css( {
									width: '100%',
									height: 10
								} )
						)
				)
				.appendTo( 'body' );
	
			var outer = n.children();
			var inner = outer.children();
	
			// Numbers below, in order, are:
			// inner.offsetWidth, inner.clientWidth, outer.offsetWidth, outer.clientWidth
			//
			// IE6 XP:                           100 100 100  83
			// IE7 Vista:                        100 100 100  83
			// IE 8+ Windows:                     83  83 100  83
			// Evergreen Windows:                 83  83 100  83
			// Evergreen Mac with scrollbars:     85  85 100  85
			// Evergreen Mac without scrollbars: 100 100 100 100
	
			// Get scrollbar width
			browser.barWidth = outer[0].offsetWidth - outer[0].clientWidth;
	
			// IE6/7 will oversize a width 100% element inside a scrolling element, to
			// include the width of the scrollbar, while other browsers ensure the inner
			// element is contained without forcing scrolling
			browser.bScrollOversize = inner[0].offsetWidth === 100 && outer[0].clientWidth !== 100;
	
			// In rtl text layout, some browsers (most, but not all) will place the
			// scrollbar on the left, rather than the right.
			browser.bScrollbarLeft = Math.round( inner.offset().left ) !== 1;
	
			// IE8- don't provide height and width for getBoundingClientRect
			browser.bBounding = n[0].getBoundingClientRect().width ? true : false;
	
			n.remove();
		}
	
		$.extend( settings.oBrowser, DataTable.__browser );
		settings.oScroll.iBarWidth = DataTable.__browser.barWidth;
	}
	
	
	/**
	 * Array.prototype reduce[Right] method, used for browsers which don't support
	 * JS 1.6. Done this way to reduce code size, since we iterate either way
	 *  @param {object} settings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnReduce ( that, fn, init, start, end, inc )
	{
		var
			i = start,
			value,
			isSet = false;
	
		if ( init !== undefined ) {
			value = init;
			isSet = true;
		}
	
		while ( i !== end ) {
			if ( ! that.hasOwnProperty(i) ) {
				continue;
			}
	
			value = isSet ?
				fn( value, that[i], i, that ) :
				that[i];
	
			isSet = true;
			i += inc;
		}
	
		return value;
	}
	
	/**
	 * Add a column to the list used for the table with default values
	 *  @param {object} oSettings dataTables settings object
	 *  @param {node} nTh The th element for this column
	 *  @memberof DataTable#oApi
	 */
	function _fnAddColumn( oSettings, nTh )
	{
		// Add column to aoColumns array
		var oDefaults = DataTable.defaults.column;
		var iCol = oSettings.aoColumns.length;
		var oCol = $.extend( {}, DataTable.models.oColumn, oDefaults, {
			"nTh": nTh ? nTh : document.createElement('th'),
			"sTitle":    oDefaults.sTitle    ? oDefaults.sTitle    : nTh ? nTh.innerHTML : '',
			"aDataSort": oDefaults.aDataSort ? oDefaults.aDataSort : [iCol],
			"mData": oDefaults.mData ? oDefaults.mData : iCol,
			idx: iCol
		} );
		oSettings.aoColumns.push( oCol );
	
		// Add search object for column specific search. Note that the `searchCols[ iCol ]`
		// passed into extend can be undefined. This allows the user to give a default
		// with only some of the parameters defined, and also not give a default
		var searchCols = oSettings.aoPreSearchCols;
		searchCols[ iCol ] = $.extend( {}, DataTable.models.oSearch, searchCols[ iCol ] );
	
		// Use the default column options function to initialise classes etc
		_fnColumnOptions( oSettings, iCol, $(nTh).data() );
	}
	
	
	/**
	 * Apply options for a column
	 *  @param {object} oSettings dataTables settings object
	 *  @param {int} iCol column index to consider
	 *  @param {object} oOptions object with sType, bVisible and bSearchable etc
	 *  @memberof DataTable#oApi
	 */
	function _fnColumnOptions( oSettings, iCol, oOptions )
	{
		var oCol = oSettings.aoColumns[ iCol ];
		var oClasses = oSettings.oClasses;
		var th = $(oCol.nTh);
	
		// Try to get width information from the DOM. We can't get it from CSS
		// as we'd need to parse the CSS stylesheet. `width` option can override
		if ( ! oCol.sWidthOrig ) {
			// Width attribute
			oCol.sWidthOrig = th.attr('width') || null;
	
			// Style attribute
			var t = (th.attr('style') || '').match(/width:\s*(\d+[pxem%]+)/);
			if ( t ) {
				oCol.sWidthOrig = t[1];
			}
		}
	
		/* User specified column options */
		if ( oOptions !== undefined && oOptions !== null )
		{
			// Backwards compatibility
			_fnCompatCols( oOptions );
	
			// Map camel case parameters to their Hungarian counterparts
			_fnCamelToHungarian( DataTable.defaults.column, oOptions );
	
			/* Backwards compatibility for mDataProp */
			if ( oOptions.mDataProp !== undefined && !oOptions.mData )
			{
				oOptions.mData = oOptions.mDataProp;
			}
	
			if ( oOptions.sType )
			{
				oCol._sManualType = oOptions.sType;
			}
	
			// `class` is a reserved word in Javascript, so we need to provide
			// the ability to use a valid name for the camel case input
			if ( oOptions.className && ! oOptions.sClass )
			{
				oOptions.sClass = oOptions.className;
			}
	
			$.extend( oCol, oOptions );
			_fnMap( oCol, oOptions, "sWidth", "sWidthOrig" );
	
			/* iDataSort to be applied (backwards compatibility), but aDataSort will take
			 * priority if defined
			 */
			if ( oOptions.iDataSort !== undefined )
			{
				oCol.aDataSort = [ oOptions.iDataSort ];
			}
			_fnMap( oCol, oOptions, "aDataSort" );
		}
	
		/* Cache the data get and set functions for speed */
		var mDataSrc = oCol.mData;
		var mData = _fnGetObjectDataFn( mDataSrc );
		var mRender = oCol.mRender ? _fnGetObjectDataFn( oCol.mRender ) : null;
	
		var attrTest = function( src ) {
			return typeof src === 'string' && src.indexOf('@') !== -1;
		};
		oCol._bAttrSrc = $.isPlainObject( mDataSrc ) && (
			attrTest(mDataSrc.sort) || attrTest(mDataSrc.type) || attrTest(mDataSrc.filter)
		);
		oCol._setter = null;
	
		oCol.fnGetData = function (rowData, type, meta) {
			var innerData = mData( rowData, type, undefined, meta );
	
			return mRender && type ?
				mRender( innerData, type, rowData, meta ) :
				innerData;
		};
		oCol.fnSetData = function ( rowData, val, meta ) {
			return _fnSetObjectDataFn( mDataSrc )( rowData, val, meta );
		};
	
		// Indicate if DataTables should read DOM data as an object or array
		// Used in _fnGetRowElements
		if ( typeof mDataSrc !== 'number' ) {
			oSettings._rowReadObject = true;
		}
	
		/* Feature sorting overrides column specific when off */
		if ( !oSettings.oFeatures.bSort )
		{
			oCol.bSortable = false;
			th.addClass( oClasses.sSortableNone ); // Have to add class here as order event isn't called
		}
	
		/* Check that the class assignment is correct for sorting */
		var bAsc = $.inArray('asc', oCol.asSorting) !== -1;
		var bDesc = $.inArray('desc', oCol.asSorting) !== -1;
		if ( !oCol.bSortable || (!bAsc && !bDesc) )
		{
			oCol.sSortingClass = oClasses.sSortableNone;
			oCol.sSortingClassJUI = "";
		}
		else if ( bAsc && !bDesc )
		{
			oCol.sSortingClass = oClasses.sSortableAsc;
			oCol.sSortingClassJUI = oClasses.sSortJUIAscAllowed;
		}
		else if ( !bAsc && bDesc )
		{
			oCol.sSortingClass = oClasses.sSortableDesc;
			oCol.sSortingClassJUI = oClasses.sSortJUIDescAllowed;
		}
		else
		{
			oCol.sSortingClass = oClasses.sSortable;
			oCol.sSortingClassJUI = oClasses.sSortJUI;
		}
	}
	
	
	/**
	 * Adjust the table column widths for new data. Note: you would probably want to
	 * do a redraw after calling this function!
	 *  @param {object} settings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnAdjustColumnSizing ( settings )
	{
		/* Not interested in doing column width calculation if auto-width is disabled */
		if ( settings.oFeatures.bAutoWidth !== false )
		{
			var columns = settings.aoColumns;
	
			_fnCalculateColumnWidths( settings );
			for ( var i=0 , iLen=columns.length ; i<iLen ; i++ )
			{
				columns[i].nTh.style.width = columns[i].sWidth;
			}
		}
	
		var scroll = settings.oScroll;
		if ( scroll.sY !== '' || scroll.sX !== '')
		{
			_fnScrollDraw( settings );
		}
	
		_fnCallbackFire( settings, null, 'column-sizing', [settings] );
	}
	
	
	/**
	 * Covert the index of a visible column to the index in the data array (take account
	 * of hidden columns)
	 *  @param {object} oSettings dataTables settings object
	 *  @param {int} iMatch Visible column index to lookup
	 *  @returns {int} i the data index
	 *  @memberof DataTable#oApi
	 */
	function _fnVisibleToColumnIndex( oSettings, iMatch )
	{
		var aiVis = _fnGetColumns( oSettings, 'bVisible' );
	
		return typeof aiVis[iMatch] === 'number' ?
			aiVis[iMatch] :
			null;
	}
	
	
	/**
	 * Covert the index of an index in the data array and convert it to the visible
	 *   column index (take account of hidden columns)
	 *  @param {int} iMatch Column index to lookup
	 *  @param {object} oSettings dataTables settings object
	 *  @returns {int} i the data index
	 *  @memberof DataTable#oApi
	 */
	function _fnColumnIndexToVisible( oSettings, iMatch )
	{
		var aiVis = _fnGetColumns( oSettings, 'bVisible' );
		var iPos = $.inArray( iMatch, aiVis );
	
		return iPos !== -1 ? iPos : null;
	}
	
	
	/**
	 * Get the number of visible columns
	 *  @param {object} oSettings dataTables settings object
	 *  @returns {int} i the number of visible columns
	 *  @memberof DataTable#oApi
	 */
	function _fnVisbleColumns( oSettings )
	{
		var vis = 0;
	
		// No reduce in IE8, use a loop for now
		$.each( oSettings.aoColumns, function ( i, col ) {
			if ( col.bVisible && $(col.nTh).css('display') !== 'none' ) {
				vis++;
			}
		} );
	
		return vis;
	}
	
	
	/**
	 * Get an array of column indexes that match a given property
	 *  @param {object} oSettings dataTables settings object
	 *  @param {string} sParam Parameter in aoColumns to look for - typically
	 *    bVisible or bSearchable
	 *  @returns {array} Array of indexes with matched properties
	 *  @memberof DataTable#oApi
	 */
	function _fnGetColumns( oSettings, sParam )
	{
		var a = [];
	
		$.map( oSettings.aoColumns, function(val, i) {
			if ( val[sParam] ) {
				a.push( i );
			}
		} );
	
		return a;
	}
	
	
	/**
	 * Calculate the 'type' of a column
	 *  @param {object} settings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnColumnTypes ( settings )
	{
		var columns = settings.aoColumns;
		var data = settings.aoData;
		var types = DataTable.ext.type.detect;
		var i, ien, j, jen, k, ken;
		var col, cell, detectedType, cache;
	
		// For each column, spin over the 
		for ( i=0, ien=columns.length ; i<ien ; i++ ) {
			col = columns[i];
			cache = [];
	
			if ( ! col.sType && col._sManualType ) {
				col.sType = col._sManualType;
			}
			else if ( ! col.sType ) {
				for ( j=0, jen=types.length ; j<jen ; j++ ) {
					for ( k=0, ken=data.length ; k<ken ; k++ ) {
						// Use a cache array so we only need to get the type data
						// from the formatter once (when using multiple detectors)
						if ( cache[k] === undefined ) {
							cache[k] = _fnGetCellData( settings, k, i, 'type' );
						}
	
						detectedType = types[j]( cache[k], settings );
	
						// If null, then this type can't apply to this column, so
						// rather than testing all cells, break out. There is an
						// exception for the last type which is `html`. We need to
						// scan all rows since it is possible to mix string and HTML
						// types
						if ( ! detectedType && j !== types.length-1 ) {
							break;
						}
	
						// Only a single match is needed for html type since it is
						// bottom of the pile and very similar to string
						if ( detectedType === 'html' ) {
							break;
						}
					}
	
					// Type is valid for all data points in the column - use this
					// type
					if ( detectedType ) {
						col.sType = detectedType;
						break;
					}
				}
	
				// Fall back - if no type was detected, always use string
				if ( ! col.sType ) {
					col.sType = 'string';
				}
			}
		}
	}
	
	
	/**
	 * Take the column definitions and static columns arrays and calculate how
	 * they relate to column indexes. The callback function will then apply the
	 * definition found for a column to a suitable configuration object.
	 *  @param {object} oSettings dataTables settings object
	 *  @param {array} aoColDefs The aoColumnDefs array that is to be applied
	 *  @param {array} aoCols The aoColumns array that defines columns individually
	 *  @param {function} fn Callback function - takes two parameters, the calculated
	 *    column index and the definition for that column.
	 *  @memberof DataTable#oApi
	 */
	function _fnApplyColumnDefs( oSettings, aoColDefs, aoCols, fn )
	{
		var i, iLen, j, jLen, k, kLen, def;
		var columns = oSettings.aoColumns;
	
		// Column definitions with aTargets
		if ( aoColDefs )
		{
			/* Loop over the definitions array - loop in reverse so first instance has priority */
			for ( i=aoColDefs.length-1 ; i>=0 ; i-- )
			{
				def = aoColDefs[i];
	
				/* Each definition can target multiple columns, as it is an array */
				var aTargets = def.targets !== undefined ?
					def.targets :
					def.aTargets;
	
				if ( ! $.isArray( aTargets ) )
				{
					aTargets = [ aTargets ];
				}
	
				for ( j=0, jLen=aTargets.length ; j<jLen ; j++ )
				{
					if ( typeof aTargets[j] === 'number' && aTargets[j] >= 0 )
					{
						/* Add columns that we don't yet know about */
						while( columns.length <= aTargets[j] )
						{
							_fnAddColumn( oSettings );
						}
	
						/* Integer, basic index */
						fn( aTargets[j], def );
					}
					else if ( typeof aTargets[j] === 'number' && aTargets[j] < 0 )
					{
						/* Negative integer, right to left column counting */
						fn( columns.length+aTargets[j], def );
					}
					else if ( typeof aTargets[j] === 'string' )
					{
						/* Class name matching on TH element */
						for ( k=0, kLen=columns.length ; k<kLen ; k++ )
						{
							if ( aTargets[j] == "_all" ||
							     $(columns[k].nTh).hasClass( aTargets[j] ) )
							{
								fn( k, def );
							}
						}
					}
				}
			}
		}
	
		// Statically defined columns array
		if ( aoCols )
		{
			for ( i=0, iLen=aoCols.length ; i<iLen ; i++ )
			{
				fn( i, aoCols[i] );
			}
		}
	}
	
	/**
	 * Add a data array to the table, creating DOM node etc. This is the parallel to
	 * _fnGatherData, but for adding rows from a Javascript source, rather than a
	 * DOM source.
	 *  @param {object} oSettings dataTables settings object
	 *  @param {array} aData data array to be added
	 *  @param {node} [nTr] TR element to add to the table - optional. If not given,
	 *    DataTables will create a row automatically
	 *  @param {array} [anTds] Array of TD|TH elements for the row - must be given
	 *    if nTr is.
	 *  @returns {int} >=0 if successful (index of new aoData entry), -1 if failed
	 *  @memberof DataTable#oApi
	 */
	function _fnAddData ( oSettings, aDataIn, nTr, anTds )
	{
		/* Create the object for storing information about this new row */
		var iRow = oSettings.aoData.length;
		var oData = $.extend( true, {}, DataTable.models.oRow, {
			src: nTr ? 'dom' : 'data',
			idx: iRow
		} );
	
		oData._aData = aDataIn;
		oSettings.aoData.push( oData );
	
		/* Create the cells */
		var nTd, sThisType;
		var columns = oSettings.aoColumns;
	
		// Invalidate the column types as the new data needs to be revalidated
		for ( var i=0, iLen=columns.length ; i<iLen ; i++ )
		{
			columns[i].sType = null;
		}
	
		/* Add to the display array */
		oSettings.aiDisplayMaster.push( iRow );
	
		var id = oSettings.rowIdFn( aDataIn );
		if ( id !== undefined ) {
			oSettings.aIds[ id ] = oData;
		}
	
		/* Create the DOM information, or register it if already present */
		if ( nTr || ! oSettings.oFeatures.bDeferRender )
		{
			_fnCreateTr( oSettings, iRow, nTr, anTds );
		}
	
		return iRow;
	}
	
	
	/**
	 * Add one or more TR elements to the table. Generally we'd expect to
	 * use this for reading data from a DOM sourced table, but it could be
	 * used for an TR element. Note that if a TR is given, it is used (i.e.
	 * it is not cloned).
	 *  @param {object} settings dataTables settings object
	 *  @param {array|node|jQuery} trs The TR element(s) to add to the table
	 *  @returns {array} Array of indexes for the added rows
	 *  @memberof DataTable#oApi
	 */
	function _fnAddTr( settings, trs )
	{
		var row;
	
		// Allow an individual node to be passed in
		if ( ! (trs instanceof $) ) {
			trs = $(trs);
		}
	
		return trs.map( function (i, el) {
			row = _fnGetRowElements( settings, el );
			return _fnAddData( settings, row.data, el, row.cells );
		} );
	}
	
	
	/**
	 * Take a TR element and convert it to an index in aoData
	 *  @param {object} oSettings dataTables settings object
	 *  @param {node} n the TR element to find
	 *  @returns {int} index if the node is found, null if not
	 *  @memberof DataTable#oApi
	 */
	function _fnNodeToDataIndex( oSettings, n )
	{
		return (n._DT_RowIndex!==undefined) ? n._DT_RowIndex : null;
	}
	
	
	/**
	 * Take a TD element and convert it into a column data index (not the visible index)
	 *  @param {object} oSettings dataTables settings object
	 *  @param {int} iRow The row number the TD/TH can be found in
	 *  @param {node} n The TD/TH element to find
	 *  @returns {int} index if the node is found, -1 if not
	 *  @memberof DataTable#oApi
	 */
	function _fnNodeToColumnIndex( oSettings, iRow, n )
	{
		return $.inArray( n, oSettings.aoData[ iRow ].anCells );
	}
	
	
	/**
	 * Get the data for a given cell from the internal cache, taking into account data mapping
	 *  @param {object} settings dataTables settings object
	 *  @param {int} rowIdx aoData row id
	 *  @param {int} colIdx Column index
	 *  @param {string} type data get type ('display', 'type' 'filter' 'sort')
	 *  @returns {*} Cell data
	 *  @memberof DataTable#oApi
	 */
	function _fnGetCellData( settings, rowIdx, colIdx, type )
	{
		var draw           = settings.iDraw;
		var col            = settings.aoColumns[colIdx];
		var rowData        = settings.aoData[rowIdx]._aData;
		var defaultContent = col.sDefaultContent;
		var cellData       = col.fnGetData( rowData, type, {
			settings: settings,
			row:      rowIdx,
			col:      colIdx
		} );
	
		if ( cellData === undefined ) {
			if ( settings.iDrawError != draw && defaultContent === null ) {
				_fnLog( settings, 0, "Requested unknown parameter "+
					(typeof col.mData=='function' ? '{function}' : "'"+col.mData+"'")+
					" for row "+rowIdx+", column "+colIdx, 4 );
				settings.iDrawError = draw;
			}
			return defaultContent;
		}
	
		// When the data source is null and a specific data type is requested (i.e.
		// not the original data), we can use default column data
		if ( (cellData === rowData || cellData === null) && defaultContent !== null && type !== undefined ) {
			cellData = defaultContent;
		}
		else if ( typeof cellData === 'function' ) {
			// If the data source is a function, then we run it and use the return,
			// executing in the scope of the data object (for instances)
			return cellData.call( rowData );
		}
	
		if ( cellData === null && type == 'display' ) {
			return '';
		}
		return cellData;
	}
	
	
	/**
	 * Set the value for a specific cell, into the internal data cache
	 *  @param {object} settings dataTables settings object
	 *  @param {int} rowIdx aoData row id
	 *  @param {int} colIdx Column index
	 *  @param {*} val Value to set
	 *  @memberof DataTable#oApi
	 */
	function _fnSetCellData( settings, rowIdx, colIdx, val )
	{
		var col     = settings.aoColumns[colIdx];
		var rowData = settings.aoData[rowIdx]._aData;
	
		col.fnSetData( rowData, val, {
			settings: settings,
			row:      rowIdx,
			col:      colIdx
		}  );
	}
	
	
	// Private variable that is used to match action syntax in the data property object
	var __reArray = /\[.*?\]$/;
	var __reFn = /\(\)$/;
	
	/**
	 * Split string on periods, taking into account escaped periods
	 * @param  {string} str String to split
	 * @return {array} Split string
	 */
	function _fnSplitObjNotation( str )
	{
		return $.map( str.match(/(\\.|[^\.])+/g) || [''], function ( s ) {
			return s.replace(/\\\./g, '.');
		} );
	}
	
	
	/**
	 * Return a function that can be used to get data from a source object, taking
	 * into account the ability to use nested objects as a source
	 *  @param {string|int|function} mSource The data source for the object
	 *  @returns {function} Data get function
	 *  @memberof DataTable#oApi
	 */
	function _fnGetObjectDataFn( mSource )
	{
		if ( $.isPlainObject( mSource ) )
		{
			/* Build an object of get functions, and wrap them in a single call */
			var o = {};
			$.each( mSource, function (key, val) {
				if ( val ) {
					o[key] = _fnGetObjectDataFn( val );
				}
			} );
	
			return function (data, type, row, meta) {
				var t = o[type] || o._;
				return t !== undefined ?
					t(data, type, row, meta) :
					data;
			};
		}
		else if ( mSource === null )
		{
			/* Give an empty string for rendering / sorting etc */
			return function (data) { // type, row and meta also passed, but not used
				return data;
			};
		}
		else if ( typeof mSource === 'function' )
		{
			return function (data, type, row, meta) {
				return mSource( data, type, row, meta );
			};
		}
		else if ( typeof mSource === 'string' && (mSource.indexOf('.') !== -1 ||
			      mSource.indexOf('[') !== -1 || mSource.indexOf('(') !== -1) )
		{
			/* If there is a . in the source string then the data source is in a
			 * nested object so we loop over the data for each level to get the next
			 * level down. On each loop we test for undefined, and if found immediately
			 * return. This allows entire objects to be missing and sDefaultContent to
			 * be used if defined, rather than throwing an error
			 */
			var fetchData = function (data, type, src) {
				var arrayNotation, funcNotation, out, innerSrc;
	
				if ( src !== "" )
				{
					var a = _fnSplitObjNotation( src );
	
					for ( var i=0, iLen=a.length ; i<iLen ; i++ )
					{
						// Check if we are dealing with special notation
						arrayNotation = a[i].match(__reArray);
						funcNotation = a[i].match(__reFn);
	
						if ( arrayNotation )
						{
							// Array notation
							a[i] = a[i].replace(__reArray, '');
	
							// Condition allows simply [] to be passed in
							if ( a[i] !== "" ) {
								data = data[ a[i] ];
							}
							out = [];
	
							// Get the remainder of the nested object to get
							a.splice( 0, i+1 );
							innerSrc = a.join('.');
	
							// Traverse each entry in the array getting the properties requested
							if ( $.isArray( data ) ) {
								for ( var j=0, jLen=data.length ; j<jLen ; j++ ) {
									out.push( fetchData( data[j], type, innerSrc ) );
								}
							}
	
							// If a string is given in between the array notation indicators, that
							// is used to join the strings together, otherwise an array is returned
							var join = arrayNotation[0].substring(1, arrayNotation[0].length-1);
							data = (join==="") ? out : out.join(join);
	
							// The inner call to fetchData has already traversed through the remainder
							// of the source requested, so we exit from the loop
							break;
						}
						else if ( funcNotation )
						{
							// Function call
							a[i] = a[i].replace(__reFn, '');
							data = data[ a[i] ]();
							continue;
						}
	
						if ( data === null || data[ a[i] ] === undefined )
						{
							return undefined;
						}
						data = data[ a[i] ];
					}
				}
	
				return data;
			};
	
			return function (data, type) { // row and meta also passed, but not used
				return fetchData( data, type, mSource );
			};
		}
		else
		{
			/* Array or flat object mapping */
			return function (data, type) { // row and meta also passed, but not used
				return data[mSource];
			};
		}
	}
	
	
	/**
	 * Return a function that can be used to set data from a source object, taking
	 * into account the ability to use nested objects as a source
	 *  @param {string|int|function} mSource The data source for the object
	 *  @returns {function} Data set function
	 *  @memberof DataTable#oApi
	 */
	function _fnSetObjectDataFn( mSource )
	{
		if ( $.isPlainObject( mSource ) )
		{
			/* Unlike get, only the underscore (global) option is used for for
			 * setting data since we don't know the type here. This is why an object
			 * option is not documented for `mData` (which is read/write), but it is
			 * for `mRender` which is read only.
			 */
			return _fnSetObjectDataFn( mSource._ );
		}
		else if ( mSource === null )
		{
			/* Nothing to do when the data source is null */
			return function () {};
		}
		else if ( typeof mSource === 'function' )
		{
			return function (data, val, meta) {
				mSource( data, 'set', val, meta );
			};
		}
		else if ( typeof mSource === 'string' && (mSource.indexOf('.') !== -1 ||
			      mSource.indexOf('[') !== -1 || mSource.indexOf('(') !== -1) )
		{
			/* Like the get, we need to get data from a nested object */
			var setData = function (data, val, src) {
				var a = _fnSplitObjNotation( src ), b;
				var aLast = a[a.length-1];
				var arrayNotation, funcNotation, o, innerSrc;
	
				for ( var i=0, iLen=a.length-1 ; i<iLen ; i++ )
				{
					// Check if we are dealing with an array notation request
					arrayNotation = a[i].match(__reArray);
					funcNotation = a[i].match(__reFn);
	
					if ( arrayNotation )
					{
						a[i] = a[i].replace(__reArray, '');
						data[ a[i] ] = [];
	
						// Get the remainder of the nested object to set so we can recurse
						b = a.slice();
						b.splice( 0, i+1 );
						innerSrc = b.join('.');
	
						// Traverse each entry in the array setting the properties requested
						if ( $.isArray( val ) )
						{
							for ( var j=0, jLen=val.length ; j<jLen ; j++ )
							{
								o = {};
								setData( o, val[j], innerSrc );
								data[ a[i] ].push( o );
							}
						}
						else
						{
							// We've been asked to save data to an array, but it
							// isn't array data to be saved. Best that can be done
							// is to just save the value.
							data[ a[i] ] = val;
						}
	
						// The inner call to setData has already traversed through the remainder
						// of the source and has set the data, thus we can exit here
						return;
					}
					else if ( funcNotation )
					{
						// Function call
						a[i] = a[i].replace(__reFn, '');
						data = data[ a[i] ]( val );
					}
	
					// If the nested object doesn't currently exist - since we are
					// trying to set the value - create it
					if ( data[ a[i] ] === null || data[ a[i] ] === undefined )
					{
						data[ a[i] ] = {};
					}
					data = data[ a[i] ];
				}
	
				// Last item in the input - i.e, the actual set
				if ( aLast.match(__reFn ) )
				{
					// Function call
					data = data[ aLast.replace(__reFn, '') ]( val );
				}
				else
				{
					// If array notation is used, we just want to strip it and use the property name
					// and assign the value. If it isn't used, then we get the result we want anyway
					data[ aLast.replace(__reArray, '') ] = val;
				}
			};
	
			return function (data, val) { // meta is also passed in, but not used
				return setData( data, val, mSource );
			};
		}
		else
		{
			/* Array or flat object mapping */
			return function (data, val) { // meta is also passed in, but not used
				data[mSource] = val;
			};
		}
	}
	
	
	/**
	 * Return an array with the full table data
	 *  @param {object} oSettings dataTables settings object
	 *  @returns array {array} aData Master data array
	 *  @memberof DataTable#oApi
	 */
	function _fnGetDataMaster ( settings )
	{
		return _pluck( settings.aoData, '_aData' );
	}
	
	
	/**
	 * Nuke the table
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnClearTable( settings )
	{
		settings.aoData.length = 0;
		settings.aiDisplayMaster.length = 0;
		settings.aiDisplay.length = 0;
		settings.aIds = {};
	}
	
	
	 /**
	 * Take an array of integers (index array) and remove a target integer (value - not
	 * the key!)
	 *  @param {array} a Index array to target
	 *  @param {int} iTarget value to find
	 *  @memberof DataTable#oApi
	 */
	function _fnDeleteIndex( a, iTarget, splice )
	{
		var iTargetIndex = -1;
	
		for ( var i=0, iLen=a.length ; i<iLen ; i++ )
		{
			if ( a[i] == iTarget )
			{
				iTargetIndex = i;
			}
			else if ( a[i] > iTarget )
			{
				a[i]--;
			}
		}
	
		if ( iTargetIndex != -1 && splice === undefined )
		{
			a.splice( iTargetIndex, 1 );
		}
	}
	
	
	/**
	 * Mark cached data as invalid such that a re-read of the data will occur when
	 * the cached data is next requested. Also update from the data source object.
	 *
	 * @param {object} settings DataTables settings object
	 * @param {int}    rowIdx   Row index to invalidate
	 * @param {string} [src]    Source to invalidate from: undefined, 'auto', 'dom'
	 *     or 'data'
	 * @param {int}    [colIdx] Column index to invalidate. If undefined the whole
	 *     row will be invalidated
	 * @memberof DataTable#oApi
	 *
	 * @todo For the modularisation of v1.11 this will need to become a callback, so
	 *   the sort and filter methods can subscribe to it. That will required
	 *   initialisation options for sorting, which is why it is not already baked in
	 */
	function _fnInvalidate( settings, rowIdx, src, colIdx )
	{
		var row = settings.aoData[ rowIdx ];
		var i, ien;
		var cellWrite = function ( cell, col ) {
			// This is very frustrating, but in IE if you just write directly
			// to innerHTML, and elements that are overwritten are GC'ed,
			// even if there is a reference to them elsewhere
			while ( cell.childNodes.length ) {
				cell.removeChild( cell.firstChild );
			}
	
			cell.innerHTML = _fnGetCellData( settings, rowIdx, col, 'display' );
		};
	
		// Are we reading last data from DOM or the data object?
		if ( src === 'dom' || ((! src || src === 'auto') && row.src === 'dom') ) {
			// Read the data from the DOM
			row._aData = _fnGetRowElements(
					settings, row, colIdx, colIdx === undefined ? undefined : row._aData
				)
				.data;
		}
		else {
			// Reading from data object, update the DOM
			var cells = row.anCells;
	
			if ( cells ) {
				if ( colIdx !== undefined ) {
					cellWrite( cells[colIdx], colIdx );
				}
				else {
					for ( i=0, ien=cells.length ; i<ien ; i++ ) {
						cellWrite( cells[i], i );
					}
				}
			}
		}
	
		// For both row and cell invalidation, the cached data for sorting and
		// filtering is nulled out
		row._aSortData = null;
		row._aFilterData = null;
	
		// Invalidate the type for a specific column (if given) or all columns since
		// the data might have changed
		var cols = settings.aoColumns;
		if ( colIdx !== undefined ) {
			cols[ colIdx ].sType = null;
		}
		else {
			for ( i=0, ien=cols.length ; i<ien ; i++ ) {
				cols[i].sType = null;
			}
	
			// Update DataTables special `DT_*` attributes for the row
			_fnRowAttributes( settings, row );
		}
	}
	
	
	/**
	 * Build a data source object from an HTML row, reading the contents of the
	 * cells that are in the row.
	 *
	 * @param {object} settings DataTables settings object
	 * @param {node|object} TR element from which to read data or existing row
	 *   object from which to re-read the data from the cells
	 * @param {int} [colIdx] Optional column index
	 * @param {array|object} [d] Data source object. If `colIdx` is given then this
	 *   parameter should also be given and will be used to write the data into.
	 *   Only the column in question will be written
	 * @returns {object} Object with two parameters: `data` the data read, in
	 *   document order, and `cells` and array of nodes (they can be useful to the
	 *   caller, so rather than needing a second traversal to get them, just return
	 *   them from here).
	 * @memberof DataTable#oApi
	 */
	function _fnGetRowElements( settings, row, colIdx, d )
	{
		var
			tds = [],
			td = row.firstChild,
			name, col, o, i=0, contents,
			columns = settings.aoColumns,
			objectRead = settings._rowReadObject;
	
		// Allow the data object to be passed in, or construct
		d = d !== undefined ?
			d :
			objectRead ?
				{} :
				[];
	
		var attr = function ( str, td  ) {
			if ( typeof str === 'string' ) {
				var idx = str.indexOf('@');
	
				if ( idx !== -1 ) {
					var attr = str.substring( idx+1 );
					var setter = _fnSetObjectDataFn( str );
					setter( d, td.getAttribute( attr ) );
				}
			}
		};
	
		// Read data from a cell and store into the data object
		var cellProcess = function ( cell ) {
			if ( colIdx === undefined || colIdx === i ) {
				col = columns[i];
				contents = $.trim(cell.innerHTML);
	
				if ( col && col._bAttrSrc ) {
					var setter = _fnSetObjectDataFn( col.mData._ );
					setter( d, contents );
	
					attr( col.mData.sort, cell );
					attr( col.mData.type, cell );
					attr( col.mData.filter, cell );
				}
				else {
					// Depending on the `data` option for the columns the data can
					// be read to either an object or an array.
					if ( objectRead ) {
						if ( ! col._setter ) {
							// Cache the setter function
							col._setter = _fnSetObjectDataFn( col.mData );
						}
						col._setter( d, contents );
					}
					else {
						d[i] = contents;
					}
				}
			}
	
			i++;
		};
	
		if ( td ) {
			// `tr` element was passed in
			while ( td ) {
				name = td.nodeName.toUpperCase();
	
				if ( name == "TD" || name == "TH" ) {
					cellProcess( td );
					tds.push( td );
				}
	
				td = td.nextSibling;
			}
		}
		else {
			// Existing row object passed in
			tds = row.anCells;
	
			for ( var j=0, jen=tds.length ; j<jen ; j++ ) {
				cellProcess( tds[j] );
			}
		}
	
		// Read the ID from the DOM if present
		var rowNode = row.firstChild ? row : row.nTr;
	
		if ( rowNode ) {
			var id = rowNode.getAttribute( 'id' );
	
			if ( id ) {
				_fnSetObjectDataFn( settings.rowId )( d, id );
			}
		}
	
		return {
			data: d,
			cells: tds
		};
	}
	/**
	 * Create a new TR element (and it's TD children) for a row
	 *  @param {object} oSettings dataTables settings object
	 *  @param {int} iRow Row to consider
	 *  @param {node} [nTrIn] TR element to add to the table - optional. If not given,
	 *    DataTables will create a row automatically
	 *  @param {array} [anTds] Array of TD|TH elements for the row - must be given
	 *    if nTr is.
	 *  @memberof DataTable#oApi
	 */
	function _fnCreateTr ( oSettings, iRow, nTrIn, anTds )
	{
		var
			row = oSettings.aoData[iRow],
			rowData = row._aData,
			cells = [],
			nTr, nTd, oCol,
			i, iLen;
	
		if ( row.nTr === null )
		{
			nTr = nTrIn || document.createElement('tr');
	
			row.nTr = nTr;
			row.anCells = cells;
	
			/* Use a private property on the node to allow reserve mapping from the node
			 * to the aoData array for fast look up
			 */
			nTr._DT_RowIndex = iRow;
	
			/* Special parameters can be given by the data source to be used on the row */
			_fnRowAttributes( oSettings, row );
	
			/* Process each column */
			for ( i=0, iLen=oSettings.aoColumns.length ; i<iLen ; i++ )
			{
				oCol = oSettings.aoColumns[i];
	
				nTd = nTrIn ? anTds[i] : document.createElement( oCol.sCellType );
				nTd._DT_CellIndex = {
					row: iRow,
					column: i
				};
				
				cells.push( nTd );
	
				// Need to create the HTML if new, or if a rendering function is defined
				if ( (!nTrIn || oCol.mRender || oCol.mData !== i) &&
					 (!$.isPlainObject(oCol.mData) || oCol.mData._ !== i+'.display')
				) {
					nTd.innerHTML = _fnGetCellData( oSettings, iRow, i, 'display' );
				}
	
				/* Add user defined class */
				if ( oCol.sClass )
				{
					nTd.className += ' '+oCol.sClass;
				}
	
				// Visibility - add or remove as required
				if ( oCol.bVisible && ! nTrIn )
				{
					nTr.appendChild( nTd );
				}
				else if ( ! oCol.bVisible && nTrIn )
				{
					nTd.parentNode.removeChild( nTd );
				}
	
				if ( oCol.fnCreatedCell )
				{
					oCol.fnCreatedCell.call( oSettings.oInstance,
						nTd, _fnGetCellData( oSettings, iRow, i ), rowData, iRow, i
					);
				}
			}
	
			_fnCallbackFire( oSettings, 'aoRowCreatedCallback', null, [nTr, rowData, iRow] );
		}
	
		// Remove once webkit bug 131819 and Chromium bug 365619 have been resolved
		// and deployed
		row.nTr.setAttribute( 'role', 'row' );
	}
	
	
	/**
	 * Add attributes to a row based on the special `DT_*` parameters in a data
	 * source object.
	 *  @param {object} settings DataTables settings object
	 *  @param {object} DataTables row object for the row to be modified
	 *  @memberof DataTable#oApi
	 */
	function _fnRowAttributes( settings, row )
	{
		var tr = row.nTr;
		var data = row._aData;
	
		if ( tr ) {
			var id = settings.rowIdFn( data );
	
			if ( id ) {
				tr.id = id;
			}
	
			if ( data.DT_RowClass ) {
				// Remove any classes added by DT_RowClass before
				var a = data.DT_RowClass.split(' ');
				row.__rowc = row.__rowc ?
					_unique( row.__rowc.concat( a ) ) :
					a;
	
				$(tr)
					.removeClass( row.__rowc.join(' ') )
					.addClass( data.DT_RowClass );
			}
	
			if ( data.DT_RowAttr ) {
				$(tr).attr( data.DT_RowAttr );
			}
	
			if ( data.DT_RowData ) {
				$(tr).data( data.DT_RowData );
			}
		}
	}
	
	
	/**
	 * Create the HTML header for the table
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnBuildHead( oSettings )
	{
		var i, ien, cell, row, column;
		var thead = oSettings.nTHead;
		var tfoot = oSettings.nTFoot;
		var createHeader = $('th, td', thead).length === 0;
		var classes = oSettings.oClasses;
		var columns = oSettings.aoColumns;
	
		if ( createHeader ) {
			row = $('<tr/>').appendTo( thead );
		}
	
		for ( i=0, ien=columns.length ; i<ien ; i++ ) {
			column = columns[i];
			cell = $( column.nTh ).addClass( column.sClass );
	
			if ( createHeader ) {
				cell.appendTo( row );
			}
	
			// 1.11 move into sorting
			if ( oSettings.oFeatures.bSort ) {
				cell.addClass( column.sSortingClass );
	
				if ( column.bSortable !== false ) {
					cell
						.attr( 'tabindex', oSettings.iTabIndex )
						.attr( 'aria-controls', oSettings.sTableId );
	
					_fnSortAttachListener( oSettings, column.nTh, i );
				}
			}
	
			if ( column.sTitle != cell[0].innerHTML ) {
				cell.html( column.sTitle );
			}
	
			_fnRenderer( oSettings, 'header' )(
				oSettings, cell, column, classes
			);
		}
	
		if ( createHeader ) {
			_fnDetectHeader( oSettings.aoHeader, thead );
		}
		
		/* ARIA role for the rows */
	 	$(thead).find('>tr').attr('role', 'row');
	
		/* Deal with the footer - add classes if required */
		$(thead).find('>tr>th, >tr>td').addClass( classes.sHeaderTH );
		$(tfoot).find('>tr>th, >tr>td').addClass( classes.sFooterTH );
	
		// Cache the footer cells. Note that we only take the cells from the first
		// row in the footer. If there is more than one row the user wants to
		// interact with, they need to use the table().foot() method. Note also this
		// allows cells to be used for multiple columns using colspan
		if ( tfoot !== null ) {
			var cells = oSettings.aoFooter[0];
	
			for ( i=0, ien=cells.length ; i<ien ; i++ ) {
				column = columns[i];
				column.nTf = cells[i].cell;
	
				if ( column.sClass ) {
					$(column.nTf).addClass( column.sClass );
				}
			}
		}
	}
	
	
	/**
	 * Draw the header (or footer) element based on the column visibility states. The
	 * methodology here is to use the layout array from _fnDetectHeader, modified for
	 * the instantaneous column visibility, to construct the new layout. The grid is
	 * traversed over cell at a time in a rows x columns grid fashion, although each
	 * cell insert can cover multiple elements in the grid - which is tracks using the
	 * aApplied array. Cell inserts in the grid will only occur where there isn't
	 * already a cell in that position.
	 *  @param {object} oSettings dataTables settings object
	 *  @param array {objects} aoSource Layout array from _fnDetectHeader
	 *  @param {boolean} [bIncludeHidden=false] If true then include the hidden columns in the calc,
	 *  @memberof DataTable#oApi
	 */
	function _fnDrawHead( oSettings, aoSource, bIncludeHidden )
	{
		var i, iLen, j, jLen, k, kLen, n, nLocalTr;
		var aoLocal = [];
		var aApplied = [];
		var iColumns = oSettings.aoColumns.length;
		var iRowspan, iColspan;
	
		if ( ! aoSource )
		{
			return;
		}
	
		if (  bIncludeHidden === undefined )
		{
			bIncludeHidden = false;
		}
	
		/* Make a copy of the master layout array, but without the visible columns in it */
		for ( i=0, iLen=aoSource.length ; i<iLen ; i++ )
		{
			aoLocal[i] = aoSource[i].slice();
			aoLocal[i].nTr = aoSource[i].nTr;
	
			/* Remove any columns which are currently hidden */
			for ( j=iColumns-1 ; j>=0 ; j-- )
			{
				if ( !oSettings.aoColumns[j].bVisible && !bIncludeHidden )
				{
					aoLocal[i].splice( j, 1 );
				}
			}
	
			/* Prep the applied array - it needs an element for each row */
			aApplied.push( [] );
		}
	
		for ( i=0, iLen=aoLocal.length ; i<iLen ; i++ )
		{
			nLocalTr = aoLocal[i].nTr;
	
			/* All cells are going to be replaced, so empty out the row */
			if ( nLocalTr )
			{
				while( (n = nLocalTr.firstChild) )
				{
					nLocalTr.removeChild( n );
				}
			}
	
			for ( j=0, jLen=aoLocal[i].length ; j<jLen ; j++ )
			{
				iRowspan = 1;
				iColspan = 1;
	
				/* Check to see if there is already a cell (row/colspan) covering our target
				 * insert point. If there is, then there is nothing to do.
				 */
				if ( aApplied[i][j] === undefined )
				{
					nLocalTr.appendChild( aoLocal[i][j].cell );
					aApplied[i][j] = 1;
	
					/* Expand the cell to cover as many rows as needed */
					while ( aoLocal[i+iRowspan] !== undefined &&
					        aoLocal[i][j].cell == aoLocal[i+iRowspan][j].cell )
					{
						aApplied[i+iRowspan][j] = 1;
						iRowspan++;
					}
	
					/* Expand the cell to cover as many columns as needed */
					while ( aoLocal[i][j+iColspan] !== undefined &&
					        aoLocal[i][j].cell == aoLocal[i][j+iColspan].cell )
					{
						/* Must update the applied array over the rows for the columns */
						for ( k=0 ; k<iRowspan ; k++ )
						{
							aApplied[i+k][j+iColspan] = 1;
						}
						iColspan++;
					}
	
					/* Do the actual expansion in the DOM */
					$(aoLocal[i][j].cell)
						.attr('rowspan', iRowspan)
						.attr('colspan', iColspan);
				}
			}
		}
	}
	
	
	/**
	 * Insert the required TR nodes into the table for display
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnDraw( oSettings )
	{
		/* Provide a pre-callback function which can be used to cancel the draw is false is returned */
		var aPreDraw = _fnCallbackFire( oSettings, 'aoPreDrawCallback', 'preDraw', [oSettings] );
		if ( $.inArray( false, aPreDraw ) !== -1 )
		{
			_fnProcessingDisplay( oSettings, false );
			return;
		}
	
		var i, iLen, n;
		var anRows = [];
		var iRowCount = 0;
		var asStripeClasses = oSettings.asStripeClasses;
		var iStripes = asStripeClasses.length;
		var iOpenRows = oSettings.aoOpenRows.length;
		var oLang = oSettings.oLanguage;
		var iInitDisplayStart = oSettings.iInitDisplayStart;
		var bServerSide = _fnDataSource( oSettings ) == 'ssp';
		var aiDisplay = oSettings.aiDisplay;
	
		oSettings.bDrawing = true;
	
		/* Check and see if we have an initial draw position from state saving */
		if ( iInitDisplayStart !== undefined && iInitDisplayStart !== -1 )
		{
			oSettings._iDisplayStart = bServerSide ?
				iInitDisplayStart :
				iInitDisplayStart >= oSettings.fnRecordsDisplay() ?
					0 :
					iInitDisplayStart;
	
			oSettings.iInitDisplayStart = -1;
		}
	
		var iDisplayStart = oSettings._iDisplayStart;
		var iDisplayEnd = oSettings.fnDisplayEnd();
	
		/* Server-side processing draw intercept */
		if ( oSettings.bDeferLoading )
		{
			oSettings.bDeferLoading = false;
			oSettings.iDraw++;
			_fnProcessingDisplay( oSettings, false );
		}
		else if ( !bServerSide )
		{
			oSettings.iDraw++;
		}
		else if ( !oSettings.bDestroying && !_fnAjaxUpdate( oSettings ) )
		{
			return;
		}
	
		if ( aiDisplay.length !== 0 )
		{
			var iStart = bServerSide ? 0 : iDisplayStart;
			var iEnd = bServerSide ? oSettings.aoData.length : iDisplayEnd;
	
			for ( var j=iStart ; j<iEnd ; j++ )
			{
				var iDataIndex = aiDisplay[j];
				var aoData = oSettings.aoData[ iDataIndex ];
				if ( aoData.nTr === null )
				{
					_fnCreateTr( oSettings, iDataIndex );
				}
	
				var nRow = aoData.nTr;
	
				/* Remove the old striping classes and then add the new one */
				if ( iStripes !== 0 )
				{
					var sStripe = asStripeClasses[ iRowCount % iStripes ];
					if ( aoData._sRowStripe != sStripe )
					{
						$(nRow).removeClass( aoData._sRowStripe ).addClass( sStripe );
						aoData._sRowStripe = sStripe;
					}
				}
	
				// Row callback functions - might want to manipulate the row
				// iRowCount and j are not currently documented. Are they at all
				// useful?
				_fnCallbackFire( oSettings, 'aoRowCallback', null,
					[nRow, aoData._aData, iRowCount, j] );
	
				anRows.push( nRow );
				iRowCount++;
			}
		}
		else
		{
			/* Table is empty - create a row with an empty message in it */
			var sZero = oLang.sZeroRecords;
			if ( oSettings.iDraw == 1 &&  _fnDataSource( oSettings ) == 'ajax' )
			{
				sZero = oLang.sLoadingRecords;
			}
			else if ( oLang.sEmptyTable && oSettings.fnRecordsTotal() === 0 )
			{
				sZero = oLang.sEmptyTable;
			}
	
			anRows[ 0 ] = $( '<tr/>', { 'class': iStripes ? asStripeClasses[0] : '' } )
				.append( $('<td />', {
					'valign':  'top',
					'colSpan': _fnVisbleColumns( oSettings ),
					'class':   oSettings.oClasses.sRowEmpty
				} ).html( sZero ) )[0];
		}
	
		/* Header and footer callbacks */
		_fnCallbackFire( oSettings, 'aoHeaderCallback', 'header', [ $(oSettings.nTHead).children('tr')[0],
			_fnGetDataMaster( oSettings ), iDisplayStart, iDisplayEnd, aiDisplay ] );
	
		_fnCallbackFire( oSettings, 'aoFooterCallback', 'footer', [ $(oSettings.nTFoot).children('tr')[0],
			_fnGetDataMaster( oSettings ), iDisplayStart, iDisplayEnd, aiDisplay ] );
	
		var body = $(oSettings.nTBody);
	
		body.children().detach();
		body.append( $(anRows) );
	
		/* Call all required callback functions for the end of a draw */
		_fnCallbackFire( oSettings, 'aoDrawCallback', 'draw', [oSettings] );
	
		/* Draw is complete, sorting and filtering must be as well */
		oSettings.bSorted = false;
		oSettings.bFiltered = false;
		oSettings.bDrawing = false;
	}
	
	
	/**
	 * Redraw the table - taking account of the various features which are enabled
	 *  @param {object} oSettings dataTables settings object
	 *  @param {boolean} [holdPosition] Keep the current paging position. By default
	 *    the paging is reset to the first page
	 *  @memberof DataTable#oApi
	 */
	function _fnReDraw( settings, holdPosition )
	{
		var
			features = settings.oFeatures,
			sort     = features.bSort,
			filter   = features.bFilter;
	
		if ( sort ) {
			_fnSort( settings );
		}
	
		if ( filter ) {
			_fnFilterComplete( settings, settings.oPreviousSearch );
		}
		else {
			// No filtering, so we want to just use the display master
			settings.aiDisplay = settings.aiDisplayMaster.slice();
		}
	
		if ( holdPosition !== true ) {
			settings._iDisplayStart = 0;
		}
	
		// Let any modules know about the draw hold position state (used by
		// scrolling internally)
		settings._drawHold = holdPosition;
	
		_fnDraw( settings );
	
		settings._drawHold = false;
	}
	
	
	/**
	 * Add the options to the page HTML for the table
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnAddOptionsHtml ( oSettings )
	{
		var classes = oSettings.oClasses;
		var table = $(oSettings.nTable);
		var holding = $('<div/>').insertBefore( table ); // Holding element for speed
		var features = oSettings.oFeatures;
	
		// All DataTables are wrapped in a div
		var insert = $('<div/>', {
			id:      oSettings.sTableId+'_wrapper',
			'class': classes.sWrapper + (oSettings.nTFoot ? '' : ' '+classes.sNoFooter)
		} );
	
		oSettings.nHolding = holding[0];
		oSettings.nTableWrapper = insert[0];
		oSettings.nTableReinsertBefore = oSettings.nTable.nextSibling;
	
		/* Loop over the user set positioning and place the elements as needed */
		var aDom = oSettings.sDom.split('');
		var featureNode, cOption, nNewNode, cNext, sAttr, j;
		for ( var i=0 ; i<aDom.length ; i++ )
		{
			featureNode = null;
			cOption = aDom[i];
	
			if ( cOption == '<' )
			{
				/* New container div */
				nNewNode = $('<div/>')[0];
	
				/* Check to see if we should append an id and/or a class name to the container */
				cNext = aDom[i+1];
				if ( cNext == "'" || cNext == '"' )
				{
					sAttr = "";
					j = 2;
					while ( aDom[i+j] != cNext )
					{
						sAttr += aDom[i+j];
						j++;
					}
	
					/* Replace jQuery UI constants @todo depreciated */
					if ( sAttr == "H" )
					{
						sAttr = classes.sJUIHeader;
					}
					else if ( sAttr == "F" )
					{
						sAttr = classes.sJUIFooter;
					}
	
					/* The attribute can be in the format of "#id.class", "#id" or "class" This logic
					 * breaks the string into parts and applies them as needed
					 */
					if ( sAttr.indexOf('.') != -1 )
					{
						var aSplit = sAttr.split('.');
						nNewNode.id = aSplit[0].substr(1, aSplit[0].length-1);
						nNewNode.className = aSplit[1];
					}
					else if ( sAttr.charAt(0) == "#" )
					{
						nNewNode.id = sAttr.substr(1, sAttr.length-1);
					}
					else
					{
						nNewNode.className = sAttr;
					}
	
					i += j; /* Move along the position array */
				}
	
				insert.append( nNewNode );
				insert = $(nNewNode);
			}
			else if ( cOption == '>' )
			{
				/* End container div */
				insert = insert.parent();
			}
			// @todo Move options into their own plugins?
			else if ( cOption == 'l' && features.bPaginate && features.bLengthChange )
			{
				/* Length */
				featureNode = _fnFeatureHtmlLength( oSettings );
			}
			else if ( cOption == 'f' && features.bFilter )
			{
				/* Filter */
				featureNode = _fnFeatureHtmlFilter( oSettings );
			}
			else if ( cOption == 'r' && features.bProcessing )
			{
				/* pRocessing */
				featureNode = _fnFeatureHtmlProcessing( oSettings );
			}
			else if ( cOption == 't' )
			{
				/* Table */
				featureNode = _fnFeatureHtmlTable( oSettings );
			}
			else if ( cOption ==  'i' && features.bInfo )
			{
				/* Info */
				featureNode = _fnFeatureHtmlInfo( oSettings );
			}
			else if ( cOption == 'p' && features.bPaginate )
			{
				/* Pagination */
				featureNode = _fnFeatureHtmlPaginate( oSettings );
			}
			else if ( DataTable.ext.feature.length !== 0 )
			{
				/* Plug-in features */
				var aoFeatures = DataTable.ext.feature;
				for ( var k=0, kLen=aoFeatures.length ; k<kLen ; k++ )
				{
					if ( cOption == aoFeatures[k].cFeature )
					{
						featureNode = aoFeatures[k].fnInit( oSettings );
						break;
					}
				}
			}
	
			/* Add to the 2D features array */
			if ( featureNode )
			{
				var aanFeatures = oSettings.aanFeatures;
	
				if ( ! aanFeatures[cOption] )
				{
					aanFeatures[cOption] = [];
				}
	
				aanFeatures[cOption].push( featureNode );
				insert.append( featureNode );
			}
		}
	
		/* Built our DOM structure - replace the holding div with what we want */
		holding.replaceWith( insert );
		oSettings.nHolding = null;
	}
	
	
	/**
	 * Use the DOM source to create up an array of header cells. The idea here is to
	 * create a layout grid (array) of rows x columns, which contains a reference
	 * to the cell that that point in the grid (regardless of col/rowspan), such that
	 * any column / row could be removed and the new grid constructed
	 *  @param array {object} aLayout Array to store the calculated layout in
	 *  @param {node} nThead The header/footer element for the table
	 *  @memberof DataTable#oApi
	 */
	function _fnDetectHeader ( aLayout, nThead )
	{
		var nTrs = $(nThead).children('tr');
		var nTr, nCell;
		var i, k, l, iLen, jLen, iColShifted, iColumn, iColspan, iRowspan;
		var bUnique;
		var fnShiftCol = function ( a, i, j ) {
			var k = a[i];
	                while ( k[j] ) {
				j++;
			}
			return j;
		};
	
		aLayout.splice( 0, aLayout.length );
	
		/* We know how many rows there are in the layout - so prep it */
		for ( i=0, iLen=nTrs.length ; i<iLen ; i++ )
		{
			aLayout.push( [] );
		}
	
		/* Calculate a layout array */
		for ( i=0, iLen=nTrs.length ; i<iLen ; i++ )
		{
			nTr = nTrs[i];
			iColumn = 0;
	
			/* For every cell in the row... */
			nCell = nTr.firstChild;
			while ( nCell ) {
				if ( nCell.nodeName.toUpperCase() == "TD" ||
				     nCell.nodeName.toUpperCase() == "TH" )
				{
					/* Get the col and rowspan attributes from the DOM and sanitise them */
					iColspan = nCell.getAttribute('colspan') * 1;
					iRowspan = nCell.getAttribute('rowspan') * 1;
					iColspan = (!iColspan || iColspan===0 || iColspan===1) ? 1 : iColspan;
					iRowspan = (!iRowspan || iRowspan===0 || iRowspan===1) ? 1 : iRowspan;
	
					/* There might be colspan cells already in this row, so shift our target
					 * accordingly
					 */
					iColShifted = fnShiftCol( aLayout, i, iColumn );
	
					/* Cache calculation for unique columns */
					bUnique = iColspan === 1 ? true : false;
	
					/* If there is col / rowspan, copy the information into the layout grid */
					for ( l=0 ; l<iColspan ; l++ )
					{
						for ( k=0 ; k<iRowspan ; k++ )
						{
							aLayout[i+k][iColShifted+l] = {
								"cell": nCell,
								"unique": bUnique
							};
							aLayout[i+k].nTr = nTr;
						}
					}
				}
				nCell = nCell.nextSibling;
			}
		}
	}
	
	
	/**
	 * Get an array of unique th elements, one for each column
	 *  @param {object} oSettings dataTables settings object
	 *  @param {node} nHeader automatically detect the layout from this node - optional
	 *  @param {array} aLayout thead/tfoot layout from _fnDetectHeader - optional
	 *  @returns array {node} aReturn list of unique th's
	 *  @memberof DataTable#oApi
	 */
	function _fnGetUniqueThs ( oSettings, nHeader, aLayout )
	{
		var aReturn = [];
		if ( !aLayout )
		{
			aLayout = oSettings.aoHeader;
			if ( nHeader )
			{
				aLayout = [];
				_fnDetectHeader( aLayout, nHeader );
			}
		}
	
		for ( var i=0, iLen=aLayout.length ; i<iLen ; i++ )
		{
			for ( var j=0, jLen=aLayout[i].length ; j<jLen ; j++ )
			{
				if ( aLayout[i][j].unique &&
					 (!aReturn[j] || !oSettings.bSortCellsTop) )
				{
					aReturn[j] = aLayout[i][j].cell;
				}
			}
		}
	
		return aReturn;
	}
	
	/**
	 * Create an Ajax call based on the table's settings, taking into account that
	 * parameters can have multiple forms, and backwards compatibility.
	 *
	 * @param {object} oSettings dataTables settings object
	 * @param {array} data Data to send to the server, required by
	 *     DataTables - may be augmented by developer callbacks
	 * @param {function} fn Callback function to run when data is obtained
	 */
	function _fnBuildAjax( oSettings, data, fn )
	{
		// Compatibility with 1.9-, allow fnServerData and event to manipulate
		_fnCallbackFire( oSettings, 'aoServerParams', 'serverParams', [data] );
	
		// Convert to object based for 1.10+ if using the old array scheme which can
		// come from server-side processing or serverParams
		if ( data && $.isArray(data) ) {
			var tmp = {};
			var rbracket = /(.*?)\[\]$/;
	
			$.each( data, function (key, val) {
				var match = val.name.match(rbracket);
	
				if ( match ) {
					// Support for arrays
					var name = match[0];
	
					if ( ! tmp[ name ] ) {
						tmp[ name ] = [];
					}
					tmp[ name ].push( val.value );
				}
				else {
					tmp[val.name] = val.value;
				}
			} );
			data = tmp;
		}
	
		var ajaxData;
		var ajax = oSettings.ajax;
		var instance = oSettings.oInstance;
		var callback = function ( json ) {
			_fnCallbackFire( oSettings, null, 'xhr', [oSettings, json, oSettings.jqXHR] );
			fn( json );
		};
	
		if ( $.isPlainObject( ajax ) && ajax.data )
		{
			ajaxData = ajax.data;
	
			var newData = $.isFunction( ajaxData ) ?
				ajaxData( data, oSettings ) :  // fn can manipulate data or return
				ajaxData;                      // an object object or array to merge
	
			// If the function returned something, use that alone
			data = $.isFunction( ajaxData ) && newData ?
				newData :
				$.extend( true, data, newData );
	
			// Remove the data property as we've resolved it already and don't want
			// jQuery to do it again (it is restored at the end of the function)
			delete ajax.data;
		}
	
		var baseAjax = {
			"data": data,
			"success": function (json) {
				var error = json.error || json.sError;
				if ( error ) {
					_fnLog( oSettings, 0, error );
				}
	
				oSettings.json = json;
				callback( json );
			},
			"dataType": "json",
			"cache": false,
			"type": oSettings.sServerMethod,
			"error": function (xhr, error, thrown) {
				var ret = _fnCallbackFire( oSettings, null, 'xhr', [oSettings, null, oSettings.jqXHR] );
	
				if ( $.inArray( true, ret ) === -1 ) {
					if ( error == "parsererror" ) {
						_fnLog( oSettings, 0, 'Invalid JSON response', 1 );
					}
					else if ( xhr.readyState === 4 ) {
						_fnLog( oSettings, 0, 'Ajax error', 7 );
					}
				}
	
				_fnProcessingDisplay( oSettings, false );
			}
		};
	
		// Store the data submitted for the API
		oSettings.oAjaxData = data;
	
		// Allow plug-ins and external processes to modify the data
		_fnCallbackFire( oSettings, null, 'preXhr', [oSettings, data] );
	
		if ( oSettings.fnServerData )
		{
			// DataTables 1.9- compatibility
			oSettings.fnServerData.call( instance,
				oSettings.sAjaxSource,
				$.map( data, function (val, key) { // Need to convert back to 1.9 trad format
					return { name: key, value: val };
				} ),
				callback,
				oSettings
			);
		}
		else if ( oSettings.sAjaxSource || typeof ajax === 'string' )
		{
			// DataTables 1.9- compatibility
			oSettings.jqXHR = $.ajax( $.extend( baseAjax, {
				url: ajax || oSettings.sAjaxSource
			} ) );
		}
		else if ( $.isFunction( ajax ) )
		{
			// Is a function - let the caller define what needs to be done
			oSettings.jqXHR = ajax.call( instance, data, callback, oSettings );
		}
		else
		{
			// Object to extend the base settings
			oSettings.jqXHR = $.ajax( $.extend( baseAjax, ajax ) );
	
			// Restore for next time around
			ajax.data = ajaxData;
		}
	}
	
	
	/**
	 * Update the table using an Ajax call
	 *  @param {object} settings dataTables settings object
	 *  @returns {boolean} Block the table drawing or not
	 *  @memberof DataTable#oApi
	 */
	function _fnAjaxUpdate( settings )
	{
		if ( settings.bAjaxDataGet ) {
			settings.iDraw++;
			_fnProcessingDisplay( settings, true );
	
			_fnBuildAjax(
				settings,
				_fnAjaxParameters( settings ),
				function(json) {
					_fnAjaxUpdateDraw( settings, json );
				}
			);
	
			return false;
		}
		return true;
	}
	
	
	/**
	 * Build up the parameters in an object needed for a server-side processing
	 * request. Note that this is basically done twice, is different ways - a modern
	 * method which is used by default in DataTables 1.10 which uses objects and
	 * arrays, or the 1.9- method with is name / value pairs. 1.9 method is used if
	 * the sAjaxSource option is used in the initialisation, or the legacyAjax
	 * option is set.
	 *  @param {object} oSettings dataTables settings object
	 *  @returns {bool} block the table drawing or not
	 *  @memberof DataTable#oApi
	 */
	function _fnAjaxParameters( settings )
	{
		var
			columns = settings.aoColumns,
			columnCount = columns.length,
			features = settings.oFeatures,
			preSearch = settings.oPreviousSearch,
			preColSearch = settings.aoPreSearchCols,
			i, data = [], dataProp, column, columnSearch,
			sort = _fnSortFlatten( settings ),
			displayStart = settings._iDisplayStart,
			displayLength = features.bPaginate !== false ?
				settings._iDisplayLength :
				-1;
	
		var param = function ( name, value ) {
			data.push( { 'name': name, 'value': value } );
		};
	
		// DataTables 1.9- compatible method
		param( 'sEcho',          settings.iDraw );
		param( 'iColumns',       columnCount );
		param( 'sColumns',       _pluck( columns, 'sName' ).join(',') );
		param( 'iDisplayStart',  displayStart );
		param( 'iDisplayLength', displayLength );
	
		// DataTables 1.10+ method
		var d = {
			draw:    settings.iDraw,
			columns: [],
			order:   [],
			start:   displayStart,
			length:  displayLength,
			search:  {
				value: preSearch.sSearch,
				regex: preSearch.bRegex
			}
		};
	
		for ( i=0 ; i<columnCount ; i++ ) {
			column = columns[i];
			columnSearch = preColSearch[i];
			dataProp = typeof column.mData=="function" ? 'function' : column.mData ;
	
			d.columns.push( {
				data:       dataProp,
				name:       column.sName,
				searchable: column.bSearchable,
				orderable:  column.bSortable,
				search:     {
					value: columnSearch.sSearch,
					regex: columnSearch.bRegex
				}
			} );
	
			param( "mDataProp_"+i, dataProp );
	
			if ( features.bFilter ) {
				param( 'sSearch_'+i,     columnSearch.sSearch );
				param( 'bRegex_'+i,      columnSearch.bRegex );
				param( 'bSearchable_'+i, column.bSearchable );
			}
	
			if ( features.bSort ) {
				param( 'bSortable_'+i, column.bSortable );
			}
		}
	
		if ( features.bFilter ) {
			param( 'sSearch', preSearch.sSearch );
			param( 'bRegex', preSearch.bRegex );
		}
	
		if ( features.bSort ) {
			$.each( sort, function ( i, val ) {
				d.order.push( { column: val.col, dir: val.dir } );
	
				param( 'iSortCol_'+i, val.col );
				param( 'sSortDir_'+i, val.dir );
			} );
	
			param( 'iSortingCols', sort.length );
		}
	
		// If the legacy.ajax parameter is null, then we automatically decide which
		// form to use, based on sAjaxSource
		var legacy = DataTable.ext.legacy.ajax;
		if ( legacy === null ) {
			return settings.sAjaxSource ? data : d;
		}
	
		// Otherwise, if legacy has been specified then we use that to decide on the
		// form
		return legacy ? data : d;
	}
	
	
	/**
	 * Data the data from the server (nuking the old) and redraw the table
	 *  @param {object} oSettings dataTables settings object
	 *  @param {object} json json data return from the server.
	 *  @param {string} json.sEcho Tracking flag for DataTables to match requests
	 *  @param {int} json.iTotalRecords Number of records in the data set, not accounting for filtering
	 *  @param {int} json.iTotalDisplayRecords Number of records in the data set, accounting for filtering
	 *  @param {array} json.aaData The data to display on this page
	 *  @param {string} [json.sColumns] Column ordering (sName, comma separated)
	 *  @memberof DataTable#oApi
	 */
	function _fnAjaxUpdateDraw ( settings, json )
	{
		// v1.10 uses camelCase variables, while 1.9 uses Hungarian notation.
		// Support both
		var compat = function ( old, modern ) {
			return json[old] !== undefined ? json[old] : json[modern];
		};
	
		var data = _fnAjaxDataSrc( settings, json );
		var draw            = compat( 'sEcho',                'draw' );
		var recordsTotal    = compat( 'iTotalRecords',        'recordsTotal' );
		var recordsFiltered = compat( 'iTotalDisplayRecords', 'recordsFiltered' );
	
		if ( draw ) {
			// Protect against out of sequence returns
			if ( draw*1 < settings.iDraw ) {
				return;
			}
			settings.iDraw = draw * 1;
		}
	
		_fnClearTable( settings );
		settings._iRecordsTotal   = parseInt(recordsTotal, 10);
		settings._iRecordsDisplay = parseInt(recordsFiltered, 10);
	
		for ( var i=0, ien=data.length ; i<ien ; i++ ) {
			_fnAddData( settings, data[i] );
		}
		settings.aiDisplay = settings.aiDisplayMaster.slice();
	
		settings.bAjaxDataGet = false;
		_fnDraw( settings );
	
		if ( ! settings._bInitComplete ) {
			_fnInitComplete( settings, json );
		}
	
		settings.bAjaxDataGet = true;
		_fnProcessingDisplay( settings, false );
	}
	
	
	/**
	 * Get the data from the JSON data source to use for drawing a table. Using
	 * `_fnGetObjectDataFn` allows the data to be sourced from a property of the
	 * source object, or from a processing function.
	 *  @param {object} oSettings dataTables settings object
	 *  @param  {object} json Data source object / array from the server
	 *  @return {array} Array of data to use
	 */
	function _fnAjaxDataSrc ( oSettings, json )
	{
		var dataSrc = $.isPlainObject( oSettings.ajax ) && oSettings.ajax.dataSrc !== undefined ?
			oSettings.ajax.dataSrc :
			oSettings.sAjaxDataProp; // Compatibility with 1.9-.
	
		// Compatibility with 1.9-. In order to read from aaData, check if the
		// default has been changed, if not, check for aaData
		if ( dataSrc === 'data' ) {
			return json.aaData || json[dataSrc];
		}
	
		return dataSrc !== "" ?
			_fnGetObjectDataFn( dataSrc )( json ) :
			json;
	}
	
	/**
	 * Generate the node required for filtering text
	 *  @returns {node} Filter control element
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnFeatureHtmlFilter ( settings )
	{
		var classes = settings.oClasses;
		var tableId = settings.sTableId;
		var language = settings.oLanguage;
		var previousSearch = settings.oPreviousSearch;
		var features = settings.aanFeatures;
		var input = '<input type="search" class="'+classes.sFilterInput+'"/>';
	
		var str = language.sSearch;
		str = str.match(/_INPUT_/) ?
			str.replace('_INPUT_', input) :
			str+input;
	
		var filter = $('<div/>', {
				'id': ! features.f ? tableId+'_filter' : null,
				'class': classes.sFilter
			} )
			.append( $('<label/>' ).append( str ) );
	
		var searchFn = function() {
			/* Update all other filter input elements for the new display */
			var n = features.f;
			var val = !this.value ? "" : this.value; // mental IE8 fix :-(
	
			/* Now do the filter */
			if ( val != previousSearch.sSearch ) {
				_fnFilterComplete( settings, {
					"sSearch": val,
					"bRegex": previousSearch.bRegex,
					"bSmart": previousSearch.bSmart ,
					"bCaseInsensitive": previousSearch.bCaseInsensitive
				} );
	
				// Need to redraw, without resorting
				settings._iDisplayStart = 0;
				_fnDraw( settings );
			}
		};
	
		var searchDelay = settings.searchDelay !== null ?
			settings.searchDelay :
			_fnDataSource( settings ) === 'ssp' ?
				400 :
				0;
	
		var jqFilter = $('input', filter)
			.val( previousSearch.sSearch )
			.attr( 'placeholder', language.sSearchPlaceholder )
			.on(
				'keyup.DT search.DT input.DT paste.DT cut.DT',
				searchDelay ?
					_fnThrottle( searchFn, searchDelay ) :
					searchFn
			)
			.on( 'keypress.DT', function(e) {
				/* Prevent form submission */
				if ( e.keyCode == 13 ) {
					return false;
				}
			} )
			.attr('aria-controls', tableId);
	
		// Update the input elements whenever the table is filtered
		$(settings.nTable).on( 'search.dt.DT', function ( ev, s ) {
			if ( settings === s ) {
				// IE9 throws an 'unknown error' if document.activeElement is used
				// inside an iframe or frame...
				try {
					if ( jqFilter[0] !== document.activeElement ) {
						jqFilter.val( previousSearch.sSearch );
					}
				}
				catch ( e ) {}
			}
		} );
	
		return filter[0];
	}
	
	
	/**
	 * Filter the table using both the global filter and column based filtering
	 *  @param {object} oSettings dataTables settings object
	 *  @param {object} oSearch search information
	 *  @param {int} [iForce] force a research of the master array (1) or not (undefined or 0)
	 *  @memberof DataTable#oApi
	 */
	function _fnFilterComplete ( oSettings, oInput, iForce )
	{
		var oPrevSearch = oSettings.oPreviousSearch;
		var aoPrevSearch = oSettings.aoPreSearchCols;
		var fnSaveFilter = function ( oFilter ) {
			/* Save the filtering values */
			oPrevSearch.sSearch = oFilter.sSearch;
			oPrevSearch.bRegex = oFilter.bRegex;
			oPrevSearch.bSmart = oFilter.bSmart;
			oPrevSearch.bCaseInsensitive = oFilter.bCaseInsensitive;
		};
		var fnRegex = function ( o ) {
			// Backwards compatibility with the bEscapeRegex option
			return o.bEscapeRegex !== undefined ? !o.bEscapeRegex : o.bRegex;
		};
	
		// Resolve any column types that are unknown due to addition or invalidation
		// @todo As per sort - can this be moved into an event handler?
		_fnColumnTypes( oSettings );
	
		/* In server-side processing all filtering is done by the server, so no point hanging around here */
		if ( _fnDataSource( oSettings ) != 'ssp' )
		{
			/* Global filter */
			_fnFilter( oSettings, oInput.sSearch, iForce, fnRegex(oInput), oInput.bSmart, oInput.bCaseInsensitive );
			fnSaveFilter( oInput );
	
			/* Now do the individual column filter */
			for ( var i=0 ; i<aoPrevSearch.length ; i++ )
			{
				_fnFilterColumn( oSettings, aoPrevSearch[i].sSearch, i, fnRegex(aoPrevSearch[i]),
					aoPrevSearch[i].bSmart, aoPrevSearch[i].bCaseInsensitive );
			}
	
			/* Custom filtering */
			_fnFilterCustom( oSettings );
		}
		else
		{
			fnSaveFilter( oInput );
		}
	
		/* Tell the draw function we have been filtering */
		oSettings.bFiltered = true;
		_fnCallbackFire( oSettings, null, 'search', [oSettings] );
	}
	
	
	/**
	 * Apply custom filtering functions
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnFilterCustom( settings )
	{
		var filters = DataTable.ext.search;
		var displayRows = settings.aiDisplay;
		var row, rowIdx;
	
		for ( var i=0, ien=filters.length ; i<ien ; i++ ) {
			var rows = [];
	
			// Loop over each row and see if it should be included
			for ( var j=0, jen=displayRows.length ; j<jen ; j++ ) {
				rowIdx = displayRows[ j ];
				row = settings.aoData[ rowIdx ];
	
				if ( filters[i]( settings, row._aFilterData, rowIdx, row._aData, j ) ) {
					rows.push( rowIdx );
				}
			}
	
			// So the array reference doesn't break set the results into the
			// existing array
			displayRows.length = 0;
			$.merge( displayRows, rows );
		}
	}
	
	
	/**
	 * Filter the table on a per-column basis
	 *  @param {object} oSettings dataTables settings object
	 *  @param {string} sInput string to filter on
	 *  @param {int} iColumn column to filter
	 *  @param {bool} bRegex treat search string as a regular expression or not
	 *  @param {bool} bSmart use smart filtering or not
	 *  @param {bool} bCaseInsensitive Do case insenstive matching or not
	 *  @memberof DataTable#oApi
	 */
	function _fnFilterColumn ( settings, searchStr, colIdx, regex, smart, caseInsensitive )
	{
		if ( searchStr === '' ) {
			return;
		}
	
		var data;
		var out = [];
		var display = settings.aiDisplay;
		var rpSearch = _fnFilterCreateSearch( searchStr, regex, smart, caseInsensitive );
	
		for ( var i=0 ; i<display.length ; i++ ) {
			data = settings.aoData[ display[i] ]._aFilterData[ colIdx ];
	
			if ( rpSearch.test( data ) ) {
				out.push( display[i] );
			}
		}
	
		settings.aiDisplay = out;
	}
	
	
	/**
	 * Filter the data table based on user input and draw the table
	 *  @param {object} settings dataTables settings object
	 *  @param {string} input string to filter on
	 *  @param {int} force optional - force a research of the master array (1) or not (undefined or 0)
	 *  @param {bool} regex treat as a regular expression or not
	 *  @param {bool} smart perform smart filtering or not
	 *  @param {bool} caseInsensitive Do case insenstive matching or not
	 *  @memberof DataTable#oApi
	 */
	function _fnFilter( settings, input, force, regex, smart, caseInsensitive )
	{
		var rpSearch = _fnFilterCreateSearch( input, regex, smart, caseInsensitive );
		var prevSearch = settings.oPreviousSearch.sSearch;
		var displayMaster = settings.aiDisplayMaster;
		var display, invalidated, i;
		var filtered = [];
	
		// Need to take account of custom filtering functions - always filter
		if ( DataTable.ext.search.length !== 0 ) {
			force = true;
		}
	
		// Check if any of the rows were invalidated
		invalidated = _fnFilterData( settings );
	
		// If the input is blank - we just want the full data set
		if ( input.length <= 0 ) {
			settings.aiDisplay = displayMaster.slice();
		}
		else {
			// New search - start from the master array
			if ( invalidated ||
				 force ||
				 prevSearch.length > input.length ||
				 input.indexOf(prevSearch) !== 0 ||
				 settings.bSorted // On resort, the display master needs to be
				                  // re-filtered since indexes will have changed
			) {
				settings.aiDisplay = displayMaster.slice();
			}
	
			// Search the display array
			display = settings.aiDisplay;
	
			for ( i=0 ; i<display.length ; i++ ) {
				if ( rpSearch.test( settings.aoData[ display[i] ]._sFilterRow ) ) {
					filtered.push( display[i] );
				}
			}
	
			settings.aiDisplay = filtered;
		}
	}
	
	
	/**
	 * Build a regular expression object suitable for searching a table
	 *  @param {string} sSearch string to search for
	 *  @param {bool} bRegex treat as a regular expression or not
	 *  @param {bool} bSmart perform smart filtering or not
	 *  @param {bool} bCaseInsensitive Do case insensitive matching or not
	 *  @returns {RegExp} constructed object
	 *  @memberof DataTable#oApi
	 */
	function _fnFilterCreateSearch( search, regex, smart, caseInsensitive )
	{
		search = regex ?
			search :
			_fnEscapeRegex( search );
		
		if ( smart ) {
			/* For smart filtering we want to allow the search to work regardless of
			 * word order. We also want double quoted text to be preserved, so word
			 * order is important - a la google. So this is what we want to
			 * generate:
			 * 
			 * ^(?=.*?\bone\b)(?=.*?\btwo three\b)(?=.*?\bfour\b).*$
			 */
			var a = $.map( search.match( /"[^"]+"|[^ ]+/g ) || [''], function ( word ) {
				if ( word.charAt(0) === '"' ) {
					var m = word.match( /^"(.*)"$/ );
					word = m ? m[1] : word;
				}
	
				return word.replace('"', '');
			} );
	
			search = '^(?=.*?'+a.join( ')(?=.*?' )+').*$';
		}
	
		return new RegExp( search, caseInsensitive ? 'i' : '' );
	}
	
	
	/**
	 * Escape a string such that it can be used in a regular expression
	 *  @param {string} sVal string to escape
	 *  @returns {string} escaped string
	 *  @memberof DataTable#oApi
	 */
	var _fnEscapeRegex = DataTable.util.escapeRegex;
	
	var __filter_div = $('<div>')[0];
	var __filter_div_textContent = __filter_div.textContent !== undefined;
	
	// Update the filtering data for each row if needed (by invalidation or first run)
	function _fnFilterData ( settings )
	{
		var columns = settings.aoColumns;
		var column;
		var i, j, ien, jen, filterData, cellData, row;
		var fomatters = DataTable.ext.type.search;
		var wasInvalidated = false;
	
		for ( i=0, ien=settings.aoData.length ; i<ien ; i++ ) {
			row = settings.aoData[i];
	
			if ( ! row._aFilterData ) {
				filterData = [];
	
				for ( j=0, jen=columns.length ; j<jen ; j++ ) {
					column = columns[j];
	
					if ( column.bSearchable ) {
						cellData = _fnGetCellData( settings, i, j, 'filter' );
	
						if ( fomatters[ column.sType ] ) {
							cellData = fomatters[ column.sType ]( cellData );
						}
	
						// Search in DataTables 1.10 is string based. In 1.11 this
						// should be altered to also allow strict type checking.
						if ( cellData === null ) {
							cellData = '';
						}
	
						if ( typeof cellData !== 'string' && cellData.toString ) {
							cellData = cellData.toString();
						}
					}
					else {
						cellData = '';
					}
	
					// If it looks like there is an HTML entity in the string,
					// attempt to decode it so sorting works as expected. Note that
					// we could use a single line of jQuery to do this, but the DOM
					// method used here is much faster http://jsperf.com/html-decode
					if ( cellData.indexOf && cellData.indexOf('&') !== -1 ) {
						__filter_div.innerHTML = cellData;
						cellData = __filter_div_textContent ?
							__filter_div.textContent :
							__filter_div.innerText;
					}
	
					if ( cellData.replace ) {
						cellData = cellData.replace(/[\r\n]/g, '');
					}
	
					filterData.push( cellData );
				}
	
				row._aFilterData = filterData;
				row._sFilterRow = filterData.join('  ');
				wasInvalidated = true;
			}
		}
	
		return wasInvalidated;
	}
	
	
	/**
	 * Convert from the internal Hungarian notation to camelCase for external
	 * interaction
	 *  @param {object} obj Object to convert
	 *  @returns {object} Inverted object
	 *  @memberof DataTable#oApi
	 */
	function _fnSearchToCamel ( obj )
	{
		return {
			search:          obj.sSearch,
			smart:           obj.bSmart,
			regex:           obj.bRegex,
			caseInsensitive: obj.bCaseInsensitive
		};
	}
	
	
	
	/**
	 * Convert from camelCase notation to the internal Hungarian. We could use the
	 * Hungarian convert function here, but this is cleaner
	 *  @param {object} obj Object to convert
	 *  @returns {object} Inverted object
	 *  @memberof DataTable#oApi
	 */
	function _fnSearchToHung ( obj )
	{
		return {
			sSearch:          obj.search,
			bSmart:           obj.smart,
			bRegex:           obj.regex,
			bCaseInsensitive: obj.caseInsensitive
		};
	}
	
	/**
	 * Generate the node required for the info display
	 *  @param {object} oSettings dataTables settings object
	 *  @returns {node} Information element
	 *  @memberof DataTable#oApi
	 */
	function _fnFeatureHtmlInfo ( settings )
	{
		var
			tid = settings.sTableId,
			nodes = settings.aanFeatures.i,
			n = $('<div/>', {
				'class': settings.oClasses.sInfo,
				'id': ! nodes ? tid+'_info' : null
			} );
	
		if ( ! nodes ) {
			// Update display on each draw
			settings.aoDrawCallback.push( {
				"fn": _fnUpdateInfo,
				"sName": "information"
			} );
	
			n
				.attr( 'role', 'status' )
				.attr( 'aria-live', 'polite' );
	
			// Table is described by our info div
			$(settings.nTable).attr( 'aria-describedby', tid+'_info' );
		}
	
		return n[0];
	}
	
	
	/**
	 * Update the information elements in the display
	 *  @param {object} settings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnUpdateInfo ( settings )
	{
		/* Show information about the table */
		var nodes = settings.aanFeatures.i;
		if ( nodes.length === 0 ) {
			return;
		}
	
		var
			lang  = settings.oLanguage,
			start = settings._iDisplayStart+1,
			end   = settings.fnDisplayEnd(),
			max   = settings.fnRecordsTotal(),
			total = settings.fnRecordsDisplay(),
			out   = total ?
				lang.sInfo :
				lang.sInfoEmpty;
	
		if ( total !== max ) {
			/* Record set after filtering */
			out += ' ' + lang.sInfoFiltered;
		}
	
		// Convert the macros
		out += lang.sInfoPostFix;
		out = _fnInfoMacros( settings, out );
	
		var callback = lang.fnInfoCallback;
		if ( callback !== null ) {
			out = callback.call( settings.oInstance,
				settings, start, end, max, total, out
			);
		}
	
		$(nodes).html( out );
	}
	
	
	function _fnInfoMacros ( settings, str )
	{
		// When infinite scrolling, we are always starting at 1. _iDisplayStart is used only
		// internally
		var
			formatter  = settings.fnFormatNumber,
			start      = settings._iDisplayStart+1,
			len        = settings._iDisplayLength,
			vis        = settings.fnRecordsDisplay(),
			all        = len === -1;
	
		return str.
			replace(/_START_/g, formatter.call( settings, start ) ).
			replace(/_END_/g,   formatter.call( settings, settings.fnDisplayEnd() ) ).
			replace(/_MAX_/g,   formatter.call( settings, settings.fnRecordsTotal() ) ).
			replace(/_TOTAL_/g, formatter.call( settings, vis ) ).
			replace(/_PAGE_/g,  formatter.call( settings, all ? 1 : Math.ceil( start / len ) ) ).
			replace(/_PAGES_/g, formatter.call( settings, all ? 1 : Math.ceil( vis / len ) ) );
	}
	
	
	
	/**
	 * Draw the table for the first time, adding all required features
	 *  @param {object} settings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnInitialise ( settings )
	{
		var i, iLen, iAjaxStart=settings.iInitDisplayStart;
		var columns = settings.aoColumns, column;
		var features = settings.oFeatures;
		var deferLoading = settings.bDeferLoading; // value modified by the draw
	
		/* Ensure that the table data is fully initialised */
		if ( ! settings.bInitialised ) {
			setTimeout( function(){ _fnInitialise( settings ); }, 200 );
			return;
		}
	
		/* Show the display HTML options */
		_fnAddOptionsHtml( settings );
	
		/* Build and draw the header / footer for the table */
		_fnBuildHead( settings );
		_fnDrawHead( settings, settings.aoHeader );
		_fnDrawHead( settings, settings.aoFooter );
	
		/* Okay to show that something is going on now */
		_fnProcessingDisplay( settings, true );
	
		/* Calculate sizes for columns */
		if ( features.bAutoWidth ) {
			_fnCalculateColumnWidths( settings );
		}
	
		for ( i=0, iLen=columns.length ; i<iLen ; i++ ) {
			column = columns[i];
	
			if ( column.sWidth ) {
				column.nTh.style.width = _fnStringToCss( column.sWidth );
			}
		}
	
		_fnCallbackFire( settings, null, 'preInit', [settings] );
	
		// If there is default sorting required - let's do it. The sort function
		// will do the drawing for us. Otherwise we draw the table regardless of the
		// Ajax source - this allows the table to look initialised for Ajax sourcing
		// data (show 'loading' message possibly)
		_fnReDraw( settings );
	
		// Server-side processing init complete is done by _fnAjaxUpdateDraw
		var dataSrc = _fnDataSource( settings );
		if ( dataSrc != 'ssp' || deferLoading ) {
			// if there is an ajax source load the data
			if ( dataSrc == 'ajax' ) {
				_fnBuildAjax( settings, [], function(json) {
					var aData = _fnAjaxDataSrc( settings, json );
	
					// Got the data - add it to the table
					for ( i=0 ; i<aData.length ; i++ ) {
						_fnAddData( settings, aData[i] );
					}
	
					// Reset the init display for cookie saving. We've already done
					// a filter, and therefore cleared it before. So we need to make
					// it appear 'fresh'
					settings.iInitDisplayStart = iAjaxStart;
	
					_fnReDraw( settings );
	
					_fnProcessingDisplay( settings, false );
					_fnInitComplete( settings, json );
				}, settings );
			}
			else {
				_fnProcessingDisplay( settings, false );
				_fnInitComplete( settings );
			}
		}
	}
	
	
	/**
	 * Draw the table for the first time, adding all required features
	 *  @param {object} oSettings dataTables settings object
	 *  @param {object} [json] JSON from the server that completed the table, if using Ajax source
	 *    with client-side processing (optional)
	 *  @memberof DataTable#oApi
	 */
	function _fnInitComplete ( settings, json )
	{
		settings._bInitComplete = true;
	
		// When data was added after the initialisation (data or Ajax) we need to
		// calculate the column sizing
		if ( json || settings.oInit.aaData ) {
			_fnAdjustColumnSizing( settings );
		}
	
		_fnCallbackFire( settings, null, 'plugin-init', [settings, json] );
		_fnCallbackFire( settings, 'aoInitComplete', 'init', [settings, json] );
	}
	
	
	function _fnLengthChange ( settings, val )
	{
		var len = parseInt( val, 10 );
		settings._iDisplayLength = len;
	
		_fnLengthOverflow( settings );
	
		// Fire length change event
		_fnCallbackFire( settings, null, 'length', [settings, len] );
	}
	
	
	/**
	 * Generate the node required for user display length changing
	 *  @param {object} settings dataTables settings object
	 *  @returns {node} Display length feature node
	 *  @memberof DataTable#oApi
	 */
	function _fnFeatureHtmlLength ( settings )
	{
		var
			classes  = settings.oClasses,
			tableId  = settings.sTableId,
			menu     = settings.aLengthMenu,
			d2       = $.isArray( menu[0] ),
			lengths  = d2 ? menu[0] : menu,
			language = d2 ? menu[1] : menu;
	
		var select = $('<select/>', {
			'name':          tableId+'_length',
			'aria-controls': tableId,
			'class':         classes.sLengthSelect
		} );
	
		for ( var i=0, ien=lengths.length ; i<ien ; i++ ) {
			select[0][ i ] = new Option( language[i], lengths[i] );
		}
	
		var div = $('<div><label/></div>').addClass( classes.sLength );
		if ( ! settings.aanFeatures.l ) {
			div[0].id = tableId+'_length';
		}
	
		div.children().append(
			settings.oLanguage.sLengthMenu.replace( '_MENU_', select[0].outerHTML )
		);
	
		// Can't use `select` variable as user might provide their own and the
		// reference is broken by the use of outerHTML
		$('select', div)
			.val( settings._iDisplayLength )
			.on( 'change.DT', function(e) {
				_fnLengthChange( settings, $(this).val() );
				_fnDraw( settings );
			} );
	
		// Update node value whenever anything changes the table's length
		$(settings.nTable).on( 'length.dt.DT', function (e, s, len) {
			if ( settings === s ) {
				$('select', div).val( len );
			}
		} );
	
		return div[0];
	}
	
	
	
	/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	 * Note that most of the paging logic is done in
	 * DataTable.ext.pager
	 */
	
	/**
	 * Generate the node required for default pagination
	 *  @param {object} oSettings dataTables settings object
	 *  @returns {node} Pagination feature node
	 *  @memberof DataTable#oApi
	 */
	function _fnFeatureHtmlPaginate ( settings )
	{
		var
			type   = settings.sPaginationType,
			plugin = DataTable.ext.pager[ type ],
			modern = typeof plugin === 'function',
			redraw = function( settings ) {
				_fnDraw( settings );
			},
			node = $('<div/>').addClass( settings.oClasses.sPaging + type )[0],
			features = settings.aanFeatures;
	
		if ( ! modern ) {
			plugin.fnInit( settings, node, redraw );
		}
	
		/* Add a draw callback for the pagination on first instance, to update the paging display */
		if ( ! features.p )
		{
			node.id = settings.sTableId+'_paginate';
	
			settings.aoDrawCallback.push( {
				"fn": function( settings ) {
					if ( modern ) {
						var
							start      = settings._iDisplayStart,
							len        = settings._iDisplayLength,
							visRecords = settings.fnRecordsDisplay(),
							all        = len === -1,
							page = all ? 0 : Math.ceil( start / len ),
							pages = all ? 1 : Math.ceil( visRecords / len ),
							buttons = plugin(page, pages),
							i, ien;
	
						for ( i=0, ien=features.p.length ; i<ien ; i++ ) {
							_fnRenderer( settings, 'pageButton' )(
								settings, features.p[i], i, buttons, page, pages
							);
						}
					}
					else {
						plugin.fnUpdate( settings, redraw );
					}
				},
				"sName": "pagination"
			} );
		}
	
		return node;
	}
	
	
	/**
	 * Alter the display settings to change the page
	 *  @param {object} settings DataTables settings object
	 *  @param {string|int} action Paging action to take: "first", "previous",
	 *    "next" or "last" or page number to jump to (integer)
	 *  @param [bool] redraw Automatically draw the update or not
	 *  @returns {bool} true page has changed, false - no change
	 *  @memberof DataTable#oApi
	 */
	function _fnPageChange ( settings, action, redraw )
	{
		var
			start     = settings._iDisplayStart,
			len       = settings._iDisplayLength,
			records   = settings.fnRecordsDisplay();
	
		if ( records === 0 || len === -1 )
		{
			start = 0;
		}
		else if ( typeof action === "number" )
		{
			start = action * len;
	
			if ( start > records )
			{
				start = 0;
			}
		}
		else if ( action == "first" )
		{
			start = 0;
		}
		else if ( action == "previous" )
		{
			start = len >= 0 ?
				start - len :
				0;
	
			if ( start < 0 )
			{
			  start = 0;
			}
		}
		else if ( action == "next" )
		{
			if ( start + len < records )
			{
				start += len;
			}
		}
		else if ( action == "last" )
		{
			start = Math.floor( (records-1) / len) * len;
		}
		else
		{
			_fnLog( settings, 0, "Unknown paging action: "+action, 5 );
		}
	
		var changed = settings._iDisplayStart !== start;
		settings._iDisplayStart = start;
	
		if ( changed ) {
			_fnCallbackFire( settings, null, 'page', [settings] );
	
			if ( redraw ) {
				_fnDraw( settings );
			}
		}
	
		return changed;
	}
	
	
	
	/**
	 * Generate the node required for the processing node
	 *  @param {object} settings dataTables settings object
	 *  @returns {node} Processing element
	 *  @memberof DataTable#oApi
	 */
	function _fnFeatureHtmlProcessing ( settings )
	{
		return $('<div/>', {
				'id': ! settings.aanFeatures.r ? settings.sTableId+'_processing' : null,
				'class': settings.oClasses.sProcessing
			} )
			.html( settings.oLanguage.sProcessing )
			.insertBefore( settings.nTable )[0];
	}
	
	
	/**
	 * Display or hide the processing indicator
	 *  @param {object} settings dataTables settings object
	 *  @param {bool} show Show the processing indicator (true) or not (false)
	 *  @memberof DataTable#oApi
	 */
	function _fnProcessingDisplay ( settings, show )
	{
		if ( settings.oFeatures.bProcessing ) {
			$(settings.aanFeatures.r).css( 'display', show ? 'block' : 'none' );
		}
	
		_fnCallbackFire( settings, null, 'processing', [settings, show] );
	}
	
	/**
	 * Add any control elements for the table - specifically scrolling
	 *  @param {object} settings dataTables settings object
	 *  @returns {node} Node to add to the DOM
	 *  @memberof DataTable#oApi
	 */
	function _fnFeatureHtmlTable ( settings )
	{
		var table = $(settings.nTable);
	
		// Add the ARIA grid role to the table
		table.attr( 'role', 'grid' );
	
		// Scrolling from here on in
		var scroll = settings.oScroll;
	
		if ( scroll.sX === '' && scroll.sY === '' ) {
			return settings.nTable;
		}
	
		var scrollX = scroll.sX;
		var scrollY = scroll.sY;
		var classes = settings.oClasses;
		var caption = table.children('caption');
		var captionSide = caption.length ? caption[0]._captionSide : null;
		var headerClone = $( table[0].cloneNode(false) );
		var footerClone = $( table[0].cloneNode(false) );
		var footer = table.children('tfoot');
		var _div = '<div/>';
		var size = function ( s ) {
			return !s ? null : _fnStringToCss( s );
		};
	
		if ( ! footer.length ) {
			footer = null;
		}
	
		/*
		 * The HTML structure that we want to generate in this function is:
		 *  div - scroller
		 *    div - scroll head
		 *      div - scroll head inner
		 *        table - scroll head table
		 *          thead - thead
		 *    div - scroll body
		 *      table - table (master table)
		 *        thead - thead clone for sizing
		 *        tbody - tbody
		 *    div - scroll foot
		 *      div - scroll foot inner
		 *        table - scroll foot table
		 *          tfoot - tfoot
		 */
		var scroller = $( _div, { 'class': classes.sScrollWrapper } )
			.append(
				$(_div, { 'class': classes.sScrollHead } )
					.css( {
						overflow: 'hidden',
						position: 'relative',
						border: 0,
						width: scrollX ? size(scrollX) : '100%'
					} )
					.append(
						$(_div, { 'class': classes.sScrollHeadInner } )
							.css( {
								'box-sizing': 'content-box',
								width: scroll.sXInner || '100%'
							} )
							.append(
								headerClone
									.removeAttr('id')
									.css( 'margin-left', 0 )
									.append( captionSide === 'top' ? caption : null )
									.append(
										table.children('thead')
									)
							)
					)
			)
			.append(
				$(_div, { 'class': classes.sScrollBody } )
					.css( {
						position: 'relative',
						overflow: 'auto',
						width: size( scrollX )
					} )
					.append( table )
			);
	
		if ( footer ) {
			scroller.append(
				$(_div, { 'class': classes.sScrollFoot } )
					.css( {
						overflow: 'hidden',
						border: 0,
						width: scrollX ? size(scrollX) : '100%'
					} )
					.append(
						$(_div, { 'class': classes.sScrollFootInner } )
							.append(
								footerClone
									.removeAttr('id')
									.css( 'margin-left', 0 )
									.append( captionSide === 'bottom' ? caption : null )
									.append(
										table.children('tfoot')
									)
							)
					)
			);
		}
	
		var children = scroller.children();
		var scrollHead = children[0];
		var scrollBody = children[1];
		var scrollFoot = footer ? children[2] : null;
	
		// When the body is scrolled, then we also want to scroll the headers
		if ( scrollX ) {
			$(scrollBody).on( 'scroll.DT', function (e) {
				var scrollLeft = this.scrollLeft;
	
				scrollHead.scrollLeft = scrollLeft;
	
				if ( footer ) {
					scrollFoot.scrollLeft = scrollLeft;
				}
			} );
		}
	
		$(scrollBody).css(
			scrollY && scroll.bCollapse ? 'max-height' : 'height', 
			scrollY
		);
	
		settings.nScrollHead = scrollHead;
		settings.nScrollBody = scrollBody;
		settings.nScrollFoot = scrollFoot;
	
		// On redraw - align columns
		settings.aoDrawCallback.push( {
			"fn": _fnScrollDraw,
			"sName": "scrolling"
		} );
	
		return scroller[0];
	}
	
	
	
	/**
	 * Update the header, footer and body tables for resizing - i.e. column
	 * alignment.
	 *
	 * Welcome to the most horrible function DataTables. The process that this
	 * function follows is basically:
	 *   1. Re-create the table inside the scrolling div
	 *   2. Take live measurements from the DOM
	 *   3. Apply the measurements to align the columns
	 *   4. Clean up
	 *
	 *  @param {object} settings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnScrollDraw ( settings )
	{
		// Given that this is such a monster function, a lot of variables are use
		// to try and keep the minimised size as small as possible
		var
			scroll         = settings.oScroll,
			scrollX        = scroll.sX,
			scrollXInner   = scroll.sXInner,
			scrollY        = scroll.sY,
			barWidth       = scroll.iBarWidth,
			divHeader      = $(settings.nScrollHead),
			divHeaderStyle = divHeader[0].style,
			divHeaderInner = divHeader.children('div'),
			divHeaderInnerStyle = divHeaderInner[0].style,
			divHeaderTable = divHeaderInner.children('table'),
			divBodyEl      = settings.nScrollBody,
			divBody        = $(divBodyEl),
			divBodyStyle   = divBodyEl.style,
			divFooter      = $(settings.nScrollFoot),
			divFooterInner = divFooter.children('div'),
			divFooterTable = divFooterInner.children('table'),
			header         = $(settings.nTHead),
			table          = $(settings.nTable),
			tableEl        = table[0],
			tableStyle     = tableEl.style,
			footer         = settings.nTFoot ? $(settings.nTFoot) : null,
			browser        = settings.oBrowser,
			ie67           = browser.bScrollOversize,
			dtHeaderCells  = _pluck( settings.aoColumns, 'nTh' ),
			headerTrgEls, footerTrgEls,
			headerSrcEls, footerSrcEls,
			headerCopy, footerCopy,
			headerWidths=[], footerWidths=[],
			headerContent=[], footerContent=[],
			idx, correction, sanityWidth,
			zeroOut = function(nSizer) {
				var style = nSizer.style;
				style.paddingTop = "0";
				style.paddingBottom = "0";
				style.borderTopWidth = "0";
				style.borderBottomWidth = "0";
				style.height = 0;
			};
	
		// If the scrollbar visibility has changed from the last draw, we need to
		// adjust the column sizes as the table width will have changed to account
		// for the scrollbar
		var scrollBarVis = divBodyEl.scrollHeight > divBodyEl.clientHeight;
		
		if ( settings.scrollBarVis !== scrollBarVis && settings.scrollBarVis !== undefined ) {
			settings.scrollBarVis = scrollBarVis;
			_fnAdjustColumnSizing( settings );
			return; // adjust column sizing will call this function again
		}
		else {
			settings.scrollBarVis = scrollBarVis;
		}
	
		/*
		 * 1. Re-create the table inside the scrolling div
		 */
	
		// Remove the old minimised thead and tfoot elements in the inner table
		table.children('thead, tfoot').remove();
	
		if ( footer ) {
			footerCopy = footer.clone().prependTo( table );
			footerTrgEls = footer.find('tr'); // the original tfoot is in its own table and must be sized
			footerSrcEls = footerCopy.find('tr');
		}
	
		// Clone the current header and footer elements and then place it into the inner table
		headerCopy = header.clone().prependTo( table );
		headerTrgEls = header.find('tr'); // original header is in its own table
		headerSrcEls = headerCopy.find('tr');
		headerCopy.find('th, td').removeAttr('tabindex');
	
	
		/*
		 * 2. Take live measurements from the DOM - do not alter the DOM itself!
		 */
	
		// Remove old sizing and apply the calculated column widths
		// Get the unique column headers in the newly created (cloned) header. We want to apply the
		// calculated sizes to this header
		if ( ! scrollX )
		{
			divBodyStyle.width = '100%';
			divHeader[0].style.width = '100%';
		}
	
		$.each( _fnGetUniqueThs( settings, headerCopy ), function ( i, el ) {
			idx = _fnVisibleToColumnIndex( settings, i );
			el.style.width = settings.aoColumns[idx].sWidth;
		} );
	
		if ( footer ) {
			_fnApplyToChildren( function(n) {
				n.style.width = "";
			}, footerSrcEls );
		}
	
		// Size the table as a whole
		sanityWidth = table.outerWidth();
		if ( scrollX === "" ) {
			// No x scrolling
			tableStyle.width = "100%";
	
			// IE7 will make the width of the table when 100% include the scrollbar
			// - which is shouldn't. When there is a scrollbar we need to take this
			// into account.
			if ( ie67 && (table.find('tbody').height() > divBodyEl.offsetHeight ||
				divBody.css('overflow-y') == "scroll")
			) {
				tableStyle.width = _fnStringToCss( table.outerWidth() - barWidth);
			}
	
			// Recalculate the sanity width
			sanityWidth = table.outerWidth();
		}
		else if ( scrollXInner !== "" ) {
			// legacy x scroll inner has been given - use it
			tableStyle.width = _fnStringToCss(scrollXInner);
	
			// Recalculate the sanity width
			sanityWidth = table.outerWidth();
		}
	
		// Hidden header should have zero height, so remove padding and borders. Then
		// set the width based on the real headers
	
		// Apply all styles in one pass
		_fnApplyToChildren( zeroOut, headerSrcEls );
	
		// Read all widths in next pass
		_fnApplyToChildren( function(nSizer) {
			headerContent.push( nSizer.innerHTML );
			headerWidths.push( _fnStringToCss( $(nSizer).css('width') ) );
		}, headerSrcEls );
	
		// Apply all widths in final pass
		_fnApplyToChildren( function(nToSize, i) {
			// Only apply widths to the DataTables detected header cells - this
			// prevents complex headers from having contradictory sizes applied
			if ( $.inArray( nToSize, dtHeaderCells ) !== -1 ) {
				nToSize.style.width = headerWidths[i];
			}
		}, headerTrgEls );
	
		$(headerSrcEls).height(0);
	
		/* Same again with the footer if we have one */
		if ( footer )
		{
			_fnApplyToChildren( zeroOut, footerSrcEls );
	
			_fnApplyToChildren( function(nSizer) {
				footerContent.push( nSizer.innerHTML );
				footerWidths.push( _fnStringToCss( $(nSizer).css('width') ) );
			}, footerSrcEls );
	
			_fnApplyToChildren( function(nToSize, i) {
				nToSize.style.width = footerWidths[i];
			}, footerTrgEls );
	
			$(footerSrcEls).height(0);
		}
	
	
		/*
		 * 3. Apply the measurements
		 */
	
		// "Hide" the header and footer that we used for the sizing. We need to keep
		// the content of the cell so that the width applied to the header and body
		// both match, but we want to hide it completely. We want to also fix their
		// width to what they currently are
		_fnApplyToChildren( function(nSizer, i) {
			nSizer.innerHTML = '<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+headerContent[i]+'</div>';
			nSizer.style.width = headerWidths[i];
		}, headerSrcEls );
	
		if ( footer )
		{
			_fnApplyToChildren( function(nSizer, i) {
				nSizer.innerHTML = '<div class="dataTables_sizing" style="height:0;overflow:hidden;">'+footerContent[i]+'</div>';
				nSizer.style.width = footerWidths[i];
			}, footerSrcEls );
		}
	
		// Sanity check that the table is of a sensible width. If not then we are going to get
		// misalignment - try to prevent this by not allowing the table to shrink below its min width
		if ( table.outerWidth() < sanityWidth )
		{
			// The min width depends upon if we have a vertical scrollbar visible or not */
			correction = ((divBodyEl.scrollHeight > divBodyEl.offsetHeight ||
				divBody.css('overflow-y') == "scroll")) ?
					sanityWidth+barWidth :
					sanityWidth;
	
			// IE6/7 are a law unto themselves...
			if ( ie67 && (divBodyEl.scrollHeight >
				divBodyEl.offsetHeight || divBody.css('overflow-y') == "scroll")
			) {
				tableStyle.width = _fnStringToCss( correction-barWidth );
			}
	
			// And give the user a warning that we've stopped the table getting too small
			if ( scrollX === "" || scrollXInner !== "" ) {
				_fnLog( settings, 1, 'Possible column misalignment', 6 );
			}
		}
		else
		{
			correction = '100%';
		}
	
		// Apply to the container elements
		divBodyStyle.width = _fnStringToCss( correction );
		divHeaderStyle.width = _fnStringToCss( correction );
	
		if ( footer ) {
			settings.nScrollFoot.style.width = _fnStringToCss( correction );
		}
	
	
		/*
		 * 4. Clean up
		 */
		if ( ! scrollY ) {
			/* IE7< puts a vertical scrollbar in place (when it shouldn't be) due to subtracting
			 * the scrollbar height from the visible display, rather than adding it on. We need to
			 * set the height in order to sort this. Don't want to do it in any other browsers.
			 */
			if ( ie67 ) {
				divBodyStyle.height = _fnStringToCss( tableEl.offsetHeight+barWidth );
			}
		}
	
		/* Finally set the width's of the header and footer tables */
		var iOuterWidth = table.outerWidth();
		divHeaderTable[0].style.width = _fnStringToCss( iOuterWidth );
		divHeaderInnerStyle.width = _fnStringToCss( iOuterWidth );
	
		// Figure out if there are scrollbar present - if so then we need a the header and footer to
		// provide a bit more space to allow "overflow" scrolling (i.e. past the scrollbar)
		var bScrolling = table.height() > divBodyEl.clientHeight || divBody.css('overflow-y') == "scroll";
		var padding = 'padding' + (browser.bScrollbarLeft ? 'Left' : 'Right' );
		divHeaderInnerStyle[ padding ] = bScrolling ? barWidth+"px" : "0px";
	
		if ( footer ) {
			divFooterTable[0].style.width = _fnStringToCss( iOuterWidth );
			divFooterInner[0].style.width = _fnStringToCss( iOuterWidth );
			divFooterInner[0].style[padding] = bScrolling ? barWidth+"px" : "0px";
		}
	
		// Correct DOM ordering for colgroup - comes before the thead
		table.children('colgroup').insertBefore( table.children('thead') );
	
		/* Adjust the position of the header in case we loose the y-scrollbar */
		divBody.scroll();
	
		// If sorting or filtering has occurred, jump the scrolling back to the top
		// only if we aren't holding the position
		if ( (settings.bSorted || settings.bFiltered) && ! settings._drawHold ) {
			divBodyEl.scrollTop = 0;
		}
	}
	
	
	
	/**
	 * Apply a given function to the display child nodes of an element array (typically
	 * TD children of TR rows
	 *  @param {function} fn Method to apply to the objects
	 *  @param array {nodes} an1 List of elements to look through for display children
	 *  @param array {nodes} an2 Another list (identical structure to the first) - optional
	 *  @memberof DataTable#oApi
	 */
	function _fnApplyToChildren( fn, an1, an2 )
	{
		var index=0, i=0, iLen=an1.length;
		var nNode1, nNode2;
	
		while ( i < iLen ) {
			nNode1 = an1[i].firstChild;
			nNode2 = an2 ? an2[i].firstChild : null;
	
			while ( nNode1 ) {
				if ( nNode1.nodeType === 1 ) {
					if ( an2 ) {
						fn( nNode1, nNode2, index );
					}
					else {
						fn( nNode1, index );
					}
	
					index++;
				}
	
				nNode1 = nNode1.nextSibling;
				nNode2 = an2 ? nNode2.nextSibling : null;
			}
	
			i++;
		}
	}
	
	
	
	var __re_html_remove = /<.*?>/g;
	
	
	/**
	 * Calculate the width of columns for the table
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnCalculateColumnWidths ( oSettings )
	{
		var
			table = oSettings.nTable,
			columns = oSettings.aoColumns,
			scroll = oSettings.oScroll,
			scrollY = scroll.sY,
			scrollX = scroll.sX,
			scrollXInner = scroll.sXInner,
			columnCount = columns.length,
			visibleColumns = _fnGetColumns( oSettings, 'bVisible' ),
			headerCells = $('th', oSettings.nTHead),
			tableWidthAttr = table.getAttribute('width'), // from DOM element
			tableContainer = table.parentNode,
			userInputs = false,
			i, column, columnIdx, width, outerWidth,
			browser = oSettings.oBrowser,
			ie67 = browser.bScrollOversize;
	
		var styleWidth = table.style.width;
		if ( styleWidth && styleWidth.indexOf('%') !== -1 ) {
			tableWidthAttr = styleWidth;
		}
	
		/* Convert any user input sizes into pixel sizes */
		for ( i=0 ; i<visibleColumns.length ; i++ ) {
			column = columns[ visibleColumns[i] ];
	
			if ( column.sWidth !== null ) {
				column.sWidth = _fnConvertToWidth( column.sWidthOrig, tableContainer );
	
				userInputs = true;
			}
		}
	
		/* If the number of columns in the DOM equals the number that we have to
		 * process in DataTables, then we can use the offsets that are created by
		 * the web- browser. No custom sizes can be set in order for this to happen,
		 * nor scrolling used
		 */
		if ( ie67 || ! userInputs && ! scrollX && ! scrollY &&
		     columnCount == _fnVisbleColumns( oSettings ) &&
		     columnCount == headerCells.length
		) {
			for ( i=0 ; i<columnCount ; i++ ) {
				var colIdx = _fnVisibleToColumnIndex( oSettings, i );
	
				if ( colIdx !== null ) {
					columns[ colIdx ].sWidth = _fnStringToCss( headerCells.eq(i).width() );
				}
			}
		}
		else
		{
			// Otherwise construct a single row, worst case, table with the widest
			// node in the data, assign any user defined widths, then insert it into
			// the DOM and allow the browser to do all the hard work of calculating
			// table widths
			var tmpTable = $(table).clone() // don't use cloneNode - IE8 will remove events on the main table
				.css( 'visibility', 'hidden' )
				.removeAttr( 'id' );
	
			// Clean up the table body
			tmpTable.find('tbody tr').remove();
			var tr = $('<tr/>').appendTo( tmpTable.find('tbody') );
	
			// Clone the table header and footer - we can't use the header / footer
			// from the cloned table, since if scrolling is active, the table's
			// real header and footer are contained in different table tags
			tmpTable.find('thead, tfoot').remove();
			tmpTable
				.append( $(oSettings.nTHead).clone() )
				.append( $(oSettings.nTFoot).clone() );
	
			// Remove any assigned widths from the footer (from scrolling)
			tmpTable.find('tfoot th, tfoot td').css('width', '');
	
			// Apply custom sizing to the cloned header
			headerCells = _fnGetUniqueThs( oSettings, tmpTable.find('thead')[0] );
	
			for ( i=0 ; i<visibleColumns.length ; i++ ) {
				column = columns[ visibleColumns[i] ];
	
				headerCells[i].style.width = column.sWidthOrig !== null && column.sWidthOrig !== '' ?
					_fnStringToCss( column.sWidthOrig ) :
					'';
	
				// For scrollX we need to force the column width otherwise the
				// browser will collapse it. If this width is smaller than the
				// width the column requires, then it will have no effect
				if ( column.sWidthOrig && scrollX ) {
					$( headerCells[i] ).append( $('<div/>').css( {
						width: column.sWidthOrig,
						margin: 0,
						padding: 0,
						border: 0,
						height: 1
					} ) );
				}
			}
	
			// Find the widest cell for each column and put it into the table
			if ( oSettings.aoData.length ) {
				for ( i=0 ; i<visibleColumns.length ; i++ ) {
					columnIdx = visibleColumns[i];
					column = columns[ columnIdx ];
	
					$( _fnGetWidestNode( oSettings, columnIdx ) )
						.clone( false )
						.append( column.sContentPadding )
						.appendTo( tr );
				}
			}
	
			// Tidy the temporary table - remove name attributes so there aren't
			// duplicated in the dom (radio elements for example)
			$('[name]', tmpTable).removeAttr('name');
	
			// Table has been built, attach to the document so we can work with it.
			// A holding element is used, positioned at the top of the container
			// with minimal height, so it has no effect on if the container scrolls
			// or not. Otherwise it might trigger scrolling when it actually isn't
			// needed
			var holder = $('<div/>').css( scrollX || scrollY ?
					{
						position: 'absolute',
						top: 0,
						left: 0,
						height: 1,
						right: 0,
						overflow: 'hidden'
					} :
					{}
				)
				.append( tmpTable )
				.appendTo( tableContainer );
	
			// When scrolling (X or Y) we want to set the width of the table as 
			// appropriate. However, when not scrolling leave the table width as it
			// is. This results in slightly different, but I think correct behaviour
			if ( scrollX && scrollXInner ) {
				tmpTable.width( scrollXInner );
			}
			else if ( scrollX ) {
				tmpTable.css( 'width', 'auto' );
				tmpTable.removeAttr('width');
	
				// If there is no width attribute or style, then allow the table to
				// collapse
				if ( tmpTable.width() < tableContainer.clientWidth && tableWidthAttr ) {
					tmpTable.width( tableContainer.clientWidth );
				}
			}
			else if ( scrollY ) {
				tmpTable.width( tableContainer.clientWidth );
			}
			else if ( tableWidthAttr ) {
				tmpTable.width( tableWidthAttr );
			}
	
			// Get the width of each column in the constructed table - we need to
			// know the inner width (so it can be assigned to the other table's
			// cells) and the outer width so we can calculate the full width of the
			// table. This is safe since DataTables requires a unique cell for each
			// column, but if ever a header can span multiple columns, this will
			// need to be modified.
			var total = 0;
			for ( i=0 ; i<visibleColumns.length ; i++ ) {
				var cell = $(headerCells[i]);
				var border = cell.outerWidth() - cell.width();
	
				// Use getBounding... where possible (not IE8-) because it can give
				// sub-pixel accuracy, which we then want to round up!
				var bounding = browser.bBounding ?
					Math.ceil( headerCells[i].getBoundingClientRect().width ) :
					cell.outerWidth();
	
				// Total is tracked to remove any sub-pixel errors as the outerWidth
				// of the table might not equal the total given here (IE!).
				total += bounding;
	
				// Width for each column to use
				columns[ visibleColumns[i] ].sWidth = _fnStringToCss( bounding - border );
			}
	
			table.style.width = _fnStringToCss( total );
	
			// Finished with the table - ditch it
			holder.remove();
		}
	
		// If there is a width attr, we want to attach an event listener which
		// allows the table sizing to automatically adjust when the window is
		// resized. Use the width attr rather than CSS, since we can't know if the
		// CSS is a relative value or absolute - DOM read is always px.
		if ( tableWidthAttr ) {
			table.style.width = _fnStringToCss( tableWidthAttr );
		}
	
		if ( (tableWidthAttr || scrollX) && ! oSettings._reszEvt ) {
			var bindResize = function () {
				$(window).on('resize.DT-'+oSettings.sInstance, _fnThrottle( function () {
					_fnAdjustColumnSizing( oSettings );
				} ) );
			};
	
			// IE6/7 will crash if we bind a resize event handler on page load.
			// To be removed in 1.11 which drops IE6/7 support
			if ( ie67 ) {
				setTimeout( bindResize, 1000 );
			}
			else {
				bindResize();
			}
	
			oSettings._reszEvt = true;
		}
	}
	
	
	/**
	 * Throttle the calls to a function. Arguments and context are maintained for
	 * the throttled function
	 *  @param {function} fn Function to be called
	 *  @param {int} [freq=200] call frequency in mS
	 *  @returns {function} wrapped function
	 *  @memberof DataTable#oApi
	 */
	var _fnThrottle = DataTable.util.throttle;
	
	
	/**
	 * Convert a CSS unit width to pixels (e.g. 2em)
	 *  @param {string} width width to be converted
	 *  @param {node} parent parent to get the with for (required for relative widths) - optional
	 *  @returns {int} width in pixels
	 *  @memberof DataTable#oApi
	 */
	function _fnConvertToWidth ( width, parent )
	{
		if ( ! width ) {
			return 0;
		}
	
		var n = $('<div/>')
			.css( 'width', _fnStringToCss( width ) )
			.appendTo( parent || document.body );
	
		var val = n[0].offsetWidth;
		n.remove();
	
		return val;
	}
	
	
	/**
	 * Get the widest node
	 *  @param {object} settings dataTables settings object
	 *  @param {int} colIdx column of interest
	 *  @returns {node} widest table node
	 *  @memberof DataTable#oApi
	 */
	function _fnGetWidestNode( settings, colIdx )
	{
		var idx = _fnGetMaxLenString( settings, colIdx );
		if ( idx < 0 ) {
			return null;
		}
	
		var data = settings.aoData[ idx ];
		return ! data.nTr ? // Might not have been created when deferred rendering
			$('<td/>').html( _fnGetCellData( settings, idx, colIdx, 'display' ) )[0] :
			data.anCells[ colIdx ];
	}
	
	
	/**
	 * Get the maximum strlen for each data column
	 *  @param {object} settings dataTables settings object
	 *  @param {int} colIdx column of interest
	 *  @returns {string} max string length for each column
	 *  @memberof DataTable#oApi
	 */
	function _fnGetMaxLenString( settings, colIdx )
	{
		var s, max=-1, maxIdx = -1;
	
		for ( var i=0, ien=settings.aoData.length ; i<ien ; i++ ) {
			s = _fnGetCellData( settings, i, colIdx, 'display' )+'';
			s = s.replace( __re_html_remove, '' );
			s = s.replace( /&nbsp;/g, ' ' );
	
			if ( s.length > max ) {
				max = s.length;
				maxIdx = i;
			}
		}
	
		return maxIdx;
	}
	
	
	/**
	 * Append a CSS unit (only if required) to a string
	 *  @param {string} value to css-ify
	 *  @returns {string} value with css unit
	 *  @memberof DataTable#oApi
	 */
	function _fnStringToCss( s )
	{
		if ( s === null ) {
			return '0px';
		}
	
		if ( typeof s == 'number' ) {
			return s < 0 ?
				'0px' :
				s+'px';
		}
	
		// Check it has a unit character already
		return s.match(/\d$/) ?
			s+'px' :
			s;
	}
	
	
	
	function _fnSortFlatten ( settings )
	{
		var
			i, iLen, k, kLen,
			aSort = [],
			aiOrig = [],
			aoColumns = settings.aoColumns,
			aDataSort, iCol, sType, srcCol,
			fixed = settings.aaSortingFixed,
			fixedObj = $.isPlainObject( fixed ),
			nestedSort = [],
			add = function ( a ) {
				if ( a.length && ! $.isArray( a[0] ) ) {
					// 1D array
					nestedSort.push( a );
				}
				else {
					// 2D array
					$.merge( nestedSort, a );
				}
			};
	
		// Build the sort array, with pre-fix and post-fix options if they have been
		// specified
		if ( $.isArray( fixed ) ) {
			add( fixed );
		}
	
		if ( fixedObj && fixed.pre ) {
			add( fixed.pre );
		}
	
		add( settings.aaSorting );
	
		if (fixedObj && fixed.post ) {
			add( fixed.post );
		}
	
		for ( i=0 ; i<nestedSort.length ; i++ )
		{
			srcCol = nestedSort[i][0];
			aDataSort = aoColumns[ srcCol ].aDataSort;
	
			for ( k=0, kLen=aDataSort.length ; k<kLen ; k++ )
			{
				iCol = aDataSort[k];
				sType = aoColumns[ iCol ].sType || 'string';
	
				if ( nestedSort[i]._idx === undefined ) {
					nestedSort[i]._idx = $.inArray( nestedSort[i][1], aoColumns[iCol].asSorting );
				}
	
				aSort.push( {
					src:       srcCol,
					col:       iCol,
					dir:       nestedSort[i][1],
					index:     nestedSort[i]._idx,
					type:      sType,
					formatter: DataTable.ext.type.order[ sType+"-pre" ]
				} );
			}
		}
	
		return aSort;
	}
	
	/**
	 * Change the order of the table
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 *  @todo This really needs split up!
	 */
	function _fnSort ( oSettings )
	{
		var
			i, ien, iLen, j, jLen, k, kLen,
			sDataType, nTh,
			aiOrig = [],
			oExtSort = DataTable.ext.type.order,
			aoData = oSettings.aoData,
			aoColumns = oSettings.aoColumns,
			aDataSort, data, iCol, sType, oSort,
			formatters = 0,
			sortCol,
			displayMaster = oSettings.aiDisplayMaster,
			aSort;
	
		// Resolve any column types that are unknown due to addition or invalidation
		// @todo Can this be moved into a 'data-ready' handler which is called when
		//   data is going to be used in the table?
		_fnColumnTypes( oSettings );
	
		aSort = _fnSortFlatten( oSettings );
	
		for ( i=0, ien=aSort.length ; i<ien ; i++ ) {
			sortCol = aSort[i];
	
			// Track if we can use the fast sort algorithm
			if ( sortCol.formatter ) {
				formatters++;
			}
	
			// Load the data needed for the sort, for each cell
			_fnSortData( oSettings, sortCol.col );
		}
	
		/* No sorting required if server-side or no sorting array */
		if ( _fnDataSource( oSettings ) != 'ssp' && aSort.length !== 0 )
		{
			// Create a value - key array of the current row positions such that we can use their
			// current position during the sort, if values match, in order to perform stable sorting
			for ( i=0, iLen=displayMaster.length ; i<iLen ; i++ ) {
				aiOrig[ displayMaster[i] ] = i;
			}
	
			/* Do the sort - here we want multi-column sorting based on a given data source (column)
			 * and sorting function (from oSort) in a certain direction. It's reasonably complex to
			 * follow on it's own, but this is what we want (example two column sorting):
			 *  fnLocalSorting = function(a,b){
			 *    var iTest;
			 *    iTest = oSort['string-asc']('data11', 'data12');
			 *      if (iTest !== 0)
			 *        return iTest;
			 *    iTest = oSort['numeric-desc']('data21', 'data22');
			 *    if (iTest !== 0)
			 *      return iTest;
			 *    return oSort['numeric-asc']( aiOrig[a], aiOrig[b] );
			 *  }
			 * Basically we have a test for each sorting column, if the data in that column is equal,
			 * test the next column. If all columns match, then we use a numeric sort on the row
			 * positions in the original data array to provide a stable sort.
			 *
			 * Note - I know it seems excessive to have two sorting methods, but the first is around
			 * 15% faster, so the second is only maintained for backwards compatibility with sorting
			 * methods which do not have a pre-sort formatting function.
			 */
			if ( formatters === aSort.length ) {
				// All sort types have formatting functions
				displayMaster.sort( function ( a, b ) {
					var
						x, y, k, test, sort,
						len=aSort.length,
						dataA = aoData[a]._aSortData,
						dataB = aoData[b]._aSortData;
	
					for ( k=0 ; k<len ; k++ ) {
						sort = aSort[k];
	
						x = dataA[ sort.col ];
						y = dataB[ sort.col ];
	
						test = x<y ? -1 : x>y ? 1 : 0;
						if ( test !== 0 ) {
							return sort.dir === 'asc' ? test : -test;
						}
					}
	
					x = aiOrig[a];
					y = aiOrig[b];
					return x<y ? -1 : x>y ? 1 : 0;
				} );
			}
			else {
				// Depreciated - remove in 1.11 (providing a plug-in option)
				// Not all sort types have formatting methods, so we have to call their sorting
				// methods.
				displayMaster.sort( function ( a, b ) {
					var
						x, y, k, l, test, sort, fn,
						len=aSort.length,
						dataA = aoData[a]._aSortData,
						dataB = aoData[b]._aSortData;
	
					for ( k=0 ; k<len ; k++ ) {
						sort = aSort[k];
	
						x = dataA[ sort.col ];
						y = dataB[ sort.col ];
	
						fn = oExtSort[ sort.type+"-"+sort.dir ] || oExtSort[ "string-"+sort.dir ];
						test = fn( x, y );
						if ( test !== 0 ) {
							return test;
						}
					}
	
					x = aiOrig[a];
					y = aiOrig[b];
					return x<y ? -1 : x>y ? 1 : 0;
				} );
			}
		}
	
		/* Tell the draw function that we have sorted the data */
		oSettings.bSorted = true;
	}
	
	
	function _fnSortAria ( settings )
	{
		var label;
		var nextSort;
		var columns = settings.aoColumns;
		var aSort = _fnSortFlatten( settings );
		var oAria = settings.oLanguage.oAria;
	
		// ARIA attributes - need to loop all columns, to update all (removing old
		// attributes as needed)
		for ( var i=0, iLen=columns.length ; i<iLen ; i++ )
		{
			var col = columns[i];
			var asSorting = col.asSorting;
			var sTitle = col.sTitle.replace( /<.*?>/g, "" );
			var th = col.nTh;
	
			// IE7 is throwing an error when setting these properties with jQuery's
			// attr() and removeAttr() methods...
			th.removeAttribute('aria-sort');
	
			/* In ARIA only the first sorting column can be marked as sorting - no multi-sort option */
			if ( col.bSortable ) {
				if ( aSort.length > 0 && aSort[0].col == i ) {
					th.setAttribute('aria-sort', aSort[0].dir=="asc" ? "ascending" : "descending" );
					nextSort = asSorting[ aSort[0].index+1 ] || asSorting[0];
				}
				else {
					nextSort = asSorting[0];
				}
	
				label = sTitle + ( nextSort === "asc" ?
					oAria.sSortAscending :
					oAria.sSortDescending
				);
			}
			else {
				label = sTitle;
			}
	
			th.setAttribute('aria-label', label);
		}
	}
	
	
	/**
	 * Function to run on user sort request
	 *  @param {object} settings dataTables settings object
	 *  @param {node} attachTo node to attach the handler to
	 *  @param {int} colIdx column sorting index
	 *  @param {boolean} [append=false] Append the requested sort to the existing
	 *    sort if true (i.e. multi-column sort)
	 *  @param {function} [callback] callback function
	 *  @memberof DataTable#oApi
	 */
	function _fnSortListener ( settings, colIdx, append, callback )
	{
		var col = settings.aoColumns[ colIdx ];
		var sorting = settings.aaSorting;
		var asSorting = col.asSorting;
		var nextSortIdx;
		var next = function ( a, overflow ) {
			var idx = a._idx;
			if ( idx === undefined ) {
				idx = $.inArray( a[1], asSorting );
			}
	
			return idx+1 < asSorting.length ?
				idx+1 :
				overflow ?
					null :
					0;
		};
	
		// Convert to 2D array if needed
		if ( typeof sorting[0] === 'number' ) {
			sorting = settings.aaSorting = [ sorting ];
		}
	
		// If appending the sort then we are multi-column sorting
		if ( append && settings.oFeatures.bSortMulti ) {
			// Are we already doing some kind of sort on this column?
			var sortIdx = $.inArray( colIdx, _pluck(sorting, '0') );
	
			if ( sortIdx !== -1 ) {
				// Yes, modify the sort
				nextSortIdx = next( sorting[sortIdx], true );
	
				if ( nextSortIdx === null && sorting.length === 1 ) {
					nextSortIdx = 0; // can't remove sorting completely
				}
	
				if ( nextSortIdx === null ) {
					sorting.splice( sortIdx, 1 );
				}
				else {
					sorting[sortIdx][1] = asSorting[ nextSortIdx ];
					sorting[sortIdx]._idx = nextSortIdx;
				}
			}
			else {
				// No sort on this column yet
				sorting.push( [ colIdx, asSorting[0], 0 ] );
				sorting[sorting.length-1]._idx = 0;
			}
		}
		else if ( sorting.length && sorting[0][0] == colIdx ) {
			// Single column - already sorting on this column, modify the sort
			nextSortIdx = next( sorting[0] );
	
			sorting.length = 1;
			sorting[0][1] = asSorting[ nextSortIdx ];
			sorting[0]._idx = nextSortIdx;
		}
		else {
			// Single column - sort only on this column
			sorting.length = 0;
			sorting.push( [ colIdx, asSorting[0] ] );
			sorting[0]._idx = 0;
		}
	
		// Run the sort by calling a full redraw
		_fnReDraw( settings );
	
		// callback used for async user interaction
		if ( typeof callback == 'function' ) {
			callback( settings );
		}
	}
	
	
	/**
	 * Attach a sort handler (click) to a node
	 *  @param {object} settings dataTables settings object
	 *  @param {node} attachTo node to attach the handler to
	 *  @param {int} colIdx column sorting index
	 *  @param {function} [callback] callback function
	 *  @memberof DataTable#oApi
	 */
	function _fnSortAttachListener ( settings, attachTo, colIdx, callback )
	{
		var col = settings.aoColumns[ colIdx ];
	
		_fnBindAction( attachTo, {}, function (e) {
			/* If the column is not sortable - don't to anything */
			if ( col.bSortable === false ) {
				return;
			}
	
			// If processing is enabled use a timeout to allow the processing
			// display to be shown - otherwise to it synchronously
			if ( settings.oFeatures.bProcessing ) {
				_fnProcessingDisplay( settings, true );
	
				setTimeout( function() {
					_fnSortListener( settings, colIdx, e.shiftKey, callback );
	
					// In server-side processing, the draw callback will remove the
					// processing display
					if ( _fnDataSource( settings ) !== 'ssp' ) {
						_fnProcessingDisplay( settings, false );
					}
				}, 0 );
			}
			else {
				_fnSortListener( settings, colIdx, e.shiftKey, callback );
			}
		} );
	}
	
	
	/**
	 * Set the sorting classes on table's body, Note: it is safe to call this function
	 * when bSort and bSortClasses are false
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnSortingClasses( settings )
	{
		var oldSort = settings.aLastSort;
		var sortClass = settings.oClasses.sSortColumn;
		var sort = _fnSortFlatten( settings );
		var features = settings.oFeatures;
		var i, ien, colIdx;
	
		if ( features.bSort && features.bSortClasses ) {
			// Remove old sorting classes
			for ( i=0, ien=oldSort.length ; i<ien ; i++ ) {
				colIdx = oldSort[i].src;
	
				// Remove column sorting
				$( _pluck( settings.aoData, 'anCells', colIdx ) )
					.removeClass( sortClass + (i<2 ? i+1 : 3) );
			}
	
			// Add new column sorting
			for ( i=0, ien=sort.length ; i<ien ; i++ ) {
				colIdx = sort[i].src;
	
				$( _pluck( settings.aoData, 'anCells', colIdx ) )
					.addClass( sortClass + (i<2 ? i+1 : 3) );
			}
		}
	
		settings.aLastSort = sort;
	}
	
	
	// Get the data to sort a column, be it from cache, fresh (populating the
	// cache), or from a sort formatter
	function _fnSortData( settings, idx )
	{
		// Custom sorting function - provided by the sort data type
		var column = settings.aoColumns[ idx ];
		var customSort = DataTable.ext.order[ column.sSortDataType ];
		var customData;
	
		if ( customSort ) {
			customData = customSort.call( settings.oInstance, settings, idx,
				_fnColumnIndexToVisible( settings, idx )
			);
		}
	
		// Use / populate cache
		var row, cellData;
		var formatter = DataTable.ext.type.order[ column.sType+"-pre" ];
	
		for ( var i=0, ien=settings.aoData.length ; i<ien ; i++ ) {
			row = settings.aoData[i];
	
			if ( ! row._aSortData ) {
				row._aSortData = [];
			}
	
			if ( ! row._aSortData[idx] || customSort ) {
				cellData = customSort ?
					customData[i] : // If there was a custom sort function, use data from there
					_fnGetCellData( settings, i, idx, 'sort' );
	
				row._aSortData[ idx ] = formatter ?
					formatter( cellData ) :
					cellData;
			}
		}
	}
	
	
	
	/**
	 * Save the state of a table
	 *  @param {object} oSettings dataTables settings object
	 *  @memberof DataTable#oApi
	 */
	function _fnSaveState ( settings )
	{
		if ( !settings.oFeatures.bStateSave || settings.bDestroying )
		{
			return;
		}
	
		/* Store the interesting variables */
		var state = {
			time:    +new Date(),
			start:   settings._iDisplayStart,
			length:  settings._iDisplayLength,
			order:   $.extend( true, [], settings.aaSorting ),
			search:  _fnSearchToCamel( settings.oPreviousSearch ),
			columns: $.map( settings.aoColumns, function ( col, i ) {
				return {
					visible: col.bVisible,
					search: _fnSearchToCamel( settings.aoPreSearchCols[i] )
				};
			} )
		};
	
		_fnCallbackFire( settings, "aoStateSaveParams", 'stateSaveParams', [settings, state] );
	
		settings.oSavedState = state;
		settings.fnStateSaveCallback.call( settings.oInstance, settings, state );
	}
	
	
	/**
	 * Attempt to load a saved table state
	 *  @param {object} oSettings dataTables settings object
	 *  @param {object} oInit DataTables init object so we can override settings
	 *  @param {function} callback Callback to execute when the state has been loaded
	 *  @memberof DataTable#oApi
	 */
	function _fnLoadState ( settings, oInit, callback )
	{
		var i, ien;
		var columns = settings.aoColumns;
		var loaded = function ( s ) {
			if ( ! s || ! s.time ) {
				callback();
				return;
			}
	
			// Allow custom and plug-in manipulation functions to alter the saved data set and
			// cancelling of loading by returning false
			var abStateLoad = _fnCallbackFire( settings, 'aoStateLoadParams', 'stateLoadParams', [settings, state] );
			if ( $.inArray( false, abStateLoad ) !== -1 ) {
				callback();
				return;
			}
	
			// Reject old data
			var duration = settings.iStateDuration;
			if ( duration > 0 && s.time < +new Date() - (duration*1000) ) {
				callback();
				return;
			}
	
			// Number of columns have changed - all bets are off, no restore of settings
			if ( s.columns && columns.length !== s.columns.length ) {
				callback();
				return;
			}
	
			// Store the saved state so it might be accessed at any time
			settings.oLoadedState = $.extend( true, {}, state );
	
			// Restore key features - todo - for 1.11 this needs to be done by
			// subscribed events
			if ( s.start !== undefined ) {
				settings._iDisplayStart    = s.start;
				settings.iInitDisplayStart = s.start;
			}
			if ( s.length !== undefined ) {
				settings._iDisplayLength   = s.length;
			}
	
			// Order
			if ( s.order !== undefined ) {
				settings.aaSorting = [];
				$.each( s.order, function ( i, col ) {
					settings.aaSorting.push( col[0] >= columns.length ?
						[ 0, col[1] ] :
						col
					);
				} );
			}
	
			// Search
			if ( s.search !== undefined ) {
				$.extend( settings.oPreviousSearch, _fnSearchToHung( s.search ) );
			}
	
			// Columns
			// 
			if ( s.columns ) {
				for ( i=0, ien=s.columns.length ; i<ien ; i++ ) {
					var col = s.columns[i];
	
					// Visibility
					if ( col.visible !== undefined ) {
						columns[i].bVisible = col.visible;
					}
	
					// Search
					if ( col.search !== undefined ) {
						$.extend( settings.aoPreSearchCols[i], _fnSearchToHung( col.search ) );
					}
				}
			}
	
			_fnCallbackFire( settings, 'aoStateLoaded', 'stateLoaded', [settings, state] );
			callback();
		}
	
		if ( ! settings.oFeatures.bStateSave ) {
			callback();
			return;
		}
	
		var state = settings.fnStateLoadCallback.call( settings.oInstance, settings, loaded );
	
		if ( state !== undefined ) {
			loaded( state );
		}
		// otherwise, wait for the loaded callback to be executed
	}
	
	
	/**
	 * Return the settings object for a particular table
	 *  @param {node} table table we are using as a dataTable
	 *  @returns {object} Settings object - or null if not found
	 *  @memberof DataTable#oApi
	 */
	function _fnSettingsFromNode ( table )
	{
		var settings = DataTable.settings;
		var idx = $.inArray( table, _pluck( settings, 'nTable' ) );
	
		return idx !== -1 ?
			settings[ idx ] :
			null;
	}
	
	
	/**
	 * Log an error message
	 *  @param {object} settings dataTables settings object
	 *  @param {int} level log error messages, or display them to the user
	 *  @param {string} msg error message
	 *  @param {int} tn Technical note id to get more information about the error.
	 *  @memberof DataTable#oApi
	 */
	function _fnLog( settings, level, msg, tn )
	{
		msg = 'DataTables warning: '+
			(settings ? 'table id='+settings.sTableId+' - ' : '')+msg;
	
		if ( tn ) {
			msg += '. For more information about this error, please see '+
			'http://datatables.net/tn/'+tn;
		}
	
		if ( ! level  ) {
			// Backwards compatibility pre 1.10
			var ext = DataTable.ext;
			var type = ext.sErrMode || ext.errMode;
	
			if ( settings ) {
				_fnCallbackFire( settings, null, 'error', [ settings, tn, msg ] );
			}
	
			if ( type == 'alert' ) {
				alert( msg );
			}
			else if ( type == 'throw' ) {
				throw new Error(msg);
			}
			else if ( typeof type == 'function' ) {
				type( settings, tn, msg );
			}
		}
		else if ( window.console && console.log ) {
			console.log( msg );
		}
	}
	
	
	/**
	 * See if a property is defined on one object, if so assign it to the other object
	 *  @param {object} ret target object
	 *  @param {object} src source object
	 *  @param {string} name property
	 *  @param {string} [mappedName] name to map too - optional, name used if not given
	 *  @memberof DataTable#oApi
	 */
	function _fnMap( ret, src, name, mappedName )
	{
		if ( $.isArray( name ) ) {
			$.each( name, function (i, val) {
				if ( $.isArray( val ) ) {
					_fnMap( ret, src, val[0], val[1] );
				}
				else {
					_fnMap( ret, src, val );
				}
			} );
	
			return;
		}
	
		if ( mappedName === undefined ) {
			mappedName = name;
		}
	
		if ( src[name] !== undefined ) {
			ret[mappedName] = src[name];
		}
	}
	
	
	/**
	 * Extend objects - very similar to jQuery.extend, but deep copy objects, and
	 * shallow copy arrays. The reason we need to do this, is that we don't want to
	 * deep copy array init values (such as aaSorting) since the dev wouldn't be
	 * able to override them, but we do want to deep copy arrays.
	 *  @param {object} out Object to extend
	 *  @param {object} extender Object from which the properties will be applied to
	 *      out
	 *  @param {boolean} breakRefs If true, then arrays will be sliced to take an
	 *      independent copy with the exception of the `data` or `aaData` parameters
	 *      if they are present. This is so you can pass in a collection to
	 *      DataTables and have that used as your data source without breaking the
	 *      references
	 *  @returns {object} out Reference, just for convenience - out === the return.
	 *  @memberof DataTable#oApi
	 *  @todo This doesn't take account of arrays inside the deep copied objects.
	 */
	function _fnExtend( out, extender, breakRefs )
	{
		var val;
	
		for ( var prop in extender ) {
			if ( extender.hasOwnProperty(prop) ) {
				val = extender[prop];
	
				if ( $.isPlainObject( val ) ) {
					if ( ! $.isPlainObject( out[prop] ) ) {
						out[prop] = {};
					}
					$.extend( true, out[prop], val );
				}
				else if ( breakRefs && prop !== 'data' && prop !== 'aaData' && $.isArray(val) ) {
					out[prop] = val.slice();
				}
				else {
					out[prop] = val;
				}
			}
		}
	
		return out;
	}
	
	
	/**
	 * Bind an event handers to allow a click or return key to activate the callback.
	 * This is good for accessibility since a return on the keyboard will have the
	 * same effect as a click, if the element has focus.
	 *  @param {element} n Element to bind the action to
	 *  @param {object} oData Data object to pass to the triggered function
	 *  @param {function} fn Callback function for when the event is triggered
	 *  @memberof DataTable#oApi
	 */
	function _fnBindAction( n, oData, fn )
	{
		$(n)
			.on( 'click.DT', oData, function (e) {
					n.blur(); // Remove focus outline for mouse users
					fn(e);
				} )
			.on( 'keypress.DT', oData, function (e){
					if ( e.which === 13 ) {
						e.preventDefault();
						fn(e);
					}
				} )
			.on( 'selectstart.DT', function () {
					/* Take the brutal approach to cancelling text selection */
					return false;
				} );
	}
	
	
	/**
	 * Register a callback function. Easily allows a callback function to be added to
	 * an array store of callback functions that can then all be called together.
	 *  @param {object} oSettings dataTables settings object
	 *  @param {string} sStore Name of the array storage for the callbacks in oSettings
	 *  @param {function} fn Function to be called back
	 *  @param {string} sName Identifying name for the callback (i.e. a label)
	 *  @memberof DataTable#oApi
	 */
	function _fnCallbackReg( oSettings, sStore, fn, sName )
	{
		if ( fn )
		{
			oSettings[sStore].push( {
				"fn": fn,
				"sName": sName
			} );
		}
	}
	
	
	/**
	 * Fire callback functions and trigger events. Note that the loop over the
	 * callback array store is done backwards! Further note that you do not want to
	 * fire off triggers in time sensitive applications (for example cell creation)
	 * as its slow.
	 *  @param {object} settings dataTables settings object
	 *  @param {string} callbackArr Name of the array storage for the callbacks in
	 *      oSettings
	 *  @param {string} eventName Name of the jQuery custom event to trigger. If
	 *      null no trigger is fired
	 *  @param {array} args Array of arguments to pass to the callback function /
	 *      trigger
	 *  @memberof DataTable#oApi
	 */
	function _fnCallbackFire( settings, callbackArr, eventName, args )
	{
		var ret = [];
	
		if ( callbackArr ) {
			ret = $.map( settings[callbackArr].slice().reverse(), function (val, i) {
				return val.fn.apply( settings.oInstance, args );
			} );
		}
	
		if ( eventName !== null ) {
			var e = $.Event( eventName+'.dt' );
	
			$(settings.nTable).trigger( e, args );
	
			ret.push( e.result );
		}
	
		return ret;
	}
	
	
	function _fnLengthOverflow ( settings )
	{
		var
			start = settings._iDisplayStart,
			end = settings.fnDisplayEnd(),
			len = settings._iDisplayLength;
	
		/* If we have space to show extra rows (backing up from the end point - then do so */
		if ( start >= end )
		{
			start = end - len;
		}
	
		// Keep the start record on the current page
		start -= (start % len);
	
		if ( len === -1 || start < 0 )
		{
			start = 0;
		}
	
		settings._iDisplayStart = start;
	}
	
	
	function _fnRenderer( settings, type )
	{
		var renderer = settings.renderer;
		var host = DataTable.ext.renderer[type];
	
		if ( $.isPlainObject( renderer ) && renderer[type] ) {
			// Specific renderer for this type. If available use it, otherwise use
			// the default.
			return host[renderer[type]] || host._;
		}
		else if ( typeof renderer === 'string' ) {
			// Common renderer - if there is one available for this type use it,
			// otherwise use the default
			return host[renderer] || host._;
		}
	
		// Use the default
		return host._;
	}
	
	
	/**
	 * Detect the data source being used for the table. Used to simplify the code
	 * a little (ajax) and to make it compress a little smaller.
	 *
	 *  @param {object} settings dataTables settings object
	 *  @returns {string} Data source
	 *  @memberof DataTable#oApi
	 */
	function _fnDataSource ( settings )
	{
		if ( settings.oFeatures.bServerSide ) {
			return 'ssp';
		}
		else if ( settings.ajax || settings.sAjaxSource ) {
			return 'ajax';
		}
		return 'dom';
	}
	

	
	
	/**
	 * Computed structure of the DataTables API, defined by the options passed to
	 * `DataTable.Api.register()` when building the API.
	 *
	 * The structure is built in order to speed creation and extension of the Api
	 * objects since the extensions are effectively pre-parsed.
	 *
	 * The array is an array of objects with the following structure, where this
	 * base array represents the Api prototype base:
	 *
	 *     [
	 *       {
	 *         name:      'data'                -- string   - Property name
	 *         val:       function () {},       -- function - Api method (or undefined if just an object
	 *         methodExt: [ ... ],              -- array    - Array of Api object definitions to extend the method result
	 *         propExt:   [ ... ]               -- array    - Array of Api object definitions to extend the property
	 *       },
	 *       {
	 *         name:     'row'
	 *         val:       {},
	 *         methodExt: [ ... ],
	 *         propExt:   [
	 *           {
	 *             name:      'data'
	 *             val:       function () {},
	 *             methodExt: [ ... ],
	 *             propExt:   [ ... ]
	 *           },
	 *           ...
	 *         ]
	 *       }
	 *     ]
	 *
	 * @type {Array}
	 * @ignore
	 */
	var __apiStruct = [];
	
	
	/**
	 * `Array.prototype` reference.
	 *
	 * @type object
	 * @ignore
	 */
	var __arrayProto = Array.prototype;
	
	
	/**
	 * Abstraction for `context` parameter of the `Api` constructor to allow it to
	 * take several different forms for ease of use.
	 *
	 * Each of the input parameter types will be converted to a DataTables settings
	 * object where possible.
	 *
	 * @param  {string|node|jQuery|object} mixed DataTable identifier. Can be one
	 *   of:
	 *
	 *   * `string` - jQuery selector. Any DataTables' matching the given selector
	 *     with be found and used.
	 *   * `node` - `TABLE` node which has already been formed into a DataTable.
	 *   * `jQuery` - A jQuery object of `TABLE` nodes.
	 *   * `object` - DataTables settings object
	 *   * `DataTables.Api` - API instance
	 * @return {array|null} Matching DataTables settings objects. `null` or
	 *   `undefined` is returned if no matching DataTable is found.
	 * @ignore
	 */
	var _toSettings = function ( mixed )
	{
		var idx, jq;
		var settings = DataTable.settings;
		var tables = $.map( settings, function (el, i) {
			return el.nTable;
		} );
	
		if ( ! mixed ) {
			return [];
		}
		else if ( mixed.nTable && mixed.oApi ) {
			// DataTables settings object
			return [ mixed ];
		}
		else if ( mixed.nodeName && mixed.nodeName.toLowerCase() === 'table' ) {
			// Table node
			idx = $.inArray( mixed, tables );
			return idx !== -1 ? [ settings[idx] ] : null;
		}
		else if ( mixed && typeof mixed.settings === 'function' ) {
			return mixed.settings().toArray();
		}
		else if ( typeof mixed === 'string' ) {
			// jQuery selector
			jq = $(mixed);
		}
		else if ( mixed instanceof $ ) {
			// jQuery object (also DataTables instance)
			jq = mixed;
		}
	
		if ( jq ) {
			return jq.map( function(i) {
				idx = $.inArray( this, tables );
				return idx !== -1 ? settings[idx] : null;
			} ).toArray();
		}
	};
	
	
	/**
	 * DataTables API class - used to control and interface with  one or more
	 * DataTables enhanced tables.
	 *
	 * The API class is heavily based on jQuery, presenting a chainable interface
	 * that you can use to interact with tables. Each instance of the API class has
	 * a "context" - i.e. the tables that it will operate on. This could be a single
	 * table, all tables on a page or a sub-set thereof.
	 *
	 * Additionally the API is designed to allow you to easily work with the data in
	 * the tables, retrieving and manipulating it as required. This is done by
	 * presenting the API class as an array like interface. The contents of the
	 * array depend upon the actions requested by each method (for example
	 * `rows().nodes()` will return an array of nodes, while `rows().data()` will
	 * return an array of objects or arrays depending upon your table's
	 * configuration). The API object has a number of array like methods (`push`,
	 * `pop`, `reverse` etc) as well as additional helper methods (`each`, `pluck`,
	 * `unique` etc) to assist your working with the data held in a table.
	 *
	 * Most methods (those which return an Api instance) are chainable, which means
	 * the return from a method call also has all of the methods available that the
	 * top level object had. For example, these two calls are equivalent:
	 *
	 *     // Not chained
	 *     api.row.add( {...} );
	 *     api.draw();
	 *
	 *     // Chained
	 *     api.row.add( {...} ).draw();
	 *
	 * @class DataTable.Api
	 * @param {array|object|string|jQuery} context DataTable identifier. This is
	 *   used to define which DataTables enhanced tables this API will operate on.
	 *   Can be one of:
	 *
	 *   * `string` - jQuery selector. Any DataTables' matching the given selector
	 *     with be found and used.
	 *   * `node` - `TABLE` node which has already been formed into a DataTable.
	 *   * `jQuery` - A jQuery object of `TABLE` nodes.
	 *   * `object` - DataTables settings object
	 * @param {array} [data] Data to initialise the Api instance with.
	 *
	 * @example
	 *   // Direct initialisation during DataTables construction
	 *   var api = $('#example').DataTable();
	 *
	 * @example
	 *   // Initialisation using a DataTables jQuery object
	 *   var api = $('#example').dataTable().api();
	 *
	 * @example
	 *   // Initialisation as a constructor
	 *   var api = new $.fn.DataTable.Api( 'table.dataTable' );
	 */
	_Api = function ( context, data )
	{
		if ( ! (this instanceof _Api) ) {
			return new _Api( context, data );
		}
	
		var settings = [];
		var ctxSettings = function ( o ) {
			var a = _toSettings( o );
			if ( a ) {
				settings = settings.concat( a );
			}
		};
	
		if ( $.isArray( context ) ) {
			for ( var i=0, ien=context.length ; i<ien ; i++ ) {
				ctxSettings( context[i] );
			}
		}
		else {
			ctxSettings( context );
		}
	
		// Remove duplicates
		this.context = _unique( settings );
	
		// Initial data
		if ( data ) {
			$.merge( this, data );
		}
	
		// selector
		this.selector = {
			rows: null,
			cols: null,
			opts: null
		};
	
		_Api.extend( this, this, __apiStruct );
	};
	
	DataTable.Api = _Api;
	
	// Don't destroy the existing prototype, just extend it. Required for jQuery 2's
	// isPlainObject.
	$.extend( _Api.prototype, {
		any: function ()
		{
			return this.count() !== 0;
		},
	
	
		concat:  __arrayProto.concat,
	
	
		context: [], // array of table settings objects
	
	
		count: function ()
		{
			return this.flatten().length;
		},
	
	
		each: function ( fn )
		{
			for ( var i=0, ien=this.length ; i<ien; i++ ) {
				fn.call( this, this[i], i, this );
			}
	
			return this;
		},
	
	
		eq: function ( idx )
		{
			var ctx = this.context;
	
			return ctx.length > idx ?
				new _Api( ctx[idx], this[idx] ) :
				null;
		},
	
	
		filter: function ( fn )
		{
			var a = [];
	
			if ( __arrayProto.filter ) {
				a = __arrayProto.filter.call( this, fn, this );
			}
			else {
				// Compatibility for browsers without EMCA-252-5 (JS 1.6)
				for ( var i=0, ien=this.length ; i<ien ; i++ ) {
					if ( fn.call( this, this[i], i, this ) ) {
						a.push( this[i] );
					}
				}
			}
	
			return new _Api( this.context, a );
		},
	
	
		flatten: function ()
		{
			var a = [];
			return new _Api( this.context, a.concat.apply( a, this.toArray() ) );
		},
	
	
		join:    __arrayProto.join,
	
	
		indexOf: __arrayProto.indexOf || function (obj, start)
		{
			for ( var i=(start || 0), ien=this.length ; i<ien ; i++ ) {
				if ( this[i] === obj ) {
					return i;
				}
			}
			return -1;
		},
	
		iterator: function ( flatten, type, fn, alwaysNew ) {
			var
				a = [], ret,
				i, ien, j, jen,
				context = this.context,
				rows, items, item,
				selector = this.selector;
	
			// Argument shifting
			if ( typeof flatten === 'string' ) {
				alwaysNew = fn;
				fn = type;
				type = flatten;
				flatten = false;
			}
	
			for ( i=0, ien=context.length ; i<ien ; i++ ) {
				var apiInst = new _Api( context[i] );
	
				if ( type === 'table' ) {
					ret = fn.call( apiInst, context[i], i );
	
					if ( ret !== undefined ) {
						a.push( ret );
					}
				}
				else if ( type === 'columns' || type === 'rows' ) {
					// this has same length as context - one entry for each table
					ret = fn.call( apiInst, context[i], this[i], i );
	
					if ( ret !== undefined ) {
						a.push( ret );
					}
				}
				else if ( type === 'column' || type === 'column-rows' || type === 'row' || type === 'cell' ) {
					// columns and rows share the same structure.
					// 'this' is an array of column indexes for each context
					items = this[i];
	
					if ( type === 'column-rows' ) {
						rows = _selector_row_indexes( context[i], selector.opts );
					}
	
					for ( j=0, jen=items.length ; j<jen ; j++ ) {
						item = items[j];
	
						if ( type === 'cell' ) {
							ret = fn.call( apiInst, context[i], item.row, item.column, i, j );
						}
						else {
							ret = fn.call( apiInst, context[i], item, i, j, rows );
						}
	
						if ( ret !== undefined ) {
							a.push( ret );
						}
					}
				}
			}
	
			if ( a.length || alwaysNew ) {
				var api = new _Api( context, flatten ? a.concat.apply( [], a ) : a );
				var apiSelector = api.selector;
				apiSelector.rows = selector.rows;
				apiSelector.cols = selector.cols;
				apiSelector.opts = selector.opts;
				return api;
			}
			return this;
		},
	
	
		lastIndexOf: __arrayProto.lastIndexOf || function (obj, start)
		{
			// Bit cheeky...
			return this.indexOf.apply( this.toArray.reverse(), arguments );
		},
	
	
		length:  0,
	
	
		map: function ( fn )
		{
			var a = [];
	
			if ( __arrayProto.map ) {
				a = __arrayProto.map.call( this, fn, this );
			}
			else {
				// Compatibility for browsers without EMCA-252-5 (JS 1.6)
				for ( var i=0, ien=this.length ; i<ien ; i++ ) {
					a.push( fn.call( this, this[i], i ) );
				}
			}
	
			return new _Api( this.context, a );
		},
	
	
		pluck: function ( prop )
		{
			return this.map( function ( el ) {
				return el[ prop ];
			} );
		},
	
		pop:     __arrayProto.pop,
	
	
		push:    __arrayProto.push,
	
	
		// Does not return an API instance
		reduce: __arrayProto.reduce || function ( fn, init )
		{
			return _fnReduce( this, fn, init, 0, this.length, 1 );
		},
	
	
		reduceRight: __arrayProto.reduceRight || function ( fn, init )
		{
			return _fnReduce( this, fn, init, this.length-1, -1, -1 );
		},
	
	
		reverse: __arrayProto.reverse,
	
	
		// Object with rows, columns and opts
		selector: null,
	
	
		shift:   __arrayProto.shift,
	
	
		sort:    __arrayProto.sort, // ? name - order?
	
	
		splice:  __arrayProto.splice,
	
	
		toArray: function ()
		{
			return __arrayProto.slice.call( this );
		},
	
	
		to$: function ()
		{
			return $( this );
		},
	
	
		toJQuery: function ()
		{
			return $( this );
		},
	
	
		unique: function ()
		{
			return new _Api( this.context, _unique(this) );
		},
	
	
		unshift: __arrayProto.unshift
	} );
	
	
	_Api.extend = function ( scope, obj, ext )
	{
		// Only extend API instances and static properties of the API
		if ( ! ext.length || ! obj || ( ! (obj instanceof _Api) && ! obj.__dt_wrapper ) ) {
			return;
		}
	
		var
			i, ien,
			j, jen,
			struct, inner,
			methodScoping = function ( scope, fn, struc ) {
				return function () {
					var ret = fn.apply( scope, arguments );
	
					// Method extension
					_Api.extend( ret, ret, struc.methodExt );
					return ret;
				};
			};
	
		for ( i=0, ien=ext.length ; i<ien ; i++ ) {
			struct = ext[i];
	
			// Value
			obj[ struct.name ] = typeof struct.val === 'function' ?
				methodScoping( scope, struct.val, struct ) :
				$.isPlainObject( struct.val ) ?
					{} :
					struct.val;
	
			obj[ struct.name ].__dt_wrapper = true;
	
			// Property extension
			_Api.extend( scope, obj[ struct.name ], struct.propExt );
		}
	};
	
	
	// @todo - Is there need for an augment function?
	// _Api.augment = function ( inst, name )
	// {
	// 	// Find src object in the structure from the name
	// 	var parts = name.split('.');
	
	// 	_Api.extend( inst, obj );
	// };
	
	
	//     [
	//       {
	//         name:      'data'                -- string   - Property name
	//         val:       function () {},       -- function - Api method (or undefined if just an object
	//         methodExt: [ ... ],              -- array    - Array of Api object definitions to extend the method result
	//         propExt:   [ ... ]               -- array    - Array of Api object definitions to extend the property
	//       },
	//       {
	//         name:     'row'
	//         val:       {},
	//         methodExt: [ ... ],
	//         propExt:   [
	//           {
	//             name:      'data'
	//             val:       function () {},
	//             methodExt: [ ... ],
	//             propExt:   [ ... ]
	//           },
	//           ...
	//         ]
	//       }
	//     ]
	
	_Api.register = _api_register = function ( name, val )
	{
		if ( $.isArray( name ) ) {
			for ( var j=0, jen=name.length ; j<jen ; j++ ) {
				_Api.register( name[j], val );
			}
			return;
		}
	
		var
			i, ien,
			heir = name.split('.'),
			struct = __apiStruct,
			key, method;
	
		var find = function ( src, name ) {
			for ( var i=0, ien=src.length ; i<ien ; i++ ) {
				if ( src[i].name === name ) {
					return src[i];
				}
			}
			return null;
		};
	
		for ( i=0, ien=heir.length ; i<ien ; i++ ) {
			method = heir[i].indexOf('()') !== -1;
			key = method ?
				heir[i].replace('()', '') :
				heir[i];
	
			var src = find( struct, key );
			if ( ! src ) {
				src = {
					name:      key,
					val:       {},
					methodExt: [],
					propExt:   []
				};
				struct.push( src );
			}
	
			if ( i === ien-1 ) {
				src.val = val;
			}
			else {
				struct = method ?
					src.methodExt :
					src.propExt;
			}
		}
	};
	
	
	_Api.registerPlural = _api_registerPlural = function ( pluralName, singularName, val ) {
		_Api.register( pluralName, val );
	
		_Api.register( singularName, function () {
			var ret = val.apply( this, arguments );
	
			if ( ret === this ) {
				// Returned item is the API instance that was passed in, return it
				return this;
			}
			else if ( ret instanceof _Api ) {
				// New API instance returned, want the value from the first item
				// in the returned array for the singular result.
				return ret.length ?
					$.isArray( ret[0] ) ?
						new _Api( ret.context, ret[0] ) : // Array results are 'enhanced'
						ret[0] :
					undefined;
			}
	
			// Non-API return - just fire it back
			return ret;
		} );
	};
	
	
	/**
	 * Selector for HTML tables. Apply the given selector to the give array of
	 * DataTables settings objects.
	 *
	 * @param {string|integer} [selector] jQuery selector string or integer
	 * @param  {array} Array of DataTables settings objects to be filtered
	 * @return {array}
	 * @ignore
	 */
	var __table_selector = function ( selector, a )
	{
		// Integer is used to pick out a table by index
		if ( typeof selector === 'number' ) {
			return [ a[ selector ] ];
		}
	
		// Perform a jQuery selector on the table nodes
		var nodes = $.map( a, function (el, i) {
			return el.nTable;
		} );
	
		return $(nodes)
			.filter( selector )
			.map( function (i) {
				// Need to translate back from the table node to the settings
				var idx = $.inArray( this, nodes );
				return a[ idx ];
			} )
			.toArray();
	};
	
	
	
	/**
	 * Context selector for the API's context (i.e. the tables the API instance
	 * refers to.
	 *
	 * @name    DataTable.Api#tables
	 * @param {string|integer} [selector] Selector to pick which tables the iterator
	 *   should operate on. If not given, all tables in the current context are
	 *   used. This can be given as a jQuery selector (for example `':gt(0)'`) to
	 *   select multiple tables or as an integer to select a single table.
	 * @returns {DataTable.Api} Returns a new API instance if a selector is given.
	 */
	_api_register( 'tables()', function ( selector ) {
		// A new instance is created if there was a selector specified
		return selector ?
			new _Api( __table_selector( selector, this.context ) ) :
			this;
	} );
	
	
	_api_register( 'table()', function ( selector ) {
		var tables = this.tables( selector );
		var ctx = tables.context;
	
		// Truncate to the first matched table
		return ctx.length ?
			new _Api( ctx[0] ) :
			tables;
	} );
	
	
	_api_registerPlural( 'tables().nodes()', 'table().node()' , function () {
		return this.iterator( 'table', function ( ctx ) {
			return ctx.nTable;
		}, 1 );
	} );
	
	
	_api_registerPlural( 'tables().body()', 'table().body()' , function () {
		return this.iterator( 'table', function ( ctx ) {
			return ctx.nTBody;
		}, 1 );
	} );
	
	
	_api_registerPlural( 'tables().header()', 'table().header()' , function () {
		return this.iterator( 'table', function ( ctx ) {
			return ctx.nTHead;
		}, 1 );
	} );
	
	
	_api_registerPlural( 'tables().footer()', 'table().footer()' , function () {
		return this.iterator( 'table', function ( ctx ) {
			return ctx.nTFoot;
		}, 1 );
	} );
	
	
	_api_registerPlural( 'tables().containers()', 'table().container()' , function () {
		return this.iterator( 'table', function ( ctx ) {
			return ctx.nTableWrapper;
		}, 1 );
	} );
	
	
	
	/**
	 * Redraw the tables in the current context.
	 */
	_api_register( 'draw()', function ( paging ) {
		return this.iterator( 'table', function ( settings ) {
			if ( paging === 'page' ) {
				_fnDraw( settings );
			}
			else {
				if ( typeof paging === 'string' ) {
					paging = paging === 'full-hold' ?
						false :
						true;
				}
	
				_fnReDraw( settings, paging===false );
			}
		} );
	} );
	
	
	
	/**
	 * Get the current page index.
	 *
	 * @return {integer} Current page index (zero based)
	 *//**
	 * Set the current page.
	 *
	 * Note that if you attempt to show a page which does not exist, DataTables will
	 * not throw an error, but rather reset the paging.
	 *
	 * @param {integer|string} action The paging action to take. This can be one of:
	 *  * `integer` - The page index to jump to
	 *  * `string` - An action to take:
	 *    * `first` - Jump to first page.
	 *    * `next` - Jump to the next page
	 *    * `previous` - Jump to previous page
	 *    * `last` - Jump to the last page.
	 * @returns {DataTables.Api} this
	 */
	_api_register( 'page()', function ( action ) {
		if ( action === undefined ) {
			return this.page.info().page; // not an expensive call
		}
	
		// else, have an action to take on all tables
		return this.iterator( 'table', function ( settings ) {
			_fnPageChange( settings, action );
		} );
	} );
	
	
	/**
	 * Paging information for the first table in the current context.
	 *
	 * If you require paging information for another table, use the `table()` method
	 * with a suitable selector.
	 *
	 * @return {object} Object with the following properties set:
	 *  * `page` - Current page index (zero based - i.e. the first page is `0`)
	 *  * `pages` - Total number of pages
	 *  * `start` - Display index for the first record shown on the current page
	 *  * `end` - Display index for the last record shown on the current page
	 *  * `length` - Display length (number of records). Note that generally `start
	 *    + length = end`, but this is not always true, for example if there are
	 *    only 2 records to show on the final page, with a length of 10.
	 *  * `recordsTotal` - Full data set length
	 *  * `recordsDisplay` - Data set length once the current filtering criterion
	 *    are applied.
	 */
	_api_register( 'page.info()', function ( action ) {
		if ( this.context.length === 0 ) {
			return undefined;
		}
	
		var
			settings   = this.context[0],
			start      = settings._iDisplayStart,
			len        = settings.oFeatures.bPaginate ? settings._iDisplayLength : -1,
			visRecords = settings.fnRecordsDisplay(),
			all        = len === -1;
	
		return {
			"page":           all ? 0 : Math.floor( start / len ),
			"pages":          all ? 1 : Math.ceil( visRecords / len ),
			"start":          start,
			"end":            settings.fnDisplayEnd(),
			"length":         len,
			"recordsTotal":   settings.fnRecordsTotal(),
			"recordsDisplay": visRecords,
			"serverSide":     _fnDataSource( settings ) === 'ssp'
		};
	} );
	
	
	/**
	 * Get the current page length.
	 *
	 * @return {integer} Current page length. Note `-1` indicates that all records
	 *   are to be shown.
	 *//**
	 * Set the current page length.
	 *
	 * @param {integer} Page length to set. Use `-1` to show all records.
	 * @returns {DataTables.Api} this
	 */
	_api_register( 'page.len()', function ( len ) {
		// Note that we can't call this function 'length()' because `length`
		// is a Javascript property of functions which defines how many arguments
		// the function expects.
		if ( len === undefined ) {
			return this.context.length !== 0 ?
				this.context[0]._iDisplayLength :
				undefined;
		}
	
		// else, set the page length
		return this.iterator( 'table', function ( settings ) {
			_fnLengthChange( settings, len );
		} );
	} );
	
	
	
	var __reload = function ( settings, holdPosition, callback ) {
		// Use the draw event to trigger a callback
		if ( callback ) {
			var api = new _Api( settings );
	
			api.one( 'draw', function () {
				callback( api.ajax.json() );
			} );
		}
	
		if ( _fnDataSource( settings ) == 'ssp' ) {
			_fnReDraw( settings, holdPosition );
		}
		else {
			_fnProcessingDisplay( settings, true );
	
			// Cancel an existing request
			var xhr = settings.jqXHR;
			if ( xhr && xhr.readyState !== 4 ) {
				xhr.abort();
			}
	
			// Trigger xhr
			_fnBuildAjax( settings, [], function( json ) {
				_fnClearTable( settings );
	
				var data = _fnAjaxDataSrc( settings, json );
				for ( var i=0, ien=data.length ; i<ien ; i++ ) {
					_fnAddData( settings, data[i] );
				}
	
				_fnReDraw( settings, holdPosition );
				_fnProcessingDisplay( settings, false );
			} );
		}
	};
	
	
	/**
	 * Get the JSON response from the last Ajax request that DataTables made to the
	 * server. Note that this returns the JSON from the first table in the current
	 * context.
	 *
	 * @return {object} JSON received from the server.
	 */
	_api_register( 'ajax.json()', function () {
		var ctx = this.context;
	
		if ( ctx.length > 0 ) {
			return ctx[0].json;
		}
	
		// else return undefined;
	} );
	
	
	/**
	 * Get the data submitted in the last Ajax request
	 */
	_api_register( 'ajax.params()', function () {
		var ctx = this.context;
	
		if ( ctx.length > 0 ) {
			return ctx[0].oAjaxData;
		}
	
		// else return undefined;
	} );
	
	
	/**
	 * Reload tables from the Ajax data source. Note that this function will
	 * automatically re-draw the table when the remote data has been loaded.
	 *
	 * @param {boolean} [reset=true] Reset (default) or hold the current paging
	 *   position. A full re-sort and re-filter is performed when this method is
	 *   called, which is why the pagination reset is the default action.
	 * @returns {DataTables.Api} this
	 */
	_api_register( 'ajax.reload()', function ( callback, resetPaging ) {
		return this.iterator( 'table', function (settings) {
			__reload( settings, resetPaging===false, callback );
		} );
	} );
	
	
	/**
	 * Get the current Ajax URL. Note that this returns the URL from the first
	 * table in the current context.
	 *
	 * @return {string} Current Ajax source URL
	 *//**
	 * Set the Ajax URL. Note that this will set the URL for all tables in the
	 * current context.
	 *
	 * @param {string} url URL to set.
	 * @returns {DataTables.Api} this
	 */
	_api_register( 'ajax.url()', function ( url ) {
		var ctx = this.context;
	
		if ( url === undefined ) {
			// get
			if ( ctx.length === 0 ) {
				return undefined;
			}
			ctx = ctx[0];
	
			return ctx.ajax ?
				$.isPlainObject( ctx.ajax ) ?
					ctx.ajax.url :
					ctx.ajax :
				ctx.sAjaxSource;
		}
	
		// set
		return this.iterator( 'table', function ( settings ) {
			if ( $.isPlainObject( settings.ajax ) ) {
				settings.ajax.url = url;
			}
			else {
				settings.ajax = url;
			}
			// No need to consider sAjaxSource here since DataTables gives priority
			// to `ajax` over `sAjaxSource`. So setting `ajax` here, renders any
			// value of `sAjaxSource` redundant.
		} );
	} );
	
	
	/**
	 * Load data from the newly set Ajax URL. Note that this method is only
	 * available when `ajax.url()` is used to set a URL. Additionally, this method
	 * has the same effect as calling `ajax.reload()` but is provided for
	 * convenience when setting a new URL. Like `ajax.reload()` it will
	 * automatically redraw the table once the remote data has been loaded.
	 *
	 * @returns {DataTables.Api} this
	 */
	_api_register( 'ajax.url().load()', function ( callback, resetPaging ) {
		// Same as a reload, but makes sense to present it for easy access after a
		// url change
		return this.iterator( 'table', function ( ctx ) {
			__reload( ctx, resetPaging===false, callback );
		} );
	} );
	
	
	
	
	var _selector_run = function ( type, selector, selectFn, settings, opts )
	{
		var
			out = [], res,
			a, i, ien, j, jen,
			selectorType = typeof selector;
	
		// Can't just check for isArray here, as an API or jQuery instance might be
		// given with their array like look
		if ( ! selector || selectorType === 'string' || selectorType === 'function' || selector.length === undefined ) {
			selector = [ selector ];
		}
	
		for ( i=0, ien=selector.length ; i<ien ; i++ ) {
			// Only split on simple strings - complex expressions will be jQuery selectors
			a = selector[i] && selector[i].split && ! selector[i].match(/[\[\(:]/) ?
				selector[i].split(',') :
				[ selector[i] ];
	
			for ( j=0, jen=a.length ; j<jen ; j++ ) {
				res = selectFn( typeof a[j] === 'string' ? $.trim(a[j]) : a[j] );
	
				if ( res && res.length ) {
					out = out.concat( res );
				}
			}
		}
	
		// selector extensions
		var ext = _ext.selector[ type ];
		if ( ext.length ) {
			for ( i=0, ien=ext.length ; i<ien ; i++ ) {
				out = ext[i]( settings, opts, out );
			}
		}
	
		return _unique( out );
	};
	
	
	var _selector_opts = function ( opts )
	{
		if ( ! opts ) {
			opts = {};
		}
	
		// Backwards compatibility for 1.9- which used the terminology filter rather
		// than search
		if ( opts.filter && opts.search === undefined ) {
			opts.search = opts.filter;
		}
	
		return $.extend( {
			search: 'none',
			order: 'current',
			page: 'all'
		}, opts );
	};
	
	
	var _selector_first = function ( inst )
	{
		// Reduce the API instance to the first item found
		for ( var i=0, ien=inst.length ; i<ien ; i++ ) {
			if ( inst[i].length > 0 ) {
				// Assign the first element to the first item in the instance
				// and truncate the instance and context
				inst[0] = inst[i];
				inst[0].length = 1;
				inst.length = 1;
				inst.context = [ inst.context[i] ];
	
				return inst;
			}
		}
	
		// Not found - return an empty instance
		inst.length = 0;
		return inst;
	};
	
	
	var _selector_row_indexes = function ( settings, opts )
	{
		var
			i, ien, tmp, a=[],
			displayFiltered = settings.aiDisplay,
			displayMaster = settings.aiDisplayMaster;
	
		var
			search = opts.search,  // none, applied, removed
			order  = opts.order,   // applied, current, index (original - compatibility with 1.9)
			page   = opts.page;    // all, current
	
		if ( _fnDataSource( settings ) == 'ssp' ) {
			// In server-side processing mode, most options are irrelevant since
			// rows not shown don't exist and the index order is the applied order
			// Removed is a special case - for consistency just return an empty
			// array
			return search === 'removed' ?
				[] :
				_range( 0, displayMaster.length );
		}
		else if ( page == 'current' ) {
			// Current page implies that order=current and fitler=applied, since it is
			// fairly senseless otherwise, regardless of what order and search actually
			// are
			for ( i=settings._iDisplayStart, ien=settings.fnDisplayEnd() ; i<ien ; i++ ) {
				a.push( displayFiltered[i] );
			}
		}
		else if ( order == 'current' || order == 'applied' ) {
			a = search == 'none' ?
				displayMaster.slice() :                      // no search
				search == 'applied' ?
					displayFiltered.slice() :                // applied search
					$.map( displayMaster, function (el, i) { // removed search
						return $.inArray( el, displayFiltered ) === -1 ? el : null;
					} );
		}
		else if ( order == 'index' || order == 'original' ) {
			for ( i=0, ien=settings.aoData.length ; i<ien ; i++ ) {
				if ( search == 'none' ) {
					a.push( i );
				}
				else { // applied | removed
					tmp = $.inArray( i, displayFiltered );
	
					if ((tmp === -1 && search == 'removed') ||
						(tmp >= 0   && search == 'applied') )
					{
						a.push( i );
					}
				}
			}
		}
	
		return a;
	};
	
	
	/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	 * Rows
	 *
	 * {}          - no selector - use all available rows
	 * {integer}   - row aoData index
	 * {node}      - TR node
	 * {string}    - jQuery selector to apply to the TR elements
	 * {array}     - jQuery array of nodes, or simply an array of TR nodes
	 *
	 */
	
	
	var __row_selector = function ( settings, selector, opts )
	{
		var rows;
		var run = function ( sel ) {
			var selInt = _intVal( sel );
			var i, ien;
	
			// Short cut - selector is a number and no options provided (default is
			// all records, so no need to check if the index is in there, since it
			// must be - dev error if the index doesn't exist).
			if ( selInt !== null && ! opts ) {
				return [ selInt ];
			}
	
			if ( ! rows ) {
				rows = _selector_row_indexes( settings, opts );
			}
	
			if ( selInt !== null && $.inArray( selInt, rows ) !== -1 ) {
				// Selector - integer
				return [ selInt ];
			}
			else if ( sel === null || sel === undefined || sel === '' ) {
				// Selector - none
				return rows;
			}
	
			// Selector - function
			if ( typeof sel === 'function' ) {
				return $.map( rows, function (idx) {
					var row = settings.aoData[ idx ];
					return sel( idx, row._aData, row.nTr ) ? idx : null;
				} );
			}
	
			// Get nodes in the order from the `rows` array with null values removed
			var nodes = _removeEmpty(
				_pluck_order( settings.aoData, rows, 'nTr' )
			);
	
			// Selector - node
			if ( sel.nodeName ) {
				if ( sel._DT_RowIndex !== undefined ) {
					return [ sel._DT_RowIndex ]; // Property added by DT for fast lookup
				}
				else if ( sel._DT_CellIndex ) {
					return [ sel._DT_CellIndex.row ];
				}
				else {
					var host = $(sel).closest('*[data-dt-row]');
					return host.length ?
						[ host.data('dt-row') ] :
						[];
				}
			}
	
			// ID selector. Want to always be able to select rows by id, regardless
			// of if the tr element has been created or not, so can't rely upon
			// jQuery here - hence a custom implementation. This does not match
			// Sizzle's fast selector or HTML4 - in HTML5 the ID can be anything,
			// but to select it using a CSS selector engine (like Sizzle or
			// querySelect) it would need to need to be escaped for some characters.
			// DataTables simplifies this for row selectors since you can select
			// only a row. A # indicates an id any anything that follows is the id -
			// unescaped.
			if ( typeof sel === 'string' && sel.charAt(0) === '#' ) {
				// get row index from id
				var rowObj = settings.aIds[ sel.replace( /^#/, '' ) ];
				if ( rowObj !== undefined ) {
					return [ rowObj.idx ];
				}
	
				// need to fall through to jQuery in case there is DOM id that
				// matches
			}
	
			// Selector - jQuery selector string, array of nodes or jQuery object/
			// As jQuery's .filter() allows jQuery objects to be passed in filter,
			// it also allows arrays, so this will cope with all three options
			return $(nodes)
				.filter( sel )
				.map( function () {
					return this._DT_RowIndex;
				} )
				.toArray();
		};
	
		return _selector_run( 'row', selector, run, settings, opts );
	};
	
	
	_api_register( 'rows()', function ( selector, opts ) {
		// argument shifting
		if ( selector === undefined ) {
			selector = '';
		}
		else if ( $.isPlainObject( selector ) ) {
			opts = selector;
			selector = '';
		}
	
		opts = _selector_opts( opts );
	
		var inst = this.iterator( 'table', function ( settings ) {
			return __row_selector( settings, selector, opts );
		}, 1 );
	
		// Want argument shifting here and in __row_selector?
		inst.selector.rows = selector;
		inst.selector.opts = opts;
	
		return inst;
	} );
	
	_api_register( 'rows().nodes()', function () {
		return this.iterator( 'row', function ( settings, row ) {
			return settings.aoData[ row ].nTr || undefined;
		}, 1 );
	} );
	
	_api_register( 'rows().data()', function () {
		return this.iterator( true, 'rows', function ( settings, rows ) {
			return _pluck_order( settings.aoData, rows, '_aData' );
		}, 1 );
	} );
	
	_api_registerPlural( 'rows().cache()', 'row().cache()', function ( type ) {
		return this.iterator( 'row', function ( settings, row ) {
			var r = settings.aoData[ row ];
			return type === 'search' ? r._aFilterData : r._aSortData;
		}, 1 );
	} );
	
	_api_registerPlural( 'rows().invalidate()', 'row().invalidate()', function ( src ) {
		return this.iterator( 'row', function ( settings, row ) {
			_fnInvalidate( settings, row, src );
		} );
	} );
	
	_api_registerPlural( 'rows().indexes()', 'row().index()', function () {
		return this.iterator( 'row', function ( settings, row ) {
			return row;
		}, 1 );
	} );
	
	_api_registerPlural( 'rows().ids()', 'row().id()', function ( hash ) {
		var a = [];
		var context = this.context;
	
		// `iterator` will drop undefined values, but in this case we want them
		for ( var i=0, ien=context.length ; i<ien ; i++ ) {
			for ( var j=0, jen=this[i].length ; j<jen ; j++ ) {
				var id = context[i].rowIdFn( context[i].aoData[ this[i][j] ]._aData );
				a.push( (hash === true ? '#' : '' )+ id );
			}
		}
	
		return new _Api( context, a );
	} );
	
	_api_registerPlural( 'rows().remove()', 'row().remove()', function () {
		var that = this;
	
		this.iterator( 'row', function ( settings, row, thatIdx ) {
			var data = settings.aoData;
			var rowData = data[ row ];
			var i, ien, j, jen;
			var loopRow, loopCells;
	
			data.splice( row, 1 );
	
			// Update the cached indexes
			for ( i=0, ien=data.length ; i<ien ; i++ ) {
				loopRow = data[i];
				loopCells = loopRow.anCells;
	
				// Rows
				if ( loopRow.nTr !== null ) {
					loopRow.nTr._DT_RowIndex = i;
				}
	
				// Cells
				if ( loopCells !== null ) {
					for ( j=0, jen=loopCells.length ; j<jen ; j++ ) {
						loopCells[j]._DT_CellIndex.row = i;
					}
				}
			}
	
			// Delete from the display arrays
			_fnDeleteIndex( settings.aiDisplayMaster, row );
			_fnDeleteIndex( settings.aiDisplay, row );
			_fnDeleteIndex( that[ thatIdx ], row, false ); // maintain local indexes
	
			// Check for an 'overflow' they case for displaying the table
			_fnLengthOverflow( settings );
	
			// Remove the row's ID reference if there is one
			var id = settings.rowIdFn( rowData._aData );
			if ( id !== undefined ) {
				delete settings.aIds[ id ];
			}
		} );
	
		this.iterator( 'table', function ( settings ) {
			for ( var i=0, ien=settings.aoData.length ; i<ien ; i++ ) {
				settings.aoData[i].idx = i;
			}
		} );
	
		return this;
	} );
	
	
	_api_register( 'rows.add()', function ( rows ) {
		var newRows = this.iterator( 'table', function ( settings ) {
				var row, i, ien;
				var out = [];
	
				for ( i=0, ien=rows.length ; i<ien ; i++ ) {
					row = rows[i];
	
					if ( row.nodeName && row.nodeName.toUpperCase() === 'TR' ) {
						out.push( _fnAddTr( settings, row )[0] );
					}
					else {
						out.push( _fnAddData( settings, row ) );
					}
				}
	
				return out;
			}, 1 );
	
		// Return an Api.rows() extended instance, so rows().nodes() etc can be used
		var modRows = this.rows( -1 );
		modRows.pop();
		$.merge( modRows, newRows );
	
		return modRows;
	} );
	
	
	
	
	
	/**
	 *
	 */
	_api_register( 'row()', function ( selector, opts ) {
		return _selector_first( this.rows( selector, opts ) );
	} );
	
	
	_api_register( 'row().data()', function ( data ) {
		var ctx = this.context;
	
		if ( data === undefined ) {
			// Get
			return ctx.length && this.length ?
				ctx[0].aoData[ this[0] ]._aData :
				undefined;
		}
	
		// Set
		ctx[0].aoData[ this[0] ]._aData = data;
	
		// Automatically invalidate
		_fnInvalidate( ctx[0], this[0], 'data' );
	
		return this;
	} );
	
	
	_api_register( 'row().node()', function () {
		var ctx = this.context;
	
		return ctx.length && this.length ?
			ctx[0].aoData[ this[0] ].nTr || null :
			null;
	} );
	
	
	_api_register( 'row.add()', function ( row ) {
		// Allow a jQuery object to be passed in - only a single row is added from
		// it though - the first element in the set
		if ( row instanceof $ && row.length ) {
			row = row[0];
		}
	
		var rows = this.iterator( 'table', function ( settings ) {
			if ( row.nodeName && row.nodeName.toUpperCase() === 'TR' ) {
				return _fnAddTr( settings, row )[0];
			}
			return _fnAddData( settings, row );
		} );
	
		// Return an Api.rows() extended instance, with the newly added row selected
		return this.row( rows[0] );
	} );
	
	
	
	var __details_add = function ( ctx, row, data, klass )
	{
		// Convert to array of TR elements
		var rows = [];
		var addRow = function ( r, k ) {
			// Recursion to allow for arrays of jQuery objects
			if ( $.isArray( r ) || r instanceof $ ) {
				for ( var i=0, ien=r.length ; i<ien ; i++ ) {
					addRow( r[i], k );
				}
				return;
			}
	
			// If we get a TR element, then just add it directly - up to the dev
			// to add the correct number of columns etc
			if ( r.nodeName && r.nodeName.toLowerCase() === 'tr' ) {
				rows.push( r );
			}
			else {
				// Otherwise create a row with a wrapper
				var created = $('<tr><td/></tr>').addClass( k );
				$('td', created)
					.addClass( k )
					.html( r )
					[0].colSpan = _fnVisbleColumns( ctx );
	
				rows.push( created[0] );
			}
		};
	
		addRow( data, klass );
	
		if ( row._details ) {
			row._details.detach();
		}
	
		row._details = $(rows);
	
		// If the children were already shown, that state should be retained
		if ( row._detailsShow ) {
			row._details.insertAfter( row.nTr );
		}
	};
	
	
	var __details_remove = function ( api, idx )
	{
		var ctx = api.context;
	
		if ( ctx.length ) {
			var row = ctx[0].aoData[ idx !== undefined ? idx : api[0] ];
	
			if ( row && row._details ) {
				row._details.remove();
	
				row._detailsShow = undefined;
				row._details = undefined;
			}
		}
	};
	
	
	var __details_display = function ( api, show ) {
		var ctx = api.context;
	
		if ( ctx.length && api.length ) {
			var row = ctx[0].aoData[ api[0] ];
	
			if ( row._details ) {
				row._detailsShow = show;
	
				if ( show ) {
					row._details.insertAfter( row.nTr );
				}
				else {
					row._details.detach();
				}
	
				__details_events( ctx[0] );
			}
		}
	};
	
	
	var __details_events = function ( settings )
	{
		var api = new _Api( settings );
		var namespace = '.dt.DT_details';
		var drawEvent = 'draw'+namespace;
		var colvisEvent = 'column-visibility'+namespace;
		var destroyEvent = 'destroy'+namespace;
		var data = settings.aoData;
	
		api.off( drawEvent +' '+ colvisEvent +' '+ destroyEvent );
	
		if ( _pluck( data, '_details' ).length > 0 ) {
			// On each draw, insert the required elements into the document
			api.on( drawEvent, function ( e, ctx ) {
				if ( settings !== ctx ) {
					return;
				}
	
				api.rows( {page:'current'} ).eq(0).each( function (idx) {
					// Internal data grab
					var row = data[ idx ];
	
					if ( row._detailsShow ) {
						row._details.insertAfter( row.nTr );
					}
				} );
			} );
	
			// Column visibility change - update the colspan
			api.on( colvisEvent, function ( e, ctx, idx, vis ) {
				if ( settings !== ctx ) {
					return;
				}
	
				// Update the colspan for the details rows (note, only if it already has
				// a colspan)
				var row, visible = _fnVisbleColumns( ctx );
	
				for ( var i=0, ien=data.length ; i<ien ; i++ ) {
					row = data[i];
	
					if ( row._details ) {
						row._details.children('td[colspan]').attr('colspan', visible );
					}
				}
			} );
	
			// Table destroyed - nuke any child rows
			api.on( destroyEvent, function ( e, ctx ) {
				if ( settings !== ctx ) {
					return;
				}
	
				for ( var i=0, ien=data.length ; i<ien ; i++ ) {
					if ( data[i]._details ) {
						__details_remove( api, i );
					}
				}
			} );
		}
	};
	
	// Strings for the method names to help minification
	var _emp = '';
	var _child_obj = _emp+'row().child';
	var _child_mth = _child_obj+'()';
	
	// data can be:
	//  tr
	//  string
	//  jQuery or array of any of the above
	_api_register( _child_mth, function ( data, klass ) {
		var ctx = this.context;
	
		if ( data === undefined ) {
			// get
			return ctx.length && this.length ?
				ctx[0].aoData[ this[0] ]._details :
				undefined;
		}
		else if ( data === true ) {
			// show
			this.child.show();
		}
		else if ( data === false ) {
			// remove
			__details_remove( this );
		}
		else if ( ctx.length && this.length ) {
			// set
			__details_add( ctx[0], ctx[0].aoData[ this[0] ], data, klass );
		}
	
		return this;
	} );
	
	
	_api_register( [
		_child_obj+'.show()',
		_child_mth+'.show()' // only when `child()` was called with parameters (without
	], function ( show ) {   // it returns an object and this method is not executed)
		__details_display( this, true );
		return this;
	} );
	
	
	_api_register( [
		_child_obj+'.hide()',
		_child_mth+'.hide()' // only when `child()` was called with parameters (without
	], function () {         // it returns an object and this method is not executed)
		__details_display( this, false );
		return this;
	} );
	
	
	_api_register( [
		_child_obj+'.remove()',
		_child_mth+'.remove()' // only when `child()` was called with parameters (without
	], function () {           // it returns an object and this method is not executed)
		__details_remove( this );
		return this;
	} );
	
	
	_api_register( _child_obj+'.isShown()', function () {
		var ctx = this.context;
	
		if ( ctx.length && this.length ) {
			// _detailsShown as false or undefined will fall through to return false
			return ctx[0].aoData[ this[0] ]._detailsShow || false;
		}
		return false;
	} );
	
	
	
	/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *
	 * Columns
	 *
	 * {integer}           - column index (>=0 count from left, <0 count from right)
	 * "{integer}:visIdx"  - visible column index (i.e. translate to column index)  (>=0 count from left, <0 count from right)
	 * "{integer}:visible" - alias for {integer}:visIdx  (>=0 count from left, <0 count from right)
	 * "{string}:name"     - column name
	 * "{string}"          - jQuery selector on column header nodes
	 *
	 */
	
	// can be an array of these items, comma separated list, or an array of comma
	// separated lists
	
	var __re_column_selector = /^([^:]+):(name|visIdx|visible)$/;
	
	
	// r1 and r2 are redundant - but it means that the parameters match for the
	// iterator callback in columns().data()
	var __columnData = function ( settings, column, r1, r2, rows ) {
		var a = [];
		for ( var row=0, ien=rows.length ; row<ien ; row++ ) {
			a.push( _fnGetCellData( settings, rows[row], column ) );
		}
		return a;
	};
	
	
	var __column_selector = function ( settings, selector, opts )
	{
		var
			columns = settings.aoColumns,
			names = _pluck( columns, 'sName' ),
			nodes = _pluck( columns, 'nTh' );
	
		var run = function ( s ) {
			var selInt = _intVal( s );
	
			// Selector - all
			if ( s === '' ) {
				return _range( columns.length );
			}
	
			// Selector - index
			if ( selInt !== null ) {
				return [ selInt >= 0 ?
					selInt : // Count from left
					columns.length + selInt // Count from right (+ because its a negative value)
				];
			}
	
			// Selector = function
			if ( typeof s === 'function' ) {
				var rows = _selector_row_indexes( settings, opts );
	
				return $.map( columns, function (col, idx) {
					return s(
							idx,
							__columnData( settings, idx, 0, 0, rows ),
							nodes[ idx ]
						) ? idx : null;
				} );
			}
	
			// jQuery or string selector
			var match = typeof s === 'string' ?
				s.match( __re_column_selector ) :
				'';
	
			if ( match ) {
				switch( match[2] ) {
					case 'visIdx':
					case 'visible':
						var idx = parseInt( match[1], 10 );
						// Visible index given, convert to column index
						if ( idx < 0 ) {
							// Counting from the right
							var visColumns = $.map( columns, function (col,i) {
								return col.bVisible ? i : null;
							} );
							return [ visColumns[ visColumns.length + idx ] ];
						}
						// Counting from the left
						return [ _fnVisibleToColumnIndex( settings, idx ) ];
	
					case 'name':
						// match by name. `names` is column index complete and in order
						return $.map( names, function (name, i) {
							return name === match[1] ? i : null;
						} );
	
					default:
						return [];
				}
			}
	
			// Cell in the table body
			if ( s.nodeName && s._DT_CellIndex ) {
				return [ s._DT_CellIndex.column ];
			}
	
			// jQuery selector on the TH elements for the columns
			var jqResult = $( nodes )
				.filter( s )
				.map( function () {
					return $.inArray( this, nodes ); // `nodes` is column index complete and in order
				} )
				.toArray();
	
			if ( jqResult.length || ! s.nodeName ) {
				return jqResult;
			}
	
			// Otherwise a node which might have a `dt-column` data attribute, or be
			// a child or such an element
			var host = $(s).closest('*[data-dt-column]');
			return host.length ?
				[ host.data('dt-column') ] :
				[];
		};
	
		return _selector_run( 'column', selector, run, settings, opts );
	};
	
	
	var __setColumnVis = function ( settings, column, vis ) {
		var
			cols = settings.aoColumns,
			col  = cols[ column ],
			data = settings.aoData,
			row, cells, i, ien, tr;
	
		// Get
		if ( vis === undefined ) {
			return col.bVisible;
		}
	
		// Set
		// No change
		if ( col.bVisible === vis ) {
			return;
		}
	
		if ( vis ) {
			// Insert column
			// Need to decide if we should use appendChild or insertBefore
			var insertBefore = $.inArray( true, _pluck(cols, 'bVisible'), column+1 );
	
			for ( i=0, ien=data.length ; i<ien ; i++ ) {
				tr = data[i].nTr;
				cells = data[i].anCells;
	
				if ( tr ) {
					// insertBefore can act like appendChild if 2nd arg is null
					tr.insertBefore( cells[ column ], cells[ insertBefore ] || null );
				}
			}
		}
		else {
			// Remove column
			$( _pluck( settings.aoData, 'anCells', column ) ).detach();
		}
	
		// Common actions
		col.bVisible = vis;
		_fnDrawHead( settings, settings.aoHeader );
		_fnDrawHead( settings, settings.aoFooter );
	
		_fnSaveState( settings );
	};
	
	
	_api_register( 'columns()', function ( selector, opts ) {
		// argument shifting
		if ( selector === undefined ) {
			selector = '';
		}
		else if ( $.isPlainObject( selector ) ) {
			opts = selector;
			selector = '';
		}
	
		opts = _selector_opts( opts );
	
		var inst = this.iterator( 'table', function ( settings ) {
			return __column_selector( settings, selector, opts );
		}, 1 );
	
		// Want argument shifting here and in _row_selector?
		inst.selector.cols = selector;
		inst.selector.opts = opts;
	
		return inst;
	} );
	
	_api_registerPlural( 'columns().header()', 'column().header()', function ( selector, opts ) {
		return this.iterator( 'column', function ( settings, column ) {
			return settings.aoColumns[column].nTh;
		}, 1 );
	} );
	
	_api_registerPlural( 'columns().footer()', 'column().footer()', function ( selector, opts ) {
		return this.iterator( 'column', function ( settings, column ) {
			return settings.aoColumns[column].nTf;
		}, 1 );
	} );
	
	_api_registerPlural( 'columns().data()', 'column().data()', function () {
		return this.iterator( 'column-rows', __columnData, 1 );
	} );
	
	_api_registerPlural( 'columns().dataSrc()', 'column().dataSrc()', function () {
		return this.iterator( 'column', function ( settings, column ) {
			return settings.aoColumns[column].mData;
		}, 1 );
	} );
	
	_api_registerPlural( 'columns().cache()', 'column().cache()', function ( type ) {
		return this.iterator( 'column-rows', function ( settings, column, i, j, rows ) {
			return _pluck_order( settings.aoData, rows,
				type === 'search' ? '_aFilterData' : '_aSortData', column
			);
		}, 1 );
	} );
	
	_api_registerPlural( 'columns().nodes()', 'column().nodes()', function () {
		return this.iterator( 'column-rows', function ( settings, column, i, j, rows ) {
			return _pluck_order( settings.aoData, rows, 'anCells', column ) ;
		}, 1 );
	} );
	
	_api_registerPlural( 'columns().visible()', 'column().visible()', function ( vis, calc ) {
		var ret = this.iterator( 'column', function ( settings, column ) {
			if ( vis === undefined ) {
				return settings.aoColumns[ column ].bVisible;
			} // else
			__setColumnVis( settings, column, vis );
		} );
	
		// Group the column visibility changes
		if ( vis !== undefined ) {
			// Second loop once the first is done for events
			this.iterator( 'column', function ( settings, column ) {
				_fnCallbackFire( settings, null, 'column-visibility', [settings, column, vis, calc] );
			} );
	
			if ( calc === undefined || calc ) {
				this.columns.adjust();
			}
		}
	
		return ret;
	} );
	
	_api_registerPlural( 'columns().indexes()', 'column().index()', function ( type ) {
		return this.iterator( 'column', function ( settings, column ) {
			return type === 'visible' ?
				_fnColumnIndexToVisible( settings, column ) :
				column;
		}, 1 );
	} );
	
	_api_register( 'columns.adjust()', function () {
		return this.iterator( 'table', function ( settings ) {
			_fnAdjustColumnSizing( settings );
		}, 1 );
	} );
	
	_api_register( 'column.index()', function ( type, idx ) {
		if ( this.context.length !== 0 ) {
			var ctx = this.context[0];
	
			if ( type === 'fromVisible' || type === 'toData' ) {
				return _fnVisibleToColumnIndex( ctx, idx );
			}
			else if ( type === 'fromData' || type === 'toVisible' ) {
				return _fnColumnIndexToVisible( ctx, idx );
			}
		}
	} );
	
	_api_register( 'column()', function ( selector, opts ) {
		return _selector_first( this.columns( selector, opts ) );
	} );
	
	
	
	var __cell_selector = function ( settings, selector, opts )
	{
		var data = settings.aoData;
		var rows = _selector_row_indexes( settings, opts );
		var cells = _removeEmpty( _pluck_order( data, rows, 'anCells' ) );
		var allCells = $( [].concat.apply([], cells) );
		var row;
		var columns = settings.aoColumns.length;
		var a, i, ien, j, o, host;
	
		var run = function ( s ) {
			var fnSelector = typeof s === 'function';
	
			if ( s === null || s === undefined || fnSelector ) {
				// All cells and function selectors
				a = [];
	
				for ( i=0, ien=rows.length ; i<ien ; i++ ) {
					row = rows[i];
	
					for ( j=0 ; j<columns ; j++ ) {
						o = {
							row: row,
							column: j
						};
	
						if ( fnSelector ) {
							// Selector - function
							host = data[ row ];
	
							if ( s( o, _fnGetCellData(settings, row, j), host.anCells ? host.anCells[j] : null ) ) {
								a.push( o );
							}
						}
						else {
							// Selector - all
							a.push( o );
						}
					}
				}
	
				return a;
			}
			
			// Selector - index
			if ( $.isPlainObject( s ) ) {
				return [s];
			}
	
			// Selector - jQuery filtered cells
			var jqResult = allCells
				.filter( s )
				.map( function (i, el) {
					return { // use a new object, in case someone changes the values
						row:    el._DT_CellIndex.row,
						column: el._DT_CellIndex.column
	 				};
				} )
				.toArray();
	
			if ( jqResult.length || ! s.nodeName ) {
				return jqResult;
			}
	
			// Otherwise the selector is a node, and there is one last option - the
			// element might be a child of an element which has dt-row and dt-column
			// data attributes
			host = $(s).closest('*[data-dt-row]');
			return host.length ?
				[ {
					row: host.data('dt-row'),
					column: host.data('dt-column')
				} ] :
				[];
		};
	
		return _selector_run( 'cell', selector, run, settings, opts );
	};
	
	
	
	
	_api_register( 'cells()', function ( rowSelector, columnSelector, opts ) {
		// Argument shifting
		if ( $.isPlainObject( rowSelector ) ) {
			// Indexes
			if ( rowSelector.row === undefined ) {
				// Selector options in first parameter
				opts = rowSelector;
				rowSelector = null;
			}
			else {
				// Cell index objects in first parameter
				opts = columnSelector;
				columnSelector = null;
			}
		}
		if ( $.isPlainObject( columnSelector ) ) {
			opts = columnSelector;
			columnSelector = null;
		}
	
		// Cell selector
		if ( columnSelector === null || columnSelector === undefined ) {
			return this.iterator( 'table', function ( settings ) {
				return __cell_selector( settings, rowSelector, _selector_opts( opts ) );
			} );
		}
	
		// Row + column selector
		var columns = this.columns( columnSelector, opts );
		var rows = this.rows( rowSelector, opts );
		var a, i, ien, j, jen;
	
		var cells = this.iterator( 'table', function ( settings, idx ) {
			a = [];
	
			for ( i=0, ien=rows[idx].length ; i<ien ; i++ ) {
				for ( j=0, jen=columns[idx].length ; j<jen ; j++ ) {
					a.push( {
						row:    rows[idx][i],
						column: columns[idx][j]
					} );
				}
			}
	
			return a;
		}, 1 );
	
		$.extend( cells.selector, {
			cols: columnSelector,
			rows: rowSelector,
			opts: opts
		} );
	
		return cells;
	} );
	
	
	_api_registerPlural( 'cells().nodes()', 'cell().node()', function () {
		return this.iterator( 'cell', function ( settings, row, column ) {
			var data = settings.aoData[ row ];
	
			return data && data.anCells ?
				data.anCells[ column ] :
				undefined;
		}, 1 );
	} );
	
	
	_api_register( 'cells().data()', function () {
		return this.iterator( 'cell', function ( settings, row, column ) {
			return _fnGetCellData( settings, row, column );
		}, 1 );
	} );
	
	
	_api_registerPlural( 'cells().cache()', 'cell().cache()', function ( type ) {
		type = type === 'search' ? '_aFilterData' : '_aSortData';
	
		return this.iterator( 'cell', function ( settings, row, column ) {
			return settings.aoData[ row ][ type ][ column ];
		}, 1 );
	} );
	
	
	_api_registerPlural( 'cells().render()', 'cell().render()', function ( type ) {
		return this.iterator( 'cell', function ( settings, row, column ) {
			return _fnGetCellData( settings, row, column, type );
		}, 1 );
	} );
	
	
	_api_registerPlural( 'cells().indexes()', 'cell().index()', function () {
		return this.iterator( 'cell', function ( settings, row, column ) {
			return {
				row: row,
				column: column,
				columnVisible: _fnColumnIndexToVisible( settings, column )
			};
		}, 1 );
	} );
	
	
	_api_registerPlural( 'cells().invalidate()', 'cell().invalidate()', function ( src ) {
		return this.iterator( 'cell', function ( settings, row, column ) {
			_fnInvalidate( settings, row, src, column );
		} );
	} );
	
	
	
	_api_register( 'cell()', function ( rowSelector, columnSelector, opts ) {
		return _selector_first( this.cells( rowSelector, columnSelector, opts ) );
	} );
	
	
	_api_register( 'cell().data()', function ( data ) {
		var ctx = this.context;
		var cell = this[0];
	
		if ( data === undefined ) {
			// Get
			return ctx.length && cell.length ?
				_fnGetCellData( ctx[0], cell[0].row, cell[0].column ) :
				undefined;
		}
	
		// Set
		_fnSetCellData( ctx[0], cell[0].row, cell[0].column, data );
		_fnInvalidate( ctx[0], cell[0].row, 'data', cell[0].column );
	
		return this;
	} );
	
	
	
	/**
	 * Get current ordering (sorting) that has been applied to the table.
	 *
	 * @returns {array} 2D array containing the sorting information for the first
	 *   table in the current context. Each element in the parent array represents
	 *   a column being sorted upon (i.e. multi-sorting with two columns would have
	 *   2 inner arrays). The inner arrays may have 2 or 3 elements. The first is
	 *   the column index that the sorting condition applies to, the second is the
	 *   direction of the sort (`desc` or `asc`) and, optionally, the third is the
	 *   index of the sorting order from the `column.sorting` initialisation array.
	 *//**
	 * Set the ordering for the table.
	 *
	 * @param {integer} order Column index to sort upon.
	 * @param {string} direction Direction of the sort to be applied (`asc` or `desc`)
	 * @returns {DataTables.Api} this
	 *//**
	 * Set the ordering for the table.
	 *
	 * @param {array} order 1D array of sorting information to be applied.
	 * @param {array} [...] Optional additional sorting conditions
	 * @returns {DataTables.Api} this
	 *//**
	 * Set the ordering for the table.
	 *
	 * @param {array} order 2D array of sorting information to be applied.
	 * @returns {DataTables.Api} this
	 */
	_api_register( 'order()', function ( order, dir ) {
		var ctx = this.context;
	
		if ( order === undefined ) {
			// get
			return ctx.length !== 0 ?
				ctx[0].aaSorting :
				undefined;
		}
	
		// set
		if ( typeof order === 'number' ) {
			// Simple column / direction passed in
			order = [ [ order, dir ] ];
		}
		else if ( order.length && ! $.isArray( order[0] ) ) {
			// Arguments passed in (list of 1D arrays)
			order = Array.prototype.slice.call( arguments );
		}
		// otherwise a 2D array was passed in
	
		return this.iterator( 'table', function ( settings ) {
			settings.aaSorting = order.slice();
		} );
	} );
	
	
	/**
	 * Attach a sort listener to an element for a given column
	 *
	 * @param {node|jQuery|string} node Identifier for the element(s) to attach the
	 *   listener to. This can take the form of a single DOM node, a jQuery
	 *   collection of nodes or a jQuery selector which will identify the node(s).
	 * @param {integer} column the column that a click on this node will sort on
	 * @param {function} [callback] callback function when sort is run
	 * @returns {DataTables.Api} this
	 */
	_api_register( 'order.listener()', function ( node, column, callback ) {
		return this.iterator( 'table', function ( settings ) {
			_fnSortAttachListener( settings, node, column, callback );
		} );
	} );
	
	
	_api_register( 'order.fixed()', function ( set ) {
		if ( ! set ) {
			var ctx = this.context;
			var fixed = ctx.length ?
				ctx[0].aaSortingFixed :
				undefined;
	
			return $.isArray( fixed ) ?
				{ pre: fixed } :
				fixed;
		}
	
		return this.iterator( 'table', function ( settings ) {
			settings.aaSortingFixed = $.extend( true, {}, set );
		} );
	} );
	
	
	// Order by the selected column(s)
	_api_register( [
		'columns().order()',
		'column().order()'
	], function ( dir ) {
		var that = this;
	
		return this.iterator( 'table', function ( settings, i ) {
			var sort = [];
	
			$.each( that[i], function (j, col) {
				sort.push( [ col, dir ] );
			} );
	
			settings.aaSorting = sort;
		} );
	} );
	
	
	
	_api_register( 'search()', function ( input, regex, smart, caseInsen ) {
		var ctx = this.context;
	
		if ( input === undefined ) {
			// get
			return ctx.length !== 0 ?
				ctx[0].oPreviousSearch.sSearch :
				undefined;
		}
	
		// set
		return this.iterator( 'table', function ( settings ) {
			if ( ! settings.oFeatures.bFilter ) {
				return;
			}
	
			_fnFilterComplete( settings, $.extend( {}, settings.oPreviousSearch, {
				"sSearch": input+"",
				"bRegex":  regex === null ? false : regex,
				"bSmart":  smart === null ? true  : smart,
				"bCaseInsensitive": caseInsen === null ? true : caseInsen
			} ), 1 );
		} );
	} );
	
	
	_api_registerPlural(
		'columns().search()',
		'column().search()',
		function ( input, regex, smart, caseInsen ) {
			return this.iterator( 'column', function ( settings, column ) {
				var preSearch = settings.aoPreSearchCols;
	
				if ( input === undefined ) {
					// get
					return preSearch[ column ].sSearch;
				}
	
				// set
				if ( ! settings.oFeatures.bFilter ) {
					return;
				}
	
				$.extend( preSearch[ column ], {
					"sSearch": input+"",
					"bRegex":  regex === null ? false : regex,
					"bSmart":  smart === null ? true  : smart,
					"bCaseInsensitive": caseInsen === null ? true : caseInsen
				} );
	
				_fnFilterComplete( settings, settings.oPreviousSearch, 1 );
			} );
		}
	);
	
	/*
	 * State API methods
	 */
	
	_api_register( 'state()', function () {
		return this.context.length ?
			this.context[0].oSavedState :
			null;
	} );
	
	
	_api_register( 'state.clear()', function () {
		return this.iterator( 'table', function ( settings ) {
			// Save an empty object
			settings.fnStateSaveCallback.call( settings.oInstance, settings, {} );
		} );
	} );
	
	
	_api_register( 'state.loaded()', function () {
		return this.context.length ?
			this.context[0].oLoadedState :
			null;
	} );
	
	
	_api_register( 'state.save()', function () {
		return this.iterator( 'table', function ( settings ) {
			_fnSaveState( settings );
		} );
	} );
	
	
	
	/**
	 * Provide a common method for plug-ins to check the version of DataTables being
	 * used, in order to ensure compatibility.
	 *
	 *  @param {string} version Version string to check for, in the format "X.Y.Z".
	 *    Note that the formats "X" and "X.Y" are also acceptable.
	 *  @returns {boolean} true if this version of DataTables is greater or equal to
	 *    the required version, or false if this version of DataTales is not
	 *    suitable
	 *  @static
	 *  @dtopt API-Static
	 *
	 *  @example
	 *    alert( $.fn.dataTable.versionCheck( '1.9.0' ) );
	 */
	DataTable.versionCheck = DataTable.fnVersionCheck = function( version )
	{
		var aThis = DataTable.version.split('.');
		var aThat = version.split('.');
		var iThis, iThat;
	
		for ( var i=0, iLen=aThat.length ; i<iLen ; i++ ) {
			iThis = parseInt( aThis[i], 10 ) || 0;
			iThat = parseInt( aThat[i], 10 ) || 0;
	
			// Parts are the same, keep comparing
			if (iThis === iThat) {
				continue;
			}
	
			// Parts are different, return immediately
			return iThis > iThat;
		}
	
		return true;
	};
	
	
	/**
	 * Check if a `<table>` node is a DataTable table already or not.
	 *
	 *  @param {node|jquery|string} table Table node, jQuery object or jQuery
	 *      selector for the table to test. Note that if more than more than one
	 *      table is passed on, only the first will be checked
	 *  @returns {boolean} true the table given is a DataTable, or false otherwise
	 *  @static
	 *  @dtopt API-Static
	 *
	 *  @example
	 *    if ( ! $.fn.DataTable.isDataTable( '#example' ) ) {
	 *      $('#example').dataTable();
	 *    }
	 */
	DataTable.isDataTable = DataTable.fnIsDataTable = function ( table )
	{
		var t = $(table).get(0);
		var is = false;
	
		if ( table instanceof DataTable.Api ) {
			return true;
		}
	
		$.each( DataTable.settings, function (i, o) {
			var head = o.nScrollHead ? $('table', o.nScrollHead)[0] : null;
			var foot = o.nScrollFoot ? $('table', o.nScrollFoot)[0] : null;
	
			if ( o.nTable === t || head === t || foot === t ) {
				is = true;
			}
		} );
	
		return is;
	};
	
	
	/**
	 * Get all DataTable tables that have been initialised - optionally you can
	 * select to get only currently visible tables.
	 *
	 *  @param {boolean} [visible=false] Flag to indicate if you want all (default)
	 *    or visible tables only.
	 *  @returns {array} Array of `table` nodes (not DataTable instances) which are
	 *    DataTables
	 *  @static
	 *  @dtopt API-Static
	 *
	 *  @example
	 *    $.each( $.fn.dataTable.tables(true), function () {
	 *      $(table).DataTable().columns.adjust();
	 *    } );
	 */
	DataTable.tables = DataTable.fnTables = function ( visible )
	{
		var api = false;
	
		if ( $.isPlainObject( visible ) ) {
			api = visible.api;
			visible = visible.visible;
		}
	
		var a = $.map( DataTable.settings, function (o) {
			if ( !visible || (visible && $(o.nTable).is(':visible')) ) {
				return o.nTable;
			}
		} );
	
		return api ?
			new _Api( a ) :
			a;
	};
	
	
	/**
	 * Convert from camel case parameters to Hungarian notation. This is made public
	 * for the extensions to provide the same ability as DataTables core to accept
	 * either the 1.9 style Hungarian notation, or the 1.10+ style camelCase
	 * parameters.
	 *
	 *  @param {object} src The model object which holds all parameters that can be
	 *    mapped.
	 *  @param {object} user The object to convert from camel case to Hungarian.
	 *  @param {boolean} force When set to `true`, properties which already have a
	 *    Hungarian value in the `user` object will be overwritten. Otherwise they
	 *    won't be.
	 */
	DataTable.camelToHungarian = _fnCamelToHungarian;
	
	
	
	/**
	 *
	 */
	_api_register( '$()', function ( selector, opts ) {
		var
			rows   = this.rows( opts ).nodes(), // Get all rows
			jqRows = $(rows);
	
		return $( [].concat(
			jqRows.filter( selector ).toArray(),
			jqRows.find( selector ).toArray()
		) );
	} );
	
	
	// jQuery functions to operate on the tables
	$.each( [ 'on', 'one', 'off' ], function (i, key) {
		_api_register( key+'()', function ( /* event, handler */ ) {
			var args = Array.prototype.slice.call(arguments);
	
			// Add the `dt` namespace automatically if it isn't already present
			args[0] = $.map( args[0].split( /\s/ ), function ( e ) {
				return ! e.match(/\.dt\b/) ?
					e+'.dt' :
					e;
				} ).join( ' ' );
	
			var inst = $( this.tables().nodes() );
			inst[key].apply( inst, args );
			return this;
		} );
	} );
	
	
	_api_register( 'clear()', function () {
		return this.iterator( 'table', function ( settings ) {
			_fnClearTable( settings );
		} );
	} );
	
	
	_api_register( 'settings()', function () {
		return new _Api( this.context, this.context );
	} );
	
	
	_api_register( 'init()', function () {
		var ctx = this.context;
		return ctx.length ? ctx[0].oInit : null;
	} );
	
	
	_api_register( 'data()', function () {
		return this.iterator( 'table', function ( settings ) {
			return _pluck( settings.aoData, '_aData' );
		} ).flatten();
	} );
	
	
	_api_register( 'destroy()', function ( remove ) {
		remove = remove || false;
	
		return this.iterator( 'table', function ( settings ) {
			var orig      = settings.nTableWrapper.parentNode;
			var classes   = settings.oClasses;
			var table     = settings.nTable;
			var tbody     = settings.nTBody;
			var thead     = settings.nTHead;
			var tfoot     = settings.nTFoot;
			var jqTable   = $(table);
			var jqTbody   = $(tbody);
			var jqWrapper = $(settings.nTableWrapper);
			var rows      = $.map( settings.aoData, function (r) { return r.nTr; } );
			var i, ien;
	
			// Flag to note that the table is currently being destroyed - no action
			// should be taken
			settings.bDestroying = true;
	
			// Fire off the destroy callbacks for plug-ins etc
			_fnCallbackFire( settings, "aoDestroyCallback", "destroy", [settings] );
	
			// If not being removed from the document, make all columns visible
			if ( ! remove ) {
				new _Api( settings ).columns().visible( true );
			}
	
			// Blitz all `DT` namespaced events (these are internal events, the
			// lowercase, `dt` events are user subscribed and they are responsible
			// for removing them
			jqWrapper.off('.DT').find(':not(tbody *)').off('.DT');
			$(window).off('.DT-'+settings.sInstance);
	
			// When scrolling we had to break the table up - restore it
			if ( table != thead.parentNode ) {
				jqTable.children('thead').detach();
				jqTable.append( thead );
			}
	
			if ( tfoot && table != tfoot.parentNode ) {
				jqTable.children('tfoot').detach();
				jqTable.append( tfoot );
			}
	
			settings.aaSorting = [];
			settings.aaSortingFixed = [];
			_fnSortingClasses( settings );
	
			$( rows ).removeClass( settings.asStripeClasses.join(' ') );
	
			$('th, td', thead).removeClass( classes.sSortable+' '+
				classes.sSortableAsc+' '+classes.sSortableDesc+' '+classes.sSortableNone
			);
	
			if ( settings.bJUI ) {
				$('th span.'+classes.sSortIcon+ ', td span.'+classes.sSortIcon, thead).detach();
				$('th, td', thead).each( function () {
					var wrapper = $('div.'+classes.sSortJUIWrapper, this);
					$(this).append( wrapper.contents() );
					wrapper.detach();
				} );
			}
	
			// Add the TR elements back into the table in their original order
			jqTbody.children().detach();
			jqTbody.append( rows );
	
			// Remove the DataTables generated nodes, events and classes
			var removedMethod = remove ? 'remove' : 'detach';
			jqTable[ removedMethod ]();
			jqWrapper[ removedMethod ]();
	
			// If we need to reattach the table to the document
			if ( ! remove && orig ) {
				// insertBefore acts like appendChild if !arg[1]
				orig.insertBefore( table, settings.nTableReinsertBefore );
	
				// Restore the width of the original table - was read from the style property,
				// so we can restore directly to that
				jqTable
					.css( 'width', settings.sDestroyWidth )
					.removeClass( classes.sTable );
	
				// If the were originally stripe classes - then we add them back here.
				// Note this is not fool proof (for example if not all rows had stripe
				// classes - but it's a good effort without getting carried away
				ien = settings.asDestroyStripes.length;
	
				if ( ien ) {
					jqTbody.children().each( function (i) {
						$(this).addClass( settings.asDestroyStripes[i % ien] );
					} );
				}
			}
	
			/* Remove the settings object from the settings array */
			var idx = $.inArray( settings, DataTable.settings );
			if ( idx !== -1 ) {
				DataTable.settings.splice( idx, 1 );
			}
		} );
	} );
	
	
	// Add the `every()` method for rows, columns and cells in a compact form
	$.each( [ 'column', 'row', 'cell' ], function ( i, type ) {
		_api_register( type+'s().every()', function ( fn ) {
			var opts = this.selector.opts;
			var api = this;
	
			return this.iterator( type, function ( settings, arg1, arg2, arg3, arg4 ) {
				// Rows and columns:
				//  arg1 - index
				//  arg2 - table counter
				//  arg3 - loop counter
				//  arg4 - undefined
				// Cells:
				//  arg1 - row index
				//  arg2 - column index
				//  arg3 - table counter
				//  arg4 - loop counter
				fn.call(
					api[ type ](
						arg1,
						type==='cell' ? arg2 : opts,
						type==='cell' ? opts : undefined
					),
					arg1, arg2, arg3, arg4
				);
			} );
		} );
	} );
	
	
	// i18n method for extensions to be able to use the language object from the
	// DataTable
	_api_register( 'i18n()', function ( token, def, plural ) {
		var ctx = this.context[0];
		var resolved = _fnGetObjectDataFn( token )( ctx.oLanguage );
	
		if ( resolved === undefined ) {
			resolved = def;
		}
	
		if ( plural !== undefined && $.isPlainObject( resolved ) ) {
			resolved = resolved[ plural ] !== undefined ?
				resolved[ plural ] :
				resolved._;
		}
	
		return resolved.replace( '%d', plural ); // nb: plural might be undefined,
	} );

	/**
	 * Version string for plug-ins to check compatibility. Allowed format is
	 * `a.b.c-d` where: a:int, b:int, c:int, d:string(dev|beta|alpha). `d` is used
	 * only for non-release builds. See http://semver.org/ for more information.
	 *  @member
	 *  @type string
	 *  @default Version number
	 */
	DataTable.version = "1.10.13";

	/**
	 * Private data store, containing all of the settings objects that are
	 * created for the tables on a given page.
	 *
	 * Note that the `DataTable.settings` object is aliased to
	 * `jQuery.fn.dataTableExt` through which it may be accessed and
	 * manipulated, or `jQuery.fn.dataTable.settings`.
	 *  @member
	 *  @type array
	 *  @default []
	 *  @private
	 */
	DataTable.settings = [];

	/**
	 * Object models container, for the various models that DataTables has
	 * available to it. These models define the objects that are used to hold
	 * the active state and configuration of the table.
	 *  @namespace
	 */
	DataTable.models = {};
	
	
	
	/**
	 * Template object for the way in which DataTables holds information about
	 * search information for the global filter and individual column filters.
	 *  @namespace
	 */
	DataTable.models.oSearch = {
		/**
		 * Flag to indicate if the filtering should be case insensitive or not
		 *  @type boolean
		 *  @default true
		 */
		"bCaseInsensitive": true,
	
		/**
		 * Applied search term
		 *  @type string
		 *  @default <i>Empty string</i>
		 */
		"sSearch": "",
	
		/**
		 * Flag to indicate if the search term should be interpreted as a
		 * regular expression (true) or not (false) and therefore and special
		 * regex characters escaped.
		 *  @type boolean
		 *  @default false
		 */
		"bRegex": false,
	
		/**
		 * Flag to indicate if DataTables is to use its smart filtering or not.
		 *  @type boolean
		 *  @default true
		 */
		"bSmart": true
	};
	
	
	
	
	/**
	 * Template object for the way in which DataTables holds information about
	 * each individual row. This is the object format used for the settings
	 * aoData array.
	 *  @namespace
	 */
	DataTable.models.oRow = {
		/**
		 * TR element for the row
		 *  @type node
		 *  @default null
		 */
		"nTr": null,
	
		/**
		 * Array of TD elements for each row. This is null until the row has been
		 * created.
		 *  @type array nodes
		 *  @default []
		 */
		"anCells": null,
	
		/**
		 * Data object from the original data source for the row. This is either
		 * an array if using the traditional form of DataTables, or an object if
		 * using mData options. The exact type will depend on the passed in
		 * data from the data source, or will be an array if using DOM a data
		 * source.
		 *  @type array|object
		 *  @default []
		 */
		"_aData": [],
	
		/**
		 * Sorting data cache - this array is ostensibly the same length as the
		 * number of columns (although each index is generated only as it is
		 * needed), and holds the data that is used for sorting each column in the
		 * row. We do this cache generation at the start of the sort in order that
		 * the formatting of the sort data need be done only once for each cell
		 * per sort. This array should not be read from or written to by anything
		 * other than the master sorting methods.
		 *  @type array
		 *  @default null
		 *  @private
		 */
		"_aSortData": null,
	
		/**
		 * Per cell filtering data cache. As per the sort data cache, used to
		 * increase the performance of the filtering in DataTables
		 *  @type array
		 *  @default null
		 *  @private
		 */
		"_aFilterData": null,
	
		/**
		 * Filtering data cache. This is the same as the cell filtering cache, but
		 * in this case a string rather than an array. This is easily computed with
		 * a join on `_aFilterData`, but is provided as a cache so the join isn't
		 * needed on every search (memory traded for performance)
		 *  @type array
		 *  @default null
		 *  @private
		 */
		"_sFilterRow": null,
	
		/**
		 * Cache of the class name that DataTables has applied to the row, so we
		 * can quickly look at this variable rather than needing to do a DOM check
		 * on className for the nTr property.
		 *  @type string
		 *  @default <i>Empty string</i>
		 *  @private
		 */
		"_sRowStripe": "",
	
		/**
		 * Denote if the original data source was from the DOM, or the data source
		 * object. This is used for invalidating data, so DataTables can
		 * automatically read data from the original source, unless uninstructed
		 * otherwise.
		 *  @type string
		 *  @default null
		 *  @private
		 */
		"src": null,
	
		/**
		 * Index in the aoData array. This saves an indexOf lookup when we have the
		 * object, but want to know the index
		 *  @type integer
		 *  @default -1
		 *  @private
		 */
		"idx": -1
	};
	
	
	/**
	 * Template object for the column information object in DataTables. This object
	 * is held in the settings aoColumns array and contains all the information that
	 * DataTables needs about each individual column.
	 *
	 * Note that this object is related to {@link DataTable.defaults.column}
	 * but this one is the internal data store for DataTables's cache of columns.
	 * It should NOT be manipulated outside of DataTables. Any configuration should
	 * be done through the initialisation options.
	 *  @namespace
	 */
	DataTable.models.oColumn = {
		/**
		 * Column index. This could be worked out on-the-fly with $.inArray, but it
		 * is faster to just hold it as a variable
		 *  @type integer
		 *  @default null
		 */
		"idx": null,
	
		/**
		 * A list of the columns that sorting should occur on when this column
		 * is sorted. That this property is an array allows multi-column sorting
		 * to be defined for a column (for example first name / last name columns
		 * would benefit from this). The values are integers pointing to the
		 * columns to be sorted on (typically it will be a single integer pointing
		 * at itself, but that doesn't need to be the case).
		 *  @type array
		 */
		"aDataSort": null,
	
		/**
		 * Define the sorting directions that are applied to the column, in sequence
		 * as the column is repeatedly sorted upon - i.e. the first value is used
		 * as the sorting direction when the column if first sorted (clicked on).
		 * Sort it again (click again) and it will move on to the next index.
		 * Repeat until loop.
		 *  @type array
		 */
		"asSorting": null,
	
		/**
		 * Flag to indicate if the column is searchable, and thus should be included
		 * in the filtering or not.
		 *  @type boolean
		 */
		"bSearchable": null,
	
		/**
		 * Flag to indicate if the column is sortable or not.
		 *  @type boolean
		 */
		"bSortable": null,
	
		/**
		 * Flag to indicate if the column is currently visible in the table or not
		 *  @type boolean
		 */
		"bVisible": null,
	
		/**
		 * Store for manual type assignment using the `column.type` option. This
		 * is held in store so we can manipulate the column's `sType` property.
		 *  @type string
		 *  @default null
		 *  @private
		 */
		"_sManualType": null,
	
		/**
		 * Flag to indicate if HTML5 data attributes should be used as the data
		 * source for filtering or sorting. True is either are.
		 *  @type boolean
		 *  @default false
		 *  @private
		 */
		"_bAttrSrc": false,
	
		/**
		 * Developer definable function that is called whenever a cell is created (Ajax source,
		 * etc) or processed for input (DOM source). This can be used as a compliment to mRender
		 * allowing you to modify the DOM element (add background colour for example) when the
		 * element is available.
		 *  @type function
		 *  @param {element} nTd The TD node that has been created
		 *  @param {*} sData The Data for the cell
		 *  @param {array|object} oData The data for the whole row
		 *  @param {int} iRow The row index for the aoData data store
		 *  @default null
		 */
		"fnCreatedCell": null,
	
		/**
		 * Function to get data from a cell in a column. You should <b>never</b>
		 * access data directly through _aData internally in DataTables - always use
		 * the method attached to this property. It allows mData to function as
		 * required. This function is automatically assigned by the column
		 * initialisation method
		 *  @type function
		 *  @param {array|object} oData The data array/object for the array
		 *    (i.e. aoData[]._aData)
		 *  @param {string} sSpecific The specific data type you want to get -
		 *    'display', 'type' 'filter' 'sort'
		 *  @returns {*} The data for the cell from the given row's data
		 *  @default null
		 */
		"fnGetData": null,
	
		/**
		 * Function to set data for a cell in the column. You should <b>never</b>
		 * set the data directly to _aData internally in DataTables - always use
		 * this method. It allows mData to function as required. This function
		 * is automatically assigned by the column initialisation method
		 *  @type function
		 *  @param {array|object} oData The data array/object for the array
		 *    (i.e. aoData[]._aData)
		 *  @param {*} sValue Value to set
		 *  @default null
		 */
		"fnSetData": null,
	
		/**
		 * Property to read the value for the cells in the column from the data
		 * source array / object. If null, then the default content is used, if a
		 * function is given then the return from the function is used.
		 *  @type function|int|string|null
		 *  @default null
		 */
		"mData": null,
	
		/**
		 * Partner property to mData which is used (only when defined) to get
		 * the data - i.e. it is basically the same as mData, but without the
		 * 'set' option, and also the data fed to it is the result from mData.
		 * This is the rendering method to match the data method of mData.
		 *  @type function|int|string|null
		 *  @default null
		 */
		"mRender": null,
	
		/**
		 * Unique header TH/TD element for this column - this is what the sorting
		 * listener is attached to (if sorting is enabled.)
		 *  @type node
		 *  @default null
		 */
		"nTh": null,
	
		/**
		 * Unique footer TH/TD element for this column (if there is one). Not used
		 * in DataTables as such, but can be used for plug-ins to reference the
		 * footer for each column.
		 *  @type node
		 *  @default null
		 */
		"nTf": null,
	
		/**
		 * The class to apply to all TD elements in the table's TBODY for the column
		 *  @type string
		 *  @default null
		 */
		"sClass": null,
	
		/**
		 * When DataTables calculates the column widths to assign to each column,
		 * it finds the longest string in each column and then constructs a
		 * temporary table and reads the widths from that. The problem with this
		 * is that "mmm" is much wider then "iiii", but the latter is a longer
		 * string - thus the calculation can go wrong (doing it properly and putting
		 * it into an DOM object and measuring that is horribly(!) slow). Thus as
		 * a "work around" we provide this option. It will append its value to the
		 * text that is found to be the longest string for the column - i.e. padding.
		 *  @type string
		 */
		"sContentPadding": null,
	
		/**
		 * Allows a default value to be given for a column's data, and will be used
		 * whenever a null data source is encountered (this can be because mData
		 * is set to null, or because the data source itself is null).
		 *  @type string
		 *  @default null
		 */
		"sDefaultContent": null,
	
		/**
		 * Name for the column, allowing reference to the column by name as well as
		 * by index (needs a lookup to work by name).
		 *  @type string
		 */
		"sName": null,
	
		/**
		 * Custom sorting data type - defines which of the available plug-ins in
		 * afnSortData the custom sorting will use - if any is defined.
		 *  @type string
		 *  @default std
		 */
		"sSortDataType": 'std',
	
		/**
		 * Class to be applied to the header element when sorting on this column
		 *  @type string
		 *  @default null
		 */
		"sSortingClass": null,
	
		/**
		 * Class to be applied to the header element when sorting on this column -
		 * when jQuery UI theming is used.
		 *  @type string
		 *  @default null
		 */
		"sSortingClassJUI": null,
	
		/**
		 * Title of the column - what is seen in the TH element (nTh).
		 *  @type string
		 */
		"sTitle": null,
	
		/**
		 * Column sorting and filtering type
		 *  @type string
		 *  @default null
		 */
		"sType": null,
	
		/**
		 * Width of the column
		 *  @type string
		 *  @default null
		 */
		"sWidth": null,
	
		/**
		 * Width of the column when it was first "encountered"
		 *  @type string
		 *  @default null
		 */
		"sWidthOrig": null
	};
	
	
	/*
	 * Developer note: The properties of the object below are given in Hungarian
	 * notation, that was used as the interface for DataTables prior to v1.10, however
	 * from v1.10 onwards the primary interface is camel case. In order to avoid
	 * breaking backwards compatibility utterly with this change, the Hungarian
	 * version is still, internally the primary interface, but is is not documented
	 * - hence the @name tags in each doc comment. This allows a Javascript function
	 * to create a map from Hungarian notation to camel case (going the other direction
	 * would require each property to be listed, which would at around 3K to the size
	 * of DataTables, while this method is about a 0.5K hit.
	 *
	 * Ultimately this does pave the way for Hungarian notation to be dropped
	 * completely, but that is a massive amount of work and will break current
	 * installs (therefore is on-hold until v2).
	 */
	
	/**
	 * Initialisation options that can be given to DataTables at initialisation
	 * time.
	 *  @namespace
	 */
	DataTable.defaults = {
		/**
		 * An array of data to use for the table, passed in at initialisation which
		 * will be used in preference to any data which is already in the DOM. This is
		 * particularly useful for constructing tables purely in Javascript, for
		 * example with a custom Ajax call.
		 *  @type array
		 *  @default null
		 *
		 *  @dtopt Option
		 *  @name DataTable.defaults.data
		 *
		 *  @example
		 *    // Using a 2D array data source
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "data": [
		 *          ['Trident', 'Internet Explorer 4.0', 'Win 95+', 4, 'X'],
		 *          ['Trident', 'Internet Explorer 5.0', 'Win 95+', 5, 'C'],
		 *        ],
		 *        "columns": [
		 *          { "title": "Engine" },
		 *          { "title": "Browser" },
		 *          { "title": "Platform" },
		 *          { "title": "Version" },
		 *          { "title": "Grade" }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using an array of objects as a data source (`data`)
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "data": [
		 *          {
		 *            "engine":   "Trident",
		 *            "browser":  "Internet Explorer 4.0",
		 *            "platform": "Win 95+",
		 *            "version":  4,
		 *            "grade":    "X"
		 *          },
		 *          {
		 *            "engine":   "Trident",
		 *            "browser":  "Internet Explorer 5.0",
		 *            "platform": "Win 95+",
		 *            "version":  5,
		 *            "grade":    "C"
		 *          }
		 *        ],
		 *        "columns": [
		 *          { "title": "Engine",   "data": "engine" },
		 *          { "title": "Browser",  "data": "browser" },
		 *          { "title": "Platform", "data": "platform" },
		 *          { "title": "Version",  "data": "version" },
		 *          { "title": "Grade",    "data": "grade" }
		 *        ]
		 *      } );
		 *    } );
		 */
		"aaData": null,
	
	
		/**
		 * If ordering is enabled, then DataTables will perform a first pass sort on
		 * initialisation. You can define which column(s) the sort is performed
		 * upon, and the sorting direction, with this variable. The `sorting` array
		 * should contain an array for each column to be sorted initially containing
		 * the column's index and a direction string ('asc' or 'desc').
		 *  @type array
		 *  @default [[0,'asc']]
		 *
		 *  @dtopt Option
		 *  @name DataTable.defaults.order
		 *
		 *  @example
		 *    // Sort by 3rd column first, and then 4th column
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "order": [[2,'asc'], [3,'desc']]
		 *      } );
		 *    } );
		 *
		 *    // No initial sorting
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "order": []
		 *      } );
		 *    } );
		 */
		"aaSorting": [[0,'asc']],
	
	
		/**
		 * This parameter is basically identical to the `sorting` parameter, but
		 * cannot be overridden by user interaction with the table. What this means
		 * is that you could have a column (visible or hidden) which the sorting
		 * will always be forced on first - any sorting after that (from the user)
		 * will then be performed as required. This can be useful for grouping rows
		 * together.
		 *  @type array
		 *  @default null
		 *
		 *  @dtopt Option
		 *  @name DataTable.defaults.orderFixed
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "orderFixed": [[0,'asc']]
		 *      } );
		 *    } )
		 */
		"aaSortingFixed": [],
	
	
		/**
		 * DataTables can be instructed to load data to display in the table from a
		 * Ajax source. This option defines how that Ajax call is made and where to.
		 *
		 * The `ajax` property has three different modes of operation, depending on
		 * how it is defined. These are:
		 *
		 * * `string` - Set the URL from where the data should be loaded from.
		 * * `object` - Define properties for `jQuery.ajax`.
		 * * `function` - Custom data get function
		 *
		 * `string`
		 * --------
		 *
		 * As a string, the `ajax` property simply defines the URL from which
		 * DataTables will load data.
		 *
		 * `object`
		 * --------
		 *
		 * As an object, the parameters in the object are passed to
		 * [jQuery.ajax](http://api.jquery.com/jQuery.ajax/) allowing fine control
		 * of the Ajax request. DataTables has a number of default parameters which
		 * you can override using this option. Please refer to the jQuery
		 * documentation for a full description of the options available, although
		 * the following parameters provide additional options in DataTables or
		 * require special consideration:
		 *
		 * * `data` - As with jQuery, `data` can be provided as an object, but it
		 *   can also be used as a function to manipulate the data DataTables sends
		 *   to the server. The function takes a single parameter, an object of
		 *   parameters with the values that DataTables has readied for sending. An
		 *   object may be returned which will be merged into the DataTables
		 *   defaults, or you can add the items to the object that was passed in and
		 *   not return anything from the function. This supersedes `fnServerParams`
		 *   from DataTables 1.9-.
		 *
		 * * `dataSrc` - By default DataTables will look for the property `data` (or
		 *   `aaData` for compatibility with DataTables 1.9-) when obtaining data
		 *   from an Ajax source or for server-side processing - this parameter
		 *   allows that property to be changed. You can use Javascript dotted
		 *   object notation to get a data source for multiple levels of nesting, or
		 *   it my be used as a function. As a function it takes a single parameter,
		 *   the JSON returned from the server, which can be manipulated as
		 *   required, with the returned value being that used by DataTables as the
		 *   data source for the table. This supersedes `sAjaxDataProp` from
		 *   DataTables 1.9-.
		 *
		 * * `success` - Should not be overridden it is used internally in
		 *   DataTables. To manipulate / transform the data returned by the server
		 *   use `ajax.dataSrc`, or use `ajax` as a function (see below).
		 *
		 * `function`
		 * ----------
		 *
		 * As a function, making the Ajax call is left up to yourself allowing
		 * complete control of the Ajax request. Indeed, if desired, a method other
		 * than Ajax could be used to obtain the required data, such as Web storage
		 * or an AIR database.
		 *
		 * The function is given four parameters and no return is required. The
		 * parameters are:
		 *
		 * 1. _object_ - Data to send to the server
		 * 2. _function_ - Callback function that must be executed when the required
		 *    data has been obtained. That data should be passed into the callback
		 *    as the only parameter
		 * 3. _object_ - DataTables settings object for the table
		 *
		 * Note that this supersedes `fnServerData` from DataTables 1.9-.
		 *
		 *  @type string|object|function
		 *  @default null
		 *
		 *  @dtopt Option
		 *  @name DataTable.defaults.ajax
		 *  @since 1.10.0
		 *
		 * @example
		 *   // Get JSON data from a file via Ajax.
		 *   // Note DataTables expects data in the form `{ data: [ ...data... ] }` by default).
		 *   $('#example').dataTable( {
		 *     "ajax": "data.json"
		 *   } );
		 *
		 * @example
		 *   // Get JSON data from a file via Ajax, using `dataSrc` to change
		 *   // `data` to `tableData` (i.e. `{ tableData: [ ...data... ] }`)
		 *   $('#example').dataTable( {
		 *     "ajax": {
		 *       "url": "data.json",
		 *       "dataSrc": "tableData"
		 *     }
		 *   } );
		 *
		 * @example
		 *   // Get JSON data from a file via Ajax, using `dataSrc` to read data
		 *   // from a plain array rather than an array in an object
		 *   $('#example').dataTable( {
		 *     "ajax": {
		 *       "url": "data.json",
		 *       "dataSrc": ""
		 *     }
		 *   } );
		 *
		 * @example
		 *   // Manipulate the data returned from the server - add a link to data
		 *   // (note this can, should, be done using `render` for the column - this
		 *   // is just a simple example of how the data can be manipulated).
		 *   $('#example').dataTable( {
		 *     "ajax": {
		 *       "url": "data.json",
		 *       "dataSrc": function ( json ) {
		 *         for ( var i=0, ien=json.length ; i<ien ; i++ ) {
		 *           json[i][0] = '<a href="/message/'+json[i][0]+'>View message</a>';
		 *         }
		 *         return json;
		 *       }
		 *     }
		 *   } );
		 *
		 * @example
		 *   // Add data to the request
		 *   $('#example').dataTable( {
		 *     "ajax": {
		 *       "url": "data.json",
		 *       "data": function ( d ) {
		 *         return {
		 *           "extra_search": $('#extra').val()
		 *         };
		 *       }
		 *     }
		 *   } );
		 *
		 * @example
		 *   // Send request as POST
		 *   $('#example').dataTable( {
		 *     "ajax": {
		 *       "url": "data.json",
		 *       "type": "POST"
		 *     }
		 *   } );
		 *
		 * @example
		 *   // Get the data from localStorage (could interface with a form for
		 *   // adding, editing and removing rows).
		 *   $('#example').dataTable( {
		 *     "ajax": function (data, callback, settings) {
		 *       callback(
		 *         JSON.parse( localStorage.getItem('dataTablesData') )
		 *       );
		 *     }
		 *   } );
		 */
		"ajax": null,
	
	
		/**
		 * This parameter allows you to readily specify the entries in the length drop
		 * down menu that DataTables shows when pagination is enabled. It can be
		 * either a 1D array of options which will be used for both the displayed
		 * option and the value, or a 2D array which will use the array in the first
		 * position as the value, and the array in the second position as the
		 * displayed options (useful for language strings such as 'All').
		 *
		 * Note that the `pageLength` property will be automatically set to the
		 * first value given in this array, unless `pageLength` is also provided.
		 *  @type array
		 *  @default [ 10, 25, 50, 100 ]
		 *
		 *  @dtopt Option
		 *  @name DataTable.defaults.lengthMenu
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "lengthMenu": [[10, 25, 50, -1], [10, 25, 50, "All"]]
		 *      } );
		 *    } );
		 */
		"aLengthMenu": [ 10, 25, 50, 100 ],
	
	
		/**
		 * The `columns` option in the initialisation parameter allows you to define
		 * details about the way individual columns behave. For a full list of
		 * column options that can be set, please see
		 * {@link DataTable.defaults.column}. Note that if you use `columns` to
		 * define your columns, you must have an entry in the array for every single
		 * column that you have in your table (these can be null if you don't which
		 * to specify any options).
		 *  @member
		 *
		 *  @name DataTable.defaults.column
		 */
		"aoColumns": null,
	
		/**
		 * Very similar to `columns`, `columnDefs` allows you to target a specific
		 * column, multiple columns, or all columns, using the `targets` property of
		 * each object in the array. This allows great flexibility when creating
		 * tables, as the `columnDefs` arrays can be of any length, targeting the
		 * columns you specifically want. `columnDefs` may use any of the column
		 * options available: {@link DataTable.defaults.column}, but it _must_
		 * have `targets` defined in each object in the array. Values in the `targets`
		 * array may be:
		 *   <ul>
		 *     <li>a string - class name will be matched on the TH for the column</li>
		 *     <li>0 or a positive integer - column index counting from the left</li>
		 *     <li>a negative integer - column index counting from the right</li>
		 *     <li>the string "_all" - all columns (i.e. assign a default)</li>
		 *   </ul>
		 *  @member
		 *
		 *  @name DataTable.defaults.columnDefs
		 */
		"aoColumnDefs": null,
	
	
		/**
		 * Basically the same as `search`, this parameter defines the individual column
		 * filtering state at initialisation time. The array must be of the same size
		 * as the number of columns, and each element be an object with the parameters
		 * `search` and `escapeRegex` (the latter is optional). 'null' is also
		 * accepted and the default will be used.
		 *  @type array
		 *  @default []
		 *
		 *  @dtopt Option
		 *  @name DataTable.defaults.searchCols
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "searchCols": [
		 *          null,
		 *          { "search": "My filter" },
		 *          null,
		 *          { "search": "^[0-9]", "escapeRegex": false }
		 *        ]
		 *      } );
		 *    } )
		 */
		"aoSearchCols": [],
	
	
		/**
		 * An array of CSS classes that should be applied to displayed rows. This
		 * array may be of any length, and DataTables will apply each class
		 * sequentially, looping when required.
		 *  @type array
		 *  @default null <i>Will take the values determined by the `oClasses.stripe*`
		 *    options</i>
		 *
		 *  @dtopt Option
		 *  @name DataTable.defaults.stripeClasses
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stripeClasses": [ 'strip1', 'strip2', 'strip3' ]
		 *      } );
		 *    } )
		 */
		"asStripeClasses": null,
	
	
		/**
		 * Enable or disable automatic column width calculation. This can be disabled
		 * as an optimisation (it takes some time to calculate the widths) if the
		 * tables widths are passed in using `columns`.
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.autoWidth
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "autoWidth": false
		 *      } );
		 *    } );
		 */
		"bAutoWidth": true,
	
	
		/**
		 * Deferred rendering can provide DataTables with a huge speed boost when you
		 * are using an Ajax or JS data source for the table. This option, when set to
		 * true, will cause DataTables to defer the creation of the table elements for
		 * each row until they are needed for a draw - saving a significant amount of
		 * time.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.deferRender
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "ajax": "sources/arrays.txt",
		 *        "deferRender": true
		 *      } );
		 *    } );
		 */
		"bDeferRender": false,
	
	
		/**
		 * Replace a DataTable which matches the given selector and replace it with
		 * one which has the properties of the new initialisation object passed. If no
		 * table matches the selector, then the new DataTable will be constructed as
		 * per normal.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.destroy
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "srollY": "200px",
		 *        "paginate": false
		 *      } );
		 *
		 *      // Some time later....
		 *      $('#example').dataTable( {
		 *        "filter": false,
		 *        "destroy": true
		 *      } );
		 *    } );
		 */
		"bDestroy": false,
	
	
		/**
		 * Enable or disable filtering of data. Filtering in DataTables is "smart" in
		 * that it allows the end user to input multiple words (space separated) and
		 * will match a row containing those words, even if not in the order that was
		 * specified (this allow matching across multiple columns). Note that if you
		 * wish to use filtering in DataTables this must remain 'true' - to remove the
		 * default filtering input box and retain filtering abilities, please use
		 * {@link DataTable.defaults.dom}.
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.searching
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "searching": false
		 *      } );
		 *    } );
		 */
		"bFilter": true,
	
	
		/**
		 * Enable or disable the table information display. This shows information
		 * about the data that is currently visible on the page, including information
		 * about filtered data if that action is being performed.
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.info
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "info": false
		 *      } );
		 *    } );
		 */
		"bInfo": true,
	
	
		/**
		 * Enable jQuery UI ThemeRoller support (required as ThemeRoller requires some
		 * slightly different and additional mark-up from what DataTables has
		 * traditionally used).
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.jQueryUI
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "jQueryUI": true
		 *      } );
		 *    } );
		 */
		"bJQueryUI": false,
	
	
		/**
		 * Allows the end user to select the size of a formatted page from a select
		 * menu (sizes are 10, 25, 50 and 100). Requires pagination (`paginate`).
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.lengthChange
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "lengthChange": false
		 *      } );
		 *    } );
		 */
		"bLengthChange": true,
	
	
		/**
		 * Enable or disable pagination.
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.paging
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "paging": false
		 *      } );
		 *    } );
		 */
		"bPaginate": true,
	
	
		/**
		 * Enable or disable the display of a 'processing' indicator when the table is
		 * being processed (e.g. a sort). This is particularly useful for tables with
		 * large amounts of data where it can take a noticeable amount of time to sort
		 * the entries.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.processing
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "processing": true
		 *      } );
		 *    } );
		 */
		"bProcessing": false,
	
	
		/**
		 * Retrieve the DataTables object for the given selector. Note that if the
		 * table has already been initialised, this parameter will cause DataTables
		 * to simply return the object that has already been set up - it will not take
		 * account of any changes you might have made to the initialisation object
		 * passed to DataTables (setting this parameter to true is an acknowledgement
		 * that you understand this). `destroy` can be used to reinitialise a table if
		 * you need.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.retrieve
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      initTable();
		 *      tableActions();
		 *    } );
		 *
		 *    function initTable ()
		 *    {
		 *      return $('#example').dataTable( {
		 *        "scrollY": "200px",
		 *        "paginate": false,
		 *        "retrieve": true
		 *      } );
		 *    }
		 *
		 *    function tableActions ()
		 *    {
		 *      var table = initTable();
		 *      // perform API operations with oTable
		 *    }
		 */
		"bRetrieve": false,
	
	
		/**
		 * When vertical (y) scrolling is enabled, DataTables will force the height of
		 * the table's viewport to the given height at all times (useful for layout).
		 * However, this can look odd when filtering data down to a small data set,
		 * and the footer is left "floating" further down. This parameter (when
		 * enabled) will cause DataTables to collapse the table's viewport down when
		 * the result set will fit within the given Y height.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.scrollCollapse
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "scrollY": "200",
		 *        "scrollCollapse": true
		 *      } );
		 *    } );
		 */
		"bScrollCollapse": false,
	
	
		/**
		 * Configure DataTables to use server-side processing. Note that the
		 * `ajax` parameter must also be given in order to give DataTables a
		 * source to obtain the required data for each draw.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Features
		 *  @dtopt Server-side
		 *  @name DataTable.defaults.serverSide
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "serverSide": true,
		 *        "ajax": "xhr.php"
		 *      } );
		 *    } );
		 */
		"bServerSide": false,
	
	
		/**
		 * Enable or disable sorting of columns. Sorting of individual columns can be
		 * disabled by the `sortable` option for each column.
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.ordering
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "ordering": false
		 *      } );
		 *    } );
		 */
		"bSort": true,
	
	
		/**
		 * Enable or display DataTables' ability to sort multiple columns at the
		 * same time (activated by shift-click by the user).
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.orderMulti
		 *
		 *  @example
		 *    // Disable multiple column sorting ability
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "orderMulti": false
		 *      } );
		 *    } );
		 */
		"bSortMulti": true,
	
	
		/**
		 * Allows control over whether DataTables should use the top (true) unique
		 * cell that is found for a single column, or the bottom (false - default).
		 * This is useful when using complex headers.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.orderCellsTop
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "orderCellsTop": true
		 *      } );
		 *    } );
		 */
		"bSortCellsTop": false,
	
	
		/**
		 * Enable or disable the addition of the classes `sorting\_1`, `sorting\_2` and
		 * `sorting\_3` to the columns which are currently being sorted on. This is
		 * presented as a feature switch as it can increase processing time (while
		 * classes are removed and added) so for large data sets you might want to
		 * turn this off.
		 *  @type boolean
		 *  @default true
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.orderClasses
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "orderClasses": false
		 *      } );
		 *    } );
		 */
		"bSortClasses": true,
	
	
		/**
		 * Enable or disable state saving. When enabled HTML5 `localStorage` will be
		 * used to save table display information such as pagination information,
		 * display length, filtering and sorting. As such when the end user reloads
		 * the page the display display will match what thy had previously set up.
		 *
		 * Due to the use of `localStorage` the default state saving is not supported
		 * in IE6 or 7. If state saving is required in those browsers, use
		 * `stateSaveCallback` to provide a storage solution such as cookies.
		 *  @type boolean
		 *  @default false
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.stateSave
		 *
		 *  @example
		 *    $(document).ready( function () {
		 *      $('#example').dataTable( {
		 *        "stateSave": true
		 *      } );
		 *    } );
		 */
		"bStateSave": false,
	
	
		/**
		 * This function is called when a TR element is created (and all TD child
		 * elements have been inserted), or registered if using a DOM source, allowing
		 * manipulation of the TR element (adding classes etc).
		 *  @type function
		 *  @param {node} row "TR" element for the current row
		 *  @param {array} data Raw data array for this row
		 *  @param {int} dataIndex The index of this row in the internal aoData array
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.createdRow
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "createdRow": function( row, data, dataIndex ) {
		 *          // Bold the grade for all 'A' grade browsers
		 *          if ( data[4] == "A" )
		 *          {
		 *            $('td:eq(4)', row).html( '<b>A</b>' );
		 *          }
		 *        }
		 *      } );
		 *    } );
		 */
		"fnCreatedRow": null,
	
	
		/**
		 * This function is called on every 'draw' event, and allows you to
		 * dynamically modify any aspect you want about the created DOM.
		 *  @type function
		 *  @param {object} settings DataTables settings object
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.drawCallback
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "drawCallback": function( settings ) {
		 *          alert( 'DataTables has redrawn the table' );
		 *        }
		 *      } );
		 *    } );
		 */
		"fnDrawCallback": null,
	
	
		/**
		 * Identical to fnHeaderCallback() but for the table footer this function
		 * allows you to modify the table footer on every 'draw' event.
		 *  @type function
		 *  @param {node} foot "TR" element for the footer
		 *  @param {array} data Full table data (as derived from the original HTML)
		 *  @param {int} start Index for the current display starting point in the
		 *    display array
		 *  @param {int} end Index for the current display ending point in the
		 *    display array
		 *  @param {array int} display Index array to translate the visual position
		 *    to the full data array
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.footerCallback
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "footerCallback": function( tfoot, data, start, end, display ) {
		 *          tfoot.getElementsByTagName('th')[0].innerHTML = "Starting index is "+start;
		 *        }
		 *      } );
		 *    } )
		 */
		"fnFooterCallback": null,
	
	
		/**
		 * When rendering large numbers in the information element for the table
		 * (i.e. "Showing 1 to 10 of 57 entries") DataTables will render large numbers
		 * to have a comma separator for the 'thousands' units (e.g. 1 million is
		 * rendered as "1,000,000") to help readability for the end user. This
		 * function will override the default method DataTables uses.
		 *  @type function
		 *  @member
		 *  @param {int} toFormat number to be formatted
		 *  @returns {string} formatted string for DataTables to show the number
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.formatNumber
		 *
		 *  @example
		 *    // Format a number using a single quote for the separator (note that
		 *    // this can also be done with the language.thousands option)
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "formatNumber": function ( toFormat ) {
		 *          return toFormat.toString().replace(
		 *            /\B(?=(\d{3})+(?!\d))/g, "'"
		 *          );
		 *        };
		 *      } );
		 *    } );
		 */
		"fnFormatNumber": function ( toFormat ) {
			return toFormat.toString().replace(
				/\B(?=(\d{3})+(?!\d))/g,
				this.oLanguage.sThousands
			);
		},
	
	
		/**
		 * This function is called on every 'draw' event, and allows you to
		 * dynamically modify the header row. This can be used to calculate and
		 * display useful information about the table.
		 *  @type function
		 *  @param {node} head "TR" element for the header
		 *  @param {array} data Full table data (as derived from the original HTML)
		 *  @param {int} start Index for the current display starting point in the
		 *    display array
		 *  @param {int} end Index for the current display ending point in the
		 *    display array
		 *  @param {array int} display Index array to translate the visual position
		 *    to the full data array
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.headerCallback
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "fheaderCallback": function( head, data, start, end, display ) {
		 *          head.getElementsByTagName('th')[0].innerHTML = "Displaying "+(end-start)+" records";
		 *        }
		 *      } );
		 *    } )
		 */
		"fnHeaderCallback": null,
	
	
		/**
		 * The information element can be used to convey information about the current
		 * state of the table. Although the internationalisation options presented by
		 * DataTables are quite capable of dealing with most customisations, there may
		 * be times where you wish to customise the string further. This callback
		 * allows you to do exactly that.
		 *  @type function
		 *  @param {object} oSettings DataTables settings object
		 *  @param {int} start Starting position in data for the draw
		 *  @param {int} end End position in data for the draw
		 *  @param {int} max Total number of rows in the table (regardless of
		 *    filtering)
		 *  @param {int} total Total number of rows in the data set, after filtering
		 *  @param {string} pre The string that DataTables has formatted using it's
		 *    own rules
		 *  @returns {string} The string to be displayed in the information element.
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.infoCallback
		 *
		 *  @example
		 *    $('#example').dataTable( {
		 *      "infoCallback": function( settings, start, end, max, total, pre ) {
		 *        return start +" to "+ end;
		 *      }
		 *    } );
		 */
		"fnInfoCallback": null,
	
	
		/**
		 * Called when the table has been initialised. Normally DataTables will
		 * initialise sequentially and there will be no need for this function,
		 * however, this does not hold true when using external language information
		 * since that is obtained using an async XHR call.
		 *  @type function
		 *  @param {object} settings DataTables settings object
		 *  @param {object} json The JSON object request from the server - only
		 *    present if client-side Ajax sourced data is used
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.initComplete
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "initComplete": function(settings, json) {
		 *          alert( 'DataTables has finished its initialisation.' );
		 *        }
		 *      } );
		 *    } )
		 */
		"fnInitComplete": null,
	
	
		/**
		 * Called at the very start of each table draw and can be used to cancel the
		 * draw by returning false, any other return (including undefined) results in
		 * the full draw occurring).
		 *  @type function
		 *  @param {object} settings DataTables settings object
		 *  @returns {boolean} False will cancel the draw, anything else (including no
		 *    return) will allow it to complete.
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.preDrawCallback
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "preDrawCallback": function( settings ) {
		 *          if ( $('#test').val() == 1 ) {
		 *            return false;
		 *          }
		 *        }
		 *      } );
		 *    } );
		 */
		"fnPreDrawCallback": null,
	
	
		/**
		 * This function allows you to 'post process' each row after it have been
		 * generated for each table draw, but before it is rendered on screen. This
		 * function might be used for setting the row class name etc.
		 *  @type function
		 *  @param {node} row "TR" element for the current row
		 *  @param {array} data Raw data array for this row
		 *  @param {int} displayIndex The display index for the current table draw
		 *  @param {int} displayIndexFull The index of the data in the full list of
		 *    rows (after filtering)
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.rowCallback
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "rowCallback": function( row, data, displayIndex, displayIndexFull ) {
		 *          // Bold the grade for all 'A' grade browsers
		 *          if ( data[4] == "A" ) {
		 *            $('td:eq(4)', row).html( '<b>A</b>' );
		 *          }
		 *        }
		 *      } );
		 *    } );
		 */
		"fnRowCallback": null,
	
	
		/**
		 * __Deprecated__ The functionality provided by this parameter has now been
		 * superseded by that provided through `ajax`, which should be used instead.
		 *
		 * This parameter allows you to override the default function which obtains
		 * the data from the server so something more suitable for your application.
		 * For example you could use POST data, or pull information from a Gears or
		 * AIR database.
		 *  @type function
		 *  @member
		 *  @param {string} source HTTP source to obtain the data from (`ajax`)
		 *  @param {array} data A key/value pair object containing the data to send
		 *    to the server
		 *  @param {function} callback to be called on completion of the data get
		 *    process that will draw the data on the page.
		 *  @param {object} settings DataTables settings object
		 *
		 *  @dtopt Callbacks
		 *  @dtopt Server-side
		 *  @name DataTable.defaults.serverData
		 *
		 *  @deprecated 1.10. Please use `ajax` for this functionality now.
		 */
		"fnServerData": null,
	
	
		/**
		 * __Deprecated__ The functionality provided by this parameter has now been
		 * superseded by that provided through `ajax`, which should be used instead.
		 *
		 *  It is often useful to send extra data to the server when making an Ajax
		 * request - for example custom filtering information, and this callback
		 * function makes it trivial to send extra information to the server. The
		 * passed in parameter is the data set that has been constructed by
		 * DataTables, and you can add to this or modify it as you require.
		 *  @type function
		 *  @param {array} data Data array (array of objects which are name/value
		 *    pairs) that has been constructed by DataTables and will be sent to the
		 *    server. In the case of Ajax sourced data with server-side processing
		 *    this will be an empty array, for server-side processing there will be a
		 *    significant number of parameters!
		 *  @returns {undefined} Ensure that you modify the data array passed in,
		 *    as this is passed by reference.
		 *
		 *  @dtopt Callbacks
		 *  @dtopt Server-side
		 *  @name DataTable.defaults.serverParams
		 *
		 *  @deprecated 1.10. Please use `ajax` for this functionality now.
		 */
		"fnServerParams": null,
	
	
		/**
		 * Load the table state. With this function you can define from where, and how, the
		 * state of a table is loaded. By default DataTables will load from `localStorage`
		 * but you might wish to use a server-side database or cookies.
		 *  @type function
		 *  @member
		 *  @param {object} settings DataTables settings object
		 *  @param {object} callback Callback that can be executed when done. It
		 *    should be passed the loaded state object.
		 *  @return {object} The DataTables state object to be loaded
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.stateLoadCallback
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stateSave": true,
		 *        "stateLoadCallback": function (settings, callback) {
		 *          $.ajax( {
		 *            "url": "/state_load",
		 *            "dataType": "json",
		 *            "success": function (json) {
		 *              callback( json );
		 *            }
		 *          } );
		 *        }
		 *      } );
		 *    } );
		 */
		"fnStateLoadCallback": function ( settings ) {
			try {
				return JSON.parse(
					(settings.iStateDuration === -1 ? sessionStorage : localStorage).getItem(
						'DataTables_'+settings.sInstance+'_'+location.pathname
					)
				);
			} catch (e) {}
		},
	
	
		/**
		 * Callback which allows modification of the saved state prior to loading that state.
		 * This callback is called when the table is loading state from the stored data, but
		 * prior to the settings object being modified by the saved state. Note that for
		 * plug-in authors, you should use the `stateLoadParams` event to load parameters for
		 * a plug-in.
		 *  @type function
		 *  @param {object} settings DataTables settings object
		 *  @param {object} data The state object that is to be loaded
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.stateLoadParams
		 *
		 *  @example
		 *    // Remove a saved filter, so filtering is never loaded
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stateSave": true,
		 *        "stateLoadParams": function (settings, data) {
		 *          data.oSearch.sSearch = "";
		 *        }
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Disallow state loading by returning false
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stateSave": true,
		 *        "stateLoadParams": function (settings, data) {
		 *          return false;
		 *        }
		 *      } );
		 *    } );
		 */
		"fnStateLoadParams": null,
	
	
		/**
		 * Callback that is called when the state has been loaded from the state saving method
		 * and the DataTables settings object has been modified as a result of the loaded state.
		 *  @type function
		 *  @param {object} settings DataTables settings object
		 *  @param {object} data The state object that was loaded
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.stateLoaded
		 *
		 *  @example
		 *    // Show an alert with the filtering value that was saved
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stateSave": true,
		 *        "stateLoaded": function (settings, data) {
		 *          alert( 'Saved filter was: '+data.oSearch.sSearch );
		 *        }
		 *      } );
		 *    } );
		 */
		"fnStateLoaded": null,
	
	
		/**
		 * Save the table state. This function allows you to define where and how the state
		 * information for the table is stored By default DataTables will use `localStorage`
		 * but you might wish to use a server-side database or cookies.
		 *  @type function
		 *  @member
		 *  @param {object} settings DataTables settings object
		 *  @param {object} data The state object to be saved
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.stateSaveCallback
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stateSave": true,
		 *        "stateSaveCallback": function (settings, data) {
		 *          // Send an Ajax request to the server with the state object
		 *          $.ajax( {
		 *            "url": "/state_save",
		 *            "data": data,
		 *            "dataType": "json",
		 *            "method": "POST"
		 *            "success": function () {}
		 *          } );
		 *        }
		 *      } );
		 *    } );
		 */
		"fnStateSaveCallback": function ( settings, data ) {
			try {
				(settings.iStateDuration === -1 ? sessionStorage : localStorage).setItem(
					'DataTables_'+settings.sInstance+'_'+location.pathname,
					JSON.stringify( data )
				);
			} catch (e) {}
		},
	
	
		/**
		 * Callback which allows modification of the state to be saved. Called when the table
		 * has changed state a new state save is required. This method allows modification of
		 * the state saving object prior to actually doing the save, including addition or
		 * other state properties or modification. Note that for plug-in authors, you should
		 * use the `stateSaveParams` event to save parameters for a plug-in.
		 *  @type function
		 *  @param {object} settings DataTables settings object
		 *  @param {object} data The state object to be saved
		 *
		 *  @dtopt Callbacks
		 *  @name DataTable.defaults.stateSaveParams
		 *
		 *  @example
		 *    // Remove a saved filter, so filtering is never saved
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stateSave": true,
		 *        "stateSaveParams": function (settings, data) {
		 *          data.oSearch.sSearch = "";
		 *        }
		 *      } );
		 *    } );
		 */
		"fnStateSaveParams": null,
	
	
		/**
		 * Duration for which the saved state information is considered valid. After this period
		 * has elapsed the state will be returned to the default.
		 * Value is given in seconds.
		 *  @type int
		 *  @default 7200 <i>(2 hours)</i>
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.stateDuration
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "stateDuration": 60*60*24; // 1 day
		 *      } );
		 *    } )
		 */
		"iStateDuration": 7200,
	
	
		/**
		 * When enabled DataTables will not make a request to the server for the first
		 * page draw - rather it will use the data already on the page (no sorting etc
		 * will be applied to it), thus saving on an XHR at load time. `deferLoading`
		 * is used to indicate that deferred loading is required, but it is also used
		 * to tell DataTables how many records there are in the full table (allowing
		 * the information element and pagination to be displayed correctly). In the case
		 * where a filtering is applied to the table on initial load, this can be
		 * indicated by giving the parameter as an array, where the first element is
		 * the number of records available after filtering and the second element is the
		 * number of records without filtering (allowing the table information element
		 * to be shown correctly).
		 *  @type int | array
		 *  @default null
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.deferLoading
		 *
		 *  @example
		 *    // 57 records available in the table, no filtering applied
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "serverSide": true,
		 *        "ajax": "scripts/server_processing.php",
		 *        "deferLoading": 57
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // 57 records after filtering, 100 without filtering (an initial filter applied)
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "serverSide": true,
		 *        "ajax": "scripts/server_processing.php",
		 *        "deferLoading": [ 57, 100 ],
		 *        "search": {
		 *          "search": "my_filter"
		 *        }
		 *      } );
		 *    } );
		 */
		"iDeferLoading": null,
	
	
		/**
		 * Number of rows to display on a single page when using pagination. If
		 * feature enabled (`lengthChange`) then the end user will be able to override
		 * this to a custom setting using a pop-up menu.
		 *  @type int
		 *  @default 10
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.pageLength
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "pageLength": 50
		 *      } );
		 *    } )
		 */
		"iDisplayLength": 10,
	
	
		/**
		 * Define the starting point for data display when using DataTables with
		 * pagination. Note that this parameter is the number of records, rather than
		 * the page number, so if you have 10 records per page and want to start on
		 * the third page, it should be "20".
		 *  @type int
		 *  @default 0
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.displayStart
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "displayStart": 20
		 *      } );
		 *    } )
		 */
		"iDisplayStart": 0,
	
	
		/**
		 * By default DataTables allows keyboard navigation of the table (sorting, paging,
		 * and filtering) by adding a `tabindex` attribute to the required elements. This
		 * allows you to tab through the controls and press the enter key to activate them.
		 * The tabindex is default 0, meaning that the tab follows the flow of the document.
		 * You can overrule this using this parameter if you wish. Use a value of -1 to
		 * disable built-in keyboard navigation.
		 *  @type int
		 *  @default 0
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.tabIndex
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "tabIndex": 1
		 *      } );
		 *    } );
		 */
		"iTabIndex": 0,
	
	
		/**
		 * Classes that DataTables assigns to the various components and features
		 * that it adds to the HTML table. This allows classes to be configured
		 * during initialisation in addition to through the static
		 * {@link DataTable.ext.oStdClasses} object).
		 *  @namespace
		 *  @name DataTable.defaults.classes
		 */
		"oClasses": {},
	
	
		/**
		 * All strings that DataTables uses in the user interface that it creates
		 * are defined in this object, allowing you to modified them individually or
		 * completely replace them all as required.
		 *  @namespace
		 *  @name DataTable.defaults.language
		 */
		"oLanguage": {
			/**
			 * Strings that are used for WAI-ARIA labels and controls only (these are not
			 * actually visible on the page, but will be read by screenreaders, and thus
			 * must be internationalised as well).
			 *  @namespace
			 *  @name DataTable.defaults.language.aria
			 */
			"oAria": {
				/**
				 * ARIA label that is added to the table headers when the column may be
				 * sorted ascending by activing the column (click or return when focused).
				 * Note that the column header is prefixed to this string.
				 *  @type string
				 *  @default : activate to sort column ascending
				 *
				 *  @dtopt Language
				 *  @name DataTable.defaults.language.aria.sortAscending
				 *
				 *  @example
				 *    $(document).ready( function() {
				 *      $('#example').dataTable( {
				 *        "language": {
				 *          "aria": {
				 *            "sortAscending": " - click/return to sort ascending"
				 *          }
				 *        }
				 *      } );
				 *    } );
				 */
				"sSortAscending": ": activate to sort column ascending",
	
				/**
				 * ARIA label that is added to the table headers when the column may be
				 * sorted descending by activing the column (click or return when focused).
				 * Note that the column header is prefixed to this string.
				 *  @type string
				 *  @default : activate to sort column ascending
				 *
				 *  @dtopt Language
				 *  @name DataTable.defaults.language.aria.sortDescending
				 *
				 *  @example
				 *    $(document).ready( function() {
				 *      $('#example').dataTable( {
				 *        "language": {
				 *          "aria": {
				 *            "sortDescending": " - click/return to sort descending"
				 *          }
				 *        }
				 *      } );
				 *    } );
				 */
				"sSortDescending": ": activate to sort column descending"
			},
	
			/**
			 * Pagination string used by DataTables for the built-in pagination
			 * control types.
			 *  @namespace
			 *  @name DataTable.defaults.language.paginate
			 */
			"oPaginate": {
				/**
				 * Text to use when using the 'full_numbers' type of pagination for the
				 * button to take the user to the first page.
				 *  @type string
				 *  @default First
				 *
				 *  @dtopt Language
				 *  @name DataTable.defaults.language.paginate.first
				 *
				 *  @example
				 *    $(document).ready( function() {
				 *      $('#example').dataTable( {
				 *        "language": {
				 *          "paginate": {
				 *            "first": "First page"
				 *          }
				 *        }
				 *      } );
				 *    } );
				 */
				"sFirst": "First",
	
	
				/**
				 * Text to use when using the 'full_numbers' type of pagination for the
				 * button to take the user to the last page.
				 *  @type string
				 *  @default Last
				 *
				 *  @dtopt Language
				 *  @name DataTable.defaults.language.paginate.last
				 *
				 *  @example
				 *    $(document).ready( function() {
				 *      $('#example').dataTable( {
				 *        "language": {
				 *          "paginate": {
				 *            "last": "Last page"
				 *          }
				 *        }
				 *      } );
				 *    } );
				 */
				"sLast": "Last",
	
	
				/**
				 * Text to use for the 'next' pagination button (to take the user to the
				 * next page).
				 *  @type string
				 *  @default Next
				 *
				 *  @dtopt Language
				 *  @name DataTable.defaults.language.paginate.next
				 *
				 *  @example
				 *    $(document).ready( function() {
				 *      $('#example').dataTable( {
				 *        "language": {
				 *          "paginate": {
				 *            "next": "Next page"
				 *          }
				 *        }
				 *      } );
				 *    } );
				 */
				"sNext": "Next",
	
	
				/**
				 * Text to use for the 'previous' pagination button (to take the user to
				 * the previous page).
				 *  @type string
				 *  @default Previous
				 *
				 *  @dtopt Language
				 *  @name DataTable.defaults.language.paginate.previous
				 *
				 *  @example
				 *    $(document).ready( function() {
				 *      $('#example').dataTable( {
				 *        "language": {
				 *          "paginate": {
				 *            "previous": "Previous page"
				 *          }
				 *        }
				 *      } );
				 *    } );
				 */
				"sPrevious": "Previous"
			},
	
			/**
			 * This string is shown in preference to `zeroRecords` when the table is
			 * empty of data (regardless of filtering). Note that this is an optional
			 * parameter - if it is not given, the value of `zeroRecords` will be used
			 * instead (either the default or given value).
			 *  @type string
			 *  @default No data available in table
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.emptyTable
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "emptyTable": "No data available in table"
			 *        }
			 *      } );
			 *    } );
			 */
			"sEmptyTable": "No data available in table",
	
	
			/**
			 * This string gives information to the end user about the information
			 * that is current on display on the page. The following tokens can be
			 * used in the string and will be dynamically replaced as the table
			 * display updates. This tokens can be placed anywhere in the string, or
			 * removed as needed by the language requires:
			 *
			 * * `\_START\_` - Display index of the first record on the current page
			 * * `\_END\_` - Display index of the last record on the current page
			 * * `\_TOTAL\_` - Number of records in the table after filtering
			 * * `\_MAX\_` - Number of records in the table without filtering
			 * * `\_PAGE\_` - Current page number
			 * * `\_PAGES\_` - Total number of pages of data in the table
			 *
			 *  @type string
			 *  @default Showing _START_ to _END_ of _TOTAL_ entries
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.info
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "info": "Showing page _PAGE_ of _PAGES_"
			 *        }
			 *      } );
			 *    } );
			 */
			"sInfo": "Showing _START_ to _END_ of _TOTAL_ entries",
	
	
			/**
			 * Display information string for when the table is empty. Typically the
			 * format of this string should match `info`.
			 *  @type string
			 *  @default Showing 0 to 0 of 0 entries
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.infoEmpty
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "infoEmpty": "No entries to show"
			 *        }
			 *      } );
			 *    } );
			 */
			"sInfoEmpty": "Showing 0 to 0 of 0 entries",
	
	
			/**
			 * When a user filters the information in a table, this string is appended
			 * to the information (`info`) to give an idea of how strong the filtering
			 * is. The variable _MAX_ is dynamically updated.
			 *  @type string
			 *  @default (filtered from _MAX_ total entries)
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.infoFiltered
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "infoFiltered": " - filtering from _MAX_ records"
			 *        }
			 *      } );
			 *    } );
			 */
			"sInfoFiltered": "(filtered from _MAX_ total entries)",
	
	
			/**
			 * If can be useful to append extra information to the info string at times,
			 * and this variable does exactly that. This information will be appended to
			 * the `info` (`infoEmpty` and `infoFiltered` in whatever combination they are
			 * being used) at all times.
			 *  @type string
			 *  @default <i>Empty string</i>
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.infoPostFix
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "infoPostFix": "All records shown are derived from real information."
			 *        }
			 *      } );
			 *    } );
			 */
			"sInfoPostFix": "",
	
	
			/**
			 * This decimal place operator is a little different from the other
			 * language options since DataTables doesn't output floating point
			 * numbers, so it won't ever use this for display of a number. Rather,
			 * what this parameter does is modify the sort methods of the table so
			 * that numbers which are in a format which has a character other than
			 * a period (`.`) as a decimal place will be sorted numerically.
			 *
			 * Note that numbers with different decimal places cannot be shown in
			 * the same table and still be sortable, the table must be consistent.
			 * However, multiple different tables on the page can use different
			 * decimal place characters.
			 *  @type string
			 *  @default 
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.decimal
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "decimal": ","
			 *          "thousands": "."
			 *        }
			 *      } );
			 *    } );
			 */
			"sDecimal": "",
	
	
			/**
			 * DataTables has a build in number formatter (`formatNumber`) which is
			 * used to format large numbers that are used in the table information.
			 * By default a comma is used, but this can be trivially changed to any
			 * character you wish with this parameter.
			 *  @type string
			 *  @default ,
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.thousands
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "thousands": "'"
			 *        }
			 *      } );
			 *    } );
			 */
			"sThousands": ",",
	
	
			/**
			 * Detail the action that will be taken when the drop down menu for the
			 * pagination length option is changed. The '_MENU_' variable is replaced
			 * with a default select list of 10, 25, 50 and 100, and can be replaced
			 * with a custom select box if required.
			 *  @type string
			 *  @default Show _MENU_ entries
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.lengthMenu
			 *
			 *  @example
			 *    // Language change only
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "lengthMenu": "Display _MENU_ records"
			 *        }
			 *      } );
			 *    } );
			 *
			 *  @example
			 *    // Language and options change
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "lengthMenu": 'Display <select>'+
			 *            '<option value="10">10</option>'+
			 *            '<option value="20">20</option>'+
			 *            '<option value="30">30</option>'+
			 *            '<option value="40">40</option>'+
			 *            '<option value="50">50</option>'+
			 *            '<option value="-1">All</option>'+
			 *            '</select> records'
			 *        }
			 *      } );
			 *    } );
			 */
			"sLengthMenu": "Show _MENU_ entries",
	
	
			/**
			 * When using Ajax sourced data and during the first draw when DataTables is
			 * gathering the data, this message is shown in an empty row in the table to
			 * indicate to the end user the the data is being loaded. Note that this
			 * parameter is not used when loading data by server-side processing, just
			 * Ajax sourced data with client-side processing.
			 *  @type string
			 *  @default Loading...
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.loadingRecords
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "loadingRecords": "Please wait - loading..."
			 *        }
			 *      } );
			 *    } );
			 */
			"sLoadingRecords": "Loading...",
	
	
			/**
			 * Text which is displayed when the table is processing a user action
			 * (usually a sort command or similar).
			 *  @type string
			 *  @default Processing...
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.processing
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "processing": "DataTables is currently busy"
			 *        }
			 *      } );
			 *    } );
			 */
			"sProcessing": "Processing...",
	
	
			/**
			 * Details the actions that will be taken when the user types into the
			 * filtering input text box. The variable "_INPUT_", if used in the string,
			 * is replaced with the HTML text box for the filtering input allowing
			 * control over where it appears in the string. If "_INPUT_" is not given
			 * then the input box is appended to the string automatically.
			 *  @type string
			 *  @default Search:
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.search
			 *
			 *  @example
			 *    // Input text box will be appended at the end automatically
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "search": "Filter records:"
			 *        }
			 *      } );
			 *    } );
			 *
			 *  @example
			 *    // Specify where the filter should appear
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "search": "Apply filter _INPUT_ to table"
			 *        }
			 *      } );
			 *    } );
			 */
			"sSearch": "Search:",
	
	
			/**
			 * Assign a `placeholder` attribute to the search `input` element
			 *  @type string
			 *  @default 
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.searchPlaceholder
			 */
			"sSearchPlaceholder": "",
	
	
			/**
			 * All of the language information can be stored in a file on the
			 * server-side, which DataTables will look up if this parameter is passed.
			 * It must store the URL of the language file, which is in a JSON format,
			 * and the object has the same properties as the oLanguage object in the
			 * initialiser object (i.e. the above parameters). Please refer to one of
			 * the example language files to see how this works in action.
			 *  @type string
			 *  @default <i>Empty string - i.e. disabled</i>
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.url
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "url": "http://www.sprymedia.co.uk/dataTables/lang.txt"
			 *        }
			 *      } );
			 *    } );
			 */
			"sUrl": "",
	
	
			/**
			 * Text shown inside the table records when the is no information to be
			 * displayed after filtering. `emptyTable` is shown when there is simply no
			 * information in the table at all (regardless of filtering).
			 *  @type string
			 *  @default No matching records found
			 *
			 *  @dtopt Language
			 *  @name DataTable.defaults.language.zeroRecords
			 *
			 *  @example
			 *    $(document).ready( function() {
			 *      $('#example').dataTable( {
			 *        "language": {
			 *          "zeroRecords": "No records to display"
			 *        }
			 *      } );
			 *    } );
			 */
			"sZeroRecords": "No matching records found"
		},
	
	
		/**
		 * This parameter allows you to have define the global filtering state at
		 * initialisation time. As an object the `search` parameter must be
		 * defined, but all other parameters are optional. When `regex` is true,
		 * the search string will be treated as a regular expression, when false
		 * (default) it will be treated as a straight string. When `smart`
		 * DataTables will use it's smart filtering methods (to word match at
		 * any point in the data), when false this will not be done.
		 *  @namespace
		 *  @extends DataTable.models.oSearch
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.search
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "search": {"search": "Initial search"}
		 *      } );
		 *    } )
		 */
		"oSearch": $.extend( {}, DataTable.models.oSearch ),
	
	
		/**
		 * __Deprecated__ The functionality provided by this parameter has now been
		 * superseded by that provided through `ajax`, which should be used instead.
		 *
		 * By default DataTables will look for the property `data` (or `aaData` for
		 * compatibility with DataTables 1.9-) when obtaining data from an Ajax
		 * source or for server-side processing - this parameter allows that
		 * property to be changed. You can use Javascript dotted object notation to
		 * get a data source for multiple levels of nesting.
		 *  @type string
		 *  @default data
		 *
		 *  @dtopt Options
		 *  @dtopt Server-side
		 *  @name DataTable.defaults.ajaxDataProp
		 *
		 *  @deprecated 1.10. Please use `ajax` for this functionality now.
		 */
		"sAjaxDataProp": "data",
	
	
		/**
		 * __Deprecated__ The functionality provided by this parameter has now been
		 * superseded by that provided through `ajax`, which should be used instead.
		 *
		 * You can instruct DataTables to load data from an external
		 * source using this parameter (use aData if you want to pass data in you
		 * already have). Simply provide a url a JSON object can be obtained from.
		 *  @type string
		 *  @default null
		 *
		 *  @dtopt Options
		 *  @dtopt Server-side
		 *  @name DataTable.defaults.ajaxSource
		 *
		 *  @deprecated 1.10. Please use `ajax` for this functionality now.
		 */
		"sAjaxSource": null,
	
	
		/**
		 * This initialisation variable allows you to specify exactly where in the
		 * DOM you want DataTables to inject the various controls it adds to the page
		 * (for example you might want the pagination controls at the top of the
		 * table). DIV elements (with or without a custom class) can also be added to
		 * aid styling. The follow syntax is used:
		 *   <ul>
		 *     <li>The following options are allowed:
		 *       <ul>
		 *         <li>'l' - Length changing</li>
		 *         <li>'f' - Filtering input</li>
		 *         <li>'t' - The table!</li>
		 *         <li>'i' - Information</li>
		 *         <li>'p' - Pagination</li>
		 *         <li>'r' - pRocessing</li>
		 *       </ul>
		 *     </li>
		 *     <li>The following constants are allowed:
		 *       <ul>
		 *         <li>'H' - jQueryUI theme "header" classes ('fg-toolbar ui-widget-header ui-corner-tl ui-corner-tr ui-helper-clearfix')</li>
		 *         <li>'F' - jQueryUI theme "footer" classes ('fg-toolbar ui-widget-header ui-corner-bl ui-corner-br ui-helper-clearfix')</li>
		 *       </ul>
		 *     </li>
		 *     <li>The following syntax is expected:
		 *       <ul>
		 *         <li>'&lt;' and '&gt;' - div elements</li>
		 *         <li>'&lt;"class" and '&gt;' - div with a class</li>
		 *         <li>'&lt;"#id" and '&gt;' - div with an ID</li>
		 *       </ul>
		 *     </li>
		 *     <li>Examples:
		 *       <ul>
		 *         <li>'&lt;"wrapper"flipt&gt;'</li>
		 *         <li>'&lt;lf&lt;t&gt;ip&gt;'</li>
		 *       </ul>
		 *     </li>
		 *   </ul>
		 *  @type string
		 *  @default lfrtip <i>(when `jQueryUI` is false)</i> <b>or</b>
		 *    <"H"lfr>t<"F"ip> <i>(when `jQueryUI` is true)</i>
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.dom
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "dom": '&lt;"top"i&gt;rt&lt;"bottom"flp&gt;&lt;"clear"&gt;'
		 *      } );
		 *    } );
		 */
		"sDom": "lfrtip",
	
	
		/**
		 * Search delay option. This will throttle full table searches that use the
		 * DataTables provided search input element (it does not effect calls to
		 * `dt-api search()`, providing a delay before the search is made.
		 *  @type integer
		 *  @default 0
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.searchDelay
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "searchDelay": 200
		 *      } );
		 *    } )
		 */
		"searchDelay": null,
	
	
		/**
		 * DataTables features six different built-in options for the buttons to
		 * display for pagination control:
		 *
		 * * `numbers` - Page number buttons only
		 * * `simple` - 'Previous' and 'Next' buttons only
		 * * 'simple_numbers` - 'Previous' and 'Next' buttons, plus page numbers
		 * * `full` - 'First', 'Previous', 'Next' and 'Last' buttons
		 * * `full_numbers` - 'First', 'Previous', 'Next' and 'Last' buttons, plus page numbers
		 * * `first_last_numbers` - 'First' and 'Last' buttons, plus page numbers
		 *  
		 * Further methods can be added using {@link DataTable.ext.oPagination}.
		 *  @type string
		 *  @default simple_numbers
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.pagingType
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "pagingType": "full_numbers"
		 *      } );
		 *    } )
		 */
		"sPaginationType": "simple_numbers",
	
	
		/**
		 * Enable horizontal scrolling. When a table is too wide to fit into a
		 * certain layout, or you have a large number of columns in the table, you
		 * can enable x-scrolling to show the table in a viewport, which can be
		 * scrolled. This property can be `true` which will allow the table to
		 * scroll horizontally when needed, or any CSS unit, or a number (in which
		 * case it will be treated as a pixel measurement). Setting as simply `true`
		 * is recommended.
		 *  @type boolean|string
		 *  @default <i>blank string - i.e. disabled</i>
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.scrollX
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "scrollX": true,
		 *        "scrollCollapse": true
		 *      } );
		 *    } );
		 */
		"sScrollX": "",
	
	
		/**
		 * This property can be used to force a DataTable to use more width than it
		 * might otherwise do when x-scrolling is enabled. For example if you have a
		 * table which requires to be well spaced, this parameter is useful for
		 * "over-sizing" the table, and thus forcing scrolling. This property can by
		 * any CSS unit, or a number (in which case it will be treated as a pixel
		 * measurement).
		 *  @type string
		 *  @default <i>blank string - i.e. disabled</i>
		 *
		 *  @dtopt Options
		 *  @name DataTable.defaults.scrollXInner
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "scrollX": "100%",
		 *        "scrollXInner": "110%"
		 *      } );
		 *    } );
		 */
		"sScrollXInner": "",
	
	
		/**
		 * Enable vertical scrolling. Vertical scrolling will constrain the DataTable
		 * to the given height, and enable scrolling for any data which overflows the
		 * current viewport. This can be used as an alternative to paging to display
		 * a lot of data in a small area (although paging and scrolling can both be
		 * enabled at the same time). This property can be any CSS unit, or a number
		 * (in which case it will be treated as a pixel measurement).
		 *  @type string
		 *  @default <i>blank string - i.e. disabled</i>
		 *
		 *  @dtopt Features
		 *  @name DataTable.defaults.scrollY
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "scrollY": "200px",
		 *        "paginate": false
		 *      } );
		 *    } );
		 */
		"sScrollY": "",
	
	
		/**
		 * __Deprecated__ The functionality provided by this parameter has now been
		 * superseded by that provided through `ajax`, which should be used instead.
		 *
		 * Set the HTTP method that is used to make the Ajax call for server-side
		 * processing or Ajax sourced data.
		 *  @type string
		 *  @default GET
		 *
		 *  @dtopt Options
		 *  @dtopt Server-side
		 *  @name DataTable.defaults.serverMethod
		 *
		 *  @deprecated 1.10. Please use `ajax` for this functionality now.
		 */
		"sServerMethod": "GET",
	
	
		/**
		 * DataTables makes use of renderers when displaying HTML elements for
		 * a table. These renderers can be added or modified by plug-ins to
		 * generate suitable mark-up for a site. For example the Bootstrap
		 * integration plug-in for DataTables uses a paging button renderer to
		 * display pagination buttons in the mark-up required by Bootstrap.
		 *
		 * For further information about the renderers available see
		 * DataTable.ext.renderer
		 *  @type string|object
		 *  @default null
		 *
		 *  @name DataTable.defaults.renderer
		 *
		 */
		"renderer": null,
	
	
		/**
		 * Set the data property name that DataTables should use to get a row's id
		 * to set as the `id` property in the node.
		 *  @type string
		 *  @default DT_RowId
		 *
		 *  @name DataTable.defaults.rowId
		 */
		"rowId": "DT_RowId"
	};
	
	_fnHungarianMap( DataTable.defaults );
	
	
	
	/*
	 * Developer note - See note in model.defaults.js about the use of Hungarian
	 * notation and camel case.
	 */
	
	/**
	 * Column options that can be given to DataTables at initialisation time.
	 *  @namespace
	 */
	DataTable.defaults.column = {
		/**
		 * Define which column(s) an order will occur on for this column. This
		 * allows a column's ordering to take multiple columns into account when
		 * doing a sort or use the data from a different column. For example first
		 * name / last name columns make sense to do a multi-column sort over the
		 * two columns.
		 *  @type array|int
		 *  @default null <i>Takes the value of the column index automatically</i>
		 *
		 *  @name DataTable.defaults.column.orderData
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "orderData": [ 0, 1 ], "targets": [ 0 ] },
		 *          { "orderData": [ 1, 0 ], "targets": [ 1 ] },
		 *          { "orderData": 2, "targets": [ 2 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "orderData": [ 0, 1 ] },
		 *          { "orderData": [ 1, 0 ] },
		 *          { "orderData": 2 },
		 *          null,
		 *          null
		 *        ]
		 *      } );
		 *    } );
		 */
		"aDataSort": null,
		"iDataSort": -1,
	
	
		/**
		 * You can control the default ordering direction, and even alter the
		 * behaviour of the sort handler (i.e. only allow ascending ordering etc)
		 * using this parameter.
		 *  @type array
		 *  @default [ 'asc', 'desc' ]
		 *
		 *  @name DataTable.defaults.column.orderSequence
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "orderSequence": [ "asc" ], "targets": [ 1 ] },
		 *          { "orderSequence": [ "desc", "asc", "asc" ], "targets": [ 2 ] },
		 *          { "orderSequence": [ "desc" ], "targets": [ 3 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          null,
		 *          { "orderSequence": [ "asc" ] },
		 *          { "orderSequence": [ "desc", "asc", "asc" ] },
		 *          { "orderSequence": [ "desc" ] },
		 *          null
		 *        ]
		 *      } );
		 *    } );
		 */
		"asSorting": [ 'asc', 'desc' ],
	
	
		/**
		 * Enable or disable filtering on the data in this column.
		 *  @type boolean
		 *  @default true
		 *
		 *  @name DataTable.defaults.column.searchable
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "searchable": false, "targets": [ 0 ] }
		 *        ] } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "searchable": false },
		 *          null,
		 *          null,
		 *          null,
		 *          null
		 *        ] } );
		 *    } );
		 */
		"bSearchable": true,
	
	
		/**
		 * Enable or disable ordering on this column.
		 *  @type boolean
		 *  @default true
		 *
		 *  @name DataTable.defaults.column.orderable
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "orderable": false, "targets": [ 0 ] }
		 *        ] } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "orderable": false },
		 *          null,
		 *          null,
		 *          null,
		 *          null
		 *        ] } );
		 *    } );
		 */
		"bSortable": true,
	
	
		/**
		 * Enable or disable the display of this column.
		 *  @type boolean
		 *  @default true
		 *
		 *  @name DataTable.defaults.column.visible
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "visible": false, "targets": [ 0 ] }
		 *        ] } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "visible": false },
		 *          null,
		 *          null,
		 *          null,
		 *          null
		 *        ] } );
		 *    } );
		 */
		"bVisible": true,
	
	
		/**
		 * Developer definable function that is called whenever a cell is created (Ajax source,
		 * etc) or processed for input (DOM source). This can be used as a compliment to mRender
		 * allowing you to modify the DOM element (add background colour for example) when the
		 * element is available.
		 *  @type function
		 *  @param {element} td The TD node that has been created
		 *  @param {*} cellData The Data for the cell
		 *  @param {array|object} rowData The data for the whole row
		 *  @param {int} row The row index for the aoData data store
		 *  @param {int} col The column index for aoColumns
		 *
		 *  @name DataTable.defaults.column.createdCell
		 *  @dtopt Columns
		 *
		 *  @example
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [3],
		 *          "createdCell": function (td, cellData, rowData, row, col) {
		 *            if ( cellData == "1.7" ) {
		 *              $(td).css('color', 'blue')
		 *            }
		 *          }
		 *        } ]
		 *      });
		 *    } );
		 */
		"fnCreatedCell": null,
	
	
		/**
		 * This parameter has been replaced by `data` in DataTables to ensure naming
		 * consistency. `dataProp` can still be used, as there is backwards
		 * compatibility in DataTables for this option, but it is strongly
		 * recommended that you use `data` in preference to `dataProp`.
		 *  @name DataTable.defaults.column.dataProp
		 */
	
	
		/**
		 * This property can be used to read data from any data source property,
		 * including deeply nested objects / properties. `data` can be given in a
		 * number of different ways which effect its behaviour:
		 *
		 * * `integer` - treated as an array index for the data source. This is the
		 *   default that DataTables uses (incrementally increased for each column).
		 * * `string` - read an object property from the data source. There are
		 *   three 'special' options that can be used in the string to alter how
		 *   DataTables reads the data from the source object:
		 *    * `.` - Dotted Javascript notation. Just as you use a `.` in
		 *      Javascript to read from nested objects, so to can the options
		 *      specified in `data`. For example: `browser.version` or
		 *      `browser.name`. If your object parameter name contains a period, use
		 *      `\\` to escape it - i.e. `first\\.name`.
		 *    * `[]` - Array notation. DataTables can automatically combine data
		 *      from and array source, joining the data with the characters provided
		 *      between the two brackets. For example: `name[, ]` would provide a
		 *      comma-space separated list from the source array. If no characters
		 *      are provided between the brackets, the original array source is
		 *      returned.
		 *    * `()` - Function notation. Adding `()` to the end of a parameter will
		 *      execute a function of the name given. For example: `browser()` for a
		 *      simple function on the data source, `browser.version()` for a
		 *      function in a nested property or even `browser().version` to get an
		 *      object property if the function called returns an object. Note that
		 *      function notation is recommended for use in `render` rather than
		 *      `data` as it is much simpler to use as a renderer.
		 * * `null` - use the original data source for the row rather than plucking
		 *   data directly from it. This action has effects on two other
		 *   initialisation options:
		 *    * `defaultContent` - When null is given as the `data` option and
		 *      `defaultContent` is specified for the column, the value defined by
		 *      `defaultContent` will be used for the cell.
		 *    * `render` - When null is used for the `data` option and the `render`
		 *      option is specified for the column, the whole data source for the
		 *      row is used for the renderer.
		 * * `function` - the function given will be executed whenever DataTables
		 *   needs to set or get the data for a cell in the column. The function
		 *   takes three parameters:
		 *    * Parameters:
		 *      * `{array|object}` The data source for the row
		 *      * `{string}` The type call data requested - this will be 'set' when
		 *        setting data or 'filter', 'display', 'type', 'sort' or undefined
		 *        when gathering data. Note that when `undefined` is given for the
		 *        type DataTables expects to get the raw data for the object back<
		 *      * `{*}` Data to set when the second parameter is 'set'.
		 *    * Return:
		 *      * The return value from the function is not required when 'set' is
		 *        the type of call, but otherwise the return is what will be used
		 *        for the data requested.
		 *
		 * Note that `data` is a getter and setter option. If you just require
		 * formatting of data for output, you will likely want to use `render` which
		 * is simply a getter and thus simpler to use.
		 *
		 * Note that prior to DataTables 1.9.2 `data` was called `mDataProp`. The
		 * name change reflects the flexibility of this property and is consistent
		 * with the naming of mRender. If 'mDataProp' is given, then it will still
		 * be used by DataTables, as it automatically maps the old name to the new
		 * if required.
		 *
		 *  @type string|int|function|null
		 *  @default null <i>Use automatically calculated column index</i>
		 *
		 *  @name DataTable.defaults.column.data
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Read table data from objects
		 *    // JSON structure for each row:
		 *    //   {
		 *    //      "engine": {value},
		 *    //      "browser": {value},
		 *    //      "platform": {value},
		 *    //      "version": {value},
		 *    //      "grade": {value}
		 *    //   }
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "ajaxSource": "sources/objects.txt",
		 *        "columns": [
		 *          { "data": "engine" },
		 *          { "data": "browser" },
		 *          { "data": "platform" },
		 *          { "data": "version" },
		 *          { "data": "grade" }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Read information from deeply nested objects
		 *    // JSON structure for each row:
		 *    //   {
		 *    //      "engine": {value},
		 *    //      "browser": {value},
		 *    //      "platform": {
		 *    //         "inner": {value}
		 *    //      },
		 *    //      "details": [
		 *    //         {value}, {value}
		 *    //      ]
		 *    //   }
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "ajaxSource": "sources/deep.txt",
		 *        "columns": [
		 *          { "data": "engine" },
		 *          { "data": "browser" },
		 *          { "data": "platform.inner" },
		 *          { "data": "platform.details.0" },
		 *          { "data": "platform.details.1" }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `data` as a function to provide different information for
		 *    // sorting, filtering and display. In this case, currency (price)
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [ 0 ],
		 *          "data": function ( source, type, val ) {
		 *            if (type === 'set') {
		 *              source.price = val;
		 *              // Store the computed dislay and filter values for efficiency
		 *              source.price_display = val=="" ? "" : "$"+numberFormat(val);
		 *              source.price_filter  = val=="" ? "" : "$"+numberFormat(val)+" "+val;
		 *              return;
		 *            }
		 *            else if (type === 'display') {
		 *              return source.price_display;
		 *            }
		 *            else if (type === 'filter') {
		 *              return source.price_filter;
		 *            }
		 *            // 'sort', 'type' and undefined all just use the integer
		 *            return source.price;
		 *          }
		 *        } ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using default content
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [ 0 ],
		 *          "data": null,
		 *          "defaultContent": "Click to edit"
		 *        } ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using array notation - outputting a list from an array
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [ 0 ],
		 *          "data": "name[, ]"
		 *        } ]
		 *      } );
		 *    } );
		 *
		 */
		"mData": null,
	
	
		/**
		 * This property is the rendering partner to `data` and it is suggested that
		 * when you want to manipulate data for display (including filtering,
		 * sorting etc) without altering the underlying data for the table, use this
		 * property. `render` can be considered to be the the read only companion to
		 * `data` which is read / write (then as such more complex). Like `data`
		 * this option can be given in a number of different ways to effect its
		 * behaviour:
		 *
		 * * `integer` - treated as an array index for the data source. This is the
		 *   default that DataTables uses (incrementally increased for each column).
		 * * `string` - read an object property from the data source. There are
		 *   three 'special' options that can be used in the string to alter how
		 *   DataTables reads the data from the source object:
		 *    * `.` - Dotted Javascript notation. Just as you use a `.` in
		 *      Javascript to read from nested objects, so to can the options
		 *      specified in `data`. For example: `browser.version` or
		 *      `browser.name`. If your object parameter name contains a period, use
		 *      `\\` to escape it - i.e. `first\\.name`.
		 *    * `[]` - Array notation. DataTables can automatically combine data
		 *      from and array source, joining the data with the characters provided
		 *      between the two brackets. For example: `name[, ]` would provide a
		 *      comma-space separated list from the source array. If no characters
		 *      are provided between the brackets, the original array source is
		 *      returned.
		 *    * `()` - Function notation. Adding `()` to the end of a parameter will
		 *      execute a function of the name given. For example: `browser()` for a
		 *      simple function on the data source, `browser.version()` for a
		 *      function in a nested property or even `browser().version` to get an
		 *      object property if the function called returns an object.
		 * * `object` - use different data for the different data types requested by
		 *   DataTables ('filter', 'display', 'type' or 'sort'). The property names
		 *   of the object is the data type the property refers to and the value can
		 *   defined using an integer, string or function using the same rules as
		 *   `render` normally does. Note that an `_` option _must_ be specified.
		 *   This is the default value to use if you haven't specified a value for
		 *   the data type requested by DataTables.
		 * * `function` - the function given will be executed whenever DataTables
		 *   needs to set or get the data for a cell in the column. The function
		 *   takes three parameters:
		 *    * Parameters:
		 *      * {array|object} The data source for the row (based on `data`)
		 *      * {string} The type call data requested - this will be 'filter',
		 *        'display', 'type' or 'sort'.
		 *      * {array|object} The full data source for the row (not based on
		 *        `data`)
		 *    * Return:
		 *      * The return value from the function is what will be used for the
		 *        data requested.
		 *
		 *  @type string|int|function|object|null
		 *  @default null Use the data source value.
		 *
		 *  @name DataTable.defaults.column.render
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Create a comma separated list from an array of objects
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "ajaxSource": "sources/deep.txt",
		 *        "columns": [
		 *          { "data": "engine" },
		 *          { "data": "browser" },
		 *          {
		 *            "data": "platform",
		 *            "render": "[, ].name"
		 *          }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Execute a function to obtain data
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [ 0 ],
		 *          "data": null, // Use the full data source object for the renderer's source
		 *          "render": "browserName()"
		 *        } ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // As an object, extracting different data for the different types
		 *    // This would be used with a data source such as:
		 *    //   { "phone": 5552368, "phone_filter": "5552368 555-2368", "phone_display": "555-2368" }
		 *    // Here the `phone` integer is used for sorting and type detection, while `phone_filter`
		 *    // (which has both forms) is used for filtering for if a user inputs either format, while
		 *    // the formatted phone number is the one that is shown in the table.
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [ 0 ],
		 *          "data": null, // Use the full data source object for the renderer's source
		 *          "render": {
		 *            "_": "phone",
		 *            "filter": "phone_filter",
		 *            "display": "phone_display"
		 *          }
		 *        } ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Use as a function to create a link from the data source
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [ 0 ],
		 *          "data": "download_link",
		 *          "render": function ( data, type, full ) {
		 *            return '<a href="'+data+'">Download</a>';
		 *          }
		 *        } ]
		 *      } );
		 *    } );
		 */
		"mRender": null,
	
	
		/**
		 * Change the cell type created for the column - either TD cells or TH cells. This
		 * can be useful as TH cells have semantic meaning in the table body, allowing them
		 * to act as a header for a row (you may wish to add scope='row' to the TH elements).
		 *  @type string
		 *  @default td
		 *
		 *  @name DataTable.defaults.column.cellType
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Make the first column use TH cells
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [ {
		 *          "targets": [ 0 ],
		 *          "cellType": "th"
		 *        } ]
		 *      } );
		 *    } );
		 */
		"sCellType": "td",
	
	
		/**
		 * Class to give to each cell in this column.
		 *  @type string
		 *  @default <i>Empty string</i>
		 *
		 *  @name DataTable.defaults.column.class
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "class": "my_class", "targets": [ 0 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "class": "my_class" },
		 *          null,
		 *          null,
		 *          null,
		 *          null
		 *        ]
		 *      } );
		 *    } );
		 */
		"sClass": "",
	
		/**
		 * When DataTables calculates the column widths to assign to each column,
		 * it finds the longest string in each column and then constructs a
		 * temporary table and reads the widths from that. The problem with this
		 * is that "mmm" is much wider then "iiii", but the latter is a longer
		 * string - thus the calculation can go wrong (doing it properly and putting
		 * it into an DOM object and measuring that is horribly(!) slow). Thus as
		 * a "work around" we provide this option. It will append its value to the
		 * text that is found to be the longest string for the column - i.e. padding.
		 * Generally you shouldn't need this!
		 *  @type string
		 *  @default <i>Empty string<i>
		 *
		 *  @name DataTable.defaults.column.contentPadding
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          null,
		 *          null,
		 *          null,
		 *          {
		 *            "contentPadding": "mmm"
		 *          }
		 *        ]
		 *      } );
		 *    } );
		 */
		"sContentPadding": "",
	
	
		/**
		 * Allows a default value to be given for a column's data, and will be used
		 * whenever a null data source is encountered (this can be because `data`
		 * is set to null, or because the data source itself is null).
		 *  @type string
		 *  @default null
		 *
		 *  @name DataTable.defaults.column.defaultContent
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          {
		 *            "data": null,
		 *            "defaultContent": "Edit",
		 *            "targets": [ -1 ]
		 *          }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          null,
		 *          null,
		 *          null,
		 *          {
		 *            "data": null,
		 *            "defaultContent": "Edit"
		 *          }
		 *        ]
		 *      } );
		 *    } );
		 */
		"sDefaultContent": null,
	
	
		/**
		 * This parameter is only used in DataTables' server-side processing. It can
		 * be exceptionally useful to know what columns are being displayed on the
		 * client side, and to map these to database fields. When defined, the names
		 * also allow DataTables to reorder information from the server if it comes
		 * back in an unexpected order (i.e. if you switch your columns around on the
		 * client-side, your server-side code does not also need updating).
		 *  @type string
		 *  @default <i>Empty string</i>
		 *
		 *  @name DataTable.defaults.column.name
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "name": "engine", "targets": [ 0 ] },
		 *          { "name": "browser", "targets": [ 1 ] },
		 *          { "name": "platform", "targets": [ 2 ] },
		 *          { "name": "version", "targets": [ 3 ] },
		 *          { "name": "grade", "targets": [ 4 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "name": "engine" },
		 *          { "name": "browser" },
		 *          { "name": "platform" },
		 *          { "name": "version" },
		 *          { "name": "grade" }
		 *        ]
		 *      } );
		 *    } );
		 */
		"sName": "",
	
	
		/**
		 * Defines a data source type for the ordering which can be used to read
		 * real-time information from the table (updating the internally cached
		 * version) prior to ordering. This allows ordering to occur on user
		 * editable elements such as form inputs.
		 *  @type string
		 *  @default std
		 *
		 *  @name DataTable.defaults.column.orderDataType
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "orderDataType": "dom-text", "targets": [ 2, 3 ] },
		 *          { "type": "numeric", "targets": [ 3 ] },
		 *          { "orderDataType": "dom-select", "targets": [ 4 ] },
		 *          { "orderDataType": "dom-checkbox", "targets": [ 5 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          null,
		 *          null,
		 *          { "orderDataType": "dom-text" },
		 *          { "orderDataType": "dom-text", "type": "numeric" },
		 *          { "orderDataType": "dom-select" },
		 *          { "orderDataType": "dom-checkbox" }
		 *        ]
		 *      } );
		 *    } );
		 */
		"sSortDataType": "std",
	
	
		/**
		 * The title of this column.
		 *  @type string
		 *  @default null <i>Derived from the 'TH' value for this column in the
		 *    original HTML table.</i>
		 *
		 *  @name DataTable.defaults.column.title
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "title": "My column title", "targets": [ 0 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "title": "My column title" },
		 *          null,
		 *          null,
		 *          null,
		 *          null
		 *        ]
		 *      } );
		 *    } );
		 */
		"sTitle": null,
	
	
		/**
		 * The type allows you to specify how the data for this column will be
		 * ordered. Four types (string, numeric, date and html (which will strip
		 * HTML tags before ordering)) are currently available. Note that only date
		 * formats understood by Javascript's Date() object will be accepted as type
		 * date. For example: "Mar 26, 2008 5:03 PM". May take the values: 'string',
		 * 'numeric', 'date' or 'html' (by default). Further types can be adding
		 * through plug-ins.
		 *  @type string
		 *  @default null <i>Auto-detected from raw data</i>
		 *
		 *  @name DataTable.defaults.column.type
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "type": "html", "targets": [ 0 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "type": "html" },
		 *          null,
		 *          null,
		 *          null,
		 *          null
		 *        ]
		 *      } );
		 *    } );
		 */
		"sType": null,
	
	
		/**
		 * Defining the width of the column, this parameter may take any CSS value
		 * (3em, 20px etc). DataTables applies 'smart' widths to columns which have not
		 * been given a specific width through this interface ensuring that the table
		 * remains readable.
		 *  @type string
		 *  @default null <i>Automatic</i>
		 *
		 *  @name DataTable.defaults.column.width
		 *  @dtopt Columns
		 *
		 *  @example
		 *    // Using `columnDefs`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columnDefs": [
		 *          { "width": "20%", "targets": [ 0 ] }
		 *        ]
		 *      } );
		 *    } );
		 *
		 *  @example
		 *    // Using `columns`
		 *    $(document).ready( function() {
		 *      $('#example').dataTable( {
		 *        "columns": [
		 *          { "width": "20%" },
		 *          null,
		 *          null,
		 *          null,
		 *          null
		 *        ]
		 *      } );
		 *    } );
		 */
		"sWidth": null
	};
	
	_fnHungarianMap( DataTable.defaults.column );
	
	
	
	/**
	 * DataTables settings object - this holds all the information needed for a
	 * given table, including configuration, data and current application of the
	 * table options. DataTables does not have a single instance for each DataTable
	 * with the settings attached to that instance, but rather instances of the
	 * DataTable "class" are created on-the-fly as needed (typically by a
	 * $().dataTable() call) and the settings object is then applied to that
	 * instance.
	 *
	 * Note that this object is related to {@link DataTable.defaults} but this
	 * one is the internal data store for DataTables's cache of columns. It should
	 * NOT be manipulated outside of DataTables. Any configuration should be done
	 * through the initialisation options.
	 *  @namespace
	 *  @todo Really should attach the settings object to individual instances so we
	 *    don't need to create new instances on each $().dataTable() call (if the
	 *    table already exists). It would also save passing oSettings around and
	 *    into every single function. However, this is a very significant
	 *    architecture change for DataTables and will almost certainly break
	 *    backwards compatibility with older installations. This is something that
	 *    will be done in 2.0.
	 */
	DataTable.models.oSettings = {
		/**
		 * Primary features of DataTables and their enablement state.
		 *  @namespace
		 */
		"oFeatures": {
	
			/**
			 * Flag to say if DataTables should automatically try to calculate the
			 * optimum table and columns widths (true) or not (false).
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bAutoWidth": null,
	
			/**
			 * Delay the creation of TR and TD elements until they are actually
			 * needed by a driven page draw. This can give a significant speed
			 * increase for Ajax source and Javascript source data, but makes no
			 * difference at all fro DOM and server-side processing tables.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bDeferRender": null,
	
			/**
			 * Enable filtering on the table or not. Note that if this is disabled
			 * then there is no filtering at all on the table, including fnFilter.
			 * To just remove the filtering input use sDom and remove the 'f' option.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bFilter": null,
	
			/**
			 * Table information element (the 'Showing x of y records' div) enable
			 * flag.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bInfo": null,
	
			/**
			 * Present a user control allowing the end user to change the page size
			 * when pagination is enabled.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bLengthChange": null,
	
			/**
			 * Pagination enabled or not. Note that if this is disabled then length
			 * changing must also be disabled.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bPaginate": null,
	
			/**
			 * Processing indicator enable flag whenever DataTables is enacting a
			 * user request - typically an Ajax request for server-side processing.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bProcessing": null,
	
			/**
			 * Server-side processing enabled flag - when enabled DataTables will
			 * get all data from the server for every draw - there is no filtering,
			 * sorting or paging done on the client-side.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bServerSide": null,
	
			/**
			 * Sorting enablement flag.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bSort": null,
	
			/**
			 * Multi-column sorting
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bSortMulti": null,
	
			/**
			 * Apply a class to the columns which are being sorted to provide a
			 * visual highlight or not. This can slow things down when enabled since
			 * there is a lot of DOM interaction.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bSortClasses": null,
	
			/**
			 * State saving enablement flag.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bStateSave": null
		},
	
	
		/**
		 * Scrolling settings for a table.
		 *  @namespace
		 */
		"oScroll": {
			/**
			 * When the table is shorter in height than sScrollY, collapse the
			 * table container down to the height of the table (when true).
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type boolean
			 */
			"bCollapse": null,
	
			/**
			 * Width of the scrollbar for the web-browser's platform. Calculated
			 * during table initialisation.
			 *  @type int
			 *  @default 0
			 */
			"iBarWidth": 0,
	
			/**
			 * Viewport width for horizontal scrolling. Horizontal scrolling is
			 * disabled if an empty string.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type string
			 */
			"sX": null,
	
			/**
			 * Width to expand the table to when using x-scrolling. Typically you
			 * should not need to use this.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type string
			 *  @deprecated
			 */
			"sXInner": null,
	
			/**
			 * Viewport height for vertical scrolling. Vertical scrolling is disabled
			 * if an empty string.
			 * Note that this parameter will be set by the initialisation routine. To
			 * set a default use {@link DataTable.defaults}.
			 *  @type string
			 */
			"sY": null
		},
	
		/**
		 * Language information for the table.
		 *  @namespace
		 *  @extends DataTable.defaults.oLanguage
		 */
		"oLanguage": {
			/**
			 * Information callback function. See
			 * {@link DataTable.defaults.fnInfoCallback}
			 *  @type function
			 *  @default null
			 */
			"fnInfoCallback": null
		},
	
		/**
		 * Browser support parameters
		 *  @namespace
		 */
		"oBrowser": {
			/**
			 * Indicate if the browser incorrectly calculates width:100% inside a
			 * scrolling element (IE6/7)
			 *  @type boolean
			 *  @default false
			 */
			"bScrollOversize": false,
	
			/**
			 * Determine if the vertical scrollbar is on the right or left of the
			 * scrolling container - needed for rtl language layout, although not
			 * all browsers move the scrollbar (Safari).
			 *  @type boolean
			 *  @default false
			 */
			"bScrollbarLeft": false,
	
			/**
			 * Flag for if `getBoundingClientRect` is fully supported or not
			 *  @type boolean
			 *  @default false
			 */
			"bBounding": false,
	
			/**
			 * Browser scrollbar width
			 *  @type integer
			 *  @default 0
			 */
			"barWidth": 0
		},
	
	
		"ajax": null,
	
	
		/**
		 * Array referencing the nodes which are used for the features. The
		 * parameters of this object match what is allowed by sDom - i.e.
		 *   <ul>
		 *     <li>'l' - Length changing</li>
		 *     <li>'f' - Filtering input</li>
		 *     <li>'t' - The table!</li>
		 *     <li>'i' - Information</li>
		 *     <li>'p' - Pagination</li>
		 *     <li>'r' - pRocessing</li>
		 *   </ul>
		 *  @type array
		 *  @default []
		 */
		"aanFeatures": [],
	
		/**
		 * Store data information - see {@link DataTable.models.oRow} for detailed
		 * information.
		 *  @type array
		 *  @default []
		 */
		"aoData": [],
	
		/**
		 * Array of indexes which are in the current display (after filtering etc)
		 *  @type array
		 *  @default []
		 */
		"aiDisplay": [],
	
		/**
		 * Array of indexes for display - no filtering
		 *  @type array
		 *  @default []
		 */
		"aiDisplayMaster": [],
	
		/**
		 * Map of row ids to data indexes
		 *  @type object
		 *  @default {}
		 */
		"aIds": {},
	
		/**
		 * Store information about each column that is in use
		 *  @type array
		 *  @default []
		 */
		"aoColumns": [],
	
		/**
		 * Store information about the table's header
		 *  @type array
		 *  @default []
		 */
		"aoHeader": [],
	
		/**
		 * Store information about the table's footer
		 *  @type array
		 *  @default []
		 */
		"aoFooter": [],
	
		/**
		 * Store the applied global search information in case we want to force a
		 * research or compare the old search to a new one.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @namespace
		 *  @extends DataTable.models.oSearch
		 */
		"oPreviousSearch": {},
	
		/**
		 * Store the applied search for each column - see
		 * {@link DataTable.models.oSearch} for the format that is used for the
		 * filtering information for each column.
		 *  @type array
		 *  @default []
		 */
		"aoPreSearchCols": [],
	
		/**
		 * Sorting that is applied to the table. Note that the inner arrays are
		 * used in the following manner:
		 * <ul>
		 *   <li>Index 0 - column number</li>
		 *   <li>Index 1 - current sorting direction</li>
		 * </ul>
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type array
		 *  @todo These inner arrays should really be objects
		 */
		"aaSorting": null,
	
		/**
		 * Sorting that is always applied to the table (i.e. prefixed in front of
		 * aaSorting).
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type array
		 *  @default []
		 */
		"aaSortingFixed": [],
	
		/**
		 * Classes to use for the striping of a table.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type array
		 *  @default []
		 */
		"asStripeClasses": null,
	
		/**
		 * If restoring a table - we should restore its striping classes as well
		 *  @type array
		 *  @default []
		 */
		"asDestroyStripes": [],
	
		/**
		 * If restoring a table - we should restore its width
		 *  @type int
		 *  @default 0
		 */
		"sDestroyWidth": 0,
	
		/**
		 * Callback functions array for every time a row is inserted (i.e. on a draw).
		 *  @type array
		 *  @default []
		 */
		"aoRowCallback": [],
	
		/**
		 * Callback functions for the header on each draw.
		 *  @type array
		 *  @default []
		 */
		"aoHeaderCallback": [],
	
		/**
		 * Callback function for the footer on each draw.
		 *  @type array
		 *  @default []
		 */
		"aoFooterCallback": [],
	
		/**
		 * Array of callback functions for draw callback functions
		 *  @type array
		 *  @default []
		 */
		"aoDrawCallback": [],
	
		/**
		 * Array of callback functions for row created function
		 *  @type array
		 *  @default []
		 */
		"aoRowCreatedCallback": [],
	
		/**
		 * Callback functions for just before the table is redrawn. A return of
		 * false will be used to cancel the draw.
		 *  @type array
		 *  @default []
		 */
		"aoPreDrawCallback": [],
	
		/**
		 * Callback functions for when the table has been initialised.
		 *  @type array
		 *  @default []
		 */
		"aoInitComplete": [],
	
	
		/**
		 * Callbacks for modifying the settings to be stored for state saving, prior to
		 * saving state.
		 *  @type array
		 *  @default []
		 */
		"aoStateSaveParams": [],
	
		/**
		 * Callbacks for modifying the settings that have been stored for state saving
		 * prior to using the stored values to restore the state.
		 *  @type array
		 *  @default []
		 */
		"aoStateLoadParams": [],
	
		/**
		 * Callbacks for operating on the settings object once the saved state has been
		 * loaded
		 *  @type array
		 *  @default []
		 */
		"aoStateLoaded": [],
	
		/**
		 * Cache the table ID for quick access
		 *  @type string
		 *  @default <i>Empty string</i>
		 */
		"sTableId": "",
	
		/**
		 * The TABLE node for the main table
		 *  @type node
		 *  @default null
		 */
		"nTable": null,
	
		/**
		 * Permanent ref to the thead element
		 *  @type node
		 *  @default null
		 */
		"nTHead": null,
	
		/**
		 * Permanent ref to the tfoot element - if it exists
		 *  @type node
		 *  @default null
		 */
		"nTFoot": null,
	
		/**
		 * Permanent ref to the tbody element
		 *  @type node
		 *  @default null
		 */
		"nTBody": null,
	
		/**
		 * Cache the wrapper node (contains all DataTables controlled elements)
		 *  @type node
		 *  @default null
		 */
		"nTableWrapper": null,
	
		/**
		 * Indicate if when using server-side processing the loading of data
		 * should be deferred until the second draw.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type boolean
		 *  @default false
		 */
		"bDeferLoading": false,
	
		/**
		 * Indicate if all required information has been read in
		 *  @type boolean
		 *  @default false
		 */
		"bInitialised": false,
	
		/**
		 * Information about open rows. Each object in the array has the parameters
		 * 'nTr' and 'nParent'
		 *  @type array
		 *  @default []
		 */
		"aoOpenRows": [],
	
		/**
		 * Dictate the positioning of DataTables' control elements - see
		 * {@link DataTable.model.oInit.sDom}.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type string
		 *  @default null
		 */
		"sDom": null,
	
		/**
		 * Search delay (in mS)
		 *  @type integer
		 *  @default null
		 */
		"searchDelay": null,
	
		/**
		 * Which type of pagination should be used.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type string
		 *  @default two_button
		 */
		"sPaginationType": "two_button",
	
		/**
		 * The state duration (for `stateSave`) in seconds.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type int
		 *  @default 0
		 */
		"iStateDuration": 0,
	
		/**
		 * Array of callback functions for state saving. Each array element is an
		 * object with the following parameters:
		 *   <ul>
		 *     <li>function:fn - function to call. Takes two parameters, oSettings
		 *       and the JSON string to save that has been thus far created. Returns
		 *       a JSON string to be inserted into a json object
		 *       (i.e. '"param": [ 0, 1, 2]')</li>
		 *     <li>string:sName - name of callback</li>
		 *   </ul>
		 *  @type array
		 *  @default []
		 */
		"aoStateSave": [],
	
		/**
		 * Array of callback functions for state loading. Each array element is an
		 * object with the following parameters:
		 *   <ul>
		 *     <li>function:fn - function to call. Takes two parameters, oSettings
		 *       and the object stored. May return false to cancel state loading</li>
		 *     <li>string:sName - name of callback</li>
		 *   </ul>
		 *  @type array
		 *  @default []
		 */
		"aoStateLoad": [],
	
		/**
		 * State that was saved. Useful for back reference
		 *  @type object
		 *  @default null
		 */
		"oSavedState": null,
	
		/**
		 * State that was loaded. Useful for back reference
		 *  @type object
		 *  @default null
		 */
		"oLoadedState": null,
	
		/**
		 * Source url for AJAX data for the table.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type string
		 *  @default null
		 */
		"sAjaxSource": null,
	
		/**
		 * Property from a given object from which to read the table data from. This
		 * can be an empty string (when not server-side processing), in which case
		 * it is  assumed an an array is given directly.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type string
		 */
		"sAjaxDataProp": null,
	
		/**
		 * Note if draw should be blocked while getting data
		 *  @type boolean
		 *  @default true
		 */
		"bAjaxDataGet": true,
	
		/**
		 * The last jQuery XHR object that was used for server-side data gathering.
		 * This can be used for working with the XHR information in one of the
		 * callbacks
		 *  @type object
		 *  @default null
		 */
		"jqXHR": null,
	
		/**
		 * JSON returned from the server in the last Ajax request
		 *  @type object
		 *  @default undefined
		 */
		"json": undefined,
	
		/**
		 * Data submitted as part of the last Ajax request
		 *  @type object
		 *  @default undefined
		 */
		"oAjaxData": undefined,
	
		/**
		 * Function to get the server-side data.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type function
		 */
		"fnServerData": null,
	
		/**
		 * Functions which are called prior to sending an Ajax request so extra
		 * parameters can easily be sent to the server
		 *  @type array
		 *  @default []
		 */
		"aoServerParams": [],
	
		/**
		 * Send the XHR HTTP method - GET or POST (could be PUT or DELETE if
		 * required).
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type string
		 */
		"sServerMethod": null,
	
		/**
		 * Format numbers for display.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type function
		 */
		"fnFormatNumber": null,
	
		/**
		 * List of options that can be used for the user selectable length menu.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type array
		 *  @default []
		 */
		"aLengthMenu": null,
	
		/**
		 * Counter for the draws that the table does. Also used as a tracker for
		 * server-side processing
		 *  @type int
		 *  @default 0
		 */
		"iDraw": 0,
	
		/**
		 * Indicate if a redraw is being done - useful for Ajax
		 *  @type boolean
		 *  @default false
		 */
		"bDrawing": false,
	
		/**
		 * Draw index (iDraw) of the last error when parsing the returned data
		 *  @type int
		 *  @default -1
		 */
		"iDrawError": -1,
	
		/**
		 * Paging display length
		 *  @type int
		 *  @default 10
		 */
		"_iDisplayLength": 10,
	
		/**
		 * Paging start point - aiDisplay index
		 *  @type int
		 *  @default 0
		 */
		"_iDisplayStart": 0,
	
		/**
		 * Server-side processing - number of records in the result set
		 * (i.e. before filtering), Use fnRecordsTotal rather than
		 * this property to get the value of the number of records, regardless of
		 * the server-side processing setting.
		 *  @type int
		 *  @default 0
		 *  @private
		 */
		"_iRecordsTotal": 0,
	
		/**
		 * Server-side processing - number of records in the current display set
		 * (i.e. after filtering). Use fnRecordsDisplay rather than
		 * this property to get the value of the number of records, regardless of
		 * the server-side processing setting.
		 *  @type boolean
		 *  @default 0
		 *  @private
		 */
		"_iRecordsDisplay": 0,
	
		/**
		 * Flag to indicate if jQuery UI marking and classes should be used.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type boolean
		 */
		"bJUI": null,
	
		/**
		 * The classes to use for the table
		 *  @type object
		 *  @default {}
		 */
		"oClasses": {},
	
		/**
		 * Flag attached to the settings object so you can check in the draw
		 * callback if filtering has been done in the draw. Deprecated in favour of
		 * events.
		 *  @type boolean
		 *  @default false
		 *  @deprecated
		 */
		"bFiltered": false,
	
		/**
		 * Flag attached to the settings object so you can check in the draw
		 * callback if sorting has been done in the draw. Deprecated in favour of
		 * events.
		 *  @type boolean
		 *  @default false
		 *  @deprecated
		 */
		"bSorted": false,
	
		/**
		 * Indicate that if multiple rows are in the header and there is more than
		 * one unique cell per column, if the top one (true) or bottom one (false)
		 * should be used for sorting / title by DataTables.
		 * Note that this parameter will be set by the initialisation routine. To
		 * set a default use {@link DataTable.defaults}.
		 *  @type boolean
		 */
		"bSortCellsTop": null,
	
		/**
		 * Initialisation object that is used for the table
		 *  @type object
		 *  @default null
		 */
		"oInit": null,
	
		/**
		 * Destroy callback functions - for plug-ins to attach themselves to the
		 * destroy so they can clean up markup and events.
		 *  @type array
		 *  @default []
		 */
		"aoDestroyCallback": [],
	
	
		/**
		 * Get the number of records in the current record set, before filtering
		 *  @type function
		 */
		"fnRecordsTotal": function ()
		{
			return _fnDataSource( this ) == 'ssp' ?
				this._iRecordsTotal * 1 :
				this.aiDisplayMaster.length;
		},
	
		/**
		 * Get the number of records in the current record set, after filtering
		 *  @type function
		 */
		"fnRecordsDisplay": function ()
		{
			return _fnDataSource( this ) == 'ssp' ?
				this._iRecordsDisplay * 1 :
				this.aiDisplay.length;
		},
	
		/**
		 * Get the display end point - aiDisplay index
		 *  @type function
		 */
		"fnDisplayEnd": function ()
		{
			var
				len      = this._iDisplayLength,
				start    = this._iDisplayStart,
				calc     = start + len,
				records  = this.aiDisplay.length,
				features = this.oFeatures,
				paginate = features.bPaginate;
	
			if ( features.bServerSide ) {
				return paginate === false || len === -1 ?
					start + records :
					Math.min( start+len, this._iRecordsDisplay );
			}
			else {
				return ! paginate || calc>records || len===-1 ?
					records :
					calc;
			}
		},
	
		/**
		 * The DataTables object for this table
		 *  @type object
		 *  @default null
		 */
		"oInstance": null,
	
		/**
		 * Unique identifier for each instance of the DataTables object. If there
		 * is an ID on the table node, then it takes that value, otherwise an
		 * incrementing internal counter is used.
		 *  @type string
		 *  @default null
		 */
		"sInstance": null,
	
		/**
		 * tabindex attribute value that is added to DataTables control elements, allowing
		 * keyboard navigation of the table and its controls.
		 */
		"iTabIndex": 0,
	
		/**
		 * DIV container for the footer scrolling table if scrolling
		 */
		"nScrollHead": null,
	
		/**
		 * DIV container for the footer scrolling table if scrolling
		 */
		"nScrollFoot": null,
	
		/**
		 * Last applied sort
		 *  @type array
		 *  @default []
		 */
		"aLastSort": [],
	
		/**
		 * Stored plug-in instances
		 *  @type object
		 *  @default {}
		 */
		"oPlugins": {},
	
		/**
		 * Function used to get a row's id from the row's data
		 *  @type function
		 *  @default null
		 */
		"rowIdFn": null,
	
		/**
		 * Data location where to store a row's id
		 *  @type string
		 *  @default null
		 */
		"rowId": null
	};

	/**
	 * Extension object for DataTables that is used to provide all extension
	 * options.
	 *
	 * Note that the `DataTable.ext` object is available through
	 * `jQuery.fn.dataTable.ext` where it may be accessed and manipulated. It is
	 * also aliased to `jQuery.fn.dataTableExt` for historic reasons.
	 *  @namespace
	 *  @extends DataTable.models.ext
	 */
	
	
	/**
	 * DataTables extensions
	 * 
	 * This namespace acts as a collection area for plug-ins that can be used to
	 * extend DataTables capabilities. Indeed many of the build in methods
	 * use this method to provide their own capabilities (sorting methods for
	 * example).
	 *
	 * Note that this namespace is aliased to `jQuery.fn.dataTableExt` for legacy
	 * reasons
	 *
	 *  @namespace
	 */
	DataTable.ext = _ext = {
		/**
		 * Buttons. For use with the Buttons extension for DataTables. This is
		 * defined here so other extensions can define buttons regardless of load
		 * order. It is _not_ used by DataTables core.
		 *
		 *  @type object
		 *  @default {}
		 */
		buttons: {},
	
	
		/**
		 * Element class names
		 *
		 *  @type object
		 *  @default {}
		 */
		classes: {},
	
	
		/**
		 * DataTables build type (expanded by the download builder)
		 *
		 *  @type string
		 */
		builder: "-source-",
	
	
		/**
		 * Error reporting.
		 * 
		 * How should DataTables report an error. Can take the value 'alert',
		 * 'throw', 'none' or a function.
		 *
		 *  @type string|function
		 *  @default alert
		 */
		errMode: "alert",
	
	
		/**
		 * Feature plug-ins.
		 * 
		 * This is an array of objects which describe the feature plug-ins that are
		 * available to DataTables. These feature plug-ins are then available for
		 * use through the `dom` initialisation option.
		 * 
		 * Each feature plug-in is described by an object which must have the
		 * following properties:
		 * 
		 * * `fnInit` - function that is used to initialise the plug-in,
		 * * `cFeature` - a character so the feature can be enabled by the `dom`
		 *   instillation option. This is case sensitive.
		 *
		 * The `fnInit` function has the following input parameters:
		 *
		 * 1. `{object}` DataTables settings object: see
		 *    {@link DataTable.models.oSettings}
		 *
		 * And the following return is expected:
		 * 
		 * * {node|null} The element which contains your feature. Note that the
		 *   return may also be void if your plug-in does not require to inject any
		 *   DOM elements into DataTables control (`dom`) - for example this might
		 *   be useful when developing a plug-in which allows table control via
		 *   keyboard entry
		 *
		 *  @type array
		 *
		 *  @example
		 *    $.fn.dataTable.ext.features.push( {
		 *      "fnInit": function( oSettings ) {
		 *        return new TableTools( { "oDTSettings": oSettings } );
		 *      },
		 *      "cFeature": "T"
		 *    } );
		 */
		feature: [],
	
	
		/**
		 * Row searching.
		 * 
		 * This method of searching is complimentary to the default type based
		 * searching, and a lot more comprehensive as it allows you complete control
		 * over the searching logic. Each element in this array is a function
		 * (parameters described below) that is called for every row in the table,
		 * and your logic decides if it should be included in the searching data set
		 * or not.
		 *
		 * Searching functions have the following input parameters:
		 *
		 * 1. `{object}` DataTables settings object: see
		 *    {@link DataTable.models.oSettings}
		 * 2. `{array|object}` Data for the row to be processed (same as the
		 *    original format that was passed in as the data source, or an array
		 *    from a DOM data source
		 * 3. `{int}` Row index ({@link DataTable.models.oSettings.aoData}), which
		 *    can be useful to retrieve the `TR` element if you need DOM interaction.
		 *
		 * And the following return is expected:
		 *
		 * * {boolean} Include the row in the searched result set (true) or not
		 *   (false)
		 *
		 * Note that as with the main search ability in DataTables, technically this
		 * is "filtering", since it is subtractive. However, for consistency in
		 * naming we call it searching here.
		 *
		 *  @type array
		 *  @default []
		 *
		 *  @example
		 *    // The following example shows custom search being applied to the
		 *    // fourth column (i.e. the data[3] index) based on two input values
		 *    // from the end-user, matching the data in a certain range.
		 *    $.fn.dataTable.ext.search.push(
		 *      function( settings, data, dataIndex ) {
		 *        var min = document.getElementById('min').value * 1;
		 *        var max = document.getElementById('max').value * 1;
		 *        var version = data[3] == "-" ? 0 : data[3]*1;
		 *
		 *        if ( min == "" && max == "" ) {
		 *          return true;
		 *        }
		 *        else if ( min == "" && version < max ) {
		 *          return true;
		 *        }
		 *        else if ( min < version && "" == max ) {
		 *          return true;
		 *        }
		 *        else if ( min < version && version < max ) {
		 *          return true;
		 *        }
		 *        return false;
		 *      }
		 *    );
		 */
		search: [],
	
	
		/**
		 * Selector extensions
		 *
		 * The `selector` option can be used to extend the options available for the
		 * selector modifier options (`selector-modifier` object data type) that
		 * each of the three built in selector types offer (row, column and cell +
		 * their plural counterparts). For example the Select extension uses this
		 * mechanism to provide an option to select only rows, columns and cells
		 * that have been marked as selected by the end user (`{selected: true}`),
		 * which can be used in conjunction with the existing built in selector
		 * options.
		 *
		 * Each property is an array to which functions can be pushed. The functions
		 * take three attributes:
		 *
		 * * Settings object for the host table
		 * * Options object (`selector-modifier` object type)
		 * * Array of selected item indexes
		 *
		 * The return is an array of the resulting item indexes after the custom
		 * selector has been applied.
		 *
		 *  @type object
		 */
		selector: {
			cell: [],
			column: [],
			row: []
		},
	
	
		/**
		 * Internal functions, exposed for used in plug-ins.
		 * 
		 * Please note that you should not need to use the internal methods for
		 * anything other than a plug-in (and even then, try to avoid if possible).
		 * The internal function may change between releases.
		 *
		 *  @type object
		 *  @default {}
		 */
		internal: {},
	
	
		/**
		 * Legacy configuration options. Enable and disable legacy options that
		 * are available in DataTables.
		 *
		 *  @type object
		 */
		legacy: {
			/**
			 * Enable / disable DataTables 1.9 compatible server-side processing
			 * requests
			 *
			 *  @type boolean
			 *  @default null
			 */
			ajax: null
		},
	
	
		/**
		 * Pagination plug-in methods.
		 * 
		 * Each entry in this object is a function and defines which buttons should
		 * be shown by the pagination rendering method that is used for the table:
		 * {@link DataTable.ext.renderer.pageButton}. The renderer addresses how the
		 * buttons are displayed in the document, while the functions here tell it
		 * what buttons to display. This is done by returning an array of button
		 * descriptions (what each button will do).
		 *
		 * Pagination types (the four built in options and any additional plug-in
		 * options defined here) can be used through the `paginationType`
		 * initialisation parameter.
		 *
		 * The functions defined take two parameters:
		 *
		 * 1. `{int} page` The current page index
		 * 2. `{int} pages` The number of pages in the table
		 *
		 * Each function is expected to return an array where each element of the
		 * array can be one of:
		 *
		 * * `first` - Jump to first page when activated
		 * * `last` - Jump to last page when activated
		 * * `previous` - Show previous page when activated
		 * * `next` - Show next page when activated
		 * * `{int}` - Show page of the index given
		 * * `{array}` - A nested array containing the above elements to add a
		 *   containing 'DIV' element (might be useful for styling).
		 *
		 * Note that DataTables v1.9- used this object slightly differently whereby
		 * an object with two functions would be defined for each plug-in. That
		 * ability is still supported by DataTables 1.10+ to provide backwards
		 * compatibility, but this option of use is now decremented and no longer
		 * documented in DataTables 1.10+.
		 *
		 *  @type object
		 *  @default {}
		 *
		 *  @example
		 *    // Show previous, next and current page buttons only
		 *    $.fn.dataTableExt.oPagination.current = function ( page, pages ) {
		 *      return [ 'previous', page, 'next' ];
		 *    };
		 */
		pager: {},
	
	
		renderer: {
			pageButton: {},
			header: {}
		},
	
	
		/**
		 * Ordering plug-ins - custom data source
		 * 
		 * The extension options for ordering of data available here is complimentary
		 * to the default type based ordering that DataTables typically uses. It
		 * allows much greater control over the the data that is being used to
		 * order a column, but is necessarily therefore more complex.
		 * 
		 * This type of ordering is useful if you want to do ordering based on data
		 * live from the DOM (for example the contents of an 'input' element) rather
		 * than just the static string that DataTables knows of.
		 * 
		 * The way these plug-ins work is that you create an array of the values you
		 * wish to be ordering for the column in question and then return that
		 * array. The data in the array much be in the index order of the rows in
		 * the table (not the currently ordering order!). Which order data gathering
		 * function is run here depends on the `dt-init columns.orderDataType`
		 * parameter that is used for the column (if any).
		 *
		 * The functions defined take two parameters:
		 *
		 * 1. `{object}` DataTables settings object: see
		 *    {@link DataTable.models.oSettings}
		 * 2. `{int}` Target column index
		 *
		 * Each function is expected to return an array:
		 *
		 * * `{array}` Data for the column to be ordering upon
		 *
		 *  @type array
		 *
		 *  @example
		 *    // Ordering using `input` node values
		 *    $.fn.dataTable.ext.order['dom-text'] = function  ( settings, col )
		 *    {
		 *      return this.api().column( col, {order:'index'} ).nodes().map( function ( td, i ) {
		 *        return $('input', td).val();
		 *      } );
		 *    }
		 */
		order: {},
	
	
		/**
		 * Type based plug-ins.
		 *
		 * Each column in DataTables has a type assigned to it, either by automatic
		 * detection or by direct assignment using the `type` option for the column.
		 * The type of a column will effect how it is ordering and search (plug-ins
		 * can also make use of the column type if required).
		 *
		 * @namespace
		 */
		type: {
			/**
			 * Type detection functions.
			 *
			 * The functions defined in this object are used to automatically detect
			 * a column's type, making initialisation of DataTables super easy, even
			 * when complex data is in the table.
			 *
			 * The functions defined take two parameters:
			 *
		     *  1. `{*}` Data from the column cell to be analysed
		     *  2. `{settings}` DataTables settings object. This can be used to
		     *     perform context specific type detection - for example detection
		     *     based on language settings such as using a comma for a decimal
		     *     place. Generally speaking the options from the settings will not
		     *     be required
			 *
			 * Each function is expected to return:
			 *
			 * * `{string|null}` Data type detected, or null if unknown (and thus
			 *   pass it on to the other type detection functions.
			 *
			 *  @type array
			 *
			 *  @example
			 *    // Currency type detection plug-in:
			 *    $.fn.dataTable.ext.type.detect.push(
			 *      function ( data, settings ) {
			 *        // Check the numeric part
			 *        if ( ! $.isNumeric( data.substring(1) ) ) {
			 *          return null;
			 *        }
			 *
			 *        // Check prefixed by currency
			 *        if ( data.charAt(0) == '$' || data.charAt(0) == '&pound;' ) {
			 *          return 'currency';
			 *        }
			 *        return null;
			 *      }
			 *    );
			 */
			detect: [],
	
	
			/**
			 * Type based search formatting.
			 *
			 * The type based searching functions can be used to pre-format the
			 * data to be search on. For example, it can be used to strip HTML
			 * tags or to de-format telephone numbers for numeric only searching.
			 *
			 * Note that is a search is not defined for a column of a given type,
			 * no search formatting will be performed.
			 * 
			 * Pre-processing of searching data plug-ins - When you assign the sType
			 * for a column (or have it automatically detected for you by DataTables
			 * or a type detection plug-in), you will typically be using this for
			 * custom sorting, but it can also be used to provide custom searching
			 * by allowing you to pre-processing the data and returning the data in
			 * the format that should be searched upon. This is done by adding
			 * functions this object with a parameter name which matches the sType
			 * for that target column. This is the corollary of <i>afnSortData</i>
			 * for searching data.
			 *
			 * The functions defined take a single parameter:
			 *
		     *  1. `{*}` Data from the column cell to be prepared for searching
			 *
			 * Each function is expected to return:
			 *
			 * * `{string|null}` Formatted string that will be used for the searching.
			 *
			 *  @type object
			 *  @default {}
			 *
			 *  @example
			 *    $.fn.dataTable.ext.type.search['title-numeric'] = function ( d ) {
			 *      return d.replace(/\n/g," ").replace( /<.*?>/g, "" );
			 *    }
			 */
			search: {},
	
	
			/**
			 * Type based ordering.
			 *
			 * The column type tells DataTables what ordering to apply to the table
			 * when a column is sorted upon. The order for each type that is defined,
			 * is defined by the functions available in this object.
			 *
			 * Each ordering option can be described by three properties added to
			 * this object:
			 *
			 * * `{type}-pre` - Pre-formatting function
			 * * `{type}-asc` - Ascending order function
			 * * `{type}-desc` - Descending order function
			 *
			 * All three can be used together, only `{type}-pre` or only
			 * `{type}-asc` and `{type}-desc` together. It is generally recommended
			 * that only `{type}-pre` is used, as this provides the optimal
			 * implementation in terms of speed, although the others are provided
			 * for compatibility with existing Javascript sort functions.
			 *
			 * `{type}-pre`: Functions defined take a single parameter:
			 *
		     *  1. `{*}` Data from the column cell to be prepared for ordering
			 *
			 * And return:
			 *
			 * * `{*}` Data to be sorted upon
			 *
			 * `{type}-asc` and `{type}-desc`: Functions are typical Javascript sort
			 * functions, taking two parameters:
			 *
		     *  1. `{*}` Data to compare to the second parameter
		     *  2. `{*}` Data to compare to the first parameter
			 *
			 * And returning:
			 *
			 * * `{*}` Ordering match: <0 if first parameter should be sorted lower
			 *   than the second parameter, ===0 if the two parameters are equal and
			 *   >0 if the first parameter should be sorted height than the second
			 *   parameter.
			 * 
			 *  @type object
			 *  @default {}
			 *
			 *  @example
			 *    // Numeric ordering of formatted numbers with a pre-formatter
			 *    $.extend( $.fn.dataTable.ext.type.order, {
			 *      "string-pre": function(x) {
			 *        a = (a === "-" || a === "") ? 0 : a.replace( /[^\d\-\.]/g, "" );
			 *        return parseFloat( a );
			 *      }
			 *    } );
			 *
			 *  @example
			 *    // Case-sensitive string ordering, with no pre-formatting method
			 *    $.extend( $.fn.dataTable.ext.order, {
			 *      "string-case-asc": function(x,y) {
			 *        return ((x < y) ? -1 : ((x > y) ? 1 : 0));
			 *      },
			 *      "string-case-desc": function(x,y) {
			 *        return ((x < y) ? 1 : ((x > y) ? -1 : 0));
			 *      }
			 *    } );
			 */
			order: {}
		},
	
		/**
		 * Unique DataTables instance counter
		 *
		 * @type int
		 * @private
		 */
		_unique: 0,
	
	
		//
		// Depreciated
		// The following properties are retained for backwards compatiblity only.
		// The should not be used in new projects and will be removed in a future
		// version
		//
	
		/**
		 * Version check function.
		 *  @type function
		 *  @depreciated Since 1.10
		 */
		fnVersionCheck: DataTable.fnVersionCheck,
	
	
		/**
		 * Index for what 'this' index API functions should use
		 *  @type int
		 *  @deprecated Since v1.10
		 */
		iApiIndex: 0,
	
	
		/**
		 * jQuery UI class container
		 *  @type object
		 *  @deprecated Since v1.10
		 */
		oJUIClasses: {},
	
	
		/**
		 * Software version
		 *  @type string
		 *  @deprecated Since v1.10
		 */
		sVersion: DataTable.version
	};
	
	
	//
	// Backwards compatibility. Alias to pre 1.10 Hungarian notation counter parts
	//
	$.extend( _ext, {
		afnFiltering: _ext.search,
		aTypes:       _ext.type.detect,
		ofnSearch:    _ext.type.search,
		oSort:        _ext.type.order,
		afnSortData:  _ext.order,
		aoFeatures:   _ext.feature,
		oApi:         _ext.internal,
		oStdClasses:  _ext.classes,
		oPagination:  _ext.pager
	} );
	
	
	$.extend( DataTable.ext.classes, {
		"sTable": "dataTable",
		"sNoFooter": "no-footer",
	
		/* Paging buttons */
		"sPageButton": "paginate_button",
		"sPageButtonActive": "current",
		"sPageButtonDisabled": "disabled",
	
		/* Striping classes */
		"sStripeOdd": "odd",
		"sStripeEven": "even",
	
		/* Empty row */
		"sRowEmpty": "dataTables_empty",
	
		/* Features */
		"sWrapper": "dataTables_wrapper",
		"sFilter": "dataTables_filter",
		"sInfo": "dataTables_info",
		"sPaging": "dataTables_paginate paging_", /* Note that the type is postfixed */
		"sLength": "dataTables_length",
		"sProcessing": "dataTables_processing",
	
		/* Sorting */
		"sSortAsc": "sorting_asc",
		"sSortDesc": "sorting_desc",
		"sSortable": "sorting", /* Sortable in both directions */
		"sSortableAsc": "sorting_asc_disabled",
		"sSortableDesc": "sorting_desc_disabled",
		"sSortableNone": "sorting_disabled",
		"sSortColumn": "sorting_", /* Note that an int is postfixed for the sorting order */
	
		/* Filtering */
		"sFilterInput": "",
	
		/* Page length */
		"sLengthSelect": "",
	
		/* Scrolling */
		"sScrollWrapper": "dataTables_scroll",
		"sScrollHead": "dataTables_scrollHead",
		"sScrollHeadInner": "dataTables_scrollHeadInner",
		"sScrollBody": "dataTables_scrollBody",
		"sScrollFoot": "dataTables_scrollFoot",
		"sScrollFootInner": "dataTables_scrollFootInner",
	
		/* Misc */
		"sHeaderTH": "",
		"sFooterTH": "",
	
		// Deprecated
		"sSortJUIAsc": "",
		"sSortJUIDesc": "",
		"sSortJUI": "",
		"sSortJUIAscAllowed": "",
		"sSortJUIDescAllowed": "",
		"sSortJUIWrapper": "",
		"sSortIcon": "",
		"sJUIHeader": "",
		"sJUIFooter": ""
	} );
	
	
	(function() {
	
	// Reused strings for better compression. Closure compiler appears to have a
	// weird edge case where it is trying to expand strings rather than use the
	// variable version. This results in about 200 bytes being added, for very
	// little preference benefit since it this run on script load only.
	var _empty = '';
	_empty = '';
	
	var _stateDefault = _empty + 'ui-state-default';
	var _sortIcon     = _empty + 'css_right ui-icon ui-icon-';
	var _headerFooter = _empty + 'fg-toolbar ui-toolbar ui-widget-header ui-helper-clearfix';
	
	$.extend( DataTable.ext.oJUIClasses, DataTable.ext.classes, {
		/* Full numbers paging buttons */
		"sPageButton":         "fg-button ui-button "+_stateDefault,
		"sPageButtonActive":   "ui-state-disabled",
		"sPageButtonDisabled": "ui-state-disabled",
	
		/* Features */
		"sPaging": "dataTables_paginate fg-buttonset ui-buttonset fg-buttonset-multi "+
			"ui-buttonset-multi paging_", /* Note that the type is postfixed */
	
		/* Sorting */
		"sSortAsc":            _stateDefault+" sorting_asc",
		"sSortDesc":           _stateDefault+" sorting_desc",
		"sSortable":           _stateDefault+" sorting",
		"sSortableAsc":        _stateDefault+" sorting_asc_disabled",
		"sSortableDesc":       _stateDefault+" sorting_desc_disabled",
		"sSortableNone":       _stateDefault+" sorting_disabled",
		"sSortJUIAsc":         _sortIcon+"triangle-1-n",
		"sSortJUIDesc":        _sortIcon+"triangle-1-s",
		"sSortJUI":            _sortIcon+"carat-2-n-s",
		"sSortJUIAscAllowed":  _sortIcon+"carat-1-n",
		"sSortJUIDescAllowed": _sortIcon+"carat-1-s",
		"sSortJUIWrapper":     "DataTables_sort_wrapper",
		"sSortIcon":           "DataTables_sort_icon",
	
		/* Scrolling */
		"sScrollHead": "dataTables_scrollHead "+_stateDefault,
		"sScrollFoot": "dataTables_scrollFoot "+_stateDefault,
	
		/* Misc */
		"sHeaderTH":  _stateDefault,
		"sFooterTH":  _stateDefault,
		"sJUIHeader": _headerFooter+" ui-corner-tl ui-corner-tr",
		"sJUIFooter": _headerFooter+" ui-corner-bl ui-corner-br"
	} );
	
	}());
	
	
	
	var extPagination = DataTable.ext.pager;
	
	function _numbers ( page, pages ) {
		var
			numbers = [],
			buttons = extPagination.numbers_length,
			half = Math.floor( buttons / 2 ),
			i = 1;
	
		if ( pages <= buttons ) {
			numbers = _range( 0, pages );
		}
		else if ( page <= half ) {
			numbers = _range( 0, buttons-2 );
			numbers.push( 'ellipsis' );
			numbers.push( pages-1 );
		}
		else if ( page >= pages - 1 - half ) {
			numbers = _range( pages-(buttons-2), pages );
			numbers.splice( 0, 0, 'ellipsis' ); // no unshift in ie6
			numbers.splice( 0, 0, 0 );
		}
		else {
			numbers = _range( page-half+2, page+half-1 );
			numbers.push( 'ellipsis' );
			numbers.push( pages-1 );
			numbers.splice( 0, 0, 'ellipsis' );
			numbers.splice( 0, 0, 0 );
		}
	
		numbers.DT_el = 'span';
		return numbers;
	}
	
	
	$.extend( extPagination, {
		simple: function ( page, pages ) {
			return [ 'previous', 'next' ];
		},
	
		full: function ( page, pages ) {
			return [  'first', 'previous', 'next', 'last' ];
		},
	
		numbers: function ( page, pages ) {
			return [ _numbers(page, pages) ];
		},
	
		simple_numbers: function ( page, pages ) {
			return [ 'previous', _numbers(page, pages), 'next' ];
		},
	
		full_numbers: function ( page, pages ) {
			return [ 'first', 'previous', _numbers(page, pages), 'next', 'last' ];
		},
		
		first_last_numbers: function (page, pages) {
	 		return ['first', _numbers(page, pages), 'last'];
	 	},
	
		// For testing and plug-ins to use
		_numbers: _numbers,
	
		// Number of number buttons (including ellipsis) to show. _Must be odd!_
		numbers_length: 7
	} );
	
	
	$.extend( true, DataTable.ext.renderer, {
		pageButton: {
			_: function ( settings, host, idx, buttons, page, pages ) {
				var classes = settings.oClasses;
				var lang = settings.oLanguage.oPaginate;
				var aria = settings.oLanguage.oAria.paginate || {};
				var btnDisplay, btnClass, counter=0;
	
				var attach = function( container, buttons ) {
					var i, ien, node, button;
					var clickHandler = function ( e ) {
						_fnPageChange( settings, e.data.action, true );
					};
	
					for ( i=0, ien=buttons.length ; i<ien ; i++ ) {
						button = buttons[i];
	
						if ( $.isArray( button ) ) {
							var inner = $( '<'+(button.DT_el || 'div')+'/>' )
								.appendTo( container );
							attach( inner, button );
						}
						else {
							btnDisplay = null;
							btnClass = '';
	
							switch ( button ) {
								case 'ellipsis':
									container.append('<span class="ellipsis">&#x2026;</span>');
									break;
	
								case 'first':
									btnDisplay = lang.sFirst;
									btnClass = button + (page > 0 ?
										'' : ' '+classes.sPageButtonDisabled);
									break;
	
								case 'previous':
									btnDisplay = lang.sPrevious;
									btnClass = button + (page > 0 ?
										'' : ' '+classes.sPageButtonDisabled);
									break;
	
								case 'next':
									btnDisplay = lang.sNext;
									btnClass = button + (page < pages-1 ?
										'' : ' '+classes.sPageButtonDisabled);
									break;
	
								case 'last':
									btnDisplay = lang.sLast;
									btnClass = button + (page < pages-1 ?
										'' : ' '+classes.sPageButtonDisabled);
									break;
	
								default:
									btnDisplay = button + 1;
									btnClass = page === button ?
										classes.sPageButtonActive : '';
									break;
							}
	
							if ( btnDisplay !== null ) {
								node = $('<a>', {
										'class': classes.sPageButton+' '+btnClass,
										'aria-controls': settings.sTableId,
										'aria-label': aria[ button ],
										'data-dt-idx': counter,
										'tabindex': settings.iTabIndex,
										'id': idx === 0 && typeof button === 'string' ?
											settings.sTableId +'_'+ button :
											null
									} )
									.html( btnDisplay )
									.appendTo( container );
	
								_fnBindAction(
									node, {action: button}, clickHandler
								);
	
								counter++;
							}
						}
					}
				};
	
				// IE9 throws an 'unknown error' if document.activeElement is used
				// inside an iframe or frame. Try / catch the error. Not good for
				// accessibility, but neither are frames.
				var activeEl;
	
				try {
					// Because this approach is destroying and recreating the paging
					// elements, focus is lost on the select button which is bad for
					// accessibility. So we want to restore focus once the draw has
					// completed
					activeEl = $(host).find(document.activeElement).data('dt-idx');
				}
				catch (e) {}
	
				attach( $(host).empty(), buttons );
	
				if ( activeEl !== undefined ) {
					$(host).find( '[data-dt-idx='+activeEl+']' ).focus();
				}
			}
		}
	} );
	
	
	
	// Built in type detection. See model.ext.aTypes for information about
	// what is required from this methods.
	$.extend( DataTable.ext.type.detect, [
		// Plain numbers - first since V8 detects some plain numbers as dates
		// e.g. Date.parse('55') (but not all, e.g. Date.parse('22')...).
		function ( d, settings )
		{
			var decimal = settings.oLanguage.sDecimal;
			return _isNumber( d, decimal ) ? 'num'+decimal : null;
		},
	
		// Dates (only those recognised by the browser's Date.parse)
		function ( d, settings )
		{
			// V8 tries _very_ hard to make a string passed into `Date.parse()`
			// valid, so we need to use a regex to restrict date formats. Use a
			// plug-in for anything other than ISO8601 style strings
			if ( d && !(d instanceof Date) && ! _re_date.test(d) ) {
				return null;
			}
			var parsed = Date.parse(d);
			return (parsed !== null && !isNaN(parsed)) || _empty(d) ? 'date' : null;
		},
	
		// Formatted numbers
		function ( d, settings )
		{
			var decimal = settings.oLanguage.sDecimal;
			return _isNumber( d, decimal, true ) ? 'num-fmt'+decimal : null;
		},
	
		// HTML numeric
		function ( d, settings )
		{
			var decimal = settings.oLanguage.sDecimal;
			return _htmlNumeric( d, decimal ) ? 'html-num'+decimal : null;
		},
	
		// HTML numeric, formatted
		function ( d, settings )
		{
			var decimal = settings.oLanguage.sDecimal;
			return _htmlNumeric( d, decimal, true ) ? 'html-num-fmt'+decimal : null;
		},
	
		// HTML (this is strict checking - there must be html)
		function ( d, settings )
		{
			return _empty( d ) || (typeof d === 'string' && d.indexOf('<') !== -1) ?
				'html' : null;
		}
	] );
	
	
	
	// Filter formatting functions. See model.ext.ofnSearch for information about
	// what is required from these methods.
	// 
	// Note that additional search methods are added for the html numbers and
	// html formatted numbers by `_addNumericSort()` when we know what the decimal
	// place is
	
	
	$.extend( DataTable.ext.type.search, {
		html: function ( data ) {
			return _empty(data) ?
				data :
				typeof data === 'string' ?
					data
						.replace( _re_new_lines, " " )
						.replace( _re_html, "" ) :
					'';
		},
	
		string: function ( data ) {
			return _empty(data) ?
				data :
				typeof data === 'string' ?
					data.replace( _re_new_lines, " " ) :
					data;
		}
	} );
	
	
	
	var __numericReplace = function ( d, decimalPlace, re1, re2 ) {
		if ( d !== 0 && (!d || d === '-') ) {
			return -Infinity;
		}
	
		// If a decimal place other than `.` is used, it needs to be given to the
		// function so we can detect it and replace with a `.` which is the only
		// decimal place Javascript recognises - it is not locale aware.
		if ( decimalPlace ) {
			d = _numToDecimal( d, decimalPlace );
		}
	
		if ( d.replace ) {
			if ( re1 ) {
				d = d.replace( re1, '' );
			}
	
			if ( re2 ) {
				d = d.replace( re2, '' );
			}
		}
	
		return d * 1;
	};
	
	
	// Add the numeric 'deformatting' functions for sorting and search. This is done
	// in a function to provide an easy ability for the language options to add
	// additional methods if a non-period decimal place is used.
	function _addNumericSort ( decimalPlace ) {
		$.each(
			{
				// Plain numbers
				"num": function ( d ) {
					return __numericReplace( d, decimalPlace );
				},
	
				// Formatted numbers
				"num-fmt": function ( d ) {
					return __numericReplace( d, decimalPlace, _re_formatted_numeric );
				},
	
				// HTML numeric
				"html-num": function ( d ) {
					return __numericReplace( d, decimalPlace, _re_html );
				},
	
				// HTML numeric, formatted
				"html-num-fmt": function ( d ) {
					return __numericReplace( d, decimalPlace, _re_html, _re_formatted_numeric );
				}
			},
			function ( key, fn ) {
				// Add the ordering method
				_ext.type.order[ key+decimalPlace+'-pre' ] = fn;
	
				// For HTML types add a search formatter that will strip the HTML
				if ( key.match(/^html\-/) ) {
					_ext.type.search[ key+decimalPlace ] = _ext.type.search.html;
				}
			}
		);
	}
	
	
	// Default sort methods
	$.extend( _ext.type.order, {
		// Dates
		"date-pre": function ( d ) {
			return Date.parse( d ) || -Infinity;
		},
	
		// html
		"html-pre": function ( a ) {
			return _empty(a) ?
				'' :
				a.replace ?
					a.replace( /<.*?>/g, "" ).toLowerCase() :
					a+'';
		},
	
		// string
		"string-pre": function ( a ) {
			// This is a little complex, but faster than always calling toString,
			// http://jsperf.com/tostring-v-check
			return _empty(a) ?
				'' :
				typeof a === 'string' ?
					a.toLowerCase() :
					! a.toString ?
						'' :
						a.toString();
		},
	
		// string-asc and -desc are retained only for compatibility with the old
		// sort methods
		"string-asc": function ( x, y ) {
			return ((x < y) ? -1 : ((x > y) ? 1 : 0));
		},
	
		"string-desc": function ( x, y ) {
			return ((x < y) ? 1 : ((x > y) ? -1 : 0));
		}
	} );
	
	
	// Numeric sorting types - order doesn't matter here
	_addNumericSort( '' );
	
	
	$.extend( true, DataTable.ext.renderer, {
		header: {
			_: function ( settings, cell, column, classes ) {
				// No additional mark-up required
				// Attach a sort listener to update on sort - note that using the
				// `DT` namespace will allow the event to be removed automatically
				// on destroy, while the `dt` namespaced event is the one we are
				// listening for
				$(settings.nTable).on( 'order.dt.DT', function ( e, ctx, sorting, columns ) {
					if ( settings !== ctx ) { // need to check this this is the host
						return;               // table, not a nested one
					}
	
					var colIdx = column.idx;
	
					cell
						.removeClass(
							column.sSortingClass +' '+
							classes.sSortAsc +' '+
							classes.sSortDesc
						)
						.addClass( columns[ colIdx ] == 'asc' ?
							classes.sSortAsc : columns[ colIdx ] == 'desc' ?
								classes.sSortDesc :
								column.sSortingClass
						);
				} );
			},
	
			jqueryui: function ( settings, cell, column, classes ) {
				$('<div/>')
					.addClass( classes.sSortJUIWrapper )
					.append( cell.contents() )
					.append( $('<span/>')
						.addClass( classes.sSortIcon+' '+column.sSortingClassJUI )
					)
					.appendTo( cell );
	
				// Attach a sort listener to update on sort
				$(settings.nTable).on( 'order.dt.DT', function ( e, ctx, sorting, columns ) {
					if ( settings !== ctx ) {
						return;
					}
	
					var colIdx = column.idx;
	
					cell
						.removeClass( classes.sSortAsc +" "+classes.sSortDesc )
						.addClass( columns[ colIdx ] == 'asc' ?
							classes.sSortAsc : columns[ colIdx ] == 'desc' ?
								classes.sSortDesc :
								column.sSortingClass
						);
	
					cell
						.find( 'span.'+classes.sSortIcon )
						.removeClass(
							classes.sSortJUIAsc +" "+
							classes.sSortJUIDesc +" "+
							classes.sSortJUI +" "+
							classes.sSortJUIAscAllowed +" "+
							classes.sSortJUIDescAllowed
						)
						.addClass( columns[ colIdx ] == 'asc' ?
							classes.sSortJUIAsc : columns[ colIdx ] == 'desc' ?
								classes.sSortJUIDesc :
								column.sSortingClassJUI
						);
				} );
			}
		}
	} );
	
	/*
	 * Public helper functions. These aren't used internally by DataTables, or
	 * called by any of the options passed into DataTables, but they can be used
	 * externally by developers working with DataTables. They are helper functions
	 * to make working with DataTables a little bit easier.
	 */
	
	var __htmlEscapeEntities = function ( d ) {
		return typeof d === 'string' ?
			d.replace(/</g, '&lt;').replace(/>/g, '&gt;').replace(/"/g, '&quot;') :
			d;
	};
	
	/**
	 * Helpers for `columns.render`.
	 *
	 * The options defined here can be used with the `columns.render` initialisation
	 * option to provide a display renderer. The following functions are defined:
	 *
	 * * `number` - Will format numeric data (defined by `columns.data`) for
	 *   display, retaining the original unformatted data for sorting and filtering.
	 *   It takes 5 parameters:
	 *   * `string` - Thousands grouping separator
	 *   * `string` - Decimal point indicator
	 *   * `integer` - Number of decimal points to show
	 *   * `string` (optional) - Prefix.
	 *   * `string` (optional) - Postfix (/suffix).
	 * * `text` - Escape HTML to help prevent XSS attacks. It has no optional
	 *   parameters.
	 *
	 * @example
	 *   // Column definition using the number renderer
	 *   {
	 *     data: "salary",
	 *     render: $.fn.dataTable.render.number( '\'', '.', 0, '$' )
	 *   }
	 *
	 * @namespace
	 */
	DataTable.render = {
		number: function ( thousands, decimal, precision, prefix, postfix ) {
			return {
				display: function ( d ) {
					if ( typeof d !== 'number' && typeof d !== 'string' ) {
						return d;
					}
	
					var negative = d < 0 ? '-' : '';
					var flo = parseFloat( d );
	
					// If NaN then there isn't much formatting that we can do - just
					// return immediately, escaping any HTML (this was supposed to
					// be a number after all)
					if ( isNaN( flo ) ) {
						return __htmlEscapeEntities( d );
					}
	
					flo = flo.toFixed( precision );
					d = Math.abs( flo );
	
					var intPart = parseInt( d, 10 );
					var floatPart = precision ?
						decimal+(d - intPart).toFixed( precision ).substring( 2 ):
						'';
	
					return negative + (prefix||'') +
						intPart.toString().replace(
							/\B(?=(\d{3})+(?!\d))/g, thousands
						) +
						floatPart +
						(postfix||'');
				}
			};
		},
	
		text: function () {
			return {
				display: __htmlEscapeEntities
			};
		}
	};
	
	
	/*
	 * This is really a good bit rubbish this method of exposing the internal methods
	 * publicly... - To be fixed in 2.0 using methods on the prototype
	 */
	
	
	/**
	 * Create a wrapper function for exporting an internal functions to an external API.
	 *  @param {string} fn API function name
	 *  @returns {function} wrapped function
	 *  @memberof DataTable#internal
	 */
	function _fnExternApiFunc (fn)
	{
		return function() {
			var args = [_fnSettingsFromNode( this[DataTable.ext.iApiIndex] )].concat(
				Array.prototype.slice.call(arguments)
			);
			return DataTable.ext.internal[fn].apply( this, args );
		};
	}
	
	
	/**
	 * Reference to internal functions for use by plug-in developers. Note that
	 * these methods are references to internal functions and are considered to be
	 * private. If you use these methods, be aware that they are liable to change
	 * between versions.
	 *  @namespace
	 */
	$.extend( DataTable.ext.internal, {
		_fnExternApiFunc: _fnExternApiFunc,
		_fnBuildAjax: _fnBuildAjax,
		_fnAjaxUpdate: _fnAjaxUpdate,
		_fnAjaxParameters: _fnAjaxParameters,
		_fnAjaxUpdateDraw: _fnAjaxUpdateDraw,
		_fnAjaxDataSrc: _fnAjaxDataSrc,
		_fnAddColumn: _fnAddColumn,
		_fnColumnOptions: _fnColumnOptions,
		_fnAdjustColumnSizing: _fnAdjustColumnSizing,
		_fnVisibleToColumnIndex: _fnVisibleToColumnIndex,
		_fnColumnIndexToVisible: _fnColumnIndexToVisible,
		_fnVisbleColumns: _fnVisbleColumns,
		_fnGetColumns: _fnGetColumns,
		_fnColumnTypes: _fnColumnTypes,
		_fnApplyColumnDefs: _fnApplyColumnDefs,
		_fnHungarianMap: _fnHungarianMap,
		_fnCamelToHungarian: _fnCamelToHungarian,
		_fnLanguageCompat: _fnLanguageCompat,
		_fnBrowserDetect: _fnBrowserDetect,
		_fnAddData: _fnAddData,
		_fnAddTr: _fnAddTr,
		_fnNodeToDataIndex: _fnNodeToDataIndex,
		_fnNodeToColumnIndex: _fnNodeToColumnIndex,
		_fnGetCellData: _fnGetCellData,
		_fnSetCellData: _fnSetCellData,
		_fnSplitObjNotation: _fnSplitObjNotation,
		_fnGetObjectDataFn: _fnGetObjectDataFn,
		_fnSetObjectDataFn: _fnSetObjectDataFn,
		_fnGetDataMaster: _fnGetDataMaster,
		_fnClearTable: _fnClearTable,
		_fnDeleteIndex: _fnDeleteIndex,
		_fnInvalidate: _fnInvalidate,
		_fnGetRowElements: _fnGetRowElements,
		_fnCreateTr: _fnCreateTr,
		_fnBuildHead: _fnBuildHead,
		_fnDrawHead: _fnDrawHead,
		_fnDraw: _fnDraw,
		_fnReDraw: _fnReDraw,
		_fnAddOptionsHtml: _fnAddOptionsHtml,
		_fnDetectHeader: _fnDetectHeader,
		_fnGetUniqueThs: _fnGetUniqueThs,
		_fnFeatureHtmlFilter: _fnFeatureHtmlFilter,
		_fnFilterComplete: _fnFilterComplete,
		_fnFilterCustom: _fnFilterCustom,
		_fnFilterColumn: _fnFilterColumn,
		_fnFilter: _fnFilter,
		_fnFilterCreateSearch: _fnFilterCreateSearch,
		_fnEscapeRegex: _fnEscapeRegex,
		_fnFilterData: _fnFilterData,
		_fnFeatureHtmlInfo: _fnFeatureHtmlInfo,
		_fnUpdateInfo: _fnUpdateInfo,
		_fnInfoMacros: _fnInfoMacros,
		_fnInitialise: _fnInitialise,
		_fnInitComplete: _fnInitComplete,
		_fnLengthChange: _fnLengthChange,
		_fnFeatureHtmlLength: _fnFeatureHtmlLength,
		_fnFeatureHtmlPaginate: _fnFeatureHtmlPaginate,
		_fnPageChange: _fnPageChange,
		_fnFeatureHtmlProcessing: _fnFeatureHtmlProcessing,
		_fnProcessingDisplay: _fnProcessingDisplay,
		_fnFeatureHtmlTable: _fnFeatureHtmlTable,
		_fnScrollDraw: _fnScrollDraw,
		_fnApplyToChildren: _fnApplyToChildren,
		_fnCalculateColumnWidths: _fnCalculateColumnWidths,
		_fnThrottle: _fnThrottle,
		_fnConvertToWidth: _fnConvertToWidth,
		_fnGetWidestNode: _fnGetWidestNode,
		_fnGetMaxLenString: _fnGetMaxLenString,
		_fnStringToCss: _fnStringToCss,
		_fnSortFlatten: _fnSortFlatten,
		_fnSort: _fnSort,
		_fnSortAria: _fnSortAria,
		_fnSortListener: _fnSortListener,
		_fnSortAttachListener: _fnSortAttachListener,
		_fnSortingClasses: _fnSortingClasses,
		_fnSortData: _fnSortData,
		_fnSaveState: _fnSaveState,
		_fnLoadState: _fnLoadState,
		_fnSettingsFromNode: _fnSettingsFromNode,
		_fnLog: _fnLog,
		_fnMap: _fnMap,
		_fnBindAction: _fnBindAction,
		_fnCallbackReg: _fnCallbackReg,
		_fnCallbackFire: _fnCallbackFire,
		_fnLengthOverflow: _fnLengthOverflow,
		_fnRenderer: _fnRenderer,
		_fnDataSource: _fnDataSource,
		_fnRowAttributes: _fnRowAttributes,
		_fnCalculateEnd: function () {} // Used by a lot of plug-ins, but redundant
		                                // in 1.10, so this dead-end function is
		                                // added to prevent errors
	} );
	

	// jQuery access
	$.fn.dataTable = DataTable;

	// Provide access to the host jQuery object (circular reference)
	DataTable.$ = $;

	// Legacy aliases
	$.fn.dataTableSettings = DataTable.settings;
	$.fn.dataTableExt = DataTable.ext;

	// With a capital `D` we return a DataTables API instance rather than a
	// jQuery object
	$.fn.DataTable = function ( opts ) {
		return $(this).dataTable( opts ).api();
	};

	// All properties that are available to $.fn.dataTable should also be
	// available on $.fn.DataTable
	$.each( DataTable, function ( prop, val ) {
		$.fn.DataTable[ prop ] = val;
	} );


	// Information about events fired by DataTables - for documentation.
	/**
	 * Draw event, fired whenever the table is redrawn on the page, at the same
	 * point as fnDrawCallback. This may be useful for binding events or
	 * performing calculations when the table is altered at all.
	 *  @name DataTable#draw.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 */

	/**
	 * Search event, fired when the searching applied to the table (using the
	 * built-in global search, or column filters) is altered.
	 *  @name DataTable#search.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 */

	/**
	 * Page change event, fired when the paging of the table is altered.
	 *  @name DataTable#page.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 */

	/**
	 * Order event, fired when the ordering applied to the table is altered.
	 *  @name DataTable#order.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 */

	/**
	 * DataTables initialisation complete event, fired when the table is fully
	 * drawn, including Ajax data loaded, if Ajax data is required.
	 *  @name DataTable#init.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} oSettings DataTables settings object
	 *  @param {object} json The JSON object request from the server - only
	 *    present if client-side Ajax sourced data is used</li></ol>
	 */

	/**
	 * State save event, fired when the table has changed state a new state save
	 * is required. This event allows modification of the state saving object
	 * prior to actually doing the save, including addition or other state
	 * properties (for plug-ins) or modification of a DataTables core property.
	 *  @name DataTable#stateSaveParams.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} oSettings DataTables settings object
	 *  @param {object} json The state information to be saved
	 */

	/**
	 * State load event, fired when the table is loading state from the stored
	 * data, but prior to the settings object being modified by the saved state
	 * - allowing modification of the saved state is required or loading of
	 * state for a plug-in.
	 *  @name DataTable#stateLoadParams.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} oSettings DataTables settings object
	 *  @param {object} json The saved state information
	 */

	/**
	 * State loaded event, fired when state has been loaded from stored data and
	 * the settings object has been modified by the loaded data.
	 *  @name DataTable#stateLoaded.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} oSettings DataTables settings object
	 *  @param {object} json The saved state information
	 */

	/**
	 * Processing event, fired when DataTables is doing some kind of processing
	 * (be it, order, searcg or anything else). It can be used to indicate to
	 * the end user that there is something happening, or that something has
	 * finished.
	 *  @name DataTable#processing.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} oSettings DataTables settings object
	 *  @param {boolean} bShow Flag for if DataTables is doing processing or not
	 */

	/**
	 * Ajax (XHR) event, fired whenever an Ajax request is completed from a
	 * request to made to the server for new data. This event is called before
	 * DataTables processed the returned data, so it can also be used to pre-
	 * process the data returned from the server, if needed.
	 *
	 * Note that this trigger is called in `fnServerData`, if you override
	 * `fnServerData` and which to use this event, you need to trigger it in you
	 * success function.
	 *  @name DataTable#xhr.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 *  @param {object} json JSON returned from the server
	 *
	 *  @example
	 *     // Use a custom property returned from the server in another DOM element
	 *     $('#table').dataTable().on('xhr.dt', function (e, settings, json) {
	 *       $('#status').html( json.status );
	 *     } );
	 *
	 *  @example
	 *     // Pre-process the data returned from the server
	 *     $('#table').dataTable().on('xhr.dt', function (e, settings, json) {
	 *       for ( var i=0, ien=json.aaData.length ; i<ien ; i++ ) {
	 *         json.aaData[i].sum = json.aaData[i].one + json.aaData[i].two;
	 *       }
	 *       // Note no return - manipulate the data directly in the JSON object.
	 *     } );
	 */

	/**
	 * Destroy event, fired when the DataTable is destroyed by calling fnDestroy
	 * or passing the bDestroy:true parameter in the initialisation object. This
	 * can be used to remove bound events, added DOM nodes, etc.
	 *  @name DataTable#destroy.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 */

	/**
	 * Page length change event, fired when number of records to show on each
	 * page (the length) is changed.
	 *  @name DataTable#length.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 *  @param {integer} len New length
	 */

	/**
	 * Column sizing has changed.
	 *  @name DataTable#column-sizing.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 */

	/**
	 * Column visibility has changed.
	 *  @name DataTable#column-visibility.dt
	 *  @event
	 *  @param {event} e jQuery event object
	 *  @param {object} o DataTables settings object {@link DataTable.models.oSettings}
	 *  @param {int} column Column index
	 *  @param {bool} vis `false` if column now hidden, or `true` if visible
	 */

	return $.fn.dataTable;
}));

//SORTING


(function() {

    /*
     * Natural Sort algorithm for Javascript - Version 0.7 - Released under MIT license
     * Author: Jim Palmer (based on chunking idea from Dave Koelle)
     * Contributors: Mike Grier (mgrier.com), Clint Priest, Kyle Adams, guillermo
     * See: http://js-naturalsort.googlecode.com/svn/trunk/naturalSort.js
     */
    function naturalSort(a, b) {
        var re = /(^-?[0-9]+(\.?[0-9]*)[df]?e?[0-9]?$|^0x[0-9a-f]+$|[0-9]+)/gi,
            sre = /(^[ ]*|[ ]*$)/g,
            dre = /(^([\w ]+,?[\w ]+)?[\w ]+,?[\w ]+\d+:\d+(:\d+)?[\w ]?|^\d{1,4}[\/\-]\d{1,4}[\/\-]\d{1,4}|^\w+, \w+ \d+, \d{4})/,
            hre = /^0x[0-9a-f]+$/i,
            ore = /^0/,
            // convert all to strings and trim()
            x = a.toString().replace(sre, '') || '',
            y = b.toString().replace(sre, '') || '',
            // chunk/tokenize
            xN = x.replace(re, '\0$1\0').replace(/\0$/, '').replace(/^\0/, '').split('\0'),
            yN = y.replace(re, '\0$1\0').replace(/\0$/, '').replace(/^\0/, '').split('\0'),
            // numeric, hex or date detection
            xD = parseInt(x.match(hre)) || (xN.length != 1 && x.match(dre) && Date.parse(x)),
            yD = parseInt(y.match(hre)) || xD && y.match(dre) && Date.parse(y) || null;
        // first try and sort Hex codes or Dates
        if (yD)
            if (xD < yD) return -1;
            else if (xD > yD) return 1;
        // natural sorting through split numeric strings and default strings
        for (var cLoc = 0, numS = Math.max(xN.length, yN.length); cLoc < numS; cLoc++) {
            // find floats not starting with '0', string or 0 if not defined (Clint Priest)
            var oFxNcL = !(xN[cLoc] || '').match(ore) && parseFloat(xN[cLoc]) || xN[cLoc] || 0;
            var oFyNcL = !(yN[cLoc] || '').match(ore) && parseFloat(yN[cLoc]) || yN[cLoc] || 0;
            // handle numeric vs string comparison - number < string - (Kyle Adams)
            if (isNaN(oFxNcL) !== isNaN(oFyNcL)) return (isNaN(oFxNcL)) ? 1 : -1;
            // rely on string comparison if different types - i.e. '02' < 2 != '02' < '2'
            else if (typeof oFxNcL !== typeof oFyNcL) {
                oFxNcL += '';
                oFyNcL += '';
            }
            if (oFxNcL < oFyNcL) return -1;
            if (oFxNcL > oFyNcL) return 1;
        }
        return 0;
    }

    jQuery.extend(jQuery.fn.dataTableExt.oSort, {
        "natural-asc": function(a, b) {
            return naturalSort(a, b);
        },

        "natural-desc": function(a, b) {
            return naturalSort(a, b) * -1;
        }
    });

});
define("datatables-extensions", function(){});

(function () {

    var
        defaultOptions = {
            data: null,
            columns: {},
            columnsCount: null,
            fileExtension: "csv",
            fileName: "",
            fileNamePrefix: "report-export-",
            dataSeparator: ",",
            lineSeparator: "\r\n",
            preRows: [],
            totalRow: []
        },

        exportOptions,

        tableAPI;

    /**
    * Returns name of new file
    * @returns {string}
    */
    function getFileName() {
        return exportOptions.fileNamePrefix +
            new Date().getTime() +
            "." +
            exportOptions.fileExtension;
    }

    /**
    * Saves or open (based on browser settings) generated file
    */
    function saveFile(fileName, content) {
        var aObject = document.createElement("a"),
            fileContent = new Blob([content], {
                type: "text/csv;charset=utf-8;"
            });
        aObject.href = URL.createObjectURL(fileContent);
        aObject.download = fileName;
        aObject.target = "_blank";
        aObject.click();
    }

    /**
    * Prepares cell value for output to csv document
    * @param {number|string} value
    * @returns {string}
    */
    function prepareCellValue(value) {
        return '"' +
            (value + "").replace(/"/g, '""')
                .replace(/(<([^>]+)>)/ig, "") +
            '"';
    }

    var intervalExportData = setInterval(function () {
        if ($.fn.dataTable) {
            $.fn.dataTable.Api.register("exportData()", function (options) {

                var csvLineArray = null,
                    csvContent = "",
                    objectKey,
                    rowObject,
                    rowCounter,

                    i,
                    j,
                    preRow,
                    preRowCell;

                exportOptions = jQuery.extend({}, defaultOptions, options);

                if (exportOptions.preRows.length > 0) {
                    for (i = 0; i < exportOptions.preRows.length; i++) {
                        preRow = exportOptions.preRows[i];
                        csvLineArray = [];
                        for (j = 0; j < preRow.length; j++) {
                            preRowCell = preRow[j];
                            if (preRowCell !== undefined && preRowCell !== null) {
                                csvLineArray.push(prepareCellValue(preRowCell));
                            } else {
                                csvLineArray.push("");
                            }
                        }
                        csvContent += csvLineArray.join(exportOptions.dataSeparator) + exportOptions.lineSeparator;
                    }
                }

                csvLineArray = [];
                for (objectKey in exportOptions.columns) {
                    csvLineArray.push(objectKey);
                }
                csvContent += csvLineArray.join(exportOptions.dataSeparator) + exportOptions.lineSeparator;

                if (exportOptions.data) {
                    for (rowCounter = 0; rowCounter < exportOptions.data.length; rowCounter++) {
                        csvLineArray = [];
                        rowObject = exportOptions.data[rowCounter];
                        for (objectKey in exportOptions.columns) {
                            if (exportOptions.columns.hasOwnProperty(objectKey)) {
                                csvLineArray.push(prepareCellValue(rowObject[exportOptions.columns[objectKey]]));
                            }
                        }
                        csvContent += csvLineArray.join(exportOptions.dataSeparator) + exportOptions.lineSeparator;
                    }
                } else {
                    tableAPI = this;
                    tableAPI.rows()[0].forEach(function (row) {
                        csvLineArray = [];
                        rowObject = tableAPI.row(row).data();
                        if (rowObject instanceof Array) {
                            rowObject.forEach(function (row) {
                                csvLineArray.push(prepareCellValue(row));
                            });
                        } else {
                            for (objectKey in exportOptions.columns) {
                                if (exportOptions.columns.hasOwnProperty(objectKey)) {
                                    csvLineArray.push(prepareCellValue(rowObject[exportOptions.columns[objectKey]]));
                                }
                            }
                        }
                        csvContent += csvLineArray.join(exportOptions.dataSeparator) + exportOptions.lineSeparator;
                    });
                }

                if (exportOptions.totalRow.length > 0) {
                    if (exportOptions.columnsCount && exportOptions.columnsCount > exportOptions.totalRow.length) {
                        csvLineArray = [];
                        for (i = 1; i <= exportOptions.columnsCount - exportOptions.totalRow.length; i++) {
                            csvLineArray.push("");
                        }
                        for (i = 0; i < exportOptions.totalRow.length; i++) {
                            if (exportOptions.totalRow[i] !== undefined && exportOptions.totalRow[i] !== null) {
                                csvLineArray.push(prepareCellValue(exportOptions.totalRow[i]));
                            } else {
                                csvLineArray.push("");
                            }
                        }
                        csvContent += csvLineArray.join(exportOptions.dataSeparator) + exportOptions.lineSeparator;
                    } else {
                        csvContent += totalRow.join(exportOptions.dataSeparator) + exportOptions.lineSeparator;
                    }
                }

                saveFile(exportOptions.fileName || getFileName(), csvContent);
            });
            clearInterval(intervalExportData);
        }
    }, 200);
})();
define("datatables-export-csv", function(){});

(function (global, factory) {
    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :
    typeof define === 'function' && define.amd ? define('moment',factory) :
    global.moment = factory()
}(this, function () { 

    var hookCallback;

    function utils_hooks__hooks () {
        return hookCallback.apply(null, arguments);
    }

    // This is done to register the method called with moment()
    // without creating circular dependencies.
    function setHookCallback (callback) {
        hookCallback = callback;
    }

    function isArray(input) {
        return Object.prototype.toString.call(input) === '[object Array]';
    }

    function isDate(input) {
        return input instanceof Date || Object.prototype.toString.call(input) === '[object Date]';
    }

    function map(arr, fn) {
        var res = [], i;
        for (i = 0; i < arr.length; ++i) {
            res.push(fn(arr[i], i));
        }
        return res;
    }

    function hasOwnProp(a, b) {
        return Object.prototype.hasOwnProperty.call(a, b);
    }

    function extend(a, b) {
        for (var i in b) {
            if (hasOwnProp(b, i)) {
                a[i] = b[i];
            }
        }

        if (hasOwnProp(b, 'toString')) {
            a.toString = b.toString;
        }

        if (hasOwnProp(b, 'valueOf')) {
            a.valueOf = b.valueOf;
        }

        return a;
    }

    function create_utc__createUTC (input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, true).utc();
    }

    function defaultParsingFlags() {
        // We need to deep clone this object.
        return {
            empty           : false,
            unusedTokens    : [],
            unusedInput     : [],
            overflow        : -2,
            charsLeftOver   : 0,
            nullInput       : false,
            invalidMonth    : null,
            invalidFormat   : false,
            userInvalidated : false,
            iso             : false
        };
    }

    function getParsingFlags(m) {
        if (m._pf == null) {
            m._pf = defaultParsingFlags();
        }
        return m._pf;
    }

    function valid__isValid(m) {
        if (m._isValid == null) {
            var flags = getParsingFlags(m);
            m._isValid = !isNaN(m._d.getTime()) &&
                flags.overflow < 0 &&
                !flags.empty &&
                !flags.invalidMonth &&
                !flags.invalidWeekday &&
                !flags.nullInput &&
                !flags.invalidFormat &&
                !flags.userInvalidated;

            if (m._strict) {
                m._isValid = m._isValid &&
                    flags.charsLeftOver === 0 &&
                    flags.unusedTokens.length === 0 &&
                    flags.bigHour === undefined;
            }
        }
        return m._isValid;
    }

    function valid__createInvalid (flags) {
        var m = create_utc__createUTC(NaN);
        if (flags != null) {
            extend(getParsingFlags(m), flags);
        }
        else {
            getParsingFlags(m).userInvalidated = true;
        }

        return m;
    }

    var momentProperties = utils_hooks__hooks.momentProperties = [];

    function copyConfig(to, from) {
        var i, prop, val;

        if (typeof from._isAMomentObject !== 'undefined') {
            to._isAMomentObject = from._isAMomentObject;
        }
        if (typeof from._i !== 'undefined') {
            to._i = from._i;
        }
        if (typeof from._f !== 'undefined') {
            to._f = from._f;
        }
        if (typeof from._l !== 'undefined') {
            to._l = from._l;
        }
        if (typeof from._strict !== 'undefined') {
            to._strict = from._strict;
        }
        if (typeof from._tzm !== 'undefined') {
            to._tzm = from._tzm;
        }
        if (typeof from._isUTC !== 'undefined') {
            to._isUTC = from._isUTC;
        }
        if (typeof from._offset !== 'undefined') {
            to._offset = from._offset;
        }
        if (typeof from._pf !== 'undefined') {
            to._pf = getParsingFlags(from);
        }
        if (typeof from._locale !== 'undefined') {
            to._locale = from._locale;
        }

        if (momentProperties.length > 0) {
            for (i in momentProperties) {
                prop = momentProperties[i];
                val = from[prop];
                if (typeof val !== 'undefined') {
                    to[prop] = val;
                }
            }
        }

        return to;
    }

    var updateInProgress = false;

    // Moment prototype object
    function Moment(config) {
        copyConfig(this, config);
        this._d = new Date(config._d != null ? config._d.getTime() : NaN);
        // Prevent infinite loop in case updateOffset creates new moment
        // objects.
        if (updateInProgress === false) {
            updateInProgress = true;
            utils_hooks__hooks.updateOffset(this);
            updateInProgress = false;
        }
    }

    function isMoment (obj) {
        return obj instanceof Moment || (obj != null && obj._isAMomentObject != null);
    }

    function absFloor (number) {
        if (number < 0) {
            return Math.ceil(number);
        } else {
            return Math.floor(number);
        }
    }

    function toInt(argumentForCoercion) {
        var coercedNumber = +argumentForCoercion,
            value = 0;

        if (coercedNumber !== 0 && isFinite(coercedNumber)) {
            value = absFloor(coercedNumber);
        }

        return value;
    }

    function compareArrays(array1, array2, dontConvert) {
        var len = Math.min(array1.length, array2.length),
            lengthDiff = Math.abs(array1.length - array2.length),
            diffs = 0,
            i;
        for (i = 0; i < len; i++) {
            if ((dontConvert && array1[i] !== array2[i]) ||
                (!dontConvert && toInt(array1[i]) !== toInt(array2[i]))) {
                diffs++;
            }
        }
        return diffs + lengthDiff;
    }

    function Locale() {
    }

    var locales = {};
    var globalLocale;

    function normalizeLocale(key) {
        return key ? key.toLowerCase().replace('_', '-') : key;
    }

    // pick the locale from the array
    // try ['en-au', 'en-gb'] as 'en-au', 'en-gb', 'en', as in move through the list trying each
    // substring from most specific to least, but move to the next array item if it's a more specific variant than the current root
    function chooseLocale(names) {
        var i = 0, j, next, locale, split;

        while (i < names.length) {
            split = normalizeLocale(names[i]).split('-');
            j = split.length;
            next = normalizeLocale(names[i + 1]);
            next = next ? next.split('-') : null;
            while (j > 0) {
                locale = loadLocale(split.slice(0, j).join('-'));
                if (locale) {
                    return locale;
                }
                if (next && next.length >= j && compareArrays(split, next, true) >= j - 1) {
                    //the next array item is better than a shallower substring of this one
                    break;
                }
                j--;
            }
            i++;
        }
        return null;
    }

    function loadLocale(name) {
        var oldLocale = null;
        // TODO: Find a better way to register and load all the locales in Node
        if (!locales[name] && typeof module !== 'undefined' &&
                module && module.exports) {
            try {
                oldLocale = globalLocale._abbr;
                require('./locale/' + name);
                // because defineLocale currently also sets the global locale, we
                // want to undo that for lazy loaded locales
                locale_locales__getSetGlobalLocale(oldLocale);
            } catch (e) { }
        }
        return locales[name];
    }

    // This function will load locale and then set the global locale.  If
    // no arguments are passed in, it will simply return the current global
    // locale key.
    function locale_locales__getSetGlobalLocale (key, values) {
        var data;
        if (key) {
            if (typeof values === 'undefined') {
                data = locale_locales__getLocale(key);
            }
            else {
                data = defineLocale(key, values);
            }

            if (data) {
                // moment.duration._locale = moment._locale = data;
                globalLocale = data;
            }
        }

        return globalLocale._abbr;
    }

    function defineLocale (name, values) {
        if (values !== null) {
            values.abbr = name;
            locales[name] = locales[name] || new Locale();
            locales[name].set(values);

            // backwards compat for now: also set the locale
            locale_locales__getSetGlobalLocale(name);

            return locales[name];
        } else {
            // useful for testing
            delete locales[name];
            return null;
        }
    }

    // returns locale data
    function locale_locales__getLocale (key) {
        var locale;

        if (key && key._locale && key._locale._abbr) {
            key = key._locale._abbr;
        }

        if (!key) {
            return globalLocale;
        }

        if (!isArray(key)) {
            //short-circuit everything else
            locale = loadLocale(key);
            if (locale) {
                return locale;
            }
            key = [key];
        }

        return chooseLocale(key);
    }

    var aliases = {};

    function addUnitAlias (unit, shorthand) {
        var lowerCase = unit.toLowerCase();
        aliases[lowerCase] = aliases[lowerCase + 's'] = aliases[shorthand] = unit;
    }

    function normalizeUnits(units) {
        return typeof units === 'string' ? aliases[units] || aliases[units.toLowerCase()] : undefined;
    }

    function normalizeObjectUnits(inputObject) {
        var normalizedInput = {},
            normalizedProp,
            prop;

        for (prop in inputObject) {
            if (hasOwnProp(inputObject, prop)) {
                normalizedProp = normalizeUnits(prop);
                if (normalizedProp) {
                    normalizedInput[normalizedProp] = inputObject[prop];
                }
            }
        }

        return normalizedInput;
    }

    function makeGetSet (unit, keepTime) {
        return function (value) {
            if (value != null) {
                get_set__set(this, unit, value);
                utils_hooks__hooks.updateOffset(this, keepTime);
                return this;
            } else {
                return get_set__get(this, unit);
            }
        };
    }

    function get_set__get (mom, unit) {
        return mom._d['get' + (mom._isUTC ? 'UTC' : '') + unit]();
    }

    function get_set__set (mom, unit, value) {
        return mom._d['set' + (mom._isUTC ? 'UTC' : '') + unit](value);
    }

    // MOMENTS

    function getSet (units, value) {
        var unit;
        if (typeof units === 'object') {
            for (unit in units) {
                this.set(unit, units[unit]);
            }
        } else {
            units = normalizeUnits(units);
            if (typeof this[units] === 'function') {
                return this[units](value);
            }
        }
        return this;
    }

    function zeroFill(number, targetLength, forceSign) {
        var absNumber = '' + Math.abs(number),
            zerosToFill = targetLength - absNumber.length,
            sign = number >= 0;
        return (sign ? (forceSign ? '+' : '') : '-') +
            Math.pow(10, Math.max(0, zerosToFill)).toString().substr(1) + absNumber;
    }

    var formattingTokens = /(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g;

    var localFormattingTokens = /(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g;

    var formatFunctions = {};

    var formatTokenFunctions = {};

    // token:    'M'
    // padded:   ['MM', 2]
    // ordinal:  'Mo'
    // callback: function () { this.month() + 1 }
    function addFormatToken (token, padded, ordinal, callback) {
        var func = callback;
        if (typeof callback === 'string') {
            func = function () {
                return this[callback]();
            };
        }
        if (token) {
            formatTokenFunctions[token] = func;
        }
        if (padded) {
            formatTokenFunctions[padded[0]] = function () {
                return zeroFill(func.apply(this, arguments), padded[1], padded[2]);
            };
        }
        if (ordinal) {
            formatTokenFunctions[ordinal] = function () {
                return this.localeData().ordinal(func.apply(this, arguments), token);
            };
        }
    }

    function removeFormattingTokens(input) {
        if (input.match(/\[[\s\S]/)) {
            return input.replace(/^\[|\]$/g, '');
        }
        return input.replace(/\\/g, '');
    }

    function makeFormatFunction(format) {
        var array = format.match(formattingTokens), i, length;

        for (i = 0, length = array.length; i < length; i++) {
            if (formatTokenFunctions[array[i]]) {
                array[i] = formatTokenFunctions[array[i]];
            } else {
                array[i] = removeFormattingTokens(array[i]);
            }
        }

        return function (mom) {
            var output = '';
            for (i = 0; i < length; i++) {
                output += array[i] instanceof Function ? array[i].call(mom, format) : array[i];
            }
            return output;
        };
    }

    // format date using native date object
    function formatMoment(m, format) {
        if (!m.isValid()) {
            return m.localeData().invalidDate();
        }

        format = expandFormat(format, m.localeData());
        formatFunctions[format] = formatFunctions[format] || makeFormatFunction(format);

        return formatFunctions[format](m);
    }

    function expandFormat(format, locale) {
        var i = 5;

        function replaceLongDateFormatTokens(input) {
            return locale.longDateFormat(input) || input;
        }

        localFormattingTokens.lastIndex = 0;
        while (i >= 0 && localFormattingTokens.test(format)) {
            format = format.replace(localFormattingTokens, replaceLongDateFormatTokens);
            localFormattingTokens.lastIndex = 0;
            i -= 1;
        }

        return format;
    }

    var match1         = /\d/;            //       0 - 9
    var match2         = /\d\d/;          //      00 - 99
    var match3         = /\d{3}/;         //     000 - 999
    var match4         = /\d{4}/;         //    0000 - 9999
    var match6         = /[+-]?\d{6}/;    // -999999 - 999999
    var match1to2      = /\d\d?/;         //       0 - 99
    var match1to3      = /\d{1,3}/;       //       0 - 999
    var match1to4      = /\d{1,4}/;       //       0 - 9999
    var match1to6      = /[+-]?\d{1,6}/;  // -999999 - 999999

    var matchUnsigned  = /\d+/;           //       0 - inf
    var matchSigned    = /[+-]?\d+/;      //    -inf - inf

    var matchOffset    = /Z|[+-]\d\d:?\d\d/gi; // +00:00 -00:00 +0000 -0000 or Z

    var matchTimestamp = /[+-]?\d+(\.\d{1,3})?/; // 123456789 123456789.123

    // any word (or two) characters or numbers including two/three word month in arabic.
    var matchWord = /[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i;

    var regexes = {};

    function isFunction (sth) {
        // https://github.com/moment/moment/issues/2325
        return typeof sth === 'function' &&
            Object.prototype.toString.call(sth) === '[object Function]';
    }


    function addRegexToken (token, regex, strictRegex) {
        regexes[token] = isFunction(regex) ? regex : function (isStrict) {
            return (isStrict && strictRegex) ? strictRegex : regex;
        };
    }

    function getParseRegexForToken (token, config) {
        if (!hasOwnProp(regexes, token)) {
            return new RegExp(unescapeFormat(token));
        }

        return regexes[token](config._strict, config._locale);
    }

    // Code from http://stackoverflow.com/questions/3561493/is-there-a-regexp-escape-function-in-javascript
    function unescapeFormat(s) {
        return s.replace('\\', '').replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g, function (matched, p1, p2, p3, p4) {
            return p1 || p2 || p3 || p4;
        }).replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
    }

    var tokens = {};

    function addParseToken (token, callback) {
        var i, func = callback;
        if (typeof token === 'string') {
            token = [token];
        }
        if (typeof callback === 'number') {
            func = function (input, array) {
                array[callback] = toInt(input);
            };
        }
        for (i = 0; i < token.length; i++) {
            tokens[token[i]] = func;
        }
    }

    function addWeekParseToken (token, callback) {
        addParseToken(token, function (input, array, config, token) {
            config._w = config._w || {};
            callback(input, config._w, config, token);
        });
    }

    function addTimeToArrayFromToken(token, input, config) {
        if (input != null && hasOwnProp(tokens, token)) {
            tokens[token](input, config._a, config, token);
        }
    }

    var YEAR = 0;
    var MONTH = 1;
    var DATE = 2;
    var HOUR = 3;
    var MINUTE = 4;
    var SECOND = 5;
    var MILLISECOND = 6;

    function daysInMonth(year, month) {
        return new Date(Date.UTC(year, month + 1, 0)).getUTCDate();
    }

    // FORMATTING

    addFormatToken('M', ['MM', 2], 'Mo', function () {
        return this.month() + 1;
    });

    addFormatToken('MMM', 0, 0, function (format) {
        return this.localeData().monthsShort(this, format);
    });

    addFormatToken('MMMM', 0, 0, function (format) {
        return this.localeData().months(this, format);
    });

    // ALIASES

    addUnitAlias('month', 'M');

    // PARSING

    addRegexToken('M',    match1to2);
    addRegexToken('MM',   match1to2, match2);
    addRegexToken('MMM',  matchWord);
    addRegexToken('MMMM', matchWord);

    addParseToken(['M', 'MM'], function (input, array) {
        array[MONTH] = toInt(input) - 1;
    });

    addParseToken(['MMM', 'MMMM'], function (input, array, config, token) {
        var month = config._locale.monthsParse(input, token, config._strict);
        // if we didn't find a month name, mark the date as invalid.
        if (month != null) {
            array[MONTH] = month;
        } else {
            getParsingFlags(config).invalidMonth = input;
        }
    });

    // LOCALES

    var defaultLocaleMonths = 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_');
    function localeMonths (m) {
        return this._months[m.month()];
    }

    var defaultLocaleMonthsShort = 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_');
    function localeMonthsShort (m) {
        return this._monthsShort[m.month()];
    }

    function localeMonthsParse (monthName, format, strict) {
        var i, mom, regex;

        if (!this._monthsParse) {
            this._monthsParse = [];
            this._longMonthsParse = [];
            this._shortMonthsParse = [];
        }

        for (i = 0; i < 12; i++) {
            // make the regex if we don't have it already
            mom = create_utc__createUTC([2000, i]);
            if (strict && !this._longMonthsParse[i]) {
                this._longMonthsParse[i] = new RegExp('^' + this.months(mom, '').replace('.', '') + '$', 'i');
                this._shortMonthsParse[i] = new RegExp('^' + this.monthsShort(mom, '').replace('.', '') + '$', 'i');
            }
            if (!strict && !this._monthsParse[i]) {
                regex = '^' + this.months(mom, '') + '|^' + this.monthsShort(mom, '');
                this._monthsParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (strict && format === 'MMMM' && this._longMonthsParse[i].test(monthName)) {
                return i;
            } else if (strict && format === 'MMM' && this._shortMonthsParse[i].test(monthName)) {
                return i;
            } else if (!strict && this._monthsParse[i].test(monthName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function setMonth (mom, value) {
        var dayOfMonth;

        // TODO: Move this out of here!
        if (typeof value === 'string') {
            value = mom.localeData().monthsParse(value);
            // TODO: Another silent failure?
            if (typeof value !== 'number') {
                return mom;
            }
        }

        dayOfMonth = Math.min(mom.date(), daysInMonth(mom.year(), value));
        mom._d['set' + (mom._isUTC ? 'UTC' : '') + 'Month'](value, dayOfMonth);
        return mom;
    }

    function getSetMonth (value) {
        if (value != null) {
            setMonth(this, value);
            utils_hooks__hooks.updateOffset(this, true);
            return this;
        } else {
            return get_set__get(this, 'Month');
        }
    }

    function getDaysInMonth () {
        return daysInMonth(this.year(), this.month());
    }

    function checkOverflow (m) {
        var overflow;
        var a = m._a;

        if (a && getParsingFlags(m).overflow === -2) {
            overflow =
                a[MONTH]       < 0 || a[MONTH]       > 11  ? MONTH :
                a[DATE]        < 1 || a[DATE]        > daysInMonth(a[YEAR], a[MONTH]) ? DATE :
                a[HOUR]        < 0 || a[HOUR]        > 24 || (a[HOUR] === 24 && (a[MINUTE] !== 0 || a[SECOND] !== 0 || a[MILLISECOND] !== 0)) ? HOUR :
                a[MINUTE]      < 0 || a[MINUTE]      > 59  ? MINUTE :
                a[SECOND]      < 0 || a[SECOND]      > 59  ? SECOND :
                a[MILLISECOND] < 0 || a[MILLISECOND] > 999 ? MILLISECOND :
                -1;

            if (getParsingFlags(m)._overflowDayOfYear && (overflow < YEAR || overflow > DATE)) {
                overflow = DATE;
            }

            getParsingFlags(m).overflow = overflow;
        }

        return m;
    }

    function warn(msg) {
        if (utils_hooks__hooks.suppressDeprecationWarnings === false && typeof console !== 'undefined' && console.warn) {
            console.warn('Deprecation warning: ' + msg);
        }
    }

    function deprecate(msg, fn) {
        var firstTime = true;

        return extend(function () {
            if (firstTime) {
                warn(msg + '\n' + (new Error()).stack);
                firstTime = false;
            }
            return fn.apply(this, arguments);
        }, fn);
    }

    var deprecations = {};

    function deprecateSimple(name, msg) {
        if (!deprecations[name]) {
            warn(msg);
            deprecations[name] = true;
        }
    }

    utils_hooks__hooks.suppressDeprecationWarnings = false;

    var from_string__isoRegex = /^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/;

    var isoDates = [
        ['YYYYYY-MM-DD', /[+-]\d{6}-\d{2}-\d{2}/],
        ['YYYY-MM-DD', /\d{4}-\d{2}-\d{2}/],
        ['GGGG-[W]WW-E', /\d{4}-W\d{2}-\d/],
        ['GGGG-[W]WW', /\d{4}-W\d{2}/],
        ['YYYY-DDD', /\d{4}-\d{3}/]
    ];

    // iso time formats and regexes
    var isoTimes = [
        ['HH:mm:ss.SSSS', /(T| )\d\d:\d\d:\d\d\.\d+/],
        ['HH:mm:ss', /(T| )\d\d:\d\d:\d\d/],
        ['HH:mm', /(T| )\d\d:\d\d/],
        ['HH', /(T| )\d\d/]
    ];

    var aspNetJsonRegex = /^\/?Date\((\-?\d+)/i;

    // date from iso format
    function configFromISO(config) {
        var i, l,
            string = config._i,
            match = from_string__isoRegex.exec(string);

        if (match) {
            getParsingFlags(config).iso = true;
            for (i = 0, l = isoDates.length; i < l; i++) {
                if (isoDates[i][1].exec(string)) {
                    config._f = isoDates[i][0];
                    break;
                }
            }
            for (i = 0, l = isoTimes.length; i < l; i++) {
                if (isoTimes[i][1].exec(string)) {
                    // match[6] should be 'T' or space
                    config._f += (match[6] || ' ') + isoTimes[i][0];
                    break;
                }
            }
            if (string.match(matchOffset)) {
                config._f += 'Z';
            }
            configFromStringAndFormat(config);
        } else {
            config._isValid = false;
        }
    }

    // date from iso format or fallback
    function configFromString(config) {
        var matched = aspNetJsonRegex.exec(config._i);

        if (matched !== null) {
            config._d = new Date(+matched[1]);
            return;
        }

        configFromISO(config);
        if (config._isValid === false) {
            delete config._isValid;
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }

    utils_hooks__hooks.createFromInputFallback = deprecate(
        'moment construction falls back to js Date. This is ' +
        'discouraged and will be removed in upcoming major ' +
        'release. Please refer to ' +
        'https://github.com/moment/moment/issues/1407 for more info.',
        function (config) {
            config._d = new Date(config._i + (config._useUTC ? ' UTC' : ''));
        }
    );

    function createDate (y, m, d, h, M, s, ms) {
        //can't just apply() to create a date:
        //http://stackoverflow.com/questions/181348/instantiating-a-javascript-object-by-calling-prototype-constructor-apply
        var date = new Date(y, m, d, h, M, s, ms);

        //the date constructor doesn't accept years < 1970
        if (y < 1970) {
            date.setFullYear(y);
        }
        return date;
    }

    function createUTCDate (y) {
        var date = new Date(Date.UTC.apply(null, arguments));
        if (y < 1970) {
            date.setUTCFullYear(y);
        }
        return date;
    }

    addFormatToken(0, ['YY', 2], 0, function () {
        return this.year() % 100;
    });

    addFormatToken(0, ['YYYY',   4],       0, 'year');
    addFormatToken(0, ['YYYYY',  5],       0, 'year');
    addFormatToken(0, ['YYYYYY', 6, true], 0, 'year');

    // ALIASES

    addUnitAlias('year', 'y');

    // PARSING

    addRegexToken('Y',      matchSigned);
    addRegexToken('YY',     match1to2, match2);
    addRegexToken('YYYY',   match1to4, match4);
    addRegexToken('YYYYY',  match1to6, match6);
    addRegexToken('YYYYYY', match1to6, match6);

    addParseToken(['YYYYY', 'YYYYYY'], YEAR);
    addParseToken('YYYY', function (input, array) {
        array[YEAR] = input.length === 2 ? utils_hooks__hooks.parseTwoDigitYear(input) : toInt(input);
    });
    addParseToken('YY', function (input, array) {
        array[YEAR] = utils_hooks__hooks.parseTwoDigitYear(input);
    });

    // HELPERS

    function daysInYear(year) {
        return isLeapYear(year) ? 366 : 365;
    }

    function isLeapYear(year) {
        return (year % 4 === 0 && year % 100 !== 0) || year % 400 === 0;
    }

    // HOOKS

    utils_hooks__hooks.parseTwoDigitYear = function (input) {
        return toInt(input) + (toInt(input) > 68 ? 1900 : 2000);
    };

    // MOMENTS

    var getSetYear = makeGetSet('FullYear', false);

    function getIsLeapYear () {
        return isLeapYear(this.year());
    }

    addFormatToken('w', ['ww', 2], 'wo', 'week');
    addFormatToken('W', ['WW', 2], 'Wo', 'isoWeek');

    // ALIASES

    addUnitAlias('week', 'w');
    addUnitAlias('isoWeek', 'W');

    // PARSING

    addRegexToken('w',  match1to2);
    addRegexToken('ww', match1to2, match2);
    addRegexToken('W',  match1to2);
    addRegexToken('WW', match1to2, match2);

    addWeekParseToken(['w', 'ww', 'W', 'WW'], function (input, week, config, token) {
        week[token.substr(0, 1)] = toInt(input);
    });

    // HELPERS

    // firstDayOfWeek       0 = sun, 6 = sat
    //                      the day of the week that starts the week
    //                      (usually sunday or monday)
    // firstDayOfWeekOfYear 0 = sun, 6 = sat
    //                      the first week is the week that contains the first
    //                      of this day of the week
    //                      (eg. ISO weeks use thursday (4))
    function weekOfYear(mom, firstDayOfWeek, firstDayOfWeekOfYear) {
        var end = firstDayOfWeekOfYear - firstDayOfWeek,
            daysToDayOfWeek = firstDayOfWeekOfYear - mom.day(),
            adjustedMoment;


        if (daysToDayOfWeek > end) {
            daysToDayOfWeek -= 7;
        }

        if (daysToDayOfWeek < end - 7) {
            daysToDayOfWeek += 7;
        }

        adjustedMoment = local__createLocal(mom).add(daysToDayOfWeek, 'd');
        return {
            week: Math.ceil(adjustedMoment.dayOfYear() / 7),
            year: adjustedMoment.year()
        };
    }

    // LOCALES

    function localeWeek (mom) {
        return weekOfYear(mom, this._week.dow, this._week.doy).week;
    }

    var defaultLocaleWeek = {
        dow : 0, // Sunday is the first day of the week.
        doy : 6  // The week that contains Jan 1st is the first week of the year.
    };

    function localeFirstDayOfWeek () {
        return this._week.dow;
    }

    function localeFirstDayOfYear () {
        return this._week.doy;
    }

    // MOMENTS

    function getSetWeek (input) {
        var week = this.localeData().week(this);
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    function getSetISOWeek (input) {
        var week = weekOfYear(this, 1, 4).week;
        return input == null ? week : this.add((input - week) * 7, 'd');
    }

    addFormatToken('DDD', ['DDDD', 3], 'DDDo', 'dayOfYear');

    // ALIASES

    addUnitAlias('dayOfYear', 'DDD');

    // PARSING

    addRegexToken('DDD',  match1to3);
    addRegexToken('DDDD', match3);
    addParseToken(['DDD', 'DDDD'], function (input, array, config) {
        config._dayOfYear = toInt(input);
    });

    // HELPERS

    //http://en.wikipedia.org/wiki/ISO_week_date#Calculating_a_date_given_the_year.2C_week_number_and_weekday
    function dayOfYearFromWeeks(year, week, weekday, firstDayOfWeekOfYear, firstDayOfWeek) {
        var week1Jan = 6 + firstDayOfWeek - firstDayOfWeekOfYear, janX = createUTCDate(year, 0, 1 + week1Jan), d = janX.getUTCDay(), dayOfYear;
        if (d < firstDayOfWeek) {
            d += 7;
        }

        weekday = weekday != null ? 1 * weekday : firstDayOfWeek;

        dayOfYear = 1 + week1Jan + 7 * (week - 1) - d + weekday;

        return {
            year: dayOfYear > 0 ? year : year - 1,
            dayOfYear: dayOfYear > 0 ?  dayOfYear : daysInYear(year - 1) + dayOfYear
        };
    }

    // MOMENTS

    function getSetDayOfYear (input) {
        var dayOfYear = Math.round((this.clone().startOf('day') - this.clone().startOf('year')) / 864e5) + 1;
        return input == null ? dayOfYear : this.add((input - dayOfYear), 'd');
    }

    // Pick the first defined of two or three arguments.
    function defaults(a, b, c) {
        if (a != null) {
            return a;
        }
        if (b != null) {
            return b;
        }
        return c;
    }

    function currentDateArray(config) {
        var now = new Date();
        if (config._useUTC) {
            return [now.getUTCFullYear(), now.getUTCMonth(), now.getUTCDate()];
        }
        return [now.getFullYear(), now.getMonth(), now.getDate()];
    }

    // convert an array to a date.
    // the array should mirror the parameters below
    // note: all values past the year are optional and will default to the lowest possible value.
    // [year, month, day , hour, minute, second, millisecond]
    function configFromArray (config) {
        var i, date, input = [], currentDate, yearToUse;

        if (config._d) {
            return;
        }

        currentDate = currentDateArray(config);

        //compute day of the year from weeks and weekdays
        if (config._w && config._a[DATE] == null && config._a[MONTH] == null) {
            dayOfYearFromWeekInfo(config);
        }

        //if the day of the year is set, figure out what it is
        if (config._dayOfYear) {
            yearToUse = defaults(config._a[YEAR], currentDate[YEAR]);

            if (config._dayOfYear > daysInYear(yearToUse)) {
                getParsingFlags(config)._overflowDayOfYear = true;
            }

            date = createUTCDate(yearToUse, 0, config._dayOfYear);
            config._a[MONTH] = date.getUTCMonth();
            config._a[DATE] = date.getUTCDate();
        }

        // Default to current date.
        // * if no year, month, day of month are given, default to today
        // * if day of month is given, default month and year
        // * if month is given, default only year
        // * if year is given, don't default anything
        for (i = 0; i < 3 && config._a[i] == null; ++i) {
            config._a[i] = input[i] = currentDate[i];
        }

        // Zero out whatever was not defaulted, including time
        for (; i < 7; i++) {
            config._a[i] = input[i] = (config._a[i] == null) ? (i === 2 ? 1 : 0) : config._a[i];
        }

        // Check for 24:00:00.000
        if (config._a[HOUR] === 24 &&
                config._a[MINUTE] === 0 &&
                config._a[SECOND] === 0 &&
                config._a[MILLISECOND] === 0) {
            config._nextDay = true;
            config._a[HOUR] = 0;
        }

        config._d = (config._useUTC ? createUTCDate : createDate).apply(null, input);
        // Apply timezone offset from input. The actual utcOffset can be changed
        // with parseZone.
        if (config._tzm != null) {
            config._d.setUTCMinutes(config._d.getUTCMinutes() - config._tzm);
        }

        if (config._nextDay) {
            config._a[HOUR] = 24;
        }
    }

    function dayOfYearFromWeekInfo(config) {
        var w, weekYear, week, weekday, dow, doy, temp;

        w = config._w;
        if (w.GG != null || w.W != null || w.E != null) {
            dow = 1;
            doy = 4;

            // TODO: We need to take the current isoWeekYear, but that depends on
            // how we interpret now (local, utc, fixed offset). So create
            // a now version of current config (take local/utc/offset flags, and
            // create now).
            weekYear = defaults(w.GG, config._a[YEAR], weekOfYear(local__createLocal(), 1, 4).year);
            week = defaults(w.W, 1);
            weekday = defaults(w.E, 1);
        } else {
            dow = config._locale._week.dow;
            doy = config._locale._week.doy;

            weekYear = defaults(w.gg, config._a[YEAR], weekOfYear(local__createLocal(), dow, doy).year);
            week = defaults(w.w, 1);

            if (w.d != null) {
                // weekday -- low day numbers are considered next week
                weekday = w.d;
                if (weekday < dow) {
                    ++week;
                }
            } else if (w.e != null) {
                // local weekday -- counting starts from begining of week
                weekday = w.e + dow;
            } else {
                // default to begining of week
                weekday = dow;
            }
        }
        temp = dayOfYearFromWeeks(weekYear, week, weekday, doy, dow);

        config._a[YEAR] = temp.year;
        config._dayOfYear = temp.dayOfYear;
    }

    utils_hooks__hooks.ISO_8601 = function () {};

    // date from string and format string
    function configFromStringAndFormat(config) {
        // TODO: Move this to another part of the creation flow to prevent circular deps
        if (config._f === utils_hooks__hooks.ISO_8601) {
            configFromISO(config);
            return;
        }

        config._a = [];
        getParsingFlags(config).empty = true;

        // This array is used to make a Date, either with `new Date` or `Date.UTC`
        var string = '' + config._i,
            i, parsedInput, tokens, token, skipped,
            stringLength = string.length,
            totalParsedInputLength = 0;

        tokens = expandFormat(config._f, config._locale).match(formattingTokens) || [];

        for (i = 0; i < tokens.length; i++) {
            token = tokens[i];
            parsedInput = (string.match(getParseRegexForToken(token, config)) || [])[0];
            if (parsedInput) {
                skipped = string.substr(0, string.indexOf(parsedInput));
                if (skipped.length > 0) {
                    getParsingFlags(config).unusedInput.push(skipped);
                }
                string = string.slice(string.indexOf(parsedInput) + parsedInput.length);
                totalParsedInputLength += parsedInput.length;
            }
            // don't parse if it's not a known token
            if (formatTokenFunctions[token]) {
                if (parsedInput) {
                    getParsingFlags(config).empty = false;
                }
                else {
                    getParsingFlags(config).unusedTokens.push(token);
                }
                addTimeToArrayFromToken(token, parsedInput, config);
            }
            else if (config._strict && !parsedInput) {
                getParsingFlags(config).unusedTokens.push(token);
            }
        }

        // add remaining unparsed input length to the string
        getParsingFlags(config).charsLeftOver = stringLength - totalParsedInputLength;
        if (string.length > 0) {
            getParsingFlags(config).unusedInput.push(string);
        }

        // clear _12h flag if hour is <= 12
        if (getParsingFlags(config).bigHour === true &&
                config._a[HOUR] <= 12 &&
                config._a[HOUR] > 0) {
            getParsingFlags(config).bigHour = undefined;
        }
        // handle meridiem
        config._a[HOUR] = meridiemFixWrap(config._locale, config._a[HOUR], config._meridiem);

        configFromArray(config);
        checkOverflow(config);
    }


    function meridiemFixWrap (locale, hour, meridiem) {
        var isPm;

        if (meridiem == null) {
            // nothing to do
            return hour;
        }
        if (locale.meridiemHour != null) {
            return locale.meridiemHour(hour, meridiem);
        } else if (locale.isPM != null) {
            // Fallback
            isPm = locale.isPM(meridiem);
            if (isPm && hour < 12) {
                hour += 12;
            }
            if (!isPm && hour === 12) {
                hour = 0;
            }
            return hour;
        } else {
            // this is not supposed to happen
            return hour;
        }
    }

    function configFromStringAndArray(config) {
        var tempConfig,
            bestMoment,

            scoreToBeat,
            i,
            currentScore;

        if (config._f.length === 0) {
            getParsingFlags(config).invalidFormat = true;
            config._d = new Date(NaN);
            return;
        }

        for (i = 0; i < config._f.length; i++) {
            currentScore = 0;
            tempConfig = copyConfig({}, config);
            if (config._useUTC != null) {
                tempConfig._useUTC = config._useUTC;
            }
            tempConfig._f = config._f[i];
            configFromStringAndFormat(tempConfig);

            if (!valid__isValid(tempConfig)) {
                continue;
            }

            // if there is any input that was not parsed add a penalty for that format
            currentScore += getParsingFlags(tempConfig).charsLeftOver;

            //or tokens
            currentScore += getParsingFlags(tempConfig).unusedTokens.length * 10;

            getParsingFlags(tempConfig).score = currentScore;

            if (scoreToBeat == null || currentScore < scoreToBeat) {
                scoreToBeat = currentScore;
                bestMoment = tempConfig;
            }
        }

        extend(config, bestMoment || tempConfig);
    }

    function configFromObject(config) {
        if (config._d) {
            return;
        }

        var i = normalizeObjectUnits(config._i);
        config._a = [i.year, i.month, i.day || i.date, i.hour, i.minute, i.second, i.millisecond];

        configFromArray(config);
    }

    function createFromConfig (config) {
        var res = new Moment(checkOverflow(prepareConfig(config)));
        if (res._nextDay) {
            // Adding is smart enough around DST
            res.add(1, 'd');
            res._nextDay = undefined;
        }

        return res;
    }

    function prepareConfig (config) {
        var input = config._i,
            format = config._f;

        config._locale = config._locale || locale_locales__getLocale(config._l);

        if (input === null || (format === undefined && input === '')) {
            return valid__createInvalid({nullInput: true});
        }

        if (typeof input === 'string') {
            config._i = input = config._locale.preparse(input);
        }

        if (isMoment(input)) {
            return new Moment(checkOverflow(input));
        } else if (isArray(format)) {
            configFromStringAndArray(config);
        } else if (format) {
            configFromStringAndFormat(config);
        } else if (isDate(input)) {
            config._d = input;
        } else {
            configFromInput(config);
        }

        return config;
    }

    function configFromInput(config) {
        var input = config._i;
        if (input === undefined) {
            config._d = new Date();
        } else if (isDate(input)) {
            config._d = new Date(+input);
        } else if (typeof input === 'string') {
            configFromString(config);
        } else if (isArray(input)) {
            config._a = map(input.slice(0), function (obj) {
                return parseInt(obj, 10);
            });
            configFromArray(config);
        } else if (typeof(input) === 'object') {
            configFromObject(config);
        } else if (typeof(input) === 'number') {
            // from milliseconds
            config._d = new Date(input);
        } else {
            utils_hooks__hooks.createFromInputFallback(config);
        }
    }

    function createLocalOrUTC (input, format, locale, strict, isUTC) {
        var c = {};

        if (typeof(locale) === 'boolean') {
            strict = locale;
            locale = undefined;
        }
        // object construction must be done this way.
        // https://github.com/moment/moment/issues/1423
        c._isAMomentObject = true;
        c._useUTC = c._isUTC = isUTC;
        c._l = locale;
        c._i = input;
        c._f = format;
        c._strict = strict;

        return createFromConfig(c);
    }

    function local__createLocal (input, format, locale, strict) {
        return createLocalOrUTC(input, format, locale, strict, false);
    }

    var prototypeMin = deprecate(
         'moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548',
         function () {
             var other = local__createLocal.apply(null, arguments);
             return other < this ? this : other;
         }
     );

    var prototypeMax = deprecate(
        'moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548',
        function () {
            var other = local__createLocal.apply(null, arguments);
            return other > this ? this : other;
        }
    );

    // Pick a moment m from moments so that m[fn](other) is true for all
    // other. This relies on the function fn to be transitive.
    //
    // moments should either be an array of moment objects or an array, whose
    // first element is an array of moment objects.
    function pickBy(fn, moments) {
        var res, i;
        if (moments.length === 1 && isArray(moments[0])) {
            moments = moments[0];
        }
        if (!moments.length) {
            return local__createLocal();
        }
        res = moments[0];
        for (i = 1; i < moments.length; ++i) {
            if (!moments[i].isValid() || moments[i][fn](res)) {
                res = moments[i];
            }
        }
        return res;
    }

    // TODO: Use [].sort instead?
    function min () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isBefore', args);
    }

    function max () {
        var args = [].slice.call(arguments, 0);

        return pickBy('isAfter', args);
    }

    function Duration (duration) {
        var normalizedInput = normalizeObjectUnits(duration),
            years = normalizedInput.year || 0,
            quarters = normalizedInput.quarter || 0,
            months = normalizedInput.month || 0,
            weeks = normalizedInput.week || 0,
            days = normalizedInput.day || 0,
            hours = normalizedInput.hour || 0,
            minutes = normalizedInput.minute || 0,
            seconds = normalizedInput.second || 0,
            milliseconds = normalizedInput.millisecond || 0;

        // representation for dateAddRemove
        this._milliseconds = +milliseconds +
            seconds * 1e3 + // 1000
            minutes * 6e4 + // 1000 * 60
            hours * 36e5; // 1000 * 60 * 60
        // Because of dateAddRemove treats 24 hours as different from a
        // day when working around DST, we need to store them separately
        this._days = +days +
            weeks * 7;
        // It is impossible translate months into days without knowing
        // which months you are are talking about, so we have to store
        // it separately.
        this._months = +months +
            quarters * 3 +
            years * 12;

        this._data = {};

        this._locale = locale_locales__getLocale();

        this._bubble();
    }

    function isDuration (obj) {
        return obj instanceof Duration;
    }

    function offset (token, separator) {
        addFormatToken(token, 0, 0, function () {
            var offset = this.utcOffset();
            var sign = '+';
            if (offset < 0) {
                offset = -offset;
                sign = '-';
            }
            return sign + zeroFill(~~(offset / 60), 2) + separator + zeroFill(~~(offset) % 60, 2);
        });
    }

    offset('Z', ':');
    offset('ZZ', '');

    // PARSING

    addRegexToken('Z',  matchOffset);
    addRegexToken('ZZ', matchOffset);
    addParseToken(['Z', 'ZZ'], function (input, array, config) {
        config._useUTC = true;
        config._tzm = offsetFromString(input);
    });

    // HELPERS

    // timezone chunker
    // '+10:00' > ['10',  '00']
    // '-1530'  > ['-15', '30']
    var chunkOffset = /([\+\-]|\d\d)/gi;

    function offsetFromString(string) {
        var matches = ((string || '').match(matchOffset) || []);
        var chunk   = matches[matches.length - 1] || [];
        var parts   = (chunk + '').match(chunkOffset) || ['-', 0, 0];
        var minutes = +(parts[1] * 60) + toInt(parts[2]);

        return parts[0] === '+' ? minutes : -minutes;
    }

    // Return a moment from input, that is local/utc/zone equivalent to model.
    function cloneWithOffset(input, model) {
        var res, diff;
        if (model._isUTC) {
            res = model.clone();
            diff = (isMoment(input) || isDate(input) ? +input : +local__createLocal(input)) - (+res);
            // Use low-level api, because this fn is low-level api.
            res._d.setTime(+res._d + diff);
            utils_hooks__hooks.updateOffset(res, false);
            return res;
        } else {
            return local__createLocal(input).local();
        }
    }

    function getDateOffset (m) {
        // On Firefox.24 Date#getTimezoneOffset returns a floating point.
        // https://github.com/moment/moment/pull/1871
        return -Math.round(m._d.getTimezoneOffset() / 15) * 15;
    }

    // HOOKS

    // This function will be called whenever a moment is mutated.
    // It is intended to keep the offset in sync with the timezone.
    utils_hooks__hooks.updateOffset = function () {};

    // MOMENTS

    // keepLocalTime = true means only change the timezone, without
    // affecting the local hour. So 5:31:26 +0300 --[utcOffset(2, true)]-->
    // 5:31:26 +0200 It is possible that 5:31:26 doesn't exist with offset
    // +0200, so we adjust the time as needed, to be valid.
    //
    // Keeping the time actually adds/subtracts (one hour)
    // from the actual represented time. That is why we call updateOffset
    // a second time. In case it wants us to change the offset again
    // _changeInProgress == true case, then we have to adjust, because
    // there is no such time in the given timezone.
    function getSetOffset (input, keepLocalTime) {
        var offset = this._offset || 0,
            localAdjust;
        if (input != null) {
            if (typeof input === 'string') {
                input = offsetFromString(input);
            }
            if (Math.abs(input) < 16) {
                input = input * 60;
            }
            if (!this._isUTC && keepLocalTime) {
                localAdjust = getDateOffset(this);
            }
            this._offset = input;
            this._isUTC = true;
            if (localAdjust != null) {
                this.add(localAdjust, 'm');
            }
            if (offset !== input) {
                if (!keepLocalTime || this._changeInProgress) {
                    add_subtract__addSubtract(this, create__createDuration(input - offset, 'm'), 1, false);
                } else if (!this._changeInProgress) {
                    this._changeInProgress = true;
                    utils_hooks__hooks.updateOffset(this, true);
                    this._changeInProgress = null;
                }
            }
            return this;
        } else {
            return this._isUTC ? offset : getDateOffset(this);
        }
    }

    function getSetZone (input, keepLocalTime) {
        if (input != null) {
            if (typeof input !== 'string') {
                input = -input;
            }

            this.utcOffset(input, keepLocalTime);

            return this;
        } else {
            return -this.utcOffset();
        }
    }

    function setOffsetToUTC (keepLocalTime) {
        return this.utcOffset(0, keepLocalTime);
    }

    function setOffsetToLocal (keepLocalTime) {
        if (this._isUTC) {
            this.utcOffset(0, keepLocalTime);
            this._isUTC = false;

            if (keepLocalTime) {
                this.subtract(getDateOffset(this), 'm');
            }
        }
        return this;
    }

    function setOffsetToParsedOffset () {
        if (this._tzm) {
            this.utcOffset(this._tzm);
        } else if (typeof this._i === 'string') {
            this.utcOffset(offsetFromString(this._i));
        }
        return this;
    }

    function hasAlignedHourOffset (input) {
        input = input ? local__createLocal(input).utcOffset() : 0;

        return (this.utcOffset() - input) % 60 === 0;
    }

    function isDaylightSavingTime () {
        return (
            this.utcOffset() > this.clone().month(0).utcOffset() ||
            this.utcOffset() > this.clone().month(5).utcOffset()
        );
    }

    function isDaylightSavingTimeShifted () {
        if (typeof this._isDSTShifted !== 'undefined') {
            return this._isDSTShifted;
        }

        var c = {};

        copyConfig(c, this);
        c = prepareConfig(c);

        if (c._a) {
            var other = c._isUTC ? create_utc__createUTC(c._a) : local__createLocal(c._a);
            this._isDSTShifted = this.isValid() &&
                compareArrays(c._a, other.toArray()) > 0;
        } else {
            this._isDSTShifted = false;
        }

        return this._isDSTShifted;
    }

    function isLocal () {
        return !this._isUTC;
    }

    function isUtcOffset () {
        return this._isUTC;
    }

    function isUtc () {
        return this._isUTC && this._offset === 0;
    }

    var aspNetRegex = /(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/;

    // from http://docs.closure-library.googlecode.com/git/closure_goog_date_date.js.source.html
    // somewhat more in line with 4.4.3.2 2004 spec, but allows decimal anywhere
    var create__isoRegex = /^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/;

    function create__createDuration (input, key) {
        var duration = input,
            // matching against regexp is expensive, do it on demand
            match = null,
            sign,
            ret,
            diffRes;

        if (isDuration(input)) {
            duration = {
                ms : input._milliseconds,
                d  : input._days,
                M  : input._months
            };
        } else if (typeof input === 'number') {
            duration = {};
            if (key) {
                duration[key] = input;
            } else {
                duration.milliseconds = input;
            }
        } else if (!!(match = aspNetRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y  : 0,
                d  : toInt(match[DATE])        * sign,
                h  : toInt(match[HOUR])        * sign,
                m  : toInt(match[MINUTE])      * sign,
                s  : toInt(match[SECOND])      * sign,
                ms : toInt(match[MILLISECOND]) * sign
            };
        } else if (!!(match = create__isoRegex.exec(input))) {
            sign = (match[1] === '-') ? -1 : 1;
            duration = {
                y : parseIso(match[2], sign),
                M : parseIso(match[3], sign),
                d : parseIso(match[4], sign),
                h : parseIso(match[5], sign),
                m : parseIso(match[6], sign),
                s : parseIso(match[7], sign),
                w : parseIso(match[8], sign)
            };
        } else if (duration == null) {// checks for null or undefined
            duration = {};
        } else if (typeof duration === 'object' && ('from' in duration || 'to' in duration)) {
            diffRes = momentsDifference(local__createLocal(duration.from), local__createLocal(duration.to));

            duration = {};
            duration.ms = diffRes.milliseconds;
            duration.M = diffRes.months;
        }

        ret = new Duration(duration);

        if (isDuration(input) && hasOwnProp(input, '_locale')) {
            ret._locale = input._locale;
        }

        return ret;
    }

    create__createDuration.fn = Duration.prototype;

    function parseIso (inp, sign) {
        // We'd normally use ~~inp for this, but unfortunately it also
        // converts floats to ints.
        // inp may be undefined, so careful calling replace on it.
        var res = inp && parseFloat(inp.replace(',', '.'));
        // apply sign while we're at it
        return (isNaN(res) ? 0 : res) * sign;
    }

    function positiveMomentsDifference(base, other) {
        var res = {milliseconds: 0, months: 0};

        res.months = other.month() - base.month() +
            (other.year() - base.year()) * 12;
        if (base.clone().add(res.months, 'M').isAfter(other)) {
            --res.months;
        }

        res.milliseconds = +other - +(base.clone().add(res.months, 'M'));

        return res;
    }

    function momentsDifference(base, other) {
        var res;
        other = cloneWithOffset(other, base);
        if (base.isBefore(other)) {
            res = positiveMomentsDifference(base, other);
        } else {
            res = positiveMomentsDifference(other, base);
            res.milliseconds = -res.milliseconds;
            res.months = -res.months;
        }

        return res;
    }

    function createAdder(direction, name) {
        return function (val, period) {
            var dur, tmp;
            //invert the arguments, but complain about it
            if (period !== null && !isNaN(+period)) {
                deprecateSimple(name, 'moment().' + name  + '(period, number) is deprecated. Please use moment().' + name + '(number, period).');
                tmp = val; val = period; period = tmp;
            }

            val = typeof val === 'string' ? +val : val;
            dur = create__createDuration(val, period);
            add_subtract__addSubtract(this, dur, direction);
            return this;
        };
    }

    function add_subtract__addSubtract (mom, duration, isAdding, updateOffset) {
        var milliseconds = duration._milliseconds,
            days = duration._days,
            months = duration._months;
        updateOffset = updateOffset == null ? true : updateOffset;

        if (milliseconds) {
            mom._d.setTime(+mom._d + milliseconds * isAdding);
        }
        if (days) {
            get_set__set(mom, 'Date', get_set__get(mom, 'Date') + days * isAdding);
        }
        if (months) {
            setMonth(mom, get_set__get(mom, 'Month') + months * isAdding);
        }
        if (updateOffset) {
            utils_hooks__hooks.updateOffset(mom, days || months);
        }
    }

    var add_subtract__add      = createAdder(1, 'add');
    var add_subtract__subtract = createAdder(-1, 'subtract');

    function moment_calendar__calendar (time, formats) {
        // We want to compare the start of today, vs this.
        // Getting start-of-today depends on whether we're local/utc/offset or not.
        var now = time || local__createLocal(),
            sod = cloneWithOffset(now, this).startOf('day'),
            diff = this.diff(sod, 'days', true),
            format = diff < -6 ? 'sameElse' :
                diff < -1 ? 'lastWeek' :
                diff < 0 ? 'lastDay' :
                diff < 1 ? 'sameDay' :
                diff < 2 ? 'nextDay' :
                diff < 7 ? 'nextWeek' : 'sameElse';
        return this.format(formats && formats[format] || this.localeData().calendar(format, this, local__createLocal(now)));
    }

    function clone () {
        return new Moment(this);
    }

    function isAfter (input, units) {
        var inputMs;
        units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');
        if (units === 'millisecond') {
            input = isMoment(input) ? input : local__createLocal(input);
            return +this > +input;
        } else {
            inputMs = isMoment(input) ? +input : +local__createLocal(input);
            return inputMs < +this.clone().startOf(units);
        }
    }

    function isBefore (input, units) {
        var inputMs;
        units = normalizeUnits(typeof units !== 'undefined' ? units : 'millisecond');
        if (units === 'millisecond') {
            input = isMoment(input) ? input : local__createLocal(input);
            return +this < +input;
        } else {
            inputMs = isMoment(input) ? +input : +local__createLocal(input);
            return +this.clone().endOf(units) < inputMs;
        }
    }

    function isBetween (from, to, units) {
        return this.isAfter(from, units) && this.isBefore(to, units);
    }

    function isSame (input, units) {
        var inputMs;
        units = normalizeUnits(units || 'millisecond');
        if (units === 'millisecond') {
            input = isMoment(input) ? input : local__createLocal(input);
            return +this === +input;
        } else {
            inputMs = +local__createLocal(input);
            return +(this.clone().startOf(units)) <= inputMs && inputMs <= +(this.clone().endOf(units));
        }
    }

    function diff (input, units, asFloat) {
        var that = cloneWithOffset(input, this),
            zoneDelta = (that.utcOffset() - this.utcOffset()) * 6e4,
            delta, output;

        units = normalizeUnits(units);

        if (units === 'year' || units === 'month' || units === 'quarter') {
            output = monthDiff(this, that);
            if (units === 'quarter') {
                output = output / 3;
            } else if (units === 'year') {
                output = output / 12;
            }
        } else {
            delta = this - that;
            output = units === 'second' ? delta / 1e3 : // 1000
                units === 'minute' ? delta / 6e4 : // 1000 * 60
                units === 'hour' ? delta / 36e5 : // 1000 * 60 * 60
                units === 'day' ? (delta - zoneDelta) / 864e5 : // 1000 * 60 * 60 * 24, negate dst
                units === 'week' ? (delta - zoneDelta) / 6048e5 : // 1000 * 60 * 60 * 24 * 7, negate dst
                delta;
        }
        return asFloat ? output : absFloor(output);
    }

    function monthDiff (a, b) {
        // difference in months
        var wholeMonthDiff = ((b.year() - a.year()) * 12) + (b.month() - a.month()),
            // b is in (anchor - 1 month, anchor + 1 month)
            anchor = a.clone().add(wholeMonthDiff, 'months'),
            anchor2, adjust;

        if (b - anchor < 0) {
            anchor2 = a.clone().add(wholeMonthDiff - 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor - anchor2);
        } else {
            anchor2 = a.clone().add(wholeMonthDiff + 1, 'months');
            // linear across the month
            adjust = (b - anchor) / (anchor2 - anchor);
        }

        return -(wholeMonthDiff + adjust);
    }

    utils_hooks__hooks.defaultFormat = 'YYYY-MM-DDTHH:mm:ssZ';

    function toString () {
        return this.clone().locale('en').format('ddd MMM DD YYYY HH:mm:ss [GMT]ZZ');
    }

    function moment_format__toISOString () {
        var m = this.clone().utc();
        if (0 < m.year() && m.year() <= 9999) {
            if ('function' === typeof Date.prototype.toISOString) {
                // native implementation is ~50x faster, use it when we can
                return this.toDate().toISOString();
            } else {
                return formatMoment(m, 'YYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
            }
        } else {
            return formatMoment(m, 'YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]');
        }
    }

    function moment_format__format (inputString) {
        var output = formatMoment(this, inputString || utils_hooks__hooks.defaultFormat);
        return this.localeData().postformat(output);
    }

    function from (time, withoutSuffix) {
        if (!this.isValid()) {
            return this.localeData().invalidDate();
        }
        return create__createDuration({to: this, from: time}).locale(this.locale()).humanize(!withoutSuffix);
    }

    function fromNow (withoutSuffix) {
        return this.from(local__createLocal(), withoutSuffix);
    }

    function to (time, withoutSuffix) {
        if (!this.isValid()) {
            return this.localeData().invalidDate();
        }
        return create__createDuration({from: this, to: time}).locale(this.locale()).humanize(!withoutSuffix);
    }

    function toNow (withoutSuffix) {
        return this.to(local__createLocal(), withoutSuffix);
    }

    function locale (key) {
        var newLocaleData;

        if (key === undefined) {
            return this._locale._abbr;
        } else {
            newLocaleData = locale_locales__getLocale(key);
            if (newLocaleData != null) {
                this._locale = newLocaleData;
            }
            return this;
        }
    }

    var lang = deprecate(
        'moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.',
        function (key) {
            if (key === undefined) {
                return this.localeData();
            } else {
                return this.locale(key);
            }
        }
    );

    function localeData () {
        return this._locale;
    }

    function startOf (units) {
        units = normalizeUnits(units);
        // the following switch intentionally omits break keywords
        // to utilize falling through the cases.
        switch (units) {
        case 'year':
            this.month(0);
            /* falls through */
        case 'quarter':
        case 'month':
            this.date(1);
            /* falls through */
        case 'week':
        case 'isoWeek':
        case 'day':
            this.hours(0);
            /* falls through */
        case 'hour':
            this.minutes(0);
            /* falls through */
        case 'minute':
            this.seconds(0);
            /* falls through */
        case 'second':
            this.milliseconds(0);
        }

        // weeks are a special case
        if (units === 'week') {
            this.weekday(0);
        }
        if (units === 'isoWeek') {
            this.isoWeekday(1);
        }

        // quarters are also special
        if (units === 'quarter') {
            this.month(Math.floor(this.month() / 3) * 3);
        }

        return this;
    }

    function endOf (units) {
        units = normalizeUnits(units);
        if (units === undefined || units === 'millisecond') {
            return this;
        }
        return this.startOf(units).add(1, (units === 'isoWeek' ? 'week' : units)).subtract(1, 'ms');
    }

    function to_type__valueOf () {
        return +this._d - ((this._offset || 0) * 60000);
    }

    function unix () {
        return Math.floor(+this / 1000);
    }

    function toDate () {
        return this._offset ? new Date(+this) : this._d;
    }

    function toArray () {
        var m = this;
        return [m.year(), m.month(), m.date(), m.hour(), m.minute(), m.second(), m.millisecond()];
    }

    function toObject () {
        var m = this;
        return {
            years: m.year(),
            months: m.month(),
            date: m.date(),
            hours: m.hours(),
            minutes: m.minutes(),
            seconds: m.seconds(),
            milliseconds: m.milliseconds()
        };
    }

    function moment_valid__isValid () {
        return valid__isValid(this);
    }

    function parsingFlags () {
        return extend({}, getParsingFlags(this));
    }

    function invalidAt () {
        return getParsingFlags(this).overflow;
    }

    addFormatToken(0, ['gg', 2], 0, function () {
        return this.weekYear() % 100;
    });

    addFormatToken(0, ['GG', 2], 0, function () {
        return this.isoWeekYear() % 100;
    });

    function addWeekYearFormatToken (token, getter) {
        addFormatToken(0, [token, token.length], 0, getter);
    }

    addWeekYearFormatToken('gggg',     'weekYear');
    addWeekYearFormatToken('ggggg',    'weekYear');
    addWeekYearFormatToken('GGGG',  'isoWeekYear');
    addWeekYearFormatToken('GGGGG', 'isoWeekYear');

    // ALIASES

    addUnitAlias('weekYear', 'gg');
    addUnitAlias('isoWeekYear', 'GG');

    // PARSING

    addRegexToken('G',      matchSigned);
    addRegexToken('g',      matchSigned);
    addRegexToken('GG',     match1to2, match2);
    addRegexToken('gg',     match1to2, match2);
    addRegexToken('GGGG',   match1to4, match4);
    addRegexToken('gggg',   match1to4, match4);
    addRegexToken('GGGGG',  match1to6, match6);
    addRegexToken('ggggg',  match1to6, match6);

    addWeekParseToken(['gggg', 'ggggg', 'GGGG', 'GGGGG'], function (input, week, config, token) {
        week[token.substr(0, 2)] = toInt(input);
    });

    addWeekParseToken(['gg', 'GG'], function (input, week, config, token) {
        week[token] = utils_hooks__hooks.parseTwoDigitYear(input);
    });

    // HELPERS

    function weeksInYear(year, dow, doy) {
        return weekOfYear(local__createLocal([year, 11, 31 + dow - doy]), dow, doy).week;
    }

    // MOMENTS

    function getSetWeekYear (input) {
        var year = weekOfYear(this, this.localeData()._week.dow, this.localeData()._week.doy).year;
        return input == null ? year : this.add((input - year), 'y');
    }

    function getSetISOWeekYear (input) {
        var year = weekOfYear(this, 1, 4).year;
        return input == null ? year : this.add((input - year), 'y');
    }

    function getISOWeeksInYear () {
        return weeksInYear(this.year(), 1, 4);
    }

    function getWeeksInYear () {
        var weekInfo = this.localeData()._week;
        return weeksInYear(this.year(), weekInfo.dow, weekInfo.doy);
    }

    addFormatToken('Q', 0, 0, 'quarter');

    // ALIASES

    addUnitAlias('quarter', 'Q');

    // PARSING

    addRegexToken('Q', match1);
    addParseToken('Q', function (input, array) {
        array[MONTH] = (toInt(input) - 1) * 3;
    });

    // MOMENTS

    function getSetQuarter (input) {
        return input == null ? Math.ceil((this.month() + 1) / 3) : this.month((input - 1) * 3 + this.month() % 3);
    }

    addFormatToken('D', ['DD', 2], 'Do', 'date');

    // ALIASES

    addUnitAlias('date', 'D');

    // PARSING

    addRegexToken('D',  match1to2);
    addRegexToken('DD', match1to2, match2);
    addRegexToken('Do', function (isStrict, locale) {
        return isStrict ? locale._ordinalParse : locale._ordinalParseLenient;
    });

    addParseToken(['D', 'DD'], DATE);
    addParseToken('Do', function (input, array) {
        array[DATE] = toInt(input.match(match1to2)[0], 10);
    });

    // MOMENTS

    var getSetDayOfMonth = makeGetSet('Date', true);

    addFormatToken('d', 0, 'do', 'day');

    addFormatToken('dd', 0, 0, function (format) {
        return this.localeData().weekdaysMin(this, format);
    });

    addFormatToken('ddd', 0, 0, function (format) {
        return this.localeData().weekdaysShort(this, format);
    });

    addFormatToken('dddd', 0, 0, function (format) {
        return this.localeData().weekdays(this, format);
    });

    addFormatToken('e', 0, 0, 'weekday');
    addFormatToken('E', 0, 0, 'isoWeekday');

    // ALIASES

    addUnitAlias('day', 'd');
    addUnitAlias('weekday', 'e');
    addUnitAlias('isoWeekday', 'E');

    // PARSING

    addRegexToken('d',    match1to2);
    addRegexToken('e',    match1to2);
    addRegexToken('E',    match1to2);
    addRegexToken('dd',   matchWord);
    addRegexToken('ddd',  matchWord);
    addRegexToken('dddd', matchWord);

    addWeekParseToken(['dd', 'ddd', 'dddd'], function (input, week, config) {
        var weekday = config._locale.weekdaysParse(input);
        // if we didn't get a weekday name, mark the date as invalid
        if (weekday != null) {
            week.d = weekday;
        } else {
            getParsingFlags(config).invalidWeekday = input;
        }
    });

    addWeekParseToken(['d', 'e', 'E'], function (input, week, config, token) {
        week[token] = toInt(input);
    });

    // HELPERS

    function parseWeekday(input, locale) {
        if (typeof input !== 'string') {
            return input;
        }

        if (!isNaN(input)) {
            return parseInt(input, 10);
        }

        input = locale.weekdaysParse(input);
        if (typeof input === 'number') {
            return input;
        }

        return null;
    }

    // LOCALES

    var defaultLocaleWeekdays = 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_');
    function localeWeekdays (m) {
        return this._weekdays[m.day()];
    }

    var defaultLocaleWeekdaysShort = 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_');
    function localeWeekdaysShort (m) {
        return this._weekdaysShort[m.day()];
    }

    var defaultLocaleWeekdaysMin = 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_');
    function localeWeekdaysMin (m) {
        return this._weekdaysMin[m.day()];
    }

    function localeWeekdaysParse (weekdayName) {
        var i, mom, regex;

        this._weekdaysParse = this._weekdaysParse || [];

        for (i = 0; i < 7; i++) {
            // make the regex if we don't have it already
            if (!this._weekdaysParse[i]) {
                mom = local__createLocal([2000, 1]).day(i);
                regex = '^' + this.weekdays(mom, '') + '|^' + this.weekdaysShort(mom, '') + '|^' + this.weekdaysMin(mom, '');
                this._weekdaysParse[i] = new RegExp(regex.replace('.', ''), 'i');
            }
            // test the regex
            if (this._weekdaysParse[i].test(weekdayName)) {
                return i;
            }
        }
    }

    // MOMENTS

    function getSetDayOfWeek (input) {
        var day = this._isUTC ? this._d.getUTCDay() : this._d.getDay();
        if (input != null) {
            input = parseWeekday(input, this.localeData());
            return this.add(input - day, 'd');
        } else {
            return day;
        }
    }

    function getSetLocaleDayOfWeek (input) {
        var weekday = (this.day() + 7 - this.localeData()._week.dow) % 7;
        return input == null ? weekday : this.add(input - weekday, 'd');
    }

    function getSetISODayOfWeek (input) {
        // behaves the same as moment#day except
        // as a getter, returns 7 instead of 0 (1-7 range instead of 0-6)
        // as a setter, sunday should belong to the previous week.
        return input == null ? this.day() || 7 : this.day(this.day() % 7 ? input : input - 7);
    }

    addFormatToken('H', ['HH', 2], 0, 'hour');
    addFormatToken('h', ['hh', 2], 0, function () {
        return this.hours() % 12 || 12;
    });

    function meridiem (token, lowercase) {
        addFormatToken(token, 0, 0, function () {
            return this.localeData().meridiem(this.hours(), this.minutes(), lowercase);
        });
    }

    meridiem('a', true);
    meridiem('A', false);

    // ALIASES

    addUnitAlias('hour', 'h');

    // PARSING

    function matchMeridiem (isStrict, locale) {
        return locale._meridiemParse;
    }

    addRegexToken('a',  matchMeridiem);
    addRegexToken('A',  matchMeridiem);
    addRegexToken('H',  match1to2);
    addRegexToken('h',  match1to2);
    addRegexToken('HH', match1to2, match2);
    addRegexToken('hh', match1to2, match2);

    addParseToken(['H', 'HH'], HOUR);
    addParseToken(['a', 'A'], function (input, array, config) {
        config._isPm = config._locale.isPM(input);
        config._meridiem = input;
    });
    addParseToken(['h', 'hh'], function (input, array, config) {
        array[HOUR] = toInt(input);
        getParsingFlags(config).bigHour = true;
    });

    // LOCALES

    function localeIsPM (input) {
        // IE8 Quirks Mode & IE7 Standards Mode do not allow accessing strings like arrays
        // Using charAt should be more compatible.
        return ((input + '').toLowerCase().charAt(0) === 'p');
    }

    var defaultLocaleMeridiemParse = /[ap]\.?m?\.?/i;
    function localeMeridiem (hours, minutes, isLower) {
        if (hours > 11) {
            return isLower ? 'pm' : 'PM';
        } else {
            return isLower ? 'am' : 'AM';
        }
    }


    // MOMENTS

    // Setting the hour should keep the time, because the user explicitly
    // specified which hour he wants. So trying to maintain the same hour (in
    // a new timezone) makes sense. Adding/subtracting hours does not follow
    // this rule.
    var getSetHour = makeGetSet('Hours', true);

    addFormatToken('m', ['mm', 2], 0, 'minute');

    // ALIASES

    addUnitAlias('minute', 'm');

    // PARSING

    addRegexToken('m',  match1to2);
    addRegexToken('mm', match1to2, match2);
    addParseToken(['m', 'mm'], MINUTE);

    // MOMENTS

    var getSetMinute = makeGetSet('Minutes', false);

    addFormatToken('s', ['ss', 2], 0, 'second');

    // ALIASES

    addUnitAlias('second', 's');

    // PARSING

    addRegexToken('s',  match1to2);
    addRegexToken('ss', match1to2, match2);
    addParseToken(['s', 'ss'], SECOND);

    // MOMENTS

    var getSetSecond = makeGetSet('Seconds', false);

    addFormatToken('S', 0, 0, function () {
        return ~~(this.millisecond() / 100);
    });

    addFormatToken(0, ['SS', 2], 0, function () {
        return ~~(this.millisecond() / 10);
    });

    addFormatToken(0, ['SSS', 3], 0, 'millisecond');
    addFormatToken(0, ['SSSS', 4], 0, function () {
        return this.millisecond() * 10;
    });
    addFormatToken(0, ['SSSSS', 5], 0, function () {
        return this.millisecond() * 100;
    });
    addFormatToken(0, ['SSSSSS', 6], 0, function () {
        return this.millisecond() * 1000;
    });
    addFormatToken(0, ['SSSSSSS', 7], 0, function () {
        return this.millisecond() * 10000;
    });
    addFormatToken(0, ['SSSSSSSS', 8], 0, function () {
        return this.millisecond() * 100000;
    });
    addFormatToken(0, ['SSSSSSSSS', 9], 0, function () {
        return this.millisecond() * 1000000;
    });


    // ALIASES

    addUnitAlias('millisecond', 'ms');

    // PARSING

    addRegexToken('S',    match1to3, match1);
    addRegexToken('SS',   match1to3, match2);
    addRegexToken('SSS',  match1to3, match3);

    var token;
    for (token = 'SSSS'; token.length <= 9; token += 'S') {
        addRegexToken(token, matchUnsigned);
    }

    function parseMs(input, array) {
        array[MILLISECOND] = toInt(('0.' + input) * 1000);
    }

    for (token = 'S'; token.length <= 9; token += 'S') {
        addParseToken(token, parseMs);
    }
    // MOMENTS

    var getSetMillisecond = makeGetSet('Milliseconds', false);

    addFormatToken('z',  0, 0, 'zoneAbbr');
    addFormatToken('zz', 0, 0, 'zoneName');

    // MOMENTS

    function getZoneAbbr () {
        return this._isUTC ? 'UTC' : '';
    }

    function getZoneName () {
        return this._isUTC ? 'Coordinated Universal Time' : '';
    }

    var momentPrototype__proto = Moment.prototype;

    momentPrototype__proto.add          = add_subtract__add;
    momentPrototype__proto.calendar     = moment_calendar__calendar;
    momentPrototype__proto.clone        = clone;
    momentPrototype__proto.diff         = diff;
    momentPrototype__proto.endOf        = endOf;
    momentPrototype__proto.format       = moment_format__format;
    momentPrototype__proto.from         = from;
    momentPrototype__proto.fromNow      = fromNow;
    momentPrototype__proto.to           = to;
    momentPrototype__proto.toNow        = toNow;
    momentPrototype__proto.get          = getSet;
    momentPrototype__proto.invalidAt    = invalidAt;
    momentPrototype__proto.isAfter      = isAfter;
    momentPrototype__proto.isBefore     = isBefore;
    momentPrototype__proto.isBetween    = isBetween;
    momentPrototype__proto.isSame       = isSame;
    momentPrototype__proto.isValid      = moment_valid__isValid;
    momentPrototype__proto.lang         = lang;
    momentPrototype__proto.locale       = locale;
    momentPrototype__proto.localeData   = localeData;
    momentPrototype__proto.max          = prototypeMax;
    momentPrototype__proto.min          = prototypeMin;
    momentPrototype__proto.parsingFlags = parsingFlags;
    momentPrototype__proto.set          = getSet;
    momentPrototype__proto.startOf      = startOf;
    momentPrototype__proto.subtract     = add_subtract__subtract;
    momentPrototype__proto.toArray      = toArray;
    momentPrototype__proto.toObject     = toObject;
    momentPrototype__proto.toDate       = toDate;
    momentPrototype__proto.toISOString  = moment_format__toISOString;
    momentPrototype__proto.toJSON       = moment_format__toISOString;
    momentPrototype__proto.toString     = toString;
    momentPrototype__proto.unix         = unix;
    momentPrototype__proto.valueOf      = to_type__valueOf;

    // Year
    momentPrototype__proto.year       = getSetYear;
    momentPrototype__proto.isLeapYear = getIsLeapYear;

    // Week Year
    momentPrototype__proto.weekYear    = getSetWeekYear;
    momentPrototype__proto.isoWeekYear = getSetISOWeekYear;

    // Quarter
    momentPrototype__proto.quarter = momentPrototype__proto.quarters = getSetQuarter;

    // Month
    momentPrototype__proto.month       = getSetMonth;
    momentPrototype__proto.daysInMonth = getDaysInMonth;

    // Week
    momentPrototype__proto.week           = momentPrototype__proto.weeks        = getSetWeek;
    momentPrototype__proto.isoWeek        = momentPrototype__proto.isoWeeks     = getSetISOWeek;
    momentPrototype__proto.weeksInYear    = getWeeksInYear;
    momentPrototype__proto.isoWeeksInYear = getISOWeeksInYear;

    // Day
    momentPrototype__proto.date       = getSetDayOfMonth;
    momentPrototype__proto.day        = momentPrototype__proto.days             = getSetDayOfWeek;
    momentPrototype__proto.weekday    = getSetLocaleDayOfWeek;
    momentPrototype__proto.isoWeekday = getSetISODayOfWeek;
    momentPrototype__proto.dayOfYear  = getSetDayOfYear;

    // Hour
    momentPrototype__proto.hour = momentPrototype__proto.hours = getSetHour;

    // Minute
    momentPrototype__proto.minute = momentPrototype__proto.minutes = getSetMinute;

    // Second
    momentPrototype__proto.second = momentPrototype__proto.seconds = getSetSecond;

    // Millisecond
    momentPrototype__proto.millisecond = momentPrototype__proto.milliseconds = getSetMillisecond;

    // Offset
    momentPrototype__proto.utcOffset            = getSetOffset;
    momentPrototype__proto.utc                  = setOffsetToUTC;
    momentPrototype__proto.local                = setOffsetToLocal;
    momentPrototype__proto.parseZone            = setOffsetToParsedOffset;
    momentPrototype__proto.hasAlignedHourOffset = hasAlignedHourOffset;
    momentPrototype__proto.isDST                = isDaylightSavingTime;
    momentPrototype__proto.isDSTShifted         = isDaylightSavingTimeShifted;
    momentPrototype__proto.isLocal              = isLocal;
    momentPrototype__proto.isUtcOffset          = isUtcOffset;
    momentPrototype__proto.isUtc                = isUtc;
    momentPrototype__proto.isUTC                = isUtc;

    // Timezone
    momentPrototype__proto.zoneAbbr = getZoneAbbr;
    momentPrototype__proto.zoneName = getZoneName;

    // Deprecations
    momentPrototype__proto.dates  = deprecate('dates accessor is deprecated. Use date instead.', getSetDayOfMonth);
    momentPrototype__proto.months = deprecate('months accessor is deprecated. Use month instead', getSetMonth);
    momentPrototype__proto.years  = deprecate('years accessor is deprecated. Use year instead', getSetYear);
    momentPrototype__proto.zone   = deprecate('moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779', getSetZone);

    var momentPrototype = momentPrototype__proto;

    function moment_moment__createUnix (input) {
        return local__createLocal(input * 1000);
    }

    function moment_moment__createInZone () {
        return local__createLocal.apply(null, arguments).parseZone();
    }

    var defaultCalendar = {
        sameDay : '[Today at] LT',
        nextDay : '[Tomorrow at] LT',
        nextWeek : 'dddd [at] LT',
        lastDay : '[Yesterday at] LT',
        lastWeek : '[Last] dddd [at] LT',
        sameElse : 'L'
    };

    function locale_calendar__calendar (key, mom, now) {
        var output = this._calendar[key];
        return typeof output === 'function' ? output.call(mom, now) : output;
    }

    var defaultLongDateFormat = {
        LTS  : 'h:mm:ss A',
        LT   : 'h:mm A',
        L    : 'MM/DD/YYYY',
        LL   : 'MMMM D, YYYY',
        LLL  : 'MMMM D, YYYY h:mm A',
        LLLL : 'dddd, MMMM D, YYYY h:mm A'
    };

    function longDateFormat (key) {
        var format = this._longDateFormat[key],
            formatUpper = this._longDateFormat[key.toUpperCase()];

        if (format || !formatUpper) {
            return format;
        }

        this._longDateFormat[key] = formatUpper.replace(/MMMM|MM|DD|dddd/g, function (val) {
            return val.slice(1);
        });

        return this._longDateFormat[key];
    }

    var defaultInvalidDate = 'Invalid date';

    function invalidDate () {
        return this._invalidDate;
    }

    var defaultOrdinal = '%d';
    var defaultOrdinalParse = /\d{1,2}/;

    function ordinal (number) {
        return this._ordinal.replace('%d', number);
    }

    function preParsePostFormat (string) {
        return string;
    }

    var defaultRelativeTime = {
        future : 'in %s',
        past   : '%s ago',
        s  : 'a few seconds',
        m  : 'a minute',
        mm : '%d minutes',
        h  : 'an hour',
        hh : '%d hours',
        d  : 'a day',
        dd : '%d days',
        M  : 'a month',
        MM : '%d months',
        y  : 'a year',
        yy : '%d years'
    };

    function relative__relativeTime (number, withoutSuffix, string, isFuture) {
        var output = this._relativeTime[string];
        return (typeof output === 'function') ?
            output(number, withoutSuffix, string, isFuture) :
            output.replace(/%d/i, number);
    }

    function pastFuture (diff, output) {
        var format = this._relativeTime[diff > 0 ? 'future' : 'past'];
        return typeof format === 'function' ? format(output) : format.replace(/%s/i, output);
    }

    function locale_set__set (config) {
        var prop, i;
        for (i in config) {
            prop = config[i];
            if (typeof prop === 'function') {
                this[i] = prop;
            } else {
                this['_' + i] = prop;
            }
        }
        // Lenient ordinal parsing accepts just a number in addition to
        // number + (possibly) stuff coming from _ordinalParseLenient.
        this._ordinalParseLenient = new RegExp(this._ordinalParse.source + '|' + (/\d{1,2}/).source);
    }

    var prototype__proto = Locale.prototype;

    prototype__proto._calendar       = defaultCalendar;
    prototype__proto.calendar        = locale_calendar__calendar;
    prototype__proto._longDateFormat = defaultLongDateFormat;
    prototype__proto.longDateFormat  = longDateFormat;
    prototype__proto._invalidDate    = defaultInvalidDate;
    prototype__proto.invalidDate     = invalidDate;
    prototype__proto._ordinal        = defaultOrdinal;
    prototype__proto.ordinal         = ordinal;
    prototype__proto._ordinalParse   = defaultOrdinalParse;
    prototype__proto.preparse        = preParsePostFormat;
    prototype__proto.postformat      = preParsePostFormat;
    prototype__proto._relativeTime   = defaultRelativeTime;
    prototype__proto.relativeTime    = relative__relativeTime;
    prototype__proto.pastFuture      = pastFuture;
    prototype__proto.set             = locale_set__set;

    // Month
    prototype__proto.months       =        localeMonths;
    prototype__proto._months      = defaultLocaleMonths;
    prototype__proto.monthsShort  =        localeMonthsShort;
    prototype__proto._monthsShort = defaultLocaleMonthsShort;
    prototype__proto.monthsParse  =        localeMonthsParse;

    // Week
    prototype__proto.week = localeWeek;
    prototype__proto._week = defaultLocaleWeek;
    prototype__proto.firstDayOfYear = localeFirstDayOfYear;
    prototype__proto.firstDayOfWeek = localeFirstDayOfWeek;

    // Day of Week
    prototype__proto.weekdays       =        localeWeekdays;
    prototype__proto._weekdays      = defaultLocaleWeekdays;
    prototype__proto.weekdaysMin    =        localeWeekdaysMin;
    prototype__proto._weekdaysMin   = defaultLocaleWeekdaysMin;
    prototype__proto.weekdaysShort  =        localeWeekdaysShort;
    prototype__proto._weekdaysShort = defaultLocaleWeekdaysShort;
    prototype__proto.weekdaysParse  =        localeWeekdaysParse;

    // Hours
    prototype__proto.isPM = localeIsPM;
    prototype__proto._meridiemParse = defaultLocaleMeridiemParse;
    prototype__proto.meridiem = localeMeridiem;

    function lists__get (format, index, field, setter) {
        var locale = locale_locales__getLocale();
        var utc = create_utc__createUTC().set(setter, index);
        return locale[field](utc, format);
    }

    function list (format, index, field, count, setter) {
        if (typeof format === 'number') {
            index = format;
            format = undefined;
        }

        format = format || '';

        if (index != null) {
            return lists__get(format, index, field, setter);
        }

        var i;
        var out = [];
        for (i = 0; i < count; i++) {
            out[i] = lists__get(format, i, field, setter);
        }
        return out;
    }

    function lists__listMonths (format, index) {
        return list(format, index, 'months', 12, 'month');
    }

    function lists__listMonthsShort (format, index) {
        return list(format, index, 'monthsShort', 12, 'month');
    }

    function lists__listWeekdays (format, index) {
        return list(format, index, 'weekdays', 7, 'day');
    }

    function lists__listWeekdaysShort (format, index) {
        return list(format, index, 'weekdaysShort', 7, 'day');
    }

    function lists__listWeekdaysMin (format, index) {
        return list(format, index, 'weekdaysMin', 7, 'day');
    }

    locale_locales__getSetGlobalLocale('en', {
        ordinalParse: /\d{1,2}(th|st|nd|rd)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (toInt(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });

    // Side effect imports
    utils_hooks__hooks.lang = deprecate('moment.lang is deprecated. Use moment.locale instead.', locale_locales__getSetGlobalLocale);
    utils_hooks__hooks.langData = deprecate('moment.langData is deprecated. Use moment.localeData instead.', locale_locales__getLocale);

    var mathAbs = Math.abs;

    function duration_abs__abs () {
        var data           = this._data;

        this._milliseconds = mathAbs(this._milliseconds);
        this._days         = mathAbs(this._days);
        this._months       = mathAbs(this._months);

        data.milliseconds  = mathAbs(data.milliseconds);
        data.seconds       = mathAbs(data.seconds);
        data.minutes       = mathAbs(data.minutes);
        data.hours         = mathAbs(data.hours);
        data.months        = mathAbs(data.months);
        data.years         = mathAbs(data.years);

        return this;
    }

    function duration_add_subtract__addSubtract (duration, input, value, direction) {
        var other = create__createDuration(input, value);

        duration._milliseconds += direction * other._milliseconds;
        duration._days         += direction * other._days;
        duration._months       += direction * other._months;

        return duration._bubble();
    }

    // supports only 2.0-style add(1, 's') or add(duration)
    function duration_add_subtract__add (input, value) {
        return duration_add_subtract__addSubtract(this, input, value, 1);
    }

    // supports only 2.0-style subtract(1, 's') or subtract(duration)
    function duration_add_subtract__subtract (input, value) {
        return duration_add_subtract__addSubtract(this, input, value, -1);
    }

    function absCeil (number) {
        if (number < 0) {
            return Math.floor(number);
        } else {
            return Math.ceil(number);
        }
    }

    function bubble () {
        var milliseconds = this._milliseconds;
        var days         = this._days;
        var months       = this._months;
        var data         = this._data;
        var seconds, minutes, hours, years, monthsFromDays;

        // if we have a mix of positive and negative values, bubble down first
        // check: https://github.com/moment/moment/issues/2166
        if (!((milliseconds >= 0 && days >= 0 && months >= 0) ||
                (milliseconds <= 0 && days <= 0 && months <= 0))) {
            milliseconds += absCeil(monthsToDays(months) + days) * 864e5;
            days = 0;
            months = 0;
        }

        // The following code bubbles up values, see the tests for
        // examples of what that means.
        data.milliseconds = milliseconds % 1000;

        seconds           = absFloor(milliseconds / 1000);
        data.seconds      = seconds % 60;

        minutes           = absFloor(seconds / 60);
        data.minutes      = minutes % 60;

        hours             = absFloor(minutes / 60);
        data.hours        = hours % 24;

        days += absFloor(hours / 24);

        // convert days to months
        monthsFromDays = absFloor(daysToMonths(days));
        months += monthsFromDays;
        days -= absCeil(monthsToDays(monthsFromDays));

        // 12 months -> 1 year
        years = absFloor(months / 12);
        months %= 12;

        data.days   = days;
        data.months = months;
        data.years  = years;

        return this;
    }

    function daysToMonths (days) {
        // 400 years have 146097 days (taking into account leap year rules)
        // 400 years have 12 months === 4800
        return days * 4800 / 146097;
    }

    function monthsToDays (months) {
        // the reverse of daysToMonths
        return months * 146097 / 4800;
    }

    function as (units) {
        var days;
        var months;
        var milliseconds = this._milliseconds;

        units = normalizeUnits(units);

        if (units === 'month' || units === 'year') {
            days   = this._days   + milliseconds / 864e5;
            months = this._months + daysToMonths(days);
            return units === 'month' ? months : months / 12;
        } else {
            // handle milliseconds separately because of floating point math errors (issue #1867)
            days = this._days + Math.round(monthsToDays(this._months));
            switch (units) {
                case 'week'   : return days / 7     + milliseconds / 6048e5;
                case 'day'    : return days         + milliseconds / 864e5;
                case 'hour'   : return days * 24    + milliseconds / 36e5;
                case 'minute' : return days * 1440  + milliseconds / 6e4;
                case 'second' : return days * 86400 + milliseconds / 1000;
                // Math.floor prevents floating point math errors here
                case 'millisecond': return Math.floor(days * 864e5) + milliseconds;
                default: throw new Error('Unknown unit ' + units);
            }
        }
    }

    // TODO: Use this.as('ms')?
    function duration_as__valueOf () {
        return (
            this._milliseconds +
            this._days * 864e5 +
            (this._months % 12) * 2592e6 +
            toInt(this._months / 12) * 31536e6
        );
    }

    function makeAs (alias) {
        return function () {
            return this.as(alias);
        };
    }

    var asMilliseconds = makeAs('ms');
    var asSeconds      = makeAs('s');
    var asMinutes      = makeAs('m');
    var asHours        = makeAs('h');
    var asDays         = makeAs('d');
    var asWeeks        = makeAs('w');
    var asMonths       = makeAs('M');
    var asYears        = makeAs('y');

    function duration_get__get (units) {
        units = normalizeUnits(units);
        return this[units + 's']();
    }

    function makeGetter(name) {
        return function () {
            return this._data[name];
        };
    }

    var milliseconds = makeGetter('milliseconds');
    var seconds      = makeGetter('seconds');
    var minutes      = makeGetter('minutes');
    var hours        = makeGetter('hours');
    var days         = makeGetter('days');
    var duration_get__months       = makeGetter('months');
    var years        = makeGetter('years');

    function weeks () {
        return absFloor(this.days() / 7);
    }

    var round = Math.round;
    var thresholds = {
        s: 45,  // seconds to minute
        m: 45,  // minutes to hour
        h: 22,  // hours to day
        d: 26,  // days to month
        M: 11   // months to year
    };

    // helper function for moment.fn.from, moment.fn.fromNow, and moment.duration.fn.humanize
    function substituteTimeAgo(string, number, withoutSuffix, isFuture, locale) {
        return locale.relativeTime(number || 1, !!withoutSuffix, string, isFuture);
    }

    function duration_humanize__relativeTime (posNegDuration, withoutSuffix, locale) {
        var duration = create__createDuration(posNegDuration).abs();
        var seconds  = round(duration.as('s'));
        var minutes  = round(duration.as('m'));
        var hours    = round(duration.as('h'));
        var days     = round(duration.as('d'));
        var months   = round(duration.as('M'));
        var years    = round(duration.as('y'));

        var a = seconds < thresholds.s && ['s', seconds]  ||
                minutes === 1          && ['m']           ||
                minutes < thresholds.m && ['mm', minutes] ||
                hours   === 1          && ['h']           ||
                hours   < thresholds.h && ['hh', hours]   ||
                days    === 1          && ['d']           ||
                days    < thresholds.d && ['dd', days]    ||
                months  === 1          && ['M']           ||
                months  < thresholds.M && ['MM', months]  ||
                years   === 1          && ['y']           || ['yy', years];

        a[2] = withoutSuffix;
        a[3] = +posNegDuration > 0;
        a[4] = locale;
        return substituteTimeAgo.apply(null, a);
    }

    // This function allows you to set a threshold for relative time strings
    function duration_humanize__getSetRelativeTimeThreshold (threshold, limit) {
        if (thresholds[threshold] === undefined) {
            return false;
        }
        if (limit === undefined) {
            return thresholds[threshold];
        }
        thresholds[threshold] = limit;
        return true;
    }

    function humanize (withSuffix) {
        var locale = this.localeData();
        var output = duration_humanize__relativeTime(this, !withSuffix, locale);

        if (withSuffix) {
            output = locale.pastFuture(+this, output);
        }

        return locale.postformat(output);
    }

    var iso_string__abs = Math.abs;

    function iso_string__toISOString() {
        // for ISO strings we do not use the normal bubbling rules:
        //  * milliseconds bubble up until they become hours
        //  * days do not bubble at all
        //  * months bubble up until they become years
        // This is because there is no context-free conversion between hours and days
        // (think of clock changes)
        // and also not between days and months (28-31 days per month)
        var seconds = iso_string__abs(this._milliseconds) / 1000;
        var days         = iso_string__abs(this._days);
        var months       = iso_string__abs(this._months);
        var minutes, hours, years;

        // 3600 seconds -> 60 minutes -> 1 hour
        minutes           = absFloor(seconds / 60);
        hours             = absFloor(minutes / 60);
        seconds %= 60;
        minutes %= 60;

        // 12 months -> 1 year
        years  = absFloor(months / 12);
        months %= 12;


        // inspired by https://github.com/dordille/moment-isoduration/blob/master/moment.isoduration.js
        var Y = years;
        var M = months;
        var D = days;
        var h = hours;
        var m = minutes;
        var s = seconds;
        var total = this.asSeconds();

        if (!total) {
            // this is the same as C#'s (Noda) and python (isodate)...
            // but not other JS (goog.date)
            return 'P0D';
        }

        return (total < 0 ? '-' : '') +
            'P' +
            (Y ? Y + 'Y' : '') +
            (M ? M + 'M' : '') +
            (D ? D + 'D' : '') +
            ((h || m || s) ? 'T' : '') +
            (h ? h + 'H' : '') +
            (m ? m + 'M' : '') +
            (s ? s + 'S' : '');
    }

    var duration_prototype__proto = Duration.prototype;

    duration_prototype__proto.abs            = duration_abs__abs;
    duration_prototype__proto.add            = duration_add_subtract__add;
    duration_prototype__proto.subtract       = duration_add_subtract__subtract;
    duration_prototype__proto.as             = as;
    duration_prototype__proto.asMilliseconds = asMilliseconds;
    duration_prototype__proto.asSeconds      = asSeconds;
    duration_prototype__proto.asMinutes      = asMinutes;
    duration_prototype__proto.asHours        = asHours;
    duration_prototype__proto.asDays         = asDays;
    duration_prototype__proto.asWeeks        = asWeeks;
    duration_prototype__proto.asMonths       = asMonths;
    duration_prototype__proto.asYears        = asYears;
    duration_prototype__proto.valueOf        = duration_as__valueOf;
    duration_prototype__proto._bubble        = bubble;
    duration_prototype__proto.get            = duration_get__get;
    duration_prototype__proto.milliseconds   = milliseconds;
    duration_prototype__proto.seconds        = seconds;
    duration_prototype__proto.minutes        = minutes;
    duration_prototype__proto.hours          = hours;
    duration_prototype__proto.days           = days;
    duration_prototype__proto.weeks          = weeks;
    duration_prototype__proto.months         = duration_get__months;
    duration_prototype__proto.years          = years;
    duration_prototype__proto.humanize       = humanize;
    duration_prototype__proto.toISOString    = iso_string__toISOString;
    duration_prototype__proto.toString       = iso_string__toISOString;
    duration_prototype__proto.toJSON         = iso_string__toISOString;
    duration_prototype__proto.locale         = locale;
    duration_prototype__proto.localeData     = localeData;

    // Deprecations
    duration_prototype__proto.toIsoString = deprecate('toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)', iso_string__toISOString);
    duration_prototype__proto.lang = lang;

    // Side effect imports

    addFormatToken('X', 0, 0, 'unix');
    addFormatToken('x', 0, 0, 'valueOf');

    // PARSING

    addRegexToken('x', matchSigned);
    addRegexToken('X', matchTimestamp);
    addParseToken('X', function (input, array, config) {
        config._d = new Date(parseFloat(input, 10) * 1000);
    });
    addParseToken('x', function (input, array, config) {
        config._d = new Date(toInt(input));
    });

    // Side effect imports

    ;

    //! moment.js
    //! version : 2.10.6
    //! authors : Tim Wood, Iskren Chernev, Moment.js contributors
    //! license : MIT
    //! momentjs.com

    utils_hooks__hooks.version = '2.10.6';

    setHookCallback(local__createLocal);

    utils_hooks__hooks.fn                    = momentPrototype;
    utils_hooks__hooks.min                   = min;
    utils_hooks__hooks.max                   = max;
    utils_hooks__hooks.utc                   = create_utc__createUTC;
    utils_hooks__hooks.unix                  = moment_moment__createUnix;
    utils_hooks__hooks.months                = lists__listMonths;
    utils_hooks__hooks.isDate                = isDate;
    utils_hooks__hooks.locale                = locale_locales__getSetGlobalLocale;
    utils_hooks__hooks.invalid               = valid__createInvalid;
    utils_hooks__hooks.duration              = create__createDuration;
    utils_hooks__hooks.isMoment              = isMoment;
    utils_hooks__hooks.weekdays              = lists__listWeekdays;
    utils_hooks__hooks.parseZone             = moment_moment__createInZone;
    utils_hooks__hooks.localeData            = locale_locales__getLocale;
    utils_hooks__hooks.isDuration            = isDuration;
    utils_hooks__hooks.monthsShort           = lists__listMonthsShort;
    utils_hooks__hooks.weekdaysMin           = lists__listWeekdaysMin;
    utils_hooks__hooks.defineLocale          = defineLocale;
    utils_hooks__hooks.weekdaysShort         = lists__listWeekdaysShort;
    utils_hooks__hooks.normalizeUnits        = normalizeUnits;
    utils_hooks__hooks.relativeTimeThreshold = duration_humanize__getSetRelativeTimeThreshold;

    var _moment__default = utils_hooks__hooks;

    //! moment.js locale configuration
    //! locale : afrikaans (af)
    //! author : Werner Mollentze : https://github.com/wernerm

    var af = _moment__default.defineLocale('af', {
        months : 'Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember'.split('_'),
        monthsShort : 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des'.split('_'),
        weekdays : 'Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag'.split('_'),
        weekdaysShort : 'Son_Maa_Din_Woe_Don_Vry_Sat'.split('_'),
        weekdaysMin : 'So_Ma_Di_Wo_Do_Vr_Sa'.split('_'),
        meridiemParse: /vm|nm/i,
        isPM : function (input) {
            return /^nm$/i.test(input);
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours < 12) {
                return isLower ? 'vm' : 'VM';
            } else {
                return isLower ? 'nm' : 'NM';
            }
        },
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay : '[Vandag om] LT',
            nextDay : '[Môre om] LT',
            nextWeek : 'dddd [om] LT',
            lastDay : '[Gister om] LT',
            lastWeek : '[Laas] dddd [om] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'oor %s',
            past : '%s gelede',
            s : '\'n paar sekondes',
            m : '\'n minuut',
            mm : '%d minute',
            h : '\'n uur',
            hh : '%d ure',
            d : '\'n dag',
            dd : '%d dae',
            M : '\'n maand',
            MM : '%d maande',
            y : '\'n jaar',
            yy : '%d jaar'
        },
        ordinalParse: /\d{1,2}(ste|de)/,
        ordinal : function (number) {
            return number + ((number === 1 || number === 8 || number >= 20) ? 'ste' : 'de'); // Thanks to Joris Röling : https://github.com/jjupiter
        },
        week : {
            dow : 1, // Maandag is die eerste dag van die week.
            doy : 4  // Die week wat die 4de Januarie bevat is die eerste week van die jaar.
        }
    });

    //! moment.js locale configuration
    //! locale : Moroccan Arabic (ar-ma)
    //! author : ElFadili Yassine : https://github.com/ElFadiliY
    //! author : Abdel Said : https://github.com/abdelsaid

    var ar_ma = _moment__default.defineLocale('ar-ma', {
        months : 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
        monthsShort : 'يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر'.split('_'),
        weekdays : 'الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
        weekdaysShort : 'احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت'.split('_'),
        weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[اليوم على الساعة] LT',
            nextDay: '[غدا على الساعة] LT',
            nextWeek: 'dddd [على الساعة] LT',
            lastDay: '[أمس على الساعة] LT',
            lastWeek: 'dddd [على الساعة] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'في %s',
            past : 'منذ %s',
            s : 'ثوان',
            m : 'دقيقة',
            mm : '%d دقائق',
            h : 'ساعة',
            hh : '%d ساعات',
            d : 'يوم',
            dd : '%d أيام',
            M : 'شهر',
            MM : '%d أشهر',
            y : 'سنة',
            yy : '%d سنوات'
        },
        week : {
            dow : 6, // Saturday is the first day of the week.
            doy : 12  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Arabic Saudi Arabia (ar-sa)
    //! author : Suhail Alkowaileet : https://github.com/xsoh

    var ar_sa__symbolMap = {
        '1': '١',
        '2': '٢',
        '3': '٣',
        '4': '٤',
        '5': '٥',
        '6': '٦',
        '7': '٧',
        '8': '٨',
        '9': '٩',
        '0': '٠'
    }, ar_sa__numberMap = {
        '١': '1',
        '٢': '2',
        '٣': '3',
        '٤': '4',
        '٥': '5',
        '٦': '6',
        '٧': '7',
        '٨': '8',
        '٩': '9',
        '٠': '0'
    };

    var ar_sa = _moment__default.defineLocale('ar-sa', {
        months : 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
        monthsShort : 'يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
        weekdays : 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
        weekdaysShort : 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
        weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        meridiemParse: /ص|م/,
        isPM : function (input) {
            return 'م' === input;
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 12) {
                return 'ص';
            } else {
                return 'م';
            }
        },
        calendar : {
            sameDay: '[اليوم على الساعة] LT',
            nextDay: '[غدا على الساعة] LT',
            nextWeek: 'dddd [على الساعة] LT',
            lastDay: '[أمس على الساعة] LT',
            lastWeek: 'dddd [على الساعة] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'في %s',
            past : 'منذ %s',
            s : 'ثوان',
            m : 'دقيقة',
            mm : '%d دقائق',
            h : 'ساعة',
            hh : '%d ساعات',
            d : 'يوم',
            dd : '%d أيام',
            M : 'شهر',
            MM : '%d أشهر',
            y : 'سنة',
            yy : '%d سنوات'
        },
        preparse: function (string) {
            return string.replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
                return ar_sa__numberMap[match];
            }).replace(/،/g, ',');
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return ar_sa__symbolMap[match];
            }).replace(/,/g, '،');
        },
        week : {
            dow : 6, // Saturday is the first day of the week.
            doy : 12  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale  : Tunisian Arabic (ar-tn)

    var ar_tn = _moment__default.defineLocale('ar-tn', {
        months: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
        monthsShort: 'جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر'.split('_'),
        weekdays: 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
        weekdaysShort: 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
        weekdaysMin: 'ح_ن_ث_ر_خ_ج_س'.split('_'),
        longDateFormat: {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L: 'DD/MM/YYYY',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY HH:mm',
            LLLL: 'dddd D MMMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[اليوم على الساعة] LT',
            nextDay: '[غدا على الساعة] LT',
            nextWeek: 'dddd [على الساعة] LT',
            lastDay: '[أمس على الساعة] LT',
            lastWeek: 'dddd [على الساعة] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'في %s',
            past: 'منذ %s',
            s: 'ثوان',
            m: 'دقيقة',
            mm: '%d دقائق',
            h: 'ساعة',
            hh: '%d ساعات',
            d: 'يوم',
            dd: '%d أيام',
            M: 'شهر',
            MM: '%d أشهر',
            y: 'سنة',
            yy: '%d سنوات'
        },
        week: {
            dow: 1, // Monday is the first day of the week.
            doy: 4 // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! Locale: Arabic (ar)
    //! Author: Abdel Said: https://github.com/abdelsaid
    //! Changes in months, weekdays: Ahmed Elkhatib
    //! Native plural forms: forabi https://github.com/forabi

    var ar__symbolMap = {
        '1': '١',
        '2': '٢',
        '3': '٣',
        '4': '٤',
        '5': '٥',
        '6': '٦',
        '7': '٧',
        '8': '٨',
        '9': '٩',
        '0': '٠'
    }, ar__numberMap = {
        '١': '1',
        '٢': '2',
        '٣': '3',
        '٤': '4',
        '٥': '5',
        '٦': '6',
        '٧': '7',
        '٨': '8',
        '٩': '9',
        '٠': '0'
    }, pluralForm = function (n) {
        return n === 0 ? 0 : n === 1 ? 1 : n === 2 ? 2 : n % 100 >= 3 && n % 100 <= 10 ? 3 : n % 100 >= 11 ? 4 : 5;
    }, plurals = {
        s : ['أقل من ثانية', 'ثانية واحدة', ['ثانيتان', 'ثانيتين'], '%d ثوان', '%d ثانية', '%d ثانية'],
        m : ['أقل من دقيقة', 'دقيقة واحدة', ['دقيقتان', 'دقيقتين'], '%d دقائق', '%d دقيقة', '%d دقيقة'],
        h : ['أقل من ساعة', 'ساعة واحدة', ['ساعتان', 'ساعتين'], '%d ساعات', '%d ساعة', '%d ساعة'],
        d : ['أقل من يوم', 'يوم واحد', ['يومان', 'يومين'], '%d أيام', '%d يومًا', '%d يوم'],
        M : ['أقل من شهر', 'شهر واحد', ['شهران', 'شهرين'], '%d أشهر', '%d شهرا', '%d شهر'],
        y : ['أقل من عام', 'عام واحد', ['عامان', 'عامين'], '%d أعوام', '%d عامًا', '%d عام']
    }, pluralize = function (u) {
        return function (number, withoutSuffix, string, isFuture) {
            var f = pluralForm(number),
                str = plurals[u][pluralForm(number)];
            if (f === 2) {
                str = str[withoutSuffix ? 0 : 1];
            }
            return str.replace(/%d/i, number);
        };
    }, ar__months = [
        'كانون الثاني يناير',
        'شباط فبراير',
        'آذار مارس',
        'نيسان أبريل',
        'أيار مايو',
        'حزيران يونيو',
        'تموز يوليو',
        'آب أغسطس',
        'أيلول سبتمبر',
        'تشرين الأول أكتوبر',
        'تشرين الثاني نوفمبر',
        'كانون الأول ديسمبر'
    ];

    var ar = _moment__default.defineLocale('ar', {
        months : ar__months,
        monthsShort : ar__months,
        weekdays : 'الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت'.split('_'),
        weekdaysShort : 'أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت'.split('_'),
        weekdaysMin : 'ح_ن_ث_ر_خ_ج_س'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'D/\u200FM/\u200FYYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        meridiemParse: /ص|م/,
        isPM : function (input) {
            return 'م' === input;
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 12) {
                return 'ص';
            } else {
                return 'م';
            }
        },
        calendar : {
            sameDay: '[اليوم عند الساعة] LT',
            nextDay: '[غدًا عند الساعة] LT',
            nextWeek: 'dddd [عند الساعة] LT',
            lastDay: '[أمس عند الساعة] LT',
            lastWeek: 'dddd [عند الساعة] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'بعد %s',
            past : 'منذ %s',
            s : pluralize('s'),
            m : pluralize('m'),
            mm : pluralize('m'),
            h : pluralize('h'),
            hh : pluralize('h'),
            d : pluralize('d'),
            dd : pluralize('d'),
            M : pluralize('M'),
            MM : pluralize('M'),
            y : pluralize('y'),
            yy : pluralize('y')
        },
        preparse: function (string) {
            return string.replace(/\u200f/g, '').replace(/[١٢٣٤٥٦٧٨٩٠]/g, function (match) {
                return ar__numberMap[match];
            }).replace(/،/g, ',');
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return ar__symbolMap[match];
            }).replace(/,/g, '،');
        },
        week : {
            dow : 6, // Saturday is the first day of the week.
            doy : 12  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : azerbaijani (az)
    //! author : topchiyev : https://github.com/topchiyev

    var az__suffixes = {
        1: '-inci',
        5: '-inci',
        8: '-inci',
        70: '-inci',
        80: '-inci',
        2: '-nci',
        7: '-nci',
        20: '-nci',
        50: '-nci',
        3: '-üncü',
        4: '-üncü',
        100: '-üncü',
        6: '-ncı',
        9: '-uncu',
        10: '-uncu',
        30: '-uncu',
        60: '-ıncı',
        90: '-ıncı'
    };

    var az = _moment__default.defineLocale('az', {
        months : 'yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr'.split('_'),
        monthsShort : 'yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek'.split('_'),
        weekdays : 'Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə'.split('_'),
        weekdaysShort : 'Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən'.split('_'),
        weekdaysMin : 'Bz_BE_ÇA_Çə_CA_Cü_Şə'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay : '[bugün saat] LT',
            nextDay : '[sabah saat] LT',
            nextWeek : '[gələn həftə] dddd [saat] LT',
            lastDay : '[dünən] LT',
            lastWeek : '[keçən həftə] dddd [saat] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s sonra',
            past : '%s əvvəl',
            s : 'birneçə saniyyə',
            m : 'bir dəqiqə',
            mm : '%d dəqiqə',
            h : 'bir saat',
            hh : '%d saat',
            d : 'bir gün',
            dd : '%d gün',
            M : 'bir ay',
            MM : '%d ay',
            y : 'bir il',
            yy : '%d il'
        },
        meridiemParse: /gecə|səhər|gündüz|axşam/,
        isPM : function (input) {
            return /^(gündüz|axşam)$/.test(input);
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'gecə';
            } else if (hour < 12) {
                return 'səhər';
            } else if (hour < 17) {
                return 'gündüz';
            } else {
                return 'axşam';
            }
        },
        ordinalParse: /\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,
        ordinal : function (number) {
            if (number === 0) {  // special case for zero
                return number + '-ıncı';
            }
            var a = number % 10,
                b = number % 100 - a,
                c = number >= 100 ? 100 : null;
            return number + (az__suffixes[a] || az__suffixes[b] || az__suffixes[c]);
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : belarusian (be)
    //! author : Dmitry Demidov : https://github.com/demidov91
    //! author: Praleska: http://praleska.pro/
    //! Author : Menelion Elensúle : https://github.com/Oire

    function be__plural(word, num) {
        var forms = word.split('_');
        return num % 10 === 1 && num % 100 !== 11 ? forms[0] : (num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2]);
    }
    function be__relativeTimeWithPlural(number, withoutSuffix, key) {
        var format = {
            'mm': withoutSuffix ? 'хвіліна_хвіліны_хвілін' : 'хвіліну_хвіліны_хвілін',
            'hh': withoutSuffix ? 'гадзіна_гадзіны_гадзін' : 'гадзіну_гадзіны_гадзін',
            'dd': 'дзень_дні_дзён',
            'MM': 'месяц_месяцы_месяцаў',
            'yy': 'год_гады_гадоў'
        };
        if (key === 'm') {
            return withoutSuffix ? 'хвіліна' : 'хвіліну';
        }
        else if (key === 'h') {
            return withoutSuffix ? 'гадзіна' : 'гадзіну';
        }
        else {
            return number + ' ' + be__plural(format[key], +number);
        }
    }
    function be__monthsCaseReplace(m, format) {
        var months = {
            'nominative': 'студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань'.split('_'),
            'accusative': 'студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня'.split('_')
        },
        nounCase = (/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(format) ?
            'accusative' :
            'nominative';
        return months[nounCase][m.month()];
    }
    function be__weekdaysCaseReplace(m, format) {
        var weekdays = {
            'nominative': 'нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота'.split('_'),
            'accusative': 'нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу'.split('_')
        },
        nounCase = (/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/).test(format) ?
            'accusative' :
            'nominative';
        return weekdays[nounCase][m.day()];
    }

    var be = _moment__default.defineLocale('be', {
        months : be__monthsCaseReplace,
        monthsShort : 'студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж'.split('_'),
        weekdays : be__weekdaysCaseReplace,
        weekdaysShort : 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
        weekdaysMin : 'нд_пн_ат_ср_чц_пт_сб'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY г.',
            LLL : 'D MMMM YYYY г., HH:mm',
            LLLL : 'dddd, D MMMM YYYY г., HH:mm'
        },
        calendar : {
            sameDay: '[Сёння ў] LT',
            nextDay: '[Заўтра ў] LT',
            lastDay: '[Учора ў] LT',
            nextWeek: function () {
                return '[У] dddd [ў] LT';
            },
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 5:
                case 6:
                    return '[У мінулую] dddd [ў] LT';
                case 1:
                case 2:
                case 4:
                    return '[У мінулы] dddd [ў] LT';
                }
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'праз %s',
            past : '%s таму',
            s : 'некалькі секунд',
            m : be__relativeTimeWithPlural,
            mm : be__relativeTimeWithPlural,
            h : be__relativeTimeWithPlural,
            hh : be__relativeTimeWithPlural,
            d : 'дзень',
            dd : be__relativeTimeWithPlural,
            M : 'месяц',
            MM : be__relativeTimeWithPlural,
            y : 'год',
            yy : be__relativeTimeWithPlural
        },
        meridiemParse: /ночы|раніцы|дня|вечара/,
        isPM : function (input) {
            return /^(дня|вечара)$/.test(input);
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'ночы';
            } else if (hour < 12) {
                return 'раніцы';
            } else if (hour < 17) {
                return 'дня';
            } else {
                return 'вечара';
            }
        },
        ordinalParse: /\d{1,2}-(і|ы|га)/,
        ordinal: function (number, period) {
            switch (period) {
            case 'M':
            case 'd':
            case 'DDD':
            case 'w':
            case 'W':
                return (number % 10 === 2 || number % 10 === 3) && (number % 100 !== 12 && number % 100 !== 13) ? number + '-і' : number + '-ы';
            case 'D':
                return number + '-га';
            default:
                return number;
            }
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : bulgarian (bg)
    //! author : Krasen Borisov : https://github.com/kraz

    var bg = _moment__default.defineLocale('bg', {
        months : 'януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември'.split('_'),
        monthsShort : 'янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек'.split('_'),
        weekdays : 'неделя_понеделник_вторник_сряда_четвъртък_петък_събота'.split('_'),
        weekdaysShort : 'нед_пон_вто_сря_чет_пет_съб'.split('_'),
        weekdaysMin : 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'D.MM.YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY H:mm',
            LLLL : 'dddd, D MMMM YYYY H:mm'
        },
        calendar : {
            sameDay : '[Днес в] LT',
            nextDay : '[Утре в] LT',
            nextWeek : 'dddd [в] LT',
            lastDay : '[Вчера в] LT',
            lastWeek : function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 6:
                    return '[В изминалата] dddd [в] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[В изминалия] dddd [в] LT';
                }
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'след %s',
            past : 'преди %s',
            s : 'няколко секунди',
            m : 'минута',
            mm : '%d минути',
            h : 'час',
            hh : '%d часа',
            d : 'ден',
            dd : '%d дни',
            M : 'месец',
            MM : '%d месеца',
            y : 'година',
            yy : '%d години'
        },
        ordinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
        ordinal : function (number) {
            var lastDigit = number % 10,
                last2Digits = number % 100;
            if (number === 0) {
                return number + '-ев';
            } else if (last2Digits === 0) {
                return number + '-ен';
            } else if (last2Digits > 10 && last2Digits < 20) {
                return number + '-ти';
            } else if (lastDigit === 1) {
                return number + '-ви';
            } else if (lastDigit === 2) {
                return number + '-ри';
            } else if (lastDigit === 7 || lastDigit === 8) {
                return number + '-ми';
            } else {
                return number + '-ти';
            }
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Bengali (bn)
    //! author : Kaushik Gandhi : https://github.com/kaushikgandhi

    var bn__symbolMap = {
        '1': '১',
        '2': '২',
        '3': '৩',
        '4': '৪',
        '5': '৫',
        '6': '৬',
        '7': '৭',
        '8': '৮',
        '9': '৯',
        '0': '০'
    },
    bn__numberMap = {
        '১': '1',
        '২': '2',
        '৩': '3',
        '৪': '4',
        '৫': '5',
        '৬': '6',
        '৭': '7',
        '৮': '8',
        '৯': '9',
        '০': '0'
    };

    var bn = _moment__default.defineLocale('bn', {
        months : 'জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর'.split('_'),
        monthsShort : 'জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্'.split('_'),
        weekdays : 'রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার'.split('_'),
        weekdaysShort : 'রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি'.split('_'),
        weekdaysMin : 'রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি'.split('_'),
        longDateFormat : {
            LT : 'A h:mm সময়',
            LTS : 'A h:mm:ss সময়',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY, A h:mm সময়',
            LLLL : 'dddd, D MMMM YYYY, A h:mm সময়'
        },
        calendar : {
            sameDay : '[আজ] LT',
            nextDay : '[আগামীকাল] LT',
            nextWeek : 'dddd, LT',
            lastDay : '[গতকাল] LT',
            lastWeek : '[গত] dddd, LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s পরে',
            past : '%s আগে',
            s : 'কএক সেকেন্ড',
            m : 'এক মিনিট',
            mm : '%d মিনিট',
            h : 'এক ঘন্টা',
            hh : '%d ঘন্টা',
            d : 'এক দিন',
            dd : '%d দিন',
            M : 'এক মাস',
            MM : '%d মাস',
            y : 'এক বছর',
            yy : '%d বছর'
        },
        preparse: function (string) {
            return string.replace(/[১২৩৪৫৬৭৮৯০]/g, function (match) {
                return bn__numberMap[match];
            });
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return bn__symbolMap[match];
            });
        },
        meridiemParse: /রাত|সকাল|দুপুর|বিকেল|রাত/,
        isPM: function (input) {
            return /^(দুপুর|বিকেল|রাত)$/.test(input);
        },
        //Bengali is a vast language its spoken
        //in different forms in various parts of the world.
        //I have just generalized with most common one used
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'রাত';
            } else if (hour < 10) {
                return 'সকাল';
            } else if (hour < 17) {
                return 'দুপুর';
            } else if (hour < 20) {
                return 'বিকেল';
            } else {
                return 'রাত';
            }
        },
        week : {
            dow : 0, // Sunday is the first day of the week.
            doy : 6  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : tibetan (bo)
    //! author : Thupten N. Chakrishar : https://github.com/vajradog

    var bo__symbolMap = {
        '1': '༡',
        '2': '༢',
        '3': '༣',
        '4': '༤',
        '5': '༥',
        '6': '༦',
        '7': '༧',
        '8': '༨',
        '9': '༩',
        '0': '༠'
    },
    bo__numberMap = {
        '༡': '1',
        '༢': '2',
        '༣': '3',
        '༤': '4',
        '༥': '5',
        '༦': '6',
        '༧': '7',
        '༨': '8',
        '༩': '9',
        '༠': '0'
    };

    var bo = _moment__default.defineLocale('bo', {
        months : 'ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ'.split('_'),
        monthsShort : 'ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ'.split('_'),
        weekdays : 'གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་'.split('_'),
        weekdaysShort : 'ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་'.split('_'),
        weekdaysMin : 'ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་'.split('_'),
        longDateFormat : {
            LT : 'A h:mm',
            LTS : 'A h:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY, A h:mm',
            LLLL : 'dddd, D MMMM YYYY, A h:mm'
        },
        calendar : {
            sameDay : '[དི་རིང] LT',
            nextDay : '[སང་ཉིན] LT',
            nextWeek : '[བདུན་ཕྲག་རྗེས་མ], LT',
            lastDay : '[ཁ་སང] LT',
            lastWeek : '[བདུན་ཕྲག་མཐའ་མ] dddd, LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s ལ་',
            past : '%s སྔན་ལ',
            s : 'ལམ་སང',
            m : 'སྐར་མ་གཅིག',
            mm : '%d སྐར་མ',
            h : 'ཆུ་ཚོད་གཅིག',
            hh : '%d ཆུ་ཚོད',
            d : 'ཉིན་གཅིག',
            dd : '%d ཉིན་',
            M : 'ཟླ་བ་གཅིག',
            MM : '%d ཟླ་བ',
            y : 'ལོ་གཅིག',
            yy : '%d ལོ'
        },
        preparse: function (string) {
            return string.replace(/[༡༢༣༤༥༦༧༨༩༠]/g, function (match) {
                return bo__numberMap[match];
            });
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return bo__symbolMap[match];
            });
        },
        meridiemParse: /མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,
        isPM: function (input) {
            return /^(ཉིན་གུང|དགོང་དག|མཚན་མོ)$/.test(input);
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'མཚན་མོ';
            } else if (hour < 10) {
                return 'ཞོགས་ཀས';
            } else if (hour < 17) {
                return 'ཉིན་གུང';
            } else if (hour < 20) {
                return 'དགོང་དག';
            } else {
                return 'མཚན་མོ';
            }
        },
        week : {
            dow : 0, // Sunday is the first day of the week.
            doy : 6  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : breton (br)
    //! author : Jean-Baptiste Le Duigou : https://github.com/jbleduigou

    function relativeTimeWithMutation(number, withoutSuffix, key) {
        var format = {
            'mm': 'munutenn',
            'MM': 'miz',
            'dd': 'devezh'
        };
        return number + ' ' + mutation(format[key], number);
    }
    function specialMutationForYears(number) {
        switch (lastNumber(number)) {
        case 1:
        case 3:
        case 4:
        case 5:
        case 9:
            return number + ' bloaz';
        default:
            return number + ' vloaz';
        }
    }
    function lastNumber(number) {
        if (number > 9) {
            return lastNumber(number % 10);
        }
        return number;
    }
    function mutation(text, number) {
        if (number === 2) {
            return softMutation(text);
        }
        return text;
    }
    function softMutation(text) {
        var mutationTable = {
            'm': 'v',
            'b': 'v',
            'd': 'z'
        };
        if (mutationTable[text.charAt(0)] === undefined) {
            return text;
        }
        return mutationTable[text.charAt(0)] + text.substring(1);
    }

    var br = _moment__default.defineLocale('br', {
        months : 'Genver_C\'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu'.split('_'),
        monthsShort : 'Gen_C\'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker'.split('_'),
        weekdays : 'Sul_Lun_Meurzh_Merc\'her_Yaou_Gwener_Sadorn'.split('_'),
        weekdaysShort : 'Sul_Lun_Meu_Mer_Yao_Gwe_Sad'.split('_'),
        weekdaysMin : 'Su_Lu_Me_Mer_Ya_Gw_Sa'.split('_'),
        longDateFormat : {
            LT : 'h[e]mm A',
            LTS : 'h[e]mm:ss A',
            L : 'DD/MM/YYYY',
            LL : 'D [a viz] MMMM YYYY',
            LLL : 'D [a viz] MMMM YYYY h[e]mm A',
            LLLL : 'dddd, D [a viz] MMMM YYYY h[e]mm A'
        },
        calendar : {
            sameDay : '[Hiziv da] LT',
            nextDay : '[Warc\'hoazh da] LT',
            nextWeek : 'dddd [da] LT',
            lastDay : '[Dec\'h da] LT',
            lastWeek : 'dddd [paset da] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'a-benn %s',
            past : '%s \'zo',
            s : 'un nebeud segondennoù',
            m : 'ur vunutenn',
            mm : relativeTimeWithMutation,
            h : 'un eur',
            hh : '%d eur',
            d : 'un devezh',
            dd : relativeTimeWithMutation,
            M : 'ur miz',
            MM : relativeTimeWithMutation,
            y : 'ur bloaz',
            yy : specialMutationForYears
        },
        ordinalParse: /\d{1,2}(añ|vet)/,
        ordinal : function (number) {
            var output = (number === 1) ? 'añ' : 'vet';
            return number + output;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : bosnian (bs)
    //! author : Nedim Cholich : https://github.com/frontyard
    //! based on (hr) translation by Bojan Marković

    function bs__translate(number, withoutSuffix, key) {
        var result = number + ' ';
        switch (key) {
        case 'm':
            return withoutSuffix ? 'jedna minuta' : 'jedne minute';
        case 'mm':
            if (number === 1) {
                result += 'minuta';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'minute';
            } else {
                result += 'minuta';
            }
            return result;
        case 'h':
            return withoutSuffix ? 'jedan sat' : 'jednog sata';
        case 'hh':
            if (number === 1) {
                result += 'sat';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'sata';
            } else {
                result += 'sati';
            }
            return result;
        case 'dd':
            if (number === 1) {
                result += 'dan';
            } else {
                result += 'dana';
            }
            return result;
        case 'MM':
            if (number === 1) {
                result += 'mjesec';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'mjeseca';
            } else {
                result += 'mjeseci';
            }
            return result;
        case 'yy':
            if (number === 1) {
                result += 'godina';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'godine';
            } else {
                result += 'godina';
            }
            return result;
        }
    }

    var bs = _moment__default.defineLocale('bs', {
        months : 'januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar'.split('_'),
        monthsShort : 'jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.'.split('_'),
        weekdays : 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
        weekdaysShort : 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
        weekdaysMin : 'ne_po_ut_sr_če_pe_su'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD. MM. YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY H:mm',
            LLLL : 'dddd, D. MMMM YYYY H:mm'
        },
        calendar : {
            sameDay  : '[danas u] LT',
            nextDay  : '[sutra u] LT',
            nextWeek : function () {
                switch (this.day()) {
                case 0:
                    return '[u] [nedjelju] [u] LT';
                case 3:
                    return '[u] [srijedu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
                }
            },
            lastDay  : '[jučer u] LT',
            lastWeek : function () {
                switch (this.day()) {
                case 0:
                case 3:
                    return '[prošlu] dddd [u] LT';
                case 6:
                    return '[prošle] [subote] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[prošli] dddd [u] LT';
                }
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'za %s',
            past   : 'prije %s',
            s      : 'par sekundi',
            m      : bs__translate,
            mm     : bs__translate,
            h      : bs__translate,
            hh     : bs__translate,
            d      : 'dan',
            dd     : bs__translate,
            M      : 'mjesec',
            MM     : bs__translate,
            y      : 'godinu',
            yy     : bs__translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : catalan (ca)
    //! author : Juan G. Hurtado : https://github.com/juanghurtado

    var ca = _moment__default.defineLocale('ca', {
        months : 'gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre'.split('_'),
        monthsShort : 'gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.'.split('_'),
        weekdays : 'diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte'.split('_'),
        weekdaysShort : 'dg._dl._dt._dc._dj._dv._ds.'.split('_'),
        weekdaysMin : 'Dg_Dl_Dt_Dc_Dj_Dv_Ds'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'LT:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY H:mm',
            LLLL : 'dddd D MMMM YYYY H:mm'
        },
        calendar : {
            sameDay : function () {
                return '[avui a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
            },
            nextDay : function () {
                return '[demà a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
            },
            nextWeek : function () {
                return 'dddd [a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
            },
            lastDay : function () {
                return '[ahir a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
            },
            lastWeek : function () {
                return '[el] dddd [passat a ' + ((this.hours() !== 1) ? 'les' : 'la') + '] LT';
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'en %s',
            past : 'fa %s',
            s : 'uns segons',
            m : 'un minut',
            mm : '%d minuts',
            h : 'una hora',
            hh : '%d hores',
            d : 'un dia',
            dd : '%d dies',
            M : 'un mes',
            MM : '%d mesos',
            y : 'un any',
            yy : '%d anys'
        },
        ordinalParse: /\d{1,2}(r|n|t|è|a)/,
        ordinal : function (number, period) {
            var output = (number === 1) ? 'r' :
                (number === 2) ? 'n' :
                (number === 3) ? 'r' :
                (number === 4) ? 't' : 'è';
            if (period === 'w' || period === 'W') {
                output = 'a';
            }
            return number + output;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : czech (cs)
    //! author : petrbela : https://github.com/petrbela

    var cs__months = 'leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec'.split('_'),
        cs__monthsShort = 'led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro'.split('_');
    function cs__plural(n) {
        return (n > 1) && (n < 5) && (~~(n / 10) !== 1);
    }
    function cs__translate(number, withoutSuffix, key, isFuture) {
        var result = number + ' ';
        switch (key) {
        case 's':  // a few seconds / in a few seconds / a few seconds ago
            return (withoutSuffix || isFuture) ? 'pár sekund' : 'pár sekundami';
        case 'm':  // a minute / in a minute / a minute ago
            return withoutSuffix ? 'minuta' : (isFuture ? 'minutu' : 'minutou');
        case 'mm': // 9 minutes / in 9 minutes / 9 minutes ago
            if (withoutSuffix || isFuture) {
                return result + (cs__plural(number) ? 'minuty' : 'minut');
            } else {
                return result + 'minutami';
            }
            break;
        case 'h':  // an hour / in an hour / an hour ago
            return withoutSuffix ? 'hodina' : (isFuture ? 'hodinu' : 'hodinou');
        case 'hh': // 9 hours / in 9 hours / 9 hours ago
            if (withoutSuffix || isFuture) {
                return result + (cs__plural(number) ? 'hodiny' : 'hodin');
            } else {
                return result + 'hodinami';
            }
            break;
        case 'd':  // a day / in a day / a day ago
            return (withoutSuffix || isFuture) ? 'den' : 'dnem';
        case 'dd': // 9 days / in 9 days / 9 days ago
            if (withoutSuffix || isFuture) {
                return result + (cs__plural(number) ? 'dny' : 'dní');
            } else {
                return result + 'dny';
            }
            break;
        case 'M':  // a month / in a month / a month ago
            return (withoutSuffix || isFuture) ? 'měsíc' : 'měsícem';
        case 'MM': // 9 months / in 9 months / 9 months ago
            if (withoutSuffix || isFuture) {
                return result + (cs__plural(number) ? 'měsíce' : 'měsíců');
            } else {
                return result + 'měsíci';
            }
            break;
        case 'y':  // a year / in a year / a year ago
            return (withoutSuffix || isFuture) ? 'rok' : 'rokem';
        case 'yy': // 9 years / in 9 years / 9 years ago
            if (withoutSuffix || isFuture) {
                return result + (cs__plural(number) ? 'roky' : 'let');
            } else {
                return result + 'lety';
            }
            break;
        }
    }

    var cs = _moment__default.defineLocale('cs', {
        months : cs__months,
        monthsShort : cs__monthsShort,
        monthsParse : (function (months, monthsShort) {
            var i, _monthsParse = [];
            for (i = 0; i < 12; i++) {
                // use custom parser to solve problem with July (červenec)
                _monthsParse[i] = new RegExp('^' + months[i] + '$|^' + monthsShort[i] + '$', 'i');
            }
            return _monthsParse;
        }(cs__months, cs__monthsShort)),
        weekdays : 'neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota'.split('_'),
        weekdaysShort : 'ne_po_út_st_čt_pá_so'.split('_'),
        weekdaysMin : 'ne_po_út_st_čt_pá_so'.split('_'),
        longDateFormat : {
            LT: 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY H:mm',
            LLLL : 'dddd D. MMMM YYYY H:mm'
        },
        calendar : {
            sameDay: '[dnes v] LT',
            nextDay: '[zítra v] LT',
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[v neděli v] LT';
                case 1:
                case 2:
                    return '[v] dddd [v] LT';
                case 3:
                    return '[ve středu v] LT';
                case 4:
                    return '[ve čtvrtek v] LT';
                case 5:
                    return '[v pátek v] LT';
                case 6:
                    return '[v sobotu v] LT';
                }
            },
            lastDay: '[včera v] LT',
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[minulou neděli v] LT';
                case 1:
                case 2:
                    return '[minulé] dddd [v] LT';
                case 3:
                    return '[minulou středu v] LT';
                case 4:
                case 5:
                    return '[minulý] dddd [v] LT';
                case 6:
                    return '[minulou sobotu v] LT';
                }
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'za %s',
            past : 'před %s',
            s : cs__translate,
            m : cs__translate,
            mm : cs__translate,
            h : cs__translate,
            hh : cs__translate,
            d : cs__translate,
            dd : cs__translate,
            M : cs__translate,
            MM : cs__translate,
            y : cs__translate,
            yy : cs__translate
        },
        ordinalParse : /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : chuvash (cv)
    //! author : Anatoly Mironov : https://github.com/mirontoli

    var cv = _moment__default.defineLocale('cv', {
        months : 'кӑрлач_нарӑс_пуш_ака_май_ҫӗртме_утӑ_ҫурла_авӑн_юпа_чӳк_раштав'.split('_'),
        monthsShort : 'кӑр_нар_пуш_ака_май_ҫӗр_утӑ_ҫур_авн_юпа_чӳк_раш'.split('_'),
        weekdays : 'вырсарникун_тунтикун_ытларикун_юнкун_кӗҫнерникун_эрнекун_шӑматкун'.split('_'),
        weekdaysShort : 'выр_тун_ытл_юн_кӗҫ_эрн_шӑм'.split('_'),
        weekdaysMin : 'вр_тн_ыт_юн_кҫ_эр_шм'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD-MM-YYYY',
            LL : 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ]',
            LLL : 'YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm',
            LLLL : 'dddd, YYYY [ҫулхи] MMMM [уйӑхӗн] D[-мӗшӗ], HH:mm'
        },
        calendar : {
            sameDay: '[Паян] LT [сехетре]',
            nextDay: '[Ыран] LT [сехетре]',
            lastDay: '[Ӗнер] LT [сехетре]',
            nextWeek: '[Ҫитес] dddd LT [сехетре]',
            lastWeek: '[Иртнӗ] dddd LT [сехетре]',
            sameElse: 'L'
        },
        relativeTime : {
            future : function (output) {
                var affix = /сехет$/i.exec(output) ? 'рен' : /ҫул$/i.exec(output) ? 'тан' : 'ран';
                return output + affix;
            },
            past : '%s каялла',
            s : 'пӗр-ик ҫеккунт',
            m : 'пӗр минут',
            mm : '%d минут',
            h : 'пӗр сехет',
            hh : '%d сехет',
            d : 'пӗр кун',
            dd : '%d кун',
            M : 'пӗр уйӑх',
            MM : '%d уйӑх',
            y : 'пӗр ҫул',
            yy : '%d ҫул'
        },
        ordinalParse: /\d{1,2}-мӗш/,
        ordinal : '%d-мӗш',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Welsh (cy)
    //! author : Robert Allen

    var cy = _moment__default.defineLocale('cy', {
        months: 'Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr'.split('_'),
        monthsShort: 'Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag'.split('_'),
        weekdays: 'Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn'.split('_'),
        weekdaysShort: 'Sul_Llun_Maw_Mer_Iau_Gwe_Sad'.split('_'),
        weekdaysMin: 'Su_Ll_Ma_Me_Ia_Gw_Sa'.split('_'),
        // time formats are the same as en-gb
        longDateFormat: {
            LT: 'HH:mm',
            LTS : 'HH:mm:ss',
            L: 'DD/MM/YYYY',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY HH:mm',
            LLLL: 'dddd, D MMMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[Heddiw am] LT',
            nextDay: '[Yfory am] LT',
            nextWeek: 'dddd [am] LT',
            lastDay: '[Ddoe am] LT',
            lastWeek: 'dddd [diwethaf am] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'mewn %s',
            past: '%s yn ôl',
            s: 'ychydig eiliadau',
            m: 'munud',
            mm: '%d munud',
            h: 'awr',
            hh: '%d awr',
            d: 'diwrnod',
            dd: '%d diwrnod',
            M: 'mis',
            MM: '%d mis',
            y: 'blwyddyn',
            yy: '%d flynedd'
        },
        ordinalParse: /\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,
        // traditional ordinal numbers above 31 are not commonly used in colloquial Welsh
        ordinal: function (number) {
            var b = number,
                output = '',
                lookup = [
                    '', 'af', 'il', 'ydd', 'ydd', 'ed', 'ed', 'ed', 'fed', 'fed', 'fed', // 1af to 10fed
                    'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'eg', 'fed', 'eg', 'fed' // 11eg to 20fed
                ];
            if (b > 20) {
                if (b === 40 || b === 50 || b === 60 || b === 80 || b === 100) {
                    output = 'fed'; // not 30ain, 70ain or 90ain
                } else {
                    output = 'ain';
                }
            } else if (b > 0) {
                output = lookup[b];
            }
            return number + output;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : danish (da)
    //! author : Ulrik Nielsen : https://github.com/mrbase

    var da = _moment__default.defineLocale('da', {
        months : 'januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december'.split('_'),
        monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
        weekdays : 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
        weekdaysShort : 'søn_man_tir_ons_tor_fre_lør'.split('_'),
        weekdaysMin : 'sø_ma_ti_on_to_fr_lø'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY HH:mm',
            LLLL : 'dddd [d.] D. MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay : '[I dag kl.] LT',
            nextDay : '[I morgen kl.] LT',
            nextWeek : 'dddd [kl.] LT',
            lastDay : '[I går kl.] LT',
            lastWeek : '[sidste] dddd [kl] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'om %s',
            past : '%s siden',
            s : 'få sekunder',
            m : 'et minut',
            mm : '%d minutter',
            h : 'en time',
            hh : '%d timer',
            d : 'en dag',
            dd : '%d dage',
            M : 'en måned',
            MM : '%d måneder',
            y : 'et år',
            yy : '%d år'
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : austrian german (de-at)
    //! author : lluchs : https://github.com/lluchs
    //! author: Menelion Elensúle: https://github.com/Oire
    //! author : Martin Groller : https://github.com/MadMG

    function de_at__processRelativeTime(number, withoutSuffix, key, isFuture) {
        var format = {
            'm': ['eine Minute', 'einer Minute'],
            'h': ['eine Stunde', 'einer Stunde'],
            'd': ['ein Tag', 'einem Tag'],
            'dd': [number + ' Tage', number + ' Tagen'],
            'M': ['ein Monat', 'einem Monat'],
            'MM': [number + ' Monate', number + ' Monaten'],
            'y': ['ein Jahr', 'einem Jahr'],
            'yy': [number + ' Jahre', number + ' Jahren']
        };
        return withoutSuffix ? format[key][0] : format[key][1];
    }

    var de_at = _moment__default.defineLocale('de-at', {
        months : 'Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
        monthsShort : 'Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),
        weekdays : 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
        weekdaysShort : 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
        weekdaysMin : 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
        longDateFormat : {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY HH:mm',
            LLLL : 'dddd, D. MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Heute um] LT [Uhr]',
            sameElse: 'L',
            nextDay: '[Morgen um] LT [Uhr]',
            nextWeek: 'dddd [um] LT [Uhr]',
            lastDay: '[Gestern um] LT [Uhr]',
            lastWeek: '[letzten] dddd [um] LT [Uhr]'
        },
        relativeTime : {
            future : 'in %s',
            past : 'vor %s',
            s : 'ein paar Sekunden',
            m : de_at__processRelativeTime,
            mm : '%d Minuten',
            h : de_at__processRelativeTime,
            hh : '%d Stunden',
            d : de_at__processRelativeTime,
            dd : de_at__processRelativeTime,
            M : de_at__processRelativeTime,
            MM : de_at__processRelativeTime,
            y : de_at__processRelativeTime,
            yy : de_at__processRelativeTime
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : german (de)
    //! author : lluchs : https://github.com/lluchs
    //! author: Menelion Elensúle: https://github.com/Oire

    function de__processRelativeTime(number, withoutSuffix, key, isFuture) {
        var format = {
            'm': ['eine Minute', 'einer Minute'],
            'h': ['eine Stunde', 'einer Stunde'],
            'd': ['ein Tag', 'einem Tag'],
            'dd': [number + ' Tage', number + ' Tagen'],
            'M': ['ein Monat', 'einem Monat'],
            'MM': [number + ' Monate', number + ' Monaten'],
            'y': ['ein Jahr', 'einem Jahr'],
            'yy': [number + ' Jahre', number + ' Jahren']
        };
        return withoutSuffix ? format[key][0] : format[key][1];
    }

    var de = _moment__default.defineLocale('de', {
        months : 'Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
        monthsShort : 'Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),
        weekdays : 'Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag'.split('_'),
        weekdaysShort : 'So._Mo._Di._Mi._Do._Fr._Sa.'.split('_'),
        weekdaysMin : 'So_Mo_Di_Mi_Do_Fr_Sa'.split('_'),
        longDateFormat : {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY HH:mm',
            LLLL : 'dddd, D. MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Heute um] LT [Uhr]',
            sameElse: 'L',
            nextDay: '[Morgen um] LT [Uhr]',
            nextWeek: 'dddd [um] LT [Uhr]',
            lastDay: '[Gestern um] LT [Uhr]',
            lastWeek: '[letzten] dddd [um] LT [Uhr]'
        },
        relativeTime : {
            future : 'in %s',
            past : 'vor %s',
            s : 'ein paar Sekunden',
            m : de__processRelativeTime,
            mm : '%d Minuten',
            h : de__processRelativeTime,
            hh : '%d Stunden',
            d : de__processRelativeTime,
            dd : de__processRelativeTime,
            M : de__processRelativeTime,
            MM : de__processRelativeTime,
            y : de__processRelativeTime,
            yy : de__processRelativeTime
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : modern greek (el)
    //! author : Aggelos Karalias : https://github.com/mehiel

    var el = _moment__default.defineLocale('el', {
        monthsNominativeEl : 'Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος'.split('_'),
        monthsGenitiveEl : 'Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου'.split('_'),
        months : function (momentToFormat, format) {
            if (/D/.test(format.substring(0, format.indexOf('MMMM')))) { // if there is a day number before 'MMMM'
                return this._monthsGenitiveEl[momentToFormat.month()];
            } else {
                return this._monthsNominativeEl[momentToFormat.month()];
            }
        },
        monthsShort : 'Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ'.split('_'),
        weekdays : 'Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο'.split('_'),
        weekdaysShort : 'Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ'.split('_'),
        weekdaysMin : 'Κυ_Δε_Τρ_Τε_Πε_Πα_Σα'.split('_'),
        meridiem : function (hours, minutes, isLower) {
            if (hours > 11) {
                return isLower ? 'μμ' : 'ΜΜ';
            } else {
                return isLower ? 'πμ' : 'ΠΜ';
            }
        },
        isPM : function (input) {
            return ((input + '').toLowerCase()[0] === 'μ');
        },
        meridiemParse : /[ΠΜ]\.?Μ?\.?/i,
        longDateFormat : {
            LT : 'h:mm A',
            LTS : 'h:mm:ss A',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY h:mm A',
            LLLL : 'dddd, D MMMM YYYY h:mm A'
        },
        calendarEl : {
            sameDay : '[Σήμερα {}] LT',
            nextDay : '[Αύριο {}] LT',
            nextWeek : 'dddd [{}] LT',
            lastDay : '[Χθες {}] LT',
            lastWeek : function () {
                switch (this.day()) {
                    case 6:
                        return '[το προηγούμενο] dddd [{}] LT';
                    default:
                        return '[την προηγούμενη] dddd [{}] LT';
                }
            },
            sameElse : 'L'
        },
        calendar : function (key, mom) {
            var output = this._calendarEl[key],
                hours = mom && mom.hours();
            if (typeof output === 'function') {
                output = output.apply(mom);
            }
            return output.replace('{}', (hours % 12 === 1 ? 'στη' : 'στις'));
        },
        relativeTime : {
            future : 'σε %s',
            past : '%s πριν',
            s : 'λίγα δευτερόλεπτα',
            m : 'ένα λεπτό',
            mm : '%d λεπτά',
            h : 'μία ώρα',
            hh : '%d ώρες',
            d : 'μία μέρα',
            dd : '%d μέρες',
            M : 'ένας μήνας',
            MM : '%d μήνες',
            y : 'ένας χρόνος',
            yy : '%d χρόνια'
        },
        ordinalParse: /\d{1,2}η/,
        ordinal: '%dη',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : australian english (en-au)

    var en_au = _moment__default.defineLocale('en-au', {
        months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
        monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
        weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
        weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
        weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
        longDateFormat : {
            LT : 'h:mm A',
            LTS : 'h:mm:ss A',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY h:mm A',
            LLLL : 'dddd, D MMMM YYYY h:mm A'
        },
        calendar : {
            sameDay : '[Today at] LT',
            nextDay : '[Tomorrow at] LT',
            nextWeek : 'dddd [at] LT',
            lastDay : '[Yesterday at] LT',
            lastWeek : '[Last] dddd [at] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'in %s',
            past : '%s ago',
            s : 'a few seconds',
            m : 'a minute',
            mm : '%d minutes',
            h : 'an hour',
            hh : '%d hours',
            d : 'a day',
            dd : '%d days',
            M : 'a month',
            MM : '%d months',
            y : 'a year',
            yy : '%d years'
        },
        ordinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (~~(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : canadian english (en-ca)
    //! author : Jonathan Abourbih : https://github.com/jonbca

    var en_ca = _moment__default.defineLocale('en-ca', {
        months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
        monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
        weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
        weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
        weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
        longDateFormat : {
            LT : 'h:mm A',
            LTS : 'h:mm:ss A',
            L : 'YYYY-MM-DD',
            LL : 'D MMMM, YYYY',
            LLL : 'D MMMM, YYYY h:mm A',
            LLLL : 'dddd, D MMMM, YYYY h:mm A'
        },
        calendar : {
            sameDay : '[Today at] LT',
            nextDay : '[Tomorrow at] LT',
            nextWeek : 'dddd [at] LT',
            lastDay : '[Yesterday at] LT',
            lastWeek : '[Last] dddd [at] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'in %s',
            past : '%s ago',
            s : 'a few seconds',
            m : 'a minute',
            mm : '%d minutes',
            h : 'an hour',
            hh : '%d hours',
            d : 'a day',
            dd : '%d days',
            M : 'a month',
            MM : '%d months',
            y : 'a year',
            yy : '%d years'
        },
        ordinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (~~(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        }
    });

    //! moment.js locale configuration
    //! locale : great britain english (en-gb)
    //! author : Chris Gedrim : https://github.com/chrisgedrim

    var en_gb = _moment__default.defineLocale('en-gb', {
        months : 'January_February_March_April_May_June_July_August_September_October_November_December'.split('_'),
        monthsShort : 'Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec'.split('_'),
        weekdays : 'Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday'.split('_'),
        weekdaysShort : 'Sun_Mon_Tue_Wed_Thu_Fri_Sat'.split('_'),
        weekdaysMin : 'Su_Mo_Tu_We_Th_Fr_Sa'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay : '[Today at] LT',
            nextDay : '[Tomorrow at] LT',
            nextWeek : 'dddd [at] LT',
            lastDay : '[Yesterday at] LT',
            lastWeek : '[Last] dddd [at] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'in %s',
            past : '%s ago',
            s : 'a few seconds',
            m : 'a minute',
            mm : '%d minutes',
            h : 'an hour',
            hh : '%d hours',
            d : 'a day',
            dd : '%d days',
            M : 'a month',
            MM : '%d months',
            y : 'a year',
            yy : '%d years'
        },
        ordinalParse: /\d{1,2}(st|nd|rd|th)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (~~(number % 100 / 10) === 1) ? 'th' :
                (b === 1) ? 'st' :
                (b === 2) ? 'nd' :
                (b === 3) ? 'rd' : 'th';
            return number + output;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : esperanto (eo)
    //! author : Colin Dean : https://github.com/colindean
    //! komento: Mi estas malcerta se mi korekte traktis akuzativojn en tiu traduko.
    //!          Se ne, bonvolu korekti kaj avizi min por ke mi povas lerni!

    var eo = _moment__default.defineLocale('eo', {
        months : 'januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro'.split('_'),
        monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec'.split('_'),
        weekdays : 'Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato'.split('_'),
        weekdaysShort : 'Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab'.split('_'),
        weekdaysMin : 'Di_Lu_Ma_Me_Ĵa_Ve_Sa'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'YYYY-MM-DD',
            LL : 'D[-an de] MMMM, YYYY',
            LLL : 'D[-an de] MMMM, YYYY HH:mm',
            LLLL : 'dddd, [la] D[-an de] MMMM, YYYY HH:mm'
        },
        meridiemParse: /[ap]\.t\.m/i,
        isPM: function (input) {
            return input.charAt(0).toLowerCase() === 'p';
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours > 11) {
                return isLower ? 'p.t.m.' : 'P.T.M.';
            } else {
                return isLower ? 'a.t.m.' : 'A.T.M.';
            }
        },
        calendar : {
            sameDay : '[Hodiaŭ je] LT',
            nextDay : '[Morgaŭ je] LT',
            nextWeek : 'dddd [je] LT',
            lastDay : '[Hieraŭ je] LT',
            lastWeek : '[pasinta] dddd [je] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'je %s',
            past : 'antaŭ %s',
            s : 'sekundoj',
            m : 'minuto',
            mm : '%d minutoj',
            h : 'horo',
            hh : '%d horoj',
            d : 'tago',//ne 'diurno', ĉar estas uzita por proksimumo
            dd : '%d tagoj',
            M : 'monato',
            MM : '%d monatoj',
            y : 'jaro',
            yy : '%d jaroj'
        },
        ordinalParse: /\d{1,2}a/,
        ordinal : '%da',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : spanish (es)
    //! author : Julio Napurí : https://github.com/julionc

    var monthsShortDot = 'Ene._Feb._Mar._Abr._May._Jun._Jul._Ago._Sep._Oct._Nov._Dic.'.split('_'),
        es__monthsShort = 'Ene_Feb_Mar_Abr_May_Jun_Jul_Ago_Sep_Oct_Nov_Dic'.split('_');

    var es = _moment__default.defineLocale('es', {
        months : 'Enero_Febrero_Marzo_Abril_Mayo_Junio_Julio_Agosto_Septiembre_Octubre_Noviembre_Diciembre'.split('_'),
        monthsShort : function (m, format) {
            if (/-MMM-/.test(format)) {
                return es__monthsShort[m.month()];
            } else {
                return monthsShortDot[m.month()];
            }
        },
        weekdays : 'Domingo_Lunes_Martes_Miércoles_Jueves_Viernes_Sábado'.split('_'),
        weekdaysShort : 'Dom._Lun._Mar._Mié._Jue._Vie._Sáb.'.split('_'),
        weekdaysMin : 'Do_Lu_Ma_Mi_Ju_Vi_Sá'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D [de] MMMM [de] YYYY',
            LLL : 'D [de] MMMM [de] YYYY H:mm',
            LLLL : 'dddd, D [de] MMMM [de] YYYY H:mm'
        },
        calendar : {
            sameDay : function () {
                return '[hoy a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
            },
            nextDay : function () {
                return '[mañana a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
            },
            nextWeek : function () {
                return 'dddd [a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
            },
            lastDay : function () {
                return '[ayer a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
            },
            lastWeek : function () {
                return '[el] dddd [pasado a la' + ((this.hours() !== 1) ? 's' : '') + '] LT';
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'en %s',
            past : 'hace %s',
            s : 'unos segundos',
            m : 'un minuto',
            mm : '%d minutos',
            h : 'una hora',
            hh : '%d horas',
            d : 'un día',
            dd : '%d días',
            M : 'un mes',
            MM : '%d meses',
            y : 'un año',
            yy : '%d años'
        },
        ordinalParse : /\d{1,2}º/,
        ordinal : '%dº',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : estonian (et)
    //! author : Henry Kehlmann : https://github.com/madhenry
    //! improvements : Illimar Tambek : https://github.com/ragulka

    function et__processRelativeTime(number, withoutSuffix, key, isFuture) {
        var format = {
            's' : ['mõne sekundi', 'mõni sekund', 'paar sekundit'],
            'm' : ['ühe minuti', 'üks minut'],
            'mm': [number + ' minuti', number + ' minutit'],
            'h' : ['ühe tunni', 'tund aega', 'üks tund'],
            'hh': [number + ' tunni', number + ' tundi'],
            'd' : ['ühe päeva', 'üks päev'],
            'M' : ['kuu aja', 'kuu aega', 'üks kuu'],
            'MM': [number + ' kuu', number + ' kuud'],
            'y' : ['ühe aasta', 'aasta', 'üks aasta'],
            'yy': [number + ' aasta', number + ' aastat']
        };
        if (withoutSuffix) {
            return format[key][2] ? format[key][2] : format[key][1];
        }
        return isFuture ? format[key][0] : format[key][1];
    }

    var et = _moment__default.defineLocale('et', {
        months        : 'jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember'.split('_'),
        monthsShort   : 'jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets'.split('_'),
        weekdays      : 'pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev'.split('_'),
        weekdaysShort : 'P_E_T_K_N_R_L'.split('_'),
        weekdaysMin   : 'P_E_T_K_N_R_L'.split('_'),
        longDateFormat : {
            LT   : 'H:mm',
            LTS : 'H:mm:ss',
            L    : 'DD.MM.YYYY',
            LL   : 'D. MMMM YYYY',
            LLL  : 'D. MMMM YYYY H:mm',
            LLLL : 'dddd, D. MMMM YYYY H:mm'
        },
        calendar : {
            sameDay  : '[Täna,] LT',
            nextDay  : '[Homme,] LT',
            nextWeek : '[Järgmine] dddd LT',
            lastDay  : '[Eile,] LT',
            lastWeek : '[Eelmine] dddd LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s pärast',
            past   : '%s tagasi',
            s      : et__processRelativeTime,
            m      : et__processRelativeTime,
            mm     : et__processRelativeTime,
            h      : et__processRelativeTime,
            hh     : et__processRelativeTime,
            d      : et__processRelativeTime,
            dd     : '%d päeva',
            M      : et__processRelativeTime,
            MM     : et__processRelativeTime,
            y      : et__processRelativeTime,
            yy     : et__processRelativeTime
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : euskara (eu)
    //! author : Eneko Illarramendi : https://github.com/eillarra

    var eu = _moment__default.defineLocale('eu', {
        months : 'urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua'.split('_'),
        monthsShort : 'urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.'.split('_'),
        weekdays : 'igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata'.split('_'),
        weekdaysShort : 'ig._al._ar._az._og._ol._lr.'.split('_'),
        weekdaysMin : 'ig_al_ar_az_og_ol_lr'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'YYYY-MM-DD',
            LL : 'YYYY[ko] MMMM[ren] D[a]',
            LLL : 'YYYY[ko] MMMM[ren] D[a] HH:mm',
            LLLL : 'dddd, YYYY[ko] MMMM[ren] D[a] HH:mm',
            l : 'YYYY-M-D',
            ll : 'YYYY[ko] MMM D[a]',
            lll : 'YYYY[ko] MMM D[a] HH:mm',
            llll : 'ddd, YYYY[ko] MMM D[a] HH:mm'
        },
        calendar : {
            sameDay : '[gaur] LT[etan]',
            nextDay : '[bihar] LT[etan]',
            nextWeek : 'dddd LT[etan]',
            lastDay : '[atzo] LT[etan]',
            lastWeek : '[aurreko] dddd LT[etan]',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s barru',
            past : 'duela %s',
            s : 'segundo batzuk',
            m : 'minutu bat',
            mm : '%d minutu',
            h : 'ordu bat',
            hh : '%d ordu',
            d : 'egun bat',
            dd : '%d egun',
            M : 'hilabete bat',
            MM : '%d hilabete',
            y : 'urte bat',
            yy : '%d urte'
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Persian (fa)
    //! author : Ebrahim Byagowi : https://github.com/ebraminio

    var fa__symbolMap = {
        '1': '۱',
        '2': '۲',
        '3': '۳',
        '4': '۴',
        '5': '۵',
        '6': '۶',
        '7': '۷',
        '8': '۸',
        '9': '۹',
        '0': '۰'
    }, fa__numberMap = {
        '۱': '1',
        '۲': '2',
        '۳': '3',
        '۴': '4',
        '۵': '5',
        '۶': '6',
        '۷': '7',
        '۸': '8',
        '۹': '9',
        '۰': '0'
    };

    var fa = _moment__default.defineLocale('fa', {
        months : 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
        monthsShort : 'ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر'.split('_'),
        weekdays : 'یک\u200cشنبه_دوشنبه_سه\u200cشنبه_چهارشنبه_پنج\u200cشنبه_جمعه_شنبه'.split('_'),
        weekdaysShort : 'یک\u200cشنبه_دوشنبه_سه\u200cشنبه_چهارشنبه_پنج\u200cشنبه_جمعه_شنبه'.split('_'),
        weekdaysMin : 'ی_د_س_چ_پ_ج_ش'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        meridiemParse: /قبل از ظهر|بعد از ظهر/,
        isPM: function (input) {
            return /بعد از ظهر/.test(input);
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 12) {
                return 'قبل از ظهر';
            } else {
                return 'بعد از ظهر';
            }
        },
        calendar : {
            sameDay : '[امروز ساعت] LT',
            nextDay : '[فردا ساعت] LT',
            nextWeek : 'dddd [ساعت] LT',
            lastDay : '[دیروز ساعت] LT',
            lastWeek : 'dddd [پیش] [ساعت] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'در %s',
            past : '%s پیش',
            s : 'چندین ثانیه',
            m : 'یک دقیقه',
            mm : '%d دقیقه',
            h : 'یک ساعت',
            hh : '%d ساعت',
            d : 'یک روز',
            dd : '%d روز',
            M : 'یک ماه',
            MM : '%d ماه',
            y : 'یک سال',
            yy : '%d سال'
        },
        preparse: function (string) {
            return string.replace(/[۰-۹]/g, function (match) {
                return fa__numberMap[match];
            }).replace(/،/g, ',');
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return fa__symbolMap[match];
            }).replace(/,/g, '،');
        },
        ordinalParse: /\d{1,2}م/,
        ordinal : '%dم',
        week : {
            dow : 6, // Saturday is the first day of the week.
            doy : 12 // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : finnish (fi)
    //! author : Tarmo Aidantausta : https://github.com/bleadof

    var numbersPast = 'nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän'.split(' '),
        numbersFuture = [
            'nolla', 'yhden', 'kahden', 'kolmen', 'neljän', 'viiden', 'kuuden',
            numbersPast[7], numbersPast[8], numbersPast[9]
        ];
    function fi__translate(number, withoutSuffix, key, isFuture) {
        var result = '';
        switch (key) {
        case 's':
            return isFuture ? 'muutaman sekunnin' : 'muutama sekunti';
        case 'm':
            return isFuture ? 'minuutin' : 'minuutti';
        case 'mm':
            result = isFuture ? 'minuutin' : 'minuuttia';
            break;
        case 'h':
            return isFuture ? 'tunnin' : 'tunti';
        case 'hh':
            result = isFuture ? 'tunnin' : 'tuntia';
            break;
        case 'd':
            return isFuture ? 'päivän' : 'päivä';
        case 'dd':
            result = isFuture ? 'päivän' : 'päivää';
            break;
        case 'M':
            return isFuture ? 'kuukauden' : 'kuukausi';
        case 'MM':
            result = isFuture ? 'kuukauden' : 'kuukautta';
            break;
        case 'y':
            return isFuture ? 'vuoden' : 'vuosi';
        case 'yy':
            result = isFuture ? 'vuoden' : 'vuotta';
            break;
        }
        result = verbalNumber(number, isFuture) + ' ' + result;
        return result;
    }
    function verbalNumber(number, isFuture) {
        return number < 10 ? (isFuture ? numbersFuture[number] : numbersPast[number]) : number;
    }

    var fi = _moment__default.defineLocale('fi', {
        months : 'tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu'.split('_'),
        monthsShort : 'tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu'.split('_'),
        weekdays : 'sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai'.split('_'),
        weekdaysShort : 'su_ma_ti_ke_to_pe_la'.split('_'),
        weekdaysMin : 'su_ma_ti_ke_to_pe_la'.split('_'),
        longDateFormat : {
            LT : 'HH.mm',
            LTS : 'HH.mm.ss',
            L : 'DD.MM.YYYY',
            LL : 'Do MMMM[ta] YYYY',
            LLL : 'Do MMMM[ta] YYYY, [klo] HH.mm',
            LLLL : 'dddd, Do MMMM[ta] YYYY, [klo] HH.mm',
            l : 'D.M.YYYY',
            ll : 'Do MMM YYYY',
            lll : 'Do MMM YYYY, [klo] HH.mm',
            llll : 'ddd, Do MMM YYYY, [klo] HH.mm'
        },
        calendar : {
            sameDay : '[tänään] [klo] LT',
            nextDay : '[huomenna] [klo] LT',
            nextWeek : 'dddd [klo] LT',
            lastDay : '[eilen] [klo] LT',
            lastWeek : '[viime] dddd[na] [klo] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s päästä',
            past : '%s sitten',
            s : fi__translate,
            m : fi__translate,
            mm : fi__translate,
            h : fi__translate,
            hh : fi__translate,
            d : fi__translate,
            dd : fi__translate,
            M : fi__translate,
            MM : fi__translate,
            y : fi__translate,
            yy : fi__translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : faroese (fo)
    //! author : Ragnar Johannesen : https://github.com/ragnar123

    var fo = _moment__default.defineLocale('fo', {
        months : 'januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
        monthsShort : 'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),
        weekdays : 'sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur'.split('_'),
        weekdaysShort : 'sun_mán_týs_mik_hós_frí_ley'.split('_'),
        weekdaysMin : 'su_má_tý_mi_hó_fr_le'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D. MMMM, YYYY HH:mm'
        },
        calendar : {
            sameDay : '[Í dag kl.] LT',
            nextDay : '[Í morgin kl.] LT',
            nextWeek : 'dddd [kl.] LT',
            lastDay : '[Í gjár kl.] LT',
            lastWeek : '[síðstu] dddd [kl] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'um %s',
            past : '%s síðani',
            s : 'fá sekund',
            m : 'ein minutt',
            mm : '%d minuttir',
            h : 'ein tími',
            hh : '%d tímar',
            d : 'ein dagur',
            dd : '%d dagar',
            M : 'ein mánaði',
            MM : '%d mánaðir',
            y : 'eitt ár',
            yy : '%d ár'
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : canadian french (fr-ca)
    //! author : Jonathan Abourbih : https://github.com/jonbca

    var fr_ca = _moment__default.defineLocale('fr-ca', {
        months : 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
        monthsShort : 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
        weekdays : 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
        weekdaysShort : 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
        weekdaysMin : 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'YYYY-MM-DD',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Aujourd\'hui à] LT',
            nextDay: '[Demain à] LT',
            nextWeek: 'dddd [à] LT',
            lastDay: '[Hier à] LT',
            lastWeek: 'dddd [dernier à] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'dans %s',
            past : 'il y a %s',
            s : 'quelques secondes',
            m : 'une minute',
            mm : '%d minutes',
            h : 'une heure',
            hh : '%d heures',
            d : 'un jour',
            dd : '%d jours',
            M : 'un mois',
            MM : '%d mois',
            y : 'un an',
            yy : '%d ans'
        },
        ordinalParse: /\d{1,2}(er|e)/,
        ordinal : function (number) {
            return number + (number === 1 ? 'er' : 'e');
        }
    });

    //! moment.js locale configuration
    //! locale : french (fr)
    //! author : John Fischer : https://github.com/jfroffice

    var fr = _moment__default.defineLocale('fr', {
        months : 'janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre'.split('_'),
        monthsShort : 'janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.'.split('_'),
        weekdays : 'dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi'.split('_'),
        weekdaysShort : 'dim._lun._mar._mer._jeu._ven._sam.'.split('_'),
        weekdaysMin : 'Di_Lu_Ma_Me_Je_Ve_Sa'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Aujourd\'hui à] LT',
            nextDay: '[Demain à] LT',
            nextWeek: 'dddd [à] LT',
            lastDay: '[Hier à] LT',
            lastWeek: 'dddd [dernier à] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'dans %s',
            past : 'il y a %s',
            s : 'quelques secondes',
            m : 'une minute',
            mm : '%d minutes',
            h : 'une heure',
            hh : '%d heures',
            d : 'un jour',
            dd : '%d jours',
            M : 'un mois',
            MM : '%d mois',
            y : 'un an',
            yy : '%d ans'
        },
        ordinalParse: /\d{1,2}(er|)/,
        ordinal : function (number) {
            return number + (number === 1 ? 'er' : '');
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : frisian (fy)
    //! author : Robin van der Vliet : https://github.com/robin0van0der0v

    var fy__monthsShortWithDots = 'jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.'.split('_'),
        fy__monthsShortWithoutDots = 'jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_');

    var fy = _moment__default.defineLocale('fy', {
        months : 'jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber'.split('_'),
        monthsShort : function (m, format) {
            if (/-MMM-/.test(format)) {
                return fy__monthsShortWithoutDots[m.month()];
            } else {
                return fy__monthsShortWithDots[m.month()];
            }
        },
        weekdays : 'snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon'.split('_'),
        weekdaysShort : 'si._mo._ti._wo._to._fr._so.'.split('_'),
        weekdaysMin : 'Si_Mo_Ti_Wo_To_Fr_So'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD-MM-YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[hjoed om] LT',
            nextDay: '[moarn om] LT',
            nextWeek: 'dddd [om] LT',
            lastDay: '[juster om] LT',
            lastWeek: '[ôfrûne] dddd [om] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'oer %s',
            past : '%s lyn',
            s : 'in pear sekonden',
            m : 'ien minút',
            mm : '%d minuten',
            h : 'ien oere',
            hh : '%d oeren',
            d : 'ien dei',
            dd : '%d dagen',
            M : 'ien moanne',
            MM : '%d moannen',
            y : 'ien jier',
            yy : '%d jierren'
        },
        ordinalParse: /\d{1,2}(ste|de)/,
        ordinal : function (number) {
            return number + ((number === 1 || number === 8 || number >= 20) ? 'ste' : 'de');
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : galician (gl)
    //! author : Juan G. Hurtado : https://github.com/juanghurtado

    var gl = _moment__default.defineLocale('gl', {
        months : 'Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro'.split('_'),
        monthsShort : 'Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.'.split('_'),
        weekdays : 'Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado'.split('_'),
        weekdaysShort : 'Dom._Lun._Mar._Mér._Xov._Ven._Sáb.'.split('_'),
        weekdaysMin : 'Do_Lu_Ma_Mé_Xo_Ve_Sá'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY H:mm',
            LLLL : 'dddd D MMMM YYYY H:mm'
        },
        calendar : {
            sameDay : function () {
                return '[hoxe ' + ((this.hours() !== 1) ? 'ás' : 'á') + '] LT';
            },
            nextDay : function () {
                return '[mañá ' + ((this.hours() !== 1) ? 'ás' : 'á') + '] LT';
            },
            nextWeek : function () {
                return 'dddd [' + ((this.hours() !== 1) ? 'ás' : 'a') + '] LT';
            },
            lastDay : function () {
                return '[onte ' + ((this.hours() !== 1) ? 'á' : 'a') + '] LT';
            },
            lastWeek : function () {
                return '[o] dddd [pasado ' + ((this.hours() !== 1) ? 'ás' : 'a') + '] LT';
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : function (str) {
                if (str === 'uns segundos') {
                    return 'nuns segundos';
                }
                return 'en ' + str;
            },
            past : 'hai %s',
            s : 'uns segundos',
            m : 'un minuto',
            mm : '%d minutos',
            h : 'unha hora',
            hh : '%d horas',
            d : 'un día',
            dd : '%d días',
            M : 'un mes',
            MM : '%d meses',
            y : 'un ano',
            yy : '%d anos'
        },
        ordinalParse : /\d{1,2}º/,
        ordinal : '%dº',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Hebrew (he)
    //! author : Tomer Cohen : https://github.com/tomer
    //! author : Moshe Simantov : https://github.com/DevelopmentIL
    //! author : Tal Ater : https://github.com/TalAter

    var he = _moment__default.defineLocale('he', {
        months : 'ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר'.split('_'),
        monthsShort : 'ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳'.split('_'),
        weekdays : 'ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת'.split('_'),
        weekdaysShort : 'א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳'.split('_'),
        weekdaysMin : 'א_ב_ג_ד_ה_ו_ש'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D [ב]MMMM YYYY',
            LLL : 'D [ב]MMMM YYYY HH:mm',
            LLLL : 'dddd, D [ב]MMMM YYYY HH:mm',
            l : 'D/M/YYYY',
            ll : 'D MMM YYYY',
            lll : 'D MMM YYYY HH:mm',
            llll : 'ddd, D MMM YYYY HH:mm'
        },
        calendar : {
            sameDay : '[היום ב־]LT',
            nextDay : '[מחר ב־]LT',
            nextWeek : 'dddd [בשעה] LT',
            lastDay : '[אתמול ב־]LT',
            lastWeek : '[ביום] dddd [האחרון בשעה] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'בעוד %s',
            past : 'לפני %s',
            s : 'מספר שניות',
            m : 'דקה',
            mm : '%d דקות',
            h : 'שעה',
            hh : function (number) {
                if (number === 2) {
                    return 'שעתיים';
                }
                return number + ' שעות';
            },
            d : 'יום',
            dd : function (number) {
                if (number === 2) {
                    return 'יומיים';
                }
                return number + ' ימים';
            },
            M : 'חודש',
            MM : function (number) {
                if (number === 2) {
                    return 'חודשיים';
                }
                return number + ' חודשים';
            },
            y : 'שנה',
            yy : function (number) {
                if (number === 2) {
                    return 'שנתיים';
                } else if (number % 10 === 0 && number !== 10) {
                    return number + ' שנה';
                }
                return number + ' שנים';
            }
        }
    });

    //! moment.js locale configuration
    //! locale : hindi (hi)
    //! author : Mayank Singhal : https://github.com/mayanksinghal

    var hi__symbolMap = {
        '1': '१',
        '2': '२',
        '3': '३',
        '4': '४',
        '5': '५',
        '6': '६',
        '7': '७',
        '8': '८',
        '9': '९',
        '0': '०'
    },
    hi__numberMap = {
        '१': '1',
        '२': '2',
        '३': '3',
        '४': '4',
        '५': '5',
        '६': '6',
        '७': '7',
        '८': '8',
        '९': '9',
        '०': '0'
    };

    var hi = _moment__default.defineLocale('hi', {
        months : 'जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर'.split('_'),
        monthsShort : 'जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.'.split('_'),
        weekdays : 'रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
        weekdaysShort : 'रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि'.split('_'),
        weekdaysMin : 'र_सो_मं_बु_गु_शु_श'.split('_'),
        longDateFormat : {
            LT : 'A h:mm बजे',
            LTS : 'A h:mm:ss बजे',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY, A h:mm बजे',
            LLLL : 'dddd, D MMMM YYYY, A h:mm बजे'
        },
        calendar : {
            sameDay : '[आज] LT',
            nextDay : '[कल] LT',
            nextWeek : 'dddd, LT',
            lastDay : '[कल] LT',
            lastWeek : '[पिछले] dddd, LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s में',
            past : '%s पहले',
            s : 'कुछ ही क्षण',
            m : 'एक मिनट',
            mm : '%d मिनट',
            h : 'एक घंटा',
            hh : '%d घंटे',
            d : 'एक दिन',
            dd : '%d दिन',
            M : 'एक महीने',
            MM : '%d महीने',
            y : 'एक वर्ष',
            yy : '%d वर्ष'
        },
        preparse: function (string) {
            return string.replace(/[१२३४५६७८९०]/g, function (match) {
                return hi__numberMap[match];
            });
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return hi__symbolMap[match];
            });
        },
        // Hindi notation for meridiems are quite fuzzy in practice. While there exists
        // a rigid notion of a 'Pahar' it is not used as rigidly in modern Hindi.
        meridiemParse: /रात|सुबह|दोपहर|शाम/,
        meridiemHour : function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'रात') {
                return hour < 4 ? hour : hour + 12;
            } else if (meridiem === 'सुबह') {
                return hour;
            } else if (meridiem === 'दोपहर') {
                return hour >= 10 ? hour : hour + 12;
            } else if (meridiem === 'शाम') {
                return hour + 12;
            }
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'रात';
            } else if (hour < 10) {
                return 'सुबह';
            } else if (hour < 17) {
                return 'दोपहर';
            } else if (hour < 20) {
                return 'शाम';
            } else {
                return 'रात';
            }
        },
        week : {
            dow : 0, // Sunday is the first day of the week.
            doy : 6  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : hrvatski (hr)
    //! author : Bojan Marković : https://github.com/bmarkovic

    function hr__translate(number, withoutSuffix, key) {
        var result = number + ' ';
        switch (key) {
        case 'm':
            return withoutSuffix ? 'jedna minuta' : 'jedne minute';
        case 'mm':
            if (number === 1) {
                result += 'minuta';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'minute';
            } else {
                result += 'minuta';
            }
            return result;
        case 'h':
            return withoutSuffix ? 'jedan sat' : 'jednog sata';
        case 'hh':
            if (number === 1) {
                result += 'sat';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'sata';
            } else {
                result += 'sati';
            }
            return result;
        case 'dd':
            if (number === 1) {
                result += 'dan';
            } else {
                result += 'dana';
            }
            return result;
        case 'MM':
            if (number === 1) {
                result += 'mjesec';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'mjeseca';
            } else {
                result += 'mjeseci';
            }
            return result;
        case 'yy':
            if (number === 1) {
                result += 'godina';
            } else if (number === 2 || number === 3 || number === 4) {
                result += 'godine';
            } else {
                result += 'godina';
            }
            return result;
        }
    }

    var hr = _moment__default.defineLocale('hr', {
        months : 'siječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac'.split('_'),
        monthsShort : 'sij._velj._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.'.split('_'),
        weekdays : 'nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota'.split('_'),
        weekdaysShort : 'ned._pon._uto._sri._čet._pet._sub.'.split('_'),
        weekdaysMin : 'ne_po_ut_sr_če_pe_su'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD. MM. YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY H:mm',
            LLLL : 'dddd, D. MMMM YYYY H:mm'
        },
        calendar : {
            sameDay  : '[danas u] LT',
            nextDay  : '[sutra u] LT',
            nextWeek : function () {
                switch (this.day()) {
                case 0:
                    return '[u] [nedjelju] [u] LT';
                case 3:
                    return '[u] [srijedu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
                }
            },
            lastDay  : '[jučer u] LT',
            lastWeek : function () {
                switch (this.day()) {
                case 0:
                case 3:
                    return '[prošlu] dddd [u] LT';
                case 6:
                    return '[prošle] [subote] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[prošli] dddd [u] LT';
                }
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'za %s',
            past   : 'prije %s',
            s      : 'par sekundi',
            m      : hr__translate,
            mm     : hr__translate,
            h      : hr__translate,
            hh     : hr__translate,
            d      : 'dan',
            dd     : hr__translate,
            M      : 'mjesec',
            MM     : hr__translate,
            y      : 'godinu',
            yy     : hr__translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : hungarian (hu)
    //! author : Adam Brunner : https://github.com/adambrunner

    var weekEndings = 'vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton'.split(' ');
    function hu__translate(number, withoutSuffix, key, isFuture) {
        var num = number,
            suffix;
        switch (key) {
        case 's':
            return (isFuture || withoutSuffix) ? 'néhány másodperc' : 'néhány másodperce';
        case 'm':
            return 'egy' + (isFuture || withoutSuffix ? ' perc' : ' perce');
        case 'mm':
            return num + (isFuture || withoutSuffix ? ' perc' : ' perce');
        case 'h':
            return 'egy' + (isFuture || withoutSuffix ? ' óra' : ' órája');
        case 'hh':
            return num + (isFuture || withoutSuffix ? ' óra' : ' órája');
        case 'd':
            return 'egy' + (isFuture || withoutSuffix ? ' nap' : ' napja');
        case 'dd':
            return num + (isFuture || withoutSuffix ? ' nap' : ' napja');
        case 'M':
            return 'egy' + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');
        case 'MM':
            return num + (isFuture || withoutSuffix ? ' hónap' : ' hónapja');
        case 'y':
            return 'egy' + (isFuture || withoutSuffix ? ' év' : ' éve');
        case 'yy':
            return num + (isFuture || withoutSuffix ? ' év' : ' éve');
        }
        return '';
    }
    function week(isFuture) {
        return (isFuture ? '' : '[múlt] ') + '[' + weekEndings[this.day()] + '] LT[-kor]';
    }

    var hu = _moment__default.defineLocale('hu', {
        months : 'január_február_március_április_május_június_július_augusztus_szeptember_október_november_december'.split('_'),
        monthsShort : 'jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec'.split('_'),
        weekdays : 'vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat'.split('_'),
        weekdaysShort : 'vas_hét_kedd_sze_csüt_pén_szo'.split('_'),
        weekdaysMin : 'v_h_k_sze_cs_p_szo'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'YYYY.MM.DD.',
            LL : 'YYYY. MMMM D.',
            LLL : 'YYYY. MMMM D. H:mm',
            LLLL : 'YYYY. MMMM D., dddd H:mm'
        },
        meridiemParse: /de|du/i,
        isPM: function (input) {
            return input.charAt(1).toLowerCase() === 'u';
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours < 12) {
                return isLower === true ? 'de' : 'DE';
            } else {
                return isLower === true ? 'du' : 'DU';
            }
        },
        calendar : {
            sameDay : '[ma] LT[-kor]',
            nextDay : '[holnap] LT[-kor]',
            nextWeek : function () {
                return week.call(this, true);
            },
            lastDay : '[tegnap] LT[-kor]',
            lastWeek : function () {
                return week.call(this, false);
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s múlva',
            past : '%s',
            s : hu__translate,
            m : hu__translate,
            mm : hu__translate,
            h : hu__translate,
            hh : hu__translate,
            d : hu__translate,
            dd : hu__translate,
            M : hu__translate,
            MM : hu__translate,
            y : hu__translate,
            yy : hu__translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Armenian (hy-am)
    //! author : Armendarabyan : https://github.com/armendarabyan

    function hy_am__monthsCaseReplace(m, format) {
        var months = {
            'nominative': 'հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր'.split('_'),
            'accusative': 'հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի'.split('_')
        },
        nounCase = (/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(format) ?
            'accusative' :
            'nominative';
        return months[nounCase][m.month()];
    }
    function hy_am__monthsShortCaseReplace(m, format) {
        var monthsShort = 'հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ'.split('_');
        return monthsShort[m.month()];
    }
    function hy_am__weekdaysCaseReplace(m, format) {
        var weekdays = 'կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ'.split('_');
        return weekdays[m.day()];
    }

    var hy_am = _moment__default.defineLocale('hy-am', {
        months : hy_am__monthsCaseReplace,
        monthsShort : hy_am__monthsShortCaseReplace,
        weekdays : hy_am__weekdaysCaseReplace,
        weekdaysShort : 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
        weekdaysMin : 'կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY թ.',
            LLL : 'D MMMM YYYY թ., HH:mm',
            LLLL : 'dddd, D MMMM YYYY թ., HH:mm'
        },
        calendar : {
            sameDay: '[այսօր] LT',
            nextDay: '[վաղը] LT',
            lastDay: '[երեկ] LT',
            nextWeek: function () {
                return 'dddd [օրը ժամը] LT';
            },
            lastWeek: function () {
                return '[անցած] dddd [օրը ժամը] LT';
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : '%s հետո',
            past : '%s առաջ',
            s : 'մի քանի վայրկյան',
            m : 'րոպե',
            mm : '%d րոպե',
            h : 'ժամ',
            hh : '%d ժամ',
            d : 'օր',
            dd : '%d օր',
            M : 'ամիս',
            MM : '%d ամիս',
            y : 'տարի',
            yy : '%d տարի'
        },
        meridiemParse: /գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,
        isPM: function (input) {
            return /^(ցերեկվա|երեկոյան)$/.test(input);
        },
        meridiem : function (hour) {
            if (hour < 4) {
                return 'գիշերվա';
            } else if (hour < 12) {
                return 'առավոտվա';
            } else if (hour < 17) {
                return 'ցերեկվա';
            } else {
                return 'երեկոյան';
            }
        },
        ordinalParse: /\d{1,2}|\d{1,2}-(ին|րդ)/,
        ordinal: function (number, period) {
            switch (period) {
            case 'DDD':
            case 'w':
            case 'W':
            case 'DDDo':
                if (number === 1) {
                    return number + '-ին';
                }
                return number + '-րդ';
            default:
                return number;
            }
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Bahasa Indonesia (id)
    //! author : Mohammad Satrio Utomo : https://github.com/tyok
    //! reference: http://id.wikisource.org/wiki/Pedoman_Umum_Ejaan_Bahasa_Indonesia_yang_Disempurnakan

    var id = _moment__default.defineLocale('id', {
        months : 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember'.split('_'),
        monthsShort : 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des'.split('_'),
        weekdays : 'Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu'.split('_'),
        weekdaysShort : 'Min_Sen_Sel_Rab_Kam_Jum_Sab'.split('_'),
        weekdaysMin : 'Mg_Sn_Sl_Rb_Km_Jm_Sb'.split('_'),
        longDateFormat : {
            LT : 'HH.mm',
            LTS : 'HH.mm.ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY [pukul] HH.mm',
            LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
        },
        meridiemParse: /pagi|siang|sore|malam/,
        meridiemHour : function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'pagi') {
                return hour;
            } else if (meridiem === 'siang') {
                return hour >= 11 ? hour : hour + 12;
            } else if (meridiem === 'sore' || meridiem === 'malam') {
                return hour + 12;
            }
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours < 11) {
                return 'pagi';
            } else if (hours < 15) {
                return 'siang';
            } else if (hours < 19) {
                return 'sore';
            } else {
                return 'malam';
            }
        },
        calendar : {
            sameDay : '[Hari ini pukul] LT',
            nextDay : '[Besok pukul] LT',
            nextWeek : 'dddd [pukul] LT',
            lastDay : '[Kemarin pukul] LT',
            lastWeek : 'dddd [lalu pukul] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'dalam %s',
            past : '%s yang lalu',
            s : 'beberapa detik',
            m : 'semenit',
            mm : '%d menit',
            h : 'sejam',
            hh : '%d jam',
            d : 'sehari',
            dd : '%d hari',
            M : 'sebulan',
            MM : '%d bulan',
            y : 'setahun',
            yy : '%d tahun'
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : icelandic (is)
    //! author : Hinrik Örn Sigurðsson : https://github.com/hinrik

    function is__plural(n) {
        if (n % 100 === 11) {
            return true;
        } else if (n % 10 === 1) {
            return false;
        }
        return true;
    }
    function is__translate(number, withoutSuffix, key, isFuture) {
        var result = number + ' ';
        switch (key) {
        case 's':
            return withoutSuffix || isFuture ? 'nokkrar sekúndur' : 'nokkrum sekúndum';
        case 'm':
            return withoutSuffix ? 'mínúta' : 'mínútu';
        case 'mm':
            if (is__plural(number)) {
                return result + (withoutSuffix || isFuture ? 'mínútur' : 'mínútum');
            } else if (withoutSuffix) {
                return result + 'mínúta';
            }
            return result + 'mínútu';
        case 'hh':
            if (is__plural(number)) {
                return result + (withoutSuffix || isFuture ? 'klukkustundir' : 'klukkustundum');
            }
            return result + 'klukkustund';
        case 'd':
            if (withoutSuffix) {
                return 'dagur';
            }
            return isFuture ? 'dag' : 'degi';
        case 'dd':
            if (is__plural(number)) {
                if (withoutSuffix) {
                    return result + 'dagar';
                }
                return result + (isFuture ? 'daga' : 'dögum');
            } else if (withoutSuffix) {
                return result + 'dagur';
            }
            return result + (isFuture ? 'dag' : 'degi');
        case 'M':
            if (withoutSuffix) {
                return 'mánuður';
            }
            return isFuture ? 'mánuð' : 'mánuði';
        case 'MM':
            if (is__plural(number)) {
                if (withoutSuffix) {
                    return result + 'mánuðir';
                }
                return result + (isFuture ? 'mánuði' : 'mánuðum');
            } else if (withoutSuffix) {
                return result + 'mánuður';
            }
            return result + (isFuture ? 'mánuð' : 'mánuði');
        case 'y':
            return withoutSuffix || isFuture ? 'ár' : 'ári';
        case 'yy':
            if (is__plural(number)) {
                return result + (withoutSuffix || isFuture ? 'ár' : 'árum');
            }
            return result + (withoutSuffix || isFuture ? 'ár' : 'ári');
        }
    }

    var is = _moment__default.defineLocale('is', {
        months : 'janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember'.split('_'),
        monthsShort : 'jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des'.split('_'),
        weekdays : 'sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur'.split('_'),
        weekdaysShort : 'sun_mán_þri_mið_fim_fös_lau'.split('_'),
        weekdaysMin : 'Su_Má_Þr_Mi_Fi_Fö_La'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY [kl.] H:mm',
            LLLL : 'dddd, D. MMMM YYYY [kl.] H:mm'
        },
        calendar : {
            sameDay : '[í dag kl.] LT',
            nextDay : '[á morgun kl.] LT',
            nextWeek : 'dddd [kl.] LT',
            lastDay : '[í gær kl.] LT',
            lastWeek : '[síðasta] dddd [kl.] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'eftir %s',
            past : 'fyrir %s síðan',
            s : is__translate,
            m : is__translate,
            mm : is__translate,
            h : 'klukkustund',
            hh : is__translate,
            d : is__translate,
            dd : is__translate,
            M : is__translate,
            MM : is__translate,
            y : is__translate,
            yy : is__translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : italian (it)
    //! author : Lorenzo : https://github.com/aliem
    //! author: Mattia Larentis: https://github.com/nostalgiaz

    var it = _moment__default.defineLocale('it', {
        months : 'gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre'.split('_'),
        monthsShort : 'gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic'.split('_'),
        weekdays : 'Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato'.split('_'),
        weekdaysShort : 'Dom_Lun_Mar_Mer_Gio_Ven_Sab'.split('_'),
        weekdaysMin : 'D_L_Ma_Me_G_V_S'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Oggi alle] LT',
            nextDay: '[Domani alle] LT',
            nextWeek: 'dddd [alle] LT',
            lastDay: '[Ieri alle] LT',
            lastWeek: function () {
                switch (this.day()) {
                    case 0:
                        return '[la scorsa] dddd [alle] LT';
                    default:
                        return '[lo scorso] dddd [alle] LT';
                }
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : function (s) {
                return ((/^[0-9].+$/).test(s) ? 'tra' : 'in') + ' ' + s;
            },
            past : '%s fa',
            s : 'alcuni secondi',
            m : 'un minuto',
            mm : '%d minuti',
            h : 'un\'ora',
            hh : '%d ore',
            d : 'un giorno',
            dd : '%d giorni',
            M : 'un mese',
            MM : '%d mesi',
            y : 'un anno',
            yy : '%d anni'
        },
        ordinalParse : /\d{1,2}º/,
        ordinal: '%dº',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : japanese (ja)
    //! author : LI Long : https://github.com/baryon

    var ja = _moment__default.defineLocale('ja', {
        months : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
        monthsShort : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
        weekdays : '日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日'.split('_'),
        weekdaysShort : '日_月_火_水_木_金_土'.split('_'),
        weekdaysMin : '日_月_火_水_木_金_土'.split('_'),
        longDateFormat : {
            LT : 'Ah時m分',
            LTS : 'Ah時m分s秒',
            L : 'YYYY/MM/DD',
            LL : 'YYYY年M月D日',
            LLL : 'YYYY年M月D日Ah時m分',
            LLLL : 'YYYY年M月D日Ah時m分 dddd'
        },
        meridiemParse: /午前|午後/i,
        isPM : function (input) {
            return input === '午後';
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 12) {
                return '午前';
            } else {
                return '午後';
            }
        },
        calendar : {
            sameDay : '[今日] LT',
            nextDay : '[明日] LT',
            nextWeek : '[来週]dddd LT',
            lastDay : '[昨日] LT',
            lastWeek : '[前週]dddd LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s後',
            past : '%s前',
            s : '数秒',
            m : '1分',
            mm : '%d分',
            h : '1時間',
            hh : '%d時間',
            d : '1日',
            dd : '%d日',
            M : '1ヶ月',
            MM : '%dヶ月',
            y : '1年',
            yy : '%d年'
        }
    });

    //! moment.js locale configuration
    //! locale : Boso Jowo (jv)
    //! author : Rony Lantip : https://github.com/lantip
    //! reference: http://jv.wikipedia.org/wiki/Basa_Jawa

    var jv = _moment__default.defineLocale('jv', {
        months : 'Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_Nopember_Desember'.split('_'),
        monthsShort : 'Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nop_Des'.split('_'),
        weekdays : 'Minggu_Senen_Seloso_Rebu_Kemis_Jemuwah_Septu'.split('_'),
        weekdaysShort : 'Min_Sen_Sel_Reb_Kem_Jem_Sep'.split('_'),
        weekdaysMin : 'Mg_Sn_Sl_Rb_Km_Jm_Sp'.split('_'),
        longDateFormat : {
            LT : 'HH.mm',
            LTS : 'HH.mm.ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY [pukul] HH.mm',
            LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
        },
        meridiemParse: /enjing|siyang|sonten|ndalu/,
        meridiemHour : function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'enjing') {
                return hour;
            } else if (meridiem === 'siyang') {
                return hour >= 11 ? hour : hour + 12;
            } else if (meridiem === 'sonten' || meridiem === 'ndalu') {
                return hour + 12;
            }
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours < 11) {
                return 'enjing';
            } else if (hours < 15) {
                return 'siyang';
            } else if (hours < 19) {
                return 'sonten';
            } else {
                return 'ndalu';
            }
        },
        calendar : {
            sameDay : '[Dinten puniko pukul] LT',
            nextDay : '[Mbenjang pukul] LT',
            nextWeek : 'dddd [pukul] LT',
            lastDay : '[Kala wingi pukul] LT',
            lastWeek : 'dddd [kepengker pukul] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'wonten ing %s',
            past : '%s ingkang kepengker',
            s : 'sawetawis detik',
            m : 'setunggal menit',
            mm : '%d menit',
            h : 'setunggal jam',
            hh : '%d jam',
            d : 'sedinten',
            dd : '%d dinten',
            M : 'sewulan',
            MM : '%d wulan',
            y : 'setaun',
            yy : '%d taun'
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Georgian (ka)
    //! author : Irakli Janiashvili : https://github.com/irakli-janiashvili

    function ka__monthsCaseReplace(m, format) {
        var months = {
            'nominative': 'იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი'.split('_'),
            'accusative': 'იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს'.split('_')
        },
        nounCase = (/D[oD] *MMMM?/).test(format) ?
            'accusative' :
            'nominative';
        return months[nounCase][m.month()];
    }
    function ka__weekdaysCaseReplace(m, format) {
        var weekdays = {
            'nominative': 'კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი'.split('_'),
            'accusative': 'კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს'.split('_')
        },
        nounCase = (/(წინა|შემდეგ)/).test(format) ?
            'accusative' :
            'nominative';
        return weekdays[nounCase][m.day()];
    }

    var ka = _moment__default.defineLocale('ka', {
        months : ka__monthsCaseReplace,
        monthsShort : 'იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ'.split('_'),
        weekdays : ka__weekdaysCaseReplace,
        weekdaysShort : 'კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ'.split('_'),
        weekdaysMin : 'კვ_ორ_სა_ოთ_ხუ_პა_შა'.split('_'),
        longDateFormat : {
            LT : 'h:mm A',
            LTS : 'h:mm:ss A',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY h:mm A',
            LLLL : 'dddd, D MMMM YYYY h:mm A'
        },
        calendar : {
            sameDay : '[დღეს] LT[-ზე]',
            nextDay : '[ხვალ] LT[-ზე]',
            lastDay : '[გუშინ] LT[-ზე]',
            nextWeek : '[შემდეგ] dddd LT[-ზე]',
            lastWeek : '[წინა] dddd LT-ზე',
            sameElse : 'L'
        },
        relativeTime : {
            future : function (s) {
                return (/(წამი|წუთი|საათი|წელი)/).test(s) ?
                    s.replace(/ი$/, 'ში') :
                    s + 'ში';
            },
            past : function (s) {
                if ((/(წამი|წუთი|საათი|დღე|თვე)/).test(s)) {
                    return s.replace(/(ი|ე)$/, 'ის წინ');
                }
                if ((/წელი/).test(s)) {
                    return s.replace(/წელი$/, 'წლის წინ');
                }
            },
            s : 'რამდენიმე წამი',
            m : 'წუთი',
            mm : '%d წუთი',
            h : 'საათი',
            hh : '%d საათი',
            d : 'დღე',
            dd : '%d დღე',
            M : 'თვე',
            MM : '%d თვე',
            y : 'წელი',
            yy : '%d წელი'
        },
        ordinalParse: /0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,
        ordinal : function (number) {
            if (number === 0) {
                return number;
            }
            if (number === 1) {
                return number + '-ლი';
            }
            if ((number < 20) || (number <= 100 && (number % 20 === 0)) || (number % 100 === 0)) {
                return 'მე-' + number;
            }
            return number + '-ე';
        },
        week : {
            dow : 1,
            doy : 7
        }
    });

    //! moment.js locale configuration
    //! locale : khmer (km)
    //! author : Kruy Vanna : https://github.com/kruyvanna

    var km = _moment__default.defineLocale('km', {
        months: 'មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
        monthsShort: 'មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ'.split('_'),
        weekdays: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
        weekdaysShort: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
        weekdaysMin: 'អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍'.split('_'),
        longDateFormat: {
            LT: 'HH:mm',
            LTS : 'HH:mm:ss',
            L: 'DD/MM/YYYY',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY HH:mm',
            LLLL: 'dddd, D MMMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[ថ្ងៃនៈ ម៉ោង] LT',
            nextDay: '[ស្អែក ម៉ោង] LT',
            nextWeek: 'dddd [ម៉ោង] LT',
            lastDay: '[ម្សិលមិញ ម៉ោង] LT',
            lastWeek: 'dddd [សប្តាហ៍មុន] [ម៉ោង] LT',
            sameElse: 'L'
        },
        relativeTime: {
            future: '%sទៀត',
            past: '%sមុន',
            s: 'ប៉ុន្មានវិនាទី',
            m: 'មួយនាទី',
            mm: '%d នាទី',
            h: 'មួយម៉ោង',
            hh: '%d ម៉ោង',
            d: 'មួយថ្ងៃ',
            dd: '%d ថ្ងៃ',
            M: 'មួយខែ',
            MM: '%d ខែ',
            y: 'មួយឆ្នាំ',
            yy: '%d ឆ្នាំ'
        },
        week: {
            dow: 1, // Monday is the first day of the week.
            doy: 4 // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : korean (ko)
    //!
    //! authors
    //!
    //! - Kyungwook, Park : https://github.com/kyungw00k
    //! - Jeeeyul Lee <jeeeyul@gmail.com>

    var ko = _moment__default.defineLocale('ko', {
        months : '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
        monthsShort : '1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월'.split('_'),
        weekdays : '일요일_월요일_화요일_수요일_목요일_금요일_토요일'.split('_'),
        weekdaysShort : '일_월_화_수_목_금_토'.split('_'),
        weekdaysMin : '일_월_화_수_목_금_토'.split('_'),
        longDateFormat : {
            LT : 'A h시 m분',
            LTS : 'A h시 m분 s초',
            L : 'YYYY.MM.DD',
            LL : 'YYYY년 MMMM D일',
            LLL : 'YYYY년 MMMM D일 A h시 m분',
            LLLL : 'YYYY년 MMMM D일 dddd A h시 m분'
        },
        calendar : {
            sameDay : '오늘 LT',
            nextDay : '내일 LT',
            nextWeek : 'dddd LT',
            lastDay : '어제 LT',
            lastWeek : '지난주 dddd LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s 후',
            past : '%s 전',
            s : '몇초',
            ss : '%d초',
            m : '일분',
            mm : '%d분',
            h : '한시간',
            hh : '%d시간',
            d : '하루',
            dd : '%d일',
            M : '한달',
            MM : '%d달',
            y : '일년',
            yy : '%d년'
        },
        ordinalParse : /\d{1,2}일/,
        ordinal : '%d일',
        meridiemParse : /오전|오후/,
        isPM : function (token) {
            return token === '오후';
        },
        meridiem : function (hour, minute, isUpper) {
            return hour < 12 ? '오전' : '오후';
        }
    });

    //! moment.js locale configuration
    //! locale : Luxembourgish (lb)
    //! author : mweimerskirch : https://github.com/mweimerskirch, David Raison : https://github.com/kwisatz

    function lb__processRelativeTime(number, withoutSuffix, key, isFuture) {
        var format = {
            'm': ['eng Minutt', 'enger Minutt'],
            'h': ['eng Stonn', 'enger Stonn'],
            'd': ['een Dag', 'engem Dag'],
            'M': ['ee Mount', 'engem Mount'],
            'y': ['ee Joer', 'engem Joer']
        };
        return withoutSuffix ? format[key][0] : format[key][1];
    }
    function processFutureTime(string) {
        var number = string.substr(0, string.indexOf(' '));
        if (eifelerRegelAppliesToNumber(number)) {
            return 'a ' + string;
        }
        return 'an ' + string;
    }
    function processPastTime(string) {
        var number = string.substr(0, string.indexOf(' '));
        if (eifelerRegelAppliesToNumber(number)) {
            return 'viru ' + string;
        }
        return 'virun ' + string;
    }
    /**
     * Returns true if the word before the given number loses the '-n' ending.
     * e.g. 'an 10 Deeg' but 'a 5 Deeg'
     *
     * @param number {integer}
     * @returns {boolean}
     */
    function eifelerRegelAppliesToNumber(number) {
        number = parseInt(number, 10);
        if (isNaN(number)) {
            return false;
        }
        if (number < 0) {
            // Negative Number --> always true
            return true;
        } else if (number < 10) {
            // Only 1 digit
            if (4 <= number && number <= 7) {
                return true;
            }
            return false;
        } else if (number < 100) {
            // 2 digits
            var lastDigit = number % 10, firstDigit = number / 10;
            if (lastDigit === 0) {
                return eifelerRegelAppliesToNumber(firstDigit);
            }
            return eifelerRegelAppliesToNumber(lastDigit);
        } else if (number < 10000) {
            // 3 or 4 digits --> recursively check first digit
            while (number >= 10) {
                number = number / 10;
            }
            return eifelerRegelAppliesToNumber(number);
        } else {
            // Anything larger than 4 digits: recursively check first n-3 digits
            number = number / 1000;
            return eifelerRegelAppliesToNumber(number);
        }
    }

    var lb = _moment__default.defineLocale('lb', {
        months: 'Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember'.split('_'),
        monthsShort: 'Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.'.split('_'),
        weekdays: 'Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg'.split('_'),
        weekdaysShort: 'So._Mé._Dë._Më._Do._Fr._Sa.'.split('_'),
        weekdaysMin: 'So_Mé_Dë_Më_Do_Fr_Sa'.split('_'),
        longDateFormat: {
            LT: 'H:mm [Auer]',
            LTS: 'H:mm:ss [Auer]',
            L: 'DD.MM.YYYY',
            LL: 'D. MMMM YYYY',
            LLL: 'D. MMMM YYYY H:mm [Auer]',
            LLLL: 'dddd, D. MMMM YYYY H:mm [Auer]'
        },
        calendar: {
            sameDay: '[Haut um] LT',
            sameElse: 'L',
            nextDay: '[Muer um] LT',
            nextWeek: 'dddd [um] LT',
            lastDay: '[Gëschter um] LT',
            lastWeek: function () {
                // Different date string for 'Dënschdeg' (Tuesday) and 'Donneschdeg' (Thursday) due to phonological rule
                switch (this.day()) {
                    case 2:
                    case 4:
                        return '[Leschten] dddd [um] LT';
                    default:
                        return '[Leschte] dddd [um] LT';
                }
            }
        },
        relativeTime : {
            future : processFutureTime,
            past : processPastTime,
            s : 'e puer Sekonnen',
            m : lb__processRelativeTime,
            mm : '%d Minutten',
            h : lb__processRelativeTime,
            hh : '%d Stonnen',
            d : lb__processRelativeTime,
            dd : '%d Deeg',
            M : lb__processRelativeTime,
            MM : '%d Méint',
            y : lb__processRelativeTime,
            yy : '%d Joer'
        },
        ordinalParse: /\d{1,2}\./,
        ordinal: '%d.',
        week: {
            dow: 1, // Monday is the first day of the week.
            doy: 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Lithuanian (lt)
    //! author : Mindaugas Mozūras : https://github.com/mmozuras

    var lt__units = {
        'm' : 'minutė_minutės_minutę',
        'mm': 'minutės_minučių_minutes',
        'h' : 'valanda_valandos_valandą',
        'hh': 'valandos_valandų_valandas',
        'd' : 'diena_dienos_dieną',
        'dd': 'dienos_dienų_dienas',
        'M' : 'mėnuo_mėnesio_mėnesį',
        'MM': 'mėnesiai_mėnesių_mėnesius',
        'y' : 'metai_metų_metus',
        'yy': 'metai_metų_metus'
    },
    weekDays = 'sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis'.split('_');
    function translateSeconds(number, withoutSuffix, key, isFuture) {
        if (withoutSuffix) {
            return 'kelios sekundės';
        } else {
            return isFuture ? 'kelių sekundžių' : 'kelias sekundes';
        }
    }
    function lt__monthsCaseReplace(m, format) {
        var months = {
                'nominative': 'sausis_vasaris_kovas_balandis_gegužė_birželis_liepa_rugpjūtis_rugsėjis_spalis_lapkritis_gruodis'.split('_'),
                'accusative': 'sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio'.split('_')
            },
            nounCase = (/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(format) ?
                'accusative' :
                'nominative';
        return months[nounCase][m.month()];
    }
    function translateSingular(number, withoutSuffix, key, isFuture) {
        return withoutSuffix ? forms(key)[0] : (isFuture ? forms(key)[1] : forms(key)[2]);
    }
    function special(number) {
        return number % 10 === 0 || (number > 10 && number < 20);
    }
    function forms(key) {
        return lt__units[key].split('_');
    }
    function lt__translate(number, withoutSuffix, key, isFuture) {
        var result = number + ' ';
        if (number === 1) {
            return result + translateSingular(number, withoutSuffix, key[0], isFuture);
        } else if (withoutSuffix) {
            return result + (special(number) ? forms(key)[1] : forms(key)[0]);
        } else {
            if (isFuture) {
                return result + forms(key)[1];
            } else {
                return result + (special(number) ? forms(key)[1] : forms(key)[2]);
            }
        }
    }
    function relativeWeekDay(moment, format) {
        var nominative = format.indexOf('dddd HH:mm') === -1,
            weekDay = weekDays[moment.day()];
        return nominative ? weekDay : weekDay.substring(0, weekDay.length - 2) + 'į';
    }

    var lt = _moment__default.defineLocale('lt', {
        months : lt__monthsCaseReplace,
        monthsShort : 'sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd'.split('_'),
        weekdays : relativeWeekDay,
        weekdaysShort : 'Sek_Pir_Ant_Tre_Ket_Pen_Šeš'.split('_'),
        weekdaysMin : 'S_P_A_T_K_Pn_Š'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'YYYY-MM-DD',
            LL : 'YYYY [m.] MMMM D [d.]',
            LLL : 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
            LLLL : 'YYYY [m.] MMMM D [d.], dddd, HH:mm [val.]',
            l : 'YYYY-MM-DD',
            ll : 'YYYY [m.] MMMM D [d.]',
            lll : 'YYYY [m.] MMMM D [d.], HH:mm [val.]',
            llll : 'YYYY [m.] MMMM D [d.], ddd, HH:mm [val.]'
        },
        calendar : {
            sameDay : '[Šiandien] LT',
            nextDay : '[Rytoj] LT',
            nextWeek : 'dddd LT',
            lastDay : '[Vakar] LT',
            lastWeek : '[Praėjusį] dddd LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'po %s',
            past : 'prieš %s',
            s : translateSeconds,
            m : translateSingular,
            mm : lt__translate,
            h : translateSingular,
            hh : lt__translate,
            d : translateSingular,
            dd : lt__translate,
            M : translateSingular,
            MM : lt__translate,
            y : translateSingular,
            yy : lt__translate
        },
        ordinalParse: /\d{1,2}-oji/,
        ordinal : function (number) {
            return number + '-oji';
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : latvian (lv)
    //! author : Kristaps Karlsons : https://github.com/skakri
    //! author : Jānis Elmeris : https://github.com/JanisE

    var lv__units = {
        'm': 'minūtes_minūtēm_minūte_minūtes'.split('_'),
        'mm': 'minūtes_minūtēm_minūte_minūtes'.split('_'),
        'h': 'stundas_stundām_stunda_stundas'.split('_'),
        'hh': 'stundas_stundām_stunda_stundas'.split('_'),
        'd': 'dienas_dienām_diena_dienas'.split('_'),
        'dd': 'dienas_dienām_diena_dienas'.split('_'),
        'M': 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
        'MM': 'mēneša_mēnešiem_mēnesis_mēneši'.split('_'),
        'y': 'gada_gadiem_gads_gadi'.split('_'),
        'yy': 'gada_gadiem_gads_gadi'.split('_')
    };
    /**
     * @param withoutSuffix boolean true = a length of time; false = before/after a period of time.
     */
    function lv__format(forms, number, withoutSuffix) {
        if (withoutSuffix) {
            // E.g. "21 minūte", "3 minūtes".
            return number % 10 === 1 && number !== 11 ? forms[2] : forms[3];
        } else {
            // E.g. "21 minūtes" as in "pēc 21 minūtes".
            // E.g. "3 minūtēm" as in "pēc 3 minūtēm".
            return number % 10 === 1 && number !== 11 ? forms[0] : forms[1];
        }
    }
    function lv__relativeTimeWithPlural(number, withoutSuffix, key) {
        return number + ' ' + lv__format(lv__units[key], number, withoutSuffix);
    }
    function relativeTimeWithSingular(number, withoutSuffix, key) {
        return lv__format(lv__units[key], number, withoutSuffix);
    }
    function relativeSeconds(number, withoutSuffix) {
        return withoutSuffix ? 'dažas sekundes' : 'dažām sekundēm';
    }

    var lv = _moment__default.defineLocale('lv', {
        months : 'janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris'.split('_'),
        monthsShort : 'jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec'.split('_'),
        weekdays : 'svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena'.split('_'),
        weekdaysShort : 'Sv_P_O_T_C_Pk_S'.split('_'),
        weekdaysMin : 'Sv_P_O_T_C_Pk_S'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY.',
            LL : 'YYYY. [gada] D. MMMM',
            LLL : 'YYYY. [gada] D. MMMM, HH:mm',
            LLLL : 'YYYY. [gada] D. MMMM, dddd, HH:mm'
        },
        calendar : {
            sameDay : '[Šodien pulksten] LT',
            nextDay : '[Rīt pulksten] LT',
            nextWeek : 'dddd [pulksten] LT',
            lastDay : '[Vakar pulksten] LT',
            lastWeek : '[Pagājušā] dddd [pulksten] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'pēc %s',
            past : 'pirms %s',
            s : relativeSeconds,
            m : relativeTimeWithSingular,
            mm : lv__relativeTimeWithPlural,
            h : relativeTimeWithSingular,
            hh : lv__relativeTimeWithPlural,
            d : relativeTimeWithSingular,
            dd : lv__relativeTimeWithPlural,
            M : relativeTimeWithSingular,
            MM : lv__relativeTimeWithPlural,
            y : relativeTimeWithSingular,
            yy : lv__relativeTimeWithPlural
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Montenegrin (me)
    //! author : Miodrag Nikač <miodrag@restartit.me> : https://github.com/miodragnikac

    var me__translator = {
        words: { //Different grammatical cases
            m: ['jedan minut', 'jednog minuta'],
            mm: ['minut', 'minuta', 'minuta'],
            h: ['jedan sat', 'jednog sata'],
            hh: ['sat', 'sata', 'sati'],
            dd: ['dan', 'dana', 'dana'],
            MM: ['mjesec', 'mjeseca', 'mjeseci'],
            yy: ['godina', 'godine', 'godina']
        },
        correctGrammaticalCase: function (number, wordKey) {
            return number === 1 ? wordKey[0] : (number >= 2 && number <= 4 ? wordKey[1] : wordKey[2]);
        },
        translate: function (number, withoutSuffix, key) {
            var wordKey = me__translator.words[key];
            if (key.length === 1) {
                return withoutSuffix ? wordKey[0] : wordKey[1];
            } else {
                return number + ' ' + me__translator.correctGrammaticalCase(number, wordKey);
            }
        }
    };

    var me = _moment__default.defineLocale('me', {
        months: ['januar', 'februar', 'mart', 'april', 'maj', 'jun', 'jul', 'avgust', 'septembar', 'oktobar', 'novembar', 'decembar'],
        monthsShort: ['jan.', 'feb.', 'mar.', 'apr.', 'maj', 'jun', 'jul', 'avg.', 'sep.', 'okt.', 'nov.', 'dec.'],
        weekdays: ['nedjelja', 'ponedjeljak', 'utorak', 'srijeda', 'četvrtak', 'petak', 'subota'],
        weekdaysShort: ['ned.', 'pon.', 'uto.', 'sri.', 'čet.', 'pet.', 'sub.'],
        weekdaysMin: ['ne', 'po', 'ut', 'sr', 'če', 'pe', 'su'],
        longDateFormat: {
            LT: 'H:mm',
            LTS : 'H:mm:ss',
            L: 'DD. MM. YYYY',
            LL: 'D. MMMM YYYY',
            LLL: 'D. MMMM YYYY H:mm',
            LLLL: 'dddd, D. MMMM YYYY H:mm'
        },
        calendar: {
            sameDay: '[danas u] LT',
            nextDay: '[sjutra u] LT',

            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[u] [nedjelju] [u] LT';
                case 3:
                    return '[u] [srijedu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
                }
            },
            lastDay  : '[juče u] LT',
            lastWeek : function () {
                var lastWeekDays = [
                    '[prošle] [nedjelje] [u] LT',
                    '[prošlog] [ponedjeljka] [u] LT',
                    '[prošlog] [utorka] [u] LT',
                    '[prošle] [srijede] [u] LT',
                    '[prošlog] [četvrtka] [u] LT',
                    '[prošlog] [petka] [u] LT',
                    '[prošle] [subote] [u] LT'
                ];
                return lastWeekDays[this.day()];
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'za %s',
            past   : 'prije %s',
            s      : 'nekoliko sekundi',
            m      : me__translator.translate,
            mm     : me__translator.translate,
            h      : me__translator.translate,
            hh     : me__translator.translate,
            d      : 'dan',
            dd     : me__translator.translate,
            M      : 'mjesec',
            MM     : me__translator.translate,
            y      : 'godinu',
            yy     : me__translator.translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : macedonian (mk)
    //! author : Borislav Mickov : https://github.com/B0k0

    var mk = _moment__default.defineLocale('mk', {
        months : 'јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември'.split('_'),
        monthsShort : 'јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек'.split('_'),
        weekdays : 'недела_понеделник_вторник_среда_четврток_петок_сабота'.split('_'),
        weekdaysShort : 'нед_пон_вто_сре_чет_пет_саб'.split('_'),
        weekdaysMin : 'нe_пo_вт_ср_че_пе_сa'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'D.MM.YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY H:mm',
            LLLL : 'dddd, D MMMM YYYY H:mm'
        },
        calendar : {
            sameDay : '[Денес во] LT',
            nextDay : '[Утре во] LT',
            nextWeek : 'dddd [во] LT',
            lastDay : '[Вчера во] LT',
            lastWeek : function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 6:
                    return '[Во изминатата] dddd [во] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[Во изминатиот] dddd [во] LT';
                }
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'после %s',
            past : 'пред %s',
            s : 'неколку секунди',
            m : 'минута',
            mm : '%d минути',
            h : 'час',
            hh : '%d часа',
            d : 'ден',
            dd : '%d дена',
            M : 'месец',
            MM : '%d месеци',
            y : 'година',
            yy : '%d години'
        },
        ordinalParse: /\d{1,2}-(ев|ен|ти|ви|ри|ми)/,
        ordinal : function (number) {
            var lastDigit = number % 10,
                last2Digits = number % 100;
            if (number === 0) {
                return number + '-ев';
            } else if (last2Digits === 0) {
                return number + '-ен';
            } else if (last2Digits > 10 && last2Digits < 20) {
                return number + '-ти';
            } else if (lastDigit === 1) {
                return number + '-ви';
            } else if (lastDigit === 2) {
                return number + '-ри';
            } else if (lastDigit === 7 || lastDigit === 8) {
                return number + '-ми';
            } else {
                return number + '-ти';
            }
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : malayalam (ml)
    //! author : Floyd Pink : https://github.com/floydpink

    var ml = _moment__default.defineLocale('ml', {
        months : 'ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ'.split('_'),
        monthsShort : 'ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.'.split('_'),
        weekdays : 'ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച'.split('_'),
        weekdaysShort : 'ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി'.split('_'),
        weekdaysMin : 'ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ'.split('_'),
        longDateFormat : {
            LT : 'A h:mm -നു',
            LTS : 'A h:mm:ss -നു',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY, A h:mm -നു',
            LLLL : 'dddd, D MMMM YYYY, A h:mm -നു'
        },
        calendar : {
            sameDay : '[ഇന്ന്] LT',
            nextDay : '[നാളെ] LT',
            nextWeek : 'dddd, LT',
            lastDay : '[ഇന്നലെ] LT',
            lastWeek : '[കഴിഞ്ഞ] dddd, LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s കഴിഞ്ഞ്',
            past : '%s മുൻപ്',
            s : 'അൽപ നിമിഷങ്ങൾ',
            m : 'ഒരു മിനിറ്റ്',
            mm : '%d മിനിറ്റ്',
            h : 'ഒരു മണിക്കൂർ',
            hh : '%d മണിക്കൂർ',
            d : 'ഒരു ദിവസം',
            dd : '%d ദിവസം',
            M : 'ഒരു മാസം',
            MM : '%d മാസം',
            y : 'ഒരു വർഷം',
            yy : '%d വർഷം'
        },
        meridiemParse: /രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,
        isPM : function (input) {
            return /^(ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി)$/.test(input);
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'രാത്രി';
            } else if (hour < 12) {
                return 'രാവിലെ';
            } else if (hour < 17) {
                return 'ഉച്ച കഴിഞ്ഞ്';
            } else if (hour < 20) {
                return 'വൈകുന്നേരം';
            } else {
                return 'രാത്രി';
            }
        }
    });

    //! moment.js locale configuration
    //! locale : Marathi (mr)
    //! author : Harshad Kale : https://github.com/kalehv

    var mr__symbolMap = {
        '1': '१',
        '2': '२',
        '3': '३',
        '4': '४',
        '5': '५',
        '6': '६',
        '7': '७',
        '8': '८',
        '9': '९',
        '0': '०'
    },
    mr__numberMap = {
        '१': '1',
        '२': '2',
        '३': '3',
        '४': '4',
        '५': '5',
        '६': '6',
        '७': '7',
        '८': '8',
        '९': '9',
        '०': '0'
    };

    var mr = _moment__default.defineLocale('mr', {
        months : 'जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर'.split('_'),
        monthsShort: 'जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.'.split('_'),
        weekdays : 'रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार'.split('_'),
        weekdaysShort : 'रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि'.split('_'),
        weekdaysMin : 'र_सो_मं_बु_गु_शु_श'.split('_'),
        longDateFormat : {
            LT : 'A h:mm वाजता',
            LTS : 'A h:mm:ss वाजता',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY, A h:mm वाजता',
            LLLL : 'dddd, D MMMM YYYY, A h:mm वाजता'
        },
        calendar : {
            sameDay : '[आज] LT',
            nextDay : '[उद्या] LT',
            nextWeek : 'dddd, LT',
            lastDay : '[काल] LT',
            lastWeek: '[मागील] dddd, LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s नंतर',
            past : '%s पूर्वी',
            s : 'सेकंद',
            m: 'एक मिनिट',
            mm: '%d मिनिटे',
            h : 'एक तास',
            hh : '%d तास',
            d : 'एक दिवस',
            dd : '%d दिवस',
            M : 'एक महिना',
            MM : '%d महिने',
            y : 'एक वर्ष',
            yy : '%d वर्षे'
        },
        preparse: function (string) {
            return string.replace(/[१२३४५६७८९०]/g, function (match) {
                return mr__numberMap[match];
            });
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return mr__symbolMap[match];
            });
        },
        meridiemParse: /रात्री|सकाळी|दुपारी|सायंकाळी/,
        meridiemHour : function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'रात्री') {
                return hour < 4 ? hour : hour + 12;
            } else if (meridiem === 'सकाळी') {
                return hour;
            } else if (meridiem === 'दुपारी') {
                return hour >= 10 ? hour : hour + 12;
            } else if (meridiem === 'सायंकाळी') {
                return hour + 12;
            }
        },
        meridiem: function (hour, minute, isLower) {
            if (hour < 4) {
                return 'रात्री';
            } else if (hour < 10) {
                return 'सकाळी';
            } else if (hour < 17) {
                return 'दुपारी';
            } else if (hour < 20) {
                return 'सायंकाळी';
            } else {
                return 'रात्री';
            }
        },
        week : {
            dow : 0, // Sunday is the first day of the week.
            doy : 6  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Bahasa Malaysia (ms-MY)
    //! author : Weldan Jamili : https://github.com/weldan

    var ms_my = _moment__default.defineLocale('ms-my', {
        months : 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
        monthsShort : 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
        weekdays : 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
        weekdaysShort : 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
        weekdaysMin : 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
        longDateFormat : {
            LT : 'HH.mm',
            LTS : 'HH.mm.ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY [pukul] HH.mm',
            LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
        },
        meridiemParse: /pagi|tengahari|petang|malam/,
        meridiemHour: function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'pagi') {
                return hour;
            } else if (meridiem === 'tengahari') {
                return hour >= 11 ? hour : hour + 12;
            } else if (meridiem === 'petang' || meridiem === 'malam') {
                return hour + 12;
            }
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours < 11) {
                return 'pagi';
            } else if (hours < 15) {
                return 'tengahari';
            } else if (hours < 19) {
                return 'petang';
            } else {
                return 'malam';
            }
        },
        calendar : {
            sameDay : '[Hari ini pukul] LT',
            nextDay : '[Esok pukul] LT',
            nextWeek : 'dddd [pukul] LT',
            lastDay : '[Kelmarin pukul] LT',
            lastWeek : 'dddd [lepas pukul] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'dalam %s',
            past : '%s yang lepas',
            s : 'beberapa saat',
            m : 'seminit',
            mm : '%d minit',
            h : 'sejam',
            hh : '%d jam',
            d : 'sehari',
            dd : '%d hari',
            M : 'sebulan',
            MM : '%d bulan',
            y : 'setahun',
            yy : '%d tahun'
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Bahasa Malaysia (ms-MY)
    //! author : Weldan Jamili : https://github.com/weldan

    var locale_ms = _moment__default.defineLocale('ms', {
        months : 'Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember'.split('_'),
        monthsShort : 'Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis'.split('_'),
        weekdays : 'Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu'.split('_'),
        weekdaysShort : 'Ahd_Isn_Sel_Rab_Kha_Jum_Sab'.split('_'),
        weekdaysMin : 'Ah_Is_Sl_Rb_Km_Jm_Sb'.split('_'),
        longDateFormat : {
            LT : 'HH.mm',
            LTS : 'HH.mm.ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY [pukul] HH.mm',
            LLLL : 'dddd, D MMMM YYYY [pukul] HH.mm'
        },
        meridiemParse: /pagi|tengahari|petang|malam/,
        meridiemHour: function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'pagi') {
                return hour;
            } else if (meridiem === 'tengahari') {
                return hour >= 11 ? hour : hour + 12;
            } else if (meridiem === 'petang' || meridiem === 'malam') {
                return hour + 12;
            }
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours < 11) {
                return 'pagi';
            } else if (hours < 15) {
                return 'tengahari';
            } else if (hours < 19) {
                return 'petang';
            } else {
                return 'malam';
            }
        },
        calendar : {
            sameDay : '[Hari ini pukul] LT',
            nextDay : '[Esok pukul] LT',
            nextWeek : 'dddd [pukul] LT',
            lastDay : '[Kelmarin pukul] LT',
            lastWeek : 'dddd [lepas pukul] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'dalam %s',
            past : '%s yang lepas',
            s : 'beberapa saat',
            m : 'seminit',
            mm : '%d minit',
            h : 'sejam',
            hh : '%d jam',
            d : 'sehari',
            dd : '%d hari',
            M : 'sebulan',
            MM : '%d bulan',
            y : 'setahun',
            yy : '%d tahun'
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Burmese (my)
    //! author : Squar team, mysquar.com

    var my__symbolMap = {
        '1': '၁',
        '2': '၂',
        '3': '၃',
        '4': '၄',
        '5': '၅',
        '6': '၆',
        '7': '၇',
        '8': '၈',
        '9': '၉',
        '0': '၀'
    }, my__numberMap = {
        '၁': '1',
        '၂': '2',
        '၃': '3',
        '၄': '4',
        '၅': '5',
        '၆': '6',
        '၇': '7',
        '၈': '8',
        '၉': '9',
        '၀': '0'
    };

    var my = _moment__default.defineLocale('my', {
        months: 'ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ'.split('_'),
        monthsShort: 'ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ'.split('_'),
        weekdays: 'တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ'.split('_'),
        weekdaysShort: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),
        weekdaysMin: 'နွေ_လာ_ဂါ_ဟူး_ကြာ_သော_နေ'.split('_'),

        longDateFormat: {
            LT: 'HH:mm',
            LTS: 'HH:mm:ss',
            L: 'DD/MM/YYYY',
            LL: 'D MMMM YYYY',
            LLL: 'D MMMM YYYY HH:mm',
            LLLL: 'dddd D MMMM YYYY HH:mm'
        },
        calendar: {
            sameDay: '[ယနေ.] LT [မှာ]',
            nextDay: '[မနက်ဖြန်] LT [မှာ]',
            nextWeek: 'dddd LT [မှာ]',
            lastDay: '[မနေ.က] LT [မှာ]',
            lastWeek: '[ပြီးခဲ့သော] dddd LT [မှာ]',
            sameElse: 'L'
        },
        relativeTime: {
            future: 'လာမည့် %s မှာ',
            past: 'လွန်ခဲ့သော %s က',
            s: 'စက္ကန်.အနည်းငယ်',
            m: 'တစ်မိနစ်',
            mm: '%d မိနစ်',
            h: 'တစ်နာရီ',
            hh: '%d နာရီ',
            d: 'တစ်ရက်',
            dd: '%d ရက်',
            M: 'တစ်လ',
            MM: '%d လ',
            y: 'တစ်နှစ်',
            yy: '%d နှစ်'
        },
        preparse: function (string) {
            return string.replace(/[၁၂၃၄၅၆၇၈၉၀]/g, function (match) {
                return my__numberMap[match];
            });
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return my__symbolMap[match];
            });
        },
        week: {
            dow: 1, // Monday is the first day of the week.
            doy: 4 // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : norwegian bokmål (nb)
    //! authors : Espen Hovlandsdal : https://github.com/rexxars
    //!           Sigurd Gartmann : https://github.com/sigurdga

    var nb = _moment__default.defineLocale('nb', {
        months : 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
        monthsShort : 'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),
        weekdays : 'søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag'.split('_'),
        weekdaysShort : 'søn_man_tirs_ons_tors_fre_lør'.split('_'),
        weekdaysMin : 'sø_ma_ti_on_to_fr_lø'.split('_'),
        longDateFormat : {
            LT : 'H.mm',
            LTS : 'H.mm.ss',
            L : 'DD.MM.YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY [kl.] H.mm',
            LLLL : 'dddd D. MMMM YYYY [kl.] H.mm'
        },
        calendar : {
            sameDay: '[i dag kl.] LT',
            nextDay: '[i morgen kl.] LT',
            nextWeek: 'dddd [kl.] LT',
            lastDay: '[i går kl.] LT',
            lastWeek: '[forrige] dddd [kl.] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'om %s',
            past : 'for %s siden',
            s : 'noen sekunder',
            m : 'ett minutt',
            mm : '%d minutter',
            h : 'en time',
            hh : '%d timer',
            d : 'en dag',
            dd : '%d dager',
            M : 'en måned',
            MM : '%d måneder',
            y : 'ett år',
            yy : '%d år'
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : nepali/nepalese
    //! author : suvash : https://github.com/suvash

    var ne__symbolMap = {
        '1': '१',
        '2': '२',
        '3': '३',
        '4': '४',
        '5': '५',
        '6': '६',
        '7': '७',
        '8': '८',
        '9': '९',
        '0': '०'
    },
    ne__numberMap = {
        '१': '1',
        '२': '2',
        '३': '3',
        '४': '4',
        '५': '5',
        '६': '6',
        '७': '7',
        '८': '8',
        '९': '9',
        '०': '0'
    };

    var ne = _moment__default.defineLocale('ne', {
        months : 'जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर'.split('_'),
        monthsShort : 'जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.'.split('_'),
        weekdays : 'आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार'.split('_'),
        weekdaysShort : 'आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.'.split('_'),
        weekdaysMin : 'आइ._सो._मङ्_बु._बि._शु._श.'.split('_'),
        longDateFormat : {
            LT : 'Aको h:mm बजे',
            LTS : 'Aको h:mm:ss बजे',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY, Aको h:mm बजे',
            LLLL : 'dddd, D MMMM YYYY, Aको h:mm बजे'
        },
        preparse: function (string) {
            return string.replace(/[१२३४५६७८९०]/g, function (match) {
                return ne__numberMap[match];
            });
        },
        postformat: function (string) {
            return string.replace(/\d/g, function (match) {
                return ne__symbolMap[match];
            });
        },
        meridiemParse: /राती|बिहान|दिउँसो|बेलुका|साँझ|राती/,
        meridiemHour : function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'राती') {
                return hour < 3 ? hour : hour + 12;
            } else if (meridiem === 'बिहान') {
                return hour;
            } else if (meridiem === 'दिउँसो') {
                return hour >= 10 ? hour : hour + 12;
            } else if (meridiem === 'बेलुका' || meridiem === 'साँझ') {
                return hour + 12;
            }
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 3) {
                return 'राती';
            } else if (hour < 10) {
                return 'बिहान';
            } else if (hour < 15) {
                return 'दिउँसो';
            } else if (hour < 18) {
                return 'बेलुका';
            } else if (hour < 20) {
                return 'साँझ';
            } else {
                return 'राती';
            }
        },
        calendar : {
            sameDay : '[आज] LT',
            nextDay : '[भोली] LT',
            nextWeek : '[आउँदो] dddd[,] LT',
            lastDay : '[हिजो] LT',
            lastWeek : '[गएको] dddd[,] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%sमा',
            past : '%s अगाडी',
            s : 'केही समय',
            m : 'एक मिनेट',
            mm : '%d मिनेट',
            h : 'एक घण्टा',
            hh : '%d घण्टा',
            d : 'एक दिन',
            dd : '%d दिन',
            M : 'एक महिना',
            MM : '%d महिना',
            y : 'एक बर्ष',
            yy : '%d बर्ष'
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : dutch (nl)
    //! author : Joris Röling : https://github.com/jjupiter

    var nl__monthsShortWithDots = 'jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.'.split('_'),
        nl__monthsShortWithoutDots = 'jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec'.split('_');

    var nl = _moment__default.defineLocale('nl', {
        months : 'januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december'.split('_'),
        monthsShort : function (m, format) {
            if (/-MMM-/.test(format)) {
                return nl__monthsShortWithoutDots[m.month()];
            } else {
                return nl__monthsShortWithDots[m.month()];
            }
        },
        weekdays : 'zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag'.split('_'),
        weekdaysShort : 'zo._ma._di._wo._do._vr._za.'.split('_'),
        weekdaysMin : 'Zo_Ma_Di_Wo_Do_Vr_Za'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD-MM-YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[vandaag om] LT',
            nextDay: '[morgen om] LT',
            nextWeek: 'dddd [om] LT',
            lastDay: '[gisteren om] LT',
            lastWeek: '[afgelopen] dddd [om] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'over %s',
            past : '%s geleden',
            s : 'een paar seconden',
            m : 'één minuut',
            mm : '%d minuten',
            h : 'één uur',
            hh : '%d uur',
            d : 'één dag',
            dd : '%d dagen',
            M : 'één maand',
            MM : '%d maanden',
            y : 'één jaar',
            yy : '%d jaar'
        },
        ordinalParse: /\d{1,2}(ste|de)/,
        ordinal : function (number) {
            return number + ((number === 1 || number === 8 || number >= 20) ? 'ste' : 'de');
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : norwegian nynorsk (nn)
    //! author : https://github.com/mechuwind

    var nn = _moment__default.defineLocale('nn', {
        months : 'januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember'.split('_'),
        monthsShort : 'jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des'.split('_'),
        weekdays : 'sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag'.split('_'),
        weekdaysShort : 'sun_mån_tys_ons_tor_fre_lau'.split('_'),
        weekdaysMin : 'su_må_ty_on_to_fr_lø'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[I dag klokka] LT',
            nextDay: '[I morgon klokka] LT',
            nextWeek: 'dddd [klokka] LT',
            lastDay: '[I går klokka] LT',
            lastWeek: '[Føregåande] dddd [klokka] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'om %s',
            past : 'for %s sidan',
            s : 'nokre sekund',
            m : 'eit minutt',
            mm : '%d minutt',
            h : 'ein time',
            hh : '%d timar',
            d : 'ein dag',
            dd : '%d dagar',
            M : 'ein månad',
            MM : '%d månader',
            y : 'eit år',
            yy : '%d år'
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : polish (pl)
    //! author : Rafal Hirsz : https://github.com/evoL

    var monthsNominative = 'styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień'.split('_'),
        monthsSubjective = 'stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia'.split('_');
    function pl__plural(n) {
        return (n % 10 < 5) && (n % 10 > 1) && ((~~(n / 10) % 10) !== 1);
    }
    function pl__translate(number, withoutSuffix, key) {
        var result = number + ' ';
        switch (key) {
        case 'm':
            return withoutSuffix ? 'minuta' : 'minutę';
        case 'mm':
            return result + (pl__plural(number) ? 'minuty' : 'minut');
        case 'h':
            return withoutSuffix  ? 'godzina'  : 'godzinę';
        case 'hh':
            return result + (pl__plural(number) ? 'godziny' : 'godzin');
        case 'MM':
            return result + (pl__plural(number) ? 'miesiące' : 'miesięcy');
        case 'yy':
            return result + (pl__plural(number) ? 'lata' : 'lat');
        }
    }

    var pl = _moment__default.defineLocale('pl', {
        months : function (momentToFormat, format) {
            if (format === '') {
                // Hack: if format empty we know this is used to generate
                // RegExp by moment. Give then back both valid forms of months
                // in RegExp ready format.
                return '(' + monthsSubjective[momentToFormat.month()] + '|' + monthsNominative[momentToFormat.month()] + ')';
            } else if (/D MMMM/.test(format)) {
                return monthsSubjective[momentToFormat.month()];
            } else {
                return monthsNominative[momentToFormat.month()];
            }
        },
        monthsShort : 'sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru'.split('_'),
        weekdays : 'niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota'.split('_'),
        weekdaysShort : 'nie_pon_wt_śr_czw_pt_sb'.split('_'),
        weekdaysMin : 'N_Pn_Wt_Śr_Cz_Pt_So'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Dziś o] LT',
            nextDay: '[Jutro o] LT',
            nextWeek: '[W] dddd [o] LT',
            lastDay: '[Wczoraj o] LT',
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[W zeszłą niedzielę o] LT';
                case 3:
                    return '[W zeszłą środę o] LT';
                case 6:
                    return '[W zeszłą sobotę o] LT';
                default:
                    return '[W zeszły] dddd [o] LT';
                }
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'za %s',
            past : '%s temu',
            s : 'kilka sekund',
            m : pl__translate,
            mm : pl__translate,
            h : pl__translate,
            hh : pl__translate,
            d : '1 dzień',
            dd : '%d dni',
            M : 'miesiąc',
            MM : pl__translate,
            y : 'rok',
            yy : pl__translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : brazilian portuguese (pt-br)
    //! author : Caio Ribeiro Pereira : https://github.com/caio-ribeiro-pereira

    var pt_br = _moment__default.defineLocale('pt-br', {
        months : 'Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split('_'),
        monthsShort : 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),
        weekdays : 'Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado'.split('_'),
        weekdaysShort : 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),
        weekdaysMin : 'Dom_2ª_3ª_4ª_5ª_6ª_Sáb'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D [de] MMMM [de] YYYY',
            LLL : 'D [de] MMMM [de] YYYY [às] HH:mm',
            LLLL : 'dddd, D [de] MMMM [de] YYYY [às] HH:mm'
        },
        calendar : {
            sameDay: '[Hoje às] LT',
            nextDay: '[Amanhã às] LT',
            nextWeek: 'dddd [às] LT',
            lastDay: '[Ontem às] LT',
            lastWeek: function () {
                return (this.day() === 0 || this.day() === 6) ?
                    '[Último] dddd [às] LT' : // Saturday + Sunday
                    '[Última] dddd [às] LT'; // Monday - Friday
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'em %s',
            past : '%s atrás',
            s : 'poucos segundos',
            m : 'um minuto',
            mm : '%d minutos',
            h : 'uma hora',
            hh : '%d horas',
            d : 'um dia',
            dd : '%d dias',
            M : 'um mês',
            MM : '%d meses',
            y : 'um ano',
            yy : '%d anos'
        },
        ordinalParse: /\d{1,2}º/,
        ordinal : '%dº'
    });

    //! moment.js locale configuration
    //! locale : portuguese (pt)
    //! author : Jefferson : https://github.com/jalex79

    var pt = _moment__default.defineLocale('pt', {
        months : 'Janeiro_Fevereiro_Março_Abril_Maio_Junho_Julho_Agosto_Setembro_Outubro_Novembro_Dezembro'.split('_'),
        monthsShort : 'Jan_Fev_Mar_Abr_Mai_Jun_Jul_Ago_Set_Out_Nov_Dez'.split('_'),
        weekdays : 'Domingo_Segunda-Feira_Terça-Feira_Quarta-Feira_Quinta-Feira_Sexta-Feira_Sábado'.split('_'),
        weekdaysShort : 'Dom_Seg_Ter_Qua_Qui_Sex_Sáb'.split('_'),
        weekdaysMin : 'Dom_2ª_3ª_4ª_5ª_6ª_Sáb'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D [de] MMMM [de] YYYY',
            LLL : 'D [de] MMMM [de] YYYY HH:mm',
            LLLL : 'dddd, D [de] MMMM [de] YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Hoje às] LT',
            nextDay: '[Amanhã às] LT',
            nextWeek: 'dddd [às] LT',
            lastDay: '[Ontem às] LT',
            lastWeek: function () {
                return (this.day() === 0 || this.day() === 6) ?
                    '[Último] dddd [às] LT' : // Saturday + Sunday
                    '[Última] dddd [às] LT'; // Monday - Friday
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'em %s',
            past : 'há %s',
            s : 'segundos',
            m : 'um minuto',
            mm : '%d minutos',
            h : 'uma hora',
            hh : '%d horas',
            d : 'um dia',
            dd : '%d dias',
            M : 'um mês',
            MM : '%d meses',
            y : 'um ano',
            yy : '%d anos'
        },
        ordinalParse: /\d{1,2}º/,
        ordinal : '%dº',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : romanian (ro)
    //! author : Vlad Gurdiga : https://github.com/gurdiga
    //! author : Valentin Agachi : https://github.com/avaly

    function ro__relativeTimeWithPlural(number, withoutSuffix, key) {
        var format = {
                'mm': 'minute',
                'hh': 'ore',
                'dd': 'zile',
                'MM': 'luni',
                'yy': 'ani'
            },
            separator = ' ';
        if (number % 100 >= 20 || (number >= 100 && number % 100 === 0)) {
            separator = ' de ';
        }
        return number + separator + format[key];
    }

    var ro = _moment__default.defineLocale('ro', {
        months : 'ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie'.split('_'),
        monthsShort : 'ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.'.split('_'),
        weekdays : 'duminică_luni_marți_miercuri_joi_vineri_sâmbătă'.split('_'),
        weekdaysShort : 'Dum_Lun_Mar_Mie_Joi_Vin_Sâm'.split('_'),
        weekdaysMin : 'Du_Lu_Ma_Mi_Jo_Vi_Sâ'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY H:mm',
            LLLL : 'dddd, D MMMM YYYY H:mm'
        },
        calendar : {
            sameDay: '[azi la] LT',
            nextDay: '[mâine la] LT',
            nextWeek: 'dddd [la] LT',
            lastDay: '[ieri la] LT',
            lastWeek: '[fosta] dddd [la] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'peste %s',
            past : '%s în urmă',
            s : 'câteva secunde',
            m : 'un minut',
            mm : ro__relativeTimeWithPlural,
            h : 'o oră',
            hh : ro__relativeTimeWithPlural,
            d : 'o zi',
            dd : ro__relativeTimeWithPlural,
            M : 'o lună',
            MM : ro__relativeTimeWithPlural,
            y : 'un an',
            yy : ro__relativeTimeWithPlural
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : russian (ru)
    //! author : Viktorminator : https://github.com/Viktorminator
    //! Author : Menelion Elensúle : https://github.com/Oire

    function ru__plural(word, num) {
        var forms = word.split('_');
        return num % 10 === 1 && num % 100 !== 11 ? forms[0] : (num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2]);
    }
    function ru__relativeTimeWithPlural(number, withoutSuffix, key) {
        var format = {
            'mm': withoutSuffix ? 'минута_минуты_минут' : 'минуту_минуты_минут',
            'hh': 'час_часа_часов',
            'dd': 'день_дня_дней',
            'MM': 'месяц_месяца_месяцев',
            'yy': 'год_года_лет'
        };
        if (key === 'm') {
            return withoutSuffix ? 'минута' : 'минуту';
        }
        else {
            return number + ' ' + ru__plural(format[key], +number);
        }
    }
    function ru__monthsCaseReplace(m, format) {
        var months = {
            'nominative': 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_'),
            'accusative': 'января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря'.split('_')
        },
        nounCase = (/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(format) ?
            'accusative' :
            'nominative';
        return months[nounCase][m.month()];
    }
    function ru__monthsShortCaseReplace(m, format) {
        var monthsShort = {
            'nominative': 'янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек'.split('_'),
            'accusative': 'янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек'.split('_')
        },
        nounCase = (/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/).test(format) ?
            'accusative' :
            'nominative';
        return monthsShort[nounCase][m.month()];
    }
    function ru__weekdaysCaseReplace(m, format) {
        var weekdays = {
            'nominative': 'воскресенье_понедельник_вторник_среда_четверг_пятница_суббота'.split('_'),
            'accusative': 'воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу'.split('_')
        },
        nounCase = (/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/).test(format) ?
            'accusative' :
            'nominative';
        return weekdays[nounCase][m.day()];
    }

    var ru = _moment__default.defineLocale('ru', {
        months : ru__monthsCaseReplace,
        monthsShort : ru__monthsShortCaseReplace,
        weekdays : ru__weekdaysCaseReplace,
        weekdaysShort : 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
        weekdaysMin : 'вс_пн_вт_ср_чт_пт_сб'.split('_'),
        monthsParse : [/^янв/i, /^фев/i, /^мар/i, /^апр/i, /^ма[й|я]/i, /^июн/i, /^июл/i, /^авг/i, /^сен/i, /^окт/i, /^ноя/i, /^дек/i],
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY г.',
            LLL : 'D MMMM YYYY г., HH:mm',
            LLLL : 'dddd, D MMMM YYYY г., HH:mm'
        },
        calendar : {
            sameDay: '[Сегодня в] LT',
            nextDay: '[Завтра в] LT',
            lastDay: '[Вчера в] LT',
            nextWeek: function () {
                return this.day() === 2 ? '[Во] dddd [в] LT' : '[В] dddd [в] LT';
            },
            lastWeek: function (now) {
                if (now.week() !== this.week()) {
                    switch (this.day()) {
                    case 0:
                        return '[В прошлое] dddd [в] LT';
                    case 1:
                    case 2:
                    case 4:
                        return '[В прошлый] dddd [в] LT';
                    case 3:
                    case 5:
                    case 6:
                        return '[В прошлую] dddd [в] LT';
                    }
                } else {
                    if (this.day() === 2) {
                        return '[Во] dddd [в] LT';
                    } else {
                        return '[В] dddd [в] LT';
                    }
                }
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'через %s',
            past : '%s назад',
            s : 'несколько секунд',
            m : ru__relativeTimeWithPlural,
            mm : ru__relativeTimeWithPlural,
            h : 'час',
            hh : ru__relativeTimeWithPlural,
            d : 'день',
            dd : ru__relativeTimeWithPlural,
            M : 'месяц',
            MM : ru__relativeTimeWithPlural,
            y : 'год',
            yy : ru__relativeTimeWithPlural
        },
        meridiemParse: /ночи|утра|дня|вечера/i,
        isPM : function (input) {
            return /^(дня|вечера)$/.test(input);
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'ночи';
            } else if (hour < 12) {
                return 'утра';
            } else if (hour < 17) {
                return 'дня';
            } else {
                return 'вечера';
            }
        },
        ordinalParse: /\d{1,2}-(й|го|я)/,
        ordinal: function (number, period) {
            switch (period) {
            case 'M':
            case 'd':
            case 'DDD':
                return number + '-й';
            case 'D':
                return number + '-го';
            case 'w':
            case 'W':
                return number + '-я';
            default:
                return number;
            }
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Sinhalese (si)
    //! author : Sampath Sitinamaluwa : https://github.com/sampathsris

    var si = _moment__default.defineLocale('si', {
        months : 'ජනවාරි_පෙබරවාරි_මාර්තු_අප්‍රේල්_මැයි_ජූනි_ජූලි_අගෝස්තු_සැප්තැම්බර්_ඔක්තෝබර්_නොවැම්බර්_දෙසැම්බර්'.split('_'),
        monthsShort : 'ජන_පෙබ_මාර්_අප්_මැයි_ජූනි_ජූලි_අගෝ_සැප්_ඔක්_නොවැ_දෙසැ'.split('_'),
        weekdays : 'ඉරිදා_සඳුදා_අඟහරුවාදා_බදාදා_බ්‍රහස්පතින්දා_සිකුරාදා_සෙනසුරාදා'.split('_'),
        weekdaysShort : 'ඉරි_සඳු_අඟ_බදා_බ්‍රහ_සිකු_සෙන'.split('_'),
        weekdaysMin : 'ඉ_ස_අ_බ_බ්‍ර_සි_සෙ'.split('_'),
        longDateFormat : {
            LT : 'a h:mm',
            LTS : 'a h:mm:ss',
            L : 'YYYY/MM/DD',
            LL : 'YYYY MMMM D',
            LLL : 'YYYY MMMM D, a h:mm',
            LLLL : 'YYYY MMMM D [වැනි] dddd, a h:mm:ss'
        },
        calendar : {
            sameDay : '[අද] LT[ට]',
            nextDay : '[හෙට] LT[ට]',
            nextWeek : 'dddd LT[ට]',
            lastDay : '[ඊයේ] LT[ට]',
            lastWeek : '[පසුගිය] dddd LT[ට]',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%sකින්',
            past : '%sකට පෙර',
            s : 'තත්පර කිහිපය',
            m : 'මිනිත්තුව',
            mm : 'මිනිත්තු %d',
            h : 'පැය',
            hh : 'පැය %d',
            d : 'දිනය',
            dd : 'දින %d',
            M : 'මාසය',
            MM : 'මාස %d',
            y : 'වසර',
            yy : 'වසර %d'
        },
        ordinalParse: /\d{1,2} වැනි/,
        ordinal : function (number) {
            return number + ' වැනි';
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours > 11) {
                return isLower ? 'ප.ව.' : 'පස් වරු';
            } else {
                return isLower ? 'පෙ.ව.' : 'පෙර වරු';
            }
        }
    });

    //! moment.js locale configuration
    //! locale : slovak (sk)
    //! author : Martin Minka : https://github.com/k2s
    //! based on work of petrbela : https://github.com/petrbela

    var sk__months = 'január_február_marec_apríl_máj_jún_júl_august_september_október_november_december'.split('_'),
        sk__monthsShort = 'jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec'.split('_');
    function sk__plural(n) {
        return (n > 1) && (n < 5);
    }
    function sk__translate(number, withoutSuffix, key, isFuture) {
        var result = number + ' ';
        switch (key) {
        case 's':  // a few seconds / in a few seconds / a few seconds ago
            return (withoutSuffix || isFuture) ? 'pár sekúnd' : 'pár sekundami';
        case 'm':  // a minute / in a minute / a minute ago
            return withoutSuffix ? 'minúta' : (isFuture ? 'minútu' : 'minútou');
        case 'mm': // 9 minutes / in 9 minutes / 9 minutes ago
            if (withoutSuffix || isFuture) {
                return result + (sk__plural(number) ? 'minúty' : 'minút');
            } else {
                return result + 'minútami';
            }
            break;
        case 'h':  // an hour / in an hour / an hour ago
            return withoutSuffix ? 'hodina' : (isFuture ? 'hodinu' : 'hodinou');
        case 'hh': // 9 hours / in 9 hours / 9 hours ago
            if (withoutSuffix || isFuture) {
                return result + (sk__plural(number) ? 'hodiny' : 'hodín');
            } else {
                return result + 'hodinami';
            }
            break;
        case 'd':  // a day / in a day / a day ago
            return (withoutSuffix || isFuture) ? 'deň' : 'dňom';
        case 'dd': // 9 days / in 9 days / 9 days ago
            if (withoutSuffix || isFuture) {
                return result + (sk__plural(number) ? 'dni' : 'dní');
            } else {
                return result + 'dňami';
            }
            break;
        case 'M':  // a month / in a month / a month ago
            return (withoutSuffix || isFuture) ? 'mesiac' : 'mesiacom';
        case 'MM': // 9 months / in 9 months / 9 months ago
            if (withoutSuffix || isFuture) {
                return result + (sk__plural(number) ? 'mesiace' : 'mesiacov');
            } else {
                return result + 'mesiacmi';
            }
            break;
        case 'y':  // a year / in a year / a year ago
            return (withoutSuffix || isFuture) ? 'rok' : 'rokom';
        case 'yy': // 9 years / in 9 years / 9 years ago
            if (withoutSuffix || isFuture) {
                return result + (sk__plural(number) ? 'roky' : 'rokov');
            } else {
                return result + 'rokmi';
            }
            break;
        }
    }

    var sk = _moment__default.defineLocale('sk', {
        months : sk__months,
        monthsShort : sk__monthsShort,
        monthsParse : (function (months, monthsShort) {
            var i, _monthsParse = [];
            for (i = 0; i < 12; i++) {
                // use custom parser to solve problem with July (červenec)
                _monthsParse[i] = new RegExp('^' + months[i] + '$|^' + monthsShort[i] + '$', 'i');
            }
            return _monthsParse;
        }(sk__months, sk__monthsShort)),
        weekdays : 'nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota'.split('_'),
        weekdaysShort : 'ne_po_ut_st_št_pi_so'.split('_'),
        weekdaysMin : 'ne_po_ut_st_št_pi_so'.split('_'),
        longDateFormat : {
            LT: 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY H:mm',
            LLLL : 'dddd D. MMMM YYYY H:mm'
        },
        calendar : {
            sameDay: '[dnes o] LT',
            nextDay: '[zajtra o] LT',
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[v nedeľu o] LT';
                case 1:
                case 2:
                    return '[v] dddd [o] LT';
                case 3:
                    return '[v stredu o] LT';
                case 4:
                    return '[vo štvrtok o] LT';
                case 5:
                    return '[v piatok o] LT';
                case 6:
                    return '[v sobotu o] LT';
                }
            },
            lastDay: '[včera o] LT',
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[minulú nedeľu o] LT';
                case 1:
                case 2:
                    return '[minulý] dddd [o] LT';
                case 3:
                    return '[minulú stredu o] LT';
                case 4:
                case 5:
                    return '[minulý] dddd [o] LT';
                case 6:
                    return '[minulú sobotu o] LT';
                }
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'za %s',
            past : 'pred %s',
            s : sk__translate,
            m : sk__translate,
            mm : sk__translate,
            h : sk__translate,
            hh : sk__translate,
            d : sk__translate,
            dd : sk__translate,
            M : sk__translate,
            MM : sk__translate,
            y : sk__translate,
            yy : sk__translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : slovenian (sl)
    //! author : Robert Sedovšek : https://github.com/sedovsek

    function sl__processRelativeTime(number, withoutSuffix, key, isFuture) {
        var result = number + ' ';
        switch (key) {
        case 's':
            return withoutSuffix || isFuture ? 'nekaj sekund' : 'nekaj sekundami';
        case 'm':
            return withoutSuffix ? 'ena minuta' : 'eno minuto';
        case 'mm':
            if (number === 1) {
                result += withoutSuffix ? 'minuta' : 'minuto';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'minuti' : 'minutama';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'minute' : 'minutami';
            } else {
                result += withoutSuffix || isFuture ? 'minut' : 'minutami';
            }
            return result;
        case 'h':
            return withoutSuffix ? 'ena ura' : 'eno uro';
        case 'hh':
            if (number === 1) {
                result += withoutSuffix ? 'ura' : 'uro';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'uri' : 'urama';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'ure' : 'urami';
            } else {
                result += withoutSuffix || isFuture ? 'ur' : 'urami';
            }
            return result;
        case 'd':
            return withoutSuffix || isFuture ? 'en dan' : 'enim dnem';
        case 'dd':
            if (number === 1) {
                result += withoutSuffix || isFuture ? 'dan' : 'dnem';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'dni' : 'dnevoma';
            } else {
                result += withoutSuffix || isFuture ? 'dni' : 'dnevi';
            }
            return result;
        case 'M':
            return withoutSuffix || isFuture ? 'en mesec' : 'enim mesecem';
        case 'MM':
            if (number === 1) {
                result += withoutSuffix || isFuture ? 'mesec' : 'mesecem';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'meseca' : 'mesecema';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'mesece' : 'meseci';
            } else {
                result += withoutSuffix || isFuture ? 'mesecev' : 'meseci';
            }
            return result;
        case 'y':
            return withoutSuffix || isFuture ? 'eno leto' : 'enim letom';
        case 'yy':
            if (number === 1) {
                result += withoutSuffix || isFuture ? 'leto' : 'letom';
            } else if (number === 2) {
                result += withoutSuffix || isFuture ? 'leti' : 'letoma';
            } else if (number < 5) {
                result += withoutSuffix || isFuture ? 'leta' : 'leti';
            } else {
                result += withoutSuffix || isFuture ? 'let' : 'leti';
            }
            return result;
        }
    }

    var sl = _moment__default.defineLocale('sl', {
        months : 'januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december'.split('_'),
        monthsShort : 'jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.'.split('_'),
        weekdays : 'nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota'.split('_'),
        weekdaysShort : 'ned._pon._tor._sre._čet._pet._sob.'.split('_'),
        weekdaysMin : 'ne_po_to_sr_če_pe_so'.split('_'),
        longDateFormat : {
            LT : 'H:mm',
            LTS : 'H:mm:ss',
            L : 'DD. MM. YYYY',
            LL : 'D. MMMM YYYY',
            LLL : 'D. MMMM YYYY H:mm',
            LLLL : 'dddd, D. MMMM YYYY H:mm'
        },
        calendar : {
            sameDay  : '[danes ob] LT',
            nextDay  : '[jutri ob] LT',

            nextWeek : function () {
                switch (this.day()) {
                case 0:
                    return '[v] [nedeljo] [ob] LT';
                case 3:
                    return '[v] [sredo] [ob] LT';
                case 6:
                    return '[v] [soboto] [ob] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[v] dddd [ob] LT';
                }
            },
            lastDay  : '[včeraj ob] LT',
            lastWeek : function () {
                switch (this.day()) {
                case 0:
                    return '[prejšnjo] [nedeljo] [ob] LT';
                case 3:
                    return '[prejšnjo] [sredo] [ob] LT';
                case 6:
                    return '[prejšnjo] [soboto] [ob] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[prejšnji] dddd [ob] LT';
                }
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'čez %s',
            past   : 'pred %s',
            s      : sl__processRelativeTime,
            m      : sl__processRelativeTime,
            mm     : sl__processRelativeTime,
            h      : sl__processRelativeTime,
            hh     : sl__processRelativeTime,
            d      : sl__processRelativeTime,
            dd     : sl__processRelativeTime,
            M      : sl__processRelativeTime,
            MM     : sl__processRelativeTime,
            y      : sl__processRelativeTime,
            yy     : sl__processRelativeTime
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Albanian (sq)
    //! author : Flakërim Ismani : https://github.com/flakerimi
    //! author: Menelion Elensúle: https://github.com/Oire (tests)
    //! author : Oerd Cukalla : https://github.com/oerd (fixes)

    var sq = _moment__default.defineLocale('sq', {
        months : 'Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor'.split('_'),
        monthsShort : 'Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj'.split('_'),
        weekdays : 'E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë'.split('_'),
        weekdaysShort : 'Die_Hën_Mar_Mër_Enj_Pre_Sht'.split('_'),
        weekdaysMin : 'D_H_Ma_Më_E_P_Sh'.split('_'),
        meridiemParse: /PD|MD/,
        isPM: function (input) {
            return input.charAt(0) === 'M';
        },
        meridiem : function (hours, minutes, isLower) {
            return hours < 12 ? 'PD' : 'MD';
        },
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay : '[Sot në] LT',
            nextDay : '[Nesër në] LT',
            nextWeek : 'dddd [në] LT',
            lastDay : '[Dje në] LT',
            lastWeek : 'dddd [e kaluar në] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'në %s',
            past : '%s më parë',
            s : 'disa sekonda',
            m : 'një minutë',
            mm : '%d minuta',
            h : 'një orë',
            hh : '%d orë',
            d : 'një ditë',
            dd : '%d ditë',
            M : 'një muaj',
            MM : '%d muaj',
            y : 'një vit',
            yy : '%d vite'
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Serbian-cyrillic (sr-cyrl)
    //! author : Milan Janačković<milanjanackovic@gmail.com> : https://github.com/milan-j

    var sr_cyrl__translator = {
        words: { //Different grammatical cases
            m: ['један минут', 'једне минуте'],
            mm: ['минут', 'минуте', 'минута'],
            h: ['један сат', 'једног сата'],
            hh: ['сат', 'сата', 'сати'],
            dd: ['дан', 'дана', 'дана'],
            MM: ['месец', 'месеца', 'месеци'],
            yy: ['година', 'године', 'година']
        },
        correctGrammaticalCase: function (number, wordKey) {
            return number === 1 ? wordKey[0] : (number >= 2 && number <= 4 ? wordKey[1] : wordKey[2]);
        },
        translate: function (number, withoutSuffix, key) {
            var wordKey = sr_cyrl__translator.words[key];
            if (key.length === 1) {
                return withoutSuffix ? wordKey[0] : wordKey[1];
            } else {
                return number + ' ' + sr_cyrl__translator.correctGrammaticalCase(number, wordKey);
            }
        }
    };

    var sr_cyrl = _moment__default.defineLocale('sr-cyrl', {
        months: ['јануар', 'фебруар', 'март', 'април', 'мај', 'јун', 'јул', 'август', 'септембар', 'октобар', 'новембар', 'децембар'],
        monthsShort: ['јан.', 'феб.', 'мар.', 'апр.', 'мај', 'јун', 'јул', 'авг.', 'сеп.', 'окт.', 'нов.', 'дец.'],
        weekdays: ['недеља', 'понедељак', 'уторак', 'среда', 'четвртак', 'петак', 'субота'],
        weekdaysShort: ['нед.', 'пон.', 'уто.', 'сре.', 'чет.', 'пет.', 'суб.'],
        weekdaysMin: ['не', 'по', 'ут', 'ср', 'че', 'пе', 'су'],
        longDateFormat: {
            LT: 'H:mm',
            LTS : 'H:mm:ss',
            L: 'DD. MM. YYYY',
            LL: 'D. MMMM YYYY',
            LLL: 'D. MMMM YYYY H:mm',
            LLLL: 'dddd, D. MMMM YYYY H:mm'
        },
        calendar: {
            sameDay: '[данас у] LT',
            nextDay: '[сутра у] LT',
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[у] [недељу] [у] LT';
                case 3:
                    return '[у] [среду] [у] LT';
                case 6:
                    return '[у] [суботу] [у] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[у] dddd [у] LT';
                }
            },
            lastDay  : '[јуче у] LT',
            lastWeek : function () {
                var lastWeekDays = [
                    '[прошле] [недеље] [у] LT',
                    '[прошлог] [понедељка] [у] LT',
                    '[прошлог] [уторка] [у] LT',
                    '[прошле] [среде] [у] LT',
                    '[прошлог] [четвртка] [у] LT',
                    '[прошлог] [петка] [у] LT',
                    '[прошле] [суботе] [у] LT'
                ];
                return lastWeekDays[this.day()];
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'за %s',
            past   : 'пре %s',
            s      : 'неколико секунди',
            m      : sr_cyrl__translator.translate,
            mm     : sr_cyrl__translator.translate,
            h      : sr_cyrl__translator.translate,
            hh     : sr_cyrl__translator.translate,
            d      : 'дан',
            dd     : sr_cyrl__translator.translate,
            M      : 'месец',
            MM     : sr_cyrl__translator.translate,
            y      : 'годину',
            yy     : sr_cyrl__translator.translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Serbian-latin (sr)
    //! author : Milan Janačković<milanjanackovic@gmail.com> : https://github.com/milan-j

    var sr__translator = {
        words: { //Different grammatical cases
            m: ['jedan minut', 'jedne minute'],
            mm: ['minut', 'minute', 'minuta'],
            h: ['jedan sat', 'jednog sata'],
            hh: ['sat', 'sata', 'sati'],
            dd: ['dan', 'dana', 'dana'],
            MM: ['mesec', 'meseca', 'meseci'],
            yy: ['godina', 'godine', 'godina']
        },
        correctGrammaticalCase: function (number, wordKey) {
            return number === 1 ? wordKey[0] : (number >= 2 && number <= 4 ? wordKey[1] : wordKey[2]);
        },
        translate: function (number, withoutSuffix, key) {
            var wordKey = sr__translator.words[key];
            if (key.length === 1) {
                return withoutSuffix ? wordKey[0] : wordKey[1];
            } else {
                return number + ' ' + sr__translator.correctGrammaticalCase(number, wordKey);
            }
        }
    };

    var sr = _moment__default.defineLocale('sr', {
        months: ['januar', 'februar', 'mart', 'april', 'maj', 'jun', 'jul', 'avgust', 'septembar', 'oktobar', 'novembar', 'decembar'],
        monthsShort: ['jan.', 'feb.', 'mar.', 'apr.', 'maj', 'jun', 'jul', 'avg.', 'sep.', 'okt.', 'nov.', 'dec.'],
        weekdays: ['nedelja', 'ponedeljak', 'utorak', 'sreda', 'četvrtak', 'petak', 'subota'],
        weekdaysShort: ['ned.', 'pon.', 'uto.', 'sre.', 'čet.', 'pet.', 'sub.'],
        weekdaysMin: ['ne', 'po', 'ut', 'sr', 'če', 'pe', 'su'],
        longDateFormat: {
            LT: 'H:mm',
            LTS : 'H:mm:ss',
            L: 'DD. MM. YYYY',
            LL: 'D. MMMM YYYY',
            LLL: 'D. MMMM YYYY H:mm',
            LLLL: 'dddd, D. MMMM YYYY H:mm'
        },
        calendar: {
            sameDay: '[danas u] LT',
            nextDay: '[sutra u] LT',
            nextWeek: function () {
                switch (this.day()) {
                case 0:
                    return '[u] [nedelju] [u] LT';
                case 3:
                    return '[u] [sredu] [u] LT';
                case 6:
                    return '[u] [subotu] [u] LT';
                case 1:
                case 2:
                case 4:
                case 5:
                    return '[u] dddd [u] LT';
                }
            },
            lastDay  : '[juče u] LT',
            lastWeek : function () {
                var lastWeekDays = [
                    '[prošle] [nedelje] [u] LT',
                    '[prošlog] [ponedeljka] [u] LT',
                    '[prošlog] [utorka] [u] LT',
                    '[prošle] [srede] [u] LT',
                    '[prošlog] [četvrtka] [u] LT',
                    '[prošlog] [petka] [u] LT',
                    '[prošle] [subote] [u] LT'
                ];
                return lastWeekDays[this.day()];
            },
            sameElse : 'L'
        },
        relativeTime : {
            future : 'za %s',
            past   : 'pre %s',
            s      : 'nekoliko sekundi',
            m      : sr__translator.translate,
            mm     : sr__translator.translate,
            h      : sr__translator.translate,
            hh     : sr__translator.translate,
            d      : 'dan',
            dd     : sr__translator.translate,
            M      : 'mesec',
            MM     : sr__translator.translate,
            y      : 'godinu',
            yy     : sr__translator.translate
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : swedish (sv)
    //! author : Jens Alm : https://github.com/ulmus

    var sv = _moment__default.defineLocale('sv', {
        months : 'januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december'.split('_'),
        monthsShort : 'jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec'.split('_'),
        weekdays : 'söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag'.split('_'),
        weekdaysShort : 'sön_mån_tis_ons_tor_fre_lör'.split('_'),
        weekdaysMin : 'sö_må_ti_on_to_fr_lö'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'YYYY-MM-DD',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Idag] LT',
            nextDay: '[Imorgon] LT',
            lastDay: '[Igår] LT',
            nextWeek: '[På] dddd LT',
            lastWeek: '[I] dddd[s] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'om %s',
            past : 'för %s sedan',
            s : 'några sekunder',
            m : 'en minut',
            mm : '%d minuter',
            h : 'en timme',
            hh : '%d timmar',
            d : 'en dag',
            dd : '%d dagar',
            M : 'en månad',
            MM : '%d månader',
            y : 'ett år',
            yy : '%d år'
        },
        ordinalParse: /\d{1,2}(e|a)/,
        ordinal : function (number) {
            var b = number % 10,
                output = (~~(number % 100 / 10) === 1) ? 'e' :
                (b === 1) ? 'a' :
                (b === 2) ? 'a' :
                (b === 3) ? 'e' : 'e';
            return number + output;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : tamil (ta)
    //! author : Arjunkumar Krishnamoorthy : https://github.com/tk120404

    var ta = _moment__default.defineLocale('ta', {
        months : 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
        monthsShort : 'ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்'.split('_'),
        weekdays : 'ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை'.split('_'),
        weekdaysShort : 'ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி'.split('_'),
        weekdaysMin : 'ஞா_தி_செ_பு_வி_வெ_ச'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY, HH:mm',
            LLLL : 'dddd, D MMMM YYYY, HH:mm'
        },
        calendar : {
            sameDay : '[இன்று] LT',
            nextDay : '[நாளை] LT',
            nextWeek : 'dddd, LT',
            lastDay : '[நேற்று] LT',
            lastWeek : '[கடந்த வாரம்] dddd, LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s இல்',
            past : '%s முன்',
            s : 'ஒரு சில விநாடிகள்',
            m : 'ஒரு நிமிடம்',
            mm : '%d நிமிடங்கள்',
            h : 'ஒரு மணி நேரம்',
            hh : '%d மணி நேரம்',
            d : 'ஒரு நாள்',
            dd : '%d நாட்கள்',
            M : 'ஒரு மாதம்',
            MM : '%d மாதங்கள்',
            y : 'ஒரு வருடம்',
            yy : '%d ஆண்டுகள்'
        },
        ordinalParse: /\d{1,2}வது/,
        ordinal : function (number) {
            return number + 'வது';
        },
        // refer http://ta.wikipedia.org/s/1er1
        meridiemParse: /யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,
        meridiem : function (hour, minute, isLower) {
            if (hour < 2) {
                return ' யாமம்';
            } else if (hour < 6) {
                return ' வைகறை';  // வைகறை
            } else if (hour < 10) {
                return ' காலை'; // காலை
            } else if (hour < 14) {
                return ' நண்பகல்'; // நண்பகல்
            } else if (hour < 18) {
                return ' எற்பாடு'; // எற்பாடு
            } else if (hour < 22) {
                return ' மாலை'; // மாலை
            } else {
                return ' யாமம்';
            }
        },
        meridiemHour : function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === 'யாமம்') {
                return hour < 2 ? hour : hour + 12;
            } else if (meridiem === 'வைகறை' || meridiem === 'காலை') {
                return hour;
            } else if (meridiem === 'நண்பகல்') {
                return hour >= 10 ? hour : hour + 12;
            } else {
                return hour + 12;
            }
        },
        week : {
            dow : 0, // Sunday is the first day of the week.
            doy : 6  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : thai (th)
    //! author : Kridsada Thanabulpong : https://github.com/sirn

    var th = _moment__default.defineLocale('th', {
        months : 'มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม'.split('_'),
        monthsShort : 'มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา'.split('_'),
        weekdays : 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์'.split('_'),
        weekdaysShort : 'อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์'.split('_'), // yes, three characters difference
        weekdaysMin : 'อา._จ._อ._พ._พฤ._ศ._ส.'.split('_'),
        longDateFormat : {
            LT : 'H นาฬิกา m นาที',
            LTS : 'H นาฬิกา m นาที s วินาที',
            L : 'YYYY/MM/DD',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY เวลา H นาฬิกา m นาที',
            LLLL : 'วันddddที่ D MMMM YYYY เวลา H นาฬิกา m นาที'
        },
        meridiemParse: /ก่อนเที่ยง|หลังเที่ยง/,
        isPM: function (input) {
            return input === 'หลังเที่ยง';
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 12) {
                return 'ก่อนเที่ยง';
            } else {
                return 'หลังเที่ยง';
            }
        },
        calendar : {
            sameDay : '[วันนี้ เวลา] LT',
            nextDay : '[พรุ่งนี้ เวลา] LT',
            nextWeek : 'dddd[หน้า เวลา] LT',
            lastDay : '[เมื่อวานนี้ เวลา] LT',
            lastWeek : '[วัน]dddd[ที่แล้ว เวลา] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'อีก %s',
            past : '%sที่แล้ว',
            s : 'ไม่กี่วินาที',
            m : '1 นาที',
            mm : '%d นาที',
            h : '1 ชั่วโมง',
            hh : '%d ชั่วโมง',
            d : '1 วัน',
            dd : '%d วัน',
            M : '1 เดือน',
            MM : '%d เดือน',
            y : '1 ปี',
            yy : '%d ปี'
        }
    });

    //! moment.js locale configuration
    //! locale : Tagalog/Filipino (tl-ph)
    //! author : Dan Hagman

    var tl_ph = _moment__default.defineLocale('tl-ph', {
        months : 'Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre'.split('_'),
        monthsShort : 'Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis'.split('_'),
        weekdays : 'Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado'.split('_'),
        weekdaysShort : 'Lin_Lun_Mar_Miy_Huw_Biy_Sab'.split('_'),
        weekdaysMin : 'Li_Lu_Ma_Mi_Hu_Bi_Sab'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'MM/D/YYYY',
            LL : 'MMMM D, YYYY',
            LLL : 'MMMM D, YYYY HH:mm',
            LLLL : 'dddd, MMMM DD, YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Ngayon sa] LT',
            nextDay: '[Bukas sa] LT',
            nextWeek: 'dddd [sa] LT',
            lastDay: '[Kahapon sa] LT',
            lastWeek: 'dddd [huling linggo] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'sa loob ng %s',
            past : '%s ang nakalipas',
            s : 'ilang segundo',
            m : 'isang minuto',
            mm : '%d minuto',
            h : 'isang oras',
            hh : '%d oras',
            d : 'isang araw',
            dd : '%d araw',
            M : 'isang buwan',
            MM : '%d buwan',
            y : 'isang taon',
            yy : '%d taon'
        },
        ordinalParse: /\d{1,2}/,
        ordinal : function (number) {
            return number;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : turkish (tr)
    //! authors : Erhan Gundogan : https://github.com/erhangundogan,
    //!           Burak Yiğit Kaya: https://github.com/BYK

    var tr__suffixes = {
        1: '\'inci',
        5: '\'inci',
        8: '\'inci',
        70: '\'inci',
        80: '\'inci',
        2: '\'nci',
        7: '\'nci',
        20: '\'nci',
        50: '\'nci',
        3: '\'üncü',
        4: '\'üncü',
        100: '\'üncü',
        6: '\'ncı',
        9: '\'uncu',
        10: '\'uncu',
        30: '\'uncu',
        60: '\'ıncı',
        90: '\'ıncı'
    };

    var tr = _moment__default.defineLocale('tr', {
        months : 'Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık'.split('_'),
        monthsShort : 'Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara'.split('_'),
        weekdays : 'Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi'.split('_'),
        weekdaysShort : 'Paz_Pts_Sal_Çar_Per_Cum_Cts'.split('_'),
        weekdaysMin : 'Pz_Pt_Sa_Ça_Pe_Cu_Ct'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd, D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay : '[bugün saat] LT',
            nextDay : '[yarın saat] LT',
            nextWeek : '[haftaya] dddd [saat] LT',
            lastDay : '[dün] LT',
            lastWeek : '[geçen hafta] dddd [saat] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : '%s sonra',
            past : '%s önce',
            s : 'birkaç saniye',
            m : 'bir dakika',
            mm : '%d dakika',
            h : 'bir saat',
            hh : '%d saat',
            d : 'bir gün',
            dd : '%d gün',
            M : 'bir ay',
            MM : '%d ay',
            y : 'bir yıl',
            yy : '%d yıl'
        },
        ordinalParse: /\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,
        ordinal : function (number) {
            if (number === 0) {  // special case for zero
                return number + '\'ıncı';
            }
            var a = number % 10,
                b = number % 100 - a,
                c = number >= 100 ? 100 : null;
            return number + (tr__suffixes[a] || tr__suffixes[b] || tr__suffixes[c]);
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : talossan (tzl)
    //! author : Robin van der Vliet : https://github.com/robin0van0der0v with the help of Iustì Canun


    var tzl = _moment__default.defineLocale('tzl', {
        months : 'Januar_Fevraglh_Març_Avrïu_Mai_Gün_Julia_Guscht_Setemvar_Listopäts_Noemvar_Zecemvar'.split('_'),
        monthsShort : 'Jan_Fev_Mar_Avr_Mai_Gün_Jul_Gus_Set_Lis_Noe_Zec'.split('_'),
        weekdays : 'Súladi_Lúneçi_Maitzi_Márcuri_Xhúadi_Viénerçi_Sáturi'.split('_'),
        weekdaysShort : 'Súl_Lún_Mai_Már_Xhú_Vié_Sát'.split('_'),
        weekdaysMin : 'Sú_Lú_Ma_Má_Xh_Vi_Sá'.split('_'),
        longDateFormat : {
            LT : 'HH.mm',
            LTS : 'LT.ss',
            L : 'DD.MM.YYYY',
            LL : 'D. MMMM [dallas] YYYY',
            LLL : 'D. MMMM [dallas] YYYY LT',
            LLLL : 'dddd, [li] D. MMMM [dallas] YYYY LT'
        },
        meridiem : function (hours, minutes, isLower) {
            if (hours > 11) {
                return isLower ? 'd\'o' : 'D\'O';
            } else {
                return isLower ? 'd\'a' : 'D\'A';
            }
        },
        calendar : {
            sameDay : '[oxhi à] LT',
            nextDay : '[demà à] LT',
            nextWeek : 'dddd [à] LT',
            lastDay : '[ieiri à] LT',
            lastWeek : '[sür el] dddd [lasteu à] LT',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'osprei %s',
            past : 'ja%s',
            s : tzl__processRelativeTime,
            m : tzl__processRelativeTime,
            mm : tzl__processRelativeTime,
            h : tzl__processRelativeTime,
            hh : tzl__processRelativeTime,
            d : tzl__processRelativeTime,
            dd : tzl__processRelativeTime,
            M : tzl__processRelativeTime,
            MM : tzl__processRelativeTime,
            y : tzl__processRelativeTime,
            yy : tzl__processRelativeTime
        },
        ordinalParse: /\d{1,2}\./,
        ordinal : '%d.',
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    function tzl__processRelativeTime(number, withoutSuffix, key, isFuture) {
        var format = {
            's': ['viensas secunds', '\'iensas secunds'],
            'm': ['\'n míut', '\'iens míut'],
            'mm': [number + ' míuts', ' ' + number + ' míuts'],
            'h': ['\'n þora', '\'iensa þora'],
            'hh': [number + ' þoras', ' ' + number + ' þoras'],
            'd': ['\'n ziua', '\'iensa ziua'],
            'dd': [number + ' ziuas', ' ' + number + ' ziuas'],
            'M': ['\'n mes', '\'iens mes'],
            'MM': [number + ' mesen', ' ' + number + ' mesen'],
            'y': ['\'n ar', '\'iens ar'],
            'yy': [number + ' ars', ' ' + number + ' ars']
        };
        return isFuture ? format[key][0] : (withoutSuffix ? format[key][0] : format[key][1].trim());
    }

    //! moment.js locale configuration
    //! locale : Morocco Central Atlas Tamaziɣt in Latin (tzm-latn)
    //! author : Abdel Said : https://github.com/abdelsaid

    var tzm_latn = _moment__default.defineLocale('tzm-latn', {
        months : 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
        monthsShort : 'innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir'.split('_'),
        weekdays : 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
        weekdaysShort : 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
        weekdaysMin : 'asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[asdkh g] LT',
            nextDay: '[aska g] LT',
            nextWeek: 'dddd [g] LT',
            lastDay: '[assant g] LT',
            lastWeek: 'dddd [g] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'dadkh s yan %s',
            past : 'yan %s',
            s : 'imik',
            m : 'minuḍ',
            mm : '%d minuḍ',
            h : 'saɛa',
            hh : '%d tassaɛin',
            d : 'ass',
            dd : '%d ossan',
            M : 'ayowr',
            MM : '%d iyyirn',
            y : 'asgas',
            yy : '%d isgasn'
        },
        week : {
            dow : 6, // Saturday is the first day of the week.
            doy : 12  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : Morocco Central Atlas Tamaziɣt (tzm)
    //! author : Abdel Said : https://github.com/abdelsaid

    var tzm = _moment__default.defineLocale('tzm', {
        months : 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
        monthsShort : 'ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ'.split('_'),
        weekdays : 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
        weekdaysShort : 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
        weekdaysMin : 'ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS: 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'dddd D MMMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[ⴰⵙⴷⵅ ⴴ] LT',
            nextDay: '[ⴰⵙⴽⴰ ⴴ] LT',
            nextWeek: 'dddd [ⴴ] LT',
            lastDay: '[ⴰⵚⴰⵏⵜ ⴴ] LT',
            lastWeek: 'dddd [ⴴ] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : 'ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s',
            past : 'ⵢⴰⵏ %s',
            s : 'ⵉⵎⵉⴽ',
            m : 'ⵎⵉⵏⵓⴺ',
            mm : '%d ⵎⵉⵏⵓⴺ',
            h : 'ⵙⴰⵄⴰ',
            hh : '%d ⵜⴰⵙⵙⴰⵄⵉⵏ',
            d : 'ⴰⵙⵙ',
            dd : '%d oⵙⵙⴰⵏ',
            M : 'ⴰⵢoⵓⵔ',
            MM : '%d ⵉⵢⵢⵉⵔⵏ',
            y : 'ⴰⵙⴳⴰⵙ',
            yy : '%d ⵉⵙⴳⴰⵙⵏ'
        },
        week : {
            dow : 6, // Saturday is the first day of the week.
            doy : 12  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : ukrainian (uk)
    //! author : zemlanin : https://github.com/zemlanin
    //! Author : Menelion Elensúle : https://github.com/Oire

    function uk__plural(word, num) {
        var forms = word.split('_');
        return num % 10 === 1 && num % 100 !== 11 ? forms[0] : (num % 10 >= 2 && num % 10 <= 4 && (num % 100 < 10 || num % 100 >= 20) ? forms[1] : forms[2]);
    }
    function uk__relativeTimeWithPlural(number, withoutSuffix, key) {
        var format = {
            'mm': 'хвилина_хвилини_хвилин',
            'hh': 'година_години_годин',
            'dd': 'день_дні_днів',
            'MM': 'місяць_місяці_місяців',
            'yy': 'рік_роки_років'
        };
        if (key === 'm') {
            return withoutSuffix ? 'хвилина' : 'хвилину';
        }
        else if (key === 'h') {
            return withoutSuffix ? 'година' : 'годину';
        }
        else {
            return number + ' ' + uk__plural(format[key], +number);
        }
    }
    function uk__monthsCaseReplace(m, format) {
        var months = {
            'nominative': 'січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень'.split('_'),
            'accusative': 'січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня'.split('_')
        },
        nounCase = (/D[oD]? *MMMM?/).test(format) ?
            'accusative' :
            'nominative';
        return months[nounCase][m.month()];
    }
    function uk__weekdaysCaseReplace(m, format) {
        var weekdays = {
            'nominative': 'неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота'.split('_'),
            'accusative': 'неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу'.split('_'),
            'genitive': 'неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи'.split('_')
        },
        nounCase = (/(\[[ВвУу]\]) ?dddd/).test(format) ?
            'accusative' :
            ((/\[?(?:минулої|наступної)? ?\] ?dddd/).test(format) ?
                'genitive' :
                'nominative');
        return weekdays[nounCase][m.day()];
    }
    function processHoursFunction(str) {
        return function () {
            return str + 'о' + (this.hours() === 11 ? 'б' : '') + '] LT';
        };
    }

    var uk = _moment__default.defineLocale('uk', {
        months : uk__monthsCaseReplace,
        monthsShort : 'січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд'.split('_'),
        weekdays : uk__weekdaysCaseReplace,
        weekdaysShort : 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
        weekdaysMin : 'нд_пн_вт_ср_чт_пт_сб'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD.MM.YYYY',
            LL : 'D MMMM YYYY р.',
            LLL : 'D MMMM YYYY р., HH:mm',
            LLLL : 'dddd, D MMMM YYYY р., HH:mm'
        },
        calendar : {
            sameDay: processHoursFunction('[Сьогодні '),
            nextDay: processHoursFunction('[Завтра '),
            lastDay: processHoursFunction('[Вчора '),
            nextWeek: processHoursFunction('[У] dddd ['),
            lastWeek: function () {
                switch (this.day()) {
                case 0:
                case 3:
                case 5:
                case 6:
                    return processHoursFunction('[Минулої] dddd [').call(this);
                case 1:
                case 2:
                case 4:
                    return processHoursFunction('[Минулого] dddd [').call(this);
                }
            },
            sameElse: 'L'
        },
        relativeTime : {
            future : 'за %s',
            past : '%s тому',
            s : 'декілька секунд',
            m : uk__relativeTimeWithPlural,
            mm : uk__relativeTimeWithPlural,
            h : 'годину',
            hh : uk__relativeTimeWithPlural,
            d : 'день',
            dd : uk__relativeTimeWithPlural,
            M : 'місяць',
            MM : uk__relativeTimeWithPlural,
            y : 'рік',
            yy : uk__relativeTimeWithPlural
        },
        // M. E.: those two are virtually unused but a user might want to implement them for his/her website for some reason
        meridiemParse: /ночі|ранку|дня|вечора/,
        isPM: function (input) {
            return /^(дня|вечора)$/.test(input);
        },
        meridiem : function (hour, minute, isLower) {
            if (hour < 4) {
                return 'ночі';
            } else if (hour < 12) {
                return 'ранку';
            } else if (hour < 17) {
                return 'дня';
            } else {
                return 'вечора';
            }
        },
        ordinalParse: /\d{1,2}-(й|го)/,
        ordinal: function (number, period) {
            switch (period) {
            case 'M':
            case 'd':
            case 'DDD':
            case 'w':
            case 'W':
                return number + '-й';
            case 'D':
                return number + '-го';
            default:
                return number;
            }
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 1st is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : uzbek (uz)
    //! author : Sardor Muminov : https://github.com/muminoff

    var uz = _moment__default.defineLocale('uz', {
        months : 'январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь'.split('_'),
        monthsShort : 'янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек'.split('_'),
        weekdays : 'Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба'.split('_'),
        weekdaysShort : 'Якш_Душ_Сеш_Чор_Пай_Жум_Шан'.split('_'),
        weekdaysMin : 'Як_Ду_Се_Чо_Па_Жу_Ша'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM YYYY',
            LLL : 'D MMMM YYYY HH:mm',
            LLLL : 'D MMMM YYYY, dddd HH:mm'
        },
        calendar : {
            sameDay : '[Бугун соат] LT [да]',
            nextDay : '[Эртага] LT [да]',
            nextWeek : 'dddd [куни соат] LT [да]',
            lastDay : '[Кеча соат] LT [да]',
            lastWeek : '[Утган] dddd [куни соат] LT [да]',
            sameElse : 'L'
        },
        relativeTime : {
            future : 'Якин %s ичида',
            past : 'Бир неча %s олдин',
            s : 'фурсат',
            m : 'бир дакика',
            mm : '%d дакика',
            h : 'бир соат',
            hh : '%d соат',
            d : 'бир кун',
            dd : '%d кун',
            M : 'бир ой',
            MM : '%d ой',
            y : 'бир йил',
            yy : '%d йил'
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 7  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : vietnamese (vi)
    //! author : Bang Nguyen : https://github.com/bangnk

    var vi = _moment__default.defineLocale('vi', {
        months : 'tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12'.split('_'),
        monthsShort : 'Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12'.split('_'),
        weekdays : 'chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy'.split('_'),
        weekdaysShort : 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
        weekdaysMin : 'CN_T2_T3_T4_T5_T6_T7'.split('_'),
        longDateFormat : {
            LT : 'HH:mm',
            LTS : 'HH:mm:ss',
            L : 'DD/MM/YYYY',
            LL : 'D MMMM [năm] YYYY',
            LLL : 'D MMMM [năm] YYYY HH:mm',
            LLLL : 'dddd, D MMMM [năm] YYYY HH:mm',
            l : 'DD/M/YYYY',
            ll : 'D MMM YYYY',
            lll : 'D MMM YYYY HH:mm',
            llll : 'ddd, D MMM YYYY HH:mm'
        },
        calendar : {
            sameDay: '[Hôm nay lúc] LT',
            nextDay: '[Ngày mai lúc] LT',
            nextWeek: 'dddd [tuần tới lúc] LT',
            lastDay: '[Hôm qua lúc] LT',
            lastWeek: 'dddd [tuần rồi lúc] LT',
            sameElse: 'L'
        },
        relativeTime : {
            future : '%s tới',
            past : '%s trước',
            s : 'vài giây',
            m : 'một phút',
            mm : '%d phút',
            h : 'một giờ',
            hh : '%d giờ',
            d : 'một ngày',
            dd : '%d ngày',
            M : 'một tháng',
            MM : '%d tháng',
            y : 'một năm',
            yy : '%d năm'
        },
        ordinalParse: /\d{1,2}/,
        ordinal : function (number) {
            return number;
        },
        week : {
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : chinese (zh-cn)
    //! author : suupic : https://github.com/suupic
    //! author : Zeno Zeng : https://github.com/zenozeng

    var zh_cn = _moment__default.defineLocale('zh-cn', {
        months : '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
        monthsShort : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
        weekdays : '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
        weekdaysShort : '周日_周一_周二_周三_周四_周五_周六'.split('_'),
        weekdaysMin : '日_一_二_三_四_五_六'.split('_'),
        longDateFormat : {
            LT : 'Ah点mm分',
            LTS : 'Ah点m分s秒',
            L : 'YYYY-MM-DD',
            LL : 'YYYY年MMMD日',
            LLL : 'YYYY年MMMD日Ah点mm分',
            LLLL : 'YYYY年MMMD日ddddAh点mm分',
            l : 'YYYY-MM-DD',
            ll : 'YYYY年MMMD日',
            lll : 'YYYY年MMMD日Ah点mm分',
            llll : 'YYYY年MMMD日ddddAh点mm分'
        },
        meridiemParse: /凌晨|早上|上午|中午|下午|晚上/,
        meridiemHour: function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === '凌晨' || meridiem === '早上' ||
                    meridiem === '上午') {
                return hour;
            } else if (meridiem === '下午' || meridiem === '晚上') {
                return hour + 12;
            } else {
                // '中午'
                return hour >= 11 ? hour : hour + 12;
            }
        },
        meridiem : function (hour, minute, isLower) {
            var hm = hour * 100 + minute;
            if (hm < 600) {
                return '凌晨';
            } else if (hm < 900) {
                return '早上';
            } else if (hm < 1130) {
                return '上午';
            } else if (hm < 1230) {
                return '中午';
            } else if (hm < 1800) {
                return '下午';
            } else {
                return '晚上';
            }
        },
        calendar : {
            sameDay : function () {
                return this.minutes() === 0 ? '[今天]Ah[点整]' : '[今天]LT';
            },
            nextDay : function () {
                return this.minutes() === 0 ? '[明天]Ah[点整]' : '[明天]LT';
            },
            lastDay : function () {
                return this.minutes() === 0 ? '[昨天]Ah[点整]' : '[昨天]LT';
            },
            nextWeek : function () {
                var startOfWeek, prefix;
                startOfWeek = _moment__default().startOf('week');
                prefix = this.unix() - startOfWeek.unix() >= 7 * 24 * 3600 ? '[下]' : '[本]';
                return this.minutes() === 0 ? prefix + 'dddAh点整' : prefix + 'dddAh点mm';
            },
            lastWeek : function () {
                var startOfWeek, prefix;
                startOfWeek = _moment__default().startOf('week');
                prefix = this.unix() < startOfWeek.unix()  ? '[上]' : '[本]';
                return this.minutes() === 0 ? prefix + 'dddAh点整' : prefix + 'dddAh点mm';
            },
            sameElse : 'LL'
        },
        ordinalParse: /\d{1,2}(日|月|周)/,
        ordinal : function (number, period) {
            switch (period) {
            case 'd':
            case 'D':
            case 'DDD':
                return number + '日';
            case 'M':
                return number + '月';
            case 'w':
            case 'W':
                return number + '周';
            default:
                return number;
            }
        },
        relativeTime : {
            future : '%s内',
            past : '%s前',
            s : '几秒',
            m : '1 分钟',
            mm : '%d 分钟',
            h : '1 小时',
            hh : '%d 小时',
            d : '1 天',
            dd : '%d 天',
            M : '1 个月',
            MM : '%d 个月',
            y : '1 年',
            yy : '%d 年'
        },
        week : {
            // GB/T 7408-1994《数据元和交换格式·信息交换·日期和时间表示法》与ISO 8601:1988等效
            dow : 1, // Monday is the first day of the week.
            doy : 4  // The week that contains Jan 4th is the first week of the year.
        }
    });

    //! moment.js locale configuration
    //! locale : traditional chinese (zh-tw)
    //! author : Ben : https://github.com/ben-lin

    var zh_tw = _moment__default.defineLocale('zh-tw', {
        months : '一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月'.split('_'),
        monthsShort : '1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月'.split('_'),
        weekdays : '星期日_星期一_星期二_星期三_星期四_星期五_星期六'.split('_'),
        weekdaysShort : '週日_週一_週二_週三_週四_週五_週六'.split('_'),
        weekdaysMin : '日_一_二_三_四_五_六'.split('_'),
        longDateFormat : {
            LT : 'Ah點mm分',
            LTS : 'Ah點m分s秒',
            L : 'YYYY年MMMD日',
            LL : 'YYYY年MMMD日',
            LLL : 'YYYY年MMMD日Ah點mm分',
            LLLL : 'YYYY年MMMD日ddddAh點mm分',
            l : 'YYYY年MMMD日',
            ll : 'YYYY年MMMD日',
            lll : 'YYYY年MMMD日Ah點mm分',
            llll : 'YYYY年MMMD日ddddAh點mm分'
        },
        meridiemParse: /早上|上午|中午|下午|晚上/,
        meridiemHour : function (hour, meridiem) {
            if (hour === 12) {
                hour = 0;
            }
            if (meridiem === '早上' || meridiem === '上午') {
                return hour;
            } else if (meridiem === '中午') {
                return hour >= 11 ? hour : hour + 12;
            } else if (meridiem === '下午' || meridiem === '晚上') {
                return hour + 12;
            }
        },
        meridiem : function (hour, minute, isLower) {
            var hm = hour * 100 + minute;
            if (hm < 900) {
                return '早上';
            } else if (hm < 1130) {
                return '上午';
            } else if (hm < 1230) {
                return '中午';
            } else if (hm < 1800) {
                return '下午';
            } else {
                return '晚上';
            }
        },
        calendar : {
            sameDay : '[今天]LT',
            nextDay : '[明天]LT',
            nextWeek : '[下]ddddLT',
            lastDay : '[昨天]LT',
            lastWeek : '[上]ddddLT',
            sameElse : 'L'
        },
        ordinalParse: /\d{1,2}(日|月|週)/,
        ordinal : function (number, period) {
            switch (period) {
            case 'd' :
            case 'D' :
            case 'DDD' :
                return number + '日';
            case 'M' :
                return number + '月';
            case 'w' :
            case 'W' :
                return number + '週';
            default :
                return number;
            }
        },
        relativeTime : {
            future : '%s內',
            past : '%s前',
            s : '幾秒',
            m : '一分鐘',
            mm : '%d分鐘',
            h : '一小時',
            hh : '%d小時',
            d : '一天',
            dd : '%d天',
            M : '一個月',
            MM : '%d個月',
            y : '一年',
            yy : '%d年'
        }
    });

    var moment_with_locales = _moment__default;
    moment_with_locales.locale('en');

    return moment_with_locales;

}));
/*! version : 4.17.37
 =========================================================
 bootstrap-datetimejs
 https://github.com/Eonasdan/bootstrap-datetimepicker
 Copyright (c) 2015 Jonathan Peterson
 =========================================================
 */
/*
 The MIT License (MIT)

 Copyright (c) 2015 Jonathan Peterson

 Permission is hereby granted, free of charge, to any person obtaining a copy
 of this software and associated documentation files (the "Software"), to deal
 in the Software without restriction, including without limitation the rights
 to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
 copies of the Software, and to permit persons to whom the Software is
 furnished to do so, subject to the following conditions:

 The above copyright notice and this permission notice shall be included in
 all copies or substantial portions of the Software.

 THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
 OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
 THE SOFTWARE.
 */
/*global define:false */
/*global exports:false */
/*global require:false */
/*global jQuery:false */
/*global moment:false */
(function (factory) {
    
    if (typeof define === 'function' && define.amd) {
        // AMD is used - Register as an anonymous module.
        define('jquery-datetimepicker',['jquery', 'moment'], factory);
    } else if (typeof exports === 'object') {
        factory(require('jquery'), require('moment'));
    } else {
        // Neither AMD nor CommonJS used. Use global variables.
        if (typeof jQuery === 'undefined') {
            throw 'bootstrap-datetimepicker requires jQuery to be loaded first';
        }
        if (typeof moment === 'undefined') {
            throw 'bootstrap-datetimepicker requires Moment.js to be loaded first';
        }
        factory(jQuery, moment);
    }
}(function ($, moment) {
    
    if (!moment) {
        throw new Error('bootstrap-datetimepicker requires Moment.js to be loaded first');
    }

    var dateTimePicker = function (element, options) {
        var picker = {},
            date,
            viewDate,
            unset = true,
            input,
            component = false,
            widget = false,
            use24Hours,
            minViewModeNumber = 0,
            actualFormat,
            parseFormats,
            currentViewMode,
            datePickerModes = [
                {
                    clsName: 'days',
                    navFnc: 'M',
                    navStep: 1
                },
                {
                    clsName: 'months',
                    navFnc: 'y',
                    navStep: 1
                },
                {
                    clsName: 'years',
                    navFnc: 'y',
                    navStep: 10
                },
                {
                    clsName: 'decades',
                    navFnc: 'y',
                    navStep: 100
                }
            ],
            viewModes = ['days', 'months', 'years', 'decades'],
            verticalModes = ['top', 'bottom', 'auto'],
            horizontalModes = ['left', 'right', 'auto'],
            toolbarPlacements = ['default', 'top', 'bottom'],
            keyMap = {
                'up': 38,
                38: 'up',
                'down': 40,
                40: 'down',
                'left': 37,
                37: 'left',
                'right': 39,
                39: 'right',
                'tab': 9,
                9: 'tab',
                'escape': 27,
                27: 'escape',
                'enter': 13,
                13: 'enter',
                'pageUp': 33,
                33: 'pageUp',
                'pageDown': 34,
                34: 'pageDown',
                'shift': 16,
                16: 'shift',
                'control': 17,
                17: 'control',
                'space': 32,
                32: 'space',
                't': 84,
                84: 't',
                'delete': 46,
                46: 'delete'
            },
            keyState = {},

            /********************************************************************************
             *
             * Private functions
             *
             ********************************************************************************/
            getMoment = function (d) {
                var tzEnabled = false,
                    returnMoment,
                    currentZoneOffset,
                    incomingZoneOffset,
                    timeZoneIndicator,
                    dateWithTimeZoneInfo;

                if (moment.tz !== undefined && options.timeZone !== undefined && options.timeZone !== null && options.timeZone !== '') {
                    tzEnabled = true;
                }
                if (d === undefined || d === null) {
                    if (tzEnabled) {
                        returnMoment = moment().tz(options.timeZone).startOf('d');
                    } else {
                        returnMoment = moment().startOf('d');
                    }
                } else {
                    if (tzEnabled) {
                        currentZoneOffset = moment().tz(options.timeZone).utcOffset();
                        incomingZoneOffset = moment(d, parseFormats, options.useStrict).utcOffset();
                        if (incomingZoneOffset !== currentZoneOffset) {
                            timeZoneIndicator = moment().tz(options.timeZone).format('Z');
                            dateWithTimeZoneInfo = moment(d, parseFormats, options.useStrict).format('YYYY-MM-DD[T]HH:mm:ss') + timeZoneIndicator;
                            returnMoment = moment(dateWithTimeZoneInfo, parseFormats, options.useStrict).tz(options.timeZone);
                        } else {
                            returnMoment = moment(d, parseFormats, options.useStrict).tz(options.timeZone);
                        }
                    } else {
                        returnMoment = moment(d, parseFormats, options.useStrict);
                    }
                }
                return returnMoment;
            },
            isEnabled = function (granularity) {
                if (typeof granularity !== 'string' || granularity.length > 1) {
                    throw new TypeError('isEnabled expects a single character string parameter');
                }
                switch (granularity) {
                    case 'y':
                        return actualFormat.indexOf('Y') !== -1;
                    case 'M':
                        return actualFormat.indexOf('M') !== -1;
                    case 'd':
                        return actualFormat.toLowerCase().indexOf('d') !== -1;
                    case 'h':
                    case 'H':
                        return actualFormat.toLowerCase().indexOf('h') !== -1;
                    case 'm':
                        return actualFormat.indexOf('m') !== -1;
                    case 's':
                        return actualFormat.indexOf('s') !== -1;
                    default:
                        return false;
                }
            },
            hasTime = function () {
                return (isEnabled('h') || isEnabled('m') || isEnabled('s'));
            },

            hasDate = function () {
                return (isEnabled('y') || isEnabled('M') || isEnabled('d'));
            },

            getDatePickerTemplate = function () {
                var headTemplate = $('<thead>')
                        .append($('<tr>')
                            .append($('<th>').addClass('prev').attr('data-action', 'previous')
                                .append($('<span>').addClass(options.icons.previous))
                                )
                            .append($('<th>').addClass('picker-switch').attr('data-action', 'pickerSwitch').attr('colspan', (options.calendarWeeks ? '6' : '5')))
                            .append($('<th>').addClass('next').attr('data-action', 'next')
                                .append($('<span>').addClass(options.icons.next))
                                )
                            ),
                    contTemplate = $('<tbody>')
                        .append($('<tr>')
                            .append($('<td>').attr('colspan', (options.calendarWeeks ? '8' : '7')))
                            );

                return [
                    $('<div>').addClass('datepicker-days')
                        .append($('<table>').addClass('table-condensed')
                            .append(headTemplate)
                            .append($('<tbody>'))
                            ),
                    $('<div>').addClass('datepicker-months')
                        .append($('<table>').addClass('table-condensed')
                            .append(headTemplate.clone())
                            .append(contTemplate.clone())
                            ),
                    $('<div>').addClass('datepicker-years')
                        .append($('<table>').addClass('table-condensed')
                            .append(headTemplate.clone())
                            .append(contTemplate.clone())
                            ),
                    $('<div>').addClass('datepicker-decades')
                        .append($('<table>').addClass('table-condensed')
                            .append(headTemplate.clone())
                            .append(contTemplate.clone())
                            )
                ];
            },

            getTimePickerMainTemplate = function () {
                var topRow = $('<tr>'),
                    middleRow = $('<tr>'),
                    bottomRow = $('<tr>');

                if (isEnabled('h')) {
                    topRow.append($('<td>')
                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.incrementHour }).addClass('btn').attr('data-action', 'incrementHours')
                            .append($('<span>').addClass(options.icons.up))));
                    middleRow.append($('<td>')
                        .append($('<span>').addClass('timepicker-hour').attr({ 'data-time-component': 'hours', 'title': options.tooltips.pickHour }).attr('data-action', 'showHours')));
                    bottomRow.append($('<td>')
                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.decrementHour }).addClass('btn').attr('data-action', 'decrementHours')
                            .append($('<span>').addClass(options.icons.down))));
                }
                if (isEnabled('m')) {
                    if (isEnabled('h')) {
                        topRow.append($('<td>').addClass('separator'));
                        middleRow.append($('<td>').addClass('separator').html(':'));
                        bottomRow.append($('<td>').addClass('separator'));
                    }
                    topRow.append($('<td>')
                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.incrementMinute }).addClass('btn').attr('data-action', 'incrementMinutes')
                            .append($('<span>').addClass(options.icons.up))));
                    middleRow.append($('<td>')
                        .append($('<span>').addClass('timepicker-minute').attr({ 'data-time-component': 'minutes', 'title': options.tooltips.pickMinute }).attr('data-action', 'showMinutes')));
                    bottomRow.append($('<td>')
                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.decrementMinute }).addClass('btn').attr('data-action', 'decrementMinutes')
                            .append($('<span>').addClass(options.icons.down))));
                }
                if (isEnabled('s')) {
                    if (isEnabled('m')) {
                        topRow.append($('<td>').addClass('separator'));
                        middleRow.append($('<td>').addClass('separator').html(':'));
                        bottomRow.append($('<td>').addClass('separator'));
                    }
                    topRow.append($('<td>')
                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.incrementSecond }).addClass('btn').attr('data-action', 'incrementSeconds')
                            .append($('<span>').addClass(options.icons.up))));
                    middleRow.append($('<td>')
                        .append($('<span>').addClass('timepicker-second').attr({ 'data-time-component': 'seconds', 'title': options.tooltips.pickSecond }).attr('data-action', 'showSeconds')));
                    bottomRow.append($('<td>')
                        .append($('<a>').attr({ href: '#', tabindex: '-1', 'title': options.tooltips.decrementSecond }).addClass('btn').attr('data-action', 'decrementSeconds')
                            .append($('<span>').addClass(options.icons.down))));
                }

                if (!use24Hours) {
                    topRow.append($('<td>').addClass('separator'));
                    middleRow.append($('<td>')
                        .append($('<button>').addClass('btn btn-primary').attr({ 'data-action': 'togglePeriod', tabindex: '-1', 'title': options.tooltips.togglePeriod })));
                    bottomRow.append($('<td>').addClass('separator'));
                }

                return $('<div>').addClass('timepicker-picker')
                    .append($('<table>').addClass('table-condensed')
                        .append([topRow, middleRow, bottomRow]));
            },

            getTimePickerTemplate = function () {
                var hoursView = $('<div>').addClass('timepicker-hours')
                        .append($('<table>').addClass('table-condensed')),
                    minutesView = $('<div>').addClass('timepicker-minutes')
                        .append($('<table>').addClass('table-condensed')),
                    secondsView = $('<div>').addClass('timepicker-seconds')
                        .append($('<table>').addClass('table-condensed')),
                    ret = [getTimePickerMainTemplate()];

                if (isEnabled('h')) {
                    ret.push(hoursView);
                }
                if (isEnabled('m')) {
                    ret.push(minutesView);
                }
                if (isEnabled('s')) {
                    ret.push(secondsView);
                }

                return ret;
            },

            getToolbar = function () {
                var row = [];
                if (options.showTodayButton) {
                    row.push($('<td>').append($('<a>').attr({ 'data-action': 'today', 'title': options.tooltips.today }).append($('<span>').addClass(options.icons.today))));
                }
                if (!options.sideBySide && hasDate() && hasTime()) {
                    row.push($('<td>').append(($('<a style="text-align:center;">')).attr({ 'data-action': 'togglePicker', 'title': options.tooltips.selectTime }).append($('<span>').text(options.tooltips.selectTime).addClass('glyphicon2'))));
                }
                if (options.showClear) {
                    row.push($('<td>').append($('<a>').attr({ 'data-action': 'clear', 'title': options.tooltips.clear }).append($('<span>').addClass(options.icons.clear))));
                }
                if (options.showClose) {
                    row.push($('<td>').append($('<a>').attr({ 'data-action': 'close', 'title': options.tooltips.close }).append($('<span>').addClass(options.icons.close))));
                }
                return $('<table>').addClass('table-condensed').append($('<tbody>').append($('<tr>').append(row)));
            },

            getTemplate = function () {
                var template = $('<div>').addClass('bootstrap-datetimepicker-widget dropdown-menu'),
                    dateView = $('<div>').addClass('datepicker').append(getDatePickerTemplate()),
                    timeView = $('<div>').addClass('timepicker').append(getTimePickerTemplate()),
                    content = $('<ul>').addClass('list-unstyled'),
                    toolbar = $('<li>').addClass('picker-switch' + (options.collapse ? ' accordion-toggle' : '')).append(getToolbar());

                if (options.inline) {
                    template.removeClass('dropdown-menu');
                }

                if (use24Hours) {
                    template.addClass('usetwentyfour');
                }
                if (isEnabled('s') && !use24Hours) {
                    template.addClass('wider');
                }

                if (options.sideBySide && hasDate() && hasTime()) {
                    template.addClass('timepicker-sbs');
                    if (options.toolbarPlacement === 'top') {
                        template.append(toolbar);
                    }
                    template.append(
                        $('<div>').addClass('row')
                            .append(dateView.addClass('col-md-6'))
                            .append(timeView.addClass('col-md-6'))
                    );
                    if (options.toolbarPlacement === 'bottom') {
                        template.append(toolbar);
                    }
                    return template;
                }

                if (options.toolbarPlacement === 'top') {
                    content.append(toolbar);
                }
                if (hasDate()) {
                    content.append($('<li>').addClass((options.collapse && hasTime() ? 'collapse in' : '')).append(dateView));
                }
                if (options.toolbarPlacement === 'default') {
                    content.append(toolbar);
                }
                if (hasTime()) {
                    content.append($('<li>').addClass((options.collapse && hasDate() ? 'collapse' : '')).append(timeView));
                }
                if (options.toolbarPlacement === 'bottom') {
                    content.append(toolbar);
                }
                return template.append(content);
            },

            dataToOptions = function () {
                var eData,
                    dataOptions = {};

                if (element.is('input') || options.inline) {
                    eData = element.data();
                } else {
                    eData = element.find('input').data();
                }

                if (eData.dateOptions && eData.dateOptions instanceof Object) {
                    dataOptions = $.extend(true, dataOptions, eData.dateOptions);
                }

                $.each(options, function (key) {
                    var attributeName = 'date' + key.charAt(0).toUpperCase() + key.slice(1);
                    if (eData[attributeName] !== undefined) {
                        dataOptions[key] = eData[attributeName];
                    }
                });
                return dataOptions;
            },

            place = function () {
                var position = (component || element).position(),
                    offset = (component || element).offset(),
                    vertical = options.widgetPositioning.vertical,
                    horizontal = options.widgetPositioning.horizontal,
                    parent;

                if (options.widgetParent) {
                    parent = options.widgetParent.append(widget);
                } else if (element.is('input')) {
                    parent = element.after(widget).parent();
                } else if (options.inline) {
                    parent = element.append(widget);
                    return;
                } else {
                    parent = element;
                    element.children().first().after(widget);
                }

                // Top and bottom logic
                if (vertical === 'auto') {
                    if (offset.top + widget.height() * 1.5 >= $(window).height() + $(window).scrollTop() &&
                        widget.height() + element.outerHeight() < offset.top) {
                        vertical = 'bottom';
                    } else {
                        vertical = 'bottom';
                    }
                }

                // Left and right logic
                if (horizontal === 'auto') {
                    if (parent.width() < offset.left + widget.outerWidth() / 2 &&
                        offset.left + widget.outerWidth() > $(window).width()) {
                        horizontal = 'right';
                    } else {
                        horizontal = 'left';
                    }
                }

                if (vertical === 'top') {
                    widget.addClass('top').removeClass('bottom');
                } else {
                    widget.addClass('bottom').removeClass('top');
                }

                if (horizontal === 'right') {
                    widget.addClass('pull-right');
                } else {
                    widget.removeClass('pull-right');
                }

                // find the first parent element that has a relative css positioning
                if (parent.css('position') !== 'relative') {
                    parent = parent.parents().filter(function () {
                        return $(this).css('position') === 'relative';
                    }).first();
                }

                if (parent.length === 0) {
                    throw new Error('datetimepicker component should be placed within a relative positioned container');
                }

                widget.css({
                    top: vertical === 'top' ? 'auto' : position.top + element.outerHeight(),
                    bottom: vertical === 'top' ? position.top + element.outerHeight() : 'auto',
                    left: horizontal === 'left' ? (parent === element ? 0 : position.left) : 'auto',
                    right: horizontal === 'left' ? 'auto' : parent.outerWidth() - element.outerWidth() - (parent === element ? 0 : position.left)
                });
            },

            notifyEvent = function (e) {
                if (e.type === 'dp.change' && ((e.date && e.date.isSame(e.oldDate)) || (!e.date && !e.oldDate))) {
                    return;
                }
                element.trigger(e);
            },

            viewUpdate = function (e) {
                if (e === 'y') {
                    e = 'YYYY';
                }
                notifyEvent({
                    type: 'dp.update',
                    change: e,
                    viewDate: viewDate.clone()
                });
            },

            showMode = function (dir) {
                if (!widget) {
                    return;
                }
                if (dir) {
                    currentViewMode = Math.max(minViewModeNumber, Math.min(3, currentViewMode + dir));
                }
                widget.find('.datepicker > div').hide().filter('.datepicker-' + datePickerModes[currentViewMode].clsName).show();
            },

            fillDow = function () {
                var row = $('<tr>'),
                    currentDate = viewDate.clone().startOf('w').startOf('d');

                if (options.calendarWeeks === true) {
                    row.append($('<th>').addClass('cw').text('#'));
                }

                while (currentDate.isBefore(viewDate.clone().endOf('w'))) {
                    row.append($('<th>').addClass('dow').text(currentDate.format('dd')));
                    currentDate.add(1, 'd');
                }
                widget.find('.datepicker-days thead').append(row);
            },

            isInDisabledDates = function (testDate) {
                return options.disabledDates[testDate.format('YYYY-MM-DD')] === true;
            },

            isInEnabledDates = function (testDate) {
                return options.enabledDates[testDate.format('YYYY-MM-DD')] === true;
            },

            isInDisabledHours = function (testDate) {
                return options.disabledHours[testDate.format('H')] === true;
            },

            isInEnabledHours = function (testDate) {
                return options.enabledHours[testDate.format('H')] === true;
            },

            isValid = function (targetMoment, granularity) {
                if (!targetMoment.isValid()) {
                    return false;
                }
                if (options.disabledDates && granularity === 'd' && isInDisabledDates(targetMoment)) {
                    return false;
                }
                if (options.enabledDates && granularity === 'd' && !isInEnabledDates(targetMoment)) {
                    return false;
                }
                if (options.minDate && targetMoment.isBefore(options.minDate, granularity)) {
                    return false;
                }
                if (options.maxDate && targetMoment.isAfter(options.maxDate, granularity)) {
                    return false;
                }
                if (options.daysOfWeekDisabled && granularity === 'd' && options.daysOfWeekDisabled.indexOf(targetMoment.day()) !== -1) {
                    return false;
                }
                if (options.disabledHours && (granularity === 'h' || granularity === 'm' || granularity === 's') && isInDisabledHours(targetMoment)) {
                    return false;
                }
                if (options.enabledHours && (granularity === 'h' || granularity === 'm' || granularity === 's') && !isInEnabledHours(targetMoment)) {
                    return false;
                }
                if (options.disabledTimeIntervals && (granularity === 'h' || granularity === 'm' || granularity === 's')) {
                    var found = false;
                    $.each(options.disabledTimeIntervals, function () {
                        if (targetMoment.isBetween(this[0], this[1])) {
                            found = true;
                            return false;
                        }
                    });
                    if (found) {
                        return false;
                    }
                }
                return true;
            },

            fillMonths = function () {
                var spans = [],
                    monthsShort = viewDate.clone().startOf('y').startOf('d');
                while (monthsShort.isSame(viewDate, 'y')) {
                    spans.push($('<span>').attr('data-action', 'selectMonth').addClass('month').text(monthsShort.format('MMM')));
                    monthsShort.add(1, 'M');
                }
                widget.find('.datepicker-months td').empty().append(spans);
            },

            updateMonths = function () {
                var monthsView = widget.find('.datepicker-months'),
                    monthsViewHeader = monthsView.find('th'),
                    months = monthsView.find('tbody').find('span');

                monthsViewHeader.eq(0).find('span').attr('title', options.tooltips.prevYear);
                monthsViewHeader.eq(1).attr('title', options.tooltips.selectYear);
                monthsViewHeader.eq(2).find('span').attr('title', options.tooltips.nextYear);

                monthsView.find('.disabled').removeClass('disabled');

                if (!isValid(viewDate.clone().subtract(1, 'y'), 'y')) {
                    monthsViewHeader.eq(0).addClass('disabled');
                }

                monthsViewHeader.eq(1).text(viewDate.year());

                if (!isValid(viewDate.clone().add(1, 'y'), 'y')) {
                    monthsViewHeader.eq(2).addClass('disabled');
                }

                months.removeClass('active');
                if (date.isSame(viewDate, 'y') && !unset) {
                    months.eq(date.month()).addClass('active');
                }

                months.each(function (index) {
                    if (!isValid(viewDate.clone().month(index), 'M')) {
                        $(this).addClass('disabled');
                    }
                });
            },

            updateYears = function () {
                var yearsView = widget.find('.datepicker-years'),
                    yearsViewHeader = yearsView.find('th'),
                    startYear = viewDate.clone().subtract(5, 'y'),
                    endYear = viewDate.clone().add(6, 'y'),
                    html = '';

                yearsViewHeader.eq(0).find('span').attr('title', options.tooltips.prevDecade);
                yearsViewHeader.eq(1).attr('title', options.tooltips.selectDecade);
                yearsViewHeader.eq(2).find('span').attr('title', options.tooltips.nextDecade);

                yearsView.find('.disabled').removeClass('disabled');

                if (options.minDate && options.minDate.isAfter(startYear, 'y')) {
                    yearsViewHeader.eq(0).addClass('disabled');
                }

                yearsViewHeader.eq(1).text(startYear.year() + '-' + endYear.year());

                if (options.maxDate && options.maxDate.isBefore(endYear, 'y')) {
                    yearsViewHeader.eq(2).addClass('disabled');
                }

                while (!startYear.isAfter(endYear, 'y')) {
                    html += '<span data-action="selectYear" class="year' + (startYear.isSame(date, 'y') && !unset ? ' active' : '') + (!isValid(startYear, 'y') ? ' disabled' : '') + '">' + startYear.year() + '</span>';
                    startYear.add(1, 'y');
                }

                yearsView.find('td').html(html);
            },

            updateDecades = function () {
                var decadesView = widget.find('.datepicker-decades'),
                    decadesViewHeader = decadesView.find('th'),
                    startDecade = moment({ y: viewDate.year() - (viewDate.year() % 100) - 1 }),
                    endDecade = startDecade.clone().add(100, 'y'),
                    startedAt = startDecade.clone(),
                    html = '';

                decadesViewHeader.eq(0).find('span').attr('title', options.tooltips.prevCentury);
                decadesViewHeader.eq(2).find('span').attr('title', options.tooltips.nextCentury);

                decadesView.find('.disabled').removeClass('disabled');

                if (startDecade.isSame(moment({ y: 1900 })) || (options.minDate && options.minDate.isAfter(startDecade, 'y'))) {
                    decadesViewHeader.eq(0).addClass('disabled');
                }

                decadesViewHeader.eq(1).text(startDecade.year() + '-' + endDecade.year());

                if (startDecade.isSame(moment({ y: 2000 })) || (options.maxDate && options.maxDate.isBefore(endDecade, 'y'))) {
                    decadesViewHeader.eq(2).addClass('disabled');
                }

                while (!startDecade.isAfter(endDecade, 'y')) {
                    html += '<span data-action="selectDecade" class="decade' + (startDecade.isSame(date, 'y') ? ' active' : '') +
                        (!isValid(startDecade, 'y') ? ' disabled' : '') + '" data-selection="' + (startDecade.year() + 6) + '">' + (startDecade.year() + 1) + ' - ' + (startDecade.year() + 12) + '</span>';
                    startDecade.add(12, 'y');
                }
                html += '<span></span><span></span><span></span>'; //push the dangling block over, at least this way it's even

                decadesView.find('td').html(html);
                decadesViewHeader.eq(1).text((startedAt.year() + 1) + '-' + (startDecade.year()));
            },

            fillDate = function () {
                var daysView = widget.find('.datepicker-days'),
                    daysViewHeader = daysView.find('th'),
                    currentDate,
                    html = [],
                    row,
                    clsName,
                    i;

                if (!hasDate()) {
                    return;
                }

                daysViewHeader.eq(0).find('span').attr('title', options.tooltips.prevMonth);
                daysViewHeader.eq(1).attr('title', options.tooltips.selectMonth);
                daysViewHeader.eq(2).find('span').attr('title', options.tooltips.nextMonth);

                daysView.find('.disabled').removeClass('disabled');
                daysViewHeader.eq(1).text(viewDate.format(options.dayViewHeaderFormat));

                if (!isValid(viewDate.clone().subtract(1, 'M'), 'M')) {
                    daysViewHeader.eq(0).addClass('disabled');
                }
                if (!isValid(viewDate.clone().add(1, 'M'), 'M')) {
                    daysViewHeader.eq(2).addClass('disabled');
                }

                currentDate = viewDate.clone().startOf('M').startOf('w').startOf('d');

                for (i = 0; i < 42; i++) { //always display 42 days (should show 6 weeks)
                    if (currentDate.weekday() === 0) {
                        row = $('<tr>');
                        if (options.calendarWeeks) {
                            row.append('<td class="cw">' + currentDate.week() + '</td>');
                        }
                        html.push(row);
                    }
                    clsName = '';
                    if (currentDate.isBefore(viewDate, 'M')) {
                        clsName += ' old';
                    }
                    if (currentDate.isAfter(viewDate, 'M')) {
                        clsName += ' new';
                    }
                    if (currentDate.isSame(date, 'd') && !unset) {
                        clsName += ' active';
                    }
                    if (!isValid(currentDate, 'd')) {
                        clsName += ' disabled';
                    }
                    if (currentDate.isSame(getMoment(), 'd')) {
                        clsName += ' today';
                    }
                    if (currentDate.day() === 0 || currentDate.day() === 6) {
                        clsName += ' weekend';
                    }
                    row.append('<td data-action="selectDay" data-day="' + currentDate.format('L') + '" class="day' + clsName + '">' + currentDate.date() + '</td>');
                    currentDate.add(1, 'd');
                }

                daysView.find('tbody').empty().append(html);

                updateMonths();

                updateYears();

                updateDecades();
            },

            fillHours = function () {
                var table = widget.find('.timepicker-hours table'),
                    currentHour = viewDate.clone().startOf('d'),
                    html = [],
                    row = $('<tr>');

                if (viewDate.hour() > 11 && !use24Hours) {
                    currentHour.hour(12);
                }
                while (currentHour.isSame(viewDate, 'd') && (use24Hours || (viewDate.hour() < 12 && currentHour.hour() < 12) || viewDate.hour() > 11)) {
                    if (currentHour.hour() % 4 === 0) {
                        row = $('<tr>');
                        html.push(row);
                    }
                    row.append('<td data-action="selectHour" class="hour' + (!isValid(currentHour, 'h') ? ' disabled' : '') + '">' + currentHour.format(use24Hours ? 'HH' : 'hh') + '</td>');
                    currentHour.add(1, 'h');
                }
                table.empty().append(html);
            },

            fillMinutes = function () {
                var table = widget.find('.timepicker-minutes table'),
                    currentMinute = viewDate.clone().startOf('h'),
                    html = [],
                    row = $('<tr>'),
                    step = options.stepping === 1 ? 5 : options.stepping;

                while (viewDate.isSame(currentMinute, 'h')) {
                    if (currentMinute.minute() % (step * 4) === 0) {
                        row = $('<tr>');
                        html.push(row);
                    }
                    row.append('<td data-action="selectMinute" class="minute' + (!isValid(currentMinute, 'm') ? ' disabled' : '') + '">' + currentMinute.format('mm') + '</td>');
                    currentMinute.add(step, 'm');
                }
                table.empty().append(html);
            },

            fillSeconds = function () {
                var table = widget.find('.timepicker-seconds table'),
                    currentSecond = viewDate.clone().startOf('m'),
                    html = [],
                    row = $('<tr>');

                while (viewDate.isSame(currentSecond, 'm')) {
                    if (currentSecond.second() % 20 === 0) {
                        row = $('<tr>');
                        html.push(row);
                    }
                    row.append('<td data-action="selectSecond" class="second' + (!isValid(currentSecond, 's') ? ' disabled' : '') + '">' + currentSecond.format('ss') + '</td>');
                    currentSecond.add(5, 's');
                }

                table.empty().append(html);
            },

            fillTime = function () {
                var toggle, newDate, timeComponents = widget.find('.timepicker span[data-time-component]');

                if (!use24Hours) {
                    toggle = widget.find('.timepicker [data-action=togglePeriod]');
                    newDate = date.clone().add((date.hours() >= 12) ? -12 : 12, 'h');

                    toggle.text(date.format('A'));

                    if (isValid(newDate, 'h')) {
                        toggle.removeClass('disabled');
                    } else {
                        toggle.addClass('disabled');
                    }
                }
                timeComponents.filter('[data-time-component=hours]').text(date.format(use24Hours ? 'HH' : 'hh'));
                timeComponents.filter('[data-time-component=minutes]').text(date.format('mm'));
                timeComponents.filter('[data-time-component=seconds]').text(date.format('ss'));

                fillHours();
                fillMinutes();
                fillSeconds();
            },

            update = function () {
                if (!widget) {
                    return;
                }
                fillDate();
                fillTime();
            },

            setValue = function (targetMoment) {
                var oldDate = unset ? null : date;

                // case of calling setValue(null or false)
                if (!targetMoment) {
                    unset = true;
                    input.val('');
                    element.data('date', '');
                    notifyEvent({
                        type: 'dp.change',
                        date: false,
                        oldDate: oldDate
                    });
                    update();
                    return;
                }

                targetMoment = targetMoment.clone().locale(options.locale);

                if (options.stepping !== 1) {
                    targetMoment.minutes((Math.round(targetMoment.minutes() / options.stepping) * options.stepping) % 60).seconds(0);
                }

                if (isValid(targetMoment)) {
                    date = targetMoment;
                    viewDate = date.clone();
                    input.val(date.format(actualFormat));
                    element.data('date', date.format(actualFormat));
                    unset = false;
                    update();
                    notifyEvent({
                        type: 'dp.change',
                        date: date.clone(),
                        oldDate: oldDate
                    });
                } else {
                    if (!options.keepInvalid) {
                        input.val(unset ? '' : date.format(actualFormat));
                    }
                    notifyEvent({
                        type: 'dp.error',
                        date: targetMoment
                    });
                }
            },

            hide = function () {
                ///<summary>Hides the widget. Possibly will emit dp.hide</summary>
                var transitioning = false;
                if (!widget) {
                    return picker;
                }
                // Ignore event if in the middle of a picker transition
                widget.find('.collapse').each(function () {
                    var collapseData = $(this).data('collapse');
                    if (collapseData && collapseData.transitioning) {
                        transitioning = true;
                        return false;
                    }
                    return true;
                });
                if (transitioning) {
                    return picker;
                }
                if (component && component.hasClass('btn')) {
                    component.toggleClass('active');
                }
                widget.hide();

                $(window).off('resize', place);
                widget.off('click', '[data-action]');
                widget.off('mousedown', false);

                widget.remove();
                widget = false;

                notifyEvent({
                    type: 'dp.hide',
                    date: date.clone()
                });

                input.blur();

                return picker;
            },

            clear = function () {
                setValue(null);
            },

            /********************************************************************************
             *
             * Widget UI interaction functions
             *
             ********************************************************************************/
            actions = {
                next: function () {
                    var navFnc = datePickerModes[currentViewMode].navFnc;
                    viewDate.add(datePickerModes[currentViewMode].navStep, navFnc);
                    fillDate();
                    viewUpdate(navFnc);
                },

                previous: function () {
                    var navFnc = datePickerModes[currentViewMode].navFnc;
                    viewDate.subtract(datePickerModes[currentViewMode].navStep, navFnc);
                    fillDate();
                    viewUpdate(navFnc);
                },

                pickerSwitch: function () {
                    showMode(1);
                },

                selectMonth: function (e) {
                    var month = $(e.target).closest('tbody').find('span').index($(e.target));
                    viewDate.month(month);
                    if (currentViewMode === minViewModeNumber) {
                        setValue(date.clone().year(viewDate.year()).month(viewDate.month()));
                        if (!options.inline) {
                            hide();
                        }
                    } else {
                        showMode(-1);
                        fillDate();
                    }
                    viewUpdate('M');
                },

                selectYear: function (e) {
                    var year = parseInt($(e.target).text(), 10) || 0;
                    viewDate.year(year);
                    if (currentViewMode === minViewModeNumber) {
                        setValue(date.clone().year(viewDate.year()));
                        if (!options.inline) {
                            hide();
                        }
                    } else {
                        showMode(-1);
                        fillDate();
                    }
                    viewUpdate('YYYY');
                },

                selectDecade: function (e) {
                    var year = parseInt($(e.target).data('selection'), 10) || 0;
                    viewDate.year(year);
                    if (currentViewMode === minViewModeNumber) {
                        setValue(date.clone().year(viewDate.year()));
                        if (!options.inline) {
                            hide();
                        }
                    } else {
                        showMode(-1);
                        fillDate();
                    }
                    viewUpdate('YYYY');
                },

                selectDay: function (e) {
                    var day = viewDate.clone();
                    if ($(e.target).is('.old')) {
                        day.subtract(1, 'M');
                    }
                    if ($(e.target).is('.new')) {
                        day.add(1, 'M');
                    }
                    setValue(day.date(parseInt($(e.target).text(), 10)));
                    if (!hasTime() && !options.keepOpen && !options.inline) {
                        hide();
                    }
                },

                incrementHours: function () {
                    var newDate = date.clone().add(1, 'h');
                    if (isValid(newDate, 'h')) {
                        setValue(newDate);
                    }
                },

                incrementMinutes: function () {
                    var newDate = date.clone().add(options.stepping, 'm');
                    if (isValid(newDate, 'm')) {
                        setValue(newDate);
                    }
                },

                incrementSeconds: function () {
                    var newDate = date.clone().add(1, 's');
                    if (isValid(newDate, 's')) {
                        setValue(newDate);
                    }
                },

                decrementHours: function () {
                    var newDate = date.clone().subtract(1, 'h');
                    if (isValid(newDate, 'h')) {
                        setValue(newDate);
                    }
                },

                decrementMinutes: function () {
                    var newDate = date.clone().subtract(options.stepping, 'm');
                    if (isValid(newDate, 'm')) {
                        setValue(newDate);
                    }
                },

                decrementSeconds: function () {
                    var newDate = date.clone().subtract(1, 's');
                    if (isValid(newDate, 's')) {
                        setValue(newDate);
                    }
                },

                togglePeriod: function () {
                    setValue(date.clone().add((date.hours() >= 12) ? -12 : 12, 'h'));
                },

                togglePicker: function (e) {
                    var $this = $(e.target),
                        $parent = $this.closest('ul'),
                        expanded = $parent.find('.in'),
                        closed = $parent.find('.collapse:not(.in)'),
                        collapseData;

                    if (expanded && expanded.length) {
                        collapseData = expanded.data('collapse');
                        if (collapseData && collapseData.transitioning) {
                            return;
                        }
                        if (expanded.collapse) { // if collapse plugin is available through bootstrap.js then use it
                            expanded.collapse('hide');
                            closed.collapse('show');
                        } else { // otherwise just toggle in class on the two views
                            expanded.removeClass('in');
                            closed.addClass('in');
                        }
                        if ($this.is('span')) {
                            //$this.toggleClass(options.icons.time + ' ' + options.icons.date);
                            if ($this.text() == options.tooltips.selectDate) {
                                $this.text(options.tooltips.selectTime);
                            }
                            else {
                                $this.text(options.tooltips.selectDate);
                            }                           

                            
                        } else {
                            $this.find('span').toggleClass(options.icons.time + ' ' + options.icons.date);
                        }

                        // NOTE: uncomment if toggled state will be restored in show()
                        //if (component) {
                        //    component.find('span').toggleClass(options.icons.time + ' ' + options.icons.date);
                        //}
                    }
                },

                showPicker: function () {
                    widget.find('.timepicker > div:not(.timepicker-picker)').hide();
                    widget.find('.timepicker .timepicker-picker').show();
                },

                showHours: function () {
                    widget.find('.timepicker .timepicker-picker').hide();
                    widget.find('.timepicker .timepicker-hours').show();
                },

                showMinutes: function () {
                    widget.find('.timepicker .timepicker-picker').hide();
                    widget.find('.timepicker .timepicker-minutes').show();
                },

                showSeconds: function () {
                    widget.find('.timepicker .timepicker-picker').hide();
                    widget.find('.timepicker .timepicker-seconds').show();
                },

                selectHour: function (e) {
                    var hour = parseInt($(e.target).text(), 10);

                    if (!use24Hours) {
                        if (date.hours() >= 12) {
                            if (hour !== 12) {
                                hour += 12;
                            }
                        } else {
                            if (hour === 12) {
                                hour = 0;
                            }
                        }
                    }
                    setValue(date.clone().hours(hour));
                    actions.showPicker.call(picker);
                },

                selectMinute: function (e) {
                    setValue(date.clone().minutes(parseInt($(e.target).text(), 10)));
                    actions.showPicker.call(picker);
                },

                selectSecond: function (e) {
                    setValue(date.clone().seconds(parseInt($(e.target).text(), 10)));
                    actions.showPicker.call(picker);
                },

                clear: clear,

                today: function () {
                    var todaysDate = getMoment();
                    if (isValid(todaysDate, 'd')) {
                        setValue(todaysDate);
                    }
                },

                close: hide
            },

            doAction = function (e) {
                if ($(e.currentTarget).is('.disabled')) {
                    return false;
                }
                actions[$(e.currentTarget).data('action')].apply(picker, arguments);
                return false;
            },

            show = function () {
                ///<summary>Shows the widget. Possibly will emit dp.show and dp.change</summary>
                var currentMoment,
                    useCurrentGranularity = {
                        'year': function (m) {
                            return m.month(0).date(1).hours(0).seconds(0).minutes(0);
                        },
                        'month': function (m) {
                            return m.date(1).hours(0).seconds(0).minutes(0);
                        },
                        'day': function (m) {
                            return m.hours(0).seconds(0).minutes(0);
                        },
                        'hour': function (m) {
                            return m.seconds(0).minutes(0);
                        },
                        'minute': function (m) {
                            return m.seconds(0);
                        }
                    };

                if (input.prop('disabled') || (!options.ignoreReadonly && input.prop('readonly')) || widget) {
                    return picker;
                }
                if (input.val() !== undefined && input.val().trim().length !== 0) {
                    setValue(parseInputDate(input.val().trim()));
                } else if (options.useCurrent && unset && ((input.is('input') && input.val().trim().length === 0) || options.inline)) {
                    currentMoment = getMoment();
                    if (typeof options.useCurrent === 'string') {
                        currentMoment = useCurrentGranularity[options.useCurrent](currentMoment);
                    }
                    setValue(currentMoment);
                }

                widget = getTemplate();

                fillDow();
                fillMonths();

                widget.find('.timepicker-hours').hide();
                widget.find('.timepicker-minutes').hide();
                widget.find('.timepicker-seconds').hide();

                update();
                showMode();

                $(window).on('resize', place);
                widget.on('click', '[data-action]', doAction); // this handles clicks on the widget
                widget.on('mousedown', false);

                if (component && component.hasClass('btn')) {
                    component.toggleClass('active');
                }
                widget.show();
                place();

                if (options.focusOnShow && !input.is(':focus')) {
                    input.focus();
                }

                notifyEvent({
                    type: 'dp.show'
                });
                return picker;
            },

            toggle = function (e, m) {
                e.preventDefault();
                e.stopPropagation();
                /// <summary>Shows or hides the widget</summary>
                return (widget ? hide() : show());
            },

            parseInputDate = function (inputDate) {
                if (options.parseInputDate === undefined) {
                    if (moment.isMoment(inputDate) || inputDate instanceof Date) {
                        inputDate = moment(inputDate);
                    } else {
                        inputDate = getMoment(inputDate);
                    }
                } else {
                    inputDate = options.parseInputDate(inputDate);
                }
                inputDate.locale(options.locale);
                return inputDate;
            },

            keydown = function (e) {
                var handler = null,
                    index,
                    index2,
                    pressedKeys = [],
                    pressedModifiers = {},
                    currentKey = e.which,
                    keyBindKeys,
                    allModifiersPressed,
                    pressed = 'p';

                keyState[currentKey] = pressed;

                for (index in keyState) {
                    if (keyState.hasOwnProperty(index) && keyState[index] === pressed) {
                        pressedKeys.push(index);
                        if (parseInt(index, 10) !== currentKey) {
                            pressedModifiers[index] = true;
                        }
                    }
                }

                for (index in options.keyBinds) {
                    if (options.keyBinds.hasOwnProperty(index) && typeof (options.keyBinds[index]) === 'function') {
                        keyBindKeys = index.split(' ');
                        if (keyBindKeys.length === pressedKeys.length && keyMap[currentKey] === keyBindKeys[keyBindKeys.length - 1]) {
                            allModifiersPressed = true;
                            for (index2 = keyBindKeys.length - 2; index2 >= 0; index2--) {
                                if (!(keyMap[keyBindKeys[index2]] in pressedModifiers)) {
                                    allModifiersPressed = false;
                                    break;
                                }
                            }
                            if (allModifiersPressed) {
                                handler = options.keyBinds[index];
                                break;
                            }
                        }
                    }
                }

                if (handler) {
                    handler.call(picker, widget);
                    e.stopPropagation();
                    e.preventDefault();
                }
            },

            keyup = function (e) {
                keyState[e.which] = 'r';
                e.stopPropagation();
                e.preventDefault();
            },

            change = function (e) {
                var val = $(e.target).val().trim(),
                    parsedDate = val ? parseInputDate(val) : null;
                setValue(parsedDate);
                e.stopImmediatePropagation();
                return false;
            },

            attachDatePickerElementEvents = function () {
                input.on({
                    'change': change,
                    'blur': options.debug ? '' : hide,
                    'keydown': keydown,
                    'keyup': keyup,
                    'focus': options.allowInputToggle ? show : ''
                });

                if (element.is('input')) {
                    input.on({
                        'focus': show
                    });
                } else if (component) {
                    component.on('click', toggle);
                    component.on('mousedown', false);
                }
            },

            detachDatePickerElementEvents = function () {
                input.off({
                    'change': change,
                    'blur': blur,
                    'keydown': keydown,
                    'keyup': keyup,
                    'focus': options.allowInputToggle ? hide : ''
                });

                if (element.is('input')) {
                    input.off({
                        'focus': show
                    });
                } else if (component) {
                    component.off('click', toggle);
                    component.off('mousedown', false);
                }
            },

            indexGivenDates = function (givenDatesArray) {
                // Store given enabledDates and disabledDates as keys.
                // This way we can check their existence in O(1) time instead of looping through whole array.
                // (for example: options.enabledDates['2014-02-27'] === true)
                var givenDatesIndexed = {};
                $.each(givenDatesArray, function () {
                    var dDate = parseInputDate(this);
                    if (dDate.isValid()) {
                        givenDatesIndexed[dDate.format('YYYY-MM-DD')] = true;
                    }
                });
                return (Object.keys(givenDatesIndexed).length) ? givenDatesIndexed : false;
            },

            indexGivenHours = function (givenHoursArray) {
                // Store given enabledHours and disabledHours as keys.
                // This way we can check their existence in O(1) time instead of looping through whole array.
                // (for example: options.enabledHours['2014-02-27'] === true)
                var givenHoursIndexed = {};
                $.each(givenHoursArray, function () {
                    givenHoursIndexed[this] = true;
                });
                return (Object.keys(givenHoursIndexed).length) ? givenHoursIndexed : false;
            },

            initFormatting = function () {
                var format = options.format || 'L LT';

                actualFormat = format.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, function (formatInput) {
                    var newinput = date.localeData().longDateFormat(formatInput) || formatInput;
                    return newinput.replace(/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g, function (formatInput2) { //temp fix for #740
                        return date.localeData().longDateFormat(formatInput2) || formatInput2;
                    });
                });


                parseFormats = options.extraFormats ? options.extraFormats.slice() : [];
                if (parseFormats.indexOf(format) < 0 && parseFormats.indexOf(actualFormat) < 0) {
                    parseFormats.push(actualFormat);
                }

                use24Hours = (actualFormat.toLowerCase().indexOf('a') < 1 && actualFormat.replace(/\[.*?\]/g, '').indexOf('h') < 1);

                if (isEnabled('y')) {
                    minViewModeNumber = 2;
                }
                if (isEnabled('M')) {
                    minViewModeNumber = 1;
                }
                if (isEnabled('d')) {
                    minViewModeNumber = 0;
                }

                currentViewMode = Math.max(minViewModeNumber, currentViewMode);

                if (!unset) {
                    setValue(date);
                }
            };

        /********************************************************************************
         *
         * Public API functions
         * =====================
         *
         * Important: Do not expose direct references to private objects or the options
         * object to the outer world. Always return a clone when returning values or make
         * a clone when setting a private variable.
         *
         ********************************************************************************/
        picker.destroy = function () {
            ///<summary>Destroys the widget and removes all attached event listeners</summary>
            hide();
            detachDatePickerElementEvents();
            element.removeData('DateTimePicker');
            element.removeData('date');
        };

        picker.toggle = toggle;

        picker.show = show;

        picker.hide = hide;

        picker.disable = function () {
            ///<summary>Disables the input element, the component is attached to, by adding a disabled="true" attribute to it.
            ///If the widget was visible before that call it is hidden. Possibly emits dp.hide</summary>
            hide();
            if (component && component.hasClass('btn')) {
                component.addClass('disabled');
            }
            input.prop('disabled', true);
            return picker;
        };

        picker.enable = function () {
            ///<summary>Enables the input element, the component is attached to, by removing disabled attribute from it.</summary>
            if (component && component.hasClass('btn')) {
                component.removeClass('disabled');
            }
            input.prop('disabled', false);
            return picker;
        };

        picker.ignoreReadonly = function (ignoreReadonly) {
            if (arguments.length === 0) {
                return options.ignoreReadonly;
            }
            if (typeof ignoreReadonly !== 'boolean') {
                throw new TypeError('ignoreReadonly () expects a boolean parameter');
            }
            options.ignoreReadonly = ignoreReadonly;
            return picker;
        };

        picker.options = function (newOptions) {
            if (arguments.length === 0) {
                return $.extend(true, {}, options);
            }

            if (!(newOptions instanceof Object)) {
                throw new TypeError('options() options parameter should be an object');
            }
            $.extend(true, options, newOptions);
            $.each(options, function (key, value) {
                if (picker[key] !== undefined) {
                    picker[key](value);
                } else {
                    throw new TypeError('option ' + key + ' is not recognized!');
                }
            });
            return picker;
        };

        picker.date = function (newDate) {
            ///<signature helpKeyword="$.fn.datetimepicker.date">
            ///<summary>Returns the component's model current date, a moment object or null if not set.</summary>
            ///<returns type="Moment">date.clone()</returns>
            ///</signature>
            ///<signature>
            ///<summary>Sets the components model current moment to it. Passing a null value unsets the components model current moment. Parsing of the newDate parameter is made using moment library with the options.format and options.useStrict components configuration.</summary>
            ///<param name="newDate" locid="$.fn.datetimepicker.date_p:newDate">Takes string, Date, moment, null parameter.</param>
            ///</signature>
            if (arguments.length === 0) {
                if (unset) {
                    return null;
                }
                return date.clone();
            }

            if (newDate !== null && typeof newDate !== 'string' && !moment.isMoment(newDate) && !(newDate instanceof Date)) {
                throw new TypeError('date() parameter must be one of [null, string, moment or Date]');
            }

            setValue(newDate === null ? null : parseInputDate(newDate));
            return picker;
        };

        picker.format = function (newFormat) {
            ///<summary>test su</summary>
            ///<param name="newFormat">info about para</param>
            ///<returns type="string|boolean">returns foo</returns>
            if (arguments.length === 0) {
                return options.format;
            }

            if ((typeof newFormat !== 'string') && ((typeof newFormat !== 'boolean') || (newFormat !== false))) {
                throw new TypeError('format() expects a sting or boolean:false parameter ' + newFormat);
            }

            options.format = newFormat;
            if (actualFormat) {
                initFormatting(); // reinit formatting
            }
            return picker;
        };

        picker.timeZone = function (newZone) {
            if (arguments.length === 0) {
                return options.timeZone;
            }

            options.timeZone = newZone;

            return picker;
        };

        picker.dayViewHeaderFormat = function (newFormat) {
            if (arguments.length === 0) {
                return options.dayViewHeaderFormat;
            }

            if (typeof newFormat !== 'string') {
                throw new TypeError('dayViewHeaderFormat() expects a string parameter');
            }

            options.dayViewHeaderFormat = newFormat;
            return picker;
        };

        picker.extraFormats = function (formats) {
            if (arguments.length === 0) {
                return options.extraFormats;
            }

            if (formats !== false && !(formats instanceof Array)) {
                throw new TypeError('extraFormats() expects an array or false parameter');
            }

            options.extraFormats = formats;
            if (parseFormats) {
                initFormatting(); // reinit formatting
            }
            return picker;
        };

        picker.disabledDates = function (dates) {
            ///<signature helpKeyword="$.fn.datetimepicker.disabledDates">
            ///<summary>Returns an array with the currently set disabled dates on the component.</summary>
            ///<returns type="array">options.disabledDates</returns>
            ///</signature>
            ///<signature>
            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of
            ///options.enabledDates if such exist.</summary>
            ///<param name="dates" locid="$.fn.datetimepicker.disabledDates_p:dates">Takes an [ string or Date or moment ] of values and allows the user to select only from those days.</param>
            ///</signature>
            if (arguments.length === 0) {
                return (options.disabledDates ? $.extend({}, options.disabledDates) : options.disabledDates);
            }

            if (!dates) {
                options.disabledDates = false;
                update();
                return picker;
            }
            if (!(dates instanceof Array)) {
                throw new TypeError('disabledDates() expects an array parameter');
            }
            options.disabledDates = indexGivenDates(dates);
            options.enabledDates = false;
            update();
            return picker;
        };

        picker.enabledDates = function (dates) {
            ///<signature helpKeyword="$.fn.datetimepicker.enabledDates">
            ///<summary>Returns an array with the currently set enabled dates on the component.</summary>
            ///<returns type="array">options.enabledDates</returns>
            ///</signature>
            ///<signature>
            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of options.disabledDates if such exist.</summary>
            ///<param name="dates" locid="$.fn.datetimepicker.enabledDates_p:dates">Takes an [ string or Date or moment ] of values and allows the user to select only from those days.</param>
            ///</signature>
            if (arguments.length === 0) {
                return (options.enabledDates ? $.extend({}, options.enabledDates) : options.enabledDates);
            }

            if (!dates) {
                options.enabledDates = false;
                update();
                return picker;
            }
            if (!(dates instanceof Array)) {
                throw new TypeError('enabledDates() expects an array parameter');
            }
            options.enabledDates = indexGivenDates(dates);
            options.disabledDates = false;
            update();
            return picker;
        };

        picker.daysOfWeekDisabled = function (daysOfWeekDisabled) {
            if (arguments.length === 0) {
                return options.daysOfWeekDisabled.splice(0);
            }

            if ((typeof daysOfWeekDisabled === 'boolean') && !daysOfWeekDisabled) {
                options.daysOfWeekDisabled = false;
                update();
                return picker;
            }

            if (!(daysOfWeekDisabled instanceof Array)) {
                throw new TypeError('daysOfWeekDisabled() expects an array parameter');
            }
            options.daysOfWeekDisabled = daysOfWeekDisabled.reduce(function (previousValue, currentValue) {
                currentValue = parseInt(currentValue, 10);
                if (currentValue > 6 || currentValue < 0 || isNaN(currentValue)) {
                    return previousValue;
                }
                if (previousValue.indexOf(currentValue) === -1) {
                    previousValue.push(currentValue);
                }
                return previousValue;
            }, []).sort();
            if (options.useCurrent && !options.keepInvalid) {
                var tries = 0;
                while (!isValid(date, 'd')) {
                    date.add(1, 'd');
                    if (tries === 7) {
                        throw 'Tried 7 times to find a valid date';
                    }
                    tries++;
                }
                setValue(date);
            }
            update();
            return picker;
        };

        picker.maxDate = function (maxDate) {
            if (arguments.length === 0) {
                return options.maxDate ? options.maxDate.clone() : options.maxDate;
            }

            if ((typeof maxDate === 'boolean') && maxDate === false) {
                options.maxDate = false;
                update();
                return picker;
            }

            if (typeof maxDate === 'string') {
                if (maxDate === 'now' || maxDate === 'moment') {
                    maxDate = getMoment();
                }
            }

            var parsedDate = parseInputDate(maxDate);

            if (!parsedDate.isValid()) {
                throw new TypeError('maxDate() Could not parse date parameter: ' + maxDate);
            }
            if (options.minDate && parsedDate.isBefore(options.minDate)) {
                throw new TypeError('maxDate() date parameter is before options.minDate: ' + parsedDate.format(actualFormat));
            }
            options.maxDate = parsedDate;
            if (options.useCurrent && !options.keepInvalid && date.isAfter(maxDate)) {
                setValue(options.maxDate);
            }
            if (viewDate.isAfter(parsedDate)) {
                viewDate = parsedDate.clone().subtract(options.stepping, 'm');
            }
            update();
            return picker;
        };

        picker.minDate = function (minDate) {
            if (arguments.length === 0) {
                return options.minDate ? options.minDate.clone() : options.minDate;
            }

            if ((typeof minDate === 'boolean') && minDate === false) {
                options.minDate = false;
                update();
                return picker;
            }

            if (typeof minDate === 'string') {
                if (minDate === 'now' || minDate === 'moment') {
                    minDate = getMoment();
                }
            }

            var parsedDate = parseInputDate(minDate);

            if (!parsedDate.isValid()) {
                throw new TypeError('minDate() Could not parse date parameter: ' + minDate);
            }
            if (options.maxDate && parsedDate.isAfter(options.maxDate)) {
                throw new TypeError('minDate() date parameter is after options.maxDate: ' + parsedDate.format(actualFormat));
            }
            options.minDate = parsedDate;
            if (options.useCurrent && !options.keepInvalid && date.isBefore(minDate)) {
                setValue(options.minDate);
            }
            if (viewDate.isBefore(parsedDate)) {
                viewDate = parsedDate.clone().add(options.stepping, 'm');
            }
            update();
            return picker;
        };

        picker.defaultDate = function (defaultDate) {
            ///<signature helpKeyword="$.fn.datetimepicker.defaultDate">
            ///<summary>Returns a moment with the options.defaultDate option configuration or false if not set</summary>
            ///<returns type="Moment">date.clone()</returns>
            ///</signature>
            ///<signature>
            ///<summary>Will set the picker's inital date. If a boolean:false value is passed the options.defaultDate parameter is cleared.</summary>
            ///<param name="defaultDate" locid="$.fn.datetimepicker.defaultDate_p:defaultDate">Takes a string, Date, moment, boolean:false</param>
            ///</signature>
            if (arguments.length === 0) {
                return options.defaultDate ? options.defaultDate.clone() : options.defaultDate;
            }
            if (!defaultDate) {
                options.defaultDate = false;
                return picker;
            }

            if (typeof defaultDate === 'string') {
                if (defaultDate === 'now' || defaultDate === 'moment') {
                    defaultDate = getMoment();
                }
            }

            var parsedDate = parseInputDate(defaultDate);
            if (!parsedDate.isValid()) {
                throw new TypeError('defaultDate() Could not parse date parameter: ' + defaultDate);
            }
            if (!isValid(parsedDate)) {
                throw new TypeError('defaultDate() date passed is invalid according to component setup validations');
            }

            options.defaultDate = parsedDate;

            if ((options.defaultDate && options.inline) || input.val().trim() === '') {
                setValue(options.defaultDate);
            }
            return picker;
        };

        picker.locale = function (locale) {
            if (arguments.length === 0) {
                return options.locale;
            }

            if (!moment.localeData(locale)) {
                throw new TypeError('locale() locale ' + locale + ' is not loaded from moment locales!');
            }

            options.locale = locale;
            date.locale(options.locale);
            viewDate.locale(options.locale);

            if (actualFormat) {
                initFormatting(); // reinit formatting
            }
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.stepping = function (stepping) {
            if (arguments.length === 0) {
                return options.stepping;
            }

            stepping = parseInt(stepping, 10);
            if (isNaN(stepping) || stepping < 1) {
                stepping = 1;
            }
            options.stepping = stepping;
            return picker;
        };

        picker.useCurrent = function (useCurrent) {
            var useCurrentOptions = ['year', 'month', 'day', 'hour', 'minute'];
            if (arguments.length === 0) {
                return options.useCurrent;
            }

            if ((typeof useCurrent !== 'boolean') && (typeof useCurrent !== 'string')) {
                throw new TypeError('useCurrent() expects a boolean or string parameter');
            }
            if (typeof useCurrent === 'string' && useCurrentOptions.indexOf(useCurrent.toLowerCase()) === -1) {
                throw new TypeError('useCurrent() expects a string parameter of ' + useCurrentOptions.join(', '));
            }
            options.useCurrent = useCurrent;
            return picker;
        };

        picker.collapse = function (collapse) {
            if (arguments.length === 0) {
                return options.collapse;
            }

            if (typeof collapse !== 'boolean') {
                throw new TypeError('collapse() expects a boolean parameter');
            }
            if (options.collapse === collapse) {
                return picker;
            }
            options.collapse = collapse;
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.icons = function (icons) {
            if (arguments.length === 0) {
                return $.extend({}, options.icons);
            }

            if (!(icons instanceof Object)) {
                throw new TypeError('icons() expects parameter to be an Object');
            }
            $.extend(options.icons, icons);
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.tooltips = function (tooltips) {
            if (arguments.length === 0) {
                return $.extend({}, options.tooltips);
            }

            if (!(tooltips instanceof Object)) {
                throw new TypeError('tooltips() expects parameter to be an Object');
            }
            $.extend(options.tooltips, tooltips);
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.useStrict = function (useStrict) {
            if (arguments.length === 0) {
                return options.useStrict;
            }

            if (typeof useStrict !== 'boolean') {
                throw new TypeError('useStrict() expects a boolean parameter');
            }
            options.useStrict = useStrict;
            return picker;
        };

        picker.sideBySide = function (sideBySide) {
            if (arguments.length === 0) {
                return options.sideBySide;
            }

            if (typeof sideBySide !== 'boolean') {
                throw new TypeError('sideBySide() expects a boolean parameter');
            }
            options.sideBySide = sideBySide;
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.viewMode = function (viewMode) {
            if (arguments.length === 0) {
                return options.viewMode;
            }

            if (typeof viewMode !== 'string') {
                throw new TypeError('viewMode() expects a string parameter');
            }

            if (viewModes.indexOf(viewMode) === -1) {
                throw new TypeError('viewMode() parameter must be one of (' + viewModes.join(', ') + ') value');
            }

            options.viewMode = viewMode;
            currentViewMode = Math.max(viewModes.indexOf(viewMode), minViewModeNumber);

            showMode();
            return picker;
        };

        picker.toolbarPlacement = function (toolbarPlacement) {
            if (arguments.length === 0) {
                return options.toolbarPlacement;
            }

            if (typeof toolbarPlacement !== 'string') {
                throw new TypeError('toolbarPlacement() expects a string parameter');
            }
            if (toolbarPlacements.indexOf(toolbarPlacement) === -1) {
                throw new TypeError('toolbarPlacement() parameter must be one of (' + toolbarPlacements.join(', ') + ') value');
            }
            options.toolbarPlacement = toolbarPlacement;

            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.widgetPositioning = function (widgetPositioning) {
            if (arguments.length === 0) {
                return $.extend({}, options.widgetPositioning);
            }

            if (({}).toString.call(widgetPositioning) !== '[object Object]') {
                throw new TypeError('widgetPositioning() expects an object variable');
            }
            if (widgetPositioning.horizontal) {
                if (typeof widgetPositioning.horizontal !== 'string') {
                    throw new TypeError('widgetPositioning() horizontal variable must be a string');
                }
                widgetPositioning.horizontal = widgetPositioning.horizontal.toLowerCase();
                if (horizontalModes.indexOf(widgetPositioning.horizontal) === -1) {
                    throw new TypeError('widgetPositioning() expects horizontal parameter to be one of (' + horizontalModes.join(', ') + ')');
                }
                options.widgetPositioning.horizontal = widgetPositioning.horizontal;
            }
            if (widgetPositioning.vertical) {
                if (typeof widgetPositioning.vertical !== 'string') {
                    throw new TypeError('widgetPositioning() vertical variable must be a string');
                }
                widgetPositioning.vertical = widgetPositioning.vertical.toLowerCase();
                if (verticalModes.indexOf(widgetPositioning.vertical) === -1) {
                    throw new TypeError('widgetPositioning() expects vertical parameter to be one of (' + verticalModes.join(', ') + ')');
                }
                options.widgetPositioning.vertical = widgetPositioning.vertical;
            }
            update();
            return picker;
        };

        picker.calendarWeeks = function (calendarWeeks) {
            if (arguments.length === 0) {
                return options.calendarWeeks;
            }

            if (typeof calendarWeeks !== 'boolean') {
                throw new TypeError('calendarWeeks() expects parameter to be a boolean value');
            }

            options.calendarWeeks = calendarWeeks;
            update();
            return picker;
        };

        picker.showTodayButton = function (showTodayButton) {
            if (arguments.length === 0) {
                return options.showTodayButton;
            }

            if (typeof showTodayButton !== 'boolean') {
                throw new TypeError('showTodayButton() expects a boolean parameter');
            }

            options.showTodayButton = showTodayButton;
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.showClear = function (showClear) {
            if (arguments.length === 0) {
                return options.showClear;
            }

            if (typeof showClear !== 'boolean') {
                throw new TypeError('showClear() expects a boolean parameter');
            }

            options.showClear = showClear;
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.widgetParent = function (widgetParent) {
            if (arguments.length === 0) {
                return options.widgetParent;
            }

            if (typeof widgetParent === 'string') {
                widgetParent = $(widgetParent);
            }

            if (widgetParent !== null && (typeof widgetParent !== 'string' && !(widgetParent instanceof $))) {
                throw new TypeError('widgetParent() expects a string or a jQuery object parameter');
            }

            options.widgetParent = widgetParent;
            if (widget) {
                hide();
                show();
            }
            return picker;
        };

        picker.keepOpen = function (keepOpen) {
            if (arguments.length === 0) {
                return options.keepOpen;
            }

            if (typeof keepOpen !== 'boolean') {
                throw new TypeError('keepOpen() expects a boolean parameter');
            }

            options.keepOpen = keepOpen;
            return picker;
        };

        picker.focusOnShow = function (focusOnShow) {
            if (arguments.length === 0) {
                return options.focusOnShow;
            }

            if (typeof focusOnShow !== 'boolean') {
                throw new TypeError('focusOnShow() expects a boolean parameter');
            }

            options.focusOnShow = focusOnShow;
            return picker;
        };

        picker.inline = function (inline) {
            if (arguments.length === 0) {
                return options.inline;
            }

            if (typeof inline !== 'boolean') {
                throw new TypeError('inline() expects a boolean parameter');
            }

            options.inline = inline;
            return picker;
        };

        picker.clear = function () {
            clear();
            return picker;
        };

        picker.keyBinds = function (keyBinds) {
            options.keyBinds = keyBinds;
            return picker;
        };

        picker.getMoment = function (d) {
            return getMoment(d);
        };

        picker.debug = function (debug) {
            if (typeof debug !== 'boolean') {
                throw new TypeError('debug() expects a boolean parameter');
            }

            options.debug = debug;
            return picker;
        };

        picker.allowInputToggle = function (allowInputToggle) {
            if (arguments.length === 0) {
                return options.allowInputToggle;
            }

            if (typeof allowInputToggle !== 'boolean') {
                throw new TypeError('allowInputToggle() expects a boolean parameter');
            }

            options.allowInputToggle = allowInputToggle;
            return picker;
        };

        picker.showClose = function (showClose) {
            if (arguments.length === 0) {
                return options.showClose;
            }

            if (typeof showClose !== 'boolean') {
                throw new TypeError('showClose() expects a boolean parameter');
            }

            options.showClose = showClose;
            return picker;
        };

        picker.keepInvalid = function (keepInvalid) {
            if (arguments.length === 0) {
                return options.keepInvalid;
            }

            if (typeof keepInvalid !== 'boolean') {
                throw new TypeError('keepInvalid() expects a boolean parameter');
            }
            options.keepInvalid = keepInvalid;
            return picker;
        };

        picker.datepickerInput = function (datepickerInput) {
            if (arguments.length === 0) {
                return options.datepickerInput;
            }

            if (typeof datepickerInput !== 'string') {
                throw new TypeError('datepickerInput() expects a string parameter');
            }

            options.datepickerInput = datepickerInput;
            return picker;
        };

        picker.parseInputDate = function (parseInputDate) {
            if (arguments.length === 0) {
                return options.parseInputDate;
            }

            if (typeof parseInputDate !== 'function') {
                throw new TypeError('parseInputDate() sholud be as function');
            }

            options.parseInputDate = parseInputDate;

            return picker;
        };

        picker.disabledTimeIntervals = function (disabledTimeIntervals) {
            ///<signature helpKeyword="$.fn.datetimepicker.disabledTimeIntervals">
            ///<summary>Returns an array with the currently set disabled dates on the component.</summary>
            ///<returns type="array">options.disabledTimeIntervals</returns>
            ///</signature>
            ///<signature>
            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of
            ///options.enabledDates if such exist.</summary>
            ///<param name="dates" locid="$.fn.datetimepicker.disabledTimeIntervals_p:dates">Takes an [ string or Date or moment ] of values and allows the user to select only from those days.</param>
            ///</signature>
            if (arguments.length === 0) {
                return (options.disabledTimeIntervals ? $.extend({}, options.disabledTimeIntervals) : options.disabledTimeIntervals);
            }

            if (!disabledTimeIntervals) {
                options.disabledTimeIntervals = false;
                update();
                return picker;
            }
            if (!(disabledTimeIntervals instanceof Array)) {
                throw new TypeError('disabledTimeIntervals() expects an array parameter');
            }
            options.disabledTimeIntervals = disabledTimeIntervals;
            update();
            return picker;
        };

        picker.disabledHours = function (hours) {
            ///<signature helpKeyword="$.fn.datetimepicker.disabledHours">
            ///<summary>Returns an array with the currently set disabled hours on the component.</summary>
            ///<returns type="array">options.disabledHours</returns>
            ///</signature>
            ///<signature>
            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of
            ///options.enabledHours if such exist.</summary>
            ///<param name="hours" locid="$.fn.datetimepicker.disabledHours_p:hours">Takes an [ int ] of values and disallows the user to select only from those hours.</param>
            ///</signature>
            if (arguments.length === 0) {
                return (options.disabledHours ? $.extend({}, options.disabledHours) : options.disabledHours);
            }

            if (!hours) {
                options.disabledHours = false;
                update();
                return picker;
            }
            if (!(hours instanceof Array)) {
                throw new TypeError('disabledHours() expects an array parameter');
            }
            options.disabledHours = indexGivenHours(hours);
            options.enabledHours = false;
            if (options.useCurrent && !options.keepInvalid) {
                var tries = 0;
                while (!isValid(date, 'h')) {
                    date.add(1, 'h');
                    if (tries === 24) {
                        throw 'Tried 24 times to find a valid date';
                    }
                    tries++;
                }
                setValue(date);
            }
            update();
            return picker;
        };

        picker.enabledHours = function (hours) {
            ///<signature helpKeyword="$.fn.datetimepicker.enabledHours">
            ///<summary>Returns an array with the currently set enabled hours on the component.</summary>
            ///<returns type="array">options.enabledHours</returns>
            ///</signature>
            ///<signature>
            ///<summary>Setting this takes precedence over options.minDate, options.maxDate configuration. Also calling this function removes the configuration of options.disabledHours if such exist.</summary>
            ///<param name="hours" locid="$.fn.datetimepicker.enabledHours_p:hours">Takes an [ int ] of values and allows the user to select only from those hours.</param>
            ///</signature>
            if (arguments.length === 0) {
                return (options.enabledHours ? $.extend({}, options.enabledHours) : options.enabledHours);
            }

            if (!hours) {
                options.enabledHours = false;
                update();
                return picker;
            }
            if (!(hours instanceof Array)) {
                throw new TypeError('enabledHours() expects an array parameter');
            }
            options.enabledHours = indexGivenHours(hours);
            options.disabledHours = false;
            if (options.useCurrent && !options.keepInvalid) {
                var tries = 0;
                while (!isValid(date, 'h')) {
                    date.add(1, 'h');
                    if (tries === 24) {
                        throw 'Tried 24 times to find a valid date';
                    }
                    tries++;
                }
                setValue(date);
            }
            update();
            return picker;
        };

        picker.viewDate = function (newDate) {
            ///<signature helpKeyword="$.fn.datetimepicker.viewDate">
            ///<summary>Returns the component's model current viewDate, a moment object or null if not set.</summary>
            ///<returns type="Moment">viewDate.clone()</returns>
            ///</signature>
            ///<signature>
            ///<summary>Sets the components model current moment to it. Passing a null value unsets the components model current moment. Parsing of the newDate parameter is made using moment library with the options.format and options.useStrict components configuration.</summary>
            ///<param name="newDate" locid="$.fn.datetimepicker.date_p:newDate">Takes string, viewDate, moment, null parameter.</param>
            ///</signature>
            if (arguments.length === 0) {
                return viewDate.clone();
            }

            if (!newDate) {
                viewDate = date.clone();
                return picker;
            }

            if (typeof newDate !== 'string' && !moment.isMoment(newDate) && !(newDate instanceof Date)) {
                throw new TypeError('viewDate() parameter must be one of [string, moment or Date]');
            }

            viewDate = parseInputDate(newDate);
            viewUpdate();
            return picker;
        };

        // initializing element and component attributes
        if (element.is('input')) {
            input = element;
        } else {
            input = element.find(options.datepickerInput);
            if (input.size() === 0) {
                input = element.find('input');
            } else if (!input.is('input')) {
                throw new Error('CSS class "' + options.datepickerInput + '" cannot be applied to non input element');
            }
        }

        if (element.hasClass('input-group')) {
            // in case there is more then one 'input-group-addon' Issue #48
            if (element.find('.datepickerbutton').size() === 0) {
                component = element.find('.input-group-addon');
            } else {
                component = element.find('.datepickerbutton');
            }
        }

        if (!options.inline && !input.is('input')) {
            throw new Error('Could not initialize DateTimePicker without an input element');
        }

        // Set defaults for date here now instead of in var declaration
        date = getMoment();
        viewDate = date.clone();

        $.extend(true, options, dataToOptions());

        picker.options(options);

        initFormatting();

        attachDatePickerElementEvents();

        if (input.prop('disabled')) {
            picker.disable();
        }
        if (input.is('input') && input.val().trim().length !== 0) {
            setValue(parseInputDate(input.val().trim()));
        }
        else if (options.defaultDate && input.attr('placeholder') === undefined) {
            setValue(options.defaultDate);
        }
        if (options.inline) {
            show();
        }
        return picker;
    };

    /********************************************************************************
     *
     * jQuery plugin constructor and defaults object
     *
     ********************************************************************************/

    $.fn.datetimepicker = function (options) {
        return this.each(function () {
            var $this = $(this);
            if (!$this.data('DateTimePicker')) {
                // create a private copy of the defaults object
                options = $.extend(true, {}, $.fn.datetimepicker.defaults, options);
                $this.data('DateTimePicker', dateTimePicker($this, options));
            }
        });
    };

    $.fn.datetimepicker.defaults = {
        timeZone: 'Etc/UTC',
        format: false,
        dayViewHeaderFormat: 'MMMM YYYY',
        extraFormats: false,
        stepping: 1,
        minDate: false,
        maxDate: false,
        useCurrent: true,
        collapse: true,
        locale: moment.locale(),
        defaultDate: false,
        disabledDates: false,
        enabledDates: false,
        icons: {
            time: 'glyphicon glyphicon-time',
            date: 'glyphicon glyphicon-calendar',
            up: 'glyphicon glyphicon-chevron-up',
            down: 'glyphicon glyphicon-chevron-down',
            previous: 'glyphicon glyphicon-chevron-left',
            next: 'glyphicon glyphicon-chevron-right',
            today: 'glyphicon glyphicon-screenshot',
            clear: 'glyphicon glyphicon-trash',
            close: 'glyphicon glyphicon-remove'
        },
        tooltips: {
            today: 'Go to today',
            clear: 'Clear selection',
            close: 'Close the picker',
            selectMonth: 'Select Month',
            prevMonth: 'Previous Month',
            nextMonth: 'Next Month',
            selectYear: 'Select Year',
            prevYear: 'Previous Year',
            nextYear: 'Next Year',
            selectDecade: 'Select Decade',
            prevDecade: 'Previous Decade',
            nextDecade: 'Next Decade',
            prevCentury: 'Previous Century',
            nextCentury: 'Next Century',
            pickHour: 'Pick Hour',
            incrementHour: 'Increment Hour',
            decrementHour: 'Decrement Hour',
            pickMinute: 'Pick Minute',
            incrementMinute: 'Increment Minute',
            decrementMinute: 'Decrement Minute',
            pickSecond: 'Pick Second',
            incrementSecond: 'Increment Second',
            decrementSecond: 'Decrement Second',
            togglePeriod: 'Toggle Period',
            selectTime: 'Select Time'
        },
        useStrict: false,
        sideBySide: false,
        daysOfWeekDisabled: false,
        calendarWeeks: false,
        viewMode: 'days',
        toolbarPlacement: 'default',
        showTodayButton: false,
        showClear: false,
        showClose: false,
        widgetPositioning: {
            horizontal: 'auto',
            vertical: 'auto'
        },
        widgetParent: null,
        ignoreReadonly: true,
        keepOpen: false,
        focusOnShow: true,
        inline: false,
        keepInvalid: false,
        datepickerInput: '.datepickerinput',
        keyBinds: {
            up: function (widget) {
                if (!widget) {
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().subtract(7, 'd'));
                } else {
                    this.date(d.clone().add(this.stepping(), 'm'));
                }
            },
            down: function (widget) {
                if (!widget) {
                    this.show();
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().add(7, 'd'));
                } else {
                    this.date(d.clone().subtract(this.stepping(), 'm'));
                }
            },
            'control up': function (widget) {
                if (!widget) {
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().subtract(1, 'y'));
                } else {
                    this.date(d.clone().add(1, 'h'));
                }
            },
            'control down': function (widget) {
                if (!widget) {
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().add(1, 'y'));
                } else {
                    this.date(d.clone().subtract(1, 'h'));
                }
            },
            left: function (widget) {
                if (!widget) {
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().subtract(1, 'd'));
                }
            },
            right: function (widget) {
                if (!widget) {
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().add(1, 'd'));
                }
            },
            pageUp: function (widget) {
                if (!widget) {
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().subtract(1, 'M'));
                }
            },
            pageDown: function (widget) {
                if (!widget) {
                    return;
                }
                var d = this.date() || this.getMoment();
                if (widget.find('.datepicker').is(':visible')) {
                    this.date(d.clone().add(1, 'M'));
                }
            },
            enter: function () {
                this.hide();
            },
            escape: function () {
                this.hide();
            },
            //tab: function (widget) { //this break the flow of the form. disabling for now
            //    var toggle = widget.find('.picker-switch a[data-action="togglePicker"]');
            //    if(toggle.length > 0) toggle.click();
            //},
            'control space': function (widget) {
                if (widget.find('.timepicker').is(':visible')) {
                    widget.find('.btn[data-action="togglePeriod"]').click();
                }
            },
            t: function () {
                this.date(this.getMoment());
            },
            'delete': function () {
                this.clear();
            }
        },
        debug: false,
        allowInputToggle: false,
        disabledTimeIntervals: false,
        disabledHours: false,
        enabledHours: false,
        viewDate: false
    };
}));

/*! jQuery UI - v1.10.4 - 2014-06-18
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.sortable.js
* Copyright 2014 jQuery Foundation and other contributors; Licensed MIT */

(function( $, undefined ) {

var uuid = 0,
	runiqueId = /^ui-id-\d+$/;

// $.ui might exist from components with no dependencies, e.g., $.ui.position
$.ui = $.ui || {};

$.extend( $.ui, {
	version: "1.10.4",

	keyCode: {
		BACKSPACE: 8,
		COMMA: 188,
		DELETE: 46,
		DOWN: 40,
		END: 35,
		ENTER: 13,
		ESCAPE: 27,
		HOME: 36,
		LEFT: 37,
		NUMPAD_ADD: 107,
		NUMPAD_DECIMAL: 110,
		NUMPAD_DIVIDE: 111,
		NUMPAD_ENTER: 108,
		NUMPAD_MULTIPLY: 106,
		NUMPAD_SUBTRACT: 109,
		PAGE_DOWN: 34,
		PAGE_UP: 33,
		PERIOD: 190,
		RIGHT: 39,
		SPACE: 32,
		TAB: 9,
		UP: 38
	}
});

// plugins
$.fn.extend({
	focus: (function( orig ) {
		return function( delay, fn ) {
			return typeof delay === "number" ?
				this.each(function() {
					var elem = this;
					setTimeout(function() {
						$( elem ).focus();
						if ( fn ) {
							fn.call( elem );
						}
					}, delay );
				}) :
				orig.apply( this, arguments );
		};
	})( $.fn.focus ),

	scrollParent: function() {
		var scrollParent;
		if (($.ui.ie && (/(static|relative)/).test(this.css("position"))) || (/absolute/).test(this.css("position"))) {
			scrollParent = this.parents().filter(function() {
				return (/(relative|absolute|fixed)/).test($.css(this,"position")) && (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		} else {
			scrollParent = this.parents().filter(function() {
				return (/(auto|scroll)/).test($.css(this,"overflow")+$.css(this,"overflow-y")+$.css(this,"overflow-x"));
			}).eq(0);
		}

		return (/fixed/).test(this.css("position")) || !scrollParent.length ? $(document) : scrollParent;
	},

	zIndex: function( zIndex ) {
		if ( zIndex !== undefined ) {
			return this.css( "zIndex", zIndex );
		}

		if ( this.length ) {
			var elem = $( this[ 0 ] ), position, value;
			while ( elem.length && elem[ 0 ] !== document ) {
				// Ignore z-index if position is set to a value where z-index is ignored by the browser
				// This makes behavior of this function consistent across browsers
				// WebKit always returns auto if the element is positioned
				position = elem.css( "position" );
				if ( position === "absolute" || position === "relative" || position === "fixed" ) {
					// IE returns 0 when zIndex is not specified
					// other browsers return a string
					// we ignore the case of nested elements with an explicit value of 0
					// <div style="z-index: -10;"><div style="z-index: 0;"></div></div>
					value = parseInt( elem.css( "zIndex" ), 10 );
					if ( !isNaN( value ) && value !== 0 ) {
						return value;
					}
				}
				elem = elem.parent();
			}
		}

		return 0;
	},

	uniqueId: function() {
		return this.each(function() {
			if ( !this.id ) {
				this.id = "ui-id-" + (++uuid);
			}
		});
	},

	removeUniqueId: function() {
		return this.each(function() {
			if ( runiqueId.test( this.id ) ) {
				$( this ).removeAttr( "id" );
			}
		});
	}
});

// selectors
function focusable( element, isTabIndexNotNaN ) {
	var map, mapName, img,
		nodeName = element.nodeName.toLowerCase();
	if ( "area" === nodeName ) {
		map = element.parentNode;
		mapName = map.name;
		if ( !element.href || !mapName || map.nodeName.toLowerCase() !== "map" ) {
			return false;
		}
		img = $( "img[usemap=#" + mapName + "]" )[0];
		return !!img && visible( img );
	}
	return ( /input|select|textarea|button|object/.test( nodeName ) ?
		!element.disabled :
		"a" === nodeName ?
			element.href || isTabIndexNotNaN :
			isTabIndexNotNaN) &&
		// the element and all of its ancestors must be visible
		visible( element );
}

function visible( element ) {
	return $.expr.filters.visible( element ) &&
		!$( element ).parents().addBack().filter(function() {
			return $.css( this, "visibility" ) === "hidden";
		}).length;
}

$.extend( $.expr[ ":" ], {
	data: $.expr.createPseudo ?
		$.expr.createPseudo(function( dataName ) {
			return function( elem ) {
				return !!$.data( elem, dataName );
			};
		}) :
		// support: jQuery <1.8
		function( elem, i, match ) {
			return !!$.data( elem, match[ 3 ] );
		},

	focusable: function( element ) {
		return focusable( element, !isNaN( $.attr( element, "tabindex" ) ) );
	},

	tabbable: function( element ) {
		var tabIndex = $.attr( element, "tabindex" ),
			isTabIndexNaN = isNaN( tabIndex );
		return ( isTabIndexNaN || tabIndex >= 0 ) && focusable( element, !isTabIndexNaN );
	}
});

// support: jQuery <1.8
if ( !$( "<a>" ).outerWidth( 1 ).jquery ) {
	$.each( [ "Width", "Height" ], function( i, name ) {
		var side = name === "Width" ? [ "Left", "Right" ] : [ "Top", "Bottom" ],
			type = name.toLowerCase(),
			orig = {
				innerWidth: $.fn.innerWidth,
				innerHeight: $.fn.innerHeight,
				outerWidth: $.fn.outerWidth,
				outerHeight: $.fn.outerHeight
			};

		function reduce( elem, size, border, margin ) {
			$.each( side, function() {
				size -= parseFloat( $.css( elem, "padding" + this ) ) || 0;
				if ( border ) {
					size -= parseFloat( $.css( elem, "border" + this + "Width" ) ) || 0;
				}
				if ( margin ) {
					size -= parseFloat( $.css( elem, "margin" + this ) ) || 0;
				}
			});
			return size;
		}

		$.fn[ "inner" + name ] = function( size ) {
			if ( size === undefined ) {
				return orig[ "inner" + name ].call( this );
			}

			return this.each(function() {
				$( this ).css( type, reduce( this, size ) + "px" );
			});
		};

		$.fn[ "outer" + name] = function( size, margin ) {
			if ( typeof size !== "number" ) {
				return orig[ "outer" + name ].call( this, size );
			}

			return this.each(function() {
				$( this).css( type, reduce( this, size, true, margin ) + "px" );
			});
		};
	});
}

// support: jQuery <1.8
if ( !$.fn.addBack ) {
	$.fn.addBack = function( selector ) {
		return this.add( selector == null ?
			this.prevObject : this.prevObject.filter( selector )
		);
	};
}

// support: jQuery 1.6.1, 1.6.2 (http://bugs.jquery.com/ticket/9413)
if ( $( "<a>" ).data( "a-b", "a" ).removeData( "a-b" ).data( "a-b" ) ) {
	$.fn.removeData = (function( removeData ) {
		return function( key ) {
			if ( arguments.length ) {
				return removeData.call( this, $.camelCase( key ) );
			} else {
				return removeData.call( this );
			}
		};
	})( $.fn.removeData );
}





// deprecated
$.ui.ie = !!/msie [\w.]+/.exec( navigator.userAgent.toLowerCase() );

$.support.selectstart = "onselectstart" in document.createElement( "div" );
$.fn.extend({
	disableSelection: function() {
		return this.bind( ( $.support.selectstart ? "selectstart" : "mousedown" ) +
			".ui-disableSelection", function( event ) {
				event.preventDefault();
			});
	},

	enableSelection: function() {
		return this.unbind( ".ui-disableSelection" );
	}
});

$.extend( $.ui, {
	// $.ui.plugin is deprecated. Use $.widget() extensions instead.
	plugin: {
		add: function( module, option, set ) {
			var i,
				proto = $.ui[ module ].prototype;
			for ( i in set ) {
				proto.plugins[ i ] = proto.plugins[ i ] || [];
				proto.plugins[ i ].push( [ option, set[ i ] ] );
			}
		},
		call: function( instance, name, args ) {
			var i,
				set = instance.plugins[ name ];
			if ( !set || !instance.element[ 0 ].parentNode || instance.element[ 0 ].parentNode.nodeType === 11 ) {
				return;
			}

			for ( i = 0; i < set.length; i++ ) {
				if ( instance.options[ set[ i ][ 0 ] ] ) {
					set[ i ][ 1 ].apply( instance.element, args );
				}
			}
		}
	},

	// only used by resizable
	hasScroll: function( el, a ) {

		//If overflow is hidden, the element might have extra content, but the user wants to hide it
		if ( $( el ).css( "overflow" ) === "hidden") {
			return false;
		}

		var scroll = ( a && a === "left" ) ? "scrollLeft" : "scrollTop",
			has = false;

		if ( el[ scroll ] > 0 ) {
			return true;
		}

		// TODO: determine which cases actually cause this to happen
		// if the element doesn't have the scroll set, see if it's possible to
		// set the scroll
		el[ scroll ] = 1;
		has = ( el[ scroll ] > 0 );
		el[ scroll ] = 0;
		return has;
	}
});

})( jQuery );
(function( $, undefined ) {

var uuid = 0,
	slice = Array.prototype.slice,
	_cleanData = $.cleanData;
$.cleanData = function( elems ) {
	for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
		try {
			$( elem ).triggerHandler( "remove" );
		// http://bugs.jquery.com/ticket/8235
		} catch( e ) {}
	}
	_cleanData( elems );
};

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );
};

$.widget.extend = function( target ) {
	var input = slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = slice.call( arguments, 1 ),
			returnValue = this;

		// allow multiple hashes to be passed on init
		options = !isMethodCall && args.length ?
			$.widget.extend.apply( null, [ options ].concat(args) ) :
			options;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {
			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} )._init();
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;
		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			// 1.9 BC for #7810
			// TODO remove dual storage
			.removeData( this.widgetName )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( arguments.length === 1 ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( arguments.length === 1 ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
			this.hoverable.removeClass( "ui-state-hover" );
			this.focusable.removeClass( "ui-state-focus" );
		}

		return this;
	},

	enable: function() {
		return this._setOption( "disabled", false );
	},
	disable: function() {
		return this._setOption( "disabled", true );
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			// accept selectors, DOM elements
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^(\w+)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

})( jQuery );
(function( $, undefined ) {

var mouseHandled = false;
$( document ).mouseup( function() {
	mouseHandled = false;
});

$.widget("ui.mouse", {
	version: "1.10.4",
	options: {
		cancel: "input,textarea,button,select,option",
		distance: 1,
		delay: 0
	},
	_mouseInit: function() {
		var that = this;

		this.element
			.bind("mousedown."+this.widgetName, function(event) {
				return that._mouseDown(event);
			})
			.bind("click."+this.widgetName, function(event) {
				if (true === $.data(event.target, that.widgetName + ".preventClickEvent")) {
					$.removeData(event.target, that.widgetName + ".preventClickEvent");
					event.stopImmediatePropagation();
					return false;
				}
			});

		this.started = false;
	},

	// TODO: make sure destroying one instance of mouse doesn't mess with
	// other instances of mouse
	_mouseDestroy: function() {
		this.element.unbind("."+this.widgetName);
		if ( this._mouseMoveDelegate ) {
			$(document)
				.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
				.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);
		}
	},

	_mouseDown: function(event) {
		// don't let more than one widget handle mouseStart
		if( mouseHandled ) { return; }

		// we may have missed mouseup (out of window)
		(this._mouseStarted && this._mouseUp(event));

		this._mouseDownEvent = event;

		var that = this,
			btnIsLeft = (event.which === 1),
			// event.target.nodeName works around a bug in IE 8 with
			// disabled inputs (#7620)
			elIsCancel = (typeof this.options.cancel === "string" && event.target.nodeName ? $(event.target).closest(this.options.cancel).length : false);
		if (!btnIsLeft || elIsCancel || !this._mouseCapture(event)) {
			return true;
		}

		this.mouseDelayMet = !this.options.delay;
		if (!this.mouseDelayMet) {
			this._mouseDelayTimer = setTimeout(function() {
				that.mouseDelayMet = true;
			}, this.options.delay);
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted = (this._mouseStart(event) !== false);
			if (!this._mouseStarted) {
				event.preventDefault();
				return true;
			}
		}

		// Click event may never have fired (Gecko & Opera)
		if (true === $.data(event.target, this.widgetName + ".preventClickEvent")) {
			$.removeData(event.target, this.widgetName + ".preventClickEvent");
		}

		// these delegates are required to keep context
		this._mouseMoveDelegate = function(event) {
			return that._mouseMove(event);
		};
		this._mouseUpDelegate = function(event) {
			return that._mouseUp(event);
		};
		$(document)
			.bind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.bind("mouseup."+this.widgetName, this._mouseUpDelegate);

		event.preventDefault();

		mouseHandled = true;
		return true;
	},

	_mouseMove: function(event) {
		// IE mouseup check - mouseup happened when mouse was out of window
		if ($.ui.ie && ( !document.documentMode || document.documentMode < 9 ) && !event.button) {
			return this._mouseUp(event);
		}

		if (this._mouseStarted) {
			this._mouseDrag(event);
			return event.preventDefault();
		}

		if (this._mouseDistanceMet(event) && this._mouseDelayMet(event)) {
			this._mouseStarted =
				(this._mouseStart(this._mouseDownEvent, event) !== false);
			(this._mouseStarted ? this._mouseDrag(event) : this._mouseUp(event));
		}

		return !this._mouseStarted;
	},

	_mouseUp: function(event) {
		$(document)
			.unbind("mousemove."+this.widgetName, this._mouseMoveDelegate)
			.unbind("mouseup."+this.widgetName, this._mouseUpDelegate);

		if (this._mouseStarted) {
			this._mouseStarted = false;

			if (event.target === this._mouseDownEvent.target) {
				$.data(event.target, this.widgetName + ".preventClickEvent", true);
			}

			this._mouseStop(event);
		}

		return false;
	},

	_mouseDistanceMet: function(event) {
		return (Math.max(
				Math.abs(this._mouseDownEvent.pageX - event.pageX),
				Math.abs(this._mouseDownEvent.pageY - event.pageY)
			) >= this.options.distance
		);
	},

	_mouseDelayMet: function(/* event */) {
		return this.mouseDelayMet;
	},

	// These are placeholder methods, to be overriden by extending plugin
	_mouseStart: function(/* event */) {},
	_mouseDrag: function(/* event */) {},
	_mouseStop: function(/* event */) {},
	_mouseCapture: function(/* event */) { return true; }
});

})(jQuery);
(function( $, undefined ) {

function isOverAxis( x, reference, size ) {
	return ( x > reference ) && ( x < ( reference + size ) );
}

function isFloating(item) {
	return (/left|right/).test(item.css("float")) || (/inline|table-cell/).test(item.css("display"));
}

$.widget("ui.sortable", $.ui.mouse, {
	version: "1.10.4",
	widgetEventPrefix: "sort",
	ready: false,
	options: {
		appendTo: "parent",
		axis: false,
		connectWith: false,
		containment: false,
		cursor: "auto",
		cursorAt: false,
		dropOnEmpty: true,
		forcePlaceholderSize: false,
		forceHelperSize: false,
		grid: false,
		handle: false,
		helper: "original",
		items: "> *",
		opacity: false,
		placeholder: false,
		revert: false,
		scroll: true,
		scrollSensitivity: 20,
		scrollSpeed: 20,
		scope: "default",
		tolerance: "intersect",
		zIndex: 1000,

		// callbacks
		activate: null,
		beforeStop: null,
		change: null,
		deactivate: null,
		out: null,
		over: null,
		receive: null,
		remove: null,
		sort: null,
		start: null,
		stop: null,
		update: null
	},
	_create: function() {

		var o = this.options;
		this.containerCache = {};
		this.element.addClass("ui-sortable");

		//Get the items
		this.refresh();

		//Let's determine if the items are being displayed horizontally
		this.floating = this.items.length ? o.axis === "x" || isFloating(this.items[0].item) : false;

		//Let's determine the parent's offset
		this.offset = this.element.offset();

		//Initialize mouse events for interaction
		this._mouseInit();

		//We're ready to go
		this.ready = true;

	},

	_destroy: function() {
		this.element
			.removeClass("ui-sortable ui-sortable-disabled");
		this._mouseDestroy();

		for ( var i = this.items.length - 1; i >= 0; i-- ) {
			this.items[i].item.removeData(this.widgetName + "-item");
		}

		return this;
	},

	_setOption: function(key, value){
		if ( key === "disabled" ) {
			this.options[ key ] = value;

			this.widget().toggleClass( "ui-sortable-disabled", !!value );
		} else {
			// Don't call widget base _setOption for disable as it adds ui-state-disabled class
			$.Widget.prototype._setOption.apply(this, arguments);
		}
	},

	_mouseCapture: function(event, overrideHandle) {
		var currentItem = null,
			validHandle = false,
			that = this;

		if (this.reverting) {
			return false;
		}

		if(this.options.disabled || this.options.type === "static") {
			return false;
		}

		//We have to refresh the items data once first
		this._refreshItems(event);

		//Find out if the clicked node (or one of its parents) is a actual item in this.items
		$(event.target).parents().each(function() {
			if($.data(this, that.widgetName + "-item") === that) {
				currentItem = $(this);
				return false;
			}
		});
		if($.data(event.target, that.widgetName + "-item") === that) {
			currentItem = $(event.target);
		}

		if(!currentItem) {
			return false;
		}
		if(this.options.handle && !overrideHandle) {
			$(this.options.handle, currentItem).find("*").addBack().each(function() {
				if(this === event.target) {
					validHandle = true;
				}
			});
			if(!validHandle) {
				return false;
			}
		}

		this.currentItem = currentItem;
		this._removeCurrentsFromItems();
		return true;

	},

	_mouseStart: function(event, overrideHandle, noActivation) {

		var i, body,
			o = this.options;

		this.currentContainer = this;

		//We only need to call refreshPositions, because the refreshItems call has been moved to mouseCapture
		this.refreshPositions();

		//Create and append the visible helper
		this.helper = this._createHelper(event);

		//Cache the helper size
		this._cacheHelperProportions();

		/*
		 * - Position generation -
		 * This block generates everything position related - it's the core of draggables.
		 */

		//Cache the margins of the original element
		this._cacheMargins();

		//Get the next scrolling parent
		this.scrollParent = this.helper.scrollParent();

		//The element's absolute position on the page minus margins
		this.offset = this.currentItem.offset();
		this.offset = {
			top: this.offset.top - this.margins.top,
			left: this.offset.left - this.margins.left
		};

		$.extend(this.offset, {
			click: { //Where the click happened, relative to the element
				left: event.pageX - this.offset.left,
				top: event.pageY - this.offset.top
			},
			parent: this._getParentOffset(),
			relative: this._getRelativeOffset() //This is a relative to absolute position minus the actual position calculation - only used for relative positioned helper
		});

		// Only after we got the offset, we can change the helper's position to absolute
		// TODO: Still need to figure out a way to make relative sorting possible
		this.helper.css("position", "absolute");
		this.cssPosition = this.helper.css("position");

		//Generate the original position
		this.originalPosition = this._generatePosition(event);
		this.originalPageX = event.pageX;
		this.originalPageY = event.pageY;

		//Adjust the mouse offset relative to the helper if "cursorAt" is supplied
		(o.cursorAt && this._adjustOffsetFromHelper(o.cursorAt));

		//Cache the former DOM position
		this.domPosition = { prev: this.currentItem.prev()[0], parent: this.currentItem.parent()[0] };

		//If the helper is not the original, hide the original so it's not playing any role during the drag, won't cause anything bad this way
		if(this.helper[0] !== this.currentItem[0]) {
			this.currentItem.hide();
		}

		//Create the placeholder
		this._createPlaceholder();

		//Set a containment if given in the options
		if(o.containment) {
			this._setContainment();
		}

		if( o.cursor && o.cursor !== "auto" ) { // cursor option
			body = this.document.find( "body" );

			// support: IE
			this.storedCursor = body.css( "cursor" );
			body.css( "cursor", o.cursor );

			this.storedStylesheet = $( "<style>*{ cursor: "+o.cursor+" !important; }</style>" ).appendTo( body );
		}

		if(o.opacity) { // opacity option
			if (this.helper.css("opacity")) {
				this._storedOpacity = this.helper.css("opacity");
			}
			this.helper.css("opacity", o.opacity);
		}

		if(o.zIndex) { // zIndex option
			if (this.helper.css("zIndex")) {
				this._storedZIndex = this.helper.css("zIndex");
			}
			this.helper.css("zIndex", o.zIndex);
		}

		//Prepare scrolling
		if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {
			this.overflowOffset = this.scrollParent.offset();
		}

		//Call callbacks
		this._trigger("start", event, this._uiHash());

		//Recache the helper size
		if(!this._preserveHelperProportions) {
			this._cacheHelperProportions();
		}


		//Post "activate" events to possible containers
		if( !noActivation ) {
			for ( i = this.containers.length - 1; i >= 0; i-- ) {
				this.containers[ i ]._trigger( "activate", event, this._uiHash( this ) );
			}
		}

		//Prepare possible droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.current = this;
		}

		if ($.ui.ddmanager && !o.dropBehaviour) {
			$.ui.ddmanager.prepareOffsets(this, event);
		}

		this.dragging = true;

		this.helper.addClass("ui-sortable-helper");
		this._mouseDrag(event); //Execute the drag once - this causes the helper not to be visible before getting its correct position
		return true;

	},

	_mouseDrag: function(event) {
		var i, item, itemElement, intersection,
			o = this.options,
			scrolled = false;

		//Compute the helpers position
		this.position = this._generatePosition(event);
		this.positionAbs = this._convertPositionTo("absolute");

		if (!this.lastPositionAbs) {
			this.lastPositionAbs = this.positionAbs;
		}

		//Do scrolling
		if(this.options.scroll) {
			if(this.scrollParent[0] !== document && this.scrollParent[0].tagName !== "HTML") {

				if((this.overflowOffset.top + this.scrollParent[0].offsetHeight) - event.pageY < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop + o.scrollSpeed;
				} else if(event.pageY - this.overflowOffset.top < o.scrollSensitivity) {
					this.scrollParent[0].scrollTop = scrolled = this.scrollParent[0].scrollTop - o.scrollSpeed;
				}

				if((this.overflowOffset.left + this.scrollParent[0].offsetWidth) - event.pageX < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft + o.scrollSpeed;
				} else if(event.pageX - this.overflowOffset.left < o.scrollSensitivity) {
					this.scrollParent[0].scrollLeft = scrolled = this.scrollParent[0].scrollLeft - o.scrollSpeed;
				}

			} else {

				if(event.pageY - $(document).scrollTop() < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() - o.scrollSpeed);
				} else if($(window).height() - (event.pageY - $(document).scrollTop()) < o.scrollSensitivity) {
					scrolled = $(document).scrollTop($(document).scrollTop() + o.scrollSpeed);
				}

				if(event.pageX - $(document).scrollLeft() < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() - o.scrollSpeed);
				} else if($(window).width() - (event.pageX - $(document).scrollLeft()) < o.scrollSensitivity) {
					scrolled = $(document).scrollLeft($(document).scrollLeft() + o.scrollSpeed);
				}

			}

			if(scrolled !== false && $.ui.ddmanager && !o.dropBehaviour) {
				$.ui.ddmanager.prepareOffsets(this, event);
			}
		}

		//Regenerate the absolute position used for position checks
		this.positionAbs = this._convertPositionTo("absolute");

		//Set the helper position
		if(!this.options.axis || this.options.axis !== "y") {
			this.helper[0].style.left = this.position.left+"px";
		}
		if(!this.options.axis || this.options.axis !== "x") {
			this.helper[0].style.top = this.position.top+"px";
		}

		//Rearrange
		for (i = this.items.length - 1; i >= 0; i--) {

			//Cache variables and intersection, continue if no intersection
			item = this.items[i];
			itemElement = item.item[0];
			intersection = this._intersectsWithPointer(item);
			if (!intersection) {
				continue;
			}

			// Only put the placeholder inside the current Container, skip all
			// items from other containers. This works because when moving
			// an item from one container to another the
			// currentContainer is switched before the placeholder is moved.
			//
			// Without this, moving items in "sub-sortables" can cause
			// the placeholder to jitter beetween the outer and inner container.
			if (item.instance !== this.currentContainer) {
				continue;
			}

			// cannot intersect with itself
			// no useless actions that have been done before
			// no action if the item moved is the parent of the item checked
			if (itemElement !== this.currentItem[0] &&
				this.placeholder[intersection === 1 ? "next" : "prev"]()[0] !== itemElement &&
				!$.contains(this.placeholder[0], itemElement) &&
				(this.options.type === "semi-dynamic" ? !$.contains(this.element[0], itemElement) : true)
			) {

				this.direction = intersection === 1 ? "down" : "up";

				if (this.options.tolerance === "pointer" || this._intersectsWithSides(item)) {
					this._rearrange(event, item);
				} else {
					break;
				}

				this._trigger("change", event, this._uiHash());
				break;
			}
		}

		//Post events to containers
		this._contactContainers(event);

		//Interconnect with droppables
		if($.ui.ddmanager) {
			$.ui.ddmanager.drag(this, event);
		}

		//Call callbacks
		this._trigger("sort", event, this._uiHash());

		this.lastPositionAbs = this.positionAbs;
		return false;

	},

	_mouseStop: function(event, noPropagation) {

		if(!event) {
			return;
		}

		//If we are using droppables, inform the manager about the drop
		if ($.ui.ddmanager && !this.options.dropBehaviour) {
			$.ui.ddmanager.drop(this, event);
		}

		if(this.options.revert) {
			var that = this,
				cur = this.placeholder.offset(),
				axis = this.options.axis,
				animation = {};

			if ( !axis || axis === "x" ) {
				animation.left = cur.left - this.offset.parent.left - this.margins.left + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollLeft);
			}
			if ( !axis || axis === "y" ) {
				animation.top = cur.top - this.offset.parent.top - this.margins.top + (this.offsetParent[0] === document.body ? 0 : this.offsetParent[0].scrollTop);
			}
			this.reverting = true;
			$(this.helper).animate( animation, parseInt(this.options.revert, 10) || 500, function() {
				that._clear(event);
			});
		} else {
			this._clear(event, noPropagation);
		}

		return false;

	},

	cancel: function() {

		if(this.dragging) {

			this._mouseUp({ target: null });

			if(this.options.helper === "original") {
				this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
			} else {
				this.currentItem.show();
			}

			//Post deactivating events to containers
			for (var i = this.containers.length - 1; i >= 0; i--){
				this.containers[i]._trigger("deactivate", null, this._uiHash(this));
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", null, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		if (this.placeholder) {
			//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
			if(this.placeholder[0].parentNode) {
				this.placeholder[0].parentNode.removeChild(this.placeholder[0]);
			}
			if(this.options.helper !== "original" && this.helper && this.helper[0].parentNode) {
				this.helper.remove();
			}

			$.extend(this, {
				helper: null,
				dragging: false,
				reverting: false,
				_noFinalSort: null
			});

			if(this.domPosition.prev) {
				$(this.domPosition.prev).after(this.currentItem);
			} else {
				$(this.domPosition.parent).prepend(this.currentItem);
			}
		}

		return this;

	},

	serialize: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			str = [];
		o = o || {};

		$(items).each(function() {
			var res = ($(o.item || this).attr(o.attribute || "id") || "").match(o.expression || (/(.+)[\-=_](.+)/));
			if (res) {
				str.push((o.key || res[1]+"[]")+"="+(o.key && o.expression ? res[1] : res[2]));
			}
		});

		if(!str.length && o.key) {
			str.push(o.key + "=");
		}

		return str.join("&");

	},

	toArray: function(o) {

		var items = this._getItemsAsjQuery(o && o.connected),
			ret = [];

		o = o || {};

		items.each(function() { ret.push($(o.item || this).attr(o.attribute || "id") || ""); });
		return ret;

	},

	/* Be careful with the following core functions */
	_intersectsWith: function(item) {

		var x1 = this.positionAbs.left,
			x2 = x1 + this.helperProportions.width,
			y1 = this.positionAbs.top,
			y2 = y1 + this.helperProportions.height,
			l = item.left,
			r = l + item.width,
			t = item.top,
			b = t + item.height,
			dyClick = this.offset.click.top,
			dxClick = this.offset.click.left,
			isOverElementHeight = ( this.options.axis === "x" ) || ( ( y1 + dyClick ) > t && ( y1 + dyClick ) < b ),
			isOverElementWidth = ( this.options.axis === "y" ) || ( ( x1 + dxClick ) > l && ( x1 + dxClick ) < r ),
			isOverElement = isOverElementHeight && isOverElementWidth;

		if ( this.options.tolerance === "pointer" ||
			this.options.forcePointerForContainers ||
			(this.options.tolerance !== "pointer" && this.helperProportions[this.floating ? "width" : "height"] > item[this.floating ? "width" : "height"])
		) {
			return isOverElement;
		} else {

			return (l < x1 + (this.helperProportions.width / 2) && // Right Half
				x2 - (this.helperProportions.width / 2) < r && // Left Half
				t < y1 + (this.helperProportions.height / 2) && // Bottom Half
				y2 - (this.helperProportions.height / 2) < b ); // Top Half

		}
	},

	_intersectsWithPointer: function(item) {

		var isOverElementHeight = (this.options.axis === "x") || isOverAxis(this.positionAbs.top + this.offset.click.top, item.top, item.height),
			isOverElementWidth = (this.options.axis === "y") || isOverAxis(this.positionAbs.left + this.offset.click.left, item.left, item.width),
			isOverElement = isOverElementHeight && isOverElementWidth,
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (!isOverElement) {
			return false;
		}

		return this.floating ?
			( ((horizontalDirection && horizontalDirection === "right") || verticalDirection === "down") ? 2 : 1 )
			: ( verticalDirection && (verticalDirection === "down" ? 2 : 1) );

	},

	_intersectsWithSides: function(item) {

		var isOverBottomHalf = isOverAxis(this.positionAbs.top + this.offset.click.top, item.top + (item.height/2), item.height),
			isOverRightHalf = isOverAxis(this.positionAbs.left + this.offset.click.left, item.left + (item.width/2), item.width),
			verticalDirection = this._getDragVerticalDirection(),
			horizontalDirection = this._getDragHorizontalDirection();

		if (this.floating && horizontalDirection) {
			return ((horizontalDirection === "right" && isOverRightHalf) || (horizontalDirection === "left" && !isOverRightHalf));
		} else {
			return verticalDirection && ((verticalDirection === "down" && isOverBottomHalf) || (verticalDirection === "up" && !isOverBottomHalf));
		}

	},

	_getDragVerticalDirection: function() {
		var delta = this.positionAbs.top - this.lastPositionAbs.top;
		return delta !== 0 && (delta > 0 ? "down" : "up");
	},

	_getDragHorizontalDirection: function() {
		var delta = this.positionAbs.left - this.lastPositionAbs.left;
		return delta !== 0 && (delta > 0 ? "right" : "left");
	},

	refresh: function(event) {
		this._refreshItems(event);
		this.refreshPositions();
		return this;
	},

	_connectWith: function() {
		var options = this.options;
		return options.connectWith.constructor === String ? [options.connectWith] : options.connectWith;
	},

	_getItemsAsjQuery: function(connected) {

		var i, j, cur, inst,
			items = [],
			queries = [],
			connectWith = this._connectWith();

		if(connectWith && connected) {
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for ( j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element) : $(inst.options.items, inst.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), inst]);
					}
				}
			}
		}

		queries.push([$.isFunction(this.options.items) ? this.options.items.call(this.element, null, { options: this.options, item: this.currentItem }) : $(this.options.items, this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"), this]);

		function addItems() {
			items.push( this );
		}
		for (i = queries.length - 1; i >= 0; i--){
			queries[i][0].each( addItems );
		}

		return $(items);

	},

	_removeCurrentsFromItems: function() {

		var list = this.currentItem.find(":data(" + this.widgetName + "-item)");

		this.items = $.grep(this.items, function (item) {
			for (var j=0; j < list.length; j++) {
				if(list[j] === item.item[0]) {
					return false;
				}
			}
			return true;
		});

	},

	_refreshItems: function(event) {

		this.items = [];
		this.containers = [this];

		var i, j, cur, inst, targetData, _queries, item, queriesLength,
			items = this.items,
			queries = [[$.isFunction(this.options.items) ? this.options.items.call(this.element[0], event, { item: this.currentItem }) : $(this.options.items, this.element), this]],
			connectWith = this._connectWith();

		if(connectWith && this.ready) { //Shouldn't be run the first time through due to massive slow-down
			for (i = connectWith.length - 1; i >= 0; i--){
				cur = $(connectWith[i]);
				for (j = cur.length - 1; j >= 0; j--){
					inst = $.data(cur[j], this.widgetFullName);
					if(inst && inst !== this && !inst.options.disabled) {
						queries.push([$.isFunction(inst.options.items) ? inst.options.items.call(inst.element[0], event, { item: this.currentItem }) : $(inst.options.items, inst.element), inst]);
						this.containers.push(inst);
					}
				}
			}
		}

		for (i = queries.length - 1; i >= 0; i--) {
			targetData = queries[i][1];
			_queries = queries[i][0];

			for (j=0, queriesLength = _queries.length; j < queriesLength; j++) {
				item = $(_queries[j]);

				item.data(this.widgetName + "-item", targetData); // Data for target checking (mouse manager)

				items.push({
					item: item,
					instance: targetData,
					width: 0, height: 0,
					left: 0, top: 0
				});
			}
		}

	},

	refreshPositions: function(fast) {

		//This has to be redone because due to the item being moved out/into the offsetParent, the offsetParent's position will change
		if(this.offsetParent && this.helper) {
			this.offset.parent = this._getParentOffset();
		}

		var i, item, t, p;

		for (i = this.items.length - 1; i >= 0; i--){
			item = this.items[i];

			//We ignore calculating positions of all connected containers when we're not over them
			if(item.instance !== this.currentContainer && this.currentContainer && item.item[0] !== this.currentItem[0]) {
				continue;
			}

			t = this.options.toleranceElement ? $(this.options.toleranceElement, item.item) : item.item;

			if (!fast) {
				item.width = t.outerWidth();
				item.height = t.outerHeight();
			}

			p = t.offset();
			item.left = p.left;
			item.top = p.top;
		}

		if(this.options.custom && this.options.custom.refreshContainers) {
			this.options.custom.refreshContainers.call(this);
		} else {
			for (i = this.containers.length - 1; i >= 0; i--){
				p = this.containers[i].element.offset();
				this.containers[i].containerCache.left = p.left;
				this.containers[i].containerCache.top = p.top;
				this.containers[i].containerCache.width	= this.containers[i].element.outerWidth();
				this.containers[i].containerCache.height = this.containers[i].element.outerHeight();
			}
		}

		return this;
	},

	_createPlaceholder: function(that) {
		that = that || this;
		var className,
			o = that.options;

		if(!o.placeholder || o.placeholder.constructor === String) {
			className = o.placeholder;
			o.placeholder = {
				element: function() {

					var nodeName = that.currentItem[0].nodeName.toLowerCase(),
						element = $( "<" + nodeName + ">", that.document[0] )
							.addClass(className || that.currentItem[0].className+" ui-sortable-placeholder")
							.removeClass("ui-sortable-helper");

					if ( nodeName === "tr" ) {
						that.currentItem.children().each(function() {
							$( "<td>&#160;</td>", that.document[0] )
								.attr( "colspan", $( this ).attr( "colspan" ) || 1 )
								.appendTo( element );
						});
					} else if ( nodeName === "img" ) {
						element.attr( "src", that.currentItem.attr( "src" ) );
					}

					if ( !className ) {
						element.css( "visibility", "hidden" );
					}

					return element;
				},
				update: function(container, p) {

					// 1. If a className is set as 'placeholder option, we don't force sizes - the class is responsible for that
					// 2. The option 'forcePlaceholderSize can be enabled to force it even if a class name is specified
					if(className && !o.forcePlaceholderSize) {
						return;
					}

					//If the element doesn't have a actual height by itself (without styles coming from a stylesheet), it receives the inline height from the dragged item
					if(!p.height()) { p.height(that.currentItem.innerHeight() - parseInt(that.currentItem.css("paddingTop")||0, 10) - parseInt(that.currentItem.css("paddingBottom")||0, 10)); }
					if(!p.width()) { p.width(that.currentItem.innerWidth() - parseInt(that.currentItem.css("paddingLeft")||0, 10) - parseInt(that.currentItem.css("paddingRight")||0, 10)); }
				}
			};
		}

		//Create the placeholder
		that.placeholder = $(o.placeholder.element.call(that.element, that.currentItem));

		//Append it after the actual current item
		that.currentItem.after(that.placeholder);

		//Update the size of the placeholder (TODO: Logic to fuzzy, see line 316/317)
		o.placeholder.update(that, that.placeholder);

	},

	_contactContainers: function(event) {
		var i, j, dist, itemWithLeastDistance, posProperty, sizeProperty, base, cur, nearBottom, floating,
			innermostContainer = null,
			innermostIndex = null;

		// get innermost container that intersects with item
		for (i = this.containers.length - 1; i >= 0; i--) {

			// never consider a container that's located within the item itself
			if($.contains(this.currentItem[0], this.containers[i].element[0])) {
				continue;
			}

			if(this._intersectsWith(this.containers[i].containerCache)) {

				// if we've already found a container and it's more "inner" than this, then continue
				if(innermostContainer && $.contains(this.containers[i].element[0], innermostContainer.element[0])) {
					continue;
				}

				innermostContainer = this.containers[i];
				innermostIndex = i;

			} else {
				// container doesn't intersect. trigger "out" event if necessary
				if(this.containers[i].containerCache.over) {
					this.containers[i]._trigger("out", event, this._uiHash(this));
					this.containers[i].containerCache.over = 0;
				}
			}

		}

		// if no intersecting containers found, return
		if(!innermostContainer) {
			return;
		}

		// move the item into the container if it's not there already
		if(this.containers.length === 1) {
			if (!this.containers[innermostIndex].containerCache.over) {
				this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
				this.containers[innermostIndex].containerCache.over = 1;
			}
		} else {

			//When entering a new container, we will find the item with the least distance and append our item near it
			dist = 10000;
			itemWithLeastDistance = null;
			floating = innermostContainer.floating || isFloating(this.currentItem);
			posProperty = floating ? "left" : "top";
			sizeProperty = floating ? "width" : "height";
			base = this.positionAbs[posProperty] + this.offset.click[posProperty];
			for (j = this.items.length - 1; j >= 0; j--) {
				if(!$.contains(this.containers[innermostIndex].element[0], this.items[j].item[0])) {
					continue;
				}
				if(this.items[j].item[0] === this.currentItem[0]) {
					continue;
				}
				if (floating && !isOverAxis(this.positionAbs.top + this.offset.click.top, this.items[j].top, this.items[j].height)) {
					continue;
				}
				cur = this.items[j].item.offset()[posProperty];
				nearBottom = false;
				if(Math.abs(cur - base) > Math.abs(cur + this.items[j][sizeProperty] - base)){
					nearBottom = true;
					cur += this.items[j][sizeProperty];
				}

				if(Math.abs(cur - base) < dist) {
					dist = Math.abs(cur - base); itemWithLeastDistance = this.items[j];
					this.direction = nearBottom ? "up": "down";
				}
			}

			//Check if dropOnEmpty is enabled
			if(!itemWithLeastDistance && !this.options.dropOnEmpty) {
				return;
			}

			if(this.currentContainer === this.containers[innermostIndex]) {
				return;
			}

			itemWithLeastDistance ? this._rearrange(event, itemWithLeastDistance, null, true) : this._rearrange(event, null, this.containers[innermostIndex].element, true);
			this._trigger("change", event, this._uiHash());
			this.containers[innermostIndex]._trigger("change", event, this._uiHash(this));
			this.currentContainer = this.containers[innermostIndex];

			//Update the placeholder
			this.options.placeholder.update(this.currentContainer, this.placeholder);

			this.containers[innermostIndex]._trigger("over", event, this._uiHash(this));
			this.containers[innermostIndex].containerCache.over = 1;
		}


	},

	_createHelper: function(event) {

		var o = this.options,
			helper = $.isFunction(o.helper) ? $(o.helper.apply(this.element[0], [event, this.currentItem])) : (o.helper === "clone" ? this.currentItem.clone() : this.currentItem);

		//Add the helper to the DOM if that didn't happen already
		if(!helper.parents("body").length) {
			$(o.appendTo !== "parent" ? o.appendTo : this.currentItem[0].parentNode)[0].appendChild(helper[0]);
		}

		if(helper[0] === this.currentItem[0]) {
			this._storedCSS = { width: this.currentItem[0].style.width, height: this.currentItem[0].style.height, position: this.currentItem.css("position"), top: this.currentItem.css("top"), left: this.currentItem.css("left") };
		}

		if(!helper[0].style.width || o.forceHelperSize) {
			helper.width(this.currentItem.width());
		}
		if(!helper[0].style.height || o.forceHelperSize) {
			helper.height(this.currentItem.height());
		}

		return helper;

	},

	_adjustOffsetFromHelper: function(obj) {
		if (typeof obj === "string") {
			obj = obj.split(" ");
		}
		if ($.isArray(obj)) {
			obj = {left: +obj[0], top: +obj[1] || 0};
		}
		if ("left" in obj) {
			this.offset.click.left = obj.left + this.margins.left;
		}
		if ("right" in obj) {
			this.offset.click.left = this.helperProportions.width - obj.right + this.margins.left;
		}
		if ("top" in obj) {
			this.offset.click.top = obj.top + this.margins.top;
		}
		if ("bottom" in obj) {
			this.offset.click.top = this.helperProportions.height - obj.bottom + this.margins.top;
		}
	},

	_getParentOffset: function() {


		//Get the offsetParent and cache its position
		this.offsetParent = this.helper.offsetParent();
		var po = this.offsetParent.offset();

		// This is a special case where we need to modify a offset calculated on start, since the following happened:
		// 1. The position of the helper is absolute, so it's position is calculated based on the next positioned parent
		// 2. The actual offset parent is a child of the scroll parent, and the scroll parent isn't the document, which means that
		//    the scroll is included in the initial calculation of the offset of the parent, and never recalculated upon drag
		if(this.cssPosition === "absolute" && this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) {
			po.left += this.scrollParent.scrollLeft();
			po.top += this.scrollParent.scrollTop();
		}

		// This needs to be actually done for all browsers, since pageX/pageY includes this information
		// with an ugly IE fix
		if( this.offsetParent[0] === document.body || (this.offsetParent[0].tagName && this.offsetParent[0].tagName.toLowerCase() === "html" && $.ui.ie)) {
			po = { top: 0, left: 0 };
		}

		return {
			top: po.top + (parseInt(this.offsetParent.css("borderTopWidth"),10) || 0),
			left: po.left + (parseInt(this.offsetParent.css("borderLeftWidth"),10) || 0)
		};

	},

	_getRelativeOffset: function() {

		if(this.cssPosition === "relative") {
			var p = this.currentItem.position();
			return {
				top: p.top - (parseInt(this.helper.css("top"),10) || 0) + this.scrollParent.scrollTop(),
				left: p.left - (parseInt(this.helper.css("left"),10) || 0) + this.scrollParent.scrollLeft()
			};
		} else {
			return { top: 0, left: 0 };
		}

	},

	_cacheMargins: function() {
		this.margins = {
			left: (parseInt(this.currentItem.css("marginLeft"),10) || 0),
			top: (parseInt(this.currentItem.css("marginTop"),10) || 0)
		};
	},

	_cacheHelperProportions: function() {
		this.helperProportions = {
			width: this.helper.outerWidth(),
			height: this.helper.outerHeight()
		};
	},

	_setContainment: function() {

		var ce, co, over,
			o = this.options;
		if(o.containment === "parent") {
			o.containment = this.helper[0].parentNode;
		}
		if(o.containment === "document" || o.containment === "window") {
			this.containment = [
				0 - this.offset.relative.left - this.offset.parent.left,
				0 - this.offset.relative.top - this.offset.parent.top,
				$(o.containment === "document" ? document : window).width() - this.helperProportions.width - this.margins.left,
				($(o.containment === "document" ? document : window).height() || document.body.parentNode.scrollHeight) - this.helperProportions.height - this.margins.top
			];
		}

		if(!(/^(document|window|parent)$/).test(o.containment)) {
			ce = $(o.containment)[0];
			co = $(o.containment).offset();
			over = ($(ce).css("overflow") !== "hidden");

			this.containment = [
				co.left + (parseInt($(ce).css("borderLeftWidth"),10) || 0) + (parseInt($(ce).css("paddingLeft"),10) || 0) - this.margins.left,
				co.top + (parseInt($(ce).css("borderTopWidth"),10) || 0) + (parseInt($(ce).css("paddingTop"),10) || 0) - this.margins.top,
				co.left+(over ? Math.max(ce.scrollWidth,ce.offsetWidth) : ce.offsetWidth) - (parseInt($(ce).css("borderLeftWidth"),10) || 0) - (parseInt($(ce).css("paddingRight"),10) || 0) - this.helperProportions.width - this.margins.left,
				co.top+(over ? Math.max(ce.scrollHeight,ce.offsetHeight) : ce.offsetHeight) - (parseInt($(ce).css("borderTopWidth"),10) || 0) - (parseInt($(ce).css("paddingBottom"),10) || 0) - this.helperProportions.height - this.margins.top
			];
		}

	},

	_convertPositionTo: function(d, pos) {

		if(!pos) {
			pos = this.position;
		}
		var mod = d === "absolute" ? 1 : -1,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent,
			scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		return {
			top: (
				pos.top	+																// The absolute mouse position
				this.offset.relative.top * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top * mod -											// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ) * mod)
			),
			left: (
				pos.left +																// The absolute mouse position
				this.offset.relative.left * mod +										// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left * mod	-										// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ) * mod)
			)
		};

	},

	_generatePosition: function(event) {

		var top, left,
			o = this.options,
			pageX = event.pageX,
			pageY = event.pageY,
			scroll = this.cssPosition === "absolute" && !(this.scrollParent[0] !== document && $.contains(this.scrollParent[0], this.offsetParent[0])) ? this.offsetParent : this.scrollParent, scrollIsRootNode = (/(html|body)/i).test(scroll[0].tagName);

		// This is another very weird special case that only happens for relative elements:
		// 1. If the css position is relative
		// 2. and the scroll parent is the document or similar to the offset parent
		// we have to refresh the relative offset during the scroll so there are no jumps
		if(this.cssPosition === "relative" && !(this.scrollParent[0] !== document && this.scrollParent[0] !== this.offsetParent[0])) {
			this.offset.relative = this._getRelativeOffset();
		}

		/*
		 * - Position constraining -
		 * Constrain the position to a mix of grid, containment.
		 */

		if(this.originalPosition) { //If we are not dragging yet, we won't check for options

			if(this.containment) {
				if(event.pageX - this.offset.click.left < this.containment[0]) {
					pageX = this.containment[0] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top < this.containment[1]) {
					pageY = this.containment[1] + this.offset.click.top;
				}
				if(event.pageX - this.offset.click.left > this.containment[2]) {
					pageX = this.containment[2] + this.offset.click.left;
				}
				if(event.pageY - this.offset.click.top > this.containment[3]) {
					pageY = this.containment[3] + this.offset.click.top;
				}
			}

			if(o.grid) {
				top = this.originalPageY + Math.round((pageY - this.originalPageY) / o.grid[1]) * o.grid[1];
				pageY = this.containment ? ( (top - this.offset.click.top >= this.containment[1] && top - this.offset.click.top <= this.containment[3]) ? top : ((top - this.offset.click.top >= this.containment[1]) ? top - o.grid[1] : top + o.grid[1])) : top;

				left = this.originalPageX + Math.round((pageX - this.originalPageX) / o.grid[0]) * o.grid[0];
				pageX = this.containment ? ( (left - this.offset.click.left >= this.containment[0] && left - this.offset.click.left <= this.containment[2]) ? left : ((left - this.offset.click.left >= this.containment[0]) ? left - o.grid[0] : left + o.grid[0])) : left;
			}

		}

		return {
			top: (
				pageY -																// The absolute mouse position
				this.offset.click.top -													// Click offset (relative to the element)
				this.offset.relative.top	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.top +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollTop() : ( scrollIsRootNode ? 0 : scroll.scrollTop() ) ))
			),
			left: (
				pageX -																// The absolute mouse position
				this.offset.click.left -												// Click offset (relative to the element)
				this.offset.relative.left	-											// Only for relative positioned nodes: Relative offset from element to offset parent
				this.offset.parent.left +												// The offsetParent's offset without borders (offset + border)
				( ( this.cssPosition === "fixed" ? -this.scrollParent.scrollLeft() : scrollIsRootNode ? 0 : scroll.scrollLeft() ))
			)
		};

	},

	_rearrange: function(event, i, a, hardRefresh) {

		a ? a[0].appendChild(this.placeholder[0]) : i.item[0].parentNode.insertBefore(this.placeholder[0], (this.direction === "down" ? i.item[0] : i.item[0].nextSibling));

		//Various things done here to improve the performance:
		// 1. we create a setTimeout, that calls refreshPositions
		// 2. on the instance, we have a counter variable, that get's higher after every append
		// 3. on the local scope, we copy the counter variable, and check in the timeout, if it's still the same
		// 4. this lets only the last addition to the timeout stack through
		this.counter = this.counter ? ++this.counter : 1;
		var counter = this.counter;

		this._delay(function() {
			if(counter === this.counter) {
				this.refreshPositions(!hardRefresh); //Precompute after each DOM insertion, NOT on mousemove
			}
		});

	},

	_clear: function(event, noPropagation) {

		this.reverting = false;
		// We delay all events that have to be triggered to after the point where the placeholder has been removed and
		// everything else normalized again
		var i,
			delayedTriggers = [];

		// We first have to update the dom position of the actual currentItem
		// Note: don't do it if the current item is already removed (by a user), or it gets reappended (see #4088)
		if(!this._noFinalSort && this.currentItem.parent().length) {
			this.placeholder.before(this.currentItem);
		}
		this._noFinalSort = null;

		if(this.helper[0] === this.currentItem[0]) {
			for(i in this._storedCSS) {
				if(this._storedCSS[i] === "auto" || this._storedCSS[i] === "static") {
					this._storedCSS[i] = "";
				}
			}
			this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper");
		} else {
			this.currentItem.show();
		}

		if(this.fromOutside && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("receive", event, this._uiHash(this.fromOutside)); });
		}
		if((this.fromOutside || this.domPosition.prev !== this.currentItem.prev().not(".ui-sortable-helper")[0] || this.domPosition.parent !== this.currentItem.parent()[0]) && !noPropagation) {
			delayedTriggers.push(function(event) { this._trigger("update", event, this._uiHash()); }); //Trigger update callback if the DOM position has changed
		}

		// Check if the items Container has Changed and trigger appropriate
		// events.
		if (this !== this.currentContainer) {
			if(!noPropagation) {
				delayedTriggers.push(function(event) { this._trigger("remove", event, this._uiHash()); });
				delayedTriggers.push((function(c) { return function(event) { c._trigger("receive", event, this._uiHash(this)); };  }).call(this, this.currentContainer));
				delayedTriggers.push((function(c) { return function(event) { c._trigger("update", event, this._uiHash(this));  }; }).call(this, this.currentContainer));
			}
		}


		//Post events to containers
		function delayEvent( type, instance, container ) {
			return function( event ) {
				container._trigger( type, event, instance._uiHash( instance ) );
			};
		}
		for (i = this.containers.length - 1; i >= 0; i--){
			if (!noPropagation) {
				delayedTriggers.push( delayEvent( "deactivate", this, this.containers[ i ] ) );
			}
			if(this.containers[i].containerCache.over) {
				delayedTriggers.push( delayEvent( "out", this, this.containers[ i ] ) );
				this.containers[i].containerCache.over = 0;
			}
		}

		//Do what was originally in plugins
		if ( this.storedCursor ) {
			this.document.find( "body" ).css( "cursor", this.storedCursor );
			this.storedStylesheet.remove();
		}
		if(this._storedOpacity) {
			this.helper.css("opacity", this._storedOpacity);
		}
		if(this._storedZIndex) {
			this.helper.css("zIndex", this._storedZIndex === "auto" ? "" : this._storedZIndex);
		}

		this.dragging = false;
		if(this.cancelHelperRemoval) {
			if(!noPropagation) {
				this._trigger("beforeStop", event, this._uiHash());
				for (i=0; i < delayedTriggers.length; i++) {
					delayedTriggers[i].call(this, event);
				} //Trigger all delayed events
				this._trigger("stop", event, this._uiHash());
			}

			this.fromOutside = false;
			return false;
		}

		if(!noPropagation) {
			this._trigger("beforeStop", event, this._uiHash());
		}

		//$(this.placeholder[0]).remove(); would have been the jQuery way - unfortunately, it unbinds ALL events from the original node!
		this.placeholder[0].parentNode.removeChild(this.placeholder[0]);

		if(this.helper[0] !== this.currentItem[0]) {
			this.helper.remove();
		}
		this.helper = null;

		if(!noPropagation) {
			for (i=0; i < delayedTriggers.length; i++) {
				delayedTriggers[i].call(this, event);
			} //Trigger all delayed events
			this._trigger("stop", event, this._uiHash());
		}

		this.fromOutside = false;
		return true;

	},

	_trigger: function() {
		if ($.Widget.prototype._trigger.apply(this, arguments) === false) {
			this.cancel();
		}
	},

	_uiHash: function(_inst) {
		var inst = _inst || this;
		return {
			helper: inst.helper,
			placeholder: inst.placeholder || $([]),
			position: inst.position,
			originalPosition: inst.originalPosition,
			offset: inst.positionAbs,
			item: inst.currentItem,
			sender: _inst ? _inst.element : null
		};
	}

});

})(jQuery);

define("jquery-ui", function(){});

/*--------------------------------------------------------------------------
* linq.js - LINQ for JavaScript
* ver 2.2.0.2 (Jan. 21th, 2011)
*
* created and maintained by neuecc <ils@neue.cc>
* licensed under Microsoft Public License(Ms-PL)
* http://neue.cc/
* http://linqjs.codeplex.com/
*--------------------------------------------------------------------------*/

Enumerable = (function ()
{
    var Enumerable = function (getEnumerator)
    {
        this.GetEnumerator = getEnumerator;
    }

    // Generator

    Enumerable.Choice = function () // variable argument
    {
        var args = (arguments[0] instanceof Array) ? arguments[0] : arguments;

        return new Enumerable(function ()
        {
            return new IEnumerator(
                Functions.Blank,
                function ()
                {
                    return this.Yield(args[Math.floor(Math.random() * args.length)]);
                },
                Functions.Blank);
        });
    }

    Enumerable.Cycle = function () // variable argument
    {
        var args = (arguments[0] instanceof Array) ? arguments[0] : arguments;

        return new Enumerable(function ()
        {
            var index = 0;
            return new IEnumerator(
                Functions.Blank,
                function ()
                {
                    if (index >= args.length) index = 0;
                    return this.Yield(args[index++]);
                },
                Functions.Blank);
        });
    }

    Enumerable.Empty = function ()
    {
        return new Enumerable(function ()
        {
            return new IEnumerator(
                Functions.Blank,
                function () { return false; },
                Functions.Blank);
        });
    }

    Enumerable.From = function (obj)
    {
        if (obj == null)
        {
            return Enumerable.Empty();
        }
        if (obj instanceof Enumerable)
        {
            return obj;
        }
        if (typeof obj == Types.Number || typeof obj == Types.Boolean)
        {
            return Enumerable.Repeat(obj, 1);
        }
        if (typeof obj == Types.String)
        {
            return new Enumerable(function ()
            {
                var index = 0;
                return new IEnumerator(
                    Functions.Blank,
                    function ()
                    {
                        return (index < obj.length) ? this.Yield(obj.charAt(index++)) : false;
                    },
                    Functions.Blank);
            });
        }
        if (typeof obj != Types.Function)
        {
            // array or array like object
            if (typeof obj.length == Types.Number)
            {
                return new ArrayEnumerable(obj);
            }

            // JScript's IEnumerable
            if (!(obj instanceof Object) && Utils.IsIEnumerable(obj))
            {
                return new Enumerable(function ()
                {
                    var isFirst = true;
                    var enumerator;
                    return new IEnumerator(
                        function () { enumerator = new Enumerator(obj); },
                        function ()
                        {
                            if (isFirst) isFirst = false;
                            else enumerator.moveNext();

                            return (enumerator.atEnd()) ? false : this.Yield(enumerator.item());
                        },
                        Functions.Blank);
                });
            }
        }

        // case function/object : Create KeyValuePair[]
        return new Enumerable(function ()
        {
            var array = [];
            var index = 0;

            return new IEnumerator(
                function ()
                {
                    for (var key in obj)
                    {
                        if (!(obj[key] instanceof Function))
                        {
                            array.push({ Key: key, Value: obj[key] });
                        }
                    }
                },
                function ()
                {
                    return (index < array.length)
                        ? this.Yield(array[index++])
                        : false;
                },
                Functions.Blank);
        });
    },

    Enumerable.Return = function (element)
    {
        return Enumerable.Repeat(element, 1);
    }

    // Overload:function(input, pattern)
    // Overload:function(input, pattern, flags)
    Enumerable.Matches = function (input, pattern, flags)
    {
        if (flags == null) flags = "";
        if (pattern instanceof RegExp)
        {
            flags += (pattern.ignoreCase) ? "i" : "";
            flags += (pattern.multiline) ? "m" : "";
            pattern = pattern.source;
        }
        if (flags.indexOf("g") === -1) flags += "g";

        return new Enumerable(function ()
        {
            var regex;
            return new IEnumerator(
                function () { regex = new RegExp(pattern, flags) },
                function ()
                {
                    var match = regex.exec(input);
                    return (match) ? this.Yield(match) : false;
                },
                Functions.Blank);
        });
    }

    // Overload:function(start, count)
    // Overload:function(start, count, step)
    Enumerable.Range = function (start, count, step)
    {
        if (step == null) step = 1;
        return Enumerable.ToInfinity(start, step).Take(count);
    }

    // Overload:function(start, count)
    // Overload:function(start, count, step)
    Enumerable.RangeDown = function (start, count, step)
    {
        if (step == null) step = 1;
        return Enumerable.ToNegativeInfinity(start, step).Take(count);
    }

    // Overload:function(start, to)
    // Overload:function(start, to, step)
    Enumerable.RangeTo = function (start, to, step)
    {
        if (step == null) step = 1;
        return (start < to)
            ? Enumerable.ToInfinity(start, step).TakeWhile(function (i) { return i <= to; })
            : Enumerable.ToNegativeInfinity(start, step).TakeWhile(function (i) { return i >= to; })
    }

    // Overload:function(obj)
    // Overload:function(obj, num)
    Enumerable.Repeat = function (obj, num)
    {
        if (num != null) return Enumerable.Repeat(obj).Take(num);

        return new Enumerable(function ()
        {
            return new IEnumerator(
                Functions.Blank,
                function () { return this.Yield(obj); },
                Functions.Blank);
        });
    }

    Enumerable.RepeatWithFinalize = function (initializer, finalizer)
    {
        initializer = Utils.CreateLambda(initializer);
        finalizer = Utils.CreateLambda(finalizer);

        return new Enumerable(function ()
        {
            var element;
            return new IEnumerator(
                function () { element = initializer(); },
                function () { return this.Yield(element); },
                function ()
                {
                    if (element != null)
                    {
                        finalizer(element);
                        element = null;
                    }
                });
        });
    }

    // Overload:function(func)
    // Overload:function(func, count)
    Enumerable.Generate = function (func, count)
    {
        if (count != null) return Enumerable.Generate(func).Take(count);
        func = Utils.CreateLambda(func);

        return new Enumerable(function ()
        {
            return new IEnumerator(
                Functions.Blank,
                function () { return this.Yield(func()); },
                Functions.Blank);
        });
    }

    // Overload:function()
    // Overload:function(start)
    // Overload:function(start, step)
    Enumerable.ToInfinity = function (start, step)
    {
        if (start == null) start = 0;
        if (step == null) step = 1;

        return new Enumerable(function ()
        {
            var value;
            return new IEnumerator(
                function () { value = start - step },
                function () { return this.Yield(value += step); },
                Functions.Blank);
        });
    }

    // Overload:function()
    // Overload:function(start)
    // Overload:function(start, step)
    Enumerable.ToNegativeInfinity = function (start, step)
    {
        if (start == null) start = 0;
        if (step == null) step = 1;

        return new Enumerable(function ()
        {
            var value;
            return new IEnumerator(
                function () { value = start + step },
                function () { return this.Yield(value -= step); },
                Functions.Blank);
        });
    }

    Enumerable.Unfold = function (seed, func)
    {
        func = Utils.CreateLambda(func);

        return new Enumerable(function ()
        {
            var isFirst = true;
            var value;
            return new IEnumerator(
                Functions.Blank,
                function ()
                {
                    if (isFirst)
                    {
                        isFirst = false;
                        value = seed;
                        return this.Yield(value);
                    }
                    value = func(value);
                    return this.Yield(value);
                },
                Functions.Blank);
        });
    }

    // Extension Methods

    Enumerable.prototype =
    {
        /* Projection and Filtering Methods */

        // Overload:function(func)
        // Overload:function(func, resultSelector<element>)
        // Overload:function(func, resultSelector<element, nestLevel>)
        CascadeBreadthFirst: function (func, resultSelector)
        {
            var source = this;
            func = Utils.CreateLambda(func);
            resultSelector = Utils.CreateLambda(resultSelector);

            return new Enumerable(function ()
            {
                var enumerator;
                var nestLevel = 0;
                var buffer = [];

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        while (true)
                        {
                            if (enumerator.MoveNext())
                            {
                                buffer.push(enumerator.Current());
                                return this.Yield(resultSelector(enumerator.Current(), nestLevel));
                            }

                            var next = Enumerable.From(buffer).SelectMany(function (x) { return func(x); });
                            if (!next.Any())
                            {
                                return false;
                            }
                            else
                            {
                                nestLevel++;
                                buffer = [];
                                Utils.Dispose(enumerator);
                                enumerator = next.GetEnumerator();
                            }
                        }
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        // Overload:function(func)
        // Overload:function(func, resultSelector<element>)
        // Overload:function(func, resultSelector<element, nestLevel>)
        CascadeDepthFirst: function (func, resultSelector)
        {
            var source = this;
            func = Utils.CreateLambda(func);
            resultSelector = Utils.CreateLambda(resultSelector);

            return new Enumerable(function ()
            {
                var enumeratorStack = [];
                var enumerator;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        while (true)
                        {
                            if (enumerator.MoveNext())
                            {
                                var value = resultSelector(enumerator.Current(), enumeratorStack.length);
                                enumeratorStack.push(enumerator);
                                enumerator = Enumerable.From(func(enumerator.Current())).GetEnumerator();
                                return this.Yield(value);
                            }

                            if (enumeratorStack.length <= 0) return false;
                            Utils.Dispose(enumerator);
                            enumerator = enumeratorStack.pop();
                        }
                    },
                    function ()
                    {
                        try { Utils.Dispose(enumerator); }
                        finally { Enumerable.From(enumeratorStack).ForEach(function (s) { s.Dispose(); }) }
                    });
            });
        },

        Flatten: function ()
        {
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var middleEnumerator = null;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        while (true)
                        {
                            if (middleEnumerator != null)
                            {
                                if (middleEnumerator.MoveNext())
                                {
                                    return this.Yield(middleEnumerator.Current());
                                }
                                else
                                {
                                    middleEnumerator = null;
                                }
                            }

                            if (enumerator.MoveNext())
                            {
                                if (enumerator.Current() instanceof Array)
                                {
                                    Utils.Dispose(middleEnumerator);
                                    middleEnumerator = Enumerable.From(enumerator.Current())
                                        .SelectMany(Functions.Identity)
                                        .Flatten()
                                        .GetEnumerator();
                                    continue;
                                }
                                else
                                {
                                    return this.Yield(enumerator.Current());
                                }
                            }

                            return false;
                        }
                    },
                    function ()
                    {
                        try { Utils.Dispose(enumerator); }
                        finally { Utils.Dispose(middleEnumerator); }
                    });
            });
        },

        Pairwise: function (selector)
        {
            var source = this;
            selector = Utils.CreateLambda(selector);

            return new Enumerable(function ()
            {
                var enumerator;

                return new IEnumerator(
                    function ()
                    {
                        enumerator = source.GetEnumerator();
                        enumerator.MoveNext();
                    },
                    function ()
                    {
                        var prev = enumerator.Current();
                        return (enumerator.MoveNext())
                            ? this.Yield(selector(prev, enumerator.Current()))
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        // Overload:function(func)
        // Overload:function(seed,func<value,element>)
        // Overload:function(seed,func<value,element>,resultSelector)
        Scan: function (seed, func, resultSelector)
        {
            if (resultSelector != null) return this.Scan(seed, func).Select(resultSelector);

            var isUseSeed;
            if (func == null)
            {
                func = Utils.CreateLambda(seed); // arguments[0]
                isUseSeed = false;
            }
            else
            {
                func = Utils.CreateLambda(func);
                isUseSeed = true;
            }
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var value;
                var isFirst = true;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        if (isFirst)
                        {
                            isFirst = false;
                            if (!isUseSeed)
                            {
                                if (enumerator.MoveNext())
                                {
                                    return this.Yield(value = enumerator.Current());
                                }
                            }
                            else
                            {
                                return this.Yield(value = seed);
                            }
                        }

                        return (enumerator.MoveNext())
                            ? this.Yield(value = func(value, enumerator.Current()))
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        // Overload:function(selector<element>)
        // Overload:function(selector<element,index>)
        Select: function (selector)
        {
            var source = this;
            selector = Utils.CreateLambda(selector);

            return new Enumerable(function ()
            {
                var enumerator;
                var index = 0;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        return (enumerator.MoveNext())
                            ? this.Yield(selector(enumerator.Current(), index++))
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        // Overload:function(collectionSelector<element>)
        // Overload:function(collectionSelector<element,index>)
        // Overload:function(collectionSelector<element>,resultSelector)
        // Overload:function(collectionSelector<element,index>,resultSelector)
        SelectMany: function (collectionSelector, resultSelector)
        {
            var source = this;
            collectionSelector = Utils.CreateLambda(collectionSelector);
            if (resultSelector == null) resultSelector = function (a, b) { return b; }
            resultSelector = Utils.CreateLambda(resultSelector);

            return new Enumerable(function ()
            {
                var enumerator;
                var middleEnumerator = undefined;
                var index = 0;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        if (middleEnumerator === undefined)
                        {
                            if (!enumerator.MoveNext()) return false;
                        }
                        do
                        {
                            if (middleEnumerator == null)
                            {
                                var middleSeq = collectionSelector(enumerator.Current(), index++);
                                middleEnumerator = Enumerable.From(middleSeq).GetEnumerator();
                            }
                            if (middleEnumerator.MoveNext())
                            {
                                return this.Yield(resultSelector(enumerator.Current(), middleEnumerator.Current()));
                            }
                            Utils.Dispose(middleEnumerator);
                            middleEnumerator = null;
                        } while (enumerator.MoveNext())
                        return false;
                    },
                    function ()
                    {
                        try { Utils.Dispose(enumerator); }
                        finally { Utils.Dispose(middleEnumerator); }
                    })
            });
        },

        // Overload:function(predicate<element>)
        // Overload:function(predicate<element,index>)
        Where: function (predicate)
        {
            predicate = Utils.CreateLambda(predicate);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var index = 0;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        while (enumerator.MoveNext())
                        {
                            if (predicate(enumerator.Current(), index++))
                            {
                                return this.Yield(enumerator.Current());
                            }
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        OfType: function (type)
        {
            var typeName;
            switch (type)
            {
                case Number: typeName = Types.Number; break;
                case String: typeName = Types.String; break;
                case Boolean: typeName = Types.Boolean; break;
                case Function: typeName = Types.Function; break;
                default: typeName = null; break;
            }
            return (typeName === null)
                ? this.Where(function (x) { return x instanceof type })
                : this.Where(function (x) { return typeof x === typeName });
        },

        // Overload:function(second,selector<outer,inner>)
        // Overload:function(second,selector<outer,inner,index>)
        Zip: function (second, selector)
        {
            selector = Utils.CreateLambda(selector);
            var source = this;

            return new Enumerable(function ()
            {
                var firstEnumerator;
                var secondEnumerator;
                var index = 0;

                return new IEnumerator(
                    function ()
                    {
                        firstEnumerator = source.GetEnumerator();
                        secondEnumerator = Enumerable.From(second).GetEnumerator();
                    },
                    function ()
                    {
                        if (firstEnumerator.MoveNext() && secondEnumerator.MoveNext())
                        {
                            return this.Yield(selector(firstEnumerator.Current(), secondEnumerator.Current(), index++));
                        }
                        return false;
                    },
                    function ()
                    {
                        try { Utils.Dispose(firstEnumerator); }
                        finally { Utils.Dispose(secondEnumerator); }
                    })
            });
        },

        /* Join Methods */

        // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector)
        // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector)
        Join: function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector)
        {
            outerKeySelector = Utils.CreateLambda(outerKeySelector);
            innerKeySelector = Utils.CreateLambda(innerKeySelector);
            resultSelector = Utils.CreateLambda(resultSelector);
            compareSelector = Utils.CreateLambda(compareSelector);
            var source = this;

            return new Enumerable(function ()
            {
                var outerEnumerator;
                var lookup;
                var innerElements = null;
                var innerCount = 0;

                return new IEnumerator(
                    function ()
                    {
                        outerEnumerator = source.GetEnumerator();
                        lookup = Enumerable.From(inner).ToLookup(innerKeySelector, Functions.Identity, compareSelector);
                    },
                    function ()
                    {
                        while (true)
                        {
                            if (innerElements != null)
                            {
                                var innerElement = innerElements[innerCount++];
                                if (innerElement !== undefined)
                                {
                                    return this.Yield(resultSelector(outerEnumerator.Current(), innerElement));
                                }

                                innerElement = null;
                                innerCount = 0;
                            }

                            if (outerEnumerator.MoveNext())
                            {
                                var key = outerKeySelector(outerEnumerator.Current());
                                innerElements = lookup.Get(key).ToArray();
                            }
                            else
                            {
                                return false;
                            }
                        }
                    },
                    function () { Utils.Dispose(outerEnumerator); })
            });
        },

        // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector)
        // Overload:function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector)
        GroupJoin: function (inner, outerKeySelector, innerKeySelector, resultSelector, compareSelector)
        {
            outerKeySelector = Utils.CreateLambda(outerKeySelector);
            innerKeySelector = Utils.CreateLambda(innerKeySelector);
            resultSelector = Utils.CreateLambda(resultSelector);
            compareSelector = Utils.CreateLambda(compareSelector);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator = source.GetEnumerator();
                var lookup = null;

                return new IEnumerator(
                    function ()
                    {
                        enumerator = source.GetEnumerator();
                        lookup = Enumerable.From(inner).ToLookup(innerKeySelector, Functions.Identity, compareSelector);
                    },
                    function ()
                    {
                        if (enumerator.MoveNext())
                        {
                            var innerElement = lookup.Get(outerKeySelector(enumerator.Current()));
                            return this.Yield(resultSelector(enumerator.Current(), innerElement));
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        /* Set Methods */

        All: function (predicate)
        {
            predicate = Utils.CreateLambda(predicate);

            var result = true;
            this.ForEach(function (x)
            {
                if (!predicate(x))
                {
                    result = false;
                    return false; // break
                }
            });
            return result;
        },

        // Overload:function()
        // Overload:function(predicate)
        Any: function (predicate)
        {
            predicate = Utils.CreateLambda(predicate);

            var enumerator = this.GetEnumerator();
            try
            {
                if (arguments.length == 0) return enumerator.MoveNext(); // case:function()

                while (enumerator.MoveNext()) // case:function(predicate)
                {
                    if (predicate(enumerator.Current())) return true;
                }
                return false;
            }
            finally { Utils.Dispose(enumerator); }
        },

        Concat: function (second)
        {
            var source = this;

            return new Enumerable(function ()
            {
                var firstEnumerator;
                var secondEnumerator;

                return new IEnumerator(
                    function () { firstEnumerator = source.GetEnumerator(); },
                    function ()
                    {
                        if (secondEnumerator == null)
                        {
                            if (firstEnumerator.MoveNext()) return this.Yield(firstEnumerator.Current());
                            secondEnumerator = Enumerable.From(second).GetEnumerator();
                        }
                        if (secondEnumerator.MoveNext()) return this.Yield(secondEnumerator.Current());
                        return false;
                    },
                    function ()
                    {
                        try { Utils.Dispose(firstEnumerator); }
                        finally { Utils.Dispose(secondEnumerator); }
                    })
            });
        },

        Insert: function (index, second)
        {
            var source = this;

            return new Enumerable(function ()
            {
                var firstEnumerator;
                var secondEnumerator;
                var count = 0;
                var isEnumerated = false;

                return new IEnumerator(
                    function ()
                    {
                        firstEnumerator = source.GetEnumerator();
                        secondEnumerator = Enumerable.From(second).GetEnumerator();
                    },
                    function ()
                    {
                        if (count == index && secondEnumerator.MoveNext())
                        {
                            isEnumerated = true;
                            return this.Yield(secondEnumerator.Current());
                        }
                        if (firstEnumerator.MoveNext())
                        {
                            count++;
                            return this.Yield(firstEnumerator.Current());
                        }
                        if (!isEnumerated && secondEnumerator.MoveNext())
                        {
                            return this.Yield(secondEnumerator.Current());
                        }
                        return false;
                    },
                    function ()
                    {
                        try { Utils.Dispose(firstEnumerator); }
                        finally { Utils.Dispose(secondEnumerator); }
                    })
            });
        },

        Alternate: function (value)
        {
            value = Enumerable.Return(value);
            return this.SelectMany(function (elem)
            {
                return Enumerable.Return(elem).Concat(value);
            }).TakeExceptLast();
        },

        // Overload:function(value)
        // Overload:function(value, compareSelector)
        Contains: function (value, compareSelector)
        {
            compareSelector = Utils.CreateLambda(compareSelector);
            var enumerator = this.GetEnumerator();
            try
            {
                while (enumerator.MoveNext())
                {
                    if (compareSelector(enumerator.Current()) === value) return true;
                }
                return false;
            }
            finally { Utils.Dispose(enumerator) }
        },

        DefaultIfEmpty: function (defaultValue)
        {
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var isFirst = true;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        if (enumerator.MoveNext())
                        {
                            isFirst = false;
                            return this.Yield(enumerator.Current());
                        }
                        else if (isFirst)
                        {
                            isFirst = false;
                            return this.Yield(defaultValue);
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        // Overload:function()
        // Overload:function(compareSelector)
        Distinct: function (compareSelector)
        {
            return this.Except(Enumerable.Empty(), compareSelector);
        },

        // Overload:function(second)
        // Overload:function(second, compareSelector)
        Except: function (second, compareSelector)
        {
            compareSelector = Utils.CreateLambda(compareSelector);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var keys;

                return new IEnumerator(
                    function ()
                    {
                        enumerator = source.GetEnumerator();
                        keys = new Dictionary(compareSelector);
                        Enumerable.From(second).ForEach(function (key) { keys.Add(key); });
                    },
                    function ()
                    {
                        while (enumerator.MoveNext())
                        {
                            var current = enumerator.Current();
                            if (!keys.Contains(current))
                            {
                                keys.Add(current);
                                return this.Yield(current);
                            }
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        // Overload:function(second)
        // Overload:function(second, compareSelector)
        Intersect: function (second, compareSelector)
        {
            compareSelector = Utils.CreateLambda(compareSelector);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var keys;
                var outs;

                return new IEnumerator(
                    function ()
                    {
                        enumerator = source.GetEnumerator();

                        keys = new Dictionary(compareSelector);
                        Enumerable.From(second).ForEach(function (key) { keys.Add(key); });
                        outs = new Dictionary(compareSelector);
                    },
                    function ()
                    {
                        while (enumerator.MoveNext())
                        {
                            var current = enumerator.Current();
                            if (!outs.Contains(current) && keys.Contains(current))
                            {
                                outs.Add(current);
                                return this.Yield(current);
                            }
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        // Overload:function(second)
        // Overload:function(second, compareSelector)
        SequenceEqual: function (second, compareSelector)
        {
            compareSelector = Utils.CreateLambda(compareSelector);

            var firstEnumerator = this.GetEnumerator();
            try
            {
                var secondEnumerator = Enumerable.From(second).GetEnumerator();
                try
                {
                    while (firstEnumerator.MoveNext())
                    {
                        if (!secondEnumerator.MoveNext()
                            || compareSelector(firstEnumerator.Current()) !== compareSelector(secondEnumerator.Current()))
                        {
                            return false;
                        }
                    }

                    if (secondEnumerator.MoveNext()) return false;
                    return true;
                }
                finally { Utils.Dispose(secondEnumerator); }
            }
            finally { Utils.Dispose(firstEnumerator); }
        },

        Union: function (second, compareSelector)
        {
            compareSelector = Utils.CreateLambda(compareSelector);
            var source = this;

            return new Enumerable(function ()
            {
                var firstEnumerator;
                var secondEnumerator;
                var keys;

                return new IEnumerator(
                    function ()
                    {
                        firstEnumerator = source.GetEnumerator();
                        keys = new Dictionary(compareSelector);
                    },
                    function ()
                    {
                        var current;
                        if (secondEnumerator === undefined)
                        {
                            while (firstEnumerator.MoveNext())
                            {
                                current = firstEnumerator.Current();
                                if (!keys.Contains(current))
                                {
                                    keys.Add(current);
                                    return this.Yield(current);
                                }
                            }
                            secondEnumerator = Enumerable.From(second).GetEnumerator();
                        }
                        while (secondEnumerator.MoveNext())
                        {
                            current = secondEnumerator.Current();
                            if (!keys.Contains(current))
                            {
                                keys.Add(current);
                                return this.Yield(current);
                            }
                        }
                        return false;
                    },
                    function ()
                    {
                        try { Utils.Dispose(firstEnumerator); }
                        finally { Utils.Dispose(secondEnumerator); }
                    })
            });
        },

        /* Ordering Methods */

        OrderBy: function (keySelector)
        {
            return new OrderedEnumerable(this, keySelector, false);
        },

        OrderByDescending: function (keySelector)
        {
            return new OrderedEnumerable(this, keySelector, true);
        },

        Reverse: function ()
        {
            var source = this;

            return new Enumerable(function ()
            {
                var buffer;
                var index;

                return new IEnumerator(
                    function ()
                    {
                        buffer = source.ToArray();
                        index = buffer.length;
                    },
                    function ()
                    {
                        return (index > 0)
                            ? this.Yield(buffer[--index])
                            : false;
                    },
                    Functions.Blank)
            });
        },

        Shuffle: function ()
        {
            var source = this;

            return new Enumerable(function ()
            {
                var buffer;

                return new IEnumerator(
                    function () { buffer = source.ToArray(); },
                    function ()
                    {
                        if (buffer.length > 0)
                        {
                            var i = Math.floor(Math.random() * buffer.length);
                            return this.Yield(buffer.splice(i, 1)[0]);
                        }
                        return false;
                    },
                    Functions.Blank)
            });
        },

        /* Grouping Methods */

        // Overload:function(keySelector)
        // Overload:function(keySelector,elementSelector)
        // Overload:function(keySelector,elementSelector,resultSelector)
        // Overload:function(keySelector,elementSelector,resultSelector,compareSelector)
        GroupBy: function (keySelector, elementSelector, resultSelector, compareSelector)
        {
            var source = this;
            keySelector = Utils.CreateLambda(keySelector);
            elementSelector = Utils.CreateLambda(elementSelector);
            if (resultSelector != null) resultSelector = Utils.CreateLambda(resultSelector);
            compareSelector = Utils.CreateLambda(compareSelector);

            return new Enumerable(function ()
            {
                var enumerator;

                return new IEnumerator(
                    function ()
                    {
                        enumerator = source.ToLookup(keySelector, elementSelector, compareSelector)
                            .ToEnumerable()
                            .GetEnumerator();
                    },
                    function ()
                    {
                        while (enumerator.MoveNext())
                        {
                            return (resultSelector == null)
                                ? this.Yield(enumerator.Current())
                                : this.Yield(resultSelector(enumerator.Current().Key(), enumerator.Current()));
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        // Overload:function(keySelector)
        // Overload:function(keySelector,elementSelector)
        // Overload:function(keySelector,elementSelector,resultSelector)
        // Overload:function(keySelector,elementSelector,resultSelector,compareSelector)
        PartitionBy: function (keySelector, elementSelector, resultSelector, compareSelector)
        {

            var source = this;
            keySelector = Utils.CreateLambda(keySelector);
            elementSelector = Utils.CreateLambda(elementSelector);
            compareSelector = Utils.CreateLambda(compareSelector);
            var hasResultSelector;
            if (resultSelector == null)
            {
                hasResultSelector = false;
                resultSelector = function (key, group) { return new Grouping(key, group) }
            }
            else
            {
                hasResultSelector = true;
                resultSelector = Utils.CreateLambda(resultSelector);
            }

            return new Enumerable(function ()
            {
                var enumerator;
                var key;
                var compareKey;
                var group = [];

                return new IEnumerator(
                    function ()
                    {
                        enumerator = source.GetEnumerator();
                        if (enumerator.MoveNext())
                        {
                            key = keySelector(enumerator.Current());
                            compareKey = compareSelector(key);
                            group.push(elementSelector(enumerator.Current()));
                        }
                    },
                    function ()
                    {
                        var hasNext;
                        while ((hasNext = enumerator.MoveNext()) == true)
                        {
                            if (compareKey === compareSelector(keySelector(enumerator.Current())))
                            {
                                group.push(elementSelector(enumerator.Current()));
                            }
                            else break;
                        }

                        if (group.length > 0)
                        {
                            var result = (hasResultSelector)
                                ? resultSelector(key, Enumerable.From(group))
                                : resultSelector(key, group);
                            if (hasNext)
                            {
                                key = keySelector(enumerator.Current());
                                compareKey = compareSelector(key);
                                group = [elementSelector(enumerator.Current())];
                            }
                            else group = [];

                            return this.Yield(result);
                        }

                        return false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        BufferWithCount: function (count)
        {
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;

                return new IEnumerator(
                function () { enumerator = source.GetEnumerator(); },
                function ()
                {
                    var array = [];
                    var index = 0;
                    while (enumerator.MoveNext())
                    {
                        array.push(enumerator.Current());
                        if (++index >= count) return this.Yield(array);
                    }
                    if (array.length > 0) return this.Yield(array);
                    return false;
                },
                function () { Utils.Dispose(enumerator); })
            });
        },

        /* Aggregate Methods */

        // Overload:function(func)
        // Overload:function(seed,func)
        // Overload:function(seed,func,resultSelector)
        Aggregate: function (seed, func, resultSelector)
        {
            return this.Scan(seed, func, resultSelector).Last();
        },

        // Overload:function()
        // Overload:function(selector)
        Average: function (selector)
        {
            selector = Utils.CreateLambda(selector);

            var sum = 0;
            var count = 0;
            this.ForEach(function (x)
            {
                sum += selector(x);
                ++count;
            });

            return sum / count;
        },

        // Overload:function()
        // Overload:function(predicate)
        Count: function (predicate)
        {
            predicate = (predicate == null) ? Functions.True : Utils.CreateLambda(predicate);

            var count = 0;
            this.ForEach(function (x, i)
            {
                if (predicate(x, i)) ++count;
            });
            return count;
        },

        // Overload:function()
        // Overload:function(selector)
        Max: function (selector)
        {
            if (selector == null) selector = Functions.Identity;
            return this.Select(selector).Aggregate(function (a, b) { return (a > b) ? a : b; });
        },

        // Overload:function()
        // Overload:function(selector)
        Min: function (selector)
        {
            if (selector == null) selector = Functions.Identity;
            return this.Select(selector).Aggregate(function (a, b) { return (a < b) ? a : b; });
        },

        MaxBy: function (keySelector)
        {
            keySelector = Utils.CreateLambda(keySelector);
            return this.Aggregate(function (a, b) { return (keySelector(a) > keySelector(b)) ? a : b });
        },

        MinBy: function (keySelector)
        {
            keySelector = Utils.CreateLambda(keySelector);
            return this.Aggregate(function (a, b) { return (keySelector(a) < keySelector(b)) ? a : b });
        },

        // Overload:function()
        // Overload:function(selector)
        Sum: function (selector)
        {
            if (selector == null) selector = Functions.Identity;
            return this.Select(selector).Aggregate(0, function (a, b) { return a + b; });
        },

        /* Paging Methods */

        ElementAt: function (index)
        {
            var value;
            var found = false;
            this.ForEach(function (x, i)
            {
                if (i == index)
                {
                    value = x;
                    found = true;
                    return false;
                }
            });

            if (!found) throw new Error("index is less than 0 or greater than or equal to the number of elements in source.");
            return value;
        },

        ElementAtOrDefault: function (index, defaultValue)
        {
            var value;
            var found = false;
            this.ForEach(function (x, i)
            {
                if (i == index)
                {
                    value = x;
                    found = true;
                    return false;
                }
            });

            return (!found) ? defaultValue : value;
        },

        // Overload:function()
        // Overload:function(predicate)
        First: function (predicate)
        {
            if (predicate != null) return this.Where(predicate).First();

            var value;
            var found = false;
            this.ForEach(function (x)
            {
                value = x;
                found = true;
                return false;
            });

            if (!found) throw new Error("First:No element satisfies the condition.");
            return value;
        },

        // Overload:function(defaultValue)
        // Overload:function(defaultValue,predicate)
        FirstOrDefault: function (defaultValue, predicate)
        {
            if (predicate != null) return this.Where(predicate).FirstOrDefault(defaultValue);

            var value;
            var found = false;
            this.ForEach(function (x)
            {
                value = x;
                found = true;
                return false;
            });
            return (!found) ? defaultValue : value;
        },

        // Overload:function()
        // Overload:function(predicate)
        Last: function (predicate)
        {
            if (predicate != null) return this.Where(predicate).Last();

            var value;
            var found = false;
            this.ForEach(function (x)
            {
                found = true;
                value = x;
            });

            if (!found) throw new Error("Last:No element satisfies the condition.");
            return value;
        },

        // Overload:function(defaultValue)
        // Overload:function(defaultValue,predicate)
        LastOrDefault: function (defaultValue, predicate)
        {
            if (predicate != null) return this.Where(predicate).LastOrDefault(defaultValue);

            var value;
            var found = false;
            this.ForEach(function (x)
            {
                found = true;
                value = x;
            });
            return (!found) ? defaultValue : value;
        },

        // Overload:function()
        // Overload:function(predicate)
        Single: function (predicate)
        {
            if (predicate != null) return this.Where(predicate).Single();

            var value;
            var found = false;
            this.ForEach(function (x)
            {
                if (!found)
                {
                    found = true;
                    value = x;
                }
                else throw new Error("Single:sequence contains more than one element.");
            });

            if (!found) throw new Error("Single:No element satisfies the condition.");
            return value;
        },

        // Overload:function(defaultValue)
        // Overload:function(defaultValue,predicate)
        SingleOrDefault: function (defaultValue, predicate)
        {
            if (predicate != null) return this.Where(predicate).SingleOrDefault(defaultValue);

            var value;
            var found = false;
            this.ForEach(function (x)
            {
                if (!found)
                {
                    found = true;
                    value = x;
                }
                else throw new Error("Single:sequence contains more than one element.");
            });

            return (!found) ? defaultValue : value;
        },

        Skip: function (count)
        {
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var index = 0;

                return new IEnumerator(
                    function ()
                    {
                        enumerator = source.GetEnumerator();
                        while (index++ < count && enumerator.MoveNext()) { };
                    },
                    function ()
                    {
                        return (enumerator.MoveNext())
                            ? this.Yield(enumerator.Current())
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        // Overload:function(predicate<element>)
        // Overload:function(predicate<element,index>)
        SkipWhile: function (predicate)
        {
            predicate = Utils.CreateLambda(predicate);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var index = 0;
                var isSkipEnd = false;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        while (!isSkipEnd)
                        {
                            if (enumerator.MoveNext())
                            {
                                if (!predicate(enumerator.Current(), index++))
                                {
                                    isSkipEnd = true;
                                    return this.Yield(enumerator.Current());
                                }
                                continue;
                            }
                            else return false;
                        }

                        return (enumerator.MoveNext())
                            ? this.Yield(enumerator.Current())
                            : false;

                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        Take: function (count)
        {
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var index = 0;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        return (index++ < count && enumerator.MoveNext())
                            ? this.Yield(enumerator.Current())
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); }
                )
            });
        },

        // Overload:function(predicate<element>)
        // Overload:function(predicate<element,index>)
        TakeWhile: function (predicate)
        {
            predicate = Utils.CreateLambda(predicate);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;
                var index = 0;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        return (enumerator.MoveNext() && predicate(enumerator.Current(), index++))
                            ? this.Yield(enumerator.Current())
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        // Overload:function()
        // Overload:function(count)
        TakeExceptLast: function (count)
        {
            if (count == null) count = 1;
            var source = this;

            return new Enumerable(function ()
            {
                if (count <= 0) return source.GetEnumerator(); // do nothing

                var enumerator;
                var q = [];

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        while (enumerator.MoveNext())
                        {
                            if (q.length == count)
                            {
                                q.push(enumerator.Current());
                                return this.Yield(q.shift());
                            }
                            q.push(enumerator.Current());
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        TakeFromLast: function (count)
        {
            if (count <= 0 || count == null) return Enumerable.Empty();
            var source = this;

            return new Enumerable(function ()
            {
                var sourceEnumerator;
                var enumerator;
                var q = [];

                return new IEnumerator(
                    function () { sourceEnumerator = source.GetEnumerator(); },
                    function ()
                    {
                        while (sourceEnumerator.MoveNext())
                        {
                            if (q.length == count) q.shift()
                            q.push(sourceEnumerator.Current());
                        }
                        if (enumerator == null)
                        {
                            enumerator = Enumerable.From(q).GetEnumerator();
                        }
                        return (enumerator.MoveNext())
                            ? this.Yield(enumerator.Current())
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        IndexOf: function (item)
        {
            var found = null;
            this.ForEach(function (x, i)
            {
                if (x === item)
                {
                    found = i;
                    return true;
                }
            });

            return (found !== null) ? found : -1;
        },

        LastIndexOf: function (item)
        {
            var result = -1;
            this.ForEach(function (x, i)
            {
                if (x === item) result = i;
            });

            return result;
        },

        /* Convert Methods */

        ToArray: function ()
        {
            var array = [];
            this.ForEach(function (x) { array.push(x) });
            return array;
        },

        // Overload:function(keySelector)
        // Overload:function(keySelector, elementSelector)
        // Overload:function(keySelector, elementSelector, compareSelector)
        ToLookup: function (keySelector, elementSelector, compareSelector)
        {
            keySelector = Utils.CreateLambda(keySelector);
            elementSelector = Utils.CreateLambda(elementSelector);
            compareSelector = Utils.CreateLambda(compareSelector);

            var dict = new Dictionary(compareSelector);
            this.ForEach(function (x)
            {
                var key = keySelector(x);
                var element = elementSelector(x);

                var array = dict.Get(key);
                if (array !== undefined) array.push(element);
                else dict.Add(key, [element]);
            });
            return new Lookup(dict);
        },

        ToObject: function (keySelector, elementSelector)
        {
            keySelector = Utils.CreateLambda(keySelector);
            elementSelector = Utils.CreateLambda(elementSelector);

            var obj = {};
            this.ForEach(function (x)
            {
                obj[keySelector(x)] = elementSelector(x);
            });
            return obj;
        },

        // Overload:function(keySelector, elementSelector)
        // Overload:function(keySelector, elementSelector, compareSelector)
        ToDictionary: function (keySelector, elementSelector, compareSelector)
        {
            keySelector = Utils.CreateLambda(keySelector);
            elementSelector = Utils.CreateLambda(elementSelector);
            compareSelector = Utils.CreateLambda(compareSelector);

            var dict = new Dictionary(compareSelector);
            this.ForEach(function (x)
            {
                dict.Add(keySelector(x), elementSelector(x));
            });
            return dict;
        },

        // Overload:function()
        // Overload:function(replacer)
        // Overload:function(replacer, space)
        ToJSON: function (replacer, space)
        {
            return JSON.stringify(this.ToArray(), replacer, space);
        },

        // Overload:function()
        // Overload:function(separator)
        // Overload:function(separator,selector)
        ToString: function (separator, selector)
        {
            if (separator == null) separator = "";
            if (selector == null) selector = Functions.Identity;

            return this.Select(selector).ToArray().join(separator);
        },


        /* Action Methods */

        // Overload:function(action<element>)
        // Overload:function(action<element,index>)
        Do: function (action)
        {
            var source = this;
            action = Utils.CreateLambda(action);

            return new Enumerable(function ()
            {
                var enumerator;
                var index = 0;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        if (enumerator.MoveNext())
                        {
                            action(enumerator.Current(), index++);
                            return this.Yield(enumerator.Current());
                        }
                        return false;
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        // Overload:function(action<element>)
        // Overload:function(action<element,index>)
        // Overload:function(func<element,bool>)
        // Overload:function(func<element,index,bool>)
        ForEach: function (action)
        {
            action = Utils.CreateLambda(action);

            var index = 0;
            var enumerator = this.GetEnumerator();
            try
            {
                while (enumerator.MoveNext())
                {
                    if (action(enumerator.Current(), index++) === false) break;
                }
            }
            finally { Utils.Dispose(enumerator); }
        },

        // Overload:function()
        // Overload:function(separator)
        // Overload:function(separator,selector)
        Write: function (separator, selector)
        {
            if (separator == null) separator = "";
            selector = Utils.CreateLambda(selector);

            var isFirst = true;
            this.ForEach(function (item)
            {
                if (isFirst) isFirst = false;
                else document.write(separator);
                document.write(selector(item));
            });
        },

        // Overload:function()
        // Overload:function(selector)
        WriteLine: function (selector)
        {
            selector = Utils.CreateLambda(selector);

            this.ForEach(function (item)
            {
                document.write(selector(item));
                document.write("<br />");
            });
        },

        Force: function ()
        {
            var enumerator = this.GetEnumerator();

            try { while (enumerator.MoveNext()) { } }
            finally { Utils.Dispose(enumerator); }
        },

        /* Functional Methods */

        Let: function (func)
        {
            func = Utils.CreateLambda(func);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;

                return new IEnumerator(
                    function ()
                    {
                        enumerator = Enumerable.From(func(source)).GetEnumerator();
                    },
                    function ()
                    {
                        return (enumerator.MoveNext())
                            ? this.Yield(enumerator.Current())
                            : false;
                    },
                    function () { Utils.Dispose(enumerator); })
            });
        },

        Share: function ()
        {
            var source = this;
            var sharedEnumerator;

            return new Enumerable(function ()
            {
                return new IEnumerator(
                    function ()
                    {
                        if (sharedEnumerator == null)
                        {
                            sharedEnumerator = source.GetEnumerator();
                        }
                    },
                    function ()
                    {
                        return (sharedEnumerator.MoveNext())
                            ? this.Yield(sharedEnumerator.Current())
                            : false;
                    },
                    Functions.Blank
                )
            });
        },

        MemoizeAll: function ()
        {
            var source = this;
            var cache;
            var enumerator;

            return new Enumerable(function ()
            {
                var index = -1;

                return new IEnumerator(
                    function ()
                    {
                        if (enumerator == null)
                        {
                            enumerator = source.GetEnumerator();
                            cache = [];
                        }
                    },
                    function ()
                    {
                        index++;
                        if (cache.length <= index)
                        {
                            return (enumerator.MoveNext())
                                ? this.Yield(cache[index] = enumerator.Current())
                                : false;
                        }

                        return this.Yield(cache[index]);
                    },
                    Functions.Blank
                )
            });
        },

        /* Error Handling Methods */

        Catch: function (handler)
        {
            handler = Utils.CreateLambda(handler);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        try
                        {
                            return (enumerator.MoveNext())
                               ? this.Yield(enumerator.Current())
                               : false;
                        }
                        catch (e)
                        {
                            handler(e);
                            return false;
                        }
                    },
                    function () { Utils.Dispose(enumerator); });
            });
        },

        Finally: function (finallyAction)
        {
            finallyAction = Utils.CreateLambda(finallyAction);
            var source = this;

            return new Enumerable(function ()
            {
                var enumerator;

                return new IEnumerator(
                    function () { enumerator = source.GetEnumerator(); },
                    function ()
                    {
                        return (enumerator.MoveNext())
                           ? this.Yield(enumerator.Current())
                           : false;
                    },
                    function ()
                    {
                        try { Utils.Dispose(enumerator); }
                        finally { finallyAction(); }
                    });
            });
        },

        /* For Debug Methods */

        // Overload:function()
        // Overload:function(message)
        // Overload:function(message,selector)
        Trace: function (message, selector)
        {
            if (message == null) message = "Trace";
            selector = Utils.CreateLambda(selector);

            return this.Do(function (item)
            {
                console.log(message, ":", selector(item));
            });
        }
    }

    // private

    // static functions
    var Functions =
    {
        Identity: function (x) { return x; },
        True: function () { return true; },
        Blank: function () { }
    }

    // static const
    var Types =
    {
        Boolean: typeof true,
        Number: typeof 0,
        String: typeof "",
        Object: typeof {},
        Undefined: typeof undefined,
        Function: typeof function () { }
    }

    // static utility methods
    var Utils =
    {
        // Create anonymous function from lambda expression string
        CreateLambda: function (expression)
        {
            if (expression == null) return Functions.Identity;
            if (typeof expression == Types.String)
            {
                if (expression == "")
                {
                    return Functions.Identity;
                }
                else if (expression.indexOf("=>") == -1)
                {
                    return new Function("$,$$,$$$,$$$$", "return " + expression);
                }
                else
                {
                    var expr = expression.match(/^[(\s]*([^()]*?)[)\s]*=>(.*)/);
                    return new Function(expr[1], "return " + expr[2]);
                }
            }
            return expression;
        },

        IsIEnumerable: function (obj)
        {
            if (typeof Enumerator != Types.Undefined)
            {
                try
                {
                    new Enumerator(obj);
                    return true;
                }
                catch (e) { }
            }
            return false;
        },

        Compare: function (a, b)
        {
            return (a === b) ? 0
                : (a > b) ? 1
                : -1;
        },

        Dispose: function (obj)
        {
            if (obj != null) obj.Dispose();
        }
    }

    // IEnumerator State
    var State = { Before: 0, Running: 1, After: 2 }

    // name "Enumerator" is conflict JScript's "Enumerator"
    var IEnumerator = function (initialize, tryGetNext, dispose)
    {
        var yielder = new Yielder();
        var state = State.Before;

        this.Current = yielder.Current;
        this.MoveNext = function ()
        {
            try
            {
                switch (state)
                {
                    case State.Before:
                        state = State.Running;
                        initialize(); // fall through
                    case State.Running:
                        if (tryGetNext.apply(yielder))
                        {
                            return true;
                        }
                        else
                        {
                            this.Dispose();
                            return false;
                        }
                    case State.After:
                        return false;
                }
            }
            catch (e)
            {
                this.Dispose();
                throw e;
            }
        }
        this.Dispose = function ()
        {
            if (state != State.Running) return;

            try { dispose(); }
            finally { state = State.After; }
        }
    }

    // for tryGetNext
    var Yielder = function ()
    {
        var current = null;
        this.Current = function () { return current; }
        this.Yield = function (value)
        {
            current = value;
            return true;
        }
    }

    // for OrderBy/ThenBy

    var OrderedEnumerable = function (source, keySelector, descending, parent)
    {
        this.source = source;
        this.keySelector = Utils.CreateLambda(keySelector);
        this.descending = descending;
        this.parent = parent;
    }
    OrderedEnumerable.prototype = new Enumerable();

    OrderedEnumerable.prototype.CreateOrderedEnumerable = function (keySelector, descending)
    {
        return new OrderedEnumerable(this.source, keySelector, descending, this);
    }

    OrderedEnumerable.prototype.ThenBy = function (keySelector)
    {
        return this.CreateOrderedEnumerable(keySelector, false);
    }

    OrderedEnumerable.prototype.ThenByDescending = function (keySelector)
    {
        return this.CreateOrderedEnumerable(keySelector, true);
    }

    OrderedEnumerable.prototype.GetEnumerator = function ()
    {
        var self = this;
        var buffer;
        var indexes;
        var index = 0;

        return new IEnumerator(
            function ()
            {
                buffer = [];
                indexes = [];
                self.source.ForEach(function (item, index)
                {
                    buffer.push(item);
                    indexes.push(index);
                });
                var sortContext = SortContext.Create(self, null);
                sortContext.GenerateKeys(buffer);

                indexes.sort(function (a, b) { return sortContext.Compare(a, b); });
            },
            function ()
            {
                return (index < indexes.length)
                    ? this.Yield(buffer[indexes[index++]])
                    : false;
            },
            Functions.Blank
        )
    }

    var SortContext = function (keySelector, descending, child)
    {
        this.keySelector = keySelector;
        this.descending = descending;
        this.child = child;
        this.keys = null;
    }

    SortContext.Create = function (orderedEnumerable, currentContext)
    {
        var context = new SortContext(orderedEnumerable.keySelector, orderedEnumerable.descending, currentContext);
        if (orderedEnumerable.parent != null) return SortContext.Create(orderedEnumerable.parent, context);
        return context;
    }

    SortContext.prototype.GenerateKeys = function (source)
    {
        var len = source.length;
        var keySelector = this.keySelector;
        var keys = new Array(len);
        for (var i = 0; i < len; i++) keys[i] = keySelector(source[i]);
        this.keys = keys;

        if (this.child != null) this.child.GenerateKeys(source);
    }

    SortContext.prototype.Compare = function (index1, index2)
    {
        var comparison = Utils.Compare(this.keys[index1], this.keys[index2]);

        if (comparison == 0)
        {
            if (this.child != null) return this.child.Compare(index1, index2)
            comparison = Utils.Compare(index1, index2);
        }

        return (this.descending) ? -comparison : comparison;
    }

    // optimize array or arraylike object

    var ArrayEnumerable = function (source)
    {
        this.source = source;
    }
    ArrayEnumerable.prototype = new Enumerable();

    ArrayEnumerable.prototype.Any = function (predicate)
    {
        return (predicate == null)
            ? (this.source.length > 0)
            : Enumerable.prototype.Any.apply(this, arguments);
    }

    ArrayEnumerable.prototype.Count = function (predicate)
    {
        return (predicate == null)
            ? this.source.length
            : Enumerable.prototype.Count.apply(this, arguments);
    }

    ArrayEnumerable.prototype.ElementAt = function (index)
    {
        return (0 <= index && index < this.source.length)
            ? this.source[index]
            : Enumerable.prototype.ElementAt.apply(this, arguments);
    }

    ArrayEnumerable.prototype.ElementAtOrDefault = function (index, defaultValue)
    {
        return (0 <= index && index < this.source.length)
            ? this.source[index]
            : defaultValue;
    }

    ArrayEnumerable.prototype.First = function (predicate)
    {
        return (predicate == null && this.source.length > 0)
            ? this.source[0]
            : Enumerable.prototype.First.apply(this, arguments);
    }

    ArrayEnumerable.prototype.FirstOrDefault = function (defaultValue, predicate)
    {
        if (predicate != null)
        {
            return Enumerable.prototype.FirstOrDefault.apply(this, arguments);
        }

        return this.source.length > 0 ? this.source[0] : defaultValue;
    }

    ArrayEnumerable.prototype.Last = function (predicate)
    {
        return (predicate == null && this.source.length > 0)
            ? this.source[this.source.length - 1]
            : Enumerable.prototype.Last.apply(this, arguments);
    }

    ArrayEnumerable.prototype.LastOrDefault = function (defaultValue, predicate)
    {
        if (predicate != null)
        {
            return Enumerable.prototype.LastOrDefault.apply(this, arguments);
        }

        return this.source.length > 0 ? this.source[this.source.length - 1] : defaultValue;
    }

    ArrayEnumerable.prototype.Skip = function (count)
    {
        var source = this.source;

        return new Enumerable(function ()
        {
            var index;

            return new IEnumerator(
                function () { index = (count < 0) ? 0 : count },
                function ()
                {
                    return (index < source.length)
                        ? this.Yield(source[index++])
                        : false;
                },
                Functions.Blank);
        });
    };

    ArrayEnumerable.prototype.TakeExceptLast = function (count)
    {
        if (count == null) count = 1;
        return this.Take(this.source.length - count);
    }

    ArrayEnumerable.prototype.TakeFromLast = function (count)
    {
        return this.Skip(this.source.length - count);
    }

    ArrayEnumerable.prototype.Reverse = function ()
    {
        var source = this.source;

        return new Enumerable(function ()
        {
            var index;

            return new IEnumerator(
                function ()
                {
                    index = source.length;
                },
                function ()
                {
                    return (index > 0)
                        ? this.Yield(source[--index])
                        : false;
                },
                Functions.Blank)
        });
    }

    ArrayEnumerable.prototype.SequenceEqual = function (second, compareSelector)
    {
        if ((second instanceof ArrayEnumerable || second instanceof Array)
            && compareSelector == null
            && Enumerable.From(second).Count() != this.Count())
        {
            return false;
        }

        return Enumerable.prototype.SequenceEqual.apply(this, arguments);
    }

    ArrayEnumerable.prototype.ToString = function (separator, selector)
    {
        if (selector != null || !(this.source instanceof Array))
        {
            return Enumerable.prototype.ToString.apply(this, arguments);
        }

        if (separator == null) separator = "";
        return this.source.join(separator);
    }

    ArrayEnumerable.prototype.GetEnumerator = function ()
    {
        var source = this.source;
        var index = 0;

        return new IEnumerator(
            Functions.Blank,
            function ()
            {
                return (index < source.length)
                    ? this.Yield(source[index++])
                    : false;
            },
            Functions.Blank);
    }

    // Collections

    var Dictionary = (function ()
    {
        // static utility methods
        var HasOwnProperty = function (target, key)
        {
            return Object.prototype.hasOwnProperty.call(target, key);
        }

        var ComputeHashCode = function (obj)
        {
            if (obj === null) return "null";
            if (obj === undefined) return "undefined";

            return (typeof obj.toString === Types.Function)
                ? obj.toString()
                : Object.prototype.toString.call(obj);
        }

        // LinkedList for Dictionary
        var HashEntry = function (key, value)
        {
            this.Key = key;
            this.Value = value;
            this.Prev = null;
            this.Next = null;
        }

        var EntryList = function ()
        {
            this.First = null;
            this.Last = null;
        }
        EntryList.prototype =
        {
            AddLast: function (entry)
            {
                if (this.Last != null)
                {
                    this.Last.Next = entry;
                    entry.Prev = this.Last;
                    this.Last = entry;
                }
                else this.First = this.Last = entry;
            },

            Replace: function (entry, newEntry)
            {
                if (entry.Prev != null)
                {
                    entry.Prev.Next = newEntry;
                    newEntry.Prev = entry.Prev;
                }
                else this.First = newEntry;

                if (entry.Next != null)
                {
                    entry.Next.Prev = newEntry;
                    newEntry.Next = entry.Next;
                }
                else this.Last = newEntry;

            },

            Remove: function (entry)
            {
                if (entry.Prev != null) entry.Prev.Next = entry.Next;
                else this.First = entry.Next;

                if (entry.Next != null) entry.Next.Prev = entry.Prev;
                else this.Last = entry.Prev;
            }
        }

        // Overload:function()
        // Overload:function(compareSelector)
        var Dictionary = function (compareSelector)
        {
            this.count = 0;
            this.entryList = new EntryList();
            this.buckets = {}; // as Dictionary<string,List<object>>
            this.compareSelector = (compareSelector == null) ? Functions.Identity : compareSelector;
        }

        Dictionary.prototype =
        {
            Add: function (key, value)
            {
                var compareKey = this.compareSelector(key);
                var hash = ComputeHashCode(compareKey);
                var entry = new HashEntry(key, value);
                if (HasOwnProperty(this.buckets, hash))
                {
                    var array = this.buckets[hash];
                    for (var i = 0; i < array.length; i++)
                    {
                        if (this.compareSelector(array[i].Key) === compareKey)
                        {
                            this.entryList.Replace(array[i], entry);
                            array[i] = entry;
                            return;
                        }
                    }
                    array.push(entry);
                }
                else
                {
                    this.buckets[hash] = [entry];
                }
                this.count++;
                this.entryList.AddLast(entry);
            },

            Get: function (key)
            {
                var compareKey = this.compareSelector(key);
                var hash = ComputeHashCode(compareKey);
                if (!HasOwnProperty(this.buckets, hash)) return undefined;

                var array = this.buckets[hash];
                for (var i = 0; i < array.length; i++)
                {
                    var entry = array[i];
                    if (this.compareSelector(entry.Key) === compareKey) return entry.Value;
                }
                return undefined;
            },

            Set: function (key, value)
            {
                var compareKey = this.compareSelector(key);
                var hash = ComputeHashCode(compareKey);
                if (HasOwnProperty(this.buckets, hash))
                {
                    var array = this.buckets[hash];
                    for (var i = 0; i < array.length; i++)
                    {
                        if (this.compareSelector(array[i].Key) === compareKey)
                        {
                            var newEntry = new HashEntry(key, value);
                            this.entryList.Replace(array[i], newEntry);
                            array[i] = newEntry;
                            return true;
                        }
                    }
                }
                return false;
            },

            Contains: function (key)
            {
                var compareKey = this.compareSelector(key);
                var hash = ComputeHashCode(compareKey);
                if (!HasOwnProperty(this.buckets, hash)) return false;

                var array = this.buckets[hash];
                for (var i = 0; i < array.length; i++)
                {
                    if (this.compareSelector(array[i].Key) === compareKey) return true;
                }
                return false;
            },

            Clear: function ()
            {
                this.count = 0;
                this.buckets = {};
                this.entryList = new EntryList();
            },

            Remove: function (key)
            {
                var compareKey = this.compareSelector(key);
                var hash = ComputeHashCode(compareKey);
                if (!HasOwnProperty(this.buckets, hash)) return;

                var array = this.buckets[hash];
                for (var i = 0; i < array.length; i++)
                {
                    if (this.compareSelector(array[i].Key) === compareKey)
                    {
                        this.entryList.Remove(array[i]);
                        array.splice(i, 1);
                        if (array.length == 0) delete this.buckets[hash];
                        this.count--;
                        return;
                    }
                }
            },

            Count: function ()
            {
                return this.count;
            },

            ToEnumerable: function ()
            {
                var self = this;
                return new Enumerable(function ()
                {
                    var currentEntry;

                    return new IEnumerator(
                        function () { currentEntry = self.entryList.First },
                        function ()
                        {
                            if (currentEntry != null)
                            {
                                var result = { Key: currentEntry.Key, Value: currentEntry.Value };
                                currentEntry = currentEntry.Next;
                                return this.Yield(result);
                            }
                            return false;
                        },
                        Functions.Blank);
                });
            }
        }

        return Dictionary;
    })();

    // dictionary = Dictionary<TKey, TValue[]>
    var Lookup = function (dictionary)
    {
        this.Count = function ()
        {
            return dictionary.Count();
        }

        this.Get = function (key)
        {
            return Enumerable.From(dictionary.Get(key));
        }

        this.Contains = function (key)
        {
            return dictionary.Contains(key);
        }

        this.ToEnumerable = function ()
        {
            return dictionary.ToEnumerable().Select(function (kvp)
            {
                return new Grouping(kvp.Key, kvp.Value);
            });
        }
    }

    var Grouping = function (key, elements)
    {
        this.Key = function ()
        {
            return key;
        }

        ArrayEnumerable.call(this, elements);
    }
    Grouping.prototype = new ArrayEnumerable();

    // out to global
    return Enumerable;
})();
define("linq", function(){});

(function( factory ) {
    

    if ( typeof define === 'function' && define.amd ) {
        // Define as an AMD module if possible
        define('multiSelectEx', ['jquery', 'knockout'], factory);
    }
    else if ( typeof exports === 'object' ) {
        // Node/CommonJS
        factory(require('jquery'), require('knockout'));
    }
    else if ( jQuery ) {
        // Define using browser globals otherwise
        // Prevent multiple instantiations if the script is loaded twice
        factory(jQuery, window.knockout || window.ko);
    }
})

(function ($, ko) {

    


    var entityMap = {
        '&': '&amp;',
        '<': '&lt;',
        '>': '&gt;',
        '"': '&quot;',
        "'": '&#39;',
        '/': '&#x2F;',
        '`': '&#x60;',
        '=': '&#x3D;'
    };

    function escapeHtml(string) {
        return String(string).replace(/[&<>"'`=\/]/g, function fromEntityMap(s) {
            return entityMap[s];
        });
    }

    function MultipleSelect($el, options) {
        var that = this,
            name = $el.attr('name') || options.name || '',
            elWidth = $el.outerWidth();

        this.$el = $el.hide();
        this.options = options;

        this.$parent = $('<div class="ms-parent"></div>');
        var choiceHtml = '<button type="button" class="select"><div class="fl">';

        
        if (!this.options.inputClasses) {
            this.options.inputClasses = '';
        }

        var inputId = 'txtMs_' + $el.attr('dataid');

        if (this.options.filter) {
            choiceHtml += '<div>'
                + '<input id="'+inputId+'" class="filter-text ' + this.options.inputClasses + ' "  type="text" dataid="' + $el.attr('dataid') + '" selectid="' + $el.attr('id') + '"  placeholder="' + this.options.vendorPlaceholder + '" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">'
                + '</div>';
        }else
        {
            choiceHtml += '<span id="' + inputId + '"class="placeholder sph tl"> ' + options.placeholder + '</span>';
        }
        choiceHtml += '<div><div></div></button>';
        this.$choice = $(choiceHtml);

        this.$drop = $('<div class="ms-drop ' + options.position + '"></div>');
        this.$el.after(this.$parent);
        this.$parent.append(this.$choice);
        this.$parent.append(this.$drop);

        this.$input = $('#' + inputId);

        if (this.$el.prop('disabled')) {
            this.$choice.addClass('disabled');
        }
        this.$parent.css('width', options.width || elWidth);

        if (!this.options.keepOpen) {
            $('body').click(function (e) {
                if ($(e.target)[0] === that.$choice[0] ||
                    $(e.target).parents('.select')[0] === that.$choice[0]) {
                    return;
                }
                if (($(e.target)[0] === that.$drop[0] ||
                    $(e.target).parents('.ms-drop')[0] !== that.$drop[0]) &&
                    that.options.isOpen) {
                    that.close();
                }
            });
        }

        this.selectAllName = 'name="selectAll' + name + '"';
        this.selectGroupName = 'name="selectGroup' + name + '"';
        this.selectItemName = 'name="selectItem' + name + '"';

        this.$searchInput = this.$parent.find('.filter-text');

        if (this.options.editable && this.options.displayText) {
            this.setText(this.options.displayText());
        }

    }


    MultipleSelect.prototype = {
        constructor: MultipleSelect,

        init: function () {
            var that = this,
                html = [];
            //if (this.options.filter) {
            //    html.push(
            //        '<div>',
            //            '<input class="form-control input-lg filter-text" type="text" placeholder="' + this.options.vendorPlaceholder + '" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false">',
            //        '</div>'
            //    );
            //}
            html.push('<ul>');
            if (this.options.selectAll && !this.options.single) {
                html.push(
                    '<li>',
                        '',
                            '<input id="allCheck' + this.options.name + '" type="checkbox" ' + this.selectAllName + ' /> ',
                            '',
                        '<label for="allCheck' + this.options.name + '">' + escapeHtml(this.options.selectAllText) + '</label>',
                    '</li>'
                );
            }
            $.each(this.$el.children(), function (i, elm) {
                html.push(that.optionToHtml(i, elm));
            });
            html.push('<li class="ms-no-results">' + escapeHtml(this.options.noMatchesFound) + '</li>');
            html.push('</ul>');
            this.$drop.html(html.join(''));

            this.$drop.find('ul').css('max-height', this.options.maxHeight + 'px');
            this.$drop.find('.multiple').css('width', this.options.multipleWidth + 'px');

            this.$searchInput = this.$parent.find('.filter-text');
//            this.$searchInput = this.$drop.find('.filter-text');

            this.$selectAll = this.$drop.find('input[' + this.selectAllName + ']');
            this.$selectGroups = this.$drop.find('input[' + this.selectGroupName + ']');
            this.$selectItems = this.$drop.find('input[' + this.selectItemName + ']:enabled');
            this.$disableItems = this.$drop.find('input[' + this.selectItemName + ']:disabled');
            this.$noResults = this.$drop.find('.ms-no-results');
            this.events();
            this.update(true);

            if (this.options.isOpen) {
                this.open();
            }
        },

        optionToHtml: function (i, elm, group, groupDisabled) {
            var that = this,
                $elm = $(elm),
                html = [],
                multiple = this.options.multiple,
                disabled,
                elemId,
                type = this.options.single ? 'radio' : 'checkbox';

            if ($elm.is('option')) {
                var value = $elm.val(),
                    text = escapeHtml($elm.text()),
                    elemId = text.replace(/ /g, '_') + $elm.parent().attr('id'),
                    selected = (that.$el.attr('multiple') != undefined) ? $elm.prop('selected') : ($elm.attr('selected') == 'selected'),
                    style = this.options.styler(value) ? ' style="' + this.options.styler(value) + '"' : '';

                disabled = groupDisabled || $elm.prop('disabled');
                if ((this.options.blockSeparator > "") && (this.options.blockSeparator == $elm.val())) {
                    html.push(
                            '<li' + (multiple ? ' class="multiple"' : '') + style + '>',
                                '<label class="' + this.options.blockSeparator + (disabled ? 'disabled' : '') + '">',
                                    text,
                                '</label>',
                            '</li>'
                    );
                } else {
                    html.push(
                            '<li' + (multiple ? ' class="multiple"' : '') + style + '>',
                                '<input type="' + type + '" ' + this.selectItemName + ' value="' + value + '"' +
                                        (selected ? ' checked="checked"' : '') +
                                        (disabled ? ' disabled="disabled"' : '') +
                                        (group ? ' data-group="' + group + '"' : '') +
                                        ' id="' + elemId +
                                        '" /> ',
                                '<label' + (disabled ? ' class="disabled"' : '') + ' for="' + elemId + '">',                                    
                                    text,
                                '</label>',
                            '</li>'
                    );
                }
            } else if (!group && $elm.is('optgroup')) {
                var _group = 'group_' + i,
                    label = $elm.attr('label');

                disabled = $elm.prop('disabled');
                html.push(
                    '<li class="group">',
                        '<label class="optgroup' + (disabled ? ' disabled' : '') + '" data-group="' + _group + '">',
                            '<input type="checkbox" ' + this.selectGroupName +
                                (disabled ? ' disabled="disabled"' : '') + ' /> ',
                            label,
                        '</label>',
                    '</li>');
                $.each($elm.children(), function (i, elm) {
                    html.push(that.optionToHtml(i, elm, _group, disabled));
                });
            }
            return html.join('');
        },
        setText: function (text) {
            var that = this;
            if (!text) {
                text = '';
            }
            text = text.trim();
            if (that.options.filter) {
                that.$searchInput.val(text);
//                that.$input.val(text);
            } else {
                that.$input.text(text);
            }

            if (that.options.displayText) {
                that.options.displayText(text);
            }
            
            if (that.options.onTextChanged) {
                that.options.onTextChanged(text);
            }
        },
        events: function () {
            var that = this;
            this.$choice.off('click').on('click', function (e) {
                e.preventDefault();
                that[that.options.isOpen ? 'close' : 'open']();
            })
                .off('focus').on('focus', this.options.onFocus)
                .off('blur').on('blur', this.options.onBlur);

            this.$parent.off('keydown').on('keydown', function (e) {
                switch (e.which) {
                    case 27: // esc key
                        that.close();
                        that.$choice.focus();
                        break;
                }
            });
            this.$searchInput.off('keydown').on('keydown', function (e) {
                if (e.keyCode === 9 && e.shiftKey) { // Ensure shift-tab causes lost focus from filter as with clicking away
                    that.close();
                }
            }).off('keyup').on('keyup', function (e) {
                // enter or space
                // Avoid selecting/deselecting if no choices made
                if (that.options.filterAcceptOnEnter && (e.which === 13 || e.which == 32) && that.$searchInput.val()) {
                    that.$selectAll.click();
                    that.close();
                    that.focus();
                    return;
                }
                that.filter();
            }).off('input').on('input', function (e) {
                var text = $(this).val();

                if (that.options.displayText) {
                    that.options.displayText(text);
                }

                if (that.options.onTextChanged) {
                    that.options.onTextChanged(text);
                }

                if (that.options.editable) {
                    var text = $.trim(that.$searchInput.val()).toLowerCase();
                    if (that.options.selectedItemsArr().length > 0) {
                        var item = that.options.selectedItemsArr()[0];
                        if (that.options.itemText) {
                            if (ko.unwrap(item[that.options.itemText]).toLowerCase() !== text) {
                                that.options.selectedItemsArr([]);
                            }
                        }
                        else {
                            that.options.selectedItemsArr([]);
                        }
                    }
                }
            });
            
            this.$selectAll.off('click').on('click', function () {
                var checked = $(this).prop('checked'),
                    $items = that.getVisibleSelects();
    
                if (that.options.beginUpdate) {
                    that.options.beginUpdate();
                }
                that.checkItems($items, checked);
                if (that.options.endUpdate) {
                    that.options.endUpdate();
                }

                if ($items.length === that.$selectItems.length) {
//                    that[checked ? 'checkAll' : 'uncheckAll']();
                } else { // when the filter option is true
                    //that.$selectGroups.prop('checked', checked);
                    //$items.prop('checked', checked);
                    //that.options[checked ? 'onCheckAll' : 'onUncheckAll']();
                    //that.update();
                }
            });
            this.$selectGroups.off('click').on('click', function () {
                var group = $(this).parent().attr('data-group'),
                    $items = that.getVisibleSelects(), //  that.$selectItems.filter(':visible'),
                    $children = $items.filter('[data-group="' + group + '"]'),
                    checked = $children.length !== $children.filter(':checked').length;
                $children.prop('checked', checked);
                that.updateSelectAll();
                that.update();
                that.options.onOptgroupClick({
                    label: $(this).parent().text(),
                    checked: checked,
                    children: $children.get()
                });
            });
            this.$selectItems.off('click').on('click', function () {
                that.updateSelectAll();
                that.update();
                that.updateOptGroupSelect();
                that.options.onClick({
                    label: $(this).parent().text(),
                    value: $(this).val(),
                    checked: $(this).prop('checked')
                });

                //if (that.options.single && that.options.isOpen && !that.options.keepOpen) {
                //    that.close();
                //}

                if ($(this).prop('checked')) {
                    that.onItemChecked($(this).val());
                }
                else
                {
                    that.onItemUnChecked($(this).val());
                }

                if (that.options.editable) {
                    that.setText($(this).parent().text());
                }

                if (that.options.autohide) {
                    that.close();
                }
            });
        },

        open: function () {
            if (this.$choice.hasClass('disabled') || this.options.disabled) {
                return;
            }
            this.options.isOpen = true;
            this.$choice.find('>div').addClass('open');
            this.$drop.show();

            // fix filter bug: no results show
            this.$selectAll.parent().show();
            this.$noResults.hide();

            // Fix #77: 'All selected' when no options
            if (this.$el.children().length === 0) {
                this.$selectAll.parent().hide();
                this.$noResults.show();
            }

            if (this.options.container) {
                var offset = this.$drop.offset();
                this.$drop.appendTo($(this.options.container));
                this.$drop.offset({ top: offset.top, left: offset.left });
            }

            if (this.options.filter) {
                if (!this.options.editable) {
                    this.setText('');
                    //this.$searchInput.val('');
                    this.filter();
                } else {
                    this.resetFilter();
                }
                /*this.$searchInput.focus();*/
            }

            var itemsToSelect = new Array();
            this.options.selectedItemsArr().forEach(function (arrItem) {
                itemsToSelect.push(ko.unwrap(arrItem[this.itemId]));
            }, this.options);
            this.setSelects(itemsToSelect);
            this.options.onOpen();

        },

        close: function () {
            this.options.isOpen = false;
            this.$choice.find('>div').removeClass('open');
            this.$drop.hide();
            if (this.options.container) {
                this.$parent.append(this.$drop);
                this.$drop.css({
                    'top': 'auto',
                    'left': 'auto'
                });
            }
            this.options.onClose();
        },

        update: function (isInit) {
            var selects = this.getSelects(),
                $span = this.$choice.find('>span');

            if (selects.length === 0) {
                $span.addClass('placeholder').html(this.options.placeholder);
            } else if (this.options.countSelected && selects.length < this.options.minumimCountSelected) {
               /* $span.removeClass('placeholder').html(this.getSelects('text').join(', '));*/
            } else if (this.options.allSelected && selects.length === this.$selectItems.length + this.$disableItems.length) {
                /*$span.removeClass('placeholder').html(this.options.allSelected);*/
            } else if (this.options.countSelected && selects.length > this.options.minumimCountSelected) {
               /* $span.removeClass('placeholder').html(this.options.countSelected
                    .replace('#', selects.length)
                    .replace('%', this.$selectItems.length + this.$disableItems.length));*/
            } else {
               /* $span.removeClass('placeholder').html(this.getSelects('text').join(', '));*/
            }
            // set selects to select
            this.$el.val(this.getSelects());

            // trigger <select> change event
            if (!isInit) {
                this.$el.trigger('change');
            }
       
            if (isInit) {
               
            }            
        },

        updateSelectAll: function () {
            var $items = this.$selectItems.filter(':visible');
            this.$selectAll.prop('checked', $items.length &&
                $items.length === $items.filter(':checked').length);
            if (this.$selectAll.prop('checked')) {
                this.options.onCheckAll();
            }
        },

        onItemChecked: function (itemKey) {
            var that = this;

            var exists = that.options.selectedItemsArr().filter(function (curItem) {
                return ko.unwrap(curItem[that.options.itemId]) === itemKey;
            });

            if (exists.length > 0) {
                return;
            }

            var selectedItem;

            if (that.options.data && ko.unwrap(that.options.data)) {
                var selectedItems = ko.unwrap(that.options.data).filter(function (curItem) {
                    return curItem[that.options.itemId] === itemKey;
                });

                selectedItem = selectedItems[0];
            }

            var newArrItem = that.options.createNewArrItem ? that.options.createNewArrItem(itemKey) : null;
            if (newArrItem == null) {
                newArrItem = {};
                newArrItem[that.options.itemId] = ko.observable();
                if (that.options.itemText) {
                    newArrItem[that.options.itemText] = ko.observable();
                }

            }
            if (ko.isObservable(newArrItem[that.options.itemId])) {
                newArrItem[that.options.itemId](itemKey);
            } else {
                newArrItem[that.options.itemId] = itemKey;
            }

            if (that.options.itemText && selectedItem) {

                if (ko.isObservable(newArrItem[that.options.itemText])) {
                    newArrItem[that.options.itemText](selectedItem[that.options.itemText]);
                } else {
                    newArrItem[that.options.itemText] = selectedItem[that.options.itemText];
                }
            }

            if (that.options.single) {
                that.options.selectedItemsArr.removeAll();
            }

            that.options.selectedItemsArr.push(newArrItem);
        },

        onItemUnChecked: function (itemKey)
        {
            var that = this;
            var itemToRemove;
            for (var m = 0; m < that.options.selectedItemsArr().length; m++) {
                var curItem = that.options.selectedItemsArr()[m];
                if (ko.unwrap(curItem[that.options.itemId]) == itemKey) {
                    itemToRemove = curItem;
                    break;
                }
            }
            var index = that.options.selectedItemsArr.indexOf(itemToRemove);
            that.options.selectedItemsArr.splice(index, 1);
        },


        updateOptGroupSelect: function () {
            var $items = this.$selectItems.filter(':visible');
            $.each(this.$selectGroups, function (i, val) {
                var group = $(val).parent().attr('data-group'),
                    $children = $items.filter('[data-group="' + group + '"]');
                $(val).prop('checked', $children.length &&
                    $children.length === $children.filter(':checked').length);
            });
        },

        getVisibleSelects: function () {
            var that = this;
            var $items = that.$selectItems.parent().filter(':visible').find('input');
            return $items;
        },
        //value or text, default: 'value'
        getSelects: function (type) {
            var that = this,
                texts = [],
                values = [];
            this.$drop.find('input[' + this.selectItemName + ']:checked').each(function () {
                texts.push($(this).parent().text());
                values.push($(this).val());
            });

            if (type === 'text' && this.$selectGroups.length) {
                texts = [];
                this.$selectGroups.each(function () {
                    var html = [],
                        text = $.trim($(this).parent().text()),
                        group = $(this).parent().data('group'),
                        $children = that.$drop.find('[' + that.selectItemName + '][data-group="' + group + '"]'),
                        $selected = $children.filter(':checked');

                    if ($selected.length === 0) {
                        return;
                    }

                    html.push('[');
                    html.push(text);
                    if ($children.length > $selected.length) {
                        var list = [];
                        $selected.each(function () {
                            list.push($(this).parent().text());
                        });
                        html.push(': ' + list.join(', '));
                    }
                    html.push(']');
                    texts.push(html.join(''));
                });
            }
            return type === 'text' ? texts : values;
        },

        setSelects: function (values) {
            var that = this;
            this.$selectItems.prop('checked', false);
            $.each(values, function (i, value) {
                that.$selectItems.filter('[value="' + value + '"]').prop('checked', true);
            });
            this.$selectAll.prop('checked', this.$selectItems.length ===
                this.$selectItems.filter(':checked').length);
            this.update();
        },

        enable: function () {
            this.$choice.removeClass('disabled');
        },

        disable: function () {
            this.$choice.addClass('disabled');
        },

        checkItems :function($items, checked){
            var that = this;
            that.$selectGroups.prop('checked', checked);
            $items.prop('checked', checked);
            that.options[checked ? 'onCheckAll' : 'onUncheckAll']($items);
            that.update();

            if (this.$selectItems.length === $items.length) {
                this.$selectAll.prop('checked', checked);
            }

            var len = $items.length;
            for (var i = 0; i < len ; i++) {
                var item = $items[i];
                var key = item.value;
                if (checked) {
                    that.onItemChecked(key);
                } else {
                    that.onItemUnChecked(key);
                }
            }
        },

        checkAll: function () {
            this.$selectItems.prop('checked', true);
            this.$selectGroups.prop('checked', true);
            this.$selectAll.prop('checked', true);
           
            this.options.onCheckAll();
            this.update();
        },

        uncheckAll: function () {
            this.$selectItems.prop('checked', false);
            this.$selectGroups.prop('checked', false);
            this.$selectAll.prop('checked', false);
            
            this.options.onUncheckAll();
            this.update();
        },

        focus: function () {
            this.$choice.focus();
            this.options.onFocus();
        },

        blur: function () {
            this.$choice.blur();
            this.options.onBlur();
        },

        refresh: function () {
            this.init();
        },
        resetFilter: function() {
            this.$selectItems.parent().show();
            this.$disableItems.parent().show();
            this.$selectGroups.parent().show();
            if (this.$selectItems.parent().filter(':visible').length) {
                this.$selectAll.parent().show();
                this.$noResults.hide();
            } else {
                this.$selectAll.parent().hide();
                this.$noResults.show();
            }
            this.updateOptGroupSelect();
            this.updateSelectAll();
        },
        filter: function () {
            var that = this,
                text = $.trim(this.$searchInput.val()).toLowerCase();
            if (text.length === 0) {
                this.$selectItems.parent().show();
                this.$disableItems.parent().show();
                this.$selectGroups.parent().show();
                if (this.$selectItems.parent().filter(':visible').length) {
                    this.$selectAll.parent().show();
                    this.$noResults.hide();
                } else {
                    this.$selectAll.parent().hide();
                    this.$noResults.show();
                }
            } else {
                this.$selectItems.each(function () {
                    var $parent = $(this).parent();
                    $parent[$parent.text().toLowerCase().indexOf(text) < 0 ? 'hide' : 'show']();                 
                });
                this.$disableItems.parent().hide();
                this.$selectGroups.each(function () {
                    var $parent = $(this).parent();
                    var group = $parent.attr('data-group'),
                        $items = that.$selectItems.filter(':visible');
                    $parent[$items.filter('[data-group="' + group + '"]').length === 0 ? 'hide' : 'show']();
                });

                //Check if no matches found
                if (this.$selectItems.parent().filter(':visible').length) {
                    this.$selectAll.parent().show();
                    this.$noResults.hide();
                } else {
                    this.$selectAll.parent().hide();
                    this.$noResults.show();
                }
            }
            this.updateOptGroupSelect();
            this.updateSelectAll();
        }
    };

    $.fn.multipleSelect = function () {
        var option = arguments[0],
            args = arguments,

            value,
            allowedMethods = [
                'getSelects', 'setSelects',
                'enable', 'disable',
                'checkAll', 'uncheckAll',
                'focus', 'blur',
                'refresh'
            ];

        this.each(function () {
            var $this = $(this),
                data = $this.data('multipleSelect'),
                options = $.extend({}, $.fn.multipleSelect.defaults,
                    $this.data(), typeof option === 'object' && option);

            if (!data) {
                data = new MultipleSelect($this, options);
                $this.data('multipleSelect', data);
            }

            data.options.disabled = options.disabled;

            if (typeof option === 'string') {
                if ($.inArray(option, allowedMethods) < 0) {
                    throw "Unknown method: " + option;
                }
                value = data[option](args[1]);
            } else {
                data.init();
                if (args[1]) {
                    value = data[args[1]].apply(data, [].slice.call(args, 2));
                }
            }
        });

        return value ? value : this;
    };

    $.fn.multipleSelect.defaults = {
        name: '',
        isOpen: false,
        placeholder: '',
        selectAll: true,
        selectAllText: 'Select All',
        allSelected: 'All selected',
        minumimCountSelected: 3,
        countSelected: '# of % selected',
        noMatchesFound: 'No matches found',
        multiple: false,
        multipleWidth: 80,
        single: false,
        filter: false,
        width: undefined,
        maxHeight: 250,
        container: null,
        position: 'bottom',
        keepOpen: false,
        blockSeparator: '',
        disabled: false,

        styler: function () { return false; },

        onOpen: function () { return false; },
        onClose: function () { return false; },
        onCheckAll: function () { return false; },
        onUncheckAll: function () { return false; },
        onFocus: function () { return false; },
        onBlur: function () { return false; },
        onOptgroupClick: function () { return false; },
        onClick: function () { return false; },

        /*Work with model*/
        selectedItemsArr: ko.observableArray(),
        createNewArrItem: function () { return null; },
        itemId: "",
        vendorPlaceholder: ""



    };
});

(function($) {
    $.fn.buttonDropDown = function() {
        var self = this;

        var $arrow = $('.button-dropdown-arrow', self);
        var $dropdownMenu = $('.button-dropdown-menu', self);

        $arrow.click(function () {
            var rt = ($(window).width() - ($arrow.offset().left + $arrow.width()));
            $dropdownMenu.css({ right: rt, top: $arrow.offset().top + $arrow.height() });
            $dropdownMenu.toggle();
        });

        return this;
    };
})(jQuery);
define("button-dropdown", function(){});

(function( factory ) {
    

    if ( typeof define === 'function' && define.amd ) {
        // Define as an AMD module if possible
        define('custom-datatables-filter', ['jquery', 'datatables'], factory);
    }
    else if ( typeof exports === 'object' ) {
        // Node/CommonJS
        factory(require('jquery'), require('datatables'));
    }
    else if ( jQuery ) {
        // Define using browser globals otherwise
        // Prevent multiple instantiations if the script is loaded twice
        factory(jQuery);
    }
})
  (function ($) {
    var _filterSelector = ".datatable-search";

    $.fn.DataTable.SearchFilter = function (table) {
        var searchTimeout;

        function searchFunc() {
            if (table.page.info().page !== 0) {
                if (table.resetPage) {
                    table.resetPage();
                } else {
                    table.page(0).draw(false);
                }
            }
            table.search($(_filterSelector).val()).draw(true);
        }

        $(_filterSelector).bind("propertychange paste cut keyup", function (event) {
            if (searchTimeout) {
                clearTimeout(searchTimeout);
            }
            searchTimeout = setTimeout(searchFunc, 500);
        });
    };
});
(function ($) {
    $.fn.checkbox = function (value) {
        var self = this;
        $.each(self, function () {
            var $this = $(this);
            if (value) {
                $this.attr('checked', true);
            }
            if (!$this.attr('initializedCheckbox')) {
                $('<label>')
                    .attr({ for: $this.attr('id') })
                    .click(function(e) { e.stopPropagation(); })
                    .insertAfter($this);

                $this.click(function(e) { e.stopPropagation(); });
                $this.attr('initializedCheckbox', true);
            }
        });
    };
})(jQuery);
define("checkbox", function(){});

(function ($) {
    $.fn.initializeCheckboxesColumn = function() {
        var self = this;

        var headerCheckbox = $('.checkbox', $('thead', self));
        var rowCheckboxes = $('.checkbox', $('tbody', self));
        var semiCheckedClass = 'semi-checked';

        headerCheckbox.prop('checked', false);
        headerCheckbox.removeClass(semiCheckedClass);

        headerCheckbox.change(function () {
            var newValue = headerCheckbox.prop('checked');

            headerCheckbox.removeClass(semiCheckedClass);

            rowCheckboxes.prop('checked', !newValue);
            rowCheckboxes.trigger('click');
        });

        rowCheckboxes.change(function (e) {
            if (rowCheckboxes.not(':checked').length == rowCheckboxes.length) {

                headerCheckbox.prop('checked', false);
                headerCheckbox.removeClass(semiCheckedClass);

            } else if (rowCheckboxes.not(':checked').length == 0) {

                headerCheckbox.prop('checked', true);
                headerCheckbox.removeClass(semiCheckedClass);

            } else {
                headerCheckbox.prop('checked', false);
                headerCheckbox.addClass(semiCheckedClass);
            }
        });

        rowCheckboxes.change();
    };
})(jQuery);
define("checkboxColumn", function(){});

(function($) {
    var tavControlClass = 'tab-control',
        tabClass = 'tab',
        tabSelector = '.' + tabClass,
        selectedTabClass = 'selected',
        selectedTabArrow = 'tab-selected-arrow',
        errorTabClass = 'hasError',
        disabledTabClass = 'disabled';


    var tabControl = function ($control) {
        var self = this;

        self.tabs = [];

        self.createFromMarkup = function(element, allowBrowsing) {
            $('.' + tabClass, element).each(function () {
                var $this = $(this);
                if (allowBrowsing)
                    $this.click(function () { goToTab($this); });

                self.tabs.push($this);
            });
        };

        self.setTabErrors = function (index) {
            setTabErrors(this.tabs[index]);
        };

        self.clearTabErrors = function (index) {
            clearTabErrors(this.tabs[index]);
        };

        self.hideTab = function (selector) {
            for (var i = 0; i < self.tabs.length; i++) {
                if (self.tabs[i].data('for') == selector) {
                    self.tabs[i].hide();

                }
            }

           
        };

        self.goToTab = function (index) {
            goToTab(this.tabs[index]);
        };

        self.createTab = function (tab, allowBrowsing) {
            var $tab = $('<span>')
                .addClass(tabClass);
            
            $tab.append($('<span>').addClass('tab-title').text(tab.name));

            var $selectedArrow = $('<span>').addClass(selectedTabArrow);
            $tab.append($selectedArrow);

            if (tab.containerSelector != undefined) {
                $tab.attr('data-for', tab.containerSelector);
            }

            if (tab.visibleObservableVariable) {

                function checkTabVisibility () {
                    if (tab.visibleObservableVariable() == false) {
                        $tab.css({
                            'display': 'none'
                        });
                    } else {
                        $tab.css({
                            'display': 'inline-block'
                        });
                    }
                }

                tab.visibleObservableVariable.subscribe(checkTabVisibility);
                checkTabVisibility();
            }

            if (tab.disabled == null || !tab.disabled) {
                if (allowBrowsing)
                    $tab.click(function () { goToTab($tab); });

                if (tab.onClick != undefined && typeof tab.onClick === 'function') {
                    $tab.click(tab.onClick);
                }
            } else {
                $tab.addClass(disabledTabClass);
            }

            self.tabs.push($tab);
            return $tab;
        };

        function showTab($tab) {
            if (!$tab) return;
            var selector = $tab.attr('data-for');
            $(selector).show();
        }

        function hideTab($tab) {
            if (!$tab) return;
            var selector = $tab.attr('data-for');
            $(selector).hide();
        }

        function setTabErrors($tab) {
            if (!$tab) return;
            $tab.addClass(errorTabClass);
        }

        function clearTabErrors($tab) {
            if (!$tab) return;
            $tab.removeClass(errorTabClass);
        }

        function goToTab($tab) {
            if (!$tab) return;
            $(tabSelector + '.' + selectedTabClass, $control).removeClass(selectedTabClass);
            $tab.addClass(selectedTabClass);

            $(tabSelector, $control).each(function() {
                hideTab($(this));
            });

            showTab($tab);
            var index = $.inArray($tab, self.tabs);
            if ($control.goToTabHandler && index >=0 ) {
                $control.goToTabHandler(index);
            }
        }
    };

    $.fn.tabControl = function(options) {
        var self = $.extend(this, new tabControl(this));

        self.addClass(tavControlClass);

        if (options && options.goToTabHandler) {
            self.goToTabHandler = options.goToTabHandler;
        }

        if (options != undefined) {
            self.empty();

            var allowBrowsing = true;
            if (options.manualBrowsing != undefined) {
                allowBrowsing = options.manualBrowsing != false;
            }

            if (options.tabs != undefined && Object.prototype.toString.call(options.tabs) === '[object Array]') {
                for (var i = 0; i < options.tabs.length; i++) {
                    var $tab = self.createTab(options.tabs[i], allowBrowsing);
                    self.append($tab);
                }
            } else {
                self.createFromMarkup(self, allowBrowsing);
            }

        } else {
            self.createFromMarkup(self, true);
        }

        if (self.tabs != null && self.tabs.length > 0) {
            var tabNo = 0;
            for (var i = 0; i < self.tabs.length; ++i) {
                if (self.tabs[i].hasClass('selected')) {
                    tabNo = i;
                    break;
                }
            }
            self.goToTab(tabNo);
        }

        return self;
    };
})(jQuery);
define("tab-control", function(){});

(function ($) {
    var defaults = {
        type: 'text',
        onloadCallback: null
    };

    function FileDialog(fileInput, options) {
        var self = this;

        self.options = $.extend({}, defaults, options);
        self.file = null;
        self.fileInput = fileInput;

        self.readContent = function () {

            if (!self.file && self.fileInput.get(0).files && self.fileInput.get(0).files[0]) {
                self.file = self.fileInput.get(0).files[0]
            }

            if (!self.file) {
                return;
            }

            switch (self.options.type) {
                case 'text': return readText(self.file, self.options);
                case 'image': return readImage(self.file, self.options);
                default: throw new Error("Invalid fileUpload type configuration.");
            }
        };

        self.fileInput.on('change', function() {
            self.file = this.files[0];
            try{
                self.readContent();
            } catch (err) {
                if (self.options.onError) {
                    self.options.onError(err);
                }
            }

            this.value = null;
        });

        self.show = function() {
            self.fileInput.click();
        };

        self.destroy = function () {
            self.fileInput.off();
        };
    }

    $.fn.fileDialog = function (options) {
        var self = this;
        return new FileDialog(self, options);
    };

    function readText(file, options) {
        var reader = new FileReader();

        if (options.onloadCallback != null) {
            reader.onload = function(e) {
                options.onloadCallback(reader.result);
            };
        }

        reader.readAsText(file);
    }

    function readImage(file, options) {
        if (!file || file.type.indexOf('image/') == -1) {
            throw new Error("Invalid file type.")
        }
        
        var reader = new FileReader();

        if (options.onloadCallback != null) {
            reader.onload = function(e) {
                options.onloadCallback(reader.result);
            };
        }

        reader.readAsDataURL(file);
    }

})(jQuery);
define("fileDialog", function(){});

(function ($) {
    var scrollAreaClass = 'paginate-scroll-area',
        horizontalClass = 'horizontal',
        verticalClass = 'vertical';

    var defaultOpts = {
        pageSize: 2,
        itemSelector: '',
        nextSelector: '',
        prevSelector: '',
        scrollAreaSelector: '',
        disabledClass: 'disabled',
        orientation: 'horizontal',
        delay : 800

    };

    function Paginate(control, options) {
        var self = this;

        self.options = $.extend({}, defaultOpts, options);
        self.control = control;

        self.scrollArea = $(self.options.scrollAreaSelector);

        self.items = $(self.options.itemSelector, self.control);

        self.nextButton = $(self.options.nextSelector);
        self.nextButtonDisabled = true;
        self.disableNextButton = function() {
            self.nextButton.addClass(self.options.disabledClass);
            self.nextButtonEnabled = false;
        };
        self.enableNextButton = function() {
            self.nextButton.removeClass(self.options.disabledClass);
            self.nextButtonEnabled = true;
        };

        self.prevButton = $(self.options.prevSelector);
        self.prevButtonEnabled = true;
        self.disablePrevButton = function() {
            self.prevButton.addClass(self.options.disabledClass);
            self.prevButtonEnabled = false;
        };
        self.enablePrevButton = function() {
            self.prevButton.removeClass(self.options.disabledClass);
            self.prevButtonEnabled = true;
        };
        self.restyleNavButtons = restyleNavButtons;
        self.refreshItems = refreshItems;
        self.page = 1;

        self.scrollNext = function () {
            if (!self.blockScrolling) {
                self.blockScrolling = true;

                var itemsLeft = self.items.length - self.page * self.options.pageSize;
                if (itemsLeft <= 0) return;

                var scrollWidth = calculateScrollSize(self.page * self.options.pageSize);
                var scrollSize = getScrollPosition() + scrollWidth;
                scrollControl(scrollSize);

                self.page++;

                restyleNavButtons();
            }
        };

        self.scrollPrev = function () {
            if (!self.blockScrolling) {
                self.blockScrolling = true;

                if (self.page == 0) return;

                var scrollWidth = calculateScrollSize((self.page - 2) * self.options.pageSize);
                var scrollSize = Math.max(getScrollPosition() + scrollWidth, 0);

                scrollControl(scrollSize);

                self.page--;

                restyleNavButtons();
            }
        };

        self.adjustScroll = function() {
            var scrollWidth = calculateScrollSize((self.page - 1) * self.options.pageSize);
            var scrollSize = getScrollPosition() + scrollWidth;
            scrollWithoutAnimation(scrollSize);
        };

        self.blockScrolling = false;

        self.nextButton.click(function () {
            if (self.nextButtonEnabled) {
                self.scrollNext();
            }
        });

        self.prevButton.click(function () {
            if (self.prevButtonEnabled) {
                self.scrollPrev();
            }
        });

        function scrollControl(scrollSize) {
            if (self.options.orientation == 'horizontal') {
                self.scrollArea.animate({ scrollLeft: scrollSize }, self.options.delay, function () {
                    self.blockScrolling = false;
                });
            } else {
                self.scrollArea.animate({ scrollTop: scrollSize }, self.options.delay, function () {
                    self.blockScrolling = false;
                });
            }
        }

        function scrollWithoutAnimation(scrollSize) {
            if (self.options.orientation == 'horizontal') {
                self.scrollArea.scrollLeft(scrollSize);
            } else {
                self.scrollArea.scrollTop(scrollSize);
            }
        }

        function calculateScrollSize(itemIndex) {
            return getControlOffset($(self.items[itemIndex])) - getControlOffset(self.scrollArea);
        }

        function getControlOffset($control) {
            if (!$control || !$control.offset || !$control.offset()) {
                return 0;
            }
            else if (self.options.orientation == 'vertical') {
                return $control.offset().top;
            } else {
                return $control.offset().left;
            }
        }

        function getScrollPosition() {
            if (self.options.orientation == 'vertical') {
                return self.scrollArea.scrollTop();
            } else {
                return self.scrollArea.scrollLeft();
            }
        }

        function refreshItems() {
            self.items = $(self.options.itemSelector);
        }

        function restyleNavButtons() {
            self.enableNextButton();
            self.enablePrevButton();

            if (self.page == 1) {
                self.disablePrevButton();
            }

            if (self.items.length - self.page * self.options.pageSize <= 0) {
                self.disableNextButton();
            }
        }

        function styleControl() {
            self.scrollArea.addClass(scrollAreaClass);

            if (self.options.orientation == 'vertical') {
                self.scrollArea.addClass(verticalClass);
            } else {
                self.scrollArea.addClass(horizontalClass);
            }
        }


        if (self.items.length > self.options.pageSize) {
            $(window).resize(function() {
                self.adjustScroll();
            });
        }

        styleControl();
        restyleNavButtons();
    }

    $.fn.paginate = function (options) {
        return new Paginate(this, options);
    };
})(jQuery);
define("paginate", function(){});

/*
 * jQuery Iframe Transport Plugin 1.8.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/* global define, window, document */

(function (factory) {
    
    if (typeof define === 'function' && define.amd) {
        // Register as an anonymous AMD module:
        define('jquery.iframe-transport',['jquery'], factory);
    } else {
        // Browser globals:
        factory(window.jQuery);
    }
}(function ($) {
    

    // Helper variable to create unique names for the transport iframes:
    var counter = 0;

    // The iframe transport accepts four additional options:
    // options.fileInput: a jQuery collection of file input fields
    // options.paramName: the parameter name for the file form data,
    //  overrides the name property of the file input field(s),
    //  can be a string or an array of strings.
    // options.formData: an array of objects with name and value properties,
    //  equivalent to the return data of .serializeArray(), e.g.:
    //  [{name: 'a', value: 1}, {name: 'b', value: 2}]
    // options.initialIframeSrc: the URL of the initial iframe src,
    //  by default set to "javascript:false;"
    $.ajaxTransport('iframe', function (options) {
        if (options.async) {
            // javascript:false as initial iframe src
            // prevents warning popups on HTTPS in IE6:
            /*jshint scripturl: true */
            var initialIframeSrc = options.initialIframeSrc || 'javascript:false;',
            /*jshint scripturl: false */
                form,
                iframe,
                addParamChar;
            return {
                send: function (_, completeCallback) {
                    form = $('<form style="display:none;"></form>');
                    form.attr('accept-charset', options.formAcceptCharset);
                    addParamChar = /\?/.test(options.url) ? '&' : '?';
                    // XDomainRequest only supports GET and POST:
                    if (options.type === 'DELETE') {
                        options.url = options.url + addParamChar + '_method=DELETE';
                        options.type = 'POST';
                    } else if (options.type === 'PUT') {
                        options.url = options.url + addParamChar + '_method=PUT';
                        options.type = 'POST';
                    } else if (options.type === 'PATCH') {
                        options.url = options.url + addParamChar + '_method=PATCH';
                        options.type = 'POST';
                    }
                    // IE versions below IE8 cannot set the name property of
                    // elements that have already been added to the DOM,
                    // so we set the name along with the iframe HTML markup:
                    counter += 1;
                    iframe = $(
                        '<iframe src="' + initialIframeSrc +
                            '" name="iframe-transport-' + counter + '"></iframe>'
                    ).bind('load', function () {
                        var fileInputClones,
                            paramNames = $.isArray(options.paramName) ?
                                    options.paramName : [options.paramName];
                        iframe
                            .unbind('load')
                            .bind('load', function () {
                                var response;
                                // Wrap in a try/catch block to catch exceptions thrown
                                // when trying to access cross-domain iframe contents:
                                try {
                                    response = iframe.contents();
                                    // Google Chrome and Firefox do not throw an
                                    // exception when calling iframe.contents() on
                                    // cross-domain requests, so we unify the response:
                                    if (!response.length || !response[0].firstChild) {
                                        throw new Error();
                                    }
                                } catch (e) {
                                    response = undefined;
                                }
                                // The complete callback returns the
                                // iframe content document as response object:
                                completeCallback(
                                    200,
                                    'success',
                                    {'iframe': response}
                                );
                                // Fix for IE endless progress bar activity bug
                                // (happens on form submits to iframe targets):
                                $('<iframe src="' + initialIframeSrc + '"></iframe>')
                                    .appendTo(form);
                                window.setTimeout(function () {
                                    // Removing the form in a setTimeout call
                                    // allows Chrome's developer tools to display
                                    // the response result
                                    form.remove();
                                }, 0);
                            });
                        form
                            .prop('target', iframe.prop('name'))
                            .prop('action', options.url)
                            .prop('method', options.type);
                        if (options.formData) {
                            $.each(options.formData, function (index, field) {
                                $('<input type="hidden"/>')
                                    .prop('name', field.name)
                                    .val(field.value)
                                    .appendTo(form);
                            });
                        }
                        if (options.fileInput && options.fileInput.length &&
                                options.type === 'POST') {
                            fileInputClones = options.fileInput.clone();
                            // Insert a clone for each file input field:
                            options.fileInput.after(function (index) {
                                return fileInputClones[index];
                            });
                            if (options.paramName) {
                                options.fileInput.each(function (index) {
                                    $(this).prop(
                                        'name',
                                        paramNames[index] || options.paramName
                                    );
                                });
                            }
                            // Appending the file input fields to the hidden form
                            // removes them from their original location:
                            form
                                .append(options.fileInput)
                                .prop('enctype', 'multipart/form-data')
                                // enctype must be set as encoding for IE:
                                .prop('encoding', 'multipart/form-data');
                            // Remove the HTML5 form attribute from the input(s):
                            options.fileInput.removeAttr('form');
                        }
                        form.submit();
                        // Insert the file input fields at their original location
                        // by replacing the clones with the originals:
                        if (fileInputClones && fileInputClones.length) {
                            options.fileInput.each(function (index, input) {
                                var clone = $(fileInputClones[index]);
                                // Restore the original name and form properties:
                                $(input)
                                    .prop('name', clone.prop('name'))
                                    .attr('form', clone.attr('form'));
                                clone.replaceWith(input);
                            });
                        }
                    });
                    form.append(iframe).appendTo(document.body);
                },
                abort: function () {
                    if (iframe) {
                        // javascript:false as iframe src aborts the request
                        // and prevents warning popups on HTTPS in IE6.
                        // concat is used to avoid the "Script URL" JSLint error:
                        iframe
                            .unbind('load')
                            .prop('src', initialIframeSrc);
                    }
                    if (form) {
                        form.remove();
                    }
                }
            };
        }
    });

    // The iframe transport returns the iframe content document as response.
    // The following adds converters from iframe to text, json, html, xml
    // and script.
    // Please note that the Content-Type for JSON responses has to be text/plain
    // or text/html, if the browser doesn't include application/json in the
    // Accept header, else IE will show a download dialog.
    // The Content-Type for XML responses on the other hand has to be always
    // application/xml or text/xml, so IE properly parses the XML response.
    // See also
    // https://github.com/blueimp/jQuery-File-Upload/wiki/Setup#content-type-negotiation
    $.ajaxSetup({
        converters: {
            'iframe text': function (iframe) {
                return iframe && $(iframe[0].body).text();
            },
            'iframe json': function (iframe) {
                return iframe && $.parseJSON($(iframe[0].body).text());
            },
            'iframe html': function (iframe) {
                return iframe && $(iframe[0].body).html();
            },
            'iframe xml': function (iframe) {
                var xmlDoc = iframe && iframe[0];
                return xmlDoc && $.isXMLDoc(xmlDoc) ? xmlDoc :
                        $.parseXML((xmlDoc.XMLDocument && xmlDoc.XMLDocument.xml) ||
                            $(xmlDoc.body).html());
            },
            'iframe script': function (iframe) {
                return iframe && $.globalEval($(iframe[0].body).text());
            }
        }
    });

}));

/*!
 * jQuery UI Widget 1.10.4+amd
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2014 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * http://api.jqueryui.com/jQuery.widget/
 */

(function (factory) {
    if (typeof define === "function" && define.amd) {
        // Register as an anonymous AMD module:
        define('jquery.ui.widget',["jquery"], factory);
    } else {
        // Browser globals:
        factory(jQuery);
    }
}(function( $, undefined ) {

var uuid = 0,
	slice = Array.prototype.slice,
	_cleanData = $.cleanData;
$.cleanData = function( elems ) {
	for ( var i = 0, elem; (elem = elems[i]) != null; i++ ) {
		try {
			$( elem ).triggerHandler( "remove" );
		// http://bugs.jquery.com/ticket/8235
		} catch( e ) {}
	}
	_cleanData( elems );
};

$.widget = function( name, base, prototype ) {
	var fullName, existingConstructor, constructor, basePrototype,
		// proxiedPrototype allows the provided prototype to remain unmodified
		// so that it can be used as a mixin for multiple widgets (#8876)
		proxiedPrototype = {},
		namespace = name.split( "." )[ 0 ];

	name = name.split( "." )[ 1 ];
	fullName = namespace + "-" + name;

	if ( !prototype ) {
		prototype = base;
		base = $.Widget;
	}

	// create selector for plugin
	$.expr[ ":" ][ fullName.toLowerCase() ] = function( elem ) {
		return !!$.data( elem, fullName );
	};

	$[ namespace ] = $[ namespace ] || {};
	existingConstructor = $[ namespace ][ name ];
	constructor = $[ namespace ][ name ] = function( options, element ) {
		// allow instantiation without "new" keyword
		if ( !this._createWidget ) {
			return new constructor( options, element );
		}

		// allow instantiation without initializing for simple inheritance
		// must use "new" keyword (the code above always passes args)
		if ( arguments.length ) {
			this._createWidget( options, element );
		}
	};
	// extend with the existing constructor to carry over any static properties
	$.extend( constructor, existingConstructor, {
		version: prototype.version,
		// copy the object used to create the prototype in case we need to
		// redefine the widget later
		_proto: $.extend( {}, prototype ),
		// track widgets that inherit from this widget in case this widget is
		// redefined after a widget inherits from it
		_childConstructors: []
	});

	basePrototype = new base();
	// we need to make the options hash a property directly on the new instance
	// otherwise we'll modify the options hash on the prototype that we're
	// inheriting from
	basePrototype.options = $.widget.extend( {}, basePrototype.options );
	$.each( prototype, function( prop, value ) {
		if ( !$.isFunction( value ) ) {
			proxiedPrototype[ prop ] = value;
			return;
		}
		proxiedPrototype[ prop ] = (function() {
			var _super = function() {
					return base.prototype[ prop ].apply( this, arguments );
				},
				_superApply = function( args ) {
					return base.prototype[ prop ].apply( this, args );
				};
			return function() {
				var __super = this._super,
					__superApply = this._superApply,
					returnValue;

				this._super = _super;
				this._superApply = _superApply;

				returnValue = value.apply( this, arguments );

				this._super = __super;
				this._superApply = __superApply;

				return returnValue;
			};
		})();
	});
	constructor.prototype = $.widget.extend( basePrototype, {
		// TODO: remove support for widgetEventPrefix
		// always use the name + a colon as the prefix, e.g., draggable:start
		// don't prefix for widgets that aren't DOM-based
		widgetEventPrefix: existingConstructor ? (basePrototype.widgetEventPrefix || name) : name
	}, proxiedPrototype, {
		constructor: constructor,
		namespace: namespace,
		widgetName: name,
		widgetFullName: fullName
	});

	// If this widget is being redefined then we need to find all widgets that
	// are inheriting from it and redefine all of them so that they inherit from
	// the new version of this widget. We're essentially trying to replace one
	// level in the prototype chain.
	if ( existingConstructor ) {
		$.each( existingConstructor._childConstructors, function( i, child ) {
			var childPrototype = child.prototype;

			// redefine the child widget using the same prototype that was
			// originally used, but inherit from the new version of the base
			$.widget( childPrototype.namespace + "." + childPrototype.widgetName, constructor, child._proto );
		});
		// remove the list of existing child constructors from the old constructor
		// so the old child constructors can be garbage collected
		delete existingConstructor._childConstructors;
	} else {
		base._childConstructors.push( constructor );
	}

	$.widget.bridge( name, constructor );
};

$.widget.extend = function( target ) {
	var input = slice.call( arguments, 1 ),
		inputIndex = 0,
		inputLength = input.length,
		key,
		value;
	for ( ; inputIndex < inputLength; inputIndex++ ) {
		for ( key in input[ inputIndex ] ) {
			value = input[ inputIndex ][ key ];
			if ( input[ inputIndex ].hasOwnProperty( key ) && value !== undefined ) {
				// Clone objects
				if ( $.isPlainObject( value ) ) {
					target[ key ] = $.isPlainObject( target[ key ] ) ?
						$.widget.extend( {}, target[ key ], value ) :
						// Don't extend strings, arrays, etc. with objects
						$.widget.extend( {}, value );
				// Copy everything else by reference
				} else {
					target[ key ] = value;
				}
			}
		}
	}
	return target;
};

$.widget.bridge = function( name, object ) {
	var fullName = object.prototype.widgetFullName || name;
	$.fn[ name ] = function( options ) {
		var isMethodCall = typeof options === "string",
			args = slice.call( arguments, 1 ),
			returnValue = this;

		// allow multiple hashes to be passed on init
		options = !isMethodCall && args.length ?
			$.widget.extend.apply( null, [ options ].concat(args) ) :
			options;

		if ( isMethodCall ) {
			this.each(function() {
				var methodValue,
					instance = $.data( this, fullName );
				if ( !instance ) {
					return $.error( "cannot call methods on " + name + " prior to initialization; " +
						"attempted to call method '" + options + "'" );
				}
				if ( !$.isFunction( instance[options] ) || options.charAt( 0 ) === "_" ) {
					return $.error( "no such method '" + options + "' for " + name + " widget instance" );
				}
				methodValue = instance[ options ].apply( instance, args );
				if ( methodValue !== instance && methodValue !== undefined ) {
					returnValue = methodValue && methodValue.jquery ?
						returnValue.pushStack( methodValue.get() ) :
						methodValue;
					return false;
				}
			});
		} else {
			this.each(function() {
				var instance = $.data( this, fullName );
				if ( instance ) {
					instance.option( options || {} )._init();
				} else {
					$.data( this, fullName, new object( options, this ) );
				}
			});
		}

		return returnValue;
	};
};

$.Widget = function( /* options, element */ ) {};
$.Widget._childConstructors = [];

$.Widget.prototype = {
	widgetName: "widget",
	widgetEventPrefix: "",
	defaultElement: "<div>",
	options: {
		disabled: false,

		// callbacks
		create: null
	},
	_createWidget: function( options, element ) {
		element = $( element || this.defaultElement || this )[ 0 ];
		this.element = $( element );
		this.uuid = uuid++;
		this.eventNamespace = "." + this.widgetName + this.uuid;
		this.options = $.widget.extend( {},
			this.options,
			this._getCreateOptions(),
			options );

		this.bindings = $();
		this.hoverable = $();
		this.focusable = $();

		if ( element !== this ) {
			$.data( element, this.widgetFullName, this );
			this._on( true, this.element, {
				remove: function( event ) {
					if ( event.target === element ) {
						this.destroy();
					}
				}
			});
			this.document = $( element.style ?
				// element within the document
				element.ownerDocument :
				// element is window or document
				element.document || element );
			this.window = $( this.document[0].defaultView || this.document[0].parentWindow );
		}

		this._create();
		this._trigger( "create", null, this._getCreateEventData() );
		this._init();
	},
	_getCreateOptions: $.noop,
	_getCreateEventData: $.noop,
	_create: $.noop,
	_init: $.noop,

	destroy: function() {
		this._destroy();
		// we can probably remove the unbind calls in 2.0
		// all event bindings should go through this._on()
		this.element
			.unbind( this.eventNamespace )
			// 1.9 BC for #7810
			// TODO remove dual storage
			.removeData( this.widgetName )
			.removeData( this.widgetFullName )
			// support: jquery <1.6.3
			// http://bugs.jquery.com/ticket/9413
			.removeData( $.camelCase( this.widgetFullName ) );
		this.widget()
			.unbind( this.eventNamespace )
			.removeAttr( "aria-disabled" )
			.removeClass(
				this.widgetFullName + "-disabled " +
				"ui-state-disabled" );

		// clean up events and states
		this.bindings.unbind( this.eventNamespace );
		this.hoverable.removeClass( "ui-state-hover" );
		this.focusable.removeClass( "ui-state-focus" );
	},
	_destroy: $.noop,

	widget: function() {
		return this.element;
	},

	option: function( key, value ) {
		var options = key,
			parts,
			curOption,
			i;

		if ( arguments.length === 0 ) {
			// don't return a reference to the internal hash
			return $.widget.extend( {}, this.options );
		}

		if ( typeof key === "string" ) {
			// handle nested keys, e.g., "foo.bar" => { foo: { bar: ___ } }
			options = {};
			parts = key.split( "." );
			key = parts.shift();
			if ( parts.length ) {
				curOption = options[ key ] = $.widget.extend( {}, this.options[ key ] );
				for ( i = 0; i < parts.length - 1; i++ ) {
					curOption[ parts[ i ] ] = curOption[ parts[ i ] ] || {};
					curOption = curOption[ parts[ i ] ];
				}
				key = parts.pop();
				if ( arguments.length === 1 ) {
					return curOption[ key ] === undefined ? null : curOption[ key ];
				}
				curOption[ key ] = value;
			} else {
				if ( arguments.length === 1 ) {
					return this.options[ key ] === undefined ? null : this.options[ key ];
				}
				options[ key ] = value;
			}
		}

		this._setOptions( options );

		return this;
	},
	_setOptions: function( options ) {
		var key;

		for ( key in options ) {
			this._setOption( key, options[ key ] );
		}

		return this;
	},
	_setOption: function( key, value ) {
		this.options[ key ] = value;

		if ( key === "disabled" ) {
			this.widget()
				.toggleClass( this.widgetFullName + "-disabled ui-state-disabled", !!value )
				.attr( "aria-disabled", value );
			this.hoverable.removeClass( "ui-state-hover" );
			this.focusable.removeClass( "ui-state-focus" );
		}

		return this;
	},

	enable: function() {
		return this._setOption( "disabled", false );
	},
	disable: function() {
		return this._setOption( "disabled", true );
	},

	_on: function( suppressDisabledCheck, element, handlers ) {
		var delegateElement,
			instance = this;

		// no suppressDisabledCheck flag, shuffle arguments
		if ( typeof suppressDisabledCheck !== "boolean" ) {
			handlers = element;
			element = suppressDisabledCheck;
			suppressDisabledCheck = false;
		}

		// no element argument, shuffle and use this.element
		if ( !handlers ) {
			handlers = element;
			element = this.element;
			delegateElement = this.widget();
		} else {
			// accept selectors, DOM elements
			element = delegateElement = $( element );
			this.bindings = this.bindings.add( element );
		}

		$.each( handlers, function( event, handler ) {
			function handlerProxy() {
				// allow widgets to customize the disabled handling
				// - disabled as an array instead of boolean
				// - disabled class as method for disabling individual parts
				if ( !suppressDisabledCheck &&
						( instance.options.disabled === true ||
							$( this ).hasClass( "ui-state-disabled" ) ) ) {
					return;
				}
				return ( typeof handler === "string" ? instance[ handler ] : handler )
					.apply( instance, arguments );
			}

			// copy the guid so direct unbinding works
			if ( typeof handler !== "string" ) {
				handlerProxy.guid = handler.guid =
					handler.guid || handlerProxy.guid || $.guid++;
			}

			var match = event.match( /^(\w+)\s*(.*)$/ ),
				eventName = match[1] + instance.eventNamespace,
				selector = match[2];
			if ( selector ) {
				delegateElement.delegate( selector, eventName, handlerProxy );
			} else {
				element.bind( eventName, handlerProxy );
			}
		});
	},

	_off: function( element, eventName ) {
		eventName = (eventName || "").split( " " ).join( this.eventNamespace + " " ) + this.eventNamespace;
		element.unbind( eventName ).undelegate( eventName );
	},

	_delay: function( handler, delay ) {
		function handlerProxy() {
			return ( typeof handler === "string" ? instance[ handler ] : handler )
				.apply( instance, arguments );
		}
		var instance = this;
		return setTimeout( handlerProxy, delay || 0 );
	},

	_hoverable: function( element ) {
		this.hoverable = this.hoverable.add( element );
		this._on( element, {
			mouseenter: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-hover" );
			},
			mouseleave: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-hover" );
			}
		});
	},

	_focusable: function( element ) {
		this.focusable = this.focusable.add( element );
		this._on( element, {
			focusin: function( event ) {
				$( event.currentTarget ).addClass( "ui-state-focus" );
			},
			focusout: function( event ) {
				$( event.currentTarget ).removeClass( "ui-state-focus" );
			}
		});
	},

	_trigger: function( type, event, data ) {
		var prop, orig,
			callback = this.options[ type ];

		data = data || {};
		event = $.Event( event );
		event.type = ( type === this.widgetEventPrefix ?
			type :
			this.widgetEventPrefix + type ).toLowerCase();
		// the original event may come from any element
		// so we need to reset the target on the new event
		event.target = this.element[ 0 ];

		// copy original event properties over to the new event
		orig = event.originalEvent;
		if ( orig ) {
			for ( prop in orig ) {
				if ( !( prop in event ) ) {
					event[ prop ] = orig[ prop ];
				}
			}
		}

		this.element.trigger( event, data );
		return !( $.isFunction( callback ) &&
			callback.apply( this.element[0], [ event ].concat( data ) ) === false ||
			event.isDefaultPrevented() );
	}
};

$.each( { show: "fadeIn", hide: "fadeOut" }, function( method, defaultEffect ) {
	$.Widget.prototype[ "_" + method ] = function( element, options, callback ) {
		if ( typeof options === "string" ) {
			options = { effect: options };
		}
		var hasOptions,
			effectName = !options ?
				method :
				options === true || typeof options === "number" ?
					defaultEffect :
					options.effect || defaultEffect;
		options = options || {};
		if ( typeof options === "number" ) {
			options = { duration: options };
		}
		hasOptions = !$.isEmptyObject( options );
		options.complete = callback;
		if ( options.delay ) {
			element.delay( options.delay );
		}
		if ( hasOptions && $.effects && $.effects.effect[ effectName ] ) {
			element[ method ]( options );
		} else if ( effectName !== method && element[ effectName ] ) {
			element[ effectName ]( options.duration, options.easing, callback );
		} else {
			element.queue(function( next ) {
				$( this )[ method ]();
				if ( callback ) {
					callback.call( element[ 0 ] );
				}
				next();
			});
		}
	};
});

}));

/*
 * jQuery File Upload Plugin 5.41.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/* jshint nomen:false */
/* global define, window, document, location, Blob, FormData */

(function (factory) {
    
    if (typeof define === 'function' && define.amd) {
        // Register as an anonymous AMD module:
        define('jquery.fileupload',[
            'jquery',
            'jquery.ui.widget'
        ], factory);
    } else {
        // Browser globals:
        factory(window.jQuery);
    }
}(function ($) {
    

    // Detect file input support, based on
    // http://viljamis.com/blog/2012/file-upload-support-on-mobile/
    $.support.fileInput = !(new RegExp(
        // Handle devices which give false positives for the feature detection:
        '(Android (1\\.[0156]|2\\.[01]))' +
            '|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)' +
            '|(w(eb)?OSBrowser)|(webOS)' +
            '|(Kindle/(1\\.0|2\\.[05]|3\\.0))'
    ).test(window.navigator.userAgent) ||
        // Feature detection for all other devices:
        $('<input type="file">').prop('disabled'));

    // The FileReader API is not actually used, but works as feature detection,
    // as some Safari versions (5?) support XHR file uploads via the FormData API,
    // but not non-multipart XHR file uploads.
    // window.XMLHttpRequestUpload is not available on IE10, so we check for
    // window.ProgressEvent instead to detect XHR2 file upload capability:
    $.support.xhrFileUpload = !!(window.ProgressEvent && window.FileReader);
    $.support.xhrFormDataFileUpload = !!window.FormData;

    // Detect support for Blob slicing (required for chunked uploads):
    $.support.blobSlice = window.Blob && (Blob.prototype.slice ||
        Blob.prototype.webkitSlice || Blob.prototype.mozSlice);

    // The fileupload widget listens for change events on file input fields defined
    // via fileInput setting and paste or drop events of the given dropZone.
    // In addition to the default jQuery Widget methods, the fileupload widget
    // exposes the "add" and "send" methods, to add or directly send files using
    // the fileupload API.
    // By default, files added via file input selection, paste, drag & drop or
    // "add" method are uploaded immediately, but it is possible to override
    // the "add" callback option to queue file uploads.
    $.widget('blueimp.fileupload', {

        options: {
            // The drop target element(s), by the default the complete document.
            // Set to null to disable drag & drop support:
            dropZone: $(document),
            // The paste target element(s), by the default the complete document.
            // Set to null to disable paste support:
            pasteZone: $(document),
            // The file input field(s), that are listened to for change events.
            // If undefined, it is set to the file input fields inside
            // of the widget element on plugin initialization.
            // Set to null to disable the change listener.
            fileInput: undefined,
            // By default, the file input field is replaced with a clone after
            // each input field change event. This is required for iframe transport
            // queues and allows change events to be fired for the same file
            // selection, but can be disabled by setting the following option to false:
            replaceFileInput: true,
            // The parameter name for the file form data (the request argument name).
            // If undefined or empty, the name property of the file input field is
            // used, or "files[]" if the file input name property is also empty,
            // can be a string or an array of strings:
            paramName: undefined,
            // By default, each file of a selection is uploaded using an individual
            // request for XHR type uploads. Set to false to upload file
            // selections in one request each:
            singleFileUploads: true,
            // To limit the number of files uploaded with one XHR request,
            // set the following option to an integer greater than 0:
            limitMultiFileUploads: undefined,
            // The following option limits the number of files uploaded with one
            // XHR request to keep the request size under or equal to the defined
            // limit in bytes:
            limitMultiFileUploadSize: undefined,
            // Multipart file uploads add a number of bytes to each uploaded file,
            // therefore the following option adds an overhead for each file used
            // in the limitMultiFileUploadSize configuration:
            limitMultiFileUploadSizeOverhead: 512,
            // Set the following option to true to issue all file upload requests
            // in a sequential order:
            sequentialUploads: false,
            // To limit the number of concurrent uploads,
            // set the following option to an integer greater than 0:
            limitConcurrentUploads: undefined,
            // Set the following option to true to force iframe transport uploads:
            forceIframeTransport: false,
            // Set the following option to the location of a redirect url on the
            // origin server, for cross-domain iframe transport uploads:
            redirect: undefined,
            // The parameter name for the redirect url, sent as part of the form
            // data and set to 'redirect' if this option is empty:
            redirectParamName: undefined,
            // Set the following option to the location of a postMessage window,
            // to enable postMessage transport uploads:
            postMessage: undefined,
            // By default, XHR file uploads are sent as multipart/form-data.
            // The iframe transport is always using multipart/form-data.
            // Set to false to enable non-multipart XHR uploads:
            multipart: true,
            // To upload large files in smaller chunks, set the following option
            // to a preferred maximum chunk size. If set to 0, null or undefined,
            // or the browser does not support the required Blob API, files will
            // be uploaded as a whole.
            maxChunkSize: undefined,
            // When a non-multipart upload or a chunked multipart upload has been
            // aborted, this option can be used to resume the upload by setting
            // it to the size of the already uploaded bytes. This option is most
            // useful when modifying the options object inside of the "add" or
            // "send" callbacks, as the options are cloned for each file upload.
            uploadedBytes: undefined,
            // By default, failed (abort or error) file uploads are removed from the
            // global progress calculation. Set the following option to false to
            // prevent recalculating the global progress data:
            recalculateProgress: true,
            // Interval in milliseconds to calculate and trigger progress events:
            progressInterval: 100,
            // Interval in milliseconds to calculate progress bitrate:
            bitrateInterval: 500,
            // By default, uploads are started automatically when adding files:
            autoUpload: true,

            // Error and info messages:
            messages: {
                uploadedBytes: 'Uploaded bytes exceed file size'
            },

            // Translation function, gets the message key to be translated
            // and an object with context specific data as arguments:
            i18n: function (message, context) {
                message = this.messages[message] || message.toString();
                if (context) {
                    $.each(context, function (key, value) {
                        message = message.replace('{' + key + '}', value);
                    });
                }
                return message;
            },

            // Additional form data to be sent along with the file uploads can be set
            // using this option, which accepts an array of objects with name and
            // value properties, a function returning such an array, a FormData
            // object (for XHR file uploads), or a simple object.
            // The form of the first fileInput is given as parameter to the function:
            formData: function (form) {
                return form.serializeArray();
            },

            // The add callback is invoked as soon as files are added to the fileupload
            // widget (via file input selection, drag & drop, paste or add API call).
            // If the singleFileUploads option is enabled, this callback will be
            // called once for each file in the selection for XHR file uploads, else
            // once for each file selection.
            //
            // The upload starts when the submit method is invoked on the data parameter.
            // The data object contains a files property holding the added files
            // and allows you to override plugin options as well as define ajax settings.
            //
            // Listeners for this callback can also be bound the following way:
            // .bind('fileuploadadd', func);
            //
            // data.submit() returns a Promise object and allows to attach additional
            // handlers using jQuery's Deferred callbacks:
            // data.submit().done(func).fail(func).always(func);
            add: function (e, data) {
                if (e.isDefaultPrevented()) {
                    return false;
                }
                if (data.autoUpload || (data.autoUpload !== false &&
                        $(this).fileupload('option', 'autoUpload'))) {
                    data.process().done(function () {
                        data.submit();
                    });
                }
            },

            // Other callbacks:

            // Callback for the submit event of each file upload:
            // submit: function (e, data) {}, // .bind('fileuploadsubmit', func);

            // Callback for the start of each file upload request:
            // send: function (e, data) {}, // .bind('fileuploadsend', func);

            // Callback for successful uploads:
            // done: function (e, data) {}, // .bind('fileuploaddone', func);

            // Callback for failed (abort or error) uploads:
            // fail: function (e, data) {}, // .bind('fileuploadfail', func);

            // Callback for completed (success, abort or error) requests:
            // always: function (e, data) {}, // .bind('fileuploadalways', func);

            // Callback for upload progress events:
            // progress: function (e, data) {}, // .bind('fileuploadprogress', func);

            // Callback for global upload progress events:
            // progressall: function (e, data) {}, // .bind('fileuploadprogressall', func);

            // Callback for uploads start, equivalent to the global ajaxStart event:
            // start: function (e) {}, // .bind('fileuploadstart', func);

            // Callback for uploads stop, equivalent to the global ajaxStop event:
            // stop: function (e) {}, // .bind('fileuploadstop', func);

            // Callback for change events of the fileInput(s):
            // change: function (e, data) {}, // .bind('fileuploadchange', func);

            // Callback for paste events to the pasteZone(s):
            // paste: function (e, data) {}, // .bind('fileuploadpaste', func);

            // Callback for drop events of the dropZone(s):
            // drop: function (e, data) {}, // .bind('fileuploaddrop', func);

            // Callback for dragover events of the dropZone(s):
            // dragover: function (e) {}, // .bind('fileuploaddragover', func);

            // Callback for the start of each chunk upload request:
            // chunksend: function (e, data) {}, // .bind('fileuploadchunksend', func);

            // Callback for successful chunk uploads:
            // chunkdone: function (e, data) {}, // .bind('fileuploadchunkdone', func);

            // Callback for failed (abort or error) chunk uploads:
            // chunkfail: function (e, data) {}, // .bind('fileuploadchunkfail', func);

            // Callback for completed (success, abort or error) chunk upload requests:
            // chunkalways: function (e, data) {}, // .bind('fileuploadchunkalways', func);

            // The plugin options are used as settings object for the ajax calls.
            // The following are jQuery ajax settings required for the file uploads:
            processData: false,
            contentType: false,
            cache: false
        },

        // A list of options that require reinitializing event listeners and/or
        // special initialization code:
        _specialOptions: [
            'fileInput',
            'dropZone',
            'pasteZone',
            'multipart',
            'forceIframeTransport'
        ],

        _blobSlice: $.support.blobSlice && function () {
            var slice = this.slice || this.webkitSlice || this.mozSlice;
            return slice.apply(this, arguments);
        },

        _BitrateTimer: function () {
            this.timestamp = ((Date.now) ? Date.now() : (new Date()).getTime());
            this.loaded = 0;
            this.bitrate = 0;
            this.getBitrate = function (now, loaded, interval) {
                var timeDiff = now - this.timestamp;
                if (!this.bitrate || !interval || timeDiff > interval) {
                    this.bitrate = (loaded - this.loaded) * (1000 / timeDiff) * 8;
                    this.loaded = loaded;
                    this.timestamp = now;
                }
                return this.bitrate;
            };
        },

        _isXHRUpload: function (options) {
            return !options.forceIframeTransport &&
                ((!options.multipart && $.support.xhrFileUpload) ||
                $.support.xhrFormDataFileUpload);
        },

        _getFormData: function (options) {
            var formData;
            if ($.type(options.formData) === 'function') {
                return options.formData(options.form);
            }
            if ($.isArray(options.formData)) {
                return options.formData;
            }
            if ($.type(options.formData) === 'object') {
                formData = [];
                $.each(options.formData, function (name, value) {
                    formData.push({name: name, value: value});
                });
                return formData;
            }
            return [];
        },

        _getTotal: function (files) {
            var total = 0;
            $.each(files, function (index, file) {
                total += file.size || 1;
            });
            return total;
        },

        _initProgressObject: function (obj) {
            var progress = {
                loaded: 0,
                total: 0,
                bitrate: 0
            };
            if (obj._progress) {
                $.extend(obj._progress, progress);
            } else {
                obj._progress = progress;
            }
        },

        _initResponseObject: function (obj) {
            var prop;
            if (obj._response) {
                for (prop in obj._response) {
                    if (obj._response.hasOwnProperty(prop)) {
                        delete obj._response[prop];
                    }
                }
            } else {
                obj._response = {};
            }
        },

        _onProgress: function (e, data) {
            if (e.lengthComputable) {
                var now = ((Date.now) ? Date.now() : (new Date()).getTime()),
                    loaded;
                if (data._time && data.progressInterval &&
                        (now - data._time < data.progressInterval) &&
                        e.loaded !== e.total) {
                    return;
                }
                data._time = now;
                loaded = Math.floor(
                    e.loaded / e.total * (data.chunkSize || data._progress.total)
                ) + (data.uploadedBytes || 0);
                // Add the difference from the previously loaded state
                // to the global loaded counter:
                this._progress.loaded += (loaded - data._progress.loaded);
                this._progress.bitrate = this._bitrateTimer.getBitrate(
                    now,
                    this._progress.loaded,
                    data.bitrateInterval
                );
                data._progress.loaded = data.loaded = loaded;
                data._progress.bitrate = data.bitrate = data._bitrateTimer.getBitrate(
                    now,
                    loaded,
                    data.bitrateInterval
                );
                // Trigger a custom progress event with a total data property set
                // to the file size(s) of the current upload and a loaded data
                // property calculated accordingly:
                this._trigger(
                    'progress',
                    $.Event('progress', {delegatedEvent: e}),
                    data
                );
                // Trigger a global progress event for all current file uploads,
                // including ajax calls queued for sequential file uploads:
                this._trigger(
                    'progressall',
                    $.Event('progressall', {delegatedEvent: e}),
                    this._progress
                );
            }
        },

        _initProgressListener: function (options) {
            var that = this,
                xhr = options.xhr ? options.xhr() : $.ajaxSettings.xhr();
            // Accesss to the native XHR object is required to add event listeners
            // for the upload progress event:
            if (xhr.upload) {
                $(xhr.upload).bind('progress', function (e) {
                    var oe = e.originalEvent;
                    // Make sure the progress event properties get copied over:
                    e.lengthComputable = oe.lengthComputable;
                    e.loaded = oe.loaded;
                    e.total = oe.total;
                    that._onProgress(e, options);
                });
                options.xhr = function () {
                    return xhr;
                };
            }
        },

        _isInstanceOf: function (type, obj) {
            // Cross-frame instanceof check
            return Object.prototype.toString.call(obj) === '[object ' + type + ']';
        },

        _initXHRData: function (options) {
            var that = this,
                formData,
                file = options.files[0],
                // Ignore non-multipart setting if not supported:
                multipart = options.multipart || !$.support.xhrFileUpload,
                paramName = $.type(options.paramName) === 'array' ?
                    options.paramName[0] : options.paramName;
            options.headers = $.extend({}, options.headers);
            if (options.contentRange) {
                options.headers['Content-Range'] = options.contentRange;
            }
            if (!multipart || options.blob || !this._isInstanceOf('File', file)) {
                options.headers['Content-Disposition'] = 'attachment; filename="' +
                    encodeURI(file.name) + '"';
            }
            if (!multipart) {
                options.contentType = file.type || 'application/octet-stream';
                options.data = options.blob || file;
            } else if ($.support.xhrFormDataFileUpload) {
                if (options.postMessage) {
                    // window.postMessage does not allow sending FormData
                    // objects, so we just add the File/Blob objects to
                    // the formData array and let the postMessage window
                    // create the FormData object out of this array:
                    formData = this._getFormData(options);
                    if (options.blob) {
                        formData.push({
                            name: paramName,
                            value: options.blob
                        });
                    } else {
                        $.each(options.files, function (index, file) {
                            formData.push({
                                name: ($.type(options.paramName) === 'array' &&
                                    options.paramName[index]) || paramName,
                                value: file
                            });
                        });
                    }
                } else {
                    if (that._isInstanceOf('FormData', options.formData)) {
                        formData = options.formData;
                    } else {
                        formData = new FormData();
                        $.each(this._getFormData(options), function (index, field) {
                            formData.append(field.name, field.value);
                        });
                    }
                    if (options.blob) {
                        formData.append(paramName, options.blob, file.name);
                    } else {
                        $.each(options.files, function (index, file) {
                            // This check allows the tests to run with
                            // dummy objects:
                            if (that._isInstanceOf('File', file) ||
                                    that._isInstanceOf('Blob', file)) {
                                formData.append(
                                    ($.type(options.paramName) === 'array' &&
                                        options.paramName[index]) || paramName,
                                    file,
                                    file.uploadName || file.name
                                );
                            }
                        });
                    }
                }
                options.data = formData;
            }
            // Blob reference is not needed anymore, free memory:
            options.blob = null;
        },

        _initIframeSettings: function (options) {
            var targetHost = $('<a></a>').prop('href', options.url).prop('host');
            // Setting the dataType to iframe enables the iframe transport:
            options.dataType = 'iframe ' + (options.dataType || '');
            // The iframe transport accepts a serialized array as form data:
            options.formData = this._getFormData(options);
            // Add redirect url to form data on cross-domain uploads:
            if (options.redirect && targetHost && targetHost !== location.host) {
                options.formData.push({
                    name: options.redirectParamName || 'redirect',
                    value: options.redirect
                });
            }
        },

        _initDataSettings: function (options) {
            if (this._isXHRUpload(options)) {
                if (!this._chunkedUpload(options, true)) {
                    if (!options.data) {
                        this._initXHRData(options);
                    }
                    this._initProgressListener(options);
                }
                if (options.postMessage) {
                    // Setting the dataType to postmessage enables the
                    // postMessage transport:
                    options.dataType = 'postmessage ' + (options.dataType || '');
                }
            } else {
                this._initIframeSettings(options);
            }
        },

        _getParamName: function (options) {
            var fileInput = $(options.fileInput),
                paramName = options.paramName;
            if (!paramName) {
                paramName = [];
                fileInput.each(function () {
                    var input = $(this),
                        name = input.prop('name') || 'files[]',
                        i = (input.prop('files') || [1]).length;
                    while (i) {
                        paramName.push(name);
                        i -= 1;
                    }
                });
                if (!paramName.length) {
                    paramName = [fileInput.prop('name') || 'files[]'];
                }
            } else if (!$.isArray(paramName)) {
                paramName = [paramName];
            }
            return paramName;
        },

        _initFormSettings: function (options) {
            // Retrieve missing options from the input field and the
            // associated form, if available:
            if (!options.form || !options.form.length) {
                options.form = $(options.fileInput.prop('form'));
                // If the given file input doesn't have an associated form,
                // use the default widget file input's form:
                if (!options.form.length) {
                    options.form = $(this.options.fileInput.prop('form'));
                }
            }
            options.paramName = this._getParamName(options);
            if (!options.url) {
                options.url = options.form.prop('action') || location.href;
            }
            // The HTTP request method must be "POST" or "PUT":
            options.type = (options.type ||
                ($.type(options.form.prop('method')) === 'string' &&
                    options.form.prop('method')) || ''
                ).toUpperCase();
            if (options.type !== 'POST' && options.type !== 'PUT' &&
                    options.type !== 'PATCH') {
                options.type = 'POST';
            }
            if (!options.formAcceptCharset) {
                options.formAcceptCharset = options.form.attr('accept-charset');
            }
        },

        _getAJAXSettings: function (data) {
            var options = $.extend({}, this.options, data);
            this._initFormSettings(options);
            this._initDataSettings(options);
            return options;
        },

        // jQuery 1.6 doesn't provide .state(),
        // while jQuery 1.8+ removed .isRejected() and .isResolved():
        _getDeferredState: function (deferred) {
            if (deferred.state) {
                return deferred.state();
            }
            if (deferred.isResolved()) {
                return 'resolved';
            }
            if (deferred.isRejected()) {
                return 'rejected';
            }
            return 'pending';
        },

        // Maps jqXHR callbacks to the equivalent
        // methods of the given Promise object:
        _enhancePromise: function (promise) {
            promise.success = promise.done;
            promise.error = promise.fail;
            promise.complete = promise.always;
            return promise;
        },

        // Creates and returns a Promise object enhanced with
        // the jqXHR methods abort, success, error and complete:
        _getXHRPromise: function (resolveOrReject, context, args) {
            var dfd = $.Deferred(),
                promise = dfd.promise();
            context = context || this.options.context || promise;
            if (resolveOrReject === true) {
                dfd.resolveWith(context, args);
            } else if (resolveOrReject === false) {
                dfd.rejectWith(context, args);
            }
            promise.abort = dfd.promise;
            return this._enhancePromise(promise);
        },

        // Adds convenience methods to the data callback argument:
        _addConvenienceMethods: function (e, data) {
            var that = this,
                getPromise = function (args) {
                    return $.Deferred().resolveWith(that, args).promise();
                };
            data.process = function (resolveFunc, rejectFunc) {
                if (resolveFunc || rejectFunc) {
                    data._processQueue = this._processQueue =
                        (this._processQueue || getPromise([this])).pipe(
                            function () {
                                if (data.errorThrown) {
                                    return $.Deferred()
                                        .rejectWith(that, [data]).promise();
                                }
                                return getPromise(arguments);
                            }
                        ).pipe(resolveFunc, rejectFunc);
                }
                return this._processQueue || getPromise([this]);
            };
            data.submit = function () {
                if (this.state() !== 'pending') {
                    data.jqXHR = this.jqXHR =
                        (that._trigger(
                            'submit',
                            $.Event('submit', {delegatedEvent: e}),
                            this
                        ) !== false) && that._onSend(e, this);
                }
                return this.jqXHR || that._getXHRPromise();
            };
            data.abort = function () {
                if (this.jqXHR) {
                    return this.jqXHR.abort();
                }
                this.errorThrown = 'abort';
                that._trigger('fail', null, this);
                return that._getXHRPromise(false);
            };
            data.state = function () {
                if (this.jqXHR) {
                    return that._getDeferredState(this.jqXHR);
                }
                if (this._processQueue) {
                    return that._getDeferredState(this._processQueue);
                }
            };
            data.processing = function () {
                return !this.jqXHR && this._processQueue && that
                    ._getDeferredState(this._processQueue) === 'pending';
            };
            data.progress = function () {
                return this._progress;
            };
            data.response = function () {
                return this._response;
            };
        },

        // Parses the Range header from the server response
        // and returns the uploaded bytes:
        _getUploadedBytes: function (jqXHR) {
            var range = jqXHR.getResponseHeader('Range'),
                parts = range && range.split('-'),
                upperBytesPos = parts && parts.length > 1 &&
                    parseInt(parts[1], 10);
            return upperBytesPos && upperBytesPos + 1;
        },

        // Uploads a file in multiple, sequential requests
        // by splitting the file up in multiple blob chunks.
        // If the second parameter is true, only tests if the file
        // should be uploaded in chunks, but does not invoke any
        // upload requests:
        _chunkedUpload: function (options, testOnly) {
            options.uploadedBytes = options.uploadedBytes || 0;
            var that = this,
                file = options.files[0],
                fs = file.size,
                ub = options.uploadedBytes,
                mcs = options.maxChunkSize || fs,
                slice = this._blobSlice,
                dfd = $.Deferred(),
                promise = dfd.promise(),
                jqXHR,
                upload;
            if (!(this._isXHRUpload(options) && slice && (ub || mcs < fs)) ||
                    options.data) {
                return false;
            }
            if (testOnly) {
                return true;
            }
            if (ub >= fs) {
                file.error = options.i18n('uploadedBytes');
                return this._getXHRPromise(
                    false,
                    options.context,
                    [null, 'error', file.error]
                );
            }
            // The chunk upload method:
            upload = function () {
                // Clone the options object for each chunk upload:
                var o = $.extend({}, options),
                    currentLoaded = o._progress.loaded;
                o.blob = slice.call(
                    file,
                    ub,
                    ub + mcs,
                    file.type
                );
                // Store the current chunk size, as the blob itself
                // will be dereferenced after data processing:
                o.chunkSize = o.blob.size;
                // Expose the chunk bytes position range:
                o.contentRange = 'bytes ' + ub + '-' +
                    (ub + o.chunkSize - 1) + '/' + fs;
                // Process the upload data (the blob and potential form data):
                that._initXHRData(o);
                // Add progress listeners for this chunk upload:
                that._initProgressListener(o);
                jqXHR = ((that._trigger('chunksend', null, o) !== false && $.ajax(o)) ||
                        that._getXHRPromise(false, o.context))
                    .done(function (result, textStatus, jqXHR) {
                        ub = that._getUploadedBytes(jqXHR) ||
                            (ub + o.chunkSize);
                        // Create a progress event if no final progress event
                        // with loaded equaling total has been triggered
                        // for this chunk:
                        if (currentLoaded + o.chunkSize - o._progress.loaded) {
                            that._onProgress($.Event('progress', {
                                lengthComputable: true,
                                loaded: ub - o.uploadedBytes,
                                total: ub - o.uploadedBytes
                            }), o);
                        }
                        options.uploadedBytes = o.uploadedBytes = ub;
                        o.result = result;
                        o.textStatus = textStatus;
                        o.jqXHR = jqXHR;
                        that._trigger('chunkdone', null, o);
                        that._trigger('chunkalways', null, o);
                        if (ub < fs) {
                            // File upload not yet complete,
                            // continue with the next chunk:
                            upload();
                        } else {
                            dfd.resolveWith(
                                o.context,
                                [result, textStatus, jqXHR]
                            );
                        }
                    })
                    .fail(function (jqXHR, textStatus, errorThrown) {
                        o.jqXHR = jqXHR;
                        o.textStatus = textStatus;
                        o.errorThrown = errorThrown;
                        that._trigger('chunkfail', null, o);
                        that._trigger('chunkalways', null, o);
                        dfd.rejectWith(
                            o.context,
                            [jqXHR, textStatus, errorThrown]
                        );
                    });
            };
            this._enhancePromise(promise);
            promise.abort = function () {
                return jqXHR.abort();
            };
            upload();
            return promise;
        },

        _beforeSend: function (e, data) {
            if (this._active === 0) {
                // the start callback is triggered when an upload starts
                // and no other uploads are currently running,
                // equivalent to the global ajaxStart event:
                this._trigger('start');
                // Set timer for global bitrate progress calculation:
                this._bitrateTimer = new this._BitrateTimer();
                // Reset the global progress values:
                this._progress.loaded = this._progress.total = 0;
                this._progress.bitrate = 0;
            }
            // Make sure the container objects for the .response() and
            // .progress() methods on the data object are available
            // and reset to their initial state:
            this._initResponseObject(data);
            this._initProgressObject(data);
            data._progress.loaded = data.loaded = data.uploadedBytes || 0;
            data._progress.total = data.total = this._getTotal(data.files) || 1;
            data._progress.bitrate = data.bitrate = 0;
            this._active += 1;
            // Initialize the global progress values:
            this._progress.loaded += data.loaded;
            this._progress.total += data.total;
        },

        _onDone: function (result, textStatus, jqXHR, options) {
            var total = options._progress.total,
                response = options._response;
            if (options._progress.loaded < total) {
                // Create a progress event if no final progress event
                // with loaded equaling total has been triggered:
                this._onProgress($.Event('progress', {
                    lengthComputable: true,
                    loaded: total,
                    total: total
                }), options);
            }
            response.result = options.result = result;
            response.textStatus = options.textStatus = textStatus;
            response.jqXHR = options.jqXHR = jqXHR;
            this._trigger('done', null, options);
        },

        _onFail: function (jqXHR, textStatus, errorThrown, options) {
            var response = options._response;
            if (options.recalculateProgress) {
                // Remove the failed (error or abort) file upload from
                // the global progress calculation:
                this._progress.loaded -= options._progress.loaded;
                this._progress.total -= options._progress.total;
            }
            response.jqXHR = options.jqXHR = jqXHR;
            response.textStatus = options.textStatus = textStatus;
            response.errorThrown = options.errorThrown = errorThrown;
            this._trigger('fail', null, options);
        },

        _onAlways: function (jqXHRorResult, textStatus, jqXHRorError, options) {
            // jqXHRorResult, textStatus and jqXHRorError are added to the
            // options object via done and fail callbacks
            this._trigger('always', null, options);
        },

        _onSend: function (e, data) {
            if (!data.submit) {
                this._addConvenienceMethods(e, data);
            }
            var that = this,
                jqXHR,
                aborted,
                slot,
                pipe,
                options = that._getAJAXSettings(data),
                send = function () {
                    that._sending += 1;
                    // Set timer for bitrate progress calculation:
                    options._bitrateTimer = new that._BitrateTimer();
                    jqXHR = jqXHR || (
                        ((aborted || that._trigger(
                            'send',
                            $.Event('send', {delegatedEvent: e}),
                            options
                        ) === false) &&
                        that._getXHRPromise(false, options.context, aborted)) ||
                        that._chunkedUpload(options) || $.ajax(options)
                    ).done(function (result, textStatus, jqXHR) {
                        that._onDone(result, textStatus, jqXHR, options);
                    }).fail(function (jqXHR, textStatus, errorThrown) {
                        that._onFail(jqXHR, textStatus, errorThrown, options);
                    }).always(function (jqXHRorResult, textStatus, jqXHRorError) {
                        that._onAlways(
                            jqXHRorResult,
                            textStatus,
                            jqXHRorError,
                            options
                        );
                        that._sending -= 1;
                        that._active -= 1;
                        if (options.limitConcurrentUploads &&
                                options.limitConcurrentUploads > that._sending) {
                            // Start the next queued upload,
                            // that has not been aborted:
                            var nextSlot = that._slots.shift();
                            while (nextSlot) {
                                if (that._getDeferredState(nextSlot) === 'pending') {
                                    nextSlot.resolve();
                                    break;
                                }
                                nextSlot = that._slots.shift();
                            }
                        }
                        if (that._active === 0) {
                            // The stop callback is triggered when all uploads have
                            // been completed, equivalent to the global ajaxStop event:
                            that._trigger('stop');
                        }
                    });
                    return jqXHR;
                };
            this._beforeSend(e, options);
            if (this.options.sequentialUploads ||
                    (this.options.limitConcurrentUploads &&
                    this.options.limitConcurrentUploads <= this._sending)) {
                if (this.options.limitConcurrentUploads > 1) {
                    slot = $.Deferred();
                    this._slots.push(slot);
                    pipe = slot.pipe(send);
                } else {
                    this._sequence = this._sequence.pipe(send, send);
                    pipe = this._sequence;
                }
                // Return the piped Promise object, enhanced with an abort method,
                // which is delegated to the jqXHR object of the current upload,
                // and jqXHR callbacks mapped to the equivalent Promise methods:
                pipe.abort = function () {
                    aborted = [undefined, 'abort', 'abort'];
                    if (!jqXHR) {
                        if (slot) {
                            slot.rejectWith(options.context, aborted);
                        }
                        return send();
                    }
                    return jqXHR.abort();
                };
                return this._enhancePromise(pipe);
            }
            return send();
        },

        _onAdd: function (e, data) {
            var that = this,
                result = true,
                options = $.extend({}, this.options, data),
                files = data.files,
                filesLength = files.length,
                limit = options.limitMultiFileUploads,
                limitSize = options.limitMultiFileUploadSize,
                overhead = options.limitMultiFileUploadSizeOverhead,
                batchSize = 0,
                paramName = this._getParamName(options),
                paramNameSet,
                paramNameSlice,
                fileSet,
                i,
                j = 0;
            if (limitSize && (!filesLength || files[0].size === undefined)) {
                limitSize = undefined;
            }
            if (!(options.singleFileUploads || limit || limitSize) ||
                    !this._isXHRUpload(options)) {
                fileSet = [files];
                paramNameSet = [paramName];
            } else if (!(options.singleFileUploads || limitSize) && limit) {
                fileSet = [];
                paramNameSet = [];
                for (i = 0; i < filesLength; i += limit) {
                    fileSet.push(files.slice(i, i + limit));
                    paramNameSlice = paramName.slice(i, i + limit);
                    if (!paramNameSlice.length) {
                        paramNameSlice = paramName;
                    }
                    paramNameSet.push(paramNameSlice);
                }
            } else if (!options.singleFileUploads && limitSize) {
                fileSet = [];
                paramNameSet = [];
                for (i = 0; i < filesLength; i = i + 1) {
                    batchSize += files[i].size + overhead;
                    if (i + 1 === filesLength ||
                            ((batchSize + files[i + 1].size + overhead) > limitSize) ||
                            (limit && i + 1 - j >= limit)) {
                        fileSet.push(files.slice(j, i + 1));
                        paramNameSlice = paramName.slice(j, i + 1);
                        if (!paramNameSlice.length) {
                            paramNameSlice = paramName;
                        }
                        paramNameSet.push(paramNameSlice);
                        j = i + 1;
                        batchSize = 0;
                    }
                }
            } else {
                paramNameSet = paramName;
            }
            data.originalFiles = files;
            $.each(fileSet || files, function (index, element) {
                var newData = $.extend({}, data);
                newData.files = fileSet ? element : [element];
                newData.paramName = paramNameSet[index];
                that._initResponseObject(newData);
                that._initProgressObject(newData);
                that._addConvenienceMethods(e, newData);
                result = that._trigger(
                    'add',
                    $.Event('add', {delegatedEvent: e}),
                    newData
                );
                return result;
            });
            return result;
        },

        _replaceFileInput: function (data) {
            var input = data.fileInput,
                inputClone = input.clone(true);
            // Add a reference for the new cloned file input to the data argument:
            data.fileInputClone = inputClone;
            $('<form></form>').append(inputClone)[0].reset();
            // Detaching allows to insert the fileInput on another form
            // without loosing the file input value:
            input.after(inputClone).detach();
            // Avoid memory leaks with the detached file input:
            $.cleanData(input.unbind('remove'));
            // Replace the original file input element in the fileInput
            // elements set with the clone, which has been copied including
            // event handlers:
            this.options.fileInput = this.options.fileInput.map(function (i, el) {
                if (el === input[0]) {
                    return inputClone[0];
                }
                return el;
            });
            // If the widget has been initialized on the file input itself,
            // override this.element with the file input clone:
            if (input[0] === this.element[0]) {
                this.element = inputClone;
            }
        },

        _handleFileTreeEntry: function (entry, path) {
            var that = this,
                dfd = $.Deferred(),
                errorHandler = function (e) {
                    if (e && !e.entry) {
                        e.entry = entry;
                    }
                    // Since $.when returns immediately if one
                    // Deferred is rejected, we use resolve instead.
                    // This allows valid files and invalid items
                    // to be returned together in one set:
                    dfd.resolve([e]);
                },
                successHandler = function (entries) {
                    that._handleFileTreeEntries(
                        entries,
                        path + entry.name + '/'
                    ).done(function (files) {
                        dfd.resolve(files);
                    }).fail(errorHandler);
                },
                readEntries = function () {
                    dirReader.readEntries(function (results) {
                        if (!results.length) {
                            successHandler(entries);
                        } else {
                            entries = entries.concat(results);
                            readEntries();
                        }
                    }, errorHandler);
                },
                dirReader, entries = [];
            path = path || '';
            if (entry.isFile) {
                if (entry._file) {
                    // Workaround for Chrome bug #149735
                    entry._file.relativePath = path;
                    dfd.resolve(entry._file);
                } else {
                    entry.file(function (file) {
                        file.relativePath = path;
                        dfd.resolve(file);
                    }, errorHandler);
                }
            } else if (entry.isDirectory) {
                dirReader = entry.createReader();
                readEntries();
            } else {
                // Return an empy list for file system items
                // other than files or directories:
                dfd.resolve([]);
            }
            return dfd.promise();
        },

        _handleFileTreeEntries: function (entries, path) {
            var that = this;
            return $.when.apply(
                $,
                $.map(entries, function (entry) {
                    return that._handleFileTreeEntry(entry, path);
                })
            ).pipe(function () {
                return Array.prototype.concat.apply(
                    [],
                    arguments
                );
            });
        },

        _getDroppedFiles: function (dataTransfer) {
            dataTransfer = dataTransfer || {};
            var items = dataTransfer.items;
            if (items && items.length && (items[0].webkitGetAsEntry ||
                    items[0].getAsEntry)) {
                return this._handleFileTreeEntries(
                    $.map(items, function (item) {
                        var entry;
                        if (item.webkitGetAsEntry) {
                            entry = item.webkitGetAsEntry();
                            if (entry) {
                                // Workaround for Chrome bug #149735:
                                entry._file = item.getAsFile();
                            }
                            return entry;
                        }
                        return item.getAsEntry();
                    })
                );
            }
            return $.Deferred().resolve(
                $.makeArray(dataTransfer.files)
            ).promise();
        },

        _getSingleFileInputFiles: function (fileInput) {
            fileInput = $(fileInput);
            var entries = fileInput.prop('webkitEntries') ||
                    fileInput.prop('entries'),
                files,
                value;
            if (entries && entries.length) {
                return this._handleFileTreeEntries(entries);
            }
            files = $.makeArray(fileInput.prop('files'));
            if (!files.length) {
                value = fileInput.prop('value');
                if (!value) {
                    return $.Deferred().resolve([]).promise();
                }
                // If the files property is not available, the browser does not
                // support the File API and we add a pseudo File object with
                // the input value as name with path information removed:
                files = [{name: value.replace(/^.*\\/, '')}];
            } else if (files[0].name === undefined && files[0].fileName) {
                // File normalization for Safari 4 and Firefox 3:
                $.each(files, function (index, file) {
                    file.name = file.fileName;
                    file.size = file.fileSize;
                });
            }
            return $.Deferred().resolve(files).promise();
        },

        _getFileInputFiles: function (fileInput) {
            if (!(fileInput instanceof $) || fileInput.length === 1) {
                return this._getSingleFileInputFiles(fileInput);
            }
            return $.when.apply(
                $,
                $.map(fileInput, this._getSingleFileInputFiles)
            ).pipe(function () {
                return Array.prototype.concat.apply(
                    [],
                    arguments
                );
            });
        },

        _onChange: function (e) {
            var that = this,
                data = {
                    fileInput: $(e.target),
                    form: $(e.target.form)
                };
            this._getFileInputFiles(data.fileInput).always(function (files) {
                data.files = files;
                if (that.options.replaceFileInput) {
                    that._replaceFileInput(data);
                }
                if (that._trigger(
                        'change',
                        $.Event('change', {delegatedEvent: e}),
                        data
                    ) !== false) {
                    that._onAdd(e, data);
                }
            });
        },

        _onPaste: function (e) {
            var items = e.originalEvent && e.originalEvent.clipboardData &&
                    e.originalEvent.clipboardData.items,
                data = {files: []};
            if (items && items.length) {
                $.each(items, function (index, item) {
                    var file = item.getAsFile && item.getAsFile();
                    if (file) {
                        data.files.push(file);
                    }
                });
                if (this._trigger(
                        'paste',
                        $.Event('paste', {delegatedEvent: e}),
                        data
                    ) !== false) {
                    this._onAdd(e, data);
                }
            }
        },

        _onDrop: function (e) {
            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;
            var that = this,
                dataTransfer = e.dataTransfer,
                data = {};
            if (dataTransfer && dataTransfer.files && dataTransfer.files.length) {
                e.preventDefault();
                this._getDroppedFiles(dataTransfer).always(function (files) {
                    data.files = files;
                    if (that._trigger(
                            'drop',
                            $.Event('drop', {delegatedEvent: e}),
                            data
                        ) !== false) {
                        that._onAdd(e, data);
                    }
                });
            }
        },

        _onDragOver: function (e) {
            e.dataTransfer = e.originalEvent && e.originalEvent.dataTransfer;
            var dataTransfer = e.dataTransfer;
            if (dataTransfer && $.inArray('Files', dataTransfer.types) !== -1 &&
                    this._trigger(
                        'dragover',
                        $.Event('dragover', {delegatedEvent: e})
                    ) !== false) {
                e.preventDefault();
                dataTransfer.dropEffect = 'copy';
            }
        },

        _initEventHandlers: function () {
            if (this._isXHRUpload(this.options)) {
                this._on(this.options.dropZone, {
                    dragover: this._onDragOver,
                    drop: this._onDrop
                });
                this._on(this.options.pasteZone, {
                    paste: this._onPaste
                });
            }
            if ($.support.fileInput) {
                this._on(this.options.fileInput, {
                    change: this._onChange
                });
            }
        },

        _destroyEventHandlers: function () {
            this._off(this.options.dropZone, 'dragover drop');
            this._off(this.options.pasteZone, 'paste');
            this._off(this.options.fileInput, 'change');
        },

        _setOption: function (key, value) {
            var reinit = $.inArray(key, this._specialOptions) !== -1;
            if (reinit) {
                this._destroyEventHandlers();
            }
            this._super(key, value);
            if (reinit) {
                this._initSpecialOptions();
                this._initEventHandlers();
            }
        },

        _initSpecialOptions: function () {
            var options = this.options;
            if (options.fileInput === undefined) {
                options.fileInput = this.element.is('input[type="file"]') ?
                        this.element : this.element.find('input[type="file"]');
            } else if (!(options.fileInput instanceof $)) {
                options.fileInput = $(options.fileInput);
            }
            if (!(options.dropZone instanceof $)) {
                options.dropZone = $(options.dropZone);
            }
            if (!(options.pasteZone instanceof $)) {
                options.pasteZone = $(options.pasteZone);
            }
        },

        _getRegExp: function (str) {
            var parts = str.split('/'),
                modifiers = parts.pop();
            parts.shift();
            return new RegExp(parts.join('/'), modifiers);
        },

        _isRegExpOption: function (key, value) {
            return key !== 'url' && $.type(value) === 'string' &&
                /^\/.*\/[igm]{0,3}$/.test(value);
        },

        _initDataAttributes: function () {
            var that = this,
                options = this.options,
                clone = $(this.element[0].cloneNode(false));
            // Initialize options set via HTML5 data-attributes:
            $.each(
                clone.data(),
                function (key, value) {
                    var dataAttributeName = 'data-' +
                        // Convert camelCase to hyphen-ated key:
                        key.replace(/([a-z])([A-Z])/g, '$1-$2').toLowerCase();
                    if (clone.attr(dataAttributeName)) {
                        if (that._isRegExpOption(key, value)) {
                            value = that._getRegExp(value);
                        }
                        options[key] = value;
                    }
                }
            );
        },

        _create: function () {
            this._initDataAttributes();
            this._initSpecialOptions();
            this._slots = [];
            this._sequence = this._getXHRPromise(true);
            this._sending = this._active = 0;
            this._initProgressObject(this);
            this._initEventHandlers();
        },

        // This method is exposed to the widget API and allows to query
        // the number of active uploads:
        active: function () {
            return this._active;
        },

        // This method is exposed to the widget API and allows to query
        // the widget upload progress.
        // It returns an object with loaded, total and bitrate properties
        // for the running uploads:
        progress: function () {
            return this._progress;
        },

        // This method is exposed to the widget API and allows adding files
        // using the fileupload API. The data parameter accepts an object which
        // must have a files property and can contain additional options:
        // .fileupload('add', {files: filesList});
        add: function (data) {
            var that = this;
            if (!data || this.options.disabled) {
                return;
            }
            if (data.fileInput && !data.files) {
                this._getFileInputFiles(data.fileInput).always(function (files) {
                    data.files = files;
                    that._onAdd(null, data);
                });
            } else {
                data.files = $.makeArray(data.files);
                this._onAdd(null, data);
            }
        },

        // This method is exposed to the widget API and allows sending files
        // using the fileupload API. The data parameter accepts an object which
        // must have a files or fileInput property and can contain additional options:
        // .fileupload('send', {files: filesList});
        // The method returns a Promise object for the file upload call.
        send: function (data) {
            if (data && !this.options.disabled) {
                if (data.fileInput && !data.files) {
                    var that = this,
                        dfd = $.Deferred(),
                        promise = dfd.promise(),
                        jqXHR,
                        aborted;
                    promise.abort = function () {
                        aborted = true;
                        if (jqXHR) {
                            return jqXHR.abort();
                        }
                        dfd.reject(null, 'abort', 'abort');
                        return promise;
                    };
                    this._getFileInputFiles(data.fileInput).always(
                        function (files) {
                            if (aborted) {
                                return;
                            }
                            if (!files.length) {
                                dfd.reject();
                                return;
                            }
                            data.files = files;
                            jqXHR = that._onSend(null, data);
                            jqXHR.then(
                                function (result, textStatus, jqXHR) {
                                    dfd.resolve(result, textStatus, jqXHR);
                                },
                                function (jqXHR, textStatus, errorThrown) {
                                    dfd.reject(jqXHR, textStatus, errorThrown);
                                }
                            );
                        }
                    );
                    return this._enhancePromise(promise);
                }
                data.files = $.makeArray(data.files);
                if (data.files.length) {
                    return this._onSend(null, data);
                }
            }
            return this._getXHRPromise(false, data && data.context);
        }

    });

}));

/*
 * jQuery File Upload Processing Plugin 1.3.0
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2012, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/* jshint nomen:false */
/* global define, window */

(function (factory) {
    
    if (typeof define === 'function' && define.amd) {
        // Register as an anonymous AMD module:
        define('jquery.fileupload-process',[
            'jquery',
            './jquery.fileupload'
        ], factory);
    } else {
        // Browser globals:
        factory(
            window.jQuery
        );
    }
}(function ($) {
    

    var originalAdd = $.blueimp.fileupload.prototype.options.add;

    // The File Upload Processing plugin extends the fileupload widget
    // with file processing functionality:
    $.widget('blueimp.fileupload', $.blueimp.fileupload, {

        options: {
            // The list of processing actions:
            processQueue: [
                /*
                {
                    action: 'log',
                    type: 'debug'
                }
                */
            ],
            add: function (e, data) {
                var $this = $(this);
                data.process(function () {
                    return $this.fileupload('process', data);
                });
                originalAdd.call(this, e, data);
            }
        },

        processActions: {
            /*
            log: function (data, options) {
                console[options.type](
                    'Processing "' + data.files[data.index].name + '"'
                );
            }
            */
        },

        _processFile: function (data, originalData) {
            var that = this,
                dfd = $.Deferred().resolveWith(that, [data]),
                chain = dfd.promise();
            this._trigger('process', null, data);
            $.each(data.processQueue, function (i, settings) {
                var func = function (data) {
                    if (originalData.errorThrown) {
                        return $.Deferred()
                                .rejectWith(that, [originalData]).promise();
                    }
                    return that.processActions[settings.action].call(
                        that,
                        data,
                        settings
                    );
                };
                chain = chain.pipe(func, settings.always && func);
            });
            chain
                .done(function () {
                    that._trigger('processdone', null, data);
                    that._trigger('processalways', null, data);
                })
                .fail(function () {
                    that._trigger('processfail', null, data);
                    that._trigger('processalways', null, data);
                });
            return chain;
        },

        // Replaces the settings of each processQueue item that
        // are strings starting with an "@", using the remaining
        // substring as key for the option map,
        // e.g. "@autoUpload" is replaced with options.autoUpload:
        _transformProcessQueue: function (options) {
            var processQueue = [];
            $.each(options.processQueue, function () {
                var settings = {},
                    action = this.action,
                    prefix = this.prefix === true ? action : this.prefix;
                $.each(this, function (key, value) {
                    if ($.type(value) === 'string' &&
                            value.charAt(0) === '@') {
                        settings[key] = options[
                            value.slice(1) || (prefix ? prefix +
                                key.charAt(0).toUpperCase() + key.slice(1) : key)
                        ];
                    } else {
                        settings[key] = value;
                    }

                });
                processQueue.push(settings);
            });
            options.processQueue = processQueue;
        },

        // Returns the number of files currently in the processsing queue:
        processing: function () {
            return this._processing;
        },

        // Processes the files given as files property of the data parameter,
        // returns a Promise object that allows to bind callbacks:
        process: function (data) {
            var that = this,
                options = $.extend({}, this.options, data);
            if (options.processQueue && options.processQueue.length) {
                this._transformProcessQueue(options);
                if (this._processing === 0) {
                    this._trigger('processstart');
                }
                $.each(data.files, function (index) {
                    var opts = index ? $.extend({}, options) : options,
                        func = function () {
                            if (data.errorThrown) {
                                return $.Deferred()
                                        .rejectWith(that, [data]).promise();
                            }
                            return that._processFile(opts, data);
                        };
                    opts.index = index;
                    that._processing += 1;
                    that._processingQueue = that._processingQueue.pipe(func, func)
                        .always(function () {
                            that._processing -= 1;
                            if (that._processing === 0) {
                                that._trigger('processstop');
                            }
                        });
                });
            }
            return this._processingQueue;
        },

        _create: function () {
            this._super();
            this._processing = 0;
            this._processingQueue = $.Deferred().resolveWith(this)
                .promise();
        }

    });

}));

/*
 * jQuery File Upload Validation Plugin 1.1.2
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2013, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */

/* global define, window */

(function (factory) {
    
    if (typeof define === 'function' && define.amd) {
        // Register as an anonymous AMD module:
        define('jquery.fileupload-validate',[
            'jquery',
            './jquery.fileupload-process'
        ], factory);
    } else {
        // Browser globals:
        factory(
            window.jQuery
        );
    }
}(function ($) {
    

    // Append to the default processQueue:
    $.blueimp.fileupload.prototype.options.processQueue.push(
        {
            action: 'validate',
            // Always trigger this action,
            // even if the previous action was rejected: 
            always: true,
            // Options taken from the global options map:
            acceptFileTypes: '@',
            maxFileSize: '@',
            minFileSize: '@',
            maxNumberOfFiles: '@',
            disabled: '@disableValidation'
        }
    );

    // The File Upload Validation plugin extends the fileupload widget
    // with file validation functionality:
    $.widget('blueimp.fileupload', $.blueimp.fileupload, {

        options: {
            /*
            // The regular expression for allowed file types, matches
            // against either file type or file name:
            acceptFileTypes: /(\.|\/)(gif|jpe?g|png)$/i,
            // The maximum allowed file size in bytes:
            maxFileSize: 10000000, // 10 MB
            // The minimum allowed file size in bytes:
            minFileSize: undefined, // No minimal file size
            // The limit of files to be uploaded:
            maxNumberOfFiles: 10,
            */

            // Function returning the current number of files,
            // has to be overriden for maxNumberOfFiles validation:
            getNumberOfFiles: $.noop,

            // Error and info messages:
            messages: {
                maxNumberOfFiles: 'Maximum number of files exceeded',
                acceptFileTypes: 'File type not allowed',
                maxFileSize: 'File is too large',
                minFileSize: 'File is too small'
            }
        },

        processActions: {

            validate: function (data, options) {
                if (options.disabled) {
                    return data;
                }
                var dfd = $.Deferred(),
                    settings = this.options,
                    file = data.files[data.index],
                    fileSize;
                if (options.minFileSize || options.maxFileSize) {
                    fileSize = file.size;
                }
                if ($.type(options.maxNumberOfFiles) === 'number' &&
                        (settings.getNumberOfFiles() || 0) + data.files.length >
                            options.maxNumberOfFiles) {
                    file.error = settings.i18n('maxNumberOfFiles');
                } else if (options.acceptFileTypes &&
                        !(options.acceptFileTypes.test(file.type) ||
                        options.acceptFileTypes.test(file.name))) {
                    file.error = settings.i18n('acceptFileTypes');
                } else if (fileSize > options.maxFileSize) {
                    file.error = settings.i18n('maxFileSize');
                } else if ($.type(fileSize) === 'number' &&
                        fileSize < options.minFileSize) {
                    file.error = settings.i18n('minFileSize');
                } else {
                    delete file.error;
                }
                if (file.error || data.files.error) {
                    data.files.error = true;
                    dfd.rejectWith(this, [data]);
                } else {
                    dfd.resolveWith(this, [data]);
                }
                return dfd.promise();
            }

        }

    });

}));

/*!
 * ASP.NET SignalR JavaScript Library v2.2.0
 * http://signalr.net/
 *
 * Copyright (C) Microsoft Corporation. All rights reserved.
 *
 */
(function(n,t,i){function w(t,i){var u,f;if(n.isArray(t)){for(u=t.length-1;u>=0;u--)f=t[u],n.type(f)==="string"&&r.transports[f]||(i.log("Invalid transport: "+f+", removing it from the transports list."),t.splice(u,1));t.length===0&&(i.log("No transports remain within the specified transport array."),t=null)}else if(r.transports[t]||t==="auto"){if(t==="auto"&&r._.ieVersion<=8)return["longPolling"]}else i.log("Invalid transport: "+t.toString()+"."),t=null;return t}function b(n){return n==="http:"?80:n==="https:"?443:void 0}function a(n,t){return t.match(/:\d+$/)?t:t+":"+b(n)}function k(t,i){var u=this,r=[];u.tryBuffer=function(i){return t.state===n.signalR.connectionState.connecting?(r.push(i),!0):!1};u.drain=function(){if(t.state===n.signalR.connectionState.connected)while(r.length>0)i(r.shift())};u.clear=function(){r=[]}}var f={nojQuery:"jQuery was not found. Please ensure jQuery is referenced before the SignalR client JavaScript file.",noTransportOnInit:"No transport could be initialized successfully. Try specifying a different transport or none at all for auto initialization.",errorOnNegotiate:"Error during negotiation request.",stoppedWhileLoading:"The connection was stopped during page load.",stoppedWhileNegotiating:"The connection was stopped during the negotiate request.",errorParsingNegotiateResponse:"Error parsing negotiate response.",errorDuringStartRequest:"Error during start request. Stopping the connection.",stoppedDuringStartRequest:"The connection was stopped during the start request.",errorParsingStartResponse:"Error parsing start response: '{0}'. Stopping the connection.",invalidStartResponse:"Invalid start response: '{0}'. Stopping the connection.",protocolIncompatible:"You are using a version of the client that isn't compatible with the server. Client version {0}, server version {1}.",sendFailed:"Send failed.",parseFailed:"Failed at parsing response: {0}",longPollFailed:"Long polling request failed.",eventSourceFailedToConnect:"EventSource failed to connect.",eventSourceError:"Error raised by EventSource",webSocketClosed:"WebSocket closed.",pingServerFailedInvalidResponse:"Invalid ping response when pinging server: '{0}'.",pingServerFailed:"Failed to ping server.",pingServerFailedStatusCode:"Failed to ping server.  Server responded with status code {0}, stopping the connection.",pingServerFailedParse:"Failed to parse ping server response, stopping the connection.",noConnectionTransport:"Connection is in an invalid state, there is no transport active.",webSocketsInvalidState:"The Web Socket transport is in an invalid state, transitioning into reconnecting.",reconnectTimeout:"Couldn't reconnect within the configured timeout of {0} ms, disconnecting.",reconnectWindowTimeout:"The client has been inactive since {0} and it has exceeded the inactivity timeout of {1} ms. Stopping the connection."};if(typeof n!="function")throw new Error(f.nojQuery);var r,h,s=t.document.readyState==="complete",e=n(t),c="__Negotiate Aborted__",u={onStart:"onStart",onStarting:"onStarting",onReceived:"onReceived",onError:"onError",onConnectionSlow:"onConnectionSlow",onReconnecting:"onReconnecting",onReconnect:"onReconnect",onStateChanged:"onStateChanged",onDisconnect:"onDisconnect"},v=function(n,i){if(i!==!1){var r;typeof t.console!="undefined"&&(r="["+(new Date).toTimeString()+"] SignalR: "+n,t.console.debug?t.console.debug(r):t.console.log&&t.console.log(r))}},o=function(t,i,r){return i===t.state?(t.state=r,n(t).triggerHandler(u.onStateChanged,[{oldState:i,newState:r}]),!0):!1},y=function(n){return n.state===r.connectionState.disconnected},l=function(n){return n._.keepAliveData.activated&&n.transport.supportsKeepAlive(n)},p=function(i){var f,e;i._.configuredStopReconnectingTimeout||(e=function(t){var i=r._.format(r.resources.reconnectTimeout,t.disconnectTimeout);t.log(i);n(t).triggerHandler(u.onError,[r._.error(i,"TimeoutException")]);t.stop(!1,!1)},i.reconnecting(function(){var n=this;n.state===r.connectionState.reconnecting&&(f=t.setTimeout(function(){e(n)},n.disconnectTimeout))}),i.stateChanged(function(n){n.oldState===r.connectionState.reconnecting&&t.clearTimeout(f)}),i._.configuredStopReconnectingTimeout=!0)};r=function(n,t,i){return new r.fn.init(n,t,i)};r._={defaultContentType:"application/x-www-form-urlencoded; charset=UTF-8",ieVersion:function(){var i,n;return t.navigator.appName==="Microsoft Internet Explorer"&&(n=/MSIE ([0-9]+\.[0-9]+)/.exec(t.navigator.userAgent),n&&(i=t.parseFloat(n[1]))),i}(),error:function(n,t,i){var r=new Error(n);return r.source=t,typeof i!="undefined"&&(r.context=i),r},transportError:function(n,t,r,u){var f=this.error(n,r,u);return f.transport=t?t.name:i,f},format:function(){for(var t=arguments[0],n=0;n<arguments.length-1;n++)t=t.replace("{"+n+"}",arguments[n+1]);return t},firefoxMajorVersion:function(n){var t=n.match(/Firefox\/(\d+)/);return!t||!t.length||t.length<2?0:parseInt(t[1],10)},configurePingInterval:function(i){var f=i._.config,e=function(t){n(i).triggerHandler(u.onError,[t])};f&&!i._.pingIntervalId&&f.pingInterval&&(i._.pingIntervalId=t.setInterval(function(){r.transports._logic.pingServer(i).fail(e)},f.pingInterval))}};r.events=u;r.resources=f;r.ajaxDefaults={processData:!0,timeout:null,async:!0,global:!1,cache:!1};r.changeState=o;r.isDisconnecting=y;r.connectionState={connecting:0,connected:1,reconnecting:2,disconnected:4};r.hub={start:function(){throw new Error("SignalR: Error loading hubs. Ensure your hubs reference is correct, e.g. <script src='/signalr/js'><\/script>.");}};e.load(function(){s=!0});r.fn=r.prototype={init:function(t,i,r){var f=n(this);this.url=t;this.qs=i;this.lastError=null;this._={keepAliveData:{},connectingMessageBuffer:new k(this,function(n){f.triggerHandler(u.onReceived,[n])}),lastMessageAt:(new Date).getTime(),lastActiveAt:(new Date).getTime(),beatInterval:5e3,beatHandle:null,totalTransportConnectTimeout:0};typeof r=="boolean"&&(this.logging=r)},_parseResponse:function(n){var t=this;return n?typeof n=="string"?t.json.parse(n):n:n},_originalJson:t.JSON,json:t.JSON,isCrossDomain:function(i,r){var u;return(i=n.trim(i),r=r||t.location,i.indexOf("http")!==0)?!1:(u=t.document.createElement("a"),u.href=i,u.protocol+a(u.protocol,u.host)!==r.protocol+a(r.protocol,r.host))},ajaxDataType:"text",contentType:"application/json; charset=UTF-8",logging:!1,state:r.connectionState.disconnected,clientProtocol:"1.5",reconnectDelay:2e3,transportConnectTimeout:0,disconnectTimeout:3e4,reconnectWindow:3e4,keepAliveWarnAt:2/3,start:function(i,h){var a=this,v={pingInterval:3e5,waitForPageLoad:!0,transport:"auto",jsonp:!1},d,y=a._deferral||n.Deferred(),b=t.document.createElement("a"),k,g;if(a.lastError=null,a._deferral=y,!a.json)throw new Error("SignalR: No JSON parser found. Please ensure json2.js is referenced before the SignalR.js file if you need to support clients without native JSON parsing support, e.g. IE<8.");if(n.type(i)==="function"?h=i:n.type(i)==="object"&&(n.extend(v,i),n.type(v.callback)==="function"&&(h=v.callback)),v.transport=w(v.transport,a),!v.transport)throw new Error("SignalR: Invalid transport(s) specified, aborting start.");return(a._.config=v,!s&&v.waitForPageLoad===!0)?(a._.deferredStartHandler=function(){a.start(i,h)},e.bind("load",a._.deferredStartHandler),y.promise()):a.state===r.connectionState.connecting?y.promise():o(a,r.connectionState.disconnected,r.connectionState.connecting)===!1?(y.resolve(a),y.promise()):(p(a),b.href=a.url,b.protocol&&b.protocol!==":"?(a.protocol=b.protocol,a.host=b.host):(a.protocol=t.document.location.protocol,a.host=b.host||t.document.location.host),a.baseUrl=a.protocol+"//"+a.host,a.wsProtocol=a.protocol==="https:"?"wss://":"ws://",v.transport==="auto"&&v.jsonp===!0&&(v.transport="longPolling"),a.url.indexOf("//")===0&&(a.url=t.location.protocol+a.url,a.log("Protocol relative URL detected, normalizing it to '"+a.url+"'.")),this.isCrossDomain(a.url)&&(a.log("Auto detected cross domain url."),v.transport==="auto"&&(v.transport=["webSockets","serverSentEvents","longPolling"]),typeof v.withCredentials=="undefined"&&(v.withCredentials=!0),v.jsonp||(v.jsonp=!n.support.cors,v.jsonp&&a.log("Using jsonp because this browser doesn't support CORS.")),a.contentType=r._.defaultContentType),a.withCredentials=v.withCredentials,a.ajaxDataType=v.jsonp?"jsonp":"text",n(a).bind(u.onStart,function(){n.type(h)==="function"&&h.call(a);y.resolve(a)}),a._.initHandler=r.transports._logic.initHandler(a),d=function(i,s){var c=r._.error(f.noTransportOnInit);if(s=s||0,s>=i.length){s===0?a.log("No transports supported by the server were selected."):s===1?a.log("No fallback transports were selected."):a.log("Fallback transports exhausted.");n(a).triggerHandler(u.onError,[c]);y.reject(c);a.stop();return}if(a.state!==r.connectionState.disconnected){var p=i[s],h=r.transports[p],v=function(){d(i,s+1)};a.transport=h;try{a._.initHandler.start(h,function(){var i=r._.firefoxMajorVersion(t.navigator.userAgent)>=11,f=!!a.withCredentials&&i;a.log("The start request succeeded. Transitioning to the connected state.");l(a)&&r.transports._logic.monitorKeepAlive(a);r.transports._logic.startHeartbeat(a);r._.configurePingInterval(a);o(a,r.connectionState.connecting,r.connectionState.connected)||a.log("WARNING! The connection was not in the connecting state.");a._.connectingMessageBuffer.drain();n(a).triggerHandler(u.onStart);e.bind("unload",function(){a.log("Window unloading, stopping the connection.");a.stop(f)});i&&e.bind("beforeunload",function(){t.setTimeout(function(){a.stop(f)},0)})},v)}catch(w){a.log(h.name+" transport threw '"+w.message+"' when attempting to start.");v()}}},k=a.url+"/negotiate",g=function(t,i){var e=r._.error(f.errorOnNegotiate,t,i._.negotiateRequest);n(i).triggerHandler(u.onError,e);y.reject(e);i.stop()},n(a).triggerHandler(u.onStarting),k=r.transports._logic.prepareQueryString(a,k),a.log("Negotiating with '"+k+"'."),a._.negotiateRequest=r.transports._logic.ajax(a,{url:k,error:function(n,t){t!==c?g(n,a):y.reject(r._.error(f.stoppedWhileNegotiating,null,a._.negotiateRequest))},success:function(t){var i,e,h,o=[],s=[];try{i=a._parseResponse(t)}catch(c){g(r._.error(f.errorParsingNegotiateResponse,c),a);return}if(e=a._.keepAliveData,a.appRelativeUrl=i.Url,a.id=i.ConnectionId,a.token=i.ConnectionToken,a.webSocketServerUrl=i.WebSocketServerUrl,a._.pollTimeout=i.ConnectionTimeout*1e3+1e4,a.disconnectTimeout=i.DisconnectTimeout*1e3,a._.totalTransportConnectTimeout=a.transportConnectTimeout+i.TransportConnectTimeout*1e3,i.KeepAliveTimeout?(e.activated=!0,e.timeout=i.KeepAliveTimeout*1e3,e.timeoutWarning=e.timeout*a.keepAliveWarnAt,a._.beatInterval=(e.timeout-e.timeoutWarning)/3):e.activated=!1,a.reconnectWindow=a.disconnectTimeout+(e.timeout||0),!i.ProtocolVersion||i.ProtocolVersion!==a.clientProtocol){h=r._.error(r._.format(f.protocolIncompatible,a.clientProtocol,i.ProtocolVersion));n(a).triggerHandler(u.onError,[h]);y.reject(h);return}n.each(r.transports,function(n){if(n.indexOf("_")===0||n==="webSockets"&&!i.TryWebSockets)return!0;s.push(n)});n.isArray(v.transport)?n.each(v.transport,function(t,i){n.inArray(i,s)>=0&&o.push(i)}):v.transport==="auto"?o=s:n.inArray(v.transport,s)>=0&&o.push(v.transport);d(o)}}),y.promise())},starting:function(t){var i=this;return n(i).bind(u.onStarting,function(){t.call(i)}),i},send:function(n){var t=this;if(t.state===r.connectionState.disconnected)throw new Error("SignalR: Connection must be started before data can be sent. Call .start() before .send()");if(t.state===r.connectionState.connecting)throw new Error("SignalR: Connection has not been fully initialized. Use .start().done() or .start().fail() to run logic after the connection has started.");return t.transport.send(t,n),t},received:function(t){var i=this;return n(i).bind(u.onReceived,function(n,r){t.call(i,r)}),i},stateChanged:function(t){var i=this;return n(i).bind(u.onStateChanged,function(n,r){t.call(i,r)}),i},error:function(t){var i=this;return n(i).bind(u.onError,function(n,r,u){i.lastError=r;t.call(i,r,u)}),i},disconnected:function(t){var i=this;return n(i).bind(u.onDisconnect,function(){t.call(i)}),i},connectionSlow:function(t){var i=this;return n(i).bind(u.onConnectionSlow,function(){t.call(i)}),i},reconnecting:function(t){var i=this;return n(i).bind(u.onReconnecting,function(){t.call(i)}),i},reconnected:function(t){var i=this;return n(i).bind(u.onReconnect,function(){t.call(i)}),i},stop:function(i,h){var a=this,v=a._deferral;if(a._.deferredStartHandler&&e.unbind("load",a._.deferredStartHandler),delete a._.config,delete a._.deferredStartHandler,!s&&(!a._.config||a._.config.waitForPageLoad===!0)){a.log("Stopping connection prior to negotiate.");v&&v.reject(r._.error(f.stoppedWhileLoading));return}if(a.state!==r.connectionState.disconnected)return a.log("Stopping connection."),o(a,a.state,r.connectionState.disconnected),t.clearTimeout(a._.beatHandle),t.clearInterval(a._.pingIntervalId),a.transport&&(a.transport.stop(a),h!==!1&&a.transport.abort(a,i),l(a)&&r.transports._logic.stopMonitoringKeepAlive(a),a.transport=null),a._.negotiateRequest&&(a._.negotiateRequest.abort(c),delete a._.negotiateRequest),a._.initHandler&&a._.initHandler.stop(),n(a).triggerHandler(u.onDisconnect),delete a._deferral,delete a.messageId,delete a.groupsToken,delete a.id,delete a._.pingIntervalId,delete a._.lastMessageAt,delete a._.lastActiveAt,a._.connectingMessageBuffer.clear(),a},log:function(n){v(n,this.logging)}};r.fn.init.prototype=r.fn;r.noConflict=function(){return n.connection===r&&(n.connection=h),r};n.connection&&(h=n.connection);n.connection=n.signalR=r})(window.jQuery,window),function(n,t,i){function s(n){n._.keepAliveData.monitoring&&l(n);u.markActive(n)&&(n._.beatHandle=t.setTimeout(function(){s(n)},n._.beatInterval))}function l(t){var i=t._.keepAliveData,u;t.state===r.connectionState.connected&&(u=(new Date).getTime()-t._.lastMessageAt,u>=i.timeout?(t.log("Keep alive timed out.  Notifying transport that connection has been lost."),t.transport.lostConnection(t)):u>=i.timeoutWarning?i.userNotified||(t.log("Keep alive has been missed, connection may be dead/slow."),n(t).triggerHandler(f.onConnectionSlow),i.userNotified=!0):i.userNotified=!1)}function e(n,t){var i=n.url+t;return n.transport&&(i+="?transport="+n.transport.name),u.prepareQueryString(n,i)}function h(n){this.connection=n;this.startRequested=!1;this.startCompleted=!1;this.connectionStopped=!1}var r=n.signalR,f=n.signalR.events,c=n.signalR.changeState,o="__Start Aborted__",u;r.transports={};h.prototype={start:function(n,r,u){var f=this,e=f.connection,o=!1;if(f.startRequested||f.connectionStopped){e.log("WARNING! "+n.name+" transport cannot be started. Initialization ongoing or completed.");return}e.log(n.name+" transport starting.");f.transportTimeoutHandle=t.setTimeout(function(){o||(o=!0,e.log(n.name+" transport timed out when trying to connect."),f.transportFailed(n,i,u))},e._.totalTransportConnectTimeout);n.start(e,function(){o||f.initReceived(n,r)},function(t){return o||(o=!0,f.transportFailed(n,t,u)),!f.startCompleted||f.connectionStopped})},stop:function(){this.connectionStopped=!0;t.clearTimeout(this.transportTimeoutHandle);r.transports._logic.tryAbortStartRequest(this.connection)},initReceived:function(n,i){var u=this,f=u.connection;if(u.startRequested){f.log("WARNING! The client received multiple init messages.");return}u.connectionStopped||(u.startRequested=!0,t.clearTimeout(u.transportTimeoutHandle),f.log(n.name+" transport connected. Initiating start request."),r.transports._logic.ajaxStart(f,function(){u.startCompleted=!0;i()}))},transportFailed:function(i,u,e){var o=this.connection,h=o._deferral,s;this.connectionStopped||(t.clearTimeout(this.transportTimeoutHandle),this.startRequested?this.startCompleted||(s=r._.error(r.resources.errorDuringStartRequest,u),o.log(i.name+" transport failed during the start request. Stopping the connection."),n(o).triggerHandler(f.onError,[s]),h&&h.reject(s),o.stop()):(i.stop(o),o.log(i.name+" transport failed to connect. Attempting to fall back."),e()))}};u=r.transports._logic={ajax:function(t,i){return n.ajax(n.extend(!0,{},n.signalR.ajaxDefaults,{type:"GET",data:{},xhrFields:{withCredentials:t.withCredentials},contentType:t.contentType,dataType:t.ajaxDataType},i))},pingServer:function(t){var e,f,i=n.Deferred();return t.transport?(e=t.url+"/ping",e=u.addQs(e,t.qs),f=u.ajax(t,{url:e,success:function(n){var u;try{u=t._parseResponse(n)}catch(e){i.reject(r._.transportError(r.resources.pingServerFailedParse,t.transport,e,f));t.stop();return}u.Response==="pong"?i.resolve():i.reject(r._.transportError(r._.format(r.resources.pingServerFailedInvalidResponse,n),t.transport,null,f))},error:function(n){n.status===401||n.status===403?(i.reject(r._.transportError(r._.format(r.resources.pingServerFailedStatusCode,n.status),t.transport,n,f)),t.stop()):i.reject(r._.transportError(r.resources.pingServerFailed,t.transport,n,f))}})):i.reject(r._.transportError(r.resources.noConnectionTransport,t.transport)),i.promise()},prepareQueryString:function(n,i){var r;return r=u.addQs(i,"clientProtocol="+n.clientProtocol),r=u.addQs(r,n.qs),n.token&&(r+="&connectionToken="+t.encodeURIComponent(n.token)),n.data&&(r+="&connectionData="+t.encodeURIComponent(n.data)),r},addQs:function(t,i){var r=t.indexOf("?")!==-1?"&":"?",u;if(!i)return t;if(typeof i=="object")return t+r+n.param(i);if(typeof i=="string")return u=i.charAt(0),(u==="?"||u==="&")&&(r=""),t+r+i;throw new Error("Query string property must be either a string or object.");},getUrl:function(n,i,r,f,e){var h=i==="webSockets"?"":n.baseUrl,o=h+n.appRelativeUrl,s="transport="+i;return!e&&n.groupsToken&&(s+="&groupsToken="+t.encodeURIComponent(n.groupsToken)),r?(o+=f?"/poll":"/reconnect",!e&&n.messageId&&(s+="&messageId="+t.encodeURIComponent(n.messageId))):o+="/connect",o+="?"+s,o=u.prepareQueryString(n,o),e||(o+="&tid="+Math.floor(Math.random()*11)),o},maximizePersistentResponse:function(n){return{MessageId:n.C,Messages:n.M,Initialized:typeof n.S!="undefined"?!0:!1,ShouldReconnect:typeof n.T!="undefined"?!0:!1,LongPollDelay:n.L,GroupsToken:n.G}},updateGroups:function(n,t){t&&(n.groupsToken=t)},stringifySend:function(n,t){return typeof t=="string"||typeof t=="undefined"||t===null?t:n.json.stringify(t)},ajaxSend:function(t,i){var h=u.stringifySend(t,i),c=e(t,"/send"),o,s=function(t,u){n(u).triggerHandler(f.onError,[r._.transportError(r.resources.sendFailed,u.transport,t,o),i])};return o=u.ajax(t,{url:c,type:t.ajaxDataType==="jsonp"?"GET":"POST",contentType:r._.defaultContentType,data:{data:h},success:function(n){var i;if(n){try{i=t._parseResponse(n)}catch(r){s(r,t);t.stop();return}u.triggerReceived(t,i)}},error:function(n,i){i!=="abort"&&i!=="parsererror"&&s(n,t)}})},ajaxAbort:function(n,t){if(typeof n.transport!="undefined"){t=typeof t=="undefined"?!0:t;var i=e(n,"/abort");u.ajax(n,{url:i,async:t,timeout:1e3,type:"POST"});n.log("Fired ajax abort async = "+t+".")}},ajaxStart:function(t,i){var h=function(n){var i=t._deferral;i&&i.reject(n)},s=function(i){t.log("The start request failed. Stopping the connection.");n(t).triggerHandler(f.onError,[i]);h(i);t.stop()};t._.startRequest=u.ajax(t,{url:e(t,"/start"),success:function(n,u,f){var e;try{e=t._parseResponse(n)}catch(o){s(r._.error(r._.format(r.resources.errorParsingStartResponse,n),o,f));return}e.Response==="started"?i():s(r._.error(r._.format(r.resources.invalidStartResponse,n),null,f))},error:function(n,i,u){i!==o?s(r._.error(r.resources.errorDuringStartRequest,u,n)):(t.log("The start request aborted because connection.stop() was called."),h(r._.error(r.resources.stoppedDuringStartRequest,null,n)))}})},tryAbortStartRequest:function(n){n._.startRequest&&(n._.startRequest.abort(o),delete n._.startRequest)},tryInitialize:function(n,t){n.Initialized&&t()},triggerReceived:function(t,i){t._.connectingMessageBuffer.tryBuffer(i)||n(t).triggerHandler(f.onReceived,[i])},processMessages:function(t,i,r){var f;u.markLastMessage(t);i&&(f=u.maximizePersistentResponse(i),u.updateGroups(t,f.GroupsToken),f.MessageId&&(t.messageId=f.MessageId),f.Messages&&(n.each(f.Messages,function(n,i){u.triggerReceived(t,i)}),u.tryInitialize(f,r)))},monitorKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring?t.log("Tried to monitor keep alive but it's already being monitored."):(i.monitoring=!0,u.markLastMessage(t),t._.keepAliveData.reconnectKeepAliveUpdate=function(){u.markLastMessage(t)},n(t).bind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t.log("Now monitoring keep alive with a warning timeout of "+i.timeoutWarning+", keep alive timeout of "+i.timeout+" and disconnecting timeout of "+t.disconnectTimeout))},stopMonitoringKeepAlive:function(t){var i=t._.keepAliveData;i.monitoring&&(i.monitoring=!1,n(t).unbind(f.onReconnect,t._.keepAliveData.reconnectKeepAliveUpdate),t._.keepAliveData={},t.log("Stopping the monitoring of the keep alive."))},startHeartbeat:function(n){n._.lastActiveAt=(new Date).getTime();s(n)},markLastMessage:function(n){n._.lastMessageAt=(new Date).getTime()},markActive:function(n){return u.verifyLastActive(n)?(n._.lastActiveAt=(new Date).getTime(),!0):!1},isConnectedOrReconnecting:function(n){return n.state===r.connectionState.connected||n.state===r.connectionState.reconnecting},ensureReconnectingState:function(t){return c(t,r.connectionState.connected,r.connectionState.reconnecting)===!0&&n(t).triggerHandler(f.onReconnecting),t.state===r.connectionState.reconnecting},clearReconnectTimeout:function(n){n&&n._.reconnectTimeout&&(t.clearTimeout(n._.reconnectTimeout),delete n._.reconnectTimeout)},verifyLastActive:function(t){if((new Date).getTime()-t._.lastActiveAt>=t.reconnectWindow){var i=r._.format(r.resources.reconnectWindowTimeout,new Date(t._.lastActiveAt),t.reconnectWindow);return t.log(i),n(t).triggerHandler(f.onError,[r._.error(i,"TimeoutException")]),t.stop(!1,!1),!1}return!0},reconnect:function(n,i){var f=r.transports[i];if(u.isConnectedOrReconnecting(n)&&!n._.reconnectTimeout){if(!u.verifyLastActive(n))return;n._.reconnectTimeout=t.setTimeout(function(){u.verifyLastActive(n)&&(f.stop(n),u.ensureReconnectingState(n)&&(n.log(i+" reconnecting."),f.start(n)))},n.reconnectDelay)}},handleParseFailure:function(t,i,u,e,o){var s=r._.transportError(r._.format(r.resources.parseFailed,i),t.transport,u,o);e&&e(s)?t.log("Failed to parse server response while attempting to connect."):(n(t).triggerHandler(f.onError,[s]),t.stop())},initHandler:function(n){return new h(n)},foreverFrame:{count:0,connections:{}}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,f=n.signalR.changeState,i=r.transports._logic;r.transports.webSockets={name:"webSockets",supportsKeepAlive:function(){return!0},send:function(t,f){var e=i.stringifySend(t,f);try{t.socket.send(e)}catch(o){n(t).triggerHandler(u.onError,[r._.transportError(r.resources.webSocketsInvalidState,t.transport,o,t.socket),f])}},start:function(e,o,s){var h,c=!1,l=this,a=!o,v=n(e);if(!t.WebSocket){s();return}e.socket||(h=e.webSocketServerUrl?e.webSocketServerUrl:e.wsProtocol+e.host,h+=i.getUrl(e,this.name,a),e.log("Connecting to websocket endpoint '"+h+"'."),e.socket=new t.WebSocket(h),e.socket.onopen=function(){c=!0;e.log("Websocket opened.");i.clearReconnectTimeout(e);f(e,r.connectionState.reconnecting,r.connectionState.connected)===!0&&v.triggerHandler(u.onReconnect)},e.socket.onclose=function(t){var i;this===e.socket&&(c&&typeof t.wasClean!="undefined"&&t.wasClean===!1?(i=r._.transportError(r.resources.webSocketClosed,e.transport,t),e.log("Unclean disconnect from websocket: "+(t.reason||"[no reason given]."))):e.log("Websocket closed."),s&&s(i)||(i&&n(e).triggerHandler(u.onError,[i]),l.reconnect(e)))},e.socket.onmessage=function(t){var r;try{r=e._parseResponse(t.data)}catch(u){i.handleParseFailure(e,t.data,u,s,t);return}r&&(n.isEmptyObject(r)||r.M?i.processMessages(e,r,o):i.triggerReceived(e,r))})},reconnect:function(n){i.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},stop:function(n){i.clearReconnectTimeout(n);n.socket&&(n.log("Closing the Websocket."),n.socket.close(),n.socket=null)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var i=n.signalR,u=n.signalR.events,e=n.signalR.changeState,r=i.transports._logic,f=function(n){t.clearTimeout(n._.reconnectAttemptTimeoutHandle);delete n._.reconnectAttemptTimeoutHandle};i.transports.serverSentEvents={name:"serverSentEvents",supportsKeepAlive:function(){return!0},timeOut:3e3,start:function(o,s,h){var c=this,l=!1,a=n(o),v=!s,y;if(o.eventSource&&(o.log("The connection already has an event source. Stopping it."),o.stop()),!t.EventSource){h&&(o.log("This browser doesn't support SSE."),h());return}y=r.getUrl(o,this.name,v);try{o.log("Attempting to connect to SSE endpoint '"+y+"'.");o.eventSource=new t.EventSource(y,{withCredentials:o.withCredentials})}catch(p){o.log("EventSource failed trying to connect with error "+p.Message+".");h?h():(a.triggerHandler(u.onError,[i._.transportError(i.resources.eventSourceFailedToConnect,o.transport,p)]),v&&c.reconnect(o));return}v&&(o._.reconnectAttemptTimeoutHandle=t.setTimeout(function(){l===!1&&o.eventSource.readyState!==t.EventSource.OPEN&&c.reconnect(o)},c.timeOut));o.eventSource.addEventListener("open",function(){o.log("EventSource connected.");f(o);r.clearReconnectTimeout(o);l===!1&&(l=!0,e(o,i.connectionState.reconnecting,i.connectionState.connected)===!0&&a.triggerHandler(u.onReconnect))},!1);o.eventSource.addEventListener("message",function(n){var t;if(n.data!=="initialized"){try{t=o._parseResponse(n.data)}catch(i){r.handleParseFailure(o,n.data,i,h,n);return}r.processMessages(o,t,s)}},!1);o.eventSource.addEventListener("error",function(n){var r=i._.transportError(i.resources.eventSourceError,o.transport,n);this===o.eventSource&&(h&&h(r)||(o.log("EventSource readyState: "+o.eventSource.readyState+"."),n.eventPhase===t.EventSource.CLOSED?(o.log("EventSource reconnecting due to the server connection ending."),c.reconnect(o)):(o.log("EventSource error."),a.triggerHandler(u.onError,[r]))))},!1)},reconnect:function(n){r.reconnect(n,this.name)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){r.ajaxSend(n,t)},stop:function(n){f(n);r.clearReconnectTimeout(n);n&&n.eventSource&&(n.log("EventSource calling close()."),n.eventSource.close(),n.eventSource=null,delete n.eventSource)},abort:function(n,t){r.ajaxAbort(n,t)}}}(window.jQuery,window),function(n,t){var r=n.signalR,e=n.signalR.events,o=n.signalR.changeState,i=r.transports._logic,u=function(){var n=t.document.createElement("iframe");return n.setAttribute("style","position:absolute;top:0;left:0;width:0;height:0;visibility:hidden;"),n},f=function(){var i=null,f=1e3,n=0;return{prevent:function(){r._.ieVersion<=8&&(n===0&&(i=t.setInterval(function(){var n=u();t.document.body.appendChild(n);t.document.body.removeChild(n);n=null},f)),n++)},cancel:function(){n===1&&t.clearInterval(i);n>0&&n--}}}();r.transports.foreverFrame={name:"foreverFrame",supportsKeepAlive:function(){return!0},iframeClearThreshold:50,start:function(n,r,e){var l=this,s=i.foreverFrame.count+=1,h,o=u(),c=function(){n.log("Forever frame iframe finished loading and is no longer receiving messages.");e&&e()||l.reconnect(n)};if(t.EventSource){e&&(n.log("Forever Frame is not supported by SignalR on browsers with SSE support."),e());return}o.setAttribute("data-signalr-connection-id",n.id);f.prevent();h=i.getUrl(n,this.name);h+="&frameId="+s;t.document.documentElement.appendChild(o);n.log("Binding to iframe's load event.");o.addEventListener?o.addEventListener("load",c,!1):o.attachEvent&&o.attachEvent("onload",c);o.src=h;i.foreverFrame.connections[s]=n;n.frame=o;n.frameId=s;r&&(n.onSuccess=function(){n.log("Iframe transport started.");r()})},reconnect:function(n){var r=this;i.isConnectedOrReconnecting(n)&&i.verifyLastActive(n)&&t.setTimeout(function(){if(i.verifyLastActive(n)&&n.frame&&i.ensureReconnectingState(n)){var u=n.frame,t=i.getUrl(n,r.name,!0)+"&frameId="+n.frameId;n.log("Updating iframe src to '"+t+"'.");u.src=t}},n.reconnectDelay)},lostConnection:function(n){this.reconnect(n)},send:function(n,t){i.ajaxSend(n,t)},receive:function(t,u){var f,e,o;if(t.json!==t._originalJson&&(u=t._originalJson.stringify(u)),o=t._parseResponse(u),i.processMessages(t,o,t.onSuccess),t.state===n.signalR.connectionState.connected&&(t.frameMessageCount=(t.frameMessageCount||0)+1,t.frameMessageCount>r.transports.foreverFrame.iframeClearThreshold&&(t.frameMessageCount=0,f=t.frame.contentWindow||t.frame.contentDocument,f&&f.document&&f.document.body)))for(e=f.document.body;e.firstChild;)e.removeChild(e.firstChild)},stop:function(n){var r=null;if(f.cancel(),n.frame){if(n.frame.stop)n.frame.stop();else try{r=n.frame.contentWindow||n.frame.contentDocument;r.document&&r.document.execCommand&&r.document.execCommand("Stop")}catch(u){n.log("Error occured when stopping foreverFrame transport. Message = "+u.message+".")}n.frame.parentNode===t.document.body&&t.document.body.removeChild(n.frame);delete i.foreverFrame.connections[n.frameId];n.frame=null;n.frameId=null;delete n.frame;delete n.frameId;delete n.onSuccess;delete n.frameMessageCount;n.log("Stopping forever frame.")}},abort:function(n,t){i.ajaxAbort(n,t)},getConnection:function(n){return i.foreverFrame.connections[n]},started:function(t){o(t,r.connectionState.reconnecting,r.connectionState.connected)===!0&&n(t).triggerHandler(e.onReconnect)}}}(window.jQuery,window),function(n,t){var r=n.signalR,u=n.signalR.events,e=n.signalR.changeState,f=n.signalR.isDisconnecting,i=r.transports._logic;r.transports.longPolling={name:"longPolling",supportsKeepAlive:function(){return!1},reconnectDelay:3e3,start:function(o,s,h){var a=this,v=function(){v=n.noop;o.log("LongPolling connected.");s()},y=function(n){return h(n)?(o.log("LongPolling failed to connect."),!0):!1},c=o._,l=0,p=function(i){t.clearTimeout(c.reconnectTimeoutId);c.reconnectTimeoutId=null;e(i,r.connectionState.reconnecting,r.connectionState.connected)===!0&&(i.log("Raising the reconnect event"),n(i).triggerHandler(u.onReconnect))},w=36e5;o.pollXhr&&(o.log("Polling xhr requests already exists, aborting."),o.stop());o.messageId=null;c.reconnectTimeoutId=null;c.pollTimeoutId=t.setTimeout(function(){(function e(s,h){var g=s.messageId,nt=g===null,k=!nt,tt=!h,d=i.getUrl(s,a.name,k,tt,!0),b={};(s.messageId&&(b.messageId=s.messageId),s.groupsToken&&(b.groupsToken=s.groupsToken),f(s)!==!0)&&(o.log("Opening long polling request to '"+d+"'."),s.pollXhr=i.ajax(o,{xhrFields:{onprogress:function(){i.markLastMessage(o)}},url:d,type:"POST",contentType:r._.defaultContentType,data:b,timeout:o._.pollTimeout,success:function(r){var h,w=0,u,a;o.log("Long poll complete.");l=0;try{h=o._parseResponse(r)}catch(b){i.handleParseFailure(s,r,b,y,s.pollXhr);return}(c.reconnectTimeoutId!==null&&p(s),h&&(u=i.maximizePersistentResponse(h)),i.processMessages(s,h,v),u&&n.type(u.LongPollDelay)==="number"&&(w=u.LongPollDelay),f(s)!==!0)&&(a=u&&u.ShouldReconnect,!a||i.ensureReconnectingState(s))&&(w>0?c.pollTimeoutId=t.setTimeout(function(){e(s,a)},w):e(s,a))},error:function(f,h){var v=r._.transportError(r.resources.longPollFailed,o.transport,f,s.pollXhr);if(t.clearTimeout(c.reconnectTimeoutId),c.reconnectTimeoutId=null,h==="abort"){o.log("Aborted xhr request.");return}if(!y(v)){if(l++,o.state!==r.connectionState.reconnecting&&(o.log("An error occurred using longPolling. Status = "+h+".  Response = "+f.responseText+"."),n(s).triggerHandler(u.onError,[v])),(o.state===r.connectionState.connected||o.state===r.connectionState.reconnecting)&&!i.verifyLastActive(o))return;if(!i.ensureReconnectingState(s))return;c.pollTimeoutId=t.setTimeout(function(){e(s,!0)},a.reconnectDelay)}}}),k&&h===!0&&(c.reconnectTimeoutId=t.setTimeout(function(){p(s)},Math.min(1e3*(Math.pow(2,l)-1),w))))})(o)},250)},lostConnection:function(n){n.pollXhr&&n.pollXhr.abort("lostConnection")},send:function(n,t){i.ajaxSend(n,t)},stop:function(n){t.clearTimeout(n._.pollTimeoutId);t.clearTimeout(n._.reconnectTimeoutId);delete n._.pollTimeoutId;delete n._.reconnectTimeoutId;n.pollXhr&&(n.pollXhr.abort(),n.pollXhr=null,delete n.pollXhr)},abort:function(n,t){i.ajaxAbort(n,t)}}}(window.jQuery,window),function(n){function r(n){return n+e}function s(n,t,i){for(var f=n.length,u=[],r=0;r<f;r+=1)n.hasOwnProperty(r)&&(u[r]=t.call(i,n[r],r,n));return u}function h(t){return n.isFunction(t)?null:n.type(t)==="undefined"?null:t}function u(n){for(var t in n)if(n.hasOwnProperty(t))return!0;return!1}function f(n,t){var i=n._.invocationCallbacks,r,f;u(i)&&n.log("Clearing hub invocation callbacks with error: "+t+".");n._.invocationCallbackId=0;delete n._.invocationCallbacks;n._.invocationCallbacks={};for(f in i)r=i[f],r.method.call(r.scope,{E:t})}function i(n,t){return new i.fn.init(n,t)}function t(i,r){var u={qs:null,logging:!1,useDefaultPath:!0};return n.extend(u,r),(!i||u.useDefaultPath)&&(i=(i||"")+"/signalr"),new t.fn.init(i,u)}var e=".hubProxy",o=n.signalR;i.fn=i.prototype={init:function(n,t){this.state={};this.connection=n;this.hubName=t;this._={callbackMap:{}}},constructor:i,hasSubscriptions:function(){return u(this._.callbackMap)},on:function(t,i){var u=this,f=u._.callbackMap;return t=t.toLowerCase(),f[t]||(f[t]={}),f[t][i]=function(n,t){i.apply(u,t)},n(u).bind(r(t),f[t][i]),u},off:function(t,i){var e=this,o=e._.callbackMap,f;return t=t.toLowerCase(),f=o[t],f&&(f[i]?(n(e).unbind(r(t),f[i]),delete f[i],u(f)||delete o[t]):i||(n(e).unbind(r(t)),delete o[t])),e},invoke:function(t){var i=this,r=i.connection,e=n.makeArray(arguments).slice(1),c=s(e,h),f={H:i.hubName,M:t,A:c,I:r._.invocationCallbackId},u=n.Deferred(),l=function(f){var e=i._maximizeHubResponse(f),h,s;n.extend(i.state,e.State);e.Progress?u.notifyWith?u.notifyWith(i,[e.Progress.Data]):r._.progressjQueryVersionLogged||(r.log("A hub method invocation progress update was received but the version of jQuery in use ("+n.prototype.jquery+") does not support progress updates. Upgrade to jQuery 1.7+ to receive progress notifications."),r._.progressjQueryVersionLogged=!0):e.Error?(e.StackTrace&&r.log(e.Error+"\n"+e.StackTrace+"."),h=e.IsHubException?"HubException":"Exception",s=o._.error(e.Error,h),s.data=e.ErrorData,r.log(i.hubName+"."+t+" failed to execute. Error: "+s.message),u.rejectWith(i,[s])):(r.log("Invoked "+i.hubName+"."+t),u.resolveWith(i,[e.Result]))};return r._.invocationCallbacks[r._.invocationCallbackId.toString()]={scope:i,method:l},r._.invocationCallbackId+=1,n.isEmptyObject(i.state)||(f.S=i.state),r.log("Invoking "+i.hubName+"."+t),r.send(f),u.promise()},_maximizeHubResponse:function(n){return{State:n.S,Result:n.R,Progress:n.P?{Id:n.P.I,Data:n.P.D}:null,Id:n.I,IsHubException:n.H,Error:n.E,StackTrace:n.T,ErrorData:n.D}}};i.fn.init.prototype=i.fn;t.fn=t.prototype=n.connection();t.fn.init=function(t,i){var e={qs:null,logging:!1,useDefaultPath:!0},u=this;n.extend(e,i);n.signalR.fn.init.call(u,t,e.qs,e.logging);u.proxies={};u._.invocationCallbackId=0;u._.invocationCallbacks={};u.received(function(t){var f,o,e,i,s,h;t&&(typeof t.P!="undefined"?(e=t.P.I.toString(),i=u._.invocationCallbacks[e],i&&i.method.call(i.scope,t)):typeof t.I!="undefined"?(e=t.I.toString(),i=u._.invocationCallbacks[e],i&&(u._.invocationCallbacks[e]=null,delete u._.invocationCallbacks[e],i.method.call(i.scope,t))):(f=this._maximizeClientHubInvocation(t),u.log("Triggering client hub event '"+f.Method+"' on hub '"+f.Hub+"'."),s=f.Hub.toLowerCase(),h=f.Method.toLowerCase(),o=this.proxies[s],n.extend(o.state,f.State),n(o).triggerHandler(r(h),[f.Args])))});u.error(function(n,t){var i,r;t&&(i=t.I,r=u._.invocationCallbacks[i],r&&(u._.invocationCallbacks[i]=null,delete u._.invocationCallbacks[i],r.method.call(r.scope,{E:n})))});u.reconnecting(function(){u.transport&&u.transport.name==="webSockets"&&f(u,"Connection started reconnecting before invocation result was received.")});u.disconnected(function(){f(u,"Connection was disconnected before invocation result was received.")})};t.fn._maximizeClientHubInvocation=function(n){return{Hub:n.H,Method:n.M,Args:n.A,State:n.S}};t.fn._registerSubscribedHubs=function(){var t=this;t._subscribedToHubs||(t._subscribedToHubs=!0,t.starting(function(){var i=[];n.each(t.proxies,function(n){this.hasSubscriptions()&&(i.push({name:n}),t.log("Client subscribed to hub '"+n+"'."))});i.length===0&&t.log("No hubs have been subscribed to.  The client will not receive data from hubs.  To fix, declare at least one client side function prior to connection start for each hub you wish to subscribe to.");t.data=t.json.stringify(i)}))};t.fn.createHubProxy=function(n){n=n.toLowerCase();var t=this.proxies[n];return t||(t=i(this,n),this.proxies[n]=t),this._registerSubscribedHubs(),t};t.fn.init.prototype=t.fn;n.hubConnection=t}(window.jQuery,window),function(n){n.signalR.version="2.2.0"}(window.jQuery);
define("jquery.signalR", function(){});

/*!
 * jQuery UI Touch Punch 0.2.3
 *
 * Copyright 2011–2014, Dave Furfero
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * Depends:
 *  jquery.ui.widget.js
 *  jquery.ui.mouse.js
 */

(function( factory ) {
    if ( typeof define === "function" && define.amd ) {

        // AMD. Register as an anonymous module.
        define('jquery.ui.touch-punch',[ "jquery" ], factory );
    } else {

        // Browser globals
        factory( jQuery );
    }
}(function( $ ) {


  // Detect touch support
  $.support.touch = 'ontouchend' in document;

  // Ignore browsers without touch support
  if (!$.support.touch) {
    return;
  }

  var mouseProto = $.ui.mouse.prototype,
      _mouseInit = mouseProto._mouseInit,
      _mouseDestroy = mouseProto._mouseDestroy,
      touchHandled;

  /**
   * Simulate a mouse event based on a corresponding touch event
   * @param {Object} event A touch event
   * @param {String} simulatedType The corresponding mouse event
   */
  function simulateMouseEvent (event, simulatedType) {

    // Ignore multi-touch events
    if (event.originalEvent.touches.length > 1) {
      return;
    }

    event.preventDefault();

    var touch = event.originalEvent.changedTouches[0],
        simulatedEvent = document.createEvent('MouseEvents');
    
    // Initialize the simulated mouse event using the touch event's coordinates
    simulatedEvent.initMouseEvent(
      simulatedType,    // type
      true,             // bubbles                    
      true,             // cancelable                 
      window,           // view                       
      1,                // detail                     
      touch.screenX,    // screenX                    
      touch.screenY,    // screenY                    
      touch.clientX,    // clientX                    
      touch.clientY,    // clientY                    
      false,            // ctrlKey                    
      false,            // altKey                     
      false,            // shiftKey                   
      false,            // metaKey                    
      0,                // button                     
      null              // relatedTarget              
    );

    // Dispatch the simulated event to the target element
    event.target.dispatchEvent(simulatedEvent);
  }

  /**
   * Handle the jQuery UI widget's touchstart events
   * @param {Object} event The widget element's touchstart event
   */
  mouseProto._touchStart = function (event) {

    var self = this;

    // Ignore the event if another widget is already being handled
    if (touchHandled || !self._mouseCapture(event.originalEvent.changedTouches[0])) {
      return;
    }

    // Set the flag to prevent other widgets from inheriting the touch event
    touchHandled = true;

    // Track movement to determine if interaction was a click
    self._touchMoved = false;

    // Simulate the mouseover event
    simulateMouseEvent(event, 'mouseover');

    // Simulate the mousemove event
    simulateMouseEvent(event, 'mousemove');

    // Simulate the mousedown event
    simulateMouseEvent(event, 'mousedown');
  };

  /**
   * Handle the jQuery UI widget's touchmove events
   * @param {Object} event The document's touchmove event
   */
  mouseProto._touchMove = function (event) {

    // Ignore event if not handled
    if (!touchHandled) {
      return;
    }

    // Interaction was not a click
    this._touchMoved = true;

    // Simulate the mousemove event
    simulateMouseEvent(event, 'mousemove');
  };

  /**
   * Handle the jQuery UI widget's touchend events
   * @param {Object} event The document's touchend event
   */
  mouseProto._touchEnd = function (event) {

    // Ignore event if not handled
    if (!touchHandled) {
      return;
    }

    // Simulate the mouseup event
    simulateMouseEvent(event, 'mouseup');

    // Simulate the mouseout event
    simulateMouseEvent(event, 'mouseout');

    // If the touch interaction did not move, it should trigger a click
    if (!this._touchMoved) {

      // Simulate the click event
      simulateMouseEvent(event, 'click');
    }

    // Unset the flag to allow other widgets to inherit the touch event
    touchHandled = false;
  };

  /**
   * A duck punch of the $.ui.mouse _mouseInit method to support touch events.
   * This method extends the widget with bound touch event handlers that
   * translate touch events to mouse events and pass them to the widget's
   * original mouse event handling methods.
   */
  mouseProto._mouseInit = function () {
    
    var self = this;

    // Delegate the touch handlers to the widget's element
    self.element.bind({
      touchstart: $.proxy(self, '_touchStart'),
      touchmove: $.proxy(self, '_touchMove'),
      touchend: $.proxy(self, '_touchEnd')
    });

    // Call the original $.ui.mouse init method
    _mouseInit.call(self);
  };

  /**
   * Remove the touch event handlers
   */
  mouseProto._mouseDestroy = function () {
    
    var self = this;

    // Delegate the touch handlers to the widget's element
    self.element.unbind({
      touchstart: $.proxy(self, '_touchStart'),
      touchmove: $.proxy(self, '_touchMove'),
      touchend: $.proxy(self, '_touchEnd')
    });

    // Call the original $.ui.mouse destroy method
    _mouseDestroy.call(self);
  };

}));
/*
 * Slim v3.3.0 - Image Cropping Made Easy
 * Copyright (c) 2016 Rik Schennink - http://slimimagecropper.com
 */
window.Slim=function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t){return v[t?t.toLowerCase():t]||"unknown"}function i(t,e){if(!(e>=1)){for(var i,n=X(t),o=t.width,a=t.height,r=Math.ceil(t.width*e),s=Math.ceil(t.height*e);o>r&&(o*=.5,a*=.5,!(o<r));)n=b("canvas"),n.width=o,n.height=a,i=n.getContext("2d"),i.drawImage(t,0,0,o,a);t.width=r,t.height=s,i=t.getContext("2d"),i.drawImage(n,0,0,r,s)}}!function(){function t(t,e){e=e||{bubbles:!1,cancelable:!1,detail:void 0};var i=document.createEvent("CustomEvent");return i.initCustomEvent(t,e.bubbles,e.cancelable,e.detail),i}t.prototype=window.CustomEvent.prototype,window.CustomEvent=t}();var n=function(t,e,i){var o,a,r=document.createElement("img");if(r.onerror=e,r.onload=function(){!a||i&&i.noRevoke||n.revokeObjectURL(a),e&&e(n.scale(r,i))},n.isInstanceOf("Blob",t)||n.isInstanceOf("File",t))o=a=n.createObjectURL(t),r._type=t.type;else{if("string"!=typeof t)return!1;o=t,i&&i.crossOrigin&&(r.crossOrigin=i.crossOrigin)}return o?(r.src=o,r):n.readFile(t,function(t){var i=t.target;i&&i.result?r.src=i.result:e&&e(t)})},o=window.createObjectURL&&window||window.URL&&URL.revokeObjectURL&&URL||window.webkitURL&&webkitURL;n.isInstanceOf=function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},n.transformCoordinates=function(){},n.getTransformedOptions=function(t,e){var i,n,o,a,r=e.aspectRatio;if(!r)return e;i={};for(n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);return i.crop=!0,o=t.naturalWidth||t.width,a=t.naturalHeight||t.height,o/a>r?(i.maxWidth=a*r,i.maxHeight=a):(i.maxWidth=o,i.maxHeight=o/r),i},n.renderImageToCanvas=function(t,e,i,n,o,a,r,s,h,u){return t.getContext("2d").drawImage(e,i,n,o,a,r,s,h,u),t},n.hasCanvasOption=function(t){return t.canvas||t.crop||!!t.aspectRatio},n.scale=function(t,e){function i(){var t=Math.max((s||w)/w,(h||b)/b);t>1&&(w*=t,b*=t)}function o(){var t=Math.min((a||w)/w,(r||b)/b);t<1&&(w*=t,b*=t)}e=e||{};var a,r,s,h,u,l,c,p,d,f,m,_=document.createElement("canvas"),g=t.getContext||n.hasCanvasOption(e)&&_.getContext,v=t.naturalWidth||t.width,y=t.naturalHeight||t.height,w=v,b=y;if(g&&(e=n.getTransformedOptions(t,e),c=e.left||0,p=e.top||0,e.sourceWidth?(u=e.sourceWidth,void 0!==e.right&&void 0===e.left&&(c=v-u-e.right)):u=v-c-(e.right||0),e.sourceHeight?(l=e.sourceHeight,void 0!==e.bottom&&void 0===e.top&&(p=y-l-e.bottom)):l=y-p-(e.bottom||0),w=u,b=l),a=e.maxWidth,r=e.maxHeight,s=e.minWidth,h=e.minHeight,g&&a&&r&&e.crop?(w=a,b=r,m=u/l-a/r,m<0?(l=r*u/a,void 0===e.top&&void 0===e.bottom&&(p=(y-l)/2)):m>0&&(u=a*l/r,void 0===e.left&&void 0===e.right&&(c=(v-u)/2))):((e.contain||e.cover)&&(s=a=a||s,h=r=r||h),e.cover?(o(),i()):(i(),o())),g){if(d=e.pixelRatio,d>1&&(_.style.width=w+"px",_.style.height=b+"px",w*=d,b*=d,_.getContext("2d").scale(d,d)),f=e.downsamplingRatio,f>0&&f<1&&w<u&&b<l)for(;u*f>w;)_.width=u*f,_.height=l*f,n.renderImageToCanvas(_,t,c,p,u,l,0,0,_.width,_.height),u=_.width,l=_.height,t=document.createElement("canvas"),t.width=u,t.height=l,n.renderImageToCanvas(t,_,0,0,u,l,0,0,u,l);return _.width=w,_.height=b,n.transformCoordinates(_,e),n.renderImageToCanvas(_,t,c,p,u,l,0,0,w,b)}return t.width=w,t.height=b,t},n.createObjectURL=function(t){return!!o&&o.createObjectURL(t)},n.revokeObjectURL=function(t){return!!o&&o.revokeObjectURL(t)},n.readFile=function(t,e,i){if(window.FileReader){var n=new FileReader;if(n.onload=n.onerror=e,i=i||"readAsDataURL",n[i])return n[i](t),n}return!1};var a=n.hasCanvasOption,r=n.transformCoordinates,s=n.getTransformedOptions;n.hasCanvasOption=function(t){return!!t.orientation||a.call(n,t)},n.transformCoordinates=function(t,e){r.call(n,t,e);var i=t.getContext("2d"),o=t.width,a=t.height,s=t.style.width,h=t.style.height,u=e.orientation;if(u&&!(u>8))switch(u>4&&(t.width=a,t.height=o,t.style.width=h,t.style.height=s),u){case 2:i.translate(o,0),i.scale(-1,1);break;case 3:i.translate(o,a),i.rotate(Math.PI);break;case 4:i.translate(0,a),i.scale(1,-1);break;case 5:i.rotate(.5*Math.PI),i.scale(1,-1);break;case 6:i.rotate(.5*Math.PI),i.translate(0,-a);break;case 7:i.rotate(.5*Math.PI),i.translate(o,-a),i.scale(-1,1);break;case 8:i.rotate(-.5*Math.PI),i.translate(-o,0)}},n.getTransformedOptions=function(t,e){var i,o,a=s.call(n,t,e),r=a.orientation;if(!r||r>8||1===r)return a;i={};for(o in a)a.hasOwnProperty(o)&&(i[o]=a[o]);switch(a.orientation){case 2:i.left=a.right,i.right=a.left;break;case 3:i.left=a.right,i.top=a.bottom,i.right=a.left,i.bottom=a.top;break;case 4:i.top=a.bottom,i.bottom=a.top;break;case 5:i.left=a.top,i.top=a.left,i.right=a.bottom,i.bottom=a.right;break;case 6:i.left=a.top,i.top=a.right,i.right=a.bottom,i.bottom=a.left;break;case 7:i.left=a.bottom,i.top=a.right,i.right=a.top,i.bottom=a.left;break;case 8:i.left=a.bottom,i.top=a.left,i.right=a.top,i.bottom=a.right}return a.orientation>4&&(i.maxWidth=a.maxHeight,i.maxHeight=a.maxWidth,i.minWidth=a.minHeight,i.minHeight=a.minWidth,i.sourceWidth=a.sourceHeight,i.sourceHeight=a.sourceWidth),i};var h=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice);n.blobSlice=h&&function(){var t=this.slice||this.webkitSlice||this.mozSlice;return t.apply(this,arguments)},n.metaDataParsers={jpeg:{65505:[]}},n.parseMetaData=function(t,e,i){i=i||{};var o=this,a=i.maxMetaDataSize||262144,r={},s=!(window.DataView&&t&&t.size>=12&&"image/jpeg"===t.type&&n.blobSlice);!s&&n.readFile(n.blobSlice.call(t,0,a),function(t){if(t.target.error)return void e(r);var a,s,h,u,l=t.target.result,c=new DataView(l),p=2,d=c.byteLength-4,f=p;if(65496===c.getUint16(0)){for(;p<d&&(a=c.getUint16(p),a>=65504&&a<=65519||65534===a)&&(s=c.getUint16(p+2)+2,!(p+s>c.byteLength));){if(h=n.metaDataParsers.jpeg[a])for(u=0;u<h.length;u+=1)h[u].call(o,c,p,s,r,i);p+=s,f=p}!i.disableImageHead&&f>6&&(l.slice?r.imageHead=l.slice(0,f):r.imageHead=new Uint8Array(l).subarray(0,f))}e(r)},"readAsArrayBuffer")||e(r)},n.ExifMap=function(){return this},n.ExifMap.prototype.map={Orientation:274},n.ExifMap.prototype.get=function(t){return this[t]||this[this.map[t]]},n.getExifThumbnail=function(t,e,i){var n,o,a;if(i&&!(e+i>t.byteLength)){for(n=[],o=0;o<i;o+=1)a=t.getUint8(e+o),n.push((a<16?"0":"")+a.toString(16));return"data:image/jpeg,%"+n.join("%")}},n.exifTagTypes={1:{getValue:function(t,e){return t.getUint8(e)},size:1},2:{getValue:function(t,e){return String.fromCharCode(t.getUint8(e))},size:1,ascii:!0},3:{getValue:function(t,e,i){return t.getUint16(e,i)},size:2},4:{getValue:function(t,e,i){return t.getUint32(e,i)},size:4},5:{getValue:function(t,e,i){return t.getUint32(e,i)/t.getUint32(e+4,i)},size:8},9:{getValue:function(t,e,i){return t.getInt32(e,i)},size:4},10:{getValue:function(t,e,i){return t.getInt32(e,i)/t.getInt32(e+4,i)},size:8}},n.exifTagTypes[7]=n.exifTagTypes[1],n.getExifValue=function(t,e,i,o,a,r){var s,h,u,l,c,p,d=n.exifTagTypes[o];if(d&&(s=d.size*a,h=s>4?e+t.getUint32(i+8,r):i+8,!(h+s>t.byteLength))){if(1===a)return d.getValue(t,h,r);for(u=[],l=0;l<a;l+=1)u[l]=d.getValue(t,h+l*d.size,r);if(d.ascii){for(c="",l=0;l<u.length&&(p=u[l],"\0"!==p);l+=1)c+=p;return c}return u}},n.parseExifTag=function(t,e,i,o,a){var r=t.getUint16(i,o);a.exif[r]=n.getExifValue(t,e,i,t.getUint16(i+2,o),t.getUint32(i+4,o),o)},n.parseExifTags=function(t,e,i,n,o){var a,r,s;if(!(i+6>t.byteLength||(a=t.getUint16(i,n),r=i+2+12*a,r+4>t.byteLength))){for(s=0;s<a;s+=1)this.parseExifTag(t,e,i+2+12*s,n,o);return t.getUint32(r,n)}},n.parseExifData=function(t,e,i,o,a){if(!a.disableExif){var r,s,h,u=e+10;if(1165519206===t.getUint32(e+4)&&!(u+8>t.byteLength)&&0===t.getUint16(e+8)){switch(t.getUint16(u)){case 18761:r=!0;break;case 19789:r=!1;break;default:return}42===t.getUint16(u+2,r)&&(s=t.getUint32(u+4,r),o.exif=new n.ExifMap,s=n.parseExifTags(t,u,u+s,r,o),s&&!a.disableExifThumbnail&&(h={exif:{}},s=n.parseExifTags(t,u,u+s,r,h),h.exif[513]&&(o.exif.Thumbnail=n.getExifThumbnail(t,u+h.exif[513],h.exif[514]))),o.exif[34665]&&!a.disableExifSub&&n.parseExifTags(t,u,u+o.exif[34665],r,o),o.exif[34853]&&!a.disableExifGps&&n.parseExifTags(t,u,u+o.exif[34853],r,o))}}},n.metaDataParsers.jpeg[65505].push(n.parseExifData);var u=function(){var t=[],e=[],i=[],n="transform",o=window.getComputedStyle(document.documentElement,""),a=(Array.prototype.slice.call(o).join("").match(/-(moz|webkit|ms)-/)||""===o.OLink&&["","o"])[1];"webkit"===a&&(n="webkitTransform");var r=function(t,e,i){var n=t;if(void 0!==n.length){for(var o={chainers:[],then:function(t){return this.snabbt(t)},snabbt:function(t){var e=this.chainers.length;return this.chainers.forEach(function(i,n){i.snabbt(s(t,n,e))}),o},setValue:function(t){return this.chainers.forEach(function(e){e.setValue(t)}),o},finish:function(){return this.chainers.forEach(function(t){t.finish()}),o},rollback:function(){return this.chainers.forEach(function(t){t.rollback()}),o}},a=0,r=n.length;a<r;++a)"string"==typeof e?o.chainers.push(h(n[a],e,s(i,a,r))):o.chainers.push(h(n[a],s(e,a,r),i));return o}return"string"==typeof e?h(n,e,s(i,0,1)):h(n,s(e,0,1),i)},s=function(t,e,i){if(!t)return t;var n=G(t);V(t.delay)&&(n.delay=t.delay(e,i)),V(t.callback)&&(n.complete=function(){t.callback.call(this,e,i)});var o=V(t.allDone),a=V(t.complete);(a||o)&&(n.complete=function(){a&&t.complete.call(this,e,i),o&&e==i-1&&t.allDone()}),V(t.valueFeeder)&&(n.valueFeeder=function(n,o){return t.valueFeeder(n,o,e,i)}),V(t.easing)&&(n.easing=function(n){return t.easing(n,e,i)});var r=["position","rotation","skew","rotationPost","scale","width","height","opacity","fromPosition","fromRotation","fromSkew","fromRotationPost","fromScale","fromWidth","fromHeight","fromOpacity","transformOrigin","duration","delay"];return r.forEach(function(o){V(t[o])&&(n[o]=t[o](e,i))}),n},h=function(t,i,n){function o(i){if(g.tick(i),g.updateElement(t),!g.isStopped())return g.completed()?void(a.loop>1&&!g.isStopped()?(a.loop-=1,g.restart(),v(o)):(a.complete&&a.complete.call(t),y.length&&(a=y.pop(),h=m(a,c,!0),c=m(a,G(c)),a=_(h,c,a),g=w(a),e.push([t,g]),g.tick(i),v(o)))):v(o)}if("attention"===i)return u(t,n);if("stop"===i)return l(t);var a=i;p();var r=f(t),h=r;h=m(a,h,!0);var c=G(r);c=m(a,c);var d=_(h,c,a),g=w(d);e.push([t,g]),g.updateElement(t,!0);var y=[],b={snabbt:function(t){return y.unshift(s(t,0,1)),b},then:function(t){return this.snabbt(t)}};return v(o),a.manual?g:b},u=function(t,i){function n(e){a.tick(e),a.updateElement(t),a.completed()?(i.callback&&i.callback(t),i.loop&&i.loop>1&&(i.loop--,a.restart(),v(n))):v(n)}var o=m(i,U({}));i.movement=o;var a=b(i);e.push([t,a]),v(n)},l=function(t){for(var i=0,n=e.length;i<n;++i){var o=e[i],a=o[0],r=o[1];a===t&&r.stop()}},c=function(t,e){for(var i=0,n=t.length;i<n;++i){var o=t[i],a=o[0],r=o[1];if(a===e){var s=r.getCurrentState();return r.stop(),s}}},p=function(){i=i.filter(function(t){return d(t[0]).body})},d=function(t){for(var e=t;e.parentNode;)e=e.parentNode;return e},f=function(t){var n=c(e,t);return n?n:c(i,t)},m=function(t,e,i){e||(e=U({position:[0,0,0],rotation:[0,0,0],rotationPost:[0,0,0],scale:[1,1],skew:[0,0]}));var n="position",o="rotation",a="skew",r="rotationPost",s="scale",h="scalePost",u="width",l="height",c="opacity";return i&&(n="fromPosition",o="fromRotation",a="fromSkew",r="fromRotationPost",s="fromScale",h="fromScalePost",u="fromWidth",l="fromHeight",c="fromOpacity"),e.position=B(t[n],e.position),e.rotation=B(t[o],e.rotation),e.rotationPost=B(t[r],e.rotationPost),e.skew=B(t[a],e.skew),e.scale=B(t[s],e.scale),e.scalePost=B(t[h],e.scalePost),e.opacity=t[c],e.width=t[u],e.height=t[l],e},_=function(t,e,i){return i.startState=t,i.endState=e,i},g=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.msRequestAnimationFrame||function(t){return setTimeout(t,1e3/60)},v=function(e){0===t.length&&g(y),t.push(e)},y=function(n){for(var o=t.length,a=0;a<o;++a)t[a](n);t.splice(0,o);var r=e.filter(function(t){return t[1].completed()});i=i.filter(function(t){for(var e=0,i=r.length;e<i;++e)if(t[0]===r[e][0])return!1;return!0}),i=i.concat(r),e=e.filter(function(t){return!t[1].completed()}),0!==t.length&&g(y)},w=function(t){var e=t.startState,i=t.endState,n=B(t.duration,500),o=B(t.delay,0),a=t.perspective,r=I(B(t.easing,"linear"),t),s=0===n?i.clone():e.clone();t.transformOrigin;s.transformOrigin=t.transformOrigin;var h,u,l=0,c=0,p=!1,d=!1,f=t.manual,m=0,_=o/n;return u=t.valueFeeder?W(t.valueFeeder,e,i,s):H(e,i,s),{stop:function(){p=!0},isStopped:function(){return p},finish:function(t){f=!1;var e=n*m;l=c-e,h=t,r.resetFrom=m},rollback:function(t){f=!1,u.setReverse();var e=n*(1-m);l=c-e,h=t,r.resetFrom=m},restart:function(){l=void 0,r.resetFrom(0)},tick:function(t){if(!p){if(f)return c=t,void this.updateCurrentTransform();if(l||(l=t),t-l>o){d=!0,c=t-o;var e=Math.min(Math.max(0,c-l),n);r.tick(e/n),this.updateCurrentTransform(),this.completed()&&h&&h()}}},getCurrentState:function(){return s},setValue:function(t){d=!0,m=Math.min(Math.max(t,1e-4),1+_)},updateCurrentTransform:function(){var t=r.getValue();if(f){var e=Math.max(1e-5,m-_);r.tick(e),t=r.getValue()}u.tween(t)},completed:function(){return!!p||0!==l&&r.completed()},updateElement:function(t,e){if(d||e){var i=u.asMatrix(),n=u.getProperties();j(t,i,a),q(t,n)}}}},b=function(t){var e=t.movement;t.initialVelocity=.1,t.equilibriumPosition=0;var i=S(t),n=!1,o=e.position,a=e.rotation,r=e.rotationPost,s=e.scale,h=e.skew,u=U({position:o?[0,0,0]:void 0,rotation:a?[0,0,0]:void 0,rotationPost:r?[0,0,0]:void 0,scale:s?[0,0]:void 0,skew:h?[0,0]:void 0});return{stop:function(){n=!0},isStopped:function(t){return n},tick:function(t){n||i.equilibrium||(i.tick(),this.updateMovement())},updateMovement:function(){var t=i.getValue();o&&(u.position[0]=e.position[0]*t,u.position[1]=e.position[1]*t,u.position[2]=e.position[2]*t),a&&(u.rotation[0]=e.rotation[0]*t,u.rotation[1]=e.rotation[1]*t,u.rotation[2]=e.rotation[2]*t),r&&(u.rotationPost[0]=e.rotationPost[0]*t,u.rotationPost[1]=e.rotationPost[1]*t,u.rotationPost[2]=e.rotationPost[2]*t),s&&(u.scale[0]=1+e.scale[0]*t,u.scale[1]=1+e.scale[1]*t),h&&(u.skew[0]=e.skew[0]*t,u.skew[1]=e.skew[1]*t)},updateElement:function(t){j(t,u.asMatrix()),q(t,u.getProperties())},getCurrentState:function(){return u},completed:function(){return i.equilibrium||n},restart:function(){i=S(t)}}},k=function(t){return t},x=function(t){return(Math.cos(t*Math.PI+Math.PI)+1)/2},E=function(t){return t*t},C=function(t){return-Math.pow(t-1,2)+1},S=function(t){var e=B(t.startPosition,0),i=B(t.equilibriumPosition,1),n=B(t.initialVelocity,0),o=B(t.springConstant,.8),a=B(t.springDeceleration,.9),r=B(t.springMass,10),s=!1;return{tick:function(t){if(0!==t&&!s){var h=-(e-i)*o,u=h/r;n+=u,e+=n,n*=a,Math.abs(e-i)<.001&&Math.abs(n)<.001&&(s=!0)}},resetFrom:function(t){e=t,n=0},getValue:function(){return s?i:e},completed:function(){return s}}},P={linear:k,ease:x,easeIn:E,easeOut:C},I=function(t,e){if("spring"==t)return S(e);var i=t;V(t)||(i=P[t]);var n,o=i,a=0;return{tick:function(t){a=o(t),n=t},resetFrom:function(t){n=0},getValue:function(){return a},completed:function(){return n>=1&&n}}},T=function(t,e,i,n){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=e,t[13]=i,t[14]=n,t[15]=1},O=function(t,e){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=Math.cos(e),t[6]=-Math.sin(e),t[7]=0,t[8]=0,t[9]=Math.sin(e),t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},M=function(t,e){t[0]=Math.cos(e),t[1]=0,t[2]=Math.sin(e),t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=-Math.sin(e),t[9]=0,t[10]=Math.cos(e),t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},L=function(t,e){t[0]=Math.cos(e),t[1]=-Math.sin(e),t[2]=0,t[3]=0,t[4]=Math.sin(e),t[5]=Math.cos(e),t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},R=function(t,e,i){t[0]=1,t[1]=Math.tan(e),t[2]=0,t[3]=0,t[4]=Math.tan(i),t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},D=function(t,e,i){t[0]=e,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=i,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},A=function(t){t[0]=1,t[1]=0,t[2]=0,t[3]=0,t[4]=0,t[5]=1,t[6]=0,t[7]=0,t[8]=0,t[9]=0,t[10]=1,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1},N=function(t,e){e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],e[9]=t[9],e[10]=t[10],e[11]=t[11],e[12]=t[12],e[13]=t[13],e[14]=t[14],e[15]=t[15]},z=function(){var t=new Float32Array(16),e=new Float32Array(16),i=new Float32Array(16);return A(t),{data:t,asCSS:function(){for(var e="matrix3d(",i=0;i<15;++i)e+=Math.abs(t[i])<1e-4?"0,":t[i].toFixed(10)+",";return e+=Math.abs(t[15])<1e-4?"0)":t[15].toFixed(10)+")"},clear:function(){A(t)},translate:function(n,o,a){return N(t,e),T(i,n,o,a),F(e,i,t),this},rotateX:function(n){return N(t,e),O(i,n),F(e,i,t),this},rotateY:function(n){return N(t,e),M(i,n),F(e,i,t),this},rotateZ:function(n){return N(t,e),L(i,n),F(e,i,t),this},scale:function(n,o){return N(t,e),D(i,n,o),F(e,i,t),this},skew:function(n,o){return N(t,e),R(i,n,o),F(e,i,t),this}}},F=function(t,e,i){return i[0]=t[0]*e[0]+t[1]*e[4]+t[2]*e[8]+t[3]*e[12],i[1]=t[0]*e[1]+t[1]*e[5]+t[2]*e[9]+t[3]*e[13],i[2]=t[0]*e[2]+t[1]*e[6]+t[2]*e[10]+t[3]*e[14],i[3]=t[0]*e[3]+t[1]*e[7]+t[2]*e[11]+t[3]*e[15],i[4]=t[4]*e[0]+t[5]*e[4]+t[6]*e[8]+t[7]*e[12],i[5]=t[4]*e[1]+t[5]*e[5]+t[6]*e[9]+t[7]*e[13],i[6]=t[4]*e[2]+t[5]*e[6]+t[6]*e[10]+t[7]*e[14],i[7]=t[4]*e[3]+t[5]*e[7]+t[6]*e[11]+t[7]*e[15],i[8]=t[8]*e[0]+t[9]*e[4]+t[10]*e[8]+t[11]*e[12],i[9]=t[8]*e[1]+t[9]*e[5]+t[10]*e[9]+t[11]*e[13],i[10]=t[8]*e[2]+t[9]*e[6]+t[10]*e[10]+t[11]*e[14],i[11]=t[8]*e[3]+t[9]*e[7]+t[10]*e[11]+t[11]*e[15],i[12]=t[12]*e[0]+t[13]*e[4]+t[14]*e[8]+t[15]*e[12],i[13]=t[12]*e[1]+t[13]*e[5]+t[14]*e[9]+t[15]*e[13],i[14]=t[12]*e[2]+t[13]*e[6]+t[14]*e[10]+t[15]*e[14],i[15]=t[12]*e[3]+t[13]*e[7]+t[14]*e[11]+t[15]*e[15],i},U=function(t){var e=z(),i={opacity:void 0,width:void 0,height:void 0};return{position:t.position,rotation:t.rotation,rotationPost:t.rotationPost,skew:t.skew,scale:t.scale,scalePost:t.scalePost,opacity:t.opacity,width:t.width,height:t.height,clone:function(){return U({position:this.position?this.position.slice(0):void 0,rotation:this.rotation?this.rotation.slice(0):void 0,rotationPost:this.rotationPost?this.rotationPost.slice(0):void 0,skew:this.skew?this.skew.slice(0):void 0,scale:this.scale?this.scale.slice(0):void 0,scalePost:this.scalePost?this.scalePost.slice(0):void 0,height:this.height,width:this.width,opacity:this.opacity})},asMatrix:function(){var t=e;return t.clear(),this.transformOrigin&&t.translate(-this.transformOrigin[0],-this.transformOrigin[1],-this.transformOrigin[2]),this.scale&&t.scale(this.scale[0],this.scale[1]),this.skew&&t.skew(this.skew[0],this.skew[1]),this.rotation&&(t.rotateX(this.rotation[0]),t.rotateY(this.rotation[1]),t.rotateZ(this.rotation[2])),this.position&&t.translate(this.position[0],this.position[1],this.position[2]),this.rotationPost&&(t.rotateX(this.rotationPost[0]),t.rotateY(this.rotationPost[1]),t.rotateZ(this.rotationPost[2])),this.scalePost&&t.scale(this.scalePost[0],this.scalePost[1]),this.transformOrigin&&t.translate(this.transformOrigin[0],this.transformOrigin[1],this.transformOrigin[2]),t},getProperties:function(){return i.opacity=this.opacity,i.width=this.width+"px",i.height=this.height+"px",i}}},H=function(t,e,i){var n=t,o=e,a=i,r=void 0!==o.position,s=void 0!==o.rotation,h=void 0!==o.rotationPost,u=void 0!==o.scale,l=void 0!==o.skew,c=void 0!==o.width,p=void 0!==o.height,d=void 0!==o.opacity;return{tween:function(t){if(r){var e=o.position[0]-n.position[0],i=o.position[1]-n.position[1],f=o.position[2]-n.position[2];a.position[0]=n.position[0]+t*e,a.position[1]=n.position[1]+t*i,a.position[2]=n.position[2]+t*f}if(s){var m=o.rotation[0]-n.rotation[0],_=o.rotation[1]-n.rotation[1],g=o.rotation[2]-n.rotation[2];a.rotation[0]=n.rotation[0]+t*m,a.rotation[1]=n.rotation[1]+t*_,a.rotation[2]=n.rotation[2]+t*g}if(h){var v=o.rotationPost[0]-n.rotationPost[0],y=o.rotationPost[1]-n.rotationPost[1],w=o.rotationPost[2]-n.rotationPost[2];a.rotationPost[0]=n.rotationPost[0]+t*v,a.rotationPost[1]=n.rotationPost[1]+t*y,a.rotationPost[2]=n.rotationPost[2]+t*w}if(l){var b=o.scale[0]-n.scale[0],k=o.scale[1]-n.scale[1];a.scale[0]=n.scale[0]+t*b,a.scale[1]=n.scale[1]+t*k}if(u){var x=o.skew[0]-n.skew[0],E=o.skew[1]-n.skew[1];a.skew[0]=n.skew[0]+t*x,a.skew[1]=n.skew[1]+t*E}if(c){var C=o.width-n.width;a.width=n.width+t*C}if(p){var S=o.height-n.height;a.height=n.height+t*S}if(d){var P=o.opacity-n.opacity;a.opacity=n.opacity+t*P}},asMatrix:function(){return a.asMatrix()},getProperties:function(){return a.getProperties()},setReverse:function(){var t=n;n=o,o=t}}},W=function(t,e,i,n){var o=t(0,z()),a=e,r=i,s=n,h=!1;return{tween:function(e){h&&(e=1-e),o.clear(),o=t(e,o);var i=r.width-a.width,n=r.height-a.height,u=r.opacity-a.opacity;void 0!==r.width&&(s.width=a.width+e*i),void 0!==r.height&&(s.height=a.height+e*n),void 0!==r.opacity&&(s.opacity=a.opacity+e*u)},asMatrix:function(){return o},getProperties:function(){return s.getProperties()},setReverse:function(){h=!0}}},B=function(t,e){return"undefined"==typeof t?e:t},j=function(t,e,i){var o="";i&&(o="perspective("+i+"px) ");var a=e.asCSS();t.style[n]=o+a},q=function(t,e){for(var i in e)t.style[i]=e[i]},V=function(t){return"function"==typeof t},G=function(t){if(!t)return t;var e={};for(var i in t)e[i]=t[i];return e};return r.createMatrix=z,r.setElementTransform=j,r}(),l=function(){function t(t,e,i,n,o){if("string"==typeof t)t=document.getElementById(t);else if(!t instanceof HTMLCanvasElement)return;var a,r=t.getContext("2d");try{try{a=r.getImageData(e,i,n,o)}catch(s){throw new Error("unable to access local image data: "+s)}}catch(s){throw new Error("unable to access image data: "+s)}return a}function e(e,n,o,a,r,s){if(!(isNaN(s)||s<1)){s|=0;var h=t(e,n,o,a,r);h=i(h,n,o,a,r,s),e.getContext("2d").putImageData(h,n,o)}}function i(t,e,i,r,s,h){var u,l,c,p,d,f,m,_,g,v,y,w,b,k,x,E,C,S,P,I,T,O,M,L,R=t.data,D=h+h+1,A=r-1,N=s-1,z=h+1,F=z*(z+1)/2,U=new n,H=U;for(c=1;c<D;c++)if(H=H.next=new n,c==z)var W=H;H.next=U;var B=null,j=null;m=f=0;var q=o[h],V=a[h];for(l=0;l<s;l++){for(E=C=S=P=_=g=v=y=0,w=z*(I=R[f]),b=z*(T=R[f+1]),k=z*(O=R[f+2]),x=z*(M=R[f+3]),_+=F*I,g+=F*T,v+=F*O,y+=F*M,H=U,c=0;c<z;c++)H.r=I,H.g=T,H.b=O,H.a=M,H=H.next;for(c=1;c<z;c++)p=f+((A<c?A:c)<<2),_+=(H.r=I=R[p])*(L=z-c),g+=(H.g=T=R[p+1])*L,v+=(H.b=O=R[p+2])*L,y+=(H.a=M=R[p+3])*L,E+=I,C+=T,S+=O,P+=M,H=H.next;for(B=U,j=W,u=0;u<r;u++)R[f+3]=M=y*q>>V,0!=M?(M=255/M,R[f]=(_*q>>V)*M,R[f+1]=(g*q>>V)*M,R[f+2]=(v*q>>V)*M):R[f]=R[f+1]=R[f+2]=0,_-=w,g-=b,v-=k,y-=x,w-=B.r,b-=B.g,k-=B.b,x-=B.a,p=m+((p=u+h+1)<A?p:A)<<2,E+=B.r=R[p],C+=B.g=R[p+1],S+=B.b=R[p+2],P+=B.a=R[p+3],_+=E,g+=C,v+=S,y+=P,B=B.next,w+=I=j.r,b+=T=j.g,k+=O=j.b,x+=M=j.a,E-=I,C-=T,S-=O,P-=M,j=j.next,f+=4;m+=r}for(u=0;u<r;u++){for(C=S=P=E=g=v=y=_=0,f=u<<2,w=z*(I=R[f]),b=z*(T=R[f+1]),k=z*(O=R[f+2]),x=z*(M=R[f+3]),_+=F*I,g+=F*T,v+=F*O,y+=F*M,H=U,c=0;c<z;c++)H.r=I,H.g=T,H.b=O,H.a=M,H=H.next;for(d=r,c=1;c<=h;c++)f=d+u<<2,_+=(H.r=I=R[f])*(L=z-c),g+=(H.g=T=R[f+1])*L,v+=(H.b=O=R[f+2])*L,y+=(H.a=M=R[f+3])*L,E+=I,C+=T,S+=O,P+=M,H=H.next,c<N&&(d+=r);for(f=u,B=U,j=W,l=0;l<s;l++)p=f<<2,R[p+3]=M=y*q>>V,M>0?(M=255/M,R[p]=(_*q>>V)*M,R[p+1]=(g*q>>V)*M,R[p+2]=(v*q>>V)*M):R[p]=R[p+1]=R[p+2]=0,_-=w,g-=b,v-=k,y-=x,w-=B.r,b-=B.g,k-=B.b,x-=B.a,p=u+((p=l+z)<N?p:N)*r<<2,_+=E+=B.r=R[p],g+=C+=B.g=R[p+1],v+=S+=B.b=R[p+2],y+=P+=B.a=R[p+3],B=B.next,w+=I=j.r,b+=T=j.g,k+=O=j.b,x+=M=j.a,E-=I,C-=T,S-=O,P-=M,j=j.next,f+=r}return t}function n(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var o=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],a=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];return e}();HTMLCanvasElement.prototype.toBlob||Object.defineProperty(HTMLCanvasElement.prototype,"toBlob",{value:function(t,e,i){for(var n=atob(this.toDataURL(e,i).split(",")[1]),o=n.length,a=new Uint8Array(o),r=0;r<o;r++)a[r]=n.charCodeAt(r);t(new Blob([a],{type:e||"image/png"}))}});var c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t},d=function(t){return Array.prototype.slice.call(t.attributes).map(function(t){return{name:t.name,value:t.value}})},f=function(t){return{x:"undefined"==typeof t.offsetX?t.layerX:t.offsetX,y:"undefined"==typeof t.offsetY?t.layerY:t.offsetY}},m=function(t,e){var i,n={},o=e||{};for(i in t)t.hasOwnProperty(i)&&(n[i]="undefined"==typeof o[i]?t[i]:o[i]);return n},_={ESC:27,RETURN:13},g={DOWN:["touchstart","pointerdown","mousedown"],MOVE:["touchmove","pointermove","mousemove"],UP:["touchend","touchcancel","pointerup","mouseup"]},v={jpeg:"image/jpeg",jpg:"image/jpeg",jpe:"image/jpeg",png:"image/png",gif:"image/gif",bmp:"image/bmp"},y=/(\.png|\.bmp|\.gif|\.jpg|\.jpe|\.jpg|\.jpeg)$/,w=/(jpe|jpg|jpeg|png)/,b=function(t,e){var i=document.createElement(t);return e&&(i.className=e),i},k=function(t,e,i){e.forEach(function(e){t.addEventListener(e,i,!1)})},x=function(t,e,i){e.forEach(function(e){t.removeEventListener(e,i,!1)})},E=function(t){var e=t.changedTouches?t.changedTouches[0]:t;if(e)return{x:e.pageX,y:e.pageY}},C=function(t,e){var i=E(t),n=e.getBoundingClientRect(),o=window.pageYOffset||document.documentElement.scrollTop,a=window.pageXOffset||document.documentElement.scrollLeft;return{x:i.x-n.left-a,y:i.y-n.top-o}},S=function(t){return t.charAt(0).toLowerCase()+t.slice(1)},P=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},I=function(t){return t[t.length-1]},T=function(t,e,i){return Math.max(e,Math.min(i,t))},O=function(t,e){return e.indexOf(t)!==-1},M=function(t,e,i,n,o,a){var r=new XMLHttpRequest;n&&r.upload.addEventListener("progress",function(t){n(t.loaded,t.total)}),r.open("POST",t,!0),i&&i(r),r.onreadystatechange=function(){if(4===r.readyState&&200===r.status){var t=r.responseText;if(!t.length)return void o();if(t.indexOf("Content-Length")!==-1)return void a("file-too-big");var e=void 0;try{e=JSON.parse(r.responseText)}catch(i){}if("object"===("undefined"==typeof e?"undefined":p(e))&&"failure"===e.status)return void a(e.message);o(e||t)}else 4===r.readyState&&a("fail")},r.send(e)},L=function(t){t.style.webkitTransform="",t.style.transform=""},R=function(t){return t/1e6},D=function(){var t=[],e=void 0,i=void 0;for(e in v)v.hasOwnProperty(e)&&(i=v[e],t.indexOf(i)==-1&&t.push(i));return t},A=function(t){return"image/jpeg"===t},N=function(t){var e=void 0;for(e in v)if(v.hasOwnProperty(e)&&v[e]===t)return e;return t},z=function(t){return t.split("/").pop().split("?").shift()},F=function(t){if("string"!=typeof t)return"unknown";var e=z(t);return e.split(".").shift()},U=function(t){var e=st(t),i=N(e),n="unknown."+i;return{name:n,type:e,size:Math.floor(.73*t.length)}},H=function(t){var i=z(t),n=e(i.split(".").pop());return{name:i,type:n,size:null}},W=function(t){return{name:t.name,type:t.type,size:t.size}},B=function(t){return"string"==typeof t?/^data:image/.test(t)?U(t):H(t):W(t)},j=function(t){var e=arguments.length<=1||void 0===arguments[1]?"":arguments[1],i=ot(t);return e=e.replace(/\./,""),w.test(e)||(e="png"),y.test(i.name)?i.name=i.name.replace(/\.[a-z]+$/,"."+e):i.name+="."+e,i.type=v[e],i},q=function(t,e){var i="string"!=typeof t||0!==t.indexOf("data:image");n.parseMetaData(t,function(o){var a={canvas:!0,crossOrigin:i};o.exif&&(a.orientation=o.exif.get("Orientation")),n(t,function(t){return"error"===t.type?void e():void e(t,o)},a)})},V=function(t,e,i){var n,o,a,r,s=e/t;return s<i?(r=e,a=r/i,n=.5*(t-a),o=0):(a=t,r=a*i,n=0,o=.5*(e-r)),{x:n,y:o,height:r,width:a}},G=function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],n=arguments[2],o=b("canvas"),a=e.rotation,r=e.crop,s=e.size;if(r){var h=a%180!==0,u={width:h?t.height:t.width,height:h?t.width:t.height},l=r.x/u.width,c=r.y/u.height,p=r.width/u.width,d=r.height/u.height;r=it(r),r.y+r.height>u.height&&(r.y=Math.max(0,u.height-r.height)),r.x+r.width>u.width&&(r.x=Math.max(0,u.width-r.width)),o.width=r.width,o.height=r.height;var f=o.getContext("2d");90===a?(f.translate(.5*o.width,.5*o.height),f.rotate(-90*Math.PI/180),f.drawImage(t,(1-c)*t.width-t.width*d,r.x,r.height,r.width,.5*-o.height,.5*-o.width,o.height,o.width)):180===a?(f.translate(.5*o.width,.5*o.height),f.rotate(-180*Math.PI/180),f.drawImage(t,(1-(l+p))*u.width,(1-(c+d))*u.height,p*u.width,d*u.height,.5*-o.width,.5*-o.height,o.width,o.height)):270===a?(f.translate(.5*o.width,.5*o.height),f.rotate(-270*Math.PI/180),f.drawImage(t,r.y,(1-l)*t.height-t.height*p,r.height,r.width,.5*-o.height,.5*-o.width,o.height,o.width)):f.drawImage(t,r.x,r.y,r.width,r.height,0,0,o.width,o.height)}s&&i(o,Math.min(s.width/o.width,s.height/o.height)),n(o)},X=function(t){return Y(t,1)},Y=function(t,e){if(!t)return null;var n=document.createElement("canvas");n.setAttribute("data-file",t.getAttribute("data-file"));var o=n.getContext("2d");return n.width=t.width,n.height=t.height,o.drawImage(t,0,0),e>0&&1!=e&&i(n,e),n},$=function(t){return t.width&&t.height},J=function(t,e){var i=e.getContext("2d");$(e)?i.drawImage(t,0,0,e.width,e.height):(e.width=t.width,e.height=t.height,i.drawImage(t,0,0))},Z=function(t){l(t,0,0,t.width,t.height,3)},K=function(t,e,i){t.toBlob(function(t){if("msSaveBlob"in window.navigator)return void window.navigator.msSaveBlob(t,e);var i=URL.createObjectURL(t),n=b("a");n.style.display="none",n.download=e,n.href=i,document.body.appendChild(n),n.click(),setTimeout(function(){document.body.removeChild(n),URL.revokeObjectURL(i)},0)},i)},Q=function(t,e){return parseInt(t.width,10)>=e.width&&parseInt(t.height,10)>=e.height},tt=function(t,e,i){return{x:t.x*e,y:t.y*i,width:t.width*e,height:t.height*i}},et=function(t,e,i){return{x:t.x/e,y:t.y/i,width:t.width/e,height:t.height/i}},it=function(t){return{x:Math.floor(t.x),y:Math.floor(t.y),width:Math.floor(t.width),height:Math.floor(t.height)}},nt=function(t){if(t&&""!==t.value){try{t.value=""}catch(e){}if(t.value){var i=document.createElement("form"),n=t.parentNode,o=t.nextSibling;i.appendChild(t),i.reset(),o?n.insertBefore(t,o):n.appendChild(t)}}},ot=function(t){return"object"===("undefined"==typeof value?"undefined":p(value))&&null!==value?JSON.parse(JSON.stringify(t)):t;
},at=function(t){var e=X(t.input.image),i=X(t.output.image),n=ot(t);return n.input.image=e,n.output.image=i,n},rt=function(t,e,i){return t&&e?t.toDataURL(e,A(e)&&"number"==typeof i?i/100:void 0):null},st=function(t){if(!t)return null;var e=t.substr(0,16).match(/^.+;/);return e.length?e[0].substring(5,e[0].length-1):null},ht=function(t){var e=arguments.length<=1||void 0===arguments[1]?[]:arguments[1],i=arguments[2],n={server:ot(t.server),meta:ot(t.meta),input:{name:t.input.name,type:t.input.type,size:t.input.size,width:t.input.width,height:t.input.height},output:{width:t.output.width,height:t.output.height}};O("input",e)&&(n.input.image=rt(t.input.image,t.input.type)),O("output",e)&&(n.output.image=rt(t.output.image,t.input.type,i)),O("actions",e)&&(n.actions=ot(t.actions));var o=st(n.output.image||n.input.image);return"image/png"===o&&(n.input.name=F(n.input.name)+".png",n.input.type=o),n},ut=function(t,e,i){var n=i.querySelector(t);n&&(n.style.display=e?"":"none")},lt=function(t){return Array.prototype.slice.call(t)},ct=function(t){t.parentNode.removeChild(t)},pt=function(t){var e=b("div");return t.parentNode&&(t.nextSibling?t.parentNode.insertBefore(e,t.nextSibling):t.parentNode.appendChild(e)),e.appendChild(t),e},dt=function(t,e,i,n){var o=(n-90)*Math.PI/180;return{x:t+i*Math.cos(o),y:e+i*Math.sin(o)}},ft=function(t,e,i,n,o){var a=dt(t,e,i,o),r=dt(t,e,i,n),s=o-n<=180?"0":"1",h=["M",a.x,a.y,"A",i,i,0,s,0,r.x,r.y].join(" ");return h},mt=function(t,e,i,n){return ft(t,e,i,0,360*n)},_t=function(){var e={n:function(t,e,i,n){var o,a,r,s,h,u,l,c;return r=t.y+t.height,o=T(e.y,0,r),r-o<i.min.height&&(o=r-i.min.height),h=n?(r-o)/n:t.width,h<i.min.width&&(h=i.min.width,o=r-h*n),l=.5*(h-t.width),s=t.x-l,a=t.x+t.width+l,(s<0||a>i.width)&&(c=Math.min(t.x,i.width-(t.x+t.width)),s=t.x-c,a=t.x+t.width+c,h=a-s,u=h*n,o=r-u),{x:s,y:o,width:a-s,height:r-o}},s:function(t,e,i,n){var o,a,r,s,h,u,l,c;return o=t.y,r=T(e.y,o,i.height),r-o<i.min.height&&(r=o+i.min.height),h=n?(r-o)/n:t.width,h<i.min.width&&(h=i.min.width,r=o+h*n),l=.5*(h-t.width),s=t.x-l,a=t.x+t.width+l,(s<0||a>i.width)&&(c=Math.min(t.x,i.width-(t.x+t.width)),s=t.x-c,a=t.x+t.width+c,h=a-s,u=h*n,r=o+u),{x:s,y:o,width:a-s,height:r-o}},e:function(t,e,i,n){var o,a,r,s,h,u,l,c;return s=t.x,a=T(e.x,s,i.width),a-s<i.min.width&&(a=s+i.min.width),u=n?(a-s)*n:t.height,u<i.min.height&&(u=i.min.height,a=s+u/n),l=.5*(u-t.height),o=t.y-l,r=t.y+t.height+l,(o<0||r>i.height)&&(c=Math.min(t.y,i.height-(t.y+t.height)),o=t.y-c,r=t.y+t.height+c,u=r-o,h=u/n,a=s+h),{x:s,y:o,width:a-s,height:r-o}},w:function i(t,e,n,o){var a,r,s,h,i,u,l,c;return r=t.x+t.width,h=T(e.x,0,r),r-h<n.min.width&&(h=r-n.min.width),u=o?(r-h)*o:t.height,u<n.min.height&&(u=n.min.height,h=r-u/o),l=.5*(u-t.height),a=t.y-l,s=t.y+t.height+l,(a<0||s>n.height)&&(c=Math.min(t.y,n.height-(t.y+t.height)),a=t.y-c,s=t.y+t.height+c,u=s-a,i=u/o,h=r-i),{x:h,y:a,width:r-h,height:s-a}},ne:function(t,e,i,n){var o,a,r,s,h,u,l;return s=t.x,r=t.y+t.height,a=T(e.x,s,i.width),a-s<i.min.width&&(a=s+i.min.width),u=n?(a-s)*n:T(r-e.y,i.min.height,r),u<i.min.height&&(u=i.min.height,a=s+u/n),o=t.y-(u-t.height),(o<0||r>i.height)&&(l=Math.min(t.y,i.height-(t.y+t.height)),o=t.y-l,u=r-o,h=u/n,a=s+h),{x:s,y:o,width:a-s,height:r-o}},se:function(t,e,i,n){var o,a,r,s,h,u,l;return s=t.x,o=t.y,a=T(e.x,s,i.width),a-s<i.min.width&&(a=s+i.min.width),u=n?(a-s)*n:T(e.y-t.y,i.min.height,i.height-o),u<i.min.height&&(u=i.min.height,a=s+u/n),r=t.y+t.height+(u-t.height),(o<0||r>i.height)&&(l=Math.min(t.y,i.height-(t.y+t.height)),r=t.y+t.height+l,u=r-o,h=u/n,a=s+h),{x:s,y:o,width:a-s,height:r-o}},sw:function(t,e,i,n){var o,a,r,s,h,u,l;return a=t.x+t.width,o=t.y,s=T(e.x,0,a),a-s<i.min.width&&(s=a-i.min.width),u=n?(a-s)*n:T(e.y-t.y,i.min.height,i.height-o),u<i.min.height&&(u=i.min.height,s=a-u/n),r=t.y+t.height+(u-t.height),(o<0||r>i.height)&&(l=Math.min(t.y,i.height-(t.y+t.height)),r=t.y+t.height+l,u=r-o,h=u/n,s=a-h),{x:s,y:o,width:a-s,height:r-o}},nw:function(t,e,i,n){var o,a,r,s,h,u,l;return a=t.x+t.width,r=t.y+t.height,s=T(e.x,0,a),a-s<i.min.width&&(s=a-i.min.width),u=n?(a-s)*n:T(r-e.y,i.min.height,r),u<i.min.height&&(u=i.min.height,s=a-u/n),o=t.y-(u-t.height),(o<0||r>i.height)&&(l=Math.min(t.y,i.height-(t.y+t.height)),o=t.y-l,u=r-o,h=u/n,s=a-h),{x:s,y:o,width:a-s,height:r-o}}};return function(){function i(){var e=arguments.length<=0||void 0===arguments[0]?document.createElement("div"):arguments[0];t(this,i),this._element=e,this._interaction=null,this._minWidth=0,this._minHeight=0,this._ratio=null,this._rect={x:0,y:0,width:0,height:0},this._space={width:0,height:0},this._rectChanged=!1,this._init()}return c(i,[{key:"_init",value:function(){this._element.className="slim-crop-area";var t=b("div","grid");this._element.appendChild(t);for(var i in e)if(e.hasOwnProperty(i)){var n=b("button",i);this._element.appendChild(n)}var o=b("button","c");this._element.appendChild(o),k(document,g.DOWN,this)}},{key:"reset",value:function(){this._interaction=null,this._rect={x:0,y:0,width:0,height:0},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"rescale",value:function(t){1!==t&&(this._interaction=null,this._rectChanged=!0,this._rect.x*=t,this._rect.y*=t,this._rect.width*=t,this._rect.height*=t,this._redraw(),this._element.dispatchEvent(new CustomEvent("change")))}},{key:"limit",value:function(t,e){this._space={width:t,height:e}}},{key:"resize",value:function(t,e,i,n){this._interaction=null,this._rect={x:t,y:e,width:T(i,0,this._space.width),height:T(n,0,this._space.height)},this._rectChanged=!0,this._redraw(),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"handleEvent",value:function(t){switch(t.type){case"touchstart":case"pointerdown":case"mousedown":this._onStartDrag(t);break;case"touchmove":case"pointermove":case"mousemove":this._onDrag(t);break;case"touchend":case"touchcancel":case"pointerup":case"mouseup":this._onStopDrag(t)}}},{key:"_onStartDrag",value:function(t){this._element.contains(t.target)&&(t.preventDefault(),k(document,g.MOVE,this),k(document,g.UP,this),this._interaction={type:t.target.className,offset:C(t,this._element)},this._element.setAttribute("data-dragging","true"),this._redraw())}},{key:"_onDrag",value:function(t){t.preventDefault();var i=C(t,this._element.parentNode),n=this._interaction.type;"c"===n?(this._rect.x=T(i.x-this._interaction.offset.x,0,this._space.width-this._rect.width),this._rect.y=T(i.y-this._interaction.offset.y,0,this._space.height-this._rect.height)):e[n]&&(this._rect=e[n](this._rect,i,{x:0,y:0,width:this._space.width,height:this._space.height,min:{width:this._minWidth,height:this._minHeight}},this._ratio)),this._rectChanged=!0,this._element.dispatchEvent(new CustomEvent("input"))}},{key:"_onStopDrag",value:function(t){t.preventDefault(),x(document,g.MOVE,this),x(document,g.UP,this),this._interaction=null,this._element.setAttribute("data-dragging","false"),this._element.dispatchEvent(new CustomEvent("change"))}},{key:"_redraw",value:function(){var t=this;this._rectChanged&&(this._element.style.cssText="\n\t\t\t\t\tleft:"+this._rect.x+"px;\n\t\t\t\t\ttop:"+this._rect.y+"px;\n\t\t\t\t\twidth:"+this._rect.width+"px;\n\t\t\t\t\theight:"+this._rect.height+"px;\n\t\t\t\t",this._rectChanged=!1),this._interaction&&requestAnimationFrame(function(){return t._redraw()})}},{key:"destroy",value:function(){this._interaction=!1,this._rectChanged=!1,x(document,g.DOWN,this),x(document,g.MOVE,this),x(document,g.UP,this),ct(this._element)}},{key:"element",get:function(){return this._element}},{key:"space",get:function(){return this._space}},{key:"area",get:function(){return{x:this._rect.x/this._space.width,y:this._rect.y/this._space.height,width:this._rect.width/this._space.width,height:this._rect.height/this._space.height}}},{key:"dirty",get:function(){return 0!==this._rect.x||0!==this._rect.y||0!==this._rect.width||0!==this._rect.height}},{key:"minWidth",set:function(t){this._minWidth=t}},{key:"minHeight",set:function(t){this._minHeight=t}},{key:"ratio",set:function(t){this._ratio=t}}]),i}()}(),gt=function(){var e=["input","change"],i=function(){function i(){var e=arguments.length<=0||void 0===arguments[0]?document.createElement("div"):arguments[0],n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t(this,i),this._element=e,this._options=m(i.options(),n),this._ratio=null,this._output=null,this._input=null,this._preview=null,this._previewBlurred=null,this._blurredPreview=!1,this._cropper=null,this._previewWrapper=null,this._currentWindowSize={},this._btnGroup=null,this._dirty=!1,this._wrapperRotation=0,this._wrapperScale=1,this._init()}return c(i,[{key:"_init",value:function(){var t=this;this._element.className="slim-image-editor",this._container=b("div","slim-container"),this._wrapper=b("div","slim-wrapper"),this._stage=b("div","slim-stage"),this._container.appendChild(this._stage),this._cropper=new _t,e.forEach(function(e){t._cropper.element.addEventListener(e,t)}),this._stage.appendChild(this._cropper.element),this._previewWrapper=b("div","slim-image-editor-preview slim-crop-preview"),this._previewBlurred=b("canvas","slim-crop-blur"),this._previewWrapper.appendChild(this._previewBlurred),this._wrapper.appendChild(this._previewWrapper),this._preview=b("img","slim-crop"),this._previewWrapper.appendChild(this._preview),this._btnGroup=b("div","slim-editor-btn-group"),i.Buttons.forEach(function(e){var i=P(e),n=t._options["button"+i+"Label"],o=t._options["button"+i+"Title"],a=t._options["button"+i+"ClassName"],r=b("button","slim-editor-btn slim-btn-"+e+(a?" "+a:""));r.innerHTML=n,r.title=o||n,r.type="button",r.setAttribute("data-action",e),r.addEventListener("click",t),t._btnGroup.appendChild(r)}),this._utilsGroup=b("div","slim-editor-utils-group");var n=b("button","slim-editor-utils-btn slim-btn-rotate"+(this._options.buttonRotateClassName?" "+this._options.buttonRotateClassName:""));n.setAttribute("data-action","rotate"),n.addEventListener("click",this),n.title=this._options.buttonRotateTitle,this._utilsGroup.appendChild(n),this._container.appendChild(this._wrapper),this._element.appendChild(this._container),this._element.appendChild(this._utilsGroup),this._element.appendChild(this._btnGroup)}},{key:"dirty",value:function(){this._dirty=!0}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onGridChange(t);break;case"input":this._onGridInput(t);break;case"keydown":this._onKeyDown(t);break;case"resize":this._onResize(t)}}},{key:"_onKeyDown",value:function(t){switch(t.keyCode){case _.RETURN:this._confirm();break;case _.ESC:this._cancel()}}},{key:"_onClick",value:function(t){t.target.classList.contains("slim-btn-cancel")&&this._cancel(),t.target.classList.contains("slim-btn-confirm")&&this._confirm(),t.target.classList.contains("slim-btn-rotate")&&this._rotate()}},{key:"_onResize",value:function(){this._currentWindowSize={width:window.innerWidth,height:window.innerHeight},this._redraw(),this._redrawCropper(this._cropper.area),this._updateWrapperScale(),this._redrawWrapper()}},{key:"_redrawWrapper",value:function(){var t=u.createMatrix();t.scale(this._wrapperScale,this._wrapperScale),t.rotateZ(this._wrapperRotation*(Math.PI/180)),u.setElementTransform(this._previewWrapper,t)}},{key:"_onGridInput",value:function(){this._redrawCropMask()}},{key:"_onGridChange",value:function(){this._redrawCropMask()}},{key:"_updateWrapperRotation",value:function(){this._options.minSize.width>this._input.height||this._options.minSize.height>this._input.width?this._wrapperRotation+=180:this._wrapperRotation+=90}},{key:"_updateWrapperScale",value:function(){var t=this._wrapperRotation%180!==0;if(t){var e=this._container.offsetWidth,i=this._container.offsetHeight,n=this._wrapper.offsetHeight,o=this._wrapper.offsetWidth,a=e/n;a*o>i&&(a=i/o),this._wrapperScale=a}else this._wrapperScale=1}},{key:"_cancel",value:function(){this._element.dispatchEvent(new CustomEvent("cancel"))}},{key:"_confirm",value:function(){var t=this._wrapperRotation%180!==0;this._element.dispatchEvent(new CustomEvent("confirm",{detail:{rotation:this._wrapperRotation%360,crop:tt(this._cropper.area,t?this._input.height:this._input.width,t?this._input.width:this._input.height)}}))}},{key:"_rotate",value:function(){var t=this;this._updateWrapperRotation(),this._updateWrapperScale(),this._clearCropMask(),this._hideCropper(),u(this._previewWrapper,{rotation:[0,0,this._wrapperRotation*(Math.PI/180)],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.8,springDeceleration:.65,complete:function(){t._redrawCropper(),t._showCropper()}})}},{key:"_showCropper",value:function(){u(this._stage,{easing:"ease",duration:250,fromOpacity:0,opacity:1})}},{key:"_hideCropper",value:function(){u(this._stage,{duration:0,fromOpacity:0,opacity:0})}},{key:"_clearCropMask",value:function(){this._preview.style.clip=""}},{key:"_redrawCropMask",value:function(){var t=this,e=this._wrapperRotation%360,i={width:this._wrapper.offsetWidth,height:this._wrapper.offsetHeight},n=this._cropper.area,o=n.x,a=n.y,r=n.width,s=n.height;90===e?(n.x=1-a-s,n.y=o,n.width=s,n.height=r):180===e?(n.x=1-(o+r),n.y=1-(a+s),n.width=r,n.height=s):270===e&&(n.x=a,n.y=1-o-r,n.width=s,n.height=r),n=tt(n,i.width,i.height),requestAnimationFrame(function(){t._preview.style.clip="rect(\n\t\t\t\t\t"+n.y+"px,\n\t\t\t\t\t"+(n.x+n.width)+"px,\n\t\t\t\t\t"+(n.y+n.height)+"px,\n\t\t\t\t\t"+n.x+"px)\n\t\t\t\t"})}},{key:"open",value:function(t,e,i,n,o){var a=this;if(this._input&&!this._dirty)return void o();this._dirty=!1,this._wrapperRotation=n||0,this._blurredPreview=!1,this._ratio=e,this._element.style.opacity="0",this._input=t;var r=n%180!==0,s=et(i,r?t.height:t.width,r?t.width:t.height);this._preview.onload=function(){a._preview.onload=null,a._cropper.ratio=a.ratio,a._redraw(),a._redrawCropper(s),o(),a._element.style.opacity=""},this._preview.src=Y(this._input,Math.min(this._container.offsetWidth/this._input.width,this._container.offsetHeight/this._input.height)).toDataURL()}},{key:"_redrawCropper",value:function(t){var e=this._wrapperRotation%180!==0,i=this._wrapper.offsetWidth,n=this._wrapper.offsetHeight,o=this._container.offsetWidth,a=this._container.offsetHeight;this._updateWrapperScale();var r=this._wrapperScale*(e?n:i),s=this._wrapperScale*(e?i:n),h=e?.5*(o-r):this._wrapper.offsetLeft,u=e?.5*(a-s):this._wrapper.offsetTop;this._stage.style.cssText="\n\t\t\t\tleft:"+h+"px;\n\t\t\t\ttop:"+u+"px;\n\t\t\t\twidth:"+r+"px;\n\t\t\t\theight:"+s+"px;\n\t\t\t",this._cropper.limit(r,s),this._cropper.minWidth=this._wrapperScale*this._options.minSize.width*this.scalar,this._cropper.minHeight=this._wrapperScale*this._options.minSize.height*this.scalar;var l=null;l=t?{x:t.x*r,y:t.y*s,width:t.width*r,height:t.height*s}:V(r,s,this._ratio||s/r),this._cropper.resize(l.x,l.y,l.width,l.height)}},{key:"_redraw",value:function(){var t=this._input.height/this._input.width,e=this._container.clientWidth,i=this._container.clientHeight,n=e,o=n*t;o>i&&(o=i,n=o/t),n=Math.round(n),o=Math.round(o);var a=(e-n)/2,r=(i-o)/2;this._wrapper.style.cssText="\n\t\t\t\tleft:"+a+"px;\n\t\t\t\ttop:"+r+"px;\n\t\t\t\twidth:"+n+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._previewBlurred.style.cssText="\n\t\t\t\twidth:"+n+"px;\n\t\t\t\theight:"+o+"px;\n\t\t\t",this._preview.width=n,this._preview.height=o,this._blurredPreview||(this._previewBlurred.width=300,this._previewBlurred.height=this._previewBlurred.width*t,J(this._input,this._previewBlurred),Z(this._previewBlurred,3),this._blurredPreview=!0)}},{key:"show",value:function(){var t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];this._currentWindowSize.width===window.innerWidth&&this._currentWindowSize.height===window.innerHeight||(this._redraw(),this._redrawCropper(this._cropper.area)),document.addEventListener("keydown",this),window.addEventListener("resize",this);var e=this._wrapperRotation*(Math.PI/180);u(this._previewWrapper,{fromRotation:[0,0,e],rotation:[0,0,e],fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:.9999,fromScale:[this._wrapperScale-.02,this._wrapperScale-.02],scale:[this._wrapperScale,this._wrapperScale],easing:"spring",springConstant:.3,springDeceleration:.85,delay:450,complete:function(){}}),this._cropper.dirty?u(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:550,complete:function(){L(this),t()}}):u(this._stage,{fromPosition:[0,0,0],position:[0,0,0],fromOpacity:0,opacity:1,duration:250,delay:1e3,complete:function(){L(this)}}),u(this._btnGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,delay:function(t){return 1e3+100*t},easing:"spring",springConstant:.3,springDeceleration:.85,complete:function(){L(this)}}),u(this._utilsGroup.childNodes,{fromScale:[.9,.9],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.85,delay:1250,complete:function(){L(this)}})}},{key:"hide",value:function(){var t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];document.removeEventListener("keydown",this),window.removeEventListener("resize",this),u(this._utilsGroup.childNodes,{fromOpacity:1,opacity:0,duration:250}),u(this._btnGroup.childNodes,{fromOpacity:1,opacity:0,delay:200,duration:350}),u([this._stage,this._previewWrapper],{fromPosition:[0,0,0],position:[0,-250,0],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,delay:250,allDone:function(){t()}})}},{key:"destroy",value:function(){var t=this;lt(this._btnGroup.children).forEach(function(e){e.removeEventListener("click",t)}),e.forEach(function(e){t._cropper.element.removeEventListener(e,t)}),this._cropper.destroy(),ct(this._element)}},{key:"element",get:function(){return this._element}},{key:"ratio",get:function(){return"input"===this._ratio?this._input.height/this._input.width:this._ratio}},{key:"offset",get:function(){return this._element.getBoundingClientRect()}},{key:"original",get:function(){return this._input}},{key:"scalar",get:function(){return this._preview.width/this._input.width}}],[{key:"options",value:function(){return{buttonCancelClassName:null,buttonConfirmClassName:null,buttonCancelLabel:"Cancel",buttonConfirmLabel:"Confirm",buttonCancelTitle:null,buttonConfirmTitle:null,buttonRotateTitle:"Rotate",buttonRotateClassName:null,minSize:{width:0,height:0}}}}]),i}();return i.Buttons=["cancel","confirm"],i}(_t),vt=function(){var e=["dragover","dragleave","drop"];return function(){function i(){var e=arguments.length<=0||void 0===arguments[0]?document.createElement("div"):arguments[0];t(this,i),this._element=e,this._accept=[],this._dragPath=null,this._init()}return c(i,[{key:"areValidFiles",value:function(t){return!this._accept.length||!t||this._accept.indexOf(t[0].type)!=-1}},{key:"reset",value:function(){this._element.files=null}},{key:"_init",value:function(){var t=this;this._element.className="slim-file-hopper",e.forEach(function(e){t._element.addEventListener(e,t)})}},{key:"handleEvent",value:function(t){switch(t.type){case"dragover":this._onDragOver(t);break;case"dragleave":this._onDragLeave(t);break;case"drop":this._onDrop(t)}}},{key:"_onDrop",value:function(t){return t.preventDefault(),this.areValidFiles(t.dataTransfer.files)?(this._element.files=t.dataTransfer.files,this._element.dispatchEvent(new CustomEvent("file-drop",{detail:f(t)})),this._element.dispatchEvent(new CustomEvent("change")),void(this._dragPath=null)):(this._element.dispatchEvent(new CustomEvent("file-invalid-drop")),void(this._dragPath=null))}},{key:"_onDragOver",value:function(t){return t.preventDefault(),t.dataTransfer.dropEffect="copy",this.areValidFiles(t.dataTransfer.items)?(this._dragPath||(this._dragPath=[]),this._dragPath.push(f(t)),void this._element.dispatchEvent(new CustomEvent("file-over",{detail:{x:I(this._dragPath).x,y:I(this._dragPath).y}}))):(t.dataTransfer.dropEffect="none",void this._element.dispatchEvent(new CustomEvent("file-invalid")))}},{key:"_onDragLeave",value:function(t){this._element.dispatchEvent(new CustomEvent("file-out",{detail:f(t)})),this._dragPath=null}},{key:"destroy",value:function(){var t=this;e.forEach(function(e){t._element.removeEventListener(e,t)}),ct(this._element)}},{key:"element",get:function(){return this._element}},{key:"dragPath",get:function(){return this._dragPath}},{key:"enabled",get:function(){return""===this._element.style.display},set:function(t){this._element.style.display=t?"":"none"}},{key:"accept",set:function(t){this._accept=t},get:function(){return this._accept}}]),i}()}(),yt=function(){return function(){function e(){t(this,e),this._element=null,this._inner=null,this._init()}return c(e,[{key:"_init",value:function(){this._element=b("div","slim-popover"),this._element.setAttribute("data-state","off"),document.body.appendChild(this._element)}},{key:"show",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];this._element.setAttribute("data-state","on"),u(this._element,{fromOpacity:0,opacity:1,duration:350,complete:function(){L(t._element),e()}})}},{key:"hide",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0];u(this._element,{fromOpacity:1,opacity:0,duration:500,complete:function(){L(t._element),t._element.setAttribute("data-state","off"),e()}})}},{key:"destroy",value:function(){this._element.parentNode&&this._element.parentNode.removeChild(this._element)}},{key:"inner",set:function(t){this._inner=t,this._element.firstChild&&this._element.removeChild(this._element.firstChild),this._element.appendChild(this._inner)}}]),e}()}(),wt=function(t,e){return t.split(e).map(function(t){return parseInt(t,10)})},bt=function(t){return"DIV"===t.nodeName},kt={AUTO:"auto",INITIAL:"initial",MANUAL:"manual"},xt=["x","y","width","height"],Et=["file-invalid-drop","file-invalid","file-drop","file-over","file-out","click"],Ct=["cancel","confirm"],St=["remove","edit","download","upload"],Pt=null,It=0,Tt='\n<div class="slim-loader">\n\t<svg>\n\t\t<path class="slim-loader-background" fill="none" stroke-width="3" />\n\t\t<path class="slim-loader-foreground" fill="none" stroke-width="3" />\n\t</svg>\n</div>\n',Ot='\n<div class="slim-upload-status"></div>\n',Mt=function(){function e(i){var n=arguments.length<=1||void 0===arguments[1]?{}:arguments[1];t(this,e),Pt||(Pt=new yt),It++,this._options=m(e.options(),n),this._originalElement=i,this._originalElementInner=i.innerHTML,this._originalElementAttributes=d(i),bt(i)?this._element=i:(this._element=pt(i),this._element.className=i.className,i.className="",this._element.setAttribute("data-ratio",this._options.ratio)),this._element.classList.add("slim"),this._element.setAttribute("data-state","init"),this._input=null,this._output=null,this._ratio=null,this._isRequired=!1,this._imageHopper=null,this._imageEditor=null,this._progressEnabled=!0,this._data={},this._resetData(),this._state=[],this._drip=null,this._hasInitialImage=!1,this._initialCrop=this._options.crop,this._isBeingDestroyed=!1,e.supported?this._init():this._fallback()}return c(e,[{key:"isAttachedTo",value:function(t){return this._element===t||this._originalElement===t}},{key:"isDetached",value:function(){return null===this._element.parentNode}},{key:"load",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?{}:arguments[1],i=arguments[2];"function"==typeof e?i=e:(this._options.crop=e.crop,this._initialCrop=this._options.crop),this._load(t,i)}},{key:"upload",value:function(t){this._doUpload(t)}},{key:"download",value:function(){this._doDownload()}},{key:"remove",value:function(){return this._doRemove()}},{key:"destroy",value:function(){this._doDestroy()}},{key:"edit",value:function(){this._doEdit()}},{key:"crop",value:function(t,e){this._crop(t.x,t.y,t.width,t.height,e)}},{key:"_canInstantEdit",value:function(){return this._options.instantEdit&&!this._isInitialising}},{key:"_getFileInput",value:function(){return this._element.querySelector("input[type=file]")}},{key:"_getInitialImage",value:function(){return this._element.querySelector("img")}},{key:"_getInputElement",value:function(){return this._getFileInput()||this._getInitialImage()}},{key:"_getRatioSpacerElement",value:function(){return this._element.children[0]}},{key:"_isImageOnly",value:function(){return"INPUT"!==this._input.nodeName}},{key:"_isFixedRatio",value:function(){return this._options.ratio.indexOf(":")!==-1}},{key:"_toggleButton",value:function(t,e){ut('.slim-btn[data-action="'+t+'"]',e,this._element)}},{key:"_clearState",value:function(){this._state=[],this._updateState()}},{key:"_removeState",value:function(t){this._state=this._state.filter(function(e){return e!==t}),this._updateState()}},{key:"_addState",value:function(t){O(t,this._state)||(this._state.push(t),this._updateState())}},{key:"_updateState",value:function(){this._element.setAttribute("data-state",this._state.join(","))}},{key:"_resetData",value:function(){this._data={server:null,meta:ot(this._options.meta),input:{image:null,name:null,type:null,width:0,height:0},output:{image:null,width:0,height:0},actions:{rotation:null,crop:null,size:null}},this._output&&(this._output.value=""),nt(this._getFileInput())}},{key:"_init",value:function(){var t=this;this._isInitialising=!0,this._addState("empty"),this._input=this._getInputElement(),this._input||(this._input=b("input"),this._input.type="file",this._element.appendChild(this._input)),this._isRequired=this._input.required===!0,this._output=this._element.querySelector("input[type=hidden]"),this._output||(this._output=b("input"),this._output.type="hidden",this._output.name=this._input.name||this._options.defaultInputName,this._element.appendChild(this._output)),this._input.removeAttribute("name");var e=b("div","slim-area"),i=this._getInitialImage(),n=(i||{}).src;n?this._hasInitialImage=!0:this._initialCrop=null;var o='\n\t\t<div class="slim-result">\n\t\t\t<img class="in" style="opacity:0" '+(n?'src="'+n+'"':"")+'><img><img style="opacity:0">\n\t\t</div>';if(this._isImageOnly())e.innerHTML="\n\t\t\t\t"+Tt+"\n\t\t\t\t"+Ot+"\n\t\t\t\t"+o+"\n\t\t\t";else{var a=void 0;this._input.hasAttribute("accept")&&"image/*"!==this._input.getAttribute("accept")?a=this._input.accept.split(",").map(function(t){return t.trim()}).filter(function(t){return t.length>0}):(a=D(),this._input.setAttribute("accept",a.join(","))),this._imageHopper=new vt,this._imageHopper.accept=a,this._element.appendChild(this._imageHopper.element),Et.forEach(function(e){t._imageHopper.element.addEventListener(e,t)}),e.innerHTML="\n\t\t\t\t"+Tt+"\n\t\t\t\t"+Ot+'\n\t\t\t\t<div class="slim-drip"><span><span></span></span></div>\n\t\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+"</div></div>\n\t\t\t\t"+o+"\n\t\t\t",this._input.addEventListener("change",this)}if(this._element.appendChild(e),this._btnGroup=b("div","slim-btn-group"),this._btnGroup.style.display="none",this._element.appendChild(this._btnGroup),St.filter(function(e){return t._isButtonAllowed(e)}).forEach(function(e){var i=P(e),n=t._options["button"+i+"Label"],o=t._options["button"+i+"Title"]||n,a=t._options["button"+i+"ClassName"],r=b("button","slim-btn slim-btn-"+e+(a?" "+a:""));r.innerHTML=n,r.title=o,r.type="button",r.addEventListener("click",t),r.setAttribute("data-action",e),t._btnGroup.appendChild(r)}),this._isFixedRatio()){var r=wt(this._options.ratio,":");this._ratio=r[1]/r[0],this._scaleDropArea(this._ratio)}this._updateProgress(.5),n?this._load(n,function(){t._onInit()}):this._onInit()}},{key:"_onInit",value:function(){var t=this;this._isInitialising=!1;var e=function(){setTimeout(function(){t._options.didInit.apply(t,[t.data])},0)};this._options.saveInitialImage?this._save(function(){e()},!1):e()}},{key:"_updateProgress",value:function(t){if(this._progressEnabled){var e=this._element.querySelector(".slim-loader");if(e){var i=e.getBoundingClientRect(),n=e.querySelectorAll("path"),o=parseInt(n[0].getAttribute("stroke-width"),10);n[0].setAttribute("d",mt(.5*i.width,.5*i.height,.5*i.width-o,.9999)),n[1].setAttribute("d",mt(.5*i.width,.5*i.height,.5*i.width-o,t))}}}},{key:"_startProgress",value:function(){var t=this;this._progressEnabled=!1;var e=this._element.querySelector(".slim-loader");if(e){var i=e.children[0];this._stopProgressLoop(function(){e.removeAttribute("style"),i.removeAttribute("style"),t._progressEnabled=!0,t._updateProgress(0),t._progressEnabled=!1,u(i,{fromOpacity:0,opacity:1,duration:250,complete:function(){t._progressEnabled=!0}})})}}},{key:"_stopProgress",value:function(){var t=this,e=this._element.querySelector(".slim-loader");if(e){var i=e.children[0];this._updateProgress(1),u(i,{fromOpacity:1,opacity:0,duration:250,complete:function(){e.removeAttribute("style"),i.removeAttribute("style"),t._updateProgress(.5),t._progressEnabled=!1}})}}},{key:"_startProgressLoop",value:function(){var t=this._element.querySelector(".slim-loader");if(t){var e=t.children[0];t.removeAttribute("style"),e.removeAttribute("style"),this._updateProgress(.5);var i=1e3;u(t,{rotation:[0,0,-(2*Math.PI)*i],easing:"linear",duration:1e3*i}),u(e,{fromOpacity:0,opacity:1,duration:250})}}},{key:"_stopProgressLoop",value:function(t){var e=this._element.querySelector(".slim-loader");if(e){var i=e.children[0];u(i,{fromOpacity:parseFloat(i.style.opacity),opacity:0,duration:250,complete:function(){u(e,"stop"),t&&t()}})}}},{key:"_isButtonAllowed",value:function(t){return"edit"===t?this._options.edit:"download"===t?this._options.download:"upload"===t?!!this._options.service&&!this._options.push:"remove"!==t||!this._isImageOnly()}},{key:"_fallback",value:function(){this._removeState("init");var t=b("div","slim-area");t.innerHTML='\n\t\t\t<div class="slim-status"><div class="slim-label">'+(this._options.label||"")+"</div></div>\n\t\t",this._element.appendChild(t),this._throwError(this._options.statusNoSupport)}},{key:"handleEvent",value:function(t){switch(t.type){case"click":this._onClick(t);break;case"change":this._onChange(t);break;case"cancel":this._onCancel(t);break;case"confirm":this._onConfirm(t);break;case"file-over":this._onFileOver(t);break;case"file-out":this._onFileOut(t);break;case"file-drop":this._onDropFile(t);break;case"file-invalid":this._onInvalidFile(t);break;case"file-invalid-drop":this._onInvalidFileDrop(t)}}},{key:"_getIntro",value:function(){return this._element.querySelector(".slim-result .in")}},{key:"_getOutro",value:function(){return this._element.querySelector(".slim-result .out")}},{key:"_getInOut",value:function(){return this._element.querySelectorAll(".slim-result img")}},{key:"_getDrip",value:function(){return this._drip||(this._drip=this._element.querySelector(".slim-drip > span")),this._drip}},{key:"_throwError",value:function(t){this._addState("error"),this._element.querySelector(".slim-label").style.display="none";var e=this._element.querySelector(".slim-error");e||(e=b("div","slim-error"),this._element.querySelector(".slim-status").appendChild(e)),e.innerHTML=t}},{key:"_removeError",value:function(){this._removeState("error"),this._element.querySelector(".slim-label").style.display="";var t=this._element.querySelector(".slim-error");t&&t.parentNode.removeChild(t)}},{key:"_openFileDialog",value:function(){this._removeError(),this._input.click()}},{key:"_onClick",value:function(t){var e=this,i=t.target.classList,n=t.target;if(i.contains("slim-file-hopper"))return void this._openFileDialog();switch(n.getAttribute("data-action")){case"remove":this._options.willRemove.apply(this,[this.data,function(){e._doRemove()}]);break;case"edit":this._doEdit();break;case"download":this._doDownload();break;case"upload":this._doUpload()}}},{key:"_onInvalidFileDrop",value:function(){this._onInvalidFile(),this._removeState("file-over");var t=this._getDrip();u(t.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){L(t.firstChild)}})}},{key:"_onInvalidFile",value:function(){var t=this._imageHopper.accept.map(N),e=this._options.statusFileType.replace("$0",t.join(", "));
this._throwError(e)}},{key:"_onImageTooSmall",value:function(){var t=this._options.statusImageTooSmall.replace("$0",this._options.minSize.width+" × "+this._options.minSize.height);this._throwError(t)}},{key:"_onOverWeightFile",value:function(){var t=this._options.statusFileSize.replace("$0",this._options.maxFileSize);this._throwError(t)}},{key:"_onFileOver",value:function(t){this._addState("file-over"),this._removeError();var e=this._getDrip(),i=u.createMatrix();i.translate(t.detail.x,t.detail.y,0),u.setElementTransform(e,i),1==this._imageHopper.dragPath.length&&(e.style.opacity=1,u(e.firstChild,{fromOpacity:0,opacity:.5,fromScale:[0,0],scale:[.5,.5],duration:150}))}},{key:"_onFileOut",value:function(t){this._removeState("file-over"),this._removeState("file-invalid"),this._removeError();var e=this._getDrip(),i=u.createMatrix();i.translate(t.detail.x,t.detail.y,0),u.setElementTransform(e,i),u(e.firstChild,{fromScale:[.5,.5],scale:[0,0],fromOpacity:.5,opacity:0,duration:150,complete:function(){L(e.firstChild)}})}},{key:"_onDropFile",value:function(t){var e=this;this._removeState("file-over");var i=this._getDrip(),n=u.createMatrix();n.translate(t.detail.x,t.detail.y,0),u.setElementTransform(i,n);var o=this._imageHopper.dragPath.length,a=this._imageHopper.dragPath[o-Math.min(10,o)],r=t.detail.x-a.x,s=t.detail.y-a.y;u(i,{fromPosition:[t.detail.x,t.detail.y,0],position:[t.detail.x+r,t.detail.y+s,0],duration:200}),u(i.firstChild,{fromScale:[.5,.5],scale:[2,2],fromOpacity:1,opacity:0,duration:200,complete:function(){L(i.firstChild),e._load(t.target.files[0])}})}},{key:"_onChange",value:function(t){this._load(t.target.files[0])}},{key:"_load",value:function(t,e){var i=this;if(!this._isBeingDestroyed){var n=B(t);if(("unknown"===n.type||this._options.forceType)&&(n=j(n,this._options.forceType||"png")),this._imageHopper&&this._imageHopper.accept.indexOf(n.type)===-1)return this._onInvalidFile(),void(e&&e.apply(this,["file-invalid"]));if(n.size&&this._options.maxFileSize&&R(n.size)>this._options.maxFileSize)return this._onOverWeightFile(),void(e&&e.apply(this,["file-too-big"]));this._removeState("empty"),this._imageHopper&&(this._imageHopper.enabled=!1),this._imageEditor&&this._imageEditor.dirty(),this._data.input.name=n.name,this._data.input.type=n.type,this._data.input.size=n.size,this._startProgressLoop(),this._addState("busy"),q(t,function(t,o){var a=function(){i._imageHopper&&(i._imageHopper.enabled=!0),i._removeState("busy"),i._stopProgressLoop(),i._resetData()};if(!t)return a(),void(e&&e.apply(i,["file-not-found"]));if(!Q(t,i._options.minSize))return a(),i._onImageTooSmall(),void(e&&e.apply(i,["image-too-small"]));var r=i._options.didLoad.apply(i,[n,t,o]);return r!==!0?(a(),r!==!1&&i._throwError(r),void(e&&e.apply(i,[r]))):void i._loadCanvas(t,function(){var t=i._getIntro(),n={fromScale:[1.25,1.25],scale:[1,1],fromOpacity:0,opacity:1,complete:function(){L(t),t.style.opacity=1,i._canInstantEdit()||i._showButtons(),i._stopProgressLoop(),i._removeState("busy"),i._addState("preview"),e&&e.apply(i,[null,i.data])}};i.isDetached()?n.duration=1:(n.easing="spring",n.springConstant=.3,n.springDeceleration=.7),i._canInstantEdit()&&(n.delay=500,n.duration=1,i._doEdit()),u(t,n)})})}}},{key:"_loadCanvas",value:function(t,e){var i=this;this._isBeingDestroyed||(this._isFixedRatio()||(this._ratio=t.height/t.width,this._scaleDropArea(this._ratio)),this._data.input.image=t,this._data.input.width=t.width,this._data.input.height=t.height,this._initialCrop?(this._data.actions.crop=ot(this._initialCrop),this._data.actions.crop.type=kt.INITIAL,this._initialCrop=null):(this._data.actions.crop=V(t.width,t.height,this._ratio),this._data.actions.crop.type=kt.AUTO),this._options.size&&(this._data.actions.size={width:this._options.size.width,height:this._options.size.height}),this._applyTransforms(t,function(t){var n=i._getIntro(),o=n.offsetWidth/t.width,a=!1;i._options.service&&i._options.push&&(i._hasInitialImage||(a=!0)),i._save(function(){},a),n.src="",n.src=Y(t,o).toDataURL(),n.onload=function(){n.onload=null,i._isBeingDestroyed||e&&e()}}))}},{key:"_applyTransforms",value:function(t,e){var i=this;G(t,this._data.actions,function(t){i._data.output.width=t.width,i._data.output.height=t.height,i._data.output.image=t,i._onTransformCanvas(function(t){i._data=t,i._options.didTransform.apply(i,[i.data]),e(i._data.output.image)})})}},{key:"_onTransformCanvas",value:function(t){this._options.willTransform.apply(this,[this.data,t])}},{key:"_appendEditor",value:function(){var t=this;this._imageEditor||(this._imageEditor=new gt(b("div"),{minSize:this._options.minSize,buttonConfirmClassName:this._options.buttonConfirmClassName,buttonCancelClassName:this._options.buttonCancelClassName,buttonRotateClassName:this._options.buttonRotateClassName,buttonConfirmLabel:this._options.buttonConfirmLabel,buttonCancelLabel:this._options.buttonCancelLabel,buttonRotateLabel:this._options.buttonRotateLabel,buttonConfirmTitle:this._options.buttonConfirmTitle,buttonCancelTitle:this._options.buttonCancelTitle,buttonRotateTitle:this._options.buttonRotateTitle}),Ct.forEach(function(e){t._imageEditor.element.addEventListener(e,t)}))}},{key:"_scaleDropArea",value:function(t){var e=this._getRatioSpacerElement();e&&this._element&&(e.style.marginBottom=100*t+"%",this._element.setAttribute("data-ratio","1:"+t))}},{key:"_onCancel",value:function(t){this._removeState("editor"),this._showButtons(),this._hideEditor()}},{key:"_onConfirm",value:function(t){var e=this;this._removeState("editor"),this._startProgressLoop(),this._addState("busy"),this._output.value="",this._data.actions.rotation=t.detail.rotation,this._data.actions.crop=t.detail.crop,this._data.actions.crop.type=kt.MANUAL,this._applyTransforms(this._data.input.image,function(t){var i=e._getInOut(),n="out"===i[0].className?i[0]:i[1],o=n===i[0]?i[1]:i[0];n.className="in",n.style.opacity="0",n.style.zIndex="2",o.className="out",o.style.zIndex="1",n.src="",n.src=Y(t,n.offsetWidth/t.width).toDataURL(),n.onload=function(){n.onload=null,"free"===e._options.ratio&&(e._ratio=n.naturalHeight/n.naturalWidth,e._scaleDropArea(e._ratio)),e._hideEditor(),setTimeout(function(){e._showPreview(n,function(){var t=e._options.service&&e._options.push;e._save(function(t,i,n){e._toggleButton("upload",!0),e._stopProgressLoop(),e._removeState("busy"),e._showButtons()},t)})},250)}})}},{key:"_crop",value:function(t,e,i,n){var o=this,a=arguments.length<=4||void 0===arguments[4]?function(){}:arguments[4];this._startProgressLoop(),this._addState("busy"),this._output.value="",this._data.actions.crop={x:t,y:e,width:i,height:n},this._data.actions.crop.type=kt.MANUAL,this._applyTransforms(this._data.input.image,function(t){var e=o._getInOut(),i="out"===e[0].className?e[0]:e[1],n=i===e[0]?e[1]:e[0];i.className="in",i.style.opacity="1",i.style.zIndex="2",n.className="out",n.style.zIndex="0",i.src="",i.src=Y(t,i.offsetWidth/t.width).toDataURL(),i.onload=function(){i.onload=null,"free"===o._options.ratio&&(o._ratio=i.naturalHeight/i.naturalWidth,o._scaleDropArea(o._ratio));var t=o._options.service&&o._options.push;o._save(function(t,e,i){o._stopProgressLoop(),o._removeState("busy"),a.apply(o,[o.data])},t)}})}},{key:"_save",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],i=arguments.length<=1||void 0===arguments[1]||arguments[1],n=this.dataBase64;this._options.service||this._isInitialising&&!this._isImageOnly()||this._options.willSave.apply(this,[n,function(e){t._store(e),t._options.didSave.apply(t,[e])}]),this._options.service&&i&&this._options.willSave.apply(this,[n,function(i){t._upload(i,function(n,o){n||t._storeServerResponse(o),t._options.didUpload.apply(t,[n,i,o]),e(n,i,o)})}]),this._options.service&&i||e()}},{key:"_storeServerResponse",value:function(t){this._isRequired&&(this._input.required=!1),this._data.server=t,this._output.value="object"===("undefined"==typeof t?"undefined":p(t))?JSON.stringify(this._data.server):t}},{key:"_store",value:function(t){this._isRequired&&(this._input.required=!1),this._output.value=JSON.stringify(t)}},{key:"_upload",value:function(t,e){var i=this,n=new FormData;n.append(this._output.name,JSON.stringify(t));var o=this._element.querySelector(".slim-upload-status"),a=this._options.willRequest;M(this._options.service,n,a,function(t,e){i._updateProgress(t/e)},function(t){setTimeout(function(){o.innerHTML=i._options.statusUploadSuccess,o.setAttribute("data-state","success"),o.style.opacity=1,setTimeout(function(){o.style.opacity=0},2e3)},250),e(null,t)},function(t){var n="";n="file-too-big"===t?i._options.statusContentLength:i._options.statusUnknownResponse,setTimeout(function(){o.innerHTML=n,o.setAttribute("data-state","error"),o.style.opacity=1},250),e(t)})}},{key:"_showEditor",value:function(){Pt.show(),this._imageEditor.show()}},{key:"_hideEditor",value:function(){this._imageEditor.hide(),setTimeout(function(){Pt.hide()},250)}},{key:"_showPreview",value:function(t,e){u(t,{fromPosition:[0,50,0],position:[0,0,0],fromScale:[1.5,1.5],scale:[1,1],fromOpacity:0,opacity:1,easing:"spring",springConstant:.3,springDeceleration:.7,complete:function(){L(t),e&&e()}})}},{key:"_hideResult",value:function(t){var e=this._getIntro();e&&u(e,{fromScale:[1,1],scale:[.5,.5],fromOpacity:1,opacity:0,easing:"spring",springConstant:.3,springDeceleration:.75,complete:function(){L(e),t&&t()}})}},{key:"_showButtons",value:function(t){this._btnGroup.style.display="";var e={fromScale:[.5,.5],scale:[1,1],fromPosition:[0,10,0],position:[0,0,0],fromOpacity:0,opacity:1,complete:function(){L(this)},allDone:function(){t&&t()}};this.isDetached()?e.duration=1:(e.delay=function(t){return 250+50*t},e.easing="spring",e.springConstant=.3,e.springDeceleration=.85),u(this._btnGroup.childNodes,e)}},{key:"_hideButtons",value:function(t){var e=this,i={fromScale:[1,1],scale:[.85,.85],fromOpacity:1,opacity:0,allDone:function(){e._btnGroup.style.display="none",t&&t()}};this.isDetached()?i.duration=1:(i.easing="spring",i.springConstant=.3,i.springDeceleration=.75),u(this._btnGroup.childNodes,i)}},{key:"_hideStatus",value:function(){var t=this._element.querySelector(".slim-upload-status");t.style.opacity=0}},{key:"_doEdit",value:function(){var t=this;this._data.input.image&&(this._addState("editor"),this._imageEditor||this._appendEditor(),Pt.inner=this._imageEditor.element,this._imageEditor.open(X(this._data.input.image),"free"===this._options.ratio?null:this._ratio,this._data.actions.crop,this._data.actions.rotation,function(){t._showEditor(),t._hideButtons(),t._hideStatus()}))}},{key:"_doRemove",value:function(){var t=this;if(!this._isImageOnly()){this._clearState(),this._addState("empty"),this._hasInitialImage=!1,this._imageHopper.enabled=!0,this._isRequired&&(this._input.required=!0);var e=this._getOutro();e&&(e.style.opacity="0");var i=this.data;return this._resetData(),setTimeout(function(){t._isBeingDestroyed||(t._hideButtons(function(){t._toggleButton("upload",!0)}),t._hideStatus(),t._hideResult(),t._options.didRemove.apply(t,[i]))},this.isDetached()?0:250),i}}},{key:"_doUpload",value:function(t){var e=this;this._data.input.image&&(this._addState("upload"),this._startProgress(),this._hideButtons(function(){e._toggleButton("upload",!1),e._save(function(i,n,o){e._removeState("upload"),e._stopProgress(),t&&t.apply(e,[i,n,o]),i&&e._toggleButton("upload",!0),e._showButtons()})}))}},{key:"_doDownload",value:function(){var t=this._data.output.image;t&&K(t,this._data.input.name,this._data.input.type)}},{key:"_doDestroy",value:function(){function t(t,e){return 0!==e.filter(function(e){return t.name===e.name&&t.value===e.value}).length}var e=this;this._isBeingDestroyed=!0,this._imageHopper&&(Et.forEach(function(t){e._imageHopper.element.removeEventListener(t,e)}),this._imageHopper.destroy()),this._imageEditor&&(Ct.forEach(function(t){e._imageEditor.element.removeEventListener(t,e)}),this._imageEditor.destroy()),lt(this._btnGroup.children).forEach(function(t){t.removeEventListener("click",e)}),this._input.removeEventListener("change",this),this._element!==this._originalElement&&this._element.parentNode&&this._element.parentNode.replaceChild(this._originalElement,this._element),this._originalElement.innerHTML=this._originalElementInner;var i=d(this._originalElement);i.forEach(function(i){t(i,e._originalElementAttributes)||e._originalElement.removeAttribute(i.name)}),this._originalElementAttributes.forEach(function(n){t(n,i)||e._originalElement.setAttribute(n.name,n.value)}),It=Math.max(0,It-1),Pt&&0===It&&(Pt.destroy(),Pt=null)}},{key:"dataBase64",get:function(){return ht(this._data,this._options.post,this._options.jpegCompression)}},{key:"data",get:function(){return at(this._data)}},{key:"element",get:function(){return this._element}},{key:"size",set:function(t){t&&t.width&&t.height&&(this._options.size=ot(t),this._data.actions.size=ot(t))}},{key:"ratio",set:function(t){if(t&&"string"==typeof t&&(this._options.ratio=t,this._isFixedRatio())){var e=wt(this._options.ratio,":");this._ratio=e[1]/e[0],this._scaleDropArea(this._ratio)}}}],[{key:"options",value:function(){var t={edit:!0,instantEdit:!1,meta:{},ratio:"free",size:null,crop:null,post:["output","actions"],service:null,push:!1,defaultInputName:"slim[]",minSize:{width:100,height:100},maxFileSize:null,jpegCompression:null,download:!1,saveInitialImage:!1,forceType:!1,label:"<p>Drop your image here</p>",statusFileType:"<p>Invalid file type, expects: $0.</p>",statusFileSize:"<p>File is too big, maximum file size: $0 MB.</p>",statusNoSupport:"<p>Your browser does not support image cropping.</p>",statusImageTooSmall:"<p>Image is too small, minimum size is: $0 pixels.</p>",statusContentLength:'<span class="slim-upload-status-icon"></span> The file is probably too big',statusUnknownResponse:'<span class="slim-upload-status-icon"></span> An unknown error occurred',statusUploadSuccess:'<span class="slim-upload-status-icon"></span> Saved',didInit:function(t){},didLoad:function(t,e,i){return!0},didSave:function(t){},didUpload:function(t,e,i){},didRemove:function(t){},didTransform:function(t){},willTransform:function(t,e){e(t)},willSave:function(t,e){e(t)},willRemove:function(t,e){e()},willRequest:function(t){}};return St.concat(gt.Buttons).concat("rotate").forEach(function(e){var i=P(e);t["button"+i+"ClassName"]=null,t["button"+i+"Label"]=i,t["button"+i+"Title"]=null}),t}}]),e}();return function(){function t(t){return t?"<p>"+t+"</p>":null}function e(t){var e=window,i=t.split(".");return i.forEach(function(t,n){e[i[n]]&&(e=e[i[n]])}),e!==window?e:null}var i=[],n=function(t){for(var e=0,n=i.length;e<n;e++)if(i[e].isAttachedTo(t))return e;return-1},o=function(t){return t},a=function(t){return"true"===t},r=function(t){return!t||"true"===t},s=function(e){return t(e)},h=function(t){return t?e(t):null},u=function(t){if(!t)return null;var e=wt(t,",");return{width:e[0],height:e[1]}},l=function(t){return t?parseFloat(t):null},c=function(t){return t?parseInt(t,10):null},p=function(t){if(!t)return null;var e={};return t.split(",").map(function(t){return parseInt(t,10)}).forEach(function(t,i){e[xt[i]]=t}),e},d={download:a,edit:r,instantEdit:a,minSize:u,size:u,service:function(t){return"undefined"==typeof t?null:t},push:a,crop:p,post:function(t){return t?t.split(",").map(function(t){return t.trim()}):null},defaultInputName:o,ratio:function(t){return t?t:null},maxFileSize:l,jpegCompression:c,forceType:a,saveInitialImage:a,label:s};["FileSize","FileType","NoSupport","ImageTooSmall"].forEach(function(t){d["status"+t]=s}),["ContentLength","UnknownResponse","UploadSuccess"].forEach(function(t){d["status"+t]=o}),["Init","Load","Save","Upload","Remove","Transform"].forEach(function(t){d["did"+t]=h}),["Transform","Save","Remove","Request"].forEach(function(t){d["will"+t]=h});var f=["ClassName","Label","Title"];St.concat(gt.Buttons).concat("rotate").forEach(function(t){var e=P(t);f.forEach(function(t){d["button"+e+t]=o})}),Mt.supported=function(){return"undefined"!=typeof window.FileReader}(),Mt.parse=function(t){var e,i,n,o=[];for(e=t.querySelectorAll(".slim:not([data-state])"),n=e.length;n--;)i=e[n],o.push(Mt.create(i,Mt.getOptionsFromAttributes(i)));return o},Mt.getOptionsFromAttributes=function(t){var e=t.dataset,i={meta:{}};for(var n in e){var o=d[n],a=e[n];o?(a=o(a),a=null===a?ot(Mt.options()[n]):a,i[n]=a):0===n.indexOf("meta")&&(i.meta[S(n.substr(4))]=a)}return i},Mt.find=function(t){var e=i.filter(function(e){return e.isAttachedTo(t)});return e?e[0]:null},Mt.create=function(t,e){if(!Mt.find(t)){e||(e=Mt.getOptionsFromAttributes(t));var n=new Mt(t,e);return i.push(n),n}},Mt.destroy=function(t){var e=n(t);return!(e<0)&&(i[e].destroy(),i[e]=null,i.splice(e,1),!0)}}(),Mt}();
define("jquery.slim", function(){});

define('models/dateSpan',["moment"],function(e){function t(e,t,n){this.dateFrom=e,this.dateTo=t,this.label=n}return t.minDate=e("2000-01-01"),t.maxDate=e().add(1,"days"),t.areDatesEqual=function(e,t){return e.format("YYYY-MM-DD")==t.format("YYYY-MM-DD")},t.prototype.dateFromString=function(){return this._isNotNullDate(this.dateFrom)?this.dateFrom.toISOString():null},t.prototype.dateToString=function(){return this._isNotNullDate(this.dateTo)?this.dateTo.toISOString():null},t.prototype.isValid=function(){return this.dateFrom&&this.dateFrom.isValid()&&this.dateTo&&this.dateTo.isValid()},t.prototype._isNotNullDate=function(e){return e&&e.isValid()},t});
define('components/date-filter/date-filter',["knockout","moment","models/dateSpan"],function(e,t,r){e.components.register("date-filter",{viewModel:function(a){function n(){c.chosenValue()?o(t(c.chosenValue().dateFrom),t(c.chosenValue().dateTo),c.chosenValue().label):i(t().startOf("day"),t().endOf("day"),e.T("date-filter/date-filter.today"));var a=[{label:e.T("date-filter/date-filter.today"),range:[t(),t()]},{label:e.T("date-filter/date-filter.yesterday"),range:[t().subtract(1,"days"),t().subtract(1,"days")]},{label:e.T("date-filter/date-filter.last_7_days"),range:[t().subtract(6,"days"),t()]},{label:e.T("date-filter/date-filter.last_30_days"),range:[t().subtract(29,"days"),t()]},{label:e.T("date-filter/date-filter.this_month"),range:[t().startOf("month"),t().endOf("month")]},{label:e.T("date-filter/date-filter.year-to-date"),range:[t().subtract(1,"year"),t()]},{label:e.T("date-filter/date-filter.all"),range:[r.minDate,r.maxDate]}],n={};a.forEach(function(e){n[e.label]=e.range}),$("#reportrange").daterangepicker({ranges:n,locale:{applyLabel:e.T("date-filter/date-filter.apply"),cancelLabel:e.T("date-filter/date-filter.cancel"),customRangeLabel:e.T("date-filter/date-filter.custom_range"),format:e.dateUtils.formats.dateFormat}},i),c.chosenValue()&&c.chosenValue().isValid()&&($("#reportrange").data("daterangepicker").setStartDate(c.chosenValue().dateFrom),$("#reportrange").data("daterangepicker").setEndDate(c.chosenValue().dateTo))}function o(t,r,a){null!=a&&a!=e.T("date-filter/date-filter.custom_range")?$("#reportrange span").html(a):t.isValid()&&r.isValid()&&$("#reportrange span").html(t.format("MMMM D, YYYY")+" - "+r.format("MMMM D, YYYY"))}function i(e,t,a){o(e,t,a);var n=new r(e,t,a);c.chosenValue(n)}var c=this;c.chosenValue=a.value||e.observable(),n()},template:{require:"text!components/date-filter/date-filter.html"}})});
define('plugins/http',["jquery","knockout"],function(e,t){return{callbackParam:"callback",toJSON:function(e){return t.toJSON(e)},get:function(n,r,a){return e.ajax(n,{data:r,headers:t.toJS(a)})},jsonp:function(n,r,a,o){return-1==n.indexOf("=?")&&(a=a||this.callbackParam,n+=-1==n.indexOf("?")?"?":"&",n+=a+"=?"),e.ajax({url:n,dataType:"jsonp",data:r,headers:t.toJS(o)})},put:function(n,r,a){return e.ajax({url:n,data:this.toJSON(r),type:"PUT",contentType:"application/json",dataType:"json",headers:t.toJS(a)})},post:function(n,r,a){return e.ajax({url:n,data:this.toJSON(r),type:"POST",contentType:"application/json",dataType:"json",headers:t.toJS(a)})},remove:function(n,r,a){return e.ajax({url:n,data:r,type:"DELETE",headers:t.toJS(a)})}}});
define('data/session',["knockout","durandal/app"],function(e,t){var n=e.observable("True"==userAuthenticated);return n.subscribe(function(e){e===!0?t.trigger("app:authorized"):t.trigger("app:unauthorized")}),{authorized:n}});
define('data/config',["knockout","durandal/app","plugins/http","plugins/router","data/session"],function(e,t,n,o){var a={enterpriseName:e.observable(),version:window.App.productVersion||"###",url:"api/config/get",isLoaded:!1,configLoading:null,fetchConfig:function(a){var r=this;return a&&(r.configLoading=null),r.configLoading?r.configLoading:(r.configLoading=n.get(r.url),r.configLoading.fail(function(){o.navigate("smartLogin")}).then(function(n){n.languages.sort(function(e,t){return e.id===n.defaultLanguage?-1:t.id===n.defaultLanguage?1:e.name<t.name?-1:1}),r.isLoading=!1,r.isLoaded=!0,r.config=n,r.stores=n.stores,r.businessUnitId=n.businessUnitId,r.enterpriseId=n.enterpriseId,r.enterpriseName(n.enterpriseName),r.language=n.language,r.defaultLanguage=n.defaultLanguage,r.languages=n.languages,r.countryId=n.countryId,r.unitOfMeasureId=n.unitOfMeasureId,r.productPictureMaxSize=n.productPictureMaxSize,r.importMaxFileSize=n.importMaxFileSize,r.isClockInApp=n.isClockInApp,r.isControlNumberApp=n.isControlNumberApp,r.isPoReceivingApp=n.isPoReceivingApp,r.isStoreTransferApp=n.isStoreTransferApp,r.isQuickbooksApp=n.isQuickbooksApp,r.variantApp=n.variantApp,r.ebtCardApp=n.ebtCardApp,r.supportNote=n.supportNote||e.T("dashboard/dashboard.noteMessageNotFound"),r.isCardPaymentApp=n.isCardPaymentApp,r.isOrderFulfilmentApp=n.isCardPaymentApp,r.isMenuBuilderApp=n.isMenuBuilderApp,r.isMarketingAndLoyaltyApp=n.isMarketingAndLoyaltyApp,r.employeeId=n.employeeId,r.fullName=n.fullName,r.nickname=n.nickname,r.productSortOrder=n.productSortOrder,r.poReceivingFullList=n.poReceivingFullList,r.storeTransferFullList=n.storeTransferFullList,r.isDemo=n.isDemo,r.demoName=n.demoName,t.trigger("app:config:changed",{config:r.config})}),r.configLoading)},clearConfig:function(){var e=this;e.configLoading=null,e.config=void 0,e.isLoaded=!1,e.isLoading=!1,e.loadPromise=void 0,e.businessUnitId="",e.enterpriseId="",e.enterpriseName(""),e.language="",e.stores=null,e.defaultLanguage="",e.languages={},e.countryId="",e.unitOfMeasureId="",e.productPictureMaxSize=null,e.importMaxFileSize=11e6,e.isClockInApp=!1,e.isControlNumberApp=!1,e.isPoReceivingApp=!1,e.isStoreTransferApp=!1,e.isQuickbooksApp=!1,e.variantApp=!1,e.ebtCardApp=!1,e.isCardPaymentApp=!1,e.isOrderFulfilmentApp=!1,e.isMenuBuilderApp=!1,e.isMarketingAndLoyaltyApp=!1,e.employeeId="",e.fullName="",e.nickname="",e.productSortOrder=null,e.poReceivingFullList=!1,e.storeTransferFullList=!1,e.isDemo=null,e.demoName=!1,t.trigger("app:config:changed",{config:e.config})},getEnterpriseId:function(){var e=this,t=$.Deferred();return null==e.enterpriseId?null!=e.configLoading?e.configLoading.then(function(e){t.resolve(e.enterpriseId)}):e.fetchConfig().then(function(e){t.resolve(e.enterpriseId)}):t.resolve(e.enterpriseId),t.promise()},reload:function(){var e=this;return e.clearConfig(),e.fetchConfig()},saveFullList:function(){var e=this;return n.post("api/Config/SaveFullList",{poReceivingFullList:e.poReceivingFullList,storeTransferFullList:e.storeTransferFullList})}};return a});
define('services/text',["durandal/app","plugins/router","langs","data/config"],function(e,t,n){function r(e){n=n||e,n&&n.init().then(function(){f.resolve()})}function a(e){return n?n.get(e):void 0}function i(e){var t={},e=e.replace(/text:\/\//,""),n=e.indexOf(":"),r=e.indexOf(".");n>=0&&r>n&&(t.lang=e.substring(0,n),e=e.substring(n+1));var a=e.indexOf("?");if(a>0){var i=e.substring(a+1),o=i.split("|");t.params=o,e=e.substring(0,a)}return t.key=e,t}function o(e,t){var n=e;if(t){var r=t;t.constructor!==Array&&(r=[t]);for(var a=r.length,i=0;a>i;i++)n=n.replace(new RegExp("\\{"+i+"\\}","gi"),r[i])}return n}function s(e,n,r){if(!e)return e;if("string"!=typeof e)throw new Error("Wrong type of localization key");var u;e.indexOf("text://")>=0&&(u=i(e),n=n||u.lang,e=u.key,r=u.params),n||(n=m||p);var l,c="",d=e.indexOf(".");if(-1===d)l=t.activeInstruction()?t.activeInstruction().fragment||"login":"login";else if(d===e.length-1)l=t.activeInstruction()?t.activeInstruction().fragment||"login":"login";else{l=e.substr(0,d);var f=e.substr(d+1);f&&(e=f)}var y=a(n),v=a(p);return c=y&&y[l]&&y[l][e]?y[l][e]:v&&v[l]&&v[l][e]?v[l][e]:e,r=r||[],r.constructor!==Array&&(r=[r]),c=o(c,r.map(function(e){return"string"==typeof e&&null!=e&&e.indexOf("text://")>=0?s(e,n):e}))}function u(t){m=t?t.toLowerCase():"",e.trigger("app:lang:changed",{lang:m})}function l(e){return e=m||p}function c(){return p}function d(e){return null===e?"":'"'+e.replace(y,'""')+'"'}var p=App?App.defaultLang||"en":"en",m=App?App.lang||App.enterpriseLang||App.defaultLang||"":"",f=new $.Deferred;Array.prototype.slice.call(arguments),e.on("app:config:changed",function(e){e&&e.config?u(e.config.language):u("")});var y=/\"/g;return{getString:s,setLang:u,getLang:l,getDefaultLang:c,T:s,init:r,initPromise:f.promise(),csvEscape:d}});
define('repositories/base/baseRepository',["knockout","plugins/http","durandal/system","data/config","services/text"],function(e,t,n,r,i){var o=function(e){this.initialize.call(this,e)};return $.extend(o.prototype,{name:"BaseRepository",baseUrl:"api/",entityName:"",modelType:null,routeType:{routeTypeByEntityType:"ByEntityType",routeTypeByEntityName:"ByEntityName"},initialize:function(e){this.options=$.extend({},{model:null,modelType:{},headers:"",baseUrl:"",routeType:this.routeType.routeTypeByEntityType},e),this.baseUrl=this.options.baseUrl||this.baseUrl,this.modelType=this.options.model&&this.options.model.options&&this.options.model.options.modelDesc?this.options.model.options.modelDesc:this.options.modelDesc,this.headers=this.options.headers,n.assert(this.modelType,"modelType not defined in "+this.name),this.entityName=this.modelType.entityName,this.entityType=this.modelType.entityType||"",this.entityType&&(this.entityType+="/")},getUrl:function(e){return this.options.routeType===this.routeType.routeTypeByEntityType?this.baseUrl+this.entityType+"Get"+this.entityName+(e?"/"+e:""):this.baseUrl+this.entityName+"/"+"Get"+(e?"/"+e:"")},getAllUrl:function(e){return this.options.routeType===this.routeType.routeTypeByEntityType?this.baseUrl+this.entityType+"GetAll"+this.entityName+(e?"/"+e:""):this.baseUrl+this.entityName+"/"+"GetAll"+(e?"/"+e:"")},saveUrl:function(e){return this.options.routeType===this.routeType.routeTypeByEntityType?this.baseUrl+this.entityType+"Save"+this.entityName+(e?"/"+e:""):this.baseUrl+this.entityName+"/"+"Save"+(e?"/"+e:"")},removeUrl:function(e){return this.options.routeType===this.routeType.routeTypeByEntityType?this.baseUrl+this.entityType+"Remove"+this.entityName+(e?"/"+e:""):this.baseUrl+this.entityName+"/"+"Remove"+(e?"/"+e:"")},create:function(){return this.modelType?Object.create(this.modelType):null},load:function(e,o,a,s,u){var l=null==s||s===!0?r.enterpriseId:null;e=e||{},e.lang=i.getLang().toUpperCase(),e.defaultLang=i.getDefaultLang().toUpperCase();var c=null;return c=u?t.post(this.getUrl(l),e,this.headers):t.get(this.getUrl(l),e,this.headers),c.then(o),a?c.fail(a):c.fail(function(e){n.error(e.statusText)}),c},loadSync:function(t,n,i,o){var a=null==o||o===!0?r.enterpriseId:null,s=[];return $.ajax({type:"GET",url:this.getUrl(a),data:t,async:!1,success:function(t){s=e.mapping.fromJS(t)}}),s},save:function(e,n,r){var i=t.post(this.saveUrl(),e.toPlainObject?e.toPlainObject():e,this.headers);return i.done(n),i.fail(r),i},remove:function(e,n,r){var i=t.remove(this.removeUrl(),e.toPlainObject?e.toPlainObject():e,this.headers);return i.done(n),i.fail(r),i}}),o});
define('components/qb-accounts/qb-accounts',["knockout","data/config","repositories/base/baseRepository"],function(e,t,n){var o=new n({routeType:"ByEntityName",modelDesc:{entityName:"QuickbooksAccount"}});e.components.register("qb-accounts",{viewModel:function(n){function a(){return t.fetchConfig().then(function(){return o.load({id:t.enterpriseId},function(e){var t=[];e&&(t=e.map(function(e){return{name:e.fullyQualifiedName,id:e.qbId,classification:e.classification}})),i(t),s.assetAccountId(c.assetAccountId()),s.incomeAccountId(c.incomeAccountId()),s.expenseAccountId(c.expenseAccountId()),r()})})}function r(){s.isInheritAccounts.subscribe(function(e){c.isInheritAccounts(e)}),s.assetAccountId.subscribe(function(e){c.assetAccountId(e)}),s.incomeAccountId.subscribe(function(e){c.incomeAccountId(e)}),s.expenseAccountId.subscribe(function(e){c.expenseAccountId(e)})}function i(t){if(t){var n=t.filter(function(e){return"Asset"===e.classification}),o=t.filter(function(e){return"Expense"===e.classification}),a=t.filter(function(e){return"Revenue"===e.classification});n.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),o.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),a.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),n.unshift({name:e.T("quickbooks.select_account"),id:""}),o.unshift({name:e.T("quickbooks.select_account"),id:""}),a.unshift({name:e.T("quickbooks.select_account"),id:""}),s.assetAccounts(n),s.incomeAccounts(a),s.expenseAccounts(o)}}var s=this,c=e.unwrap(n.value);s.inheritText=e.observable(e.T(e.unwrap(c.inheritText))||e.T("quickbooks.Inherit Accounts")),s.canInherit=e.observable(e.unwrap(c.canInherit)),s.assetAccounts=e.observableArray(),s.incomeAccounts=e.observableArray(),s.expenseAccounts=e.observableArray(),s.isInheritAccounts=e.observable(),s.assetAccountId=e.observable(),s.incomeAccountId=e.observable(),s.expenseAccountId=e.observable(),s.isInheritAccounts(c.isInheritAccounts()),a()},template:{require:"text!components/qb-accounts/qb-accounts.html"}})});
define('components/puertoRico-controlNumber/pr-controlNumber',["knockout","data/config","repositories/base/baseRepository"],function(e){e.components.register("pr-control-number",{viewModel:function(t){function n(){o()}function o(){a.puertoRicoTaxTypeSubsc=a.puertoRicoTaxType.subscribe(function(e){r.puertoRicoTaxType(e)})}var a=this,r=e.unwrap(t.value);a.inheritText=e.observable(e.T(e.unwrap(r.inheritText))||e.T("quickbooks.Inherit Accounts")),a.canInherit=e.observable(e.unwrap(r.canInherit)),a.taxTypes=e.observableArray(r.taxTypes().map(function(t){return{id:t,name:e.T("apps/controlNumber."+t)}})),a.taxTypes().unshift({id:"",name:""}),a.id=e.observable(r.id()),a.enterpriseId=e.observable(r.enterpriseId()),a.taxId=e.observable(r.taxId()),a.puertoRicoTaxType=e.observable(r.puertoRicoTaxType()),n(),a.dispose=function(){a.puertoRicoTaxTypeSubsc&&a.puertoRicoTaxTypeSubsc.dispose()}},template:{require:"text!components/puertoRico-controlNumber/pr-controlNumber.html"}})});
define('common/utils',[],function(){function e(e,r){var t=function(){};t.prototype=r.prototype,e.prototype=new t,e.prototype.constructor=e,e.superclass=r.prototype}function r(e){return $.isFunction(e)}function t(e){e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var r=new RegExp("[\\?&]"+e+"=([^&#]*)"),t=r.exec(location.search);return null===t?"":decodeURIComponent(t[1].replace(/\+/g," "))}function n(){return t("id")}function a(){var e=document.cookie.replace(/(?:(?:^|.*;\s*)EnterpriseCode\s*\=\s*([^;]*).*$)|^.*$/,"$1");return e}function o(e){var r=new Date;r.setFullYear(r.getFullYear()+1);var t="EnterpriseCode="+e+"; path=/; expires="+r.toUTCString();document.cookie=t}function i(e,r,t){var n=new RegExp("([?&])"+r+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+r+"="+t+"$2"):e+a+r+"="+t}function c(e,r,t,n){var a=screen.width/2-t/2,o=screen.height/2-n/2;return window.open(e,r,"toolbar=no, location=no, directories=no, status=no, menubar=no, scrollbars=no, resizable=no, copyhistory=no, width="+t+", height="+n+", top="+o+", left="+a)}function u(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+e()+e()+e()+e()+e()+e()}function m(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return p[e]})}var p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};return{extend:e,isFunction:r,getIdFromQuery:n,getIdFromCookie:a,setEnterpriseCodeCookie:o,updateQueryStringParameter:i,getParameterByName:t,popupWindow:c,generateId:u,escapeHtml:m}});
define('components/multiSelector/multiSelector',["knockout","services/text","common/utils"],function(e,t,n){var o={single:!1,filter:!0,position:"bottom",disabled:!1,maxHeight:"250px",editable:!1,selectAll:!0,minumimCountSelected:3,multiple:!1,multipleWidth:80,width:"100%",container:null,keepOpen:!1,blockSeparator:"",controlsVisible:!0,optionText:"name",optionId:"id",optionDisplayText:"",selectedItemsArr:e.observableArray(),createNewArrItem:function(){return null},itemId:""};e.components.register("multi-selector",{viewModel:function(a){function r(t,n,o){return o?(e.unwrap(t[g.options.optionDisplayText])||"").toLowerCase()===n:(e.unwrap(t[g.options.optionDisplayText])||"").toLowerCase().indexOf(n)>=0}function i(){}function s(t,n){var o=(e.unwrap(t[g.options.optionDisplayText])||"").toLowerCase(),a=(e.unwrap(n[g.options.optionDisplayText])||"").toLowerCase();return a>o?-1:o>a?1:0}function l(){var e=g.data();if(g.isOpen()){var t=g.options.filterFunc||r,n=g.currentTextValue().trim().toLowerCase(),o=g.data().filter(function(e){return t(e,n)});e=o}else e=g.data();e.sort(s),g.filteredData(e)}function c(){var e=g.data();e.sort(s),g.filteredData(e)}function u(){g.data().forEach(function(e){e.itemSelected("")})}function p(t){g.data().forEach(function(n){e.unwrap(n[g.options.optionId])===t?n.itemSelected(t):n.itemSelected("")})}function d(e){var t=g.options.filterFunc||r;g.data().forEach(function(n){t(n,e,!0)||(n.itemSelected(""),g.selectedItems.remove(n))})}function m(){g.selectedItems().forEach(function(t){var n=g.data().filter(function(n){return e.unwrap(n[g.options.optionId])===e.unwrap(t[g.options.optionId])});n=n.length>0?n[0]:null,n&&n.itemSelected(e.unwrap(t[g.options.optionId]))}),g.options.keepOpen||$("body").click(function(){g.isOpen()&&g.isOpen(!1)})}var f,g=this;g.subscriptions=[],g.options=$.extend({},o,e.unwrap(a.options)),g.options.no_matches_text=e.T(g.options.no_matches_label||"multiselect.no_matches"),g.options.filter_text=e.T(g.options.filter_placeholder||"multiselect.enter_value"),g.options.select_all_text=e.T(g.options.select_all_text||"multiselect.select_all"),g.filterId=n.generateId(),g.dataid=g.options.dataid||g.filterId,g.isOpen=e.observable(!1),g.msDropStyle=e.computed(function(){return g.options.position+" "+(g.options.noRadio?"ms-no-radio":"")}),g.options.optionDisplayText||(g.options.optionDisplayText=g.options.optionText),g.chackAllId="chkSelectAll_"+g.dataid,g.selectorValueText=e.observable(""),g.validationElement=g.options.validationElement?g.options.validationElement:g.selectorValueText,g.options.isLocalized=null!=g.options.localizedValueText;var b=!1;t.getDefaultLang().toUpperCase(),g.options.isLocalized?(g.localizedValueText=g.options.localizedValueText,g.selectorValueText(g.localizedValueText().name()),f=g.localizedValueText.subscribe(function(e){l(),b=!0,g.selectorValueText(e.name()),setTimeout(function(){b=!1},1)}),g.subscriptions.push(f)):(g.valueText=g.options.valueText,g.selectorValueText(g.valueText())),f=g.selectorValueText.subscribe(function(e){b||(g.options.isLocalized?g.localizedValueText().name(e):g.valueText(e),l(),textClean=e.trim().toLowerCase(),d(textClean))}),g.subscriptions.push(f),g.currentTextValue=e.computed(function(){return g.selectorValueText()},g,{pure:!0}),g.setCurrentTextValue=function(e){g.selectorValueText(e||"")},g.enabled=e.computed(function(){return e.isObservable(g.options.disabled)?!e.unwrap(g.options.disabled):!g.options.disabled},this,{pure:!0});var h=e.unwrap(g.options.data)||[];h=h.map(function(t){return $.extend({},t,{itemSelected:e.observable(!1)})}),h.sort(s),g.data=e.observableArray(h),g.filteredData=e.observableArray(h),g.dataRefreshTriger=g.options.dataRefreshTriger,g.dataRefreshTriger&&(f=g.dataRefreshTriger.subscribe(function(){var e=g.data();e.sort(s),g.filteredData(e)}),g.subscriptions.push(f)),g.selectAll=e.observable(!1),f=g.selectAll.subscribe(function(e){i(e)}),g.subscriptions.push(f),g.selectedItems=g.options.selectedItems||e.observableArray([]),f=g.selectedItems.subscribe(function(){if(g.options.single&&g.selectedItems().length>0){var t=g.selectedItems()[0];b=!0,g.setCurrentTextValue(e.unwrap(t[g.options.optionDisplayText])),setTimeout(function(){b=!1},1);var n=e.unwrap(t[g.options.optionId]);p(n),g.options.selectedItem&&g.options.selectedItem(n)}}),g.subscriptions.push(f),g.options.selectedItem&&g.options.selectedItem()&&p(g.options.selectedItem()),f=g.isOpen.subscribe(function(e){e&&c()}),g.subscriptions.push(f),g.options.uniqeValidation&&g.options.single&&(g.options.isLocalized?g.validationElement.extend({uniqueName:{params:{array:g.data().map(function(t){return e.unwrap(t[g.options.optionDisplayText])}),ignore:e.computed(function(){return g.selectedItems().length>0?[e.unwrap(g.selectedItems()[0][g.options.optionDisplayText])]:[]})},message:g.options.uniqeValidationMessage}}):g.validationElement.extend({uniqueName:{params:{array:g.data().map(function(t){return e.unwrap(t[g.options.optionDisplayText])}),ignore:e.computed(function(){return g.selectedItems().length>0?[e.unwrap(g.selectedItems()[0][g.options.optionDisplayText])]:[]})},message:g.options.uniqeValidationMessage}})),g.selectControlClick=function(){g.isOpen(!g.isOpen())},g.onSelectorClick=function(e,t){t.stopPropagation()},g.selectItem=function(t){var n=t.itemSelected();g.options.single&&u(),n?t.itemSelected(""):t.itemSelected(e.unwrap(t[g.options.optionId])),t.itemSelected()?g.options.single?g.selectedItems([t]):g.selectedItems.push(t):g.options.single?g.selectedItems([]):g.selectedItems.remove(t),g.options.autohide&&g.isOpen(!1)},g.dispose=function(){g.subscriptions.forEach(function(e){e.dispose()}),g.subscriptions.length=0},m()},template:{require:"text!components/multiSelector/multiSelector.html"}})});
/**
* @version: 2.0.6
* @author: Dan Grossman http://www.dangrossman.info/
* @copyright: Copyright (c) 2012-2015 Dan Grossman. All rights reserved.
* @license: Licensed under the MIT license. See http://www.opensource.org/licenses/mit-license.php
* @website: https://www.improvely.com/
*/

(function(root, factory) {

  if (typeof define === 'function' && define.amd) {
    define('daterangepicker',['moment', 'jquery', 'exports'], function(momentjs, $, exports) {
      root.daterangepicker = factory(root, exports, momentjs, $);
    });

  } else if (typeof exports !== 'undefined') {
    var momentjs = require('moment');
    var jQuery = window.jQuery;
    if (jQuery === undefined) {
      try {
        jQuery = require('jquery');
      } catch (err) {
        if (!jQuery) throw new Error('jQuery dependency not found');
      }
    }

    factory(root, exports, momentjs, jQuery);

  // Finally, as a browser global.
  } else {
    root.daterangepicker = factory(root, {}, root.moment || moment, (root.jQuery || root.Zepto || root.ender || root.$));
  }

}(this, function(root, daterangepicker, moment, $) {

    var DateRangePicker = function(element, options, cb) {

        //default settings for options
        this.parentEl = 'body';
        this.element = $(element);
        this.startDate = moment().startOf('day');
        this.endDate = moment().endOf('day');
        this.timeZone = moment().utcOffset();
        this.minDate = false;
        this.maxDate = false;
        this.dateLimit = false;
        this.autoApply = false;
        this.singleDatePicker = false;
        this.showDropdowns = false;
        this.showWeekNumbers = false;
        this.timePicker = false;
        this.timePicker24Hour = false;
        this.timePickerIncrement = 1;
        this.timePickerSeconds = false;
        this.ranges = {};

        this.opens = 'right';
        if (this.element.hasClass('pull-right'))
            this.opens = 'left';

        this.drops = 'down';
        if (this.element.hasClass('dropup'))
            this.drops = 'up';

        this.buttonClasses = 'btn btn-sm';
        this.applyClass = 'btn-success';
        this.cancelClass = 'btn-default';

        this.locale = {
            format: 'MM/DD/YYYY',
            separator: ' - ',
            applyLabel: 'Apply',
            cancelLabel: 'Cancel',
            weekLabel: 'W',
            customRangeLabel: 'Custom Range',
            daysOfWeek: moment.weekdaysMin(),
            monthNames: moment.monthsShort(),
            firstDay: moment.localeData().firstDayOfWeek()
        };

        this.callback = function() { };

        //some state information
        this.isShowing = false;
        this.leftCalendar = {};
        this.rightCalendar = {};

        //custom options from user
        if (typeof options !== 'object' || options === null)
            options = {};

        //allow setting options with data attributes
        //data-api options will be overwritten with custom javascript options
        options = $.extend(this.element.data(), options);

        //html template for the picker UI
        if (typeof options.template !== 'string')
            options.template = '<div class="daterangepicker dropdown-menu">' +
                '<div class="calendar left">' +
                    '<div class="daterangepicker_input">' +
                      '<input class="input-mini" type="text" name="daterangepicker_start" value="" />' +
                      '<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>' +
                      '<div class="calendar-time">' +
                        '<div></div>' +
                        '<i class="fa fa-clock-o glyphicon glyphicon-time"></i>' +
                      '</div>' +
                    '</div>' +
                    '<div class="calendar-table"></div>' +
                '</div>' +
                '<div class="calendar right">' +
                    '<div class="daterangepicker_input">' +
                      '<input class="input-mini" type="text" name="daterangepicker_end" value="" />' +
                      '<i class="fa fa-calendar glyphicon glyphicon-calendar"></i>' +
                      '<div class="calendar-time">' +
                        '<div></div>' +
                        '<i class="fa fa-clock-o glyphicon glyphicon-time"></i>' +
                      '</div>' +
                    '</div>' +
                    '<div class="calendar-table"></div>' +
                '</div>' +
                '<div class="ranges">' +
                    '<div class="range_inputs">' +
                        '<button class="applyBtn" disabled="disabled" type="button"></button> ' +
                        '<button class="cancelBtn" type="button"></button>' +
                    '</div>' +
                '</div>' +
            '</div>';

        this.parentEl = (options.parentEl && $(options.parentEl).length) ? $(options.parentEl) : $(this.parentEl);
        this.container = $(options.template).appendTo(this.parentEl);

        //
        // handle all the possible options overriding defaults
        //

        if (typeof options.locale === 'object') {

            if (typeof options.locale.format === 'string')
                this.locale.format = options.locale.format;

            if (typeof options.locale.separator === 'string')
                this.locale.separator = options.locale.separator;

            if (typeof options.locale.daysOfWeek === 'object')
                this.locale.daysOfWeek = options.locale.daysOfWeek.slice();

            if (typeof options.locale.monthNames === 'object')
              this.locale.monthNames = options.locale.monthNames.slice();

            if (typeof options.locale.firstDay === 'number')
              this.locale.firstDay = options.locale.firstDay;

            if (typeof options.locale.applyLabel === 'string')
              this.locale.applyLabel = options.locale.applyLabel;

            if (typeof options.locale.cancelLabel === 'string')
              this.locale.cancelLabel = options.locale.cancelLabel;

            if (typeof options.locale.weekLabel === 'string')
              this.locale.weekLabel = options.locale.weekLabel;

            if (typeof options.locale.customRangeLabel === 'string')
              this.locale.customRangeLabel = options.locale.customRangeLabel;

        }

        if (typeof options.startDate === 'string')
            this.startDate = moment(options.startDate, this.locale.format);

        if (typeof options.endDate === 'string')
            this.endDate = moment(options.endDate, this.locale.format);

        if (typeof options.minDate === 'string')
            this.minDate = moment(options.minDate, this.locale.format);

        if (typeof options.maxDate === 'string')
            this.maxDate = moment(options.maxDate, this.locale.format);

        if (typeof options.startDate === 'object')
            this.startDate = moment(options.startDate);

        if (typeof options.endDate === 'object')
            this.endDate = moment(options.endDate);

        if (typeof options.minDate === 'object')
            this.minDate = moment(options.minDate);

        if (typeof options.maxDate === 'object')
            this.maxDate = moment(options.maxDate);

        // sanity check for bad options
        if (this.minDate && this.startDate.isBefore(this.minDate))
            this.startDate = this.minDate.clone();

        // sanity check for bad options
        if (this.maxDate && this.endDate.isAfter(this.maxDate))
            this.endDate = this.maxDate.clone();

        if (typeof options.applyClass === 'string')
            this.applyClass = options.applyClass;

        if (typeof options.cancelClass === 'string')
            this.cancelClass = options.cancelClass;

        if (typeof options.dateLimit === 'object')
            this.dateLimit = options.dateLimit;

        if (typeof options.opens === 'string')
            this.opens = options.opens;

        if (typeof options.drops === 'string')
            this.drops = options.drops;

        if (typeof options.showWeekNumbers === 'boolean')
            this.showWeekNumbers = options.showWeekNumbers;

        if (typeof options.buttonClasses === 'string')
            this.buttonClasses = options.buttonClasses;

        if (typeof options.buttonClasses === 'object')
            this.buttonClasses = options.buttonClasses.join(' ');

        if (typeof options.showDropdowns === 'boolean')
            this.showDropdowns = options.showDropdowns;

        if (typeof options.singleDatePicker === 'boolean') {
            this.singleDatePicker = options.singleDatePicker;
            if (this.singleDatePicker)
                this.endDate = this.startDate.clone();
        }

        if (typeof options.timePicker === 'boolean')
            this.timePicker = options.timePicker;

        if (typeof options.timePickerSeconds === 'boolean')
            this.timePickerSeconds = options.timePickerSeconds;

        if (typeof options.timePickerIncrement === 'number')
            this.timePickerIncrement = options.timePickerIncrement;

        if (typeof options.timePicker24Hour === 'boolean')
            this.timePicker24Hour = options.timePicker24Hour;

        if (typeof options.autoApply === 'boolean')
            this.autoApply = options.autoApply;

        // update day names order to firstDay
        if (this.locale.firstDay != 0) {
            var iterator = this.locale.firstDay;
            while (iterator > 0) {
                this.locale.daysOfWeek.push(this.locale.daysOfWeek.shift());
                iterator--;
            }
        }

        var start, end, range;

        //if no start/end dates set, check if an input element contains initial values
        if (typeof options.startDate === 'undefined' && typeof options.endDate === 'undefined') {
            if ($(this.element).is('input[type=text]')) {
                var val = $(this.element).val(),
                    split = val.split(this.locale.separator);

                start = end = null;

                if (split.length == 2) {
                    start = moment(split[0], this.locale.format);
                    end = moment(split[1], this.locale.format);
                } else if (this.singleDatePicker && val !== "") {
                    start = moment(val, this.locale.format);
                    end = moment(val, this.locale.format);
                }
                if (start !== null && end !== null) {
                    this.setStartDate(start);
                    this.setEndDate(end);
                }
            }
        }

        // bind the time zone used to build the calendar to either the timeZone passed in through the options or the zone of the startDate (which will be the local time zone by default)
        if (typeof options.timeZone === 'string' || typeof options.timeZone === 'number') {
            if (typeof options.timeZone === 'string' && typeof moment.tz !== 'undefined') {
                this.timeZone = moment.tz.zone(options.timeZone).parse(new Date) * -1;  // Offset is positive if the timezone is behind UTC and negative if it is ahead.
            } else {
                this.timeZone = options.timeZone;
            }
          this.startDate.utcOffset(this.timeZone);
          this.endDate.utcOffset(this.timeZone);
        } else {
            this.timeZone = moment(this.startDate).utcOffset();
        }

        if (typeof options.ranges === 'object') {
            for (range in options.ranges) {

                if (typeof options.ranges[range][0] === 'string')
                    start = moment(options.ranges[range][0], this.locale.format);
                else
                    start = moment(options.ranges[range][0]);

                if (typeof options.ranges[range][1] === 'string')
                    end = moment(options.ranges[range][1], this.locale.format);
                else
                    end = moment(options.ranges[range][1]);

                // If the start or end date exceed those allowed by the minDate or dateLimit
                // options, shorten the range to the allowable period.
                if (this.minDate && start.isBefore(this.minDate))
                    start = this.minDate.clone();

                var maxDate = this.maxDate;
                if (this.dateLimit && start.clone().add(this.dateLimit).isAfter(maxDate))
                    maxDate = start.clone().add(this.dateLimit);
                if (maxDate && end.isAfter(maxDate))
                    end = maxDate.clone();

                // If the end of the range is before the minimum or the start of the range is
                // after the maximum, don't display this range option at all.
                if ((this.minDate && end.isBefore(this.minDate)) || (maxDate && start.isAfter(maxDate)))
                    continue;

                this.ranges[range] = [start, end];
            }

            var list = '<ul>';
            for (range in this.ranges) {
                list += '<li>' + range + '</li>';
            }
            list += '<li>' + this.locale.customRangeLabel + '</li>';
            list += '</ul>';
            this.container.find('.ranges ul').remove();
            this.container.find('.ranges').prepend(list);
        }

        if (typeof cb === 'function') {
            this.callback = cb;
        }

        if (!this.timePicker) {
            this.startDate = this.startDate.startOf('day');
            this.endDate = this.endDate.endOf('day');
            this.container.find('.calendar-time').hide();
        }

        //can't be used together for now
        if (this.timePicker && this.autoApply)
            this.autoApply = false;

        if (this.autoApply && typeof options.ranges !== 'object') {
            this.container.find('.ranges').hide();
        } else if (this.autoApply) {
            this.container.find('.applyBtn, .cancelBtn').addClass('hide');
        }

        if (this.singleDatePicker) {
            this.container.addClass('single');
            this.container.find('.calendar.left').addClass('single');
            this.container.find('.calendar.left').show();
            this.container.find('.calendar.right').hide();
            this.container.find('.daterangepicker_input input, .daterangepicker_input i').hide();
            if (!this.timePicker) {
                this.container.find('.ranges').hide();
            }
        }

        if (typeof options.ranges === 'undefined' && !this.singleDatePicker) {
            this.container.addClass('show-calendar');
        }

        this.container.removeClass('opensleft opensright').addClass('opens' + this.opens);

        //apply CSS classes and labels to buttons
        this.container.find('.applyBtn, .cancelBtn').addClass(this.buttonClasses);
        if (this.applyClass.length)
            this.container.find('.applyBtn').addClass(this.applyClass);
        if (this.cancelClass.length)
            this.container.find('.cancelBtn').addClass(this.cancelClass);
        this.container.find('.applyBtn').html(this.locale.applyLabel);
        this.container.find('.cancelBtn').html(this.locale.cancelLabel);

        //
        // event listeners
        //

        this.container.find('.calendar')
            .on('click.daterangepicker', '.prev', $.proxy(this.clickPrev, this))
            .on('click.daterangepicker', '.next', $.proxy(this.clickNext, this))
            .on('click.daterangepicker', 'td.available', $.proxy(this.clickDate, this))
            .on('mouseenter.daterangepicker', 'td.available', $.proxy(this.hoverDate, this))
            .on('mouseleave.daterangepicker', 'td.available', $.proxy(this.updateFormInputs, this))
            .on('change.daterangepicker', 'select.yearselect', $.proxy(this.monthOrYearChanged, this))
            .on('change.daterangepicker', 'select.monthselect', $.proxy(this.monthOrYearChanged, this))
            .on('change.daterangepicker', 'select.hourselect,select.minuteselect,select.secondselect,select.ampmselect', $.proxy(this.timeChanged, this))
            .on('click.daterangepicker', '.daterangepicker_input input', $.proxy(this.showCalendars, this))
            .on('keyup.daterangepicker', '.daterangepicker_input input', $.proxy(this.formInputsChanged, this))
            .on('change.daterangepicker', '.daterangepicker_input input', $.proxy(this.updateFormInputs, this));

        this.container.find('.ranges')
            .on('click.daterangepicker', 'button.applyBtn', $.proxy(this.clickApply, this))
            .on('click.daterangepicker', 'button.cancelBtn', $.proxy(this.clickCancel, this))
            .on('click.daterangepicker', 'li', $.proxy(this.clickRange, this))
            .on('mouseenter.daterangepicker', 'li', $.proxy(this.hoverRange, this))
            .on('mouseleave.daterangepicker', 'li', $.proxy(this.updateFormInputs, this));

        if (this.element.is('input')) {
            this.element.on({
                'click.daterangepicker': $.proxy(this.show, this),
                'focus.daterangepicker': $.proxy(this.show, this),
                'keyup.daterangepicker': $.proxy(this.controlChanged, this),
                'keydown.daterangepicker': $.proxy(this.keydown, this)
            });
        } else {
            this.element.on('click.daterangepicker', $.proxy(this.toggle, this));
        }

        //
        // if attached to a text input, set the initial value
        //

        if (this.element.is('input') && !this.singleDatePicker) {
            this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format));
            this.element.trigger('change');
        } else if (this.element.is('input')) {
            this.element.val(this.startDate.format(this.locale.format));
            this.element.trigger('change');
        }

    };

    DateRangePicker.prototype = {

        constructor: DateRangePicker,

        setStartDate: function(startDate) {
            if (typeof startDate === 'string')
                this.startDate = moment(startDate, this.locale.format).utcOffset(this.timeZone);

            if (typeof startDate === 'object')
                this.startDate = moment(startDate);

            if (!this.timePicker)
                this.startDate = this.startDate.startOf('day');

            if (this.timePicker && this.timePickerIncrement)
                this.startDate.minute(Math.round(this.startDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);

            if (this.minDate && this.startDate.isBefore(this.minDate))
                this.startDate = this.minDate;

            if (this.maxDate && this.startDate.isAfter(this.maxDate))
                this.startDate = this.maxDate;

            this.updateMonthsInView();
        },

        setEndDate: function(endDate) {
            if (typeof endDate === 'string')
                this.endDate = moment(endDate, this.locale.format).utcOffset(this.timeZone);

            if (typeof endDate === 'object')
                this.endDate = moment(endDate);

            if (!this.timePicker)
                this.endDate = this.endDate.endOf('day');

            if (this.timePicker && this.timePickerIncrement)
                this.endDate.minute(Math.round(this.endDate.minute() / this.timePickerIncrement) * this.timePickerIncrement);

            if (this.endDate.isBefore(this.startDate))
                this.endDate = this.startDate.clone();

            if (this.maxDate && this.endDate.isAfter(this.maxDate))
                this.endDate = this.maxDate;

            if (this.dateLimit && this.startDate.clone().add(this.dateLimit).isBefore(this.endDate))
                this.endDate = this.startDate.clone().add(this.dateLimit);

            this.updateMonthsInView();
        },

        updateView: function() {
            if (this.timePicker) {
                this.renderTimePicker('left');
                this.renderTimePicker('right');
                if (!this.endDate) {
                    this.container.find('.right .calendar-time select').attr('disabled', 'disabled').addClass('disabled');
                } else {
                    this.container.find('.right .calendar-time select').removeAttr('disabled').removeClass('disabled');
                }
            }
            if (this.endDate) {
                this.container.find('input[name="daterangepicker_end"]').removeClass('active');
                this.container.find('input[name="daterangepicker_start"]').addClass('active');
            } else {
                this.container.find('input[name="daterangepicker_end"]').addClass('active');
                this.container.find('input[name="daterangepicker_start"]').removeClass('active');
            }
            this.updateMonthsInView();
            this.updateCalendars();
            this.updateFormInputs();
        },

        updateMonthsInView: function() {
            if (this.endDate) {
                this.leftCalendar.month = this.startDate.clone().date(2);
                if (this.endDate.month() != this.startDate.month() || this.endDate.year() != this.startDate.year()) {
                    this.rightCalendar.month = this.endDate.clone().date(2);
                } else {
                    this.rightCalendar.month = this.startDate.clone().date(2).add(1, 'month');
                }
            } else {
                if (this.leftCalendar.month.format('YYYY-MM') != this.startDate.format('YYYY-MM') && this.rightCalendar.month.format('YYYY-MM') != this.startDate.format('YYYY-MM')) {
                    this.leftCalendar.month = this.startDate.clone().date(2);
                    this.rightCalendar.month = this.startDate.clone().date(2).add(1, 'month');
                }
            }
        },

        updateCalendars: function() {

            if (this.timePicker) {
                var hour, minute, second;
                if (this.endDate) {
                    hour = parseInt(this.container.find('.left .hourselect').val(), 10);
                    minute = parseInt(this.container.find('.left .minuteselect').val(), 10);
                    second = this.timePickerSeconds ? parseInt(this.container.find('.left .secondselect').val(), 10) : 0;
                    if (!this.timePicker24Hour) {
                        var ampm = this.container.find('.left .ampmselect').val();
                        if (ampm === 'PM' && hour < 12)
                            hour += 12;
                        if (ampm === 'AM' && hour === 12)
                            hour = 0;
                    }
                } else {
                    hour = parseInt(this.container.find('.right .hourselect').val(), 10);
                    minute = parseInt(this.container.find('.right .minuteselect').val(), 10);
                    second = this.timePickerSeconds ? parseInt(this.container.find('.right .secondselect').val(), 10) : 0;
                    if (!this.timePicker24Hour) {
                        var ampm = this.container.find('.left .ampmselect').val();
                        if (ampm === 'PM' && hour < 12)
                            hour += 12;
                        if (ampm === 'AM' && hour === 12)
                            hour = 0;
                    }
                }
                this.leftCalendar.month.hour(hour).minute(minute).second(second);
                this.rightCalendar.month.hour(hour).minute(minute).second(second);
            }

            this.renderCalendar('left');
            this.renderCalendar('right');

            //highlight any predefined range matching the current start and end dates
            this.container.find('.ranges li').removeClass('active');
            if (this.endDate == null) return;

            var customRange = true;
            var i = 0;
            for (var range in this.ranges) {
                if (this.timePicker) {
                    if (this.startDate.isSame(this.ranges[range][0]) && this.endDate.isSame(this.ranges[range][1])) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();
                        break;
                    }
                } else {
                    //ignore times when comparing dates if time picker is not enabled
                    if (this.startDate.format('YYYY-MM-DD') == this.ranges[range][0].format('YYYY-MM-DD') && this.endDate.format('YYYY-MM-DD') == this.ranges[range][1].format('YYYY-MM-DD')) {
                        customRange = false;
                        this.chosenLabel = this.container.find('.ranges li:eq(' + i + ')').addClass('active').html();
                        break;
                    }
                }
                i++;
            }
            if (customRange) {
                this.chosenLabel = this.container.find('.ranges li:last').addClass('active').html();
                this.showCalendars();
            }

        },

        renderCalendar: function(side) {

            //
            // Build the matrix of dates that will populate the calendar
            //

            var calendar = side == 'left' ? this.leftCalendar : this.rightCalendar;
            var month = calendar.month.month();
            var year = calendar.month.year();
            var hour = calendar.month.hour();
            var minute = calendar.month.minute();
            var second = calendar.month.second();
            var daysInMonth = moment([year, month]).daysInMonth();
            var firstDay = moment([year, month, 1]);
            var lastDay = moment([year, month, daysInMonth]);
            var lastMonth = moment(firstDay).subtract(1, 'month').month();
            var lastYear = moment(firstDay).subtract(1, 'month').year();
            var daysInLastMonth = moment([lastYear, lastMonth]).daysInMonth();
            var dayOfWeek = firstDay.day();

            //initialize a 6 rows x 7 columns array for the calendar
            var calendar = [];
            calendar.firstDay = firstDay;
            calendar.lastDay = lastDay;

            for (var i = 0; i < 6; i++) {
                calendar[i] = [];
            }

            //populate the calendar with date objects
            var startDay = daysInLastMonth - dayOfWeek + this.locale.firstDay + 1;
            if (startDay > daysInLastMonth)
                startDay -= 7;

            if (dayOfWeek == this.locale.firstDay)
                startDay = daysInLastMonth - 6;

            // Possible patch for issue #626 https://github.com/dangrossman/bootstrap-daterangepicker/issues/626
            var curDate = moment([lastYear, lastMonth, startDay, 12, minute, second]); // .utcOffset(this.timeZone);

            var col, row;
            for (var i = 0, col = 0, row = 0; i < 42; i++, col++, curDate = moment(curDate).add(24, 'hour')) {
                if (i > 0 && col % 7 === 0) {
                    col = 0;
                    row++;
                }
                calendar[row][col] = curDate.clone().hour(hour).minute(minute).second(second);
                curDate.hour(12);

                if (this.minDate && calendar[row][col].format('YYYY-MM-DD') == this.minDate.format('YYYY-MM-DD') && calendar[row][col].isBefore(this.minDate) && side == 'left') {
                    calendar[row][col] = this.minDate.clone();
                }

                if (this.maxDate && calendar[row][col].format('YYYY-MM-DD') == this.maxDate.format('YYYY-MM-DD') && calendar[row][col].isAfter(this.maxDate) && side == 'right') {
                    calendar[row][col] = this.maxDate.clone();
                }

            }

            //make the calendar object available to hoverDate/clickDate
            if (side == 'left') {
                this.leftCalendar.calendar = calendar;
            } else {
                this.rightCalendar.calendar = calendar;
            }

            //
            // Display the calendar
            //

            var minDate = side == 'left' ? this.minDate : this.startDate;
            var maxDate = this.maxDate;
            var selected = side == 'left' ? this.startDate : this.endDate;

            var html = '<table class="table-condensed">';
            html += '<thead>';
            html += '<tr>';

            // add empty cell for week number
            if (this.showWeekNumbers)
                html += '<th></th>';

            if (!minDate || minDate.isBefore(calendar.firstDay)) {
                html += '<th class="prev available"><i class="fa fa-chevron-left glyphicon glyphicon-chevron-left"></i></th>';
            } else {
                html += '<th></th>';
            }

            var dateHtml = this.locale.monthNames[calendar[1][1].month()] + calendar[1][1].format(" YYYY");

            if (this.showDropdowns) {
                var currentMonth = calendar[1][1].month();
                var currentYear = calendar[1][1].year();
                var maxYear = (maxDate && maxDate.year()) || (currentYear + 5);
                var minYear = (minDate && minDate.year()) || (currentYear - 50);
                var inMinYear = currentYear == minYear;
                var inMaxYear = currentYear == maxYear;

                var monthHtml = '<select class="monthselect">';
                for (var m = 0; m < 12; m++) {
                    if ((!inMinYear || m >= minDate.month()) && (!inMaxYear || m <= maxDate.month())) {
                        monthHtml += "<option value='" + m + "'" +
                            (m === currentMonth ? " selected='selected'" : "") +
                            ">" + this.locale.monthNames[m] + "</option>";
                    }
                }
                monthHtml += "</select>";

                var yearHtml = '<select class="yearselect">';
                for (var y = minYear; y <= maxYear; y++) {
                    yearHtml += '<option value="' + y + '"' +
                        (y === currentYear ? ' selected="selected"' : '') +
                        '>' + y + '</option>';
                }
                yearHtml += '</select>';

                dateHtml = monthHtml + yearHtml;
            }

            html += '<th colspan="5" class="month">' + dateHtml + '</th>';
            if (!maxDate || maxDate.isAfter(calendar.lastDay)) {
                html += '<th class="next available"><i class="fa fa-chevron-right glyphicon glyphicon-chevron-right"></i></th>';
            } else {
                html += '<th></th>';
            }

            html += '</tr>';
            html += '<tr>';

            // add week number label
            if (this.showWeekNumbers)
                html += '<th class="week">' + this.locale.weekLabel + '</th>';

            $.each(this.locale.daysOfWeek, function(index, dayOfWeek) {
                html += '<th>' + dayOfWeek + '</th>';
            });

            html += '</tr>';
            html += '</thead>';
            html += '<tbody>';

            //adjust maxDate to reflect the dateLimit setting in order to
            //grey out end dates beyond the dateLimit
            if (this.endDate == null && this.dateLimit) {
                var maxLimit = this.startDate.clone().add(this.dateLimit).endOf('day');
                if (!maxDate || maxLimit.isBefore(maxDate)) {
                    maxDate = maxLimit;
                }
            }

            for (var row = 0; row < 6; row++) {
                html += '<tr>';

                // add week number
                if (this.showWeekNumbers)
                    html += '<td class="week">' + calendar[row][0].week() + '</td>';

                for (var col = 0; col < 7; col++) {

                    var classes = [];

                    //highlight today's date
                    if (calendar[row][col].isSame(new Date(), "day"))
                        classes.push('today');

                    //highlight weekends
                    if (calendar[row][col].isoWeekday() > 5)
                        classes.push('weekend');

                    //grey out the dates in other months displayed at beginning and end of this calendar
                    if (calendar[row][col].month() != calendar[1][1].month())
                        classes.push('off');

                    //don't allow selection of dates before the minimum date
                    if (this.minDate && calendar[row][col].isBefore(this.minDate, 'day'))
                        classes.push('off', 'disabled');

                    //don't allow selection of dates after the maximum date
                    if (maxDate && calendar[row][col].isAfter(maxDate, 'day'))
                        classes.push('off', 'disabled');

                    //highlight the currently selected start date
                    if (calendar[row][col].format('YYYY-MM-DD') == this.startDate.format('YYYY-MM-DD'))
                        classes.push('active', 'start-date');

                    //highlight the currently selected end date
                    if (this.endDate != null && calendar[row][col].format('YYYY-MM-DD') == this.endDate.format('YYYY-MM-DD'))
                        classes.push('active', 'end-date');

                    //highlight dates in-between the selected dates
                    if (this.endDate != null && calendar[row][col] > this.startDate && calendar[row][col] < this.endDate)
                        classes.push('in-range');

                    var cname = '', disabled = false;
                    for (var i = 0; i < classes.length; i++) {
                        cname += classes[i] + ' ';
                        if (classes[i] == 'disabled')
                            disabled = true;
                    }
                    if (!disabled)
                        cname += 'available';

                    html += '<td class="' + cname.replace(/^\s+|\s+$/g, '') + '" data-title="' + 'r' + row + 'c' + col + '">' + calendar[row][col].date() + '</td>';

                }
                html += '</tr>';
            }

            html += '</tbody>';
            html += '</table>';

            this.container.find('.calendar.' + side + ' .calendar-table').html(html);

        },

        renderTimePicker: function(side) {

            var selected, minDate, maxDate = this.maxDate;

            if (this.dateLimit && (!this.maxDate || this.startDate.clone().add(this.dateLimit).isAfter(this.maxDate)))
                maxDate = this.startDate.clone().add(this.dateLimit);

            if (side == 'left') {
                selected = this.startDate.clone();
                minDate = this.minDate;
            } else if (side == 'right') {
                selected = this.endDate ? this.endDate.clone() : this.startDate.clone();
                minDate = this.startDate;
            }

            //
            // hours
            //

            html = '<select class="hourselect">';

            var start = this.timePicker24Hour ? 0 : 1;
            var end = this.timePicker24Hour ? 23 : 12;

            for (var i = start; i <= end; i++) {
                var i_in_24 = i;
                if (!this.timePicker24Hour)
                    i_in_24 = selected.hour() >= 12 ? (i == 12 ? 12 : i + 12) : (i == 12 ? 0 : i);

                var time = selected.clone().hour(i_in_24);
                var disabled = false;
                if (minDate && time.minute(59).isBefore(minDate))
                    disabled = true;
                if (maxDate && time.minute(0).isAfter(maxDate))
                    disabled = true;

                if (i_in_24 == selected.hour() && !disabled) {
                    html += '<option value="' + i + '" selected="selected">' + i + '</option>';
                } else if (disabled) {
                    html += '<option value="' + i + '" disabled="disabled" class="disabled">' + i + '</option>';
                } else {
                    html += '<option value="' + i + '">' + i + '</option>';
                }
            }

            html += '</select> ';

            //
            // minutes
            //

            html += ': <select class="minuteselect">';

            for (var i = 0; i < 60; i += this.timePickerIncrement) {
                var padded = i < 10 ? '0' + i : i;
                var time = selected.clone().minute(i);

                var disabled = false;
                if (minDate && time.second(59).isBefore(minDate))
                    disabled = true;
                if (maxDate && time.second(0).isAfter(maxDate))
                    disabled = true;

                if (selected.minute() == i && !disabled) {
                    html += '<option value="' + i + '" selected="selected">' + padded + '</option>';
                } else if (disabled) {
                    html += '<option value="' + i + '" disabled="disabled" class="disabled">' + padded + '</option>';
                } else {
                    html += '<option value="' + i + '">' + padded + '</option>';
                }
            }

            html += '</select> ';

            //
            // seconds
            //

            if (this.timePickerSeconds) {
                html += ': <select class="secondselect">';

                for (var i = 0; i < 60; i++) {
                    var padded = i < 10 ? '0' + i : i;
                    var time = selected.clone().second(i);

                    var disabled = false;
                    if (minDate && time.isBefore(minDate))
                        disabled = true;
                    if (maxDate && time.isAfter(maxDate))
                        disabled = true;

                    if (selected.second() == i && !disabled) {
                        html += '<option value="' + i + '" selected="selected">' + padded + '</option>';
                    } else if (disabled) {
                        html += '<option value="' + i + '" disabled="disabled" class="disabled">' + padded + '</option>';
                    } else {
                        html += '<option value="' + i + '">' + padded + '</option>';
                    }
                }

                html += '</select> ';
            }

            //
            // AM/PM
            //

            if (!this.timePicker24Hour) {
                html += '<select class="ampmselect">';

                var am_html = '';
                var pm_html = '';

                if (minDate && selected.clone().hour(12).minute(0).second(0).isBefore(minDate))
                    am_html = ' disabled="disabled" class="disabled"';

                if (maxDate && selected.clone().hour(0).minute(0).second(0).isAfter(maxDate))
                    pm_html = ' disabled="disabled" class="disabled"';

                if (selected.hour() >= 12) {
                    html += '<option value="AM"' + am_html + '>AM</option><option value="PM" selected="selected"' + pm_html + '>PM</option>';
                } else {
                    html += '<option value="AM" selected="selected"' + am_html + '>AM</option><option value="PM"' + pm_html + '>PM</option>';
                }

                html += '</select>';
            }

            this.container.find('.calendar.' + side + ' .calendar-time div').html(html);

        },

        updateFormInputs: function() {
            this.container.find('input[name=daterangepicker_start]').val(this.startDate.format(this.locale.format));
            if (this.endDate)
                this.container.find('input[name=daterangepicker_end]').val(this.endDate.format(this.locale.format));

            if (this.singleDatePicker || (this.endDate && (this.startDate.isBefore(this.endDate) || this.startDate.isSame(this.endDate)))) {
                this.container.find('button.applyBtn').removeAttr('disabled');
            } else {
                this.container.find('button.applyBtn').attr('disabled', 'disabled');
            }
        },

        move: function() {
            var parentOffset = { top: 0, left: 0 },
                containerTop;
            var parentRightEdge = $(window).width();
            if (!this.parentEl.is('body')) {
                parentOffset = {
                    top: this.parentEl.offset().top - this.parentEl.scrollTop(),
                    left: this.parentEl.offset().left - this.parentEl.scrollLeft()
                };
                parentRightEdge = this.parentEl[0].clientWidth + this.parentEl.offset().left;
            }

            if (this.drops == 'up')
                containerTop = this.element.offset().top - this.container.outerHeight() - parentOffset.top;
            else
                containerTop = this.element.offset().top + this.element.outerHeight() - parentOffset.top;
            this.container[this.drops == 'up' ? 'addClass' : 'removeClass']('dropup');

            if (this.opens == 'left') {
                this.container.css({
                    top: containerTop,
                    right: parentRightEdge - this.element.offset().left - this.element.outerWidth(),
                    left: 'auto'
                });
                if (this.container.offset().left < 0) {
                    this.container.css({
                        right: 'auto',
                        left: 9
                    });
                }
            } else if (this.opens == 'center') {
                this.container.css({
                    top: containerTop,
                    left: this.element.offset().left - parentOffset.left + this.element.outerWidth() / 2
                            - this.container.outerWidth() / 2,
                    right: 'auto'
                });
                if (this.container.offset().left < 0) {
                    this.container.css({
                        right: 'auto',
                        left: 9
                    });
                }
            } else {
                this.container.css({
                    top: containerTop,
                    left: this.element.offset().left - parentOffset.left,
                    right: 'auto'
                });
                if (this.container.offset().left + this.container.outerWidth() > $(window).width()) {
                    this.container.css({
                        left: 'auto',
                        right: 0
                    });
                }
            }
        },

        show: function(e) {
            if (this.isShowing) return;

            // Create a click proxy that is private to this instance of datepicker, for unbinding
            this._outsideClickProxy = $.proxy(function(e) { this.outsideClick(e); }, this);
            // Bind global datepicker mousedown for hiding and
            $(document)
              .on('mousedown.daterangepicker', this._outsideClickProxy)
              // also support mobile devices
              .on('touchend.daterangepicker', this._outsideClickProxy)
              // also explicitly play nice with Bootstrap dropdowns, which stopPropagation when clicking them
              .on('click.daterangepicker', '[data-toggle=dropdown]', this._outsideClickProxy)
              // and also close when focus changes to outside the picker (eg. tabbing between controls)
              .on('focusin.daterangepicker', this._outsideClickProxy);

            this.oldStartDate = this.startDate.clone();
            this.oldEndDate = this.endDate.clone();

            this.updateView();
            this.container.show();
            this.move();
            this.element.trigger('show.daterangepicker', this);
            this.isShowing = true;
        },

        hide: function(e) {
            if (!this.isShowing) return;

            //incomplete date selection, revert to last values
            if (!this.endDate) {
                this.startDate = this.oldStartDate.clone();
                this.endDate = this.oldEndDate.clone();
            }

            //if a new date range was selected, invoke the user callback function
            if (!this.startDate.isSame(this.oldStartDate) || !this.endDate.isSame(this.oldEndDate))
                this.callback(this.startDate, this.endDate, this.chosenLabel);

            //if picker is attached to a text input, update it
            if (this.element.is('input') && !this.singleDatePicker) {
                this.element.val(this.startDate.format(this.locale.format) + this.locale.separator + this.endDate.format(this.locale.format));
                this.element.trigger('change');
            } else if (this.element.is('input')) {
                this.element.val(this.startDate.format(this.locale.format));
                this.element.trigger('change');
            }

            $(document).off('.daterangepicker');
            this.container.hide();
            this.element.trigger('hide.daterangepicker', this);
            this.isShowing = false;
        },

        toggle: function(e) {
            if (this.isShowing) {
                this.hide();
            } else {
                this.show();
            }
        },

        outsideClick: function(e) {
            var target = $(e.target);
            // if the page is clicked anywhere except within the daterangerpicker/button
            // itself then call this.hide()
            if (
                // ie modal dialog fix
                e.type == "focusin" ||
                target.closest(this.element).length ||
                target.closest(this.container).length ||
                target.closest('.calendar-table').length
                ) return;
            this.hide();
        },

        showCalendars: function() {
            this.container.addClass('show-calendar');
            this.move();
            this.element.trigger('showCalendar.daterangepicker', this);
        },

        hideCalendars: function() {
            this.container.removeClass('show-calendar');
            this.element.trigger('hideCalendar.daterangepicker', this);
        },

        hoverRange: function(e) {
            var label = e.target.innerHTML;
            if (label == this.locale.customRangeLabel) {
                this.updateView();
            } else {
                var dates = this.ranges[label];
                this.container.find('input[name=daterangepicker_start]').val(dates[0].format(this.locale.format));
                this.container.find('input[name=daterangepicker_end]').val(dates[1].format(this.locale.format));
            }
        },

        clickRange: function(e) {
            var label = e.target.innerHTML;
            this.chosenLabel = label;
            if (label == this.locale.customRangeLabel) {
                this.showCalendars();
            } else {
                var dates = this.ranges[label];
                this.startDate = dates[0];
                this.endDate = dates[1];

                if (!this.timePicker) {
                    this.startDate.startOf('day');
                    this.endDate.endOf('day');
                }

                this.hideCalendars();
                this.clickApply();
            }
        },

        clickPrev: function(e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.subtract(1, 'month');
            } else {
                this.rightCalendar.month.subtract(1, 'month');
            }
            this.updateCalendars();
        },

        clickNext: function(e) {
            var cal = $(e.target).parents('.calendar');
            if (cal.hasClass('left')) {
                this.leftCalendar.month.add(1, 'month');
            } else {
                this.rightCalendar.month.add(1, 'month');
            }
            this.updateCalendars();
        },

        hoverDate: function(e) {

            //ignore dates that can't be selected
            if (!$(e.target).hasClass('available')) return;

            //have the text inputs above calendars reflect the date being hovered over
            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');
            var date = cal.hasClass('left') ? this.leftCalendar.calendar[row][col] : this.rightCalendar.calendar[row][col];

            if (this.endDate) {
                this.container.find('input[name=daterangepicker_start]').val(date.format(this.locale.format));
            } else {
                this.container.find('input[name=daterangepicker_end]').val(date.format(this.locale.format));
            }

            //highlight the dates between the start date and the date being hovered as a potential end date
            var leftCalendar = this.leftCalendar;
            var rightCalendar = this.rightCalendar;
            var startDate = this.startDate;
            if (!this.endDate) {
                this.container.find('.calendar td').each(function(index, el) {
                    var title = $(el).attr('data-title');
                    var row = title.substr(1, 1);
                    var col = title.substr(3, 1);
                    var cal = $(el).parents('.calendar');
                    var dt = cal.hasClass('left') ? leftCalendar.calendar[row][col] : rightCalendar.calendar[row][col];
                    if (dt.isAfter(startDate) && dt.isBefore(date)) {
                        $(el).addClass('in-range');
                    } else {
                        $(el).removeClass('in-range');
                    }
                });
            }

        },

        clickDate: function(e) {

            if (!$(e.target).hasClass('available')) return;

            var title = $(e.target).attr('data-title');
            var row = title.substr(1, 1);
            var col = title.substr(3, 1);
            var cal = $(e.target).parents('.calendar');
            var date = cal.hasClass('left') ? this.leftCalendar.calendar[row][col] : this.rightCalendar.calendar[row][col];

            //
            // this function needs to do a few things:
            // * alternate between selecting a start and end date for the range,
            // * if the time picker is enabled, apply the hour/minute/second from the select boxes to the clicked date
            // * if autoapply is enabled, and an end date was chosen, apply the selection
            // * if single date picker mode, and time picker isn't enabled, apply the selection immediately
            //

            if (this.endDate || date.isBefore(this.startDate)) {
                if (this.timePicker) {
                    var hour = parseInt(this.container.find('.left .hourselect').val(), 10);
                    if (!this.timePicker24Hour) {
                        var ampm = cal.find('.ampmselect').val();
                        if (ampm === 'PM' && hour < 12)
                            hour += 12;
                        if (ampm === 'AM' && hour === 12)
                            hour = 0;
                    }
                    var minute = parseInt(this.container.find('.left .minuteselect').val(), 10);
                    var second = this.timePickerSeconds ? parseInt(this.container.find('.left .secondselect').val(), 10) : 0;
                    date = date.clone().hour(hour).minute(minute).second(second);
                }
                this.endDate = null;
                this.setStartDate(date.clone());
            } else {
                if (this.timePicker) {
                    var hour = parseInt(this.container.find('.right .hourselect').val(), 10);
                    if (!this.timePicker24Hour) {
                        var ampm = this.container.find('.right .ampmselect').val();
                        if (ampm === 'PM' && hour < 12)
                            hour += 12;
                        if (ampm === 'AM' && hour === 12)
                            hour = 0;
                    }
                    var minute = parseInt(this.container.find('.right .minuteselect').val(), 10);
                    var second = this.timePickerSeconds ? parseInt(this.container.find('.right .secondselect').val(), 10) : 0;
                    date = date.clone().hour(hour).minute(minute).second(second);
                }
                this.setEndDate(date.clone());
                if (this.autoApply)
                    this.clickApply();
            }

            if (this.singleDatePicker) {
                this.setEndDate(this.startDate);
                if (!this.timePicker)
                    this.clickApply();
            }

            this.updateView();

        },

        clickApply: function(e) {
            this.hide();
            this.element.trigger('apply.daterangepicker', this);
        },

        clickCancel: function(e) {
            this.startDate = this.oldStartDate;
            this.endDate = this.oldEndDate;
            this.hide();
            this.element.trigger('cancel.daterangepicker', this);
        },

        monthOrYearChanged: function(e) {
            var isLeft = $(e.target).closest('.calendar').hasClass('left'),
                leftOrRight = isLeft ? 'left' : 'right',
                cal = this.container.find('.calendar.'+leftOrRight);

            // Month must be Number for new moment versions
            var month = parseInt(cal.find('.monthselect').val(), 10);
            var year = cal.find('.yearselect').val();

            if (!isLeft) {
                if (year < this.startDate.year() || (year == this.startDate.year() && month < this.startDate.month())) {
                    month = this.startDate.month();
                    year = this.startDate.year();
                }
            }

            if (this.minDate) {
                if (year < this.minDate.year() || (year == this.minDate.year() && month < this.minDate.month())) {
                    month = this.minDate.month();
                    year = this.minDate.year();
                }
            }

            if (this.maxDate) {
                if (year > this.maxDate.year() || (year == this.maxDate.year() && month > this.maxDate.month())) {
                    month = this.maxDate.month();
                    year = this.maxDate.year();
                }
            }

            this[leftOrRight+'Calendar'].month.month(month).year(year);
            this.updateCalendars();
        },

        timeChanged: function(e) {

            var cal = $(e.target).closest('.calendar'),
                isLeft = cal.hasClass('left');

            var hour = parseInt(cal.find('.hourselect').val(), 10);
            var minute = parseInt(cal.find('.minuteselect').val(), 10);
            var second = this.timePickerSeconds ? parseInt(cal.find('.secondselect').val(), 10) : 0;

            if (!this.timePicker24Hour) {
                var ampm = cal.find('.ampmselect').val();
                if (ampm === 'PM' && hour < 12)
                    hour += 12;
                if (ampm === 'AM' && hour === 12)
                    hour = 0;
            }

            if (isLeft) {
                var start = this.startDate.clone();
                start.hour(hour);
                start.minute(minute);
                start.second(second);
                this.setStartDate(start);
                if (this.singleDatePicker)
                    this.endDate = this.startDate.clone();
            } else if (this.endDate) {
                var end = this.endDate.clone();
                end.hour(hour);
                end.minute(minute);
                end.second(second);
                this.setEndDate(end);
            }

            //update the calendars so all clickable dates reflect the new time component
            this.updateCalendars();

            //update the form inputs above the calendars with the new time
            this.updateFormInputs();

            //re-render the time pickers because changing one selection can affect what's enabled in another
            this.renderTimePicker('left');
            this.renderTimePicker('right');

        },

        formInputsChanged: function(e) {
            var isRight = $(e.target).closest('.calendar').hasClass('right');
            var start = moment(this.container.find('input[name="daterangepicker_start"]').val(), this.locale.format);
            var end = moment(this.container.find('input[name="daterangepicker_end"]').val(), this.locale.format);

            if (start.isValid() && end.isValid()) {

                if (isRight && end.isBefore(start))
                    start = end.clone();

                this.setStartDate(start);
                this.setEndDate(end);

                if (isRight) {
                    this.container.find('input[name="daterangepicker_start"]').val(this.startDate.format(this.locale.format));
                } else {
                    this.container.find('input[name="daterangepicker_end"]').val(this.endDate.format(this.locale.format));
                }

            }

            this.updateCalendars();
            if (this.timePicker) {
                this.renderTimePicker('left');
                this.renderTimePicker('right');
            }
        },

        controlChanged: function() {
            if (!this.element.is('input')) return;
            if (!this.element.val().length) return;

            var dateString = this.element.val().split(this.locale.separator),
                start = null,
                end = null;

            if (dateString.length === 2) {
                start = moment(dateString[0], this.locale.format).utcOffset(this.timeZone);
                end = moment(dateString[1], this.locale.format).utcOffset(this.timeZone);
            }

            if (this.singleDatePicker || start === null || end === null) {
                start = moment(this.element.val(), this.locale.format).utcOffset(this.timeZone);
                end = start;
            }

            this.setStartDate(start);
            this.setEndDate(end);
            this.updateView();
        },

        keydown: function(e) {
            //hide on tab or enter
            if ((e.keyCode === 9) || (e.keyCode === 13)) {
                this.hide();
            }
        },

        remove: function() {
            this.container.remove();
            this.element.off('.daterangepicker');
            this.element.removeData();
        }

    };

    $.fn.daterangepicker = function(options, callback) {
        this.each(function() {
            var el = $(this);
            if (el.data('daterangepicker'))
                el.data('daterangepicker').remove();
            el.data('daterangepicker', new DateRangePicker(el, options, callback));
        });
        return this;
    };

}));


(function($) {
  

  $.fn.ColorPickerSliders = function(options) {

    return this.each(function() {

      var alreadyinitialized = false,
          settings,
          triggerelement = $(this),
          triggerelementisinput = triggerelement.is('input'),
          container,
          popover_container,
          elements,
          connectedinput = false,
          swatches,
          groupingname = '',
          rendermode = false,
          visible = false,
          MAXLIGHT = 101, // 101 needed for bright colors (maybe due to rounding errors)
          dragTarget = false,
          lastUpdateTime = 0,
          _moveThrottleTimer = null,
          _throttleDelay = 70,
          _inMoveHandler = false,
          _lastMoveHandlerRun = 0,
          color = {
            tiny: null,
            hsla: null,
            rgba: null,
            hsv: null,
            cielch: null
          },
      MAXVALIDCHROMA = 144;   // maximum valid chroma value found convertible to rgb (blue)

      init();

      function _initSettings() {
        if (typeof options === 'undefined') {
          options = {};
        }

        settings = $.extend({
          color: 'hsl(342, 52%, 70%)',
          size: 'default', // sm | default | lg
          placement: 'auto',
          trigger: 'focus', // focus | manual
          preventtouchkeyboardonshow: false, // makes the input readonly and needs a second click to be editable
          title: '',
          hsvpanel: false,
          sliders: true,
          grouping: true,
          swatches: ['FFFFFF', 'C0C0C0', '808080', '000000', 'FF0000', '800000', 'FFFF00', '808000', '00FF00', '008000', '00FFFF', '008080', '0000FF', '000080', 'FF00FF', '800080'], // array or false to disable swatches
          customswatches: 'colorpickkersliders', // false or a grop name
          connectedinput: false, // can be a jquery object or a selector
          flat: false,
          updateinterval: 30, // update interval of the sliders while in drag (ms)
          previewontriggerelement: true,
          previewcontrasttreshold: 15,
          previewformat: 'rgb', // rgb | hsl | hex
          erroneousciecolormarkers: true,
          invalidcolorsopacity: 1, // everything below 1 causes slightly slower responses
          finercierangeedges: true, // can be disabled for faster responses
          titleswatchesadd: 'Add color to swatches',
          titleswatchesremove: 'Remove color from swatches',
          titleswatchesreset: 'Reset to default swatches',
          order: {},
          labels: {},
          selectText: '',
          onchange: function() {
          }
        }, options);

        if (options.hasOwnProperty('order')) {
          settings.order = $.extend({
            opacity: false,
            hsl: false,
            rgb: false,
            cie: false,
            preview: false
          }, options.order);
        }
        else {
          settings.order = {
            opacity: 0,
            hsl: 1,
            rgb: 2,
            cie: 3, // cie sliders can increase response time of all sliders!
            preview: 4
          };
        }

        if (!options.hasOwnProperty('labels')) {
          options.labels = {};
        }

        settings.labels = $.extend({
          hslhue: 'HSL-Hue',
          hslsaturation: 'HSL-Saturation',
          hsllightness: 'HSL-Lightness',
          rgbred: 'RGB-Red',
          rgbgreen: 'RGB-Green',
          rgbblue: 'RGB-Blue',
          cielightness: 'CIE-Lightness',
          ciechroma: 'CIE-Chroma',
          ciehue: 'CIE-hue',
          opacity: 'Opacity',
          preview: 'Preview'
        }, options.labels);
      }

      function init() {
        if (alreadyinitialized) {
          return;
        }

        alreadyinitialized = true;

        rendermode = $.fn.ColorPickerSliders.detectWhichGradientIsSupported();

        if (rendermode === 'filter') {
          rendermode = false;
        }

        if (!rendermode && $.fn.ColorPickerSliders.svgSupported()) {
          rendermode = 'svg';
        }

        _initSettings();

        // force preview when browser doesn't support css gradients
        if ((!settings.order.hasOwnProperty('preview') || settings.order.preview === false) && !rendermode) {
          settings.order.preview = 10;
        }

        _initConnectedElements();
        _initColor();
        _initConnectedinput();
        _updateTriggerelementColor();
        _updateConnectedInput();

        if (settings.flat) {
          showFlat();
        }

        _bindEvents();
      }

      function _buildComponent() {
        _initElements();
        _renderSwatches();
        _updateAllElements();
        _bindControllerEvents();
      }

      function _initColor() {
        if (triggerelementisinput) {
          color.tiny = tinycolor(triggerelement.val());

          if (!color.tiny.isValid()) {
            color.tiny = tinycolor(settings.color);
          }
        }
        else {
          color.tiny = tinycolor(settings.color);
        }

        color.hsla = color.tiny.toHsl();
        color.rgba = color.tiny.toRgb();
        color.hsv = color.tiny.toHsv();
        color.cielch = $.fn.ColorPickerSliders.rgb2lch(color.rgba);
      }

      function _initConnectedinput() {
        if (settings.connectedinput) {
          if (settings.connectedinput instanceof jQuery) {
            connectedinput = settings.connectedinput;
          }
          else {
            connectedinput = $(settings.connectedinput);
          }
        }
      }

      function updateColor(newcolor, disableinputupdate) {
        var updatedcolor = tinycolor(newcolor);

        if (updatedcolor.isValid()) {
          color.tiny = updatedcolor;
          color.hsla = updatedcolor.toHsl();
          color.rgba = updatedcolor.toRgb();
          color.hsv = updatedcolor.toHsv();
          color.cielch = $.fn.ColorPickerSliders.rgb2lch(color.rgba);

          if (settings.flat || visible) {
            container.removeClass('cp-unconvertible-cie-color');
            _updateAllElements(disableinputupdate);
          }
          else {
            if (!disableinputupdate) {
              _updateConnectedInput();
            }
            _updateTriggerelementColor();
          }

          return true;
        }
        else {
          return false;
        }
      }

      function  resetColorPicker(){
          //@imaguiraga recreate colorPicker with previous settings   
        	init();
     }

      function destroyColorPicker() {

          //_unbindEvent();
          //hidePopover();
          //popover_container.remove();
          //popover_container = null;
          //showPopover();
          //triggerelement.popover('destroy');
          //container.remove();
          alreadyinitialized = false;
      }

      function show(disableLastlyUsedGroupUpdate) {
        if (settings.flat) {
          return;
        }

        if (visible) {
          // repositions the popover
          triggerelement.popover('hide');
          triggerelement.popover('show');
          _bindControllerEvents();
          return;
        }

        showPopover(disableLastlyUsedGroupUpdate);

        visible = true;
      }

      function hide() {
        visible = false;
        hidePopover();
      }

      function showPopover(disableLastlyUsedGroupUpdate) {
        if (popover_container instanceof jQuery) {
          return;
        }

        if (typeof disableLastlyUsedGroupUpdate === 'undefined') {
          disableLastlyUsedGroupUpdate = false;
        }

        popover_container = $('<div class="cp-popover-container"></div>').appendTo('body');

        container = $('<div class="cp-container"></div>').appendTo(popover_container);
        container.html(_getControllerHtml());

        switch (settings.size) {
          case 'sm':
            container.addClass('cp-container-sm');
            break;
          case 'lg':
            container.addClass('cp-container-lg');
            break;
        }

        _buildComponent();

        if (!disableLastlyUsedGroupUpdate) {
          activateLastlyUsedGroup();
        }

        triggerelement.popover({
          html: true,
          animation: false,
          trigger: 'manual',
          title: settings.title,
          placement: settings.placement,
          container: popover_container,
          content: function() {
            return container;
          }
        });

        triggerelement.popover('show');
      }

      function hidePopover() {
        popover_container.remove();
        popover_container = null;

        triggerelement.popover('destroy');
      }

      function _getControllerHtml() {
        var sliders = [],
            color_picker_html = '';

        if (settings.sliders) {

          if (settings.order.opacity !== false) {
            sliders[settings.order.opacity] = '<div class="cp-slider cp-opacity cp-transparency"><span>' + settings.labels.opacity + '</span><div class="cp-marker"></div></div>';
          }

          if (settings.order.hsl !== false) {
            sliders[settings.order.hsl] = '<div class="cp-slider cp-hslhue cp-transparency"><span>' + settings.labels.hslhue + '</span><div class="cp-marker"></div></div><div class="cp-slider cp-hslsaturation cp-transparency"><span>' + settings.labels.hslsaturation + '</span><div class="cp-marker"></div></div><div class="cp-slider cp-hsllightness cp-transparency"><span>' + settings.labels.hsllightness + '</span><div class="cp-marker"></div></div>';
          }

          if (settings.order.rgb !== false) {
            sliders[settings.order.rgb] = '<div class="cp-slider cp-rgbred cp-transparency"><span>' + settings.labels.rgbred + '</span><div class="cp-marker"></div></div><div class="cp-slider cp-rgbgreen cp-transparency"><span>' + settings.labels.rgbgreen + '</span><div class="cp-marker"></div></div><div class="cp-slider cp-rgbblue cp-transparency"><span>' + settings.labels.rgbblue + '</span><div class="cp-marker"></div></div>';
          }

          if (settings.order.cie !== false) {
            sliders[settings.order.cie] = '<div class="cp-slider cp-cielightness cp-transparency"><span>' + settings.labels.cielightness + '</span><div class="cp-marker"></div></div><div class="cp-slider cp-ciechroma cp-transparency"><span>' + settings.labels.ciechroma + '</span><div class="cp-marker"></div></div><div class="cp-slider cp-ciehue cp-transparency"><span>' + settings.labels.ciehue + '</span><div class="cp-marker"></div></div>';
          }

          if (settings.order.preview !== false) {
            sliders[settings.order.preview] = '<div class="cp-preview cp-transparency"><input type="text" readonly="readonly"></div>';
          }

        }

        if (settings.grouping) {
          if (!!settings.hsvpanel + !!(settings.sliders && sliders.length > 0) + !!settings.swatches > 1) {
            color_picker_html += '<ul class="cp-pills">';
          }
          else {
            color_picker_html += '<ul class="cp-pills hidden">';
          }

          if (settings.hsvpanel) {
            color_picker_html += '<li><a href="#" class="cp-pill-hsvpanel">HSV panel</a></li>';
          }
          if (settings.sliders && sliders.length > 0) {
            color_picker_html += '<li><a href="#" class="cp-pill-sliders">Sliders</a></li>';
          }
          if (settings.swatches) {
            color_picker_html += '<li><a href="#" class="cp-pill-swatches">Swatches</a></li>';
          }

          color_picker_html += '</ul>';
        }

        if (settings.hsvpanel) {
          color_picker_html += '<div class="cp-hsvpanel">' +
              '<div class="cp-hsvpanel-sv"><span></span><div class="cp-marker-point"></div></div>' +
              '<div class="cp-hsvpanel-h"><span></span><div class="cp-hsvmarker-vertical"></div></div>' +
              '<div class="cp-hsvpanel-a cp-transparency"><span></span><div class="cp-hsvmarker-vertical"></div></div>' +
              '</div>';
        }

        if (settings.sliders) {
          color_picker_html += '<div class="cp-sliders">';

          for (var i = 0; i < sliders.length; i++) {
            if (typeof sliders[i] === 'undefined') {
              continue;
            }

            color_picker_html += sliders[i];
          }

          color_picker_html += '</div>';

        }

        if (settings.swatches) {
          color_picker_html += '<div class="cp-swatches clearfix"><button type="button" class="add btn btn-default" title="' + settings.titleswatchesadd + '"><span class="glyphicon glyphicon-floppy-save"></span></button><button type="button" class="remove btn btn-default" title="' + settings.titleswatchesremove + '"><span class="glyphicon glyphicon-trash"></span></button><button type="button" class="reset btn btn-default" title="' + settings.titleswatchesreset + '"><span class="glyphicon glyphicon-repeat"></span></button><ul></ul></div>';
        }

        return color_picker_html;
      }

      function _initElements() {
        elements = {
          actualswatch: false,
          swatchescontainer: $('.cp-swatches', container),
          swatches: $('.cp-swatches ul', container),
          swatches_add: $('.cp-swatches button.add', container),
          swatches_remove: $('.cp-swatches button.remove', container),
          swatches_reset: $('.cp-swatches button.reset', container),
          all_sliders: $('.cp-sliders, .cp-preview input', container),
          hsvpanel: {
            sv: $('.cp-hsvpanel-sv', container),
            sv_marker: $('.cp-hsvpanel-sv .cp-marker-point', container),
            h: $('.cp-hsvpanel-h', container),
            h_marker: $('.cp-hsvpanel-h .cp-hsvmarker-vertical', container),
            a: $('.cp-hsvpanel-a span', container),
            a_marker: $('.cp-hsvpanel-a .cp-hsvmarker-vertical', container)
          },
          sliders: {
            hue: $('.cp-hslhue span', container),
            hue_marker: $('.cp-hslhue .cp-marker', container),
            saturation: $('.cp-hslsaturation span', container),
            saturation_marker: $('.cp-hslsaturation .cp-marker', container),
            lightness: $('.cp-hsllightness span', container),
            lightness_marker: $('.cp-hsllightness .cp-marker', container),
            opacity: $('.cp-opacity span', container),
            opacity_marker: $('.cp-opacity .cp-marker', container),
            red: $('.cp-rgbred span', container),
            red_marker: $('.cp-rgbred .cp-marker', container),
            green: $('.cp-rgbgreen span', container),
            green_marker: $('.cp-rgbgreen .cp-marker', container),
            blue: $('.cp-rgbblue span', container),
            blue_marker: $('.cp-rgbblue .cp-marker', container),
            cielightness: $('.cp-cielightness span', container),
            cielightness_marker: $('.cp-cielightness .cp-marker', container),
            ciechroma: $('.cp-ciechroma span', container),
            ciechroma_marker: $('.cp-ciechroma .cp-marker', container),
            ciehue: $('.cp-ciehue span', container),
            ciehue_marker: $('.cp-ciehue .cp-marker', container),
            preview: $('.cp-preview input', container)
          },
          all_pills: $('.cp-pills', container),
          pills: {
            hsvpanel: $('.cp-pill-hsvpanel', container),
            sliders: $('.cp-pill-sliders', container),
            swatches: $('.cp-pill-swatches', container)
          }
        };

        if (!settings.customswatches) {
          elements.swatches_add.hide();
          elements.swatches_remove.hide();
          elements.swatches_reset.hide();
        }
      }

      function showFlat() {
        if (settings.flat) {
          if (triggerelementisinput) {
            container = $('<div class="cp-container"></div>').insertAfter(triggerelement);
          }
          else {
            container = $('<div class="cp-container"></div>');
            triggerelement.append(container);
          }

          container.append(_getControllerHtml());

          _buildComponent();

          activateLastlyUsedGroup();
        }
      }

      function _initConnectedElements() {
        if (settings.connectedinput instanceof jQuery) {
          settings.connectedinput.add(triggerelement);
        }
        else if (settings.connectedinput === false) {
          settings.connectedinput = triggerelement;
        }
        else {
          settings.connectedinput = $(settings.connectedinput).add(triggerelement);
        }
      }

      /*function _unbindEvent() {
          triggerelement.off('colorpickersliders.updateColor');

          triggerelement.off('colorpickersliders.show');

          triggerelement.off('colorpickersliders.destroy');

          triggerelement.off('colorpickersliders.hide');

          $(triggerelement).off('click');

          (triggerelement).off('focus');

          $(triggerelement).off('blur');

          connectedinput.off('keyup change');
      }*/

      function _bindEvents() {
        triggerelement.on('colorpickersliders.updateColor', function(e, newcolor) {
          updateColor(newcolor);
        });

        triggerelement.on('colorpickersliders.show', function() {
          show();
        });

        triggerelement.on('colorpickersliders.reset', function() {
          resetColorPicker();
        });

        triggerelement.on('colorpickersliders.destroy', function() {
            destroyColorPicker();
        });

        triggerelement.on('colorpickersliders.hide', function() {
          hide();
        });

        if (!settings.flat && settings.trigger === 'focus') {
          // we need tabindex defined to be focusable
          if (typeof triggerelement.attr('tabindex') === 'undefined') {
            triggerelement.attr('tabindex', -1);
          }

          if (settings.preventtouchkeyboardonshow) {
            $(triggerelement).prop('readonly', true).addClass('cp-preventtouchkeyboardonshow');

            $(triggerelement).on('click', function(ev) {
              if (visible) {
               // $(triggerelement).prop('readonly', false);
                ev.stopPropagation();
              }
            });
          }

          // buttons doesn't get focus in webkit browsers
          // https://bugs.webkit.org/show_bug.cgi?id=22261
          // and only input and button are focusable on iPad
          // so it is safer to register click on any other than inputs
          if (!triggerelementisinput) {
            $(triggerelement).on('click', function(ev) {
              show();

              ev.stopPropagation();
            });
          }

          $(triggerelement).on('focus', function(ev) {
            show();

            ev.stopPropagation();
          });

          $(triggerelement).on('blur', function(ev) {
            hide();

            if (settings.preventtouchkeyboardonshow) {
              $(triggerelement).prop('readonly', true);
            }

            ev.stopPropagation();
          });
        }

        if (connectedinput) {
          connectedinput.on('keyup change', function() {
            var $input = $(this);

            updateColor($input.val(), true);
          });
        }

      }

      function _bindControllerEvents() {
        container.on('contextmenu', function(ev) {
          ev.preventDefault();
          return false;
        });

        $(document).on('colorpickersliders.changeswatches', function() {
          _renderSwatches();
        });

        elements.swatches.on('touchstart mousedown click', 'li span', function(ev) {
          var color = $(this).css('background-color');
          updateColor(color);
          //_updateAllElements();
          ev.preventDefault();
        });

        elements.swatches_add.on('touchstart mousedown click', function(ev) {
          _addCurrentColorToSwatches();
          ev.preventDefault();
          ev.stopPropagation();
        });

        elements.swatches_remove.on('touchstart mousedown click', function(ev) {
          _removeActualColorFromSwatches();
          ev.preventDefault();
          ev.stopPropagation();
        });

        elements.swatches_reset.on('touchstart touchend mousedown click', function(ev) {
          // prevent multiple fire on android...
          if (ev.type === 'click' || ev.type === 'touchend') {
            _resetSwatches();
          }
          ev.preventDefault();
          ev.stopImmediatePropagation();
        });

        elements.sliders.hue.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'hue';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('hsla', 'h', 3.6 * percent);

          _updateAllElements();
        });

        elements.sliders.saturation.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'saturation';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('hsla', 's', percent / 100);

          _updateAllElements();
        });

        elements.sliders.lightness.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'lightness';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('hsla', 'l', percent / 100);

          _updateAllElements();
        });

        elements.sliders.opacity.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'opacity';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('hsla', 'a', percent / 100);

          _updateAllElements();
        });

        elements.sliders.red.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'red';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('rgba', 'r', 2.55 * percent);

          _updateAllElements();
        });

        elements.sliders.green.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'green';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('rgba', 'g', 2.55 * percent);

          _updateAllElements();
        });

        elements.sliders.blue.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'blue';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('rgba', 'b', 2.55 * percent);

          _updateAllElements();
        });

        elements.hsvpanel.sv.on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'hsvsv';

          var percent = _updateHsvpanelMarkerPosition('sv', ev);

          _updateColorsProperty('hsv', 's', percent.horizontal / 100);
          _updateColorsProperty('hsv', 'v', (100 - percent.vertical) / 100);

          _updateAllElements();
        });

        elements.hsvpanel.h.on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'hsvh';

          var percent = _updateHsvpanelMarkerPosition('h', ev);

          _updateColorsProperty('hsv', 'h', 3.6 * percent.vertical);

          _updateAllElements();
        });

        elements.hsvpanel.a.on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'hsva';

          var percent = _updateHsvpanelMarkerPosition('a', ev);

          _updateColorsProperty('hsv', 'a', (100 - percent.vertical) / 100);

          _updateAllElements();
        });

        elements.sliders.cielightness.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'cielightness';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('cielch', 'l', (MAXLIGHT / 100) * percent);

          _updateAllElements();
        });

        elements.sliders.ciechroma.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'ciechroma';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('cielch', 'c', (MAXVALIDCHROMA / 100) * percent);

          _updateAllElements();
        });

        elements.sliders.ciehue.parent().on('touchstart mousedown', function(ev) {
          ev.preventDefault();

          if (ev.which > 1) {
            return;
          }

          dragTarget = 'ciehue';

          var percent = _updateMarkerPosition(dragTarget, ev);

          _updateColorsProperty('cielch', 'h', 3.6 * percent);

          _updateAllElements();
        });

        elements.sliders.preview.on('click', function() {
          this.select();
        });

        $(document).on('touchmove mousemove', function(ev) {
          if (!dragTarget) {
            return;
          }

          if (new Date().getTime() - _lastMoveHandlerRun > _throttleDelay && !_inMoveHandler) {
            moveHandler(dragTarget, ev);
          }
          else {
            setMoveHandlerTimer(dragTarget, ev);
          }
        });

        $(document).on('touchend mouseup', function(ev) {
          if (ev.which > 1) {
            return;
          }

          if (dragTarget) {
            dragTarget = false;
            ev.preventDefault();
          }
        });

        elements.pills.hsvpanel.on('click', function(ev) {
          ev.preventDefault();

          activateGroupHsvpanel();
        });

        elements.pills.sliders.on('click', function(ev) {
          ev.preventDefault();

          activateGroupSliders();
        });

        elements.pills.swatches.on('click', function(ev) {
          ev.preventDefault();

          activateGroupSwatches();
        });

        if (!settings.flat) {
          popover_container.on('touchstart mousedown', '.popover', function(ev) {
            ev.preventDefault();
            ev.stopPropagation();

            return false;
          });
        }
      }

      function setConfig(name, value) {
        try {
          localStorage.setItem('cp-userdata-' + name, JSON.stringify(value));
        }
        catch (err) {
        }
      }

      function getConfig(name) {
        try {
          var r = JSON.parse(localStorage.getItem('cp-userdata-' + name));

          return r;
        }
        catch (err) {
          return null;
        }
      }

      function getUsedGroupName() {
        if (groupingname !== '') {
          return groupingname;
        }

        if (elements.pills.hsvpanel.length === 0) {
          groupingname += '_hsvpanel_';
        }
        if (elements.pills.sliders.length === 0) {
          groupingname += '_sliders_';
        }
        if (elements.pills.swatches.length === 0) {
          groupingname += '_swatches_';
        }

        return groupingname;
      }

      function getLastlyUsedGroup() {
        return getConfig('config_activepill' + getUsedGroupName());
      }

      function setLastlyUsedGroup(value) {
        return setConfig('config_activepill' + getUsedGroupName(), value);
      }

      function activateLastlyUsedGroup() {
        switch (getLastlyUsedGroup()) {
          case 'hsvpanel':
            activateGroupHsvpanel();
            break;
          case 'sliders':
            activateGroupSliders();
            break;
          case 'swatches':
            activateGroupSwatches();
            break;
          default:
            if (elements.pills.hsvpanel.length) {
              activateGroupHsvpanel();
              break;
            }
            else if (elements.pills.sliders.length) {
              activateGroupSliders();
              break;
            }
            else if (elements.pills.swatches.length) {
              activateGroupSwatches();
              break;
            }
        }
      }

      function activateGroupHsvpanel() {
        if (elements.pills.hsvpanel.length === 0) {
          return false;
        }

        $('a', elements.all_pills).removeClass('active');
        elements.pills.hsvpanel.addClass('active');

        container.removeClass('sliders-active swatches-active').addClass('hsvpanel-active');

        setLastlyUsedGroup('hsvpanel');

        _updateAllElements(true);

        show(true);

        return true;
      }

      function activateGroupSliders() {
        if (elements.pills.sliders.length === 0) {
          return false;
        }

        $('a', elements.all_pills).removeClass('active');
        elements.pills.sliders.addClass('active');

        container.removeClass('hsvpanel-active swatches-active').addClass('sliders-active');

        setLastlyUsedGroup('sliders');

        _updateAllElements(true);

        show(true);

        return true;
      }

      function activateGroupSwatches() {
        if (elements.pills.swatches.length === 0) {
          return false;
        }

        $('a', elements.all_pills).removeClass('active');
        elements.pills.swatches.addClass('active');

        container.removeClass('hsvpanel-active sliders-active').addClass('swatches-active');

        setLastlyUsedGroup('swatches');

        _updateAllElements(true);

        show(true);

        return true;
      }

      function setMoveHandlerTimer(dragTarget, ev) {
        clearTimeout(_moveThrottleTimer);
        _moveThrottleTimer = setTimeout(function() {
          moveHandler(dragTarget, ev);
        }, _throttleDelay);
      }

      function moveHandler(dragTarget, ev) {
        var percent;

        if (_inMoveHandler) {
          setMoveHandlerTimer(dragTarget, ev);
          return;
        }

        _inMoveHandler = true;
        _lastMoveHandlerRun = new Date().getTime();

        if (dragTarget === 'hsvsv') {
          percent = _updateHsvpanelMarkerPosition('sv', ev);
        }
        else if (dragTarget === 'hsvh') {
          percent = _updateHsvpanelMarkerPosition('h', ev);
        }
        else if (dragTarget === 'hsva') {
          percent = _updateHsvpanelMarkerPosition('a', ev);
        }
        else {
          percent = _updateMarkerPosition(dragTarget, ev);
        }

        switch (dragTarget) {
          case 'hsvsv':
            _updateColorsProperty('hsv', 's', percent.horizontal / 100);
            _updateColorsProperty('hsv', 'v', (100 - percent.vertical) / 100);
            break;
          case 'hsvh':
            _updateColorsProperty('hsv', 'h', 3.6 * percent.vertical);
            break;
          case 'hsva':
            _updateColorsProperty('hsv', 'a', (100 - percent.vertical) / 100);
            break;
          case 'hue':
            _updateColorsProperty('hsla', 'h', 3.6 * percent);
            break;
          case 'saturation':
            _updateColorsProperty('hsla', 's', percent / 100);
            break;
          case 'lightness':
            _updateColorsProperty('hsla', 'l', percent / 100);
            break;
          case 'opacity':
            _updateColorsProperty('hsla', 'a', percent / 100);
            break;
          case 'red':
            _updateColorsProperty('rgba', 'r', 2.55 * percent);
            break;
          case 'green':
            _updateColorsProperty('rgba', 'g', 2.55 * percent);
            break;
          case 'blue':
            _updateColorsProperty('rgba', 'b', 2.55 * percent);
            break;
          case 'cielightness':
            _updateColorsProperty('cielch', 'l', (MAXLIGHT / 100) * percent);
            break;
          case 'ciechroma':
            _updateColorsProperty('cielch', 'c', (MAXVALIDCHROMA / 100) * percent);
            break;
          case 'ciehue':
            _updateColorsProperty('cielch', 'h', 3.6 * percent);
            break;
        }

        _updateAllElements();

        ev.preventDefault();
        _inMoveHandler = false;
      }

      function _parseCustomSwatches() {
        swatches = [];

        for (var i = 0; i < settings.swatches.length; i++) {
          var color = tinycolor(settings.swatches[i]);

          if (color.isValid()) {
            swatches.push(color.toRgbString());
          }
        }
      }

      function _renderSwatches() {
        if (!settings.swatches) {
          return;
        }

        if (settings.customswatches) {
          var customswatches = false;

          try {
            customswatches = JSON.parse(localStorage.getItem('swatches-' + settings.customswatches));
          }
          catch (err) {
          }

          if (customswatches) {
            swatches = customswatches;
          }
          else {
            _parseCustomSwatches();
          }
        }
        else {
          _parseCustomSwatches();
        }

        if (swatches instanceof Array) {
          elements.swatches.html('');
          for (var i = 0; i < swatches.length; i++) {
            var color = tinycolor(swatches[i]);

            if (color.isValid()) {
              var span = $('<span></span>').css('background-color', color.toRgbString());
              var button = $('<div class="btn btn-default cp-swatch"></div>');

              button.append(span);

              elements.swatches.append($('<li></li>').append(button));
            }
          }
        }

        _findActualColorsSwatch();
      }

      function _findActualColorsSwatch() {
        var found = false;

        $('span', elements.swatches).filter(function() {
          var swatchcolor = $(this).css('background-color');

          swatchcolor = tinycolor(swatchcolor);
          swatchcolor.alpha = Math.round(swatchcolor.alpha * 100) / 100;

          if (swatchcolor.toRgbString() === color.tiny.toRgbString()) {
            found = true;

            var currentswatch = $(this).parent();

            if (!currentswatch.is(elements.actualswatch)) {
              if (elements.actualswatch) {
                elements.actualswatch.removeClass('actual');
              }
              elements.actualswatch = currentswatch;
              currentswatch.addClass('actual');
            }
          }
        });

        if (!found) {
          if (elements.actualswatch) {
            elements.actualswatch.removeClass('actual');
            elements.actualswatch = false;
          }
        }

        if (elements.actualswatch) {
          elements.swatches_add.prop('disabled', true);
          elements.swatches_remove.prop('disabled', false);
        }
        else {
          elements.swatches_add.prop('disabled', false);
          elements.swatches_remove.prop('disabled', true);
        }
      }

      function _storeSwatches() {
        localStorage.setItem('swatches-' + settings.customswatches, JSON.stringify(swatches));
      }

      function _addCurrentColorToSwatches() {
        swatches.unshift(color.tiny.toRgbString());
        _storeSwatches();

        $(document).trigger('colorpickersliders.changeswatches');
      }

      function _removeActualColorFromSwatches() {
        var index = swatches.indexOf(color.tiny.toRgbString());

        if (index !== -1) {
          swatches.splice(index, 1);

          _storeSwatches();
          $(document).trigger('colorpickersliders.changeswatches');
        }
      }

      function _resetSwatches() {
        if (confirm('Do you really want to reset the swatches? All customizations will be lost!')) {
          _parseCustomSwatches();

          _storeSwatches();

          $(document).trigger('colorpickersliders.changeswatches');
        }
      }

      function _updateColorsProperty(format, property, value) {
        switch (format) {
          case 'hsv':

            color.hsv[property] = value;
            color.tiny = tinycolor({h: color.hsv.h, s: color.hsv.s, v: color.hsv.v, a: color.hsv.a});
            color.rgba = color.tiny.toRgb();
            color.hsla = color.tiny.toHsl();
            color.cielch = $.fn.ColorPickerSliders.rgb2lch(color.rgba);

            break;

          case 'hsla':

            color.hsla[property] = value;
            color.tiny = tinycolor({h: color.hsla.h, s: color.hsla.s, l: color.hsla.l, a: color.hsla.a});
            color.rgba = color.tiny.toRgb();
            color.hsv = color.tiny.toHsv();
            color.cielch = $.fn.ColorPickerSliders.rgb2lch(color.rgba);

            container.removeClass('cp-unconvertible-cie-color');

            break;

          case 'rgba':

            color.rgba[property] = value;
            color.tiny = tinycolor({r: color.rgba.r, g: color.rgba.g, b: color.rgba.b, a: color.hsla.a});
            color.hsla = color.tiny.toHsl();
            color.hsv = color.tiny.toHsv();
            color.cielch = $.fn.ColorPickerSliders.rgb2lch(color.rgba);

            container.removeClass('cp-unconvertible-cie-color');

            break;

          case 'cielch':

            color.cielch[property] = value;
            color.rgba = $.fn.ColorPickerSliders.lch2rgb(color.cielch);
            color.tiny = tinycolor(color.rgba);
            color.hsla = color.tiny.toHsl();
            color.hsv = color.tiny.toHsv();

            if (settings.erroneousciecolormarkers) {
              if (color.rgba.isok) {
                container.removeClass('cp-unconvertible-cie-color');
              }
              else {
                container.addClass('cp-unconvertible-cie-color');
              }
            }

            break;
        }
      }

      function _updateMarkerPosition(slidername, ev) {
        var percent = $.fn.ColorPickerSliders.calculateEventPositionPercentage(ev, elements.sliders[slidername]);

        elements.sliders[slidername + '_marker'].data('position', percent);

        return percent;
      }

      function _updateHsvpanelMarkerPosition(marker, ev) {
        var percents = $.fn.ColorPickerSliders.calculateEventPositionPercentage(ev, elements.hsvpanel.sv, true);

        elements.hsvpanel[marker + '_marker'].data('position', percents);

        return percents;
      }

      var updateAllElementsTimeout;

      function _updateAllElementsTimer(disableinputupdate) {
        updateAllElementsTimeout = setTimeout(function() {
          _updateAllElements(disableinputupdate);
        }, settings.updateinterval);
      }

      function _updateAllElements(disableinputupdate) {
        clearTimeout(updateAllElementsTimeout);

        Date.now = Date.now || function() {
          return +new Date();
        };

        if (Date.now() - lastUpdateTime < settings.updateinterval) {
          _updateAllElementsTimer(disableinputupdate);
          return;
        }

        if (typeof disableinputupdate === 'undefined') {
          disableinputupdate = false;
        }

        lastUpdateTime = Date.now();

        if (settings.hsvpanel !== false && (!settings.grouping || getLastlyUsedGroup() === 'hsvpanel')) {
          _renderHsvsv();
          _renderHsvh();
          _renderHsva();
        }

        if (settings.sliders && (!settings.grouping || getLastlyUsedGroup() === 'sliders')) {
          if (settings.order.opacity !== false) {
            _renderOpacity();
          }

          if (settings.order.hsl !== false) {
            _renderHue();
            _renderSaturation();
            _renderLightness();
          }

          if (settings.order.rgb !== false) {
            _renderRed();
            _renderGreen();
            _renderBlue();
          }

          if (settings.order.cie !== false) {
            _renderCieLightness();
            _renderCieChroma();
            _renderCieHue();
          }

          if (settings.order.preview !== false) {
            _renderPreview();
          }
        }

        if (!disableinputupdate) {
          _updateConnectedInput();
        }

        if ((100 - color.cielch.l) * color.cielch.a < settings.previewcontrasttreshold) {
          elements.all_sliders.css('color', '#000');
          if (triggerelementisinput && settings.previewontriggerelement) {
            triggerelement.css('background', color.tiny.toRgbString()).css('color', '#000');
          }
        }
        else {
          elements.all_sliders.css('color', '#fff');
          if (triggerelementisinput && settings.previewontriggerelement) {
            triggerelement.css('background', color.tiny.toRgbString()).css('color', '#fff');
          }
        }

        if (settings.swatches && (!settings.grouping || getLastlyUsedGroup() === 'swatches')) {
          _findActualColorsSwatch();
        }

        settings.onchange(container, color);

        triggerelement.data('color', color);
      }

      function _updateTriggerelementColor() {
        if (triggerelementisinput && settings.previewontriggerelement) {
          if ((100 - color.cielch.l) * color.cielch.a < settings.previewcontrasttreshold) {
            triggerelement.css('background', color.tiny.toRgbString()).css('color', '#000');
          }
          else {
            triggerelement.css('background', color.tiny.toRgbString()).css('color', '#fff');
          }
        }
      }

      function _updateConnectedInput() {
        if (connectedinput) {
          connectedinput.each(function(index, element) {
            var $element = $(element),
                format = $element.data('color-format') || settings.previewformat;

            switch (format) {
              case 'hex':
                if (color.hsla.a < 1) {
                  $element.val(color.tiny.toRgbString());
                }
                else {
                  $element.val(color.tiny.toHexString());
                }
                break;
              case 'hsl':
                $element.val(color.tiny.toHslString());
                break;
                case 'rgb':
                    /* falls through */
                    if (color.tiny._r == 255 &&
                        color.tiny._b == 255 &&
                        color.tiny._g == 255) {
                        $element[0].placeholder = settings.titleswatchesreset;
                    }
                    else {
                        $element[0].placeholder = '';
                    }
                    break;
              default:
                $element.val(color.tiny.toRgbString());
                break;
            }
          });
        }
      }

      function _renderHsvsv() {
        elements.hsvpanel.sv.css('background', tinycolor('hsv(' + color.hsv.h + ',100%,100%)').toRgbString());

        elements.hsvpanel.sv_marker.css('left', color.hsv.s * 100 + '%').css('top', 100 - color.hsv.v * 100 + '%');
      }

      function _renderHsvh() {
        elements.hsvpanel.h_marker.css('top', color.hsv.h / 360 * 100 + '%');
      }

      function _renderHsva() {
        setGradient(elements.hsvpanel.a, $.fn.ColorPickerSliders.getScaledGradientStops(color.hsla, 'a', 1, 0, 2), true);

        elements.hsvpanel.a_marker.css('top', 100 - color.hsv.a * 100 + '%');
      }

      function _renderHue() {
        setGradient(elements.sliders.hue, $.fn.ColorPickerSliders.getScaledGradientStops(color.hsla, 'h', 0, 360, 7));

        elements.sliders.hue_marker.css('left', color.hsla.h / 360 * 100 + '%');
      }

      function _renderSaturation() {
        setGradient(elements.sliders.saturation, $.fn.ColorPickerSliders.getScaledGradientStops(color.hsla, 's', 0, 1, 2));

        elements.sliders.saturation_marker.css('left', color.hsla.s * 100 + '%');
      }

      function _renderLightness() {
        setGradient(elements.sliders.lightness, $.fn.ColorPickerSliders.getScaledGradientStops(color.hsla, 'l', 0, 1, 3));

        elements.sliders.lightness_marker.css('left', color.hsla.l * 100 + '%');
      }

      function _renderOpacity() {
        setGradient(elements.sliders.opacity, $.fn.ColorPickerSliders.getScaledGradientStops(color.hsla, 'a', 0, 1, 2));

        elements.sliders.opacity_marker.css('left', color.hsla.a * 100 + '%');
      }

      function _renderRed() {
        setGradient(elements.sliders.red, $.fn.ColorPickerSliders.getScaledGradientStops(color.rgba, 'r', 0, 255, 2));

        elements.sliders.red_marker.css('left', color.rgba.r / 255 * 100 + '%');
      }

      function _renderGreen() {
        setGradient(elements.sliders.green, $.fn.ColorPickerSliders.getScaledGradientStops(color.rgba, 'g', 0, 255, 2));

        elements.sliders.green_marker.css('left', color.rgba.g / 255 * 100 + '%');
      }

      function _renderBlue() {
        setGradient(elements.sliders.blue, $.fn.ColorPickerSliders.getScaledGradientStops(color.rgba, 'b', 0, 255, 2));

        elements.sliders.blue_marker.css('left', color.rgba.b / 255 * 100 + '%');
      }

      function _extendCieGradientStops(gradientstops, property) {
        if (settings.invalidcolorsopacity === 1 || !settings.finercierangeedges) {
          return gradientstops;
        }

        gradientstops.sort(function(a, b) {
          return a.position - b.position;
        });

        var tmparray = [];

        for (var i = 1; i < gradientstops.length; i++) {
          if (gradientstops[i].isok !== gradientstops[i - 1].isok) {
            var steps = Math.round(gradientstops[i].position) - Math.round(gradientstops[i - 1].position),
                extendedgradientstops = $.fn.ColorPickerSliders.getScaledGradientStops(gradientstops[i].rawcolor, property, gradientstops[i - 1].rawcolor[property], gradientstops[i].rawcolor[property], steps, settings.invalidcolorsopacity, gradientstops[i - 1].position, gradientstops[i].position);

            for (var j = 0; j < extendedgradientstops.length; j++) {
              if (extendedgradientstops[j].isok !== gradientstops[i - 1].isok) {
                tmparray.push(extendedgradientstops[j]);

                if (j > 0) {
                  tmparray.push(extendedgradientstops[j - 1]);
                }

                break;
              }
            }
          }
        }

        return $.merge(tmparray, gradientstops);
      }

      function _renderCieLightness() {
        var gradientstops = $.fn.ColorPickerSliders.getScaledGradientStops(color.cielch, 'l', 0, 100, 10, settings.invalidcolorsopacity);

        gradientstops = _extendCieGradientStops(gradientstops, 'l');

        setGradient(elements.sliders.cielightness, gradientstops);

        elements.sliders.cielightness_marker.css('left', color.cielch.l / MAXLIGHT * 100 + '%');
      }

      function _renderCieChroma() {
        var gradientstops = $.fn.ColorPickerSliders.getScaledGradientStops(color.cielch, 'c', 0, MAXVALIDCHROMA, 5, settings.invalidcolorsopacity);

        gradientstops = _extendCieGradientStops(gradientstops, 'c');

        setGradient(elements.sliders.ciechroma, gradientstops);

        elements.sliders.ciechroma_marker.css('left', color.cielch.c / MAXVALIDCHROMA * 100 + '%');
      }

      function _renderCieHue() {
        var gradientstops = $.fn.ColorPickerSliders.getScaledGradientStops(color.cielch, 'h', 0, 360, 28, settings.invalidcolorsopacity);

        gradientstops = _extendCieGradientStops(gradientstops, 'h');

        setGradient(elements.sliders.ciehue, gradientstops);

        elements.sliders.ciehue_marker.css('left', color.cielch.h / 360 * 100 + '%');
      }

      function _renderPreview() {
        elements.sliders.preview.css('background', $.fn.ColorPickerSliders.csscolor(color.rgba));

        var colorstring;

        switch (settings.previewformat) {
          case 'hex':
            if (color.hsla.a < 1) {
              colorstring = color.tiny.toRgbString();
            }
            else {
              colorstring = color.tiny.toHexString();
            }
            break;
          case 'hsl':
            colorstring = color.tiny.toHslString();
            break;
          case 'rgb':
            /* falls through */
          default:
            colorstring = color.tiny.toRgbString();
            break;
        }

        elements.sliders.preview.val(colorstring);
      }

      function setGradient(element, gradientstops, vertical) {
        if (typeof vertical === 'undefined') {
          vertical = false;
        }

        gradientstops.sort(function(a, b) {
          return a.position - b.position;
        });

        switch (rendermode) {
          case 'noprefix':
            $.fn.ColorPickerSliders.renderNoprefix(element, gradientstops, vertical);
            break;
          case 'webkit':
            $.fn.ColorPickerSliders.renderWebkit(element, gradientstops, vertical);
            break;
          case 'ms':
            $.fn.ColorPickerSliders.renderMs(element, gradientstops, vertical);
            break;
          case 'svg': // can not repeat, radial can be only a covering ellipse (maybe there is a workaround, need more investigation)
            $.fn.ColorPickerSliders.renderSVG(element, gradientstops, vertical);
            break;
          case 'oldwebkit':   // can not repeat, no percent size with radial gradient (and no ellipse)
            $.fn.ColorPickerSliders.renderOldwebkit(element, gradientstops, vertical);
            break;
        }
      }

    });

  };



  $.fn.ColorPickerSliders.getEventCoordinates = function(ev) {
    if (typeof ev.pageX !== 'undefined') {
      return {
        pageX: ev.originalEvent.pageX,
        pageY: ev.originalEvent.pageY
      };
    }
    else if (typeof ev.originalEvent.touches !== 'undefined') {
      return {
        pageX: ev.originalEvent.touches[0].pageX,
        pageY: ev.originalEvent.touches[0].pageY
      };
    }
  };

  $.fn.ColorPickerSliders.calculateEventPositionPercentage = function(ev, containerElement, both) {
    if (typeof (both) === 'undefined') {
      both = false;
    }

    var c = $.fn.ColorPickerSliders.getEventCoordinates(ev);

    var xsize = containerElement.width(),
        offsetX = c.pageX - containerElement.offset().left;

    var horizontal = offsetX / xsize * 100;

    if (horizontal < 0) {
      horizontal = 0;
    }

    if (horizontal > 100) {
      horizontal = 100;
    }

    if (both) {
      var ysize = containerElement.height(),
          offsetY = c.pageY - containerElement.offset().top;

      var vertical = offsetY / ysize * 100;

      if (vertical < 0) {
        vertical = 0;
      }

      if (vertical > 100) {
        vertical = 100;
      }

      return {
        horizontal: horizontal,
        vertical: vertical
      };
    }

    return horizontal;
  };

  $.fn.ColorPickerSliders.getScaledGradientStops = function(color, scalableproperty, minvalue, maxvalue, steps, invalidcolorsopacity, minposition, maxposition) {
    if (typeof invalidcolorsopacity === 'undefined') {
      invalidcolorsopacity = 1;
    }

    if (typeof minposition === 'undefined') {
      minposition = 0;
    }

    if (typeof maxposition === 'undefined') {
      maxposition = 100;
    }

    var gradientStops = [],
        diff = maxvalue - minvalue,
        isok = true;

    for (var i = 0; i < steps; ++i) {
      var currentstage = i / (steps - 1),
          modifiedcolor = $.fn.ColorPickerSliders.modifyColor(color, scalableproperty, currentstage * diff + minvalue),
          csscolor;

      if (invalidcolorsopacity < 1) {
        var stagergb = $.fn.ColorPickerSliders.lch2rgb(modifiedcolor, invalidcolorsopacity);

        isok = stagergb.isok;
        csscolor = $.fn.ColorPickerSliders.csscolor(stagergb, invalidcolorsopacity);
      }
      else {
        csscolor = $.fn.ColorPickerSliders.csscolor(modifiedcolor, invalidcolorsopacity);
      }

      gradientStops[i] = {
        color: csscolor,
        position: currentstage * (maxposition - minposition) + minposition,
        isok: isok,
        rawcolor: modifiedcolor
      };
    }

    return gradientStops;
  };

  $.fn.ColorPickerSliders.getGradientStopsCSSString = function(gradientstops) {
    var gradientstring = '',
        oldwebkit = '',
        svgstoppoints = '';

    for (var i = 0; i < gradientstops.length; i++) {
      var el = gradientstops[i];

      gradientstring += ',' + el.color + ' ' + el.position + '%';
      oldwebkit += ',color-stop(' + el.position + '%,' + el.color + ')';

      var svgcolor = tinycolor(el.color);

      svgstoppoints += '<stop ' + 'stop-color="' + svgcolor.toHexString() + '" stop-opacity="' + svgcolor.toRgb().a + '"' + ' offset="' + el.position / 100 + '"/>';
    }

    return {
      noprefix: gradientstring,
      oldwebkit: oldwebkit,
      svg: svgstoppoints
    };
  };

  $.fn.ColorPickerSliders.renderNoprefix = function(element, gradientstops, vertical) {
    if (typeof vertical === 'undefined') {
      vertical = false;
    }

    var css,
        stoppoints = $.fn.ColorPickerSliders.getGradientStopsCSSString(gradientstops).noprefix;

    if (!vertical) {
      css = 'linear-gradient(to right';
    }
    else {
      css = 'linear-gradient(to bottom';
    }

    css += stoppoints + ')';

    element.css('background-image', css);
  };

  $.fn.ColorPickerSliders.renderWebkit = function(element, gradientstops, vertical) {
    if (typeof vertical === 'undefined') {
      vertical = false;
    }

    var css,
        stoppoints = $.fn.ColorPickerSliders.getGradientStopsCSSString(gradientstops).noprefix;

    if (!vertical) {
      css = '-webkit-linear-gradient(left';
    }
    else {
      css = '-webkit-linear-gradient(top';
    }

    css += stoppoints + ')';

    element.css('background-image', css);
  };

  $.fn.ColorPickerSliders.renderOldwebkit = function(element, gradientstops, vertical) {
    if (typeof vertical === 'undefined') {
      vertical = false;
    }

    var css,
        stoppoints = $.fn.ColorPickerSliders.getGradientStopsCSSString(gradientstops).oldwebkit;

    if (!vertical) {
      css = '-webkit-gradient(linear, 0% 0%, 100% 0%';
    }
    else {
      css = '-webkit-gradient(linear, 0% 0%, 0 100%';
    }
    css += stoppoints + ')';

    element.css('background-image', css);
  };

  $.fn.ColorPickerSliders.renderMs = function(element, gradientstops, vertical) {
    if (typeof vertical === 'undefined') {
      vertical = false;
    }

    var css,
        stoppoints = $.fn.ColorPickerSliders.getGradientStopsCSSString(gradientstops).noprefix;

    if (!vertical) {
      css = '-ms-linear-gradient(to right';
    }
    else {
      css = '-ms-linear-gradient(to bottom';
    }

    css += stoppoints + ')';

    element.css('background-image', css);
  };

  $.fn.ColorPickerSliders.renderSVG = function(element, gradientstops, vertical) {
    if (typeof vertical === 'undefined') {
      vertical = false;
    }

    var svg = '',
        svgstoppoints = $.fn.ColorPickerSliders.getGradientStopsCSSString(gradientstops).svg;

    if (!vertical) {
      svg = '<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="vsgg" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="100%" y2="0">';
    }
    else {
      svg = '<svg xmlns="http://www.w3.org/2000/svg" width="100%" height="100%" viewBox="0 0 1 1" preserveAspectRatio="none"><linearGradient id="vsgg" gradientUnits="userSpaceOnUse" x1="0" y1="0" x2="0" y2="100%">';
    }

    svg += svgstoppoints;
    svg += '</linearGradient><rect x="0" y="0" width="1" height="1" fill="url(#vsgg)" /></svg>';
    svg = 'url(data:image/svg+xml;base64,' + $.fn.ColorPickerSliders.base64encode(svg) + ')';

    element.css('background-image', svg);
  };

  /* source: http://phpjs.org/functions/base64_encode/ */
  $.fn.ColorPickerSliders.base64encode = function(data) {
    var b64 = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=';
    var o1, o2, o3, h1, h2, h3, h4, bits, i = 0,
        ac = 0,
        enc = '',
        tmp_arr = [];

    if (!data) {
      return data;
    }

    do {
      o1 = data.charCodeAt(i++);
      o2 = data.charCodeAt(i++);
      o3 = data.charCodeAt(i++);

      bits = o1 << 16 | o2 << 8 | o3;

      h1 = bits >> 18 & 0x3f;
      h2 = bits >> 12 & 0x3f;
      h3 = bits >> 6 & 0x3f;
      h4 = bits & 0x3f;

      tmp_arr[ac++] = b64.charAt(h1) + b64.charAt(h2) + b64.charAt(h3) + b64.charAt(h4);
    } while (i < data.length);

    enc = tmp_arr.join('');

    var r = data.length % 3;

    return (r ? enc.slice(0, r - 3) : enc) + '==='.slice(r || 3);
  };

  $.fn.ColorPickerSliders.isGoodRgb = function(rgb) {
    // the default acceptable values are out of 0..255 due to
    // rounding errors with yellow and blue colors (258, -1)
    var maxacceptable = 258;
    var minacceptable = -1;

    if (rgb.r > maxacceptable || rgb.g > maxacceptable || rgb.b > maxacceptable || rgb.r < minacceptable || rgb.g < minacceptable || rgb.b < minacceptable) {
      return false;
    }
    else {
      rgb.r = Math.min(255, rgb.r);
      rgb.g = Math.min(255, rgb.g);
      rgb.b = Math.min(255, rgb.b);
      rgb.r = Math.max(0, rgb.r);
      rgb.g = Math.max(0, rgb.g);
      rgb.b = Math.max(0, rgb.b);

      return true;
    }
  };

  $.fn.ColorPickerSliders.rgb2lch = function(rgb) {
    var lch = $.fn.ColorPickerSliders.CIELab2CIELCH($.fn.ColorPickerSliders.XYZ2CIELab($.fn.ColorPickerSliders.rgb2XYZ(rgb)));

    if (rgb.hasOwnProperty('a')) {
      lch.a = rgb.a;
    }

    return lch;
  };

  $.fn.ColorPickerSliders.lch2rgb = function(lch, invalidcolorsopacity) {
    if (typeof invalidcolorsopacity === 'undefined') {
      invalidcolorsopacity = 1;
    }

    var rgb = $.fn.ColorPickerSliders.XYZ2rgb($.fn.ColorPickerSliders.CIELab2XYZ($.fn.ColorPickerSliders.CIELCH2CIELab(lch)));

    if ($.fn.ColorPickerSliders.isGoodRgb(rgb)) {
      if (lch.hasOwnProperty('a')) {
        rgb.a = lch.a;
      }

      rgb.isok = true;

      return rgb;
    }

    var tmp = $.extend({}, lch),
        lastbadchroma = tmp.c,
        lastgoodchroma = -1,
        loops = 0;

    do {
      ++loops;

      tmp.c = lastgoodchroma + ((lastbadchroma - lastgoodchroma) / 2);

      rgb = $.fn.ColorPickerSliders.XYZ2rgb($.fn.ColorPickerSliders.CIELab2XYZ($.fn.ColorPickerSliders.CIELCH2CIELab(tmp)));

      if ($.fn.ColorPickerSliders.isGoodRgb(rgb)) {
        lastgoodchroma = tmp.c;
      }
      else {
        lastbadchroma = tmp.c;
      }
    } while (Math.abs(lastbadchroma - lastgoodchroma) > 0.9 && loops < 100);

    if (lch.hasOwnProperty('a')) {
      rgb.a = lch.a;
    }

    rgb.r = Math.max(0, rgb.r);
    rgb.g = Math.max(0, rgb.g);
    rgb.b = Math.max(0, rgb.b);

    rgb.r = Math.min(255, rgb.r);
    rgb.g = Math.min(255, rgb.g);
    rgb.b = Math.min(255, rgb.b);

    if (invalidcolorsopacity < 1) {
      if (rgb.hasOwnProperty('a')) {
        rgb.a = rgb.a * invalidcolorsopacity;
      }
      else {
        rgb.a = invalidcolorsopacity;
      }
    }

    rgb.isok = false;

    return rgb;
  };

  $.fn.ColorPickerSliders.modifyColor = function(color, property, value) {
    var modifiedcolor = $.extend({}, color);

    if (!color.hasOwnProperty(property)) {
      throw('Missing color property: ' + property);
    }

    modifiedcolor[property] = value;

    return modifiedcolor;
  };

  $.fn.ColorPickerSliders.csscolor = function(color, invalidcolorsopacity) {
    if (typeof invalidcolorsopacity === 'undefined') {
      invalidcolorsopacity = 1;
    }

    var $return = false,
        tmpcolor = $.extend({}, color);

    if (tmpcolor.hasOwnProperty('c')) {
      // CIE-LCh
      tmpcolor = $.fn.ColorPickerSliders.lch2rgb(tmpcolor, invalidcolorsopacity);
    }

    if (tmpcolor.hasOwnProperty('h')) {
      // HSL
      $return = 'hsla(' + tmpcolor.h + ',' + tmpcolor.s * 100 + '%,' + tmpcolor.l * 100 + '%,' + tmpcolor.a + ')';
    }

    if (tmpcolor.hasOwnProperty('r')) {
      // RGB
      if (tmpcolor.a < 1) {
        $return = 'rgba(' + Math.round(tmpcolor.r) + ',' + Math.round(tmpcolor.g) + ',' + Math.round(tmpcolor.b) + ',' + tmpcolor.a + ')';
      }
      else {
        $return = 'rgb(' + Math.round(tmpcolor.r) + ',' + Math.round(tmpcolor.g) + ',' + Math.round(tmpcolor.b) + ')';
      }
    }

    return $return;
  };

  $.fn.ColorPickerSliders.rgb2XYZ = function(rgb) {
    var XYZ = {};

    var r = (rgb.r / 255);
    var g = (rgb.g / 255);
    var b = (rgb.b / 255);

    if (r > 0.04045) {
      r = Math.pow(((r + 0.055) / 1.055), 2.4);
    }
    else {
      r = r / 12.92;
    }

    if (g > 0.04045) {
      g = Math.pow(((g + 0.055) / 1.055), 2.4);
    }
    else {
      g = g / 12.92;
    }

    if (b > 0.04045) {
      b = Math.pow(((b + 0.055) / 1.055), 2.4);
    }
    else {
      b = b / 12.92;
    }

    r = r * 100;
    g = g * 100;
    b = b * 100;

    // Observer = 2°, Illuminant = D65
    XYZ.x = r * 0.4124 + g * 0.3576 + b * 0.1805;
    XYZ.y = r * 0.2126 + g * 0.7152 + b * 0.0722;
    XYZ.z = r * 0.0193 + g * 0.1192 + b * 0.9505;

    return XYZ;
  };

  $.fn.ColorPickerSliders.XYZ2CIELab = function(XYZ) {
    var CIELab = {};

    // Observer = 2°, Illuminant = D65
    var X = XYZ.x / 95.047;
    var Y = XYZ.y / 100.000;
    var Z = XYZ.z / 108.883;

    if (X > 0.008856) {
      X = Math.pow(X, 0.333333333);
    }
    else {
      X = 7.787 * X + 0.137931034;
    }

    if (Y > 0.008856) {
      Y = Math.pow(Y, 0.333333333);
    }
    else {
      Y = 7.787 * Y + 0.137931034;
    }

    if (Z > 0.008856) {
      Z = Math.pow(Z, 0.333333333);
    }
    else {
      Z = 7.787 * Z + 0.137931034;
    }

    CIELab.l = (116 * Y) - 16;
    CIELab.a = 500 * (X - Y);
    CIELab.b = 200 * (Y - Z);

    return CIELab;
  };

  $.fn.ColorPickerSliders.CIELab2CIELCH = function(CIELab) {
    var CIELCH = {};

    CIELCH.l = CIELab.l;
    CIELCH.c = Math.sqrt(Math.pow(CIELab.a, 2) + Math.pow(CIELab.b, 2));

    CIELCH.h = Math.atan2(CIELab.b, CIELab.a);  //Quadrant by signs

    if (CIELCH.h > 0) {
      CIELCH.h = (CIELCH.h / Math.PI) * 180;
    }
    else {
      CIELCH.h = 360 - (Math.abs(CIELCH.h) / Math.PI) * 180;
    }

    return CIELCH;
  };

  $.fn.ColorPickerSliders.CIELCH2CIELab = function(CIELCH) {
    var CIELab = {};

    CIELab.l = CIELCH.l;
    CIELab.a = Math.cos(CIELCH.h * 0.01745329251) * CIELCH.c;
    CIELab.b = Math.sin(CIELCH.h * 0.01745329251) * CIELCH.c;

    return CIELab;
  };

  $.fn.ColorPickerSliders.CIELab2XYZ = function(CIELab) {
    var XYZ = {};

    XYZ.y = (CIELab.l + 16) / 116;
    XYZ.x = CIELab.a / 500 + XYZ.y;
    XYZ.z = XYZ.y - CIELab.b / 200;

    if (Math.pow(XYZ.y, 3) > 0.008856) {
      XYZ.y = Math.pow(XYZ.y, 3);
    }
    else {
      XYZ.y = (XYZ.y - 0.137931034) / 7.787;
    }

    if (Math.pow(XYZ.x, 3) > 0.008856) {
      XYZ.x = Math.pow(XYZ.x, 3);
    }
    else {
      XYZ.x = (XYZ.x - 0.137931034) / 7.787;
    }

    if (Math.pow(XYZ.z, 3) > 0.008856) {
      XYZ.z = Math.pow(XYZ.z, 3);
    }
    else {
      XYZ.z = (XYZ.z - 0.137931034) / 7.787;
    }

    // Observer = 2°, Illuminant = D65
    XYZ.x = 95.047 * XYZ.x;
    XYZ.y = 100.000 * XYZ.y;
    XYZ.z = 108.883 * XYZ.z;

    return XYZ;
  };

  $.fn.ColorPickerSliders.XYZ2rgb = function(XYZ) {
    var rgb = {};

    // Observer = 2°, Illuminant = D65
    XYZ.x = XYZ.x / 100;        // X from 0 to 95.047
    XYZ.y = XYZ.y / 100;        // Y from 0 to 100.000
    XYZ.z = XYZ.z / 100;        // Z from 0 to 108.883

    rgb.r = XYZ.x * 3.2406 + XYZ.y * -1.5372 + XYZ.z * -0.4986;
    rgb.g = XYZ.x * -0.9689 + XYZ.y * 1.8758 + XYZ.z * 0.0415;
    rgb.b = XYZ.x * 0.0557 + XYZ.y * -0.2040 + XYZ.z * 1.0570;

    if (rgb.r > 0.0031308) {
      rgb.r = 1.055 * (Math.pow(rgb.r, 0.41666667)) - 0.055;
    }
    else {
      rgb.r = 12.92 * rgb.r;
    }

    if (rgb.g > 0.0031308) {
      rgb.g = 1.055 * (Math.pow(rgb.g, 0.41666667)) - 0.055;
    }
    else {
      rgb.g = 12.92 * rgb.g;
    }

    if (rgb.b > 0.0031308) {
      rgb.b = 1.055 * (Math.pow(rgb.b, 0.41666667)) - 0.055;
    }
    else {
      rgb.b = 12.92 * rgb.b;
    }

    rgb.r = Math.round(rgb.r * 255);
    rgb.g = Math.round(rgb.g * 255);
    rgb.b = Math.round(rgb.b * 255);

    return rgb;
  };

  $.fn.ColorPickerSliders.detectWhichGradientIsSupported = function() {
    var testelement = document.createElement('detectGradientSupport').style;

    try {
      testelement.backgroundImage = 'linear-gradient(to top left, #9f9, white)';
      if (testelement.backgroundImage.indexOf('gradient') !== -1) {
        return 'noprefix';
      }

      testelement.backgroundImage = '-webkit-linear-gradient(left top, #9f9, white)';
      if (testelement.backgroundImage.indexOf('gradient') !== -1) {
        return 'webkit';
      }

      testelement.backgroundImage = '-ms-linear-gradient(left top, #9f9, white)';
      if (testelement.backgroundImage.indexOf('gradient') !== -1) {
        return 'ms';
      }

      testelement.backgroundImage = '-webkit-gradient(linear, left top, right bottom, from(#9f9), to(white))';
      if (testelement.backgroundImage.indexOf('gradient') !== -1) {
        return 'oldwebkit';
      }
    }
    catch (err) {
      try {
        testelement.filter = 'progid:DXImageTransform.Microsoft.gradient(startColorstr="#ffffff",endColorstr="#000000",GradientType=0)';
        if (testelement.filter.indexOf('DXImageTransform') !== -1) {
          return 'filter';
        }
      }
      catch (err) {
      }
    }

    return false;
  };

  $.fn.ColorPickerSliders.svgSupported = function() {
    return !!document.createElementNS && !!document.createElementNS('http://www.w3.org/2000/svg', 'svg').createSVGRect;
  };

})(jQuery);

define("colorpicker", function(){});

/*
	jQuery tagEditor v1.0.20
    Copyright (c) 2014 Simon Steinberger / Pixabay
    GitHub: https://github.com/Pixabay/jQuery-tagEditor
	License: http://www.opensource.org/licenses/mit-license.php
*/
(function (factory) {
    

    if (typeof define === 'function' && define.amd) {
        // Define as an AMD module if possible
        define('taginput', ['jquery', 'knockout'], factory);
    }
    else if (typeof exports === 'object') {
        // Node/CommonJS
        factory(require('jquery'), require('knockout'));
    }
    else if (jQuery) {
        // Define using browser globals otherwise
        // Prevent multiple instantiations if the script is loaded twice
        factory(jQuery, window.knockout || window.ko);
    }
})

(function($, ko){
    // auto grow input (stackoverflow.com/questions/931207)
    $.fn.tagEditorInput=function(){var t=" ",e=$(this),n=parseInt(e.css("fontSize")),i=$("<span/>").css({position:"absolute",top:-9999,left:-9999,width:"auto",fontSize:e.css("fontSize"),fontFamily:e.css("fontFamily"),fontWeight:e.css("fontWeight"),letterSpacing:e.css("letterSpacing"),whiteSpace:"nowrap"}),s=function(){if(t!==(t=e.val())){i.text(t);var s=i.width()+n;20>s&&(s=20),s!=e.width()&&e.width(s)}};return i.insertAfter(e),e.bind("keyup keydown focus",s)};

    // plugin with val as parameter for public methods
    $.fn.tagEditor = function(options, val, blur){

        // helper
        function escape(tag) {
            return tag.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#39;").replace(/;/g, "&#59;");
        }

        // build options dictionary with default values
        var blur_result, o = $.extend({}, $.fn.tagEditor.defaults, options), selector = this;

        // store regex and default delimiter in options for later use
        o.dregex = new RegExp('['+o.delimiter.replace('-', '\-')+']', 'g');

        // public methods
        if (typeof options == 'string') {
            // depending on selector, response may contain tag lists of multiple editor instances
            var response = [];
            selector.each(function(){
                // the editor is the next sibling to the hidden, original field
                var el = $(this), o = el.data('options'), ed = el.next('.tag-editor');
                if (options == 'getTags')
                    response.push({field: el[0], editor: ed, tags: ed.data('tags')});
                else if (options == 'addTag') {
                    if (o.maxTags && ed.data('tags') && ed.data('tags').length >= o.maxTags) return false;
                    if (!o.editable()) return false;
                    // insert new tag
                    $('<li><div class="tag-editor-spacer" >&nbsp;' + o.delimiter[0] + '</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>').appendTo(ed).find('.tag-editor-tag')
                        .html('<input type="text" placeholder="Test" maxlength="'+o.maxLength+'">').addClass('active').find('input').val(val).blur();
                    if (!blur) ed.click();
                    else $('.placeholder', ed).remove();
                } else if (options == 'removeTag') {
                    // trigger delete on matching tag, then click editor to create a new tag
                    $('.tag-editor-tag', ed).filter(function(){return $(this).text()==val;}).closest('li').find('.tag-editor-delete').click();
                    if (!blur) ed.click();
                } else if (options == 'destroy') {
                    el.removeClass('tag-editor-hidden-src').removeData('options').off('focus.tag-editor').next('.tag-editor').remove();
                }
            });
            return options == 'getTags' ? response : this;
        }

        // delete selected tags on backspace, delete, ctrl+x
        if (window.getSelection) $(document).off('keydown.tag-editor').on('keydown.tag-editor', function(e){
            if (e.which == 8 || e.which == 46 || e.ctrlKey && e.which == 88) {
                try {
                    var sel = getSelection(), el = document.activeElement.tagName == 'BODY' ? $(sel.getRangeAt(0).startContainer.parentNode).closest('.tag-editor') : 0;
                } catch(e){ el = 0; }
                if (sel.rangeCount > 0 && el && el.length) {
                    var tags = [], splits = sel.toString().split(el.prev().data('options').dregex);
                    for (i=0; i<splits.length; i++){ var tag = $.trim(splits[i]); if (tag) tags.push(tag); }
                    $('.tag-editor-tag', el).each(function(){
                        if (~$.inArray($(this).text(), tags)) $(this).closest('li').find('.tag-editor-delete').click();
                    });
                    return false;
                }
            }
        });

        return selector.each(function(){
            var el = $(this), tag_list = []; // cache current tags

            // create editor (ed) instance
            var ed = $('<ul '+(o.clickDelete ? 'oncontextmenu="return false;" ' : '')+'class="tag-editor"></ul>').insertAfter(el);
            el.addClass('tag-editor-hidden-src') // hide original field
                .data('options', o) // set data on hidden field
                .on('focus.tag-editor', function(){ ed.click(); }); // simulate tabindex

            // add dummy item for min-height on empty editor
            ed.append('<li style="width:1px">&nbsp;</li>');

            // markup for new tag
            var new_tag = '<li><div class="tag-editor-spacer" >&nbsp;' + o.delimiter[0] + '</div><div class="tag-editor-tag"></div><div class="tag-editor-delete"><i></i></div></li>';

            // helper: update global data
            function set_placeholder(){
                if (o.placeholder && !tag_list.length && !$('.deleted, .placeholder, input', ed).length)
                    ed.append('<li class="placeholder"><div>'+o.placeholder+'</div></li>');
            }

            // helper: update global data
            function update_globals(init){
                var old_tags = tag_list.toString();
                tag_list = $('.tag-editor-tag:not(.deleted)', ed).map(function(i, e) {
                    var val = $.trim($(this).hasClass('active') ? $(this).find('input').val() : $(e).text());
                    if (val) return val;
                }).get();
                ed.data('tags', tag_list);
                el.val(tag_list.join(o.delimiter[0]));
                // change callback except for plugin init
                if (!init) if (old_tags != tag_list.toString()) o.onChange(el, ed, tag_list);
                set_placeholder();
            }

            ed.click(function(e, closest_tag){
                var d, dist = 99999, loc;
                if (!o.editable()) return false;
                // do not create tag when user selects tags by text selection
                if (window.getSelection && getSelection() != '') return;

                if (o.maxTags && ed.data('tags') && ed.data('tags').length >= o.maxTags) { ed.find('input').blur(); return false; }
                if (!o.editable()) return false;
                blur_result = true
                $('input:focus', ed).blur();
                if (!blur_result) return false;
                blur_result = true

                // always remove placeholder on click
                $('.placeholder', ed).remove();
                if (closest_tag && closest_tag.length)
                    loc = 'before';
                else {
                    // calculate tag closest to click position
                    $('.tag-editor-tag', ed).each(function(){
                        var tag = $(this), to = tag.offset(), tag_x = to.left, tag_y = to.top;
                        if (e.pageY >= tag_y && e.pageY <= tag_y+tag.height()) {
                            if (e.pageX < tag_x) loc = 'before', d = tag_x - e.pageX;
                            else loc = 'after', d = e.pageX - tag_x - tag.width();
                            if (d < dist) dist = d, closest_tag = tag;
                        }
                    });
                }

                if (loc == 'before') {
                    $(new_tag).insertBefore(closest_tag.closest('li')).find('.tag-editor-tag').click();
                } else if (loc == 'after')
                    $(new_tag).insertAfter(closest_tag.closest('li')).find('.tag-editor-tag').click();
                else // empty editor
                    $(new_tag).appendTo(ed).find('.tag-editor-tag').click();
                return false;
            });

            ed.on('click', '.tag-editor-delete', function (e) {
                if (!o.editable()) return false;
                // delete icon is hidden when input is visible; place cursor near invisible delete icon on click
                if ($(this).prev().hasClass('active')) { $(this).closest('li').find('input').caret(-1); return false; }

                var li = $(this).closest('li'), tag = li.find('.tag-editor-tag');
                if (o.beforeTagDelete(el, ed, tag_list, tag.text(), $(tag[0]).attr('data-index')) === false) return false;
                tag.addClass('deleted').animate({width: 0}, o.animateDelete, function(){ li.remove(); set_placeholder(); });
                update_globals();
                return false;
            });

            // delete on right mouse click or ctrl+click
            if (o.clickDelete)
                ed.on('mousedown', '.tag-editor-tag', function (e) {
                    if (!o.editable()) return false;
                    if (e.ctrlKey || e.which > 1) {
                        var li = $(this).closest('li'), tag = li.find('.tag-editor-tag');
                        if (o.beforeTagDelete(el, ed, tag_list, tag.text(), $(tag[0]).attr('data-index')) === false) return false;
                        tag.addClass('deleted').animate({width: 0}, o.animateDelete, function(){ li.remove(); set_placeholder(); });
                        update_globals();
                        return false;
                    }
                });

            ed.on('click', '.tag-editor-tag', function(e){
                // delete on right click or ctrl+click -> exit
                if (o.clickDelete && (e.ctrlKey || e.which > 1)) return false;
                if (!o.editable()) return false;

                if (!$(this).hasClass('active')) {
                    var tag = $(this).text();
                    // guess cursor position in text input
                    var left_percent = Math.abs(($(this).offset().left - e.pageX) / $(this).width()), caret_pos = parseInt(tag.length * left_percent);
                    //if (!left_percent) {
                    //    return false;
                    //}
                    var placeHolder = o.defaultPlaceholder;
                    var tags = o.initialTags();
                    var curIndex = null;
                    for (var i = 0; i < tags.length; i++) {
                        if (o.maxTags && i >= o.maxTags) break;
                        var curTag = tags[i];
                        if (e.currentTarget.id !=  'modG' + o.mDemantion + '-' + curTag.dimantion)
                            continue;
                        curIndex = curTag.dimantion;
                        if (curTag.names) {
                            for (var n = 0; n < curTag.names().length; n++) {

                                if (curTag.names()[n].languageId == o.defaultPosLng) {
                                    placeHolder = curTag.names()[n].name() ? curTag.names()[n].name() : o.defaultPlaceholder;
                                    break;
                                }
                            }
                        }
                        break;
                    }


                    var input = $(this).html('<input style="min-width:100px;" type="text" placeholder="' + placeHolder + '" maxlength="' + o.maxLength + '" value="' + escape(tag.replace(/\s+/g, '')) + '">').addClass('active').find('input');
                    if (curIndex == null) {

                        var maxVal = -1;
                        if (tags && tags.length > 0) {
                            for (var d = 0; d < tags.length; d++) {
                                if (tags[d].dimantion > maxVal) {
                                    maxVal = tags[d].dimantion;
                                }
                            }
                        }
                        curIndex = maxVal + 1;
                    }                    
                    input.data('modIndex', curIndex);
                    
                    
                    if (input.data('old_tag', tag).tagEditorInput().focus().caret) {
                        input.data('old_tag', tag).tagEditorInput().focus().caret(caret_pos);
                    }

                    if (o.autocomplete) {
                        var aco = $.extend({}, o.autocomplete);
                        // extend user provided autocomplete select method
                        var ac_select = 'select'  in aco ? o.autocomplete.select : '';
                        aco.select = function(e, ui){ if (ac_select) ac_select(e, ui); setTimeout(function(){
                            ed.trigger('click', [$('.active', ed).find('input').closest('li').next('li').find('.tag-editor-tag')]);
                        }, 20); };
                        input.autocomplete(aco);
                    }
                }
                return false;
            });

            // helper: split into multiple tags, e.g. after paste
            function split_cleanup(input){
                var li = input.closest('li'), sub_tags = input.val().replace(/ +/, ' ').split(o.dregex),
                    old_tag = input.data('old_tag'), old_tags = tag_list.slice(0), exceeded = false, cb_val; // copy tag_list
                var modIndex = input.data('modIndex');
                for (var i=0; i<sub_tags.length; i++) {
                    tag = $.trim(sub_tags[i]).slice(0, o.maxLength);
                    if (o.forceLowercase) tag = tag.toLowerCase();
                    cb_val = o.beforeTagSave(el, ed, old_tags, old_tag, tag, modIndex);
                    tag = cb_val || tag;
                    if (cb_val === false || !tag) continue;
                    // remove duplicates
                    if (o.removeDuplicates && ~$.inArray(tag, old_tags))
                        $('.tag-editor-tag', ed).each(function(){ if ($(this).text() == tag) $(this).closest('li').remove(); });
                    old_tags.push(tag);
                    li.before('<li><div class="tag-editor-spacer" >&nbsp;'+o.delimiter[0]+'</div><div class="tag-editor-tag">'+escape(tag)+'</div><div class="tag-editor-delete"><i></i></div></li>');
                    if ((o.maxTags && old_tags.length >= o.maxTags) || !o.editable()) { exceeded = true; break; }
                    
                }
                input.attr('maxlength', o.maxLength).removeData('old_tag').val('')
                if (exceeded) input.blur(); else input.focus();
                update_globals();
            }

            ed.on('blur', 'input', function (e) {
                if (!o.editable()) return false;
                e.stopPropagation();
                var input = $(this), old_tag = input.data('old_tag'), tag = $.trim(input.val().replace(/ +/, ' ').replace(o.dregex, o.delimiter[0]));
                var modIndex = input.data('modIndex');
                if (input[0].placeholder != o.defaultPlaceholder && tag == '') {
                    tag = o.defaultSpace;
                }
                if (!tag && input[0].placeholder == o.defaultPlaceholder) {
                    if (old_tag && o.beforeTagDelete(el, ed, tag_list, old_tag) === false) {
                        input.val(old_tag).focus();
                        blur_result = false;
                        update_globals();
                        return;
                    }
                    try { input.closest('li').remove(); } catch(e){}
                    if (old_tag) update_globals();
                }
                else if (tag.indexOf(o.delimiter[0])>=0) { split_cleanup(input); return; }
                else if (tag != old_tag) {
                    if (o.forceLowercase) tag = tag.toLowerCase();
                    cb_val = o.beforeTagSave(el, ed, tag_list, old_tag, tag, modIndex);
                    tag = cb_val || tag;
                    if (cb_val === false) {
                        if (old_tag) {
                            input.val(old_tag).focus();
                            blur_result = false;
                            update_globals();
                            return;
                        }
                        try { input.closest('li').remove(); } catch(e){}
                        if (old_tag) update_globals();
                    }
                    // remove duplicates
                    else if (o.removeDuplicates)
                        $('.tag-editor-tag:not(.active)', ed).each(function(){ if ($(this).text() == tag) $(this).closest('li').remove(); });
                }
                input.parent().html(tag).removeClass('active');
                if (tag != old_tag) update_globals();
                set_placeholder();
            });

            var pasted_content;
            ed.on('paste', 'input', function (e) {
                if (!o.editable()) return false;
                $(this).removeAttr('maxlength');
                pasted_content = $(this);
                setTimeout(function(){ split_cleanup(pasted_content); }, 30);
            });

            // keypress delimiter
            var inp;
            ed.on('keypress', 'input', function (e) {
                if (!o.editable()) return false;
                if (o.delimiter.indexOf(String.fromCharCode(e.which))>=0) {
                    inp = $(this);
                    setTimeout(function(){ split_cleanup(inp); }, 20);
                }
            });

            ed.on('keydown', 'input', function(e){
                var $t = $(this);
                if (!o.editable()) return false;
                // left/up key + backspace key on empty field
                if ((e.which == 37 || !o.autocomplete && e.which == 38) && !$t.caret() || e.which == 8 && !$t.val()) {


                    var prev_tag = $t.closest('li').prev('li').find('.tag-editor-tag');
                    if (prev_tag.length) prev_tag.click().find('input').caret(-1);
                    else if ($t.val() && !(o.maxTags && ed.data('tags').length >= o.maxTags)) $(new_tag).insertBefore($t.closest('li')).find('.tag-editor-tag').click();
                    return false;
                }
                // right/down key
                else if ((e.which == 39 || !o.autocomplete && e.which == 40) && ($t.caret() == $t.val().length)) {
                    var next_tag = $t.closest('li').next('li').find('.tag-editor-tag');
                    if (next_tag.length) next_tag.click().find('input').caret(0);
                    else if ($t.val()) ed.click();
                    return false;
                }
                // tab key
                else if (e.which == 9) {
                    // shift+tab
                    if (e.shiftKey) {
                        var prev_tag = $t.closest('li').prev('li').find('.tag-editor-tag');
                        if (prev_tag.length) prev_tag.click().find('input').caret(0);
                        else if ($t.val() && !(o.maxTags && ed.data('tags').length >= o.maxTags)) $(new_tag).insertBefore($t.closest('li')).find('.tag-editor-tag').click();
                        // allow tabbing to previous element
                        else {
                            el.attr('disabled', 'disabled');
                            setTimeout(function(){ el.removeAttr('disabled'); }, 30);
                            return;
                        }
                        return false;
                    // tab
                    } else {
                        var next_tag = $t.closest('li').next('li').find('.tag-editor-tag');
                        if (next_tag.length) next_tag.click().find('input').caret(0);
                        else if ($t.val()) ed.click();
                        else return; // allow tabbing to next element
                        return false;
                    }
                }
                // del key
                else if (e.which == 46 && (!$.trim($t.val()) || ($t.caret && $t.caret() == $t.val().length))) {
                    var next_tag = $t.closest('li').next('li').find('.tag-editor-tag');
                    if (next_tag.length) next_tag.click().find('input').caret(0);
                    else if ($t.val()) ed.click();
                    return false;
                }
                // enter key
                else if (e.which == 13) {
                    ed.trigger('click', [$t.closest('li').next('li').find('.tag-editor-tag')]);

                    // trigger blur if maxTags limit is reached
                    if (o.maxTags && ed.data('tags').length >= o.maxTags) ed.find('input').blur();

                    return false;
                }
                // pos1
                else if (e.which == 36 && !$t.caret()) ed.find('.tag-editor-tag').first().click();
                // end
                else if (e.which == 35 && $t.caret() == $t.val().length) ed.find('.tag-editor-tag').last().click();
                // esc
                else if (e.which == 27) {
                    $t.val($t.data('old_tag') ? $t.data('old_tag') : '').blur();
                    return false;
                }
            });

            // create initial tags
            var tags = o.initialTags();
            var tag = '';
            for (var i=0; i<tags.length; i++) {
                if (o.maxTags && i >= o.maxTags) break;
                var curTag = tags[i];
                if (curTag.names) {
                    for (var n = 0; n < curTag.names().length; n++) {

                        if (curTag.names()[n].languageId == o.selectedLng()) {
                            tag = curTag.names()[n].name() ? curTag.names()[n].name() : '';
                        }
                    }
                }

                //var tag = $.trim(tags[i].replace(/ +/, ' '));
                if (tag || tag =='') {
                    if (o.forceLowercase) tag = tag.toLowerCase();
                    tag_list.push(tag);

                    var tagClass = '';
                    if (tag == '') {
                     
                        tag = o.defaultSpace;
                    }
                    
                    ed.append('<li><div class="tag-editor-spacer" >&nbsp;' + o.delimiter[0] + '</div><div data-index="' + curTag.dimantion + '" id="modG' + o.mDemantion + '-' + curTag.dimantion + '" class="tag-editor-tag ">' + tag + '</div><div class="tag-editor-delete"><i></i></div></li>');
                }
            }
            update_globals(true); // true -> no onChange callback

            // init sortable
            if (o.sortable && $.fn.sortable) ed.sortable({
                distance: 5, cancel: '.tag-editor-spacer, input', helper: 'clone',
                update: function(){ update_globals(); }
            });
        });
    };

    $.fn.tagEditor.defaults = {
        initialTags: ko.observableArray(),
        maxTags: 10,
        maxLength: 50,
        delimiter: ',',
        placeholder: '',
        forceLowercase: false,
        removeDuplicates: false,
        clickDelete: false,
        animateDelete: 0,
        sortable: false, // jQuery UI sortable
        autocomplete: null, // options dict for jQuery UI autocomplete

        // callbacks
        onChange: function(){},
        beforeTagSave: function(){},
        beforeTagDelete: function () { },
        editable: ko.observable(false),
        selectedLng: ko.observable('EN'),
        defaultPlaceholder: 'Enter Name',
        defaultPosLng: 'EN',
        defaultSpace: '&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;',
        idVal: null,
        mDemantion: -1
    };
});

/*
 * Toastr
 * Copyright 2012-2014 
 * Authors: John Papa, Hans Fjällemark, and Tim Ferrell.
 * All Rights Reserved.
 * Use, reproduction, distribution, and modification of this code is subject to the terms and
 * conditions of the MIT license, available at http://www.opensource.org/licenses/mit-license.php
 *
 * ARIA Support: Greta Krafsig
 *
 * Project: https://github.com/CodeSeven/toastr
 */
; (function (define) {
    define('toastr',['jquery'], function ($) {
        return (function () {
            var $container;
            var listener;
            var toastId = 0;
            var toastType = {
                error: 'error',
                info: 'info',
                success: 'success',
                warning: 'warning'
            };

            var toastr = {
                clear: clear,
                remove: remove,
                error: error,
                getContainer: getContainer,
                info: info,
                options: {},
                subscribe: subscribe,
                success: success,
                version: '2.1.0',
                warning: warning
            };

            var previousToast;

            return toastr;

            //#region Accessible Methods
            function error(message, title, optionsOverride) {
                return notify({
                    type: toastType.error,
                    iconClass: getOptions().iconClasses.error,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function getContainer(options, create) {
                if (!options) { options = getOptions(); }
                $container = $('#' + options.containerId);
                if ($container.length) {
                    return $container;
                }
                if (create) {
                    $container = createContainer(options);
                }
                return $container;
            }

            function info(message, title, optionsOverride) {
                return notify({
                    type: toastType.info,
                    iconClass: getOptions().iconClasses.info,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function subscribe(callback) {
                listener = callback;
            }

            function success(message, title, optionsOverride) {
                return notify({
                    type: toastType.success,
                    iconClass: getOptions().iconClasses.success,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function warning(message, title, optionsOverride) {
                return notify({
                    type: toastType.warning,
                    iconClass: getOptions().iconClasses.warning,
                    message: message,
                    optionsOverride: optionsOverride,
                    title: title
                });
            }

            function clear($toastElement) {
                var options = getOptions();
                if (!$container) { getContainer(options); }
                if (!clearToast($toastElement, options)) {
                    clearContainer(options);
                }
            }

            function remove($toastElement) {
                var options = getOptions();
                if (!$container) { getContainer(options); }
                if ($toastElement && $(':focus', $toastElement).length === 0) {
                    removeToast($toastElement);
                    return;
                }
                if ($container.children().length) {
                    $container.remove();
                }
            }
            //#endregion

            //#region Internal Methods

            function clearContainer (options) {
                var toastsToClear = $container.children();
                for (var i = toastsToClear.length - 1; i >= 0; i--) {
                    clearToast($(toastsToClear[i]), options);
                }
            }

            function clearToast ($toastElement, options) {
                if ($toastElement && $(':focus', $toastElement).length === 0) {
                    $toastElement[options.hideMethod]({
                        duration: options.hideDuration,
                        easing: options.hideEasing,
                        complete: function () { removeToast($toastElement); }
                    });
                    return true;
                }
                return false;
            }

            function createContainer(options) {
                $container = $('<div/>')
                    .attr('id', options.containerId)
                    .addClass(options.positionClass)
                    .attr('aria-live', 'polite')
                    .attr('role', 'alert');

                $container.appendTo($(options.target));
                return $container;
            }

            function getDefaults() {
                return {
                    tapToDismiss: true,
                    toastClass: 'toast',
                    containerId: 'toast-container',
                    debug: false,

                    showMethod: 'fadeIn', //fadeIn, slideDown, and show are built into jQuery
                    showDuration: 300,
                    showEasing: 'swing', //swing and linear are built into jQuery
                    onShown: undefined,
                    hideMethod: 'fadeOut',
                    hideDuration: 1000,
                    hideEasing: 'swing',
                    onHidden: undefined,

                    extendedTimeOut: 1000,
                    iconClasses: {
                        error: 'toast-error',
                        info: 'toast-info',
                        success: 'toast-success',
                        warning: 'toast-warning'
                    },
                    iconClass: 'toast-info',
                    positionClass: 'toast-top-right',
                    timeOut: 5000, // Set timeOut and extendedTimeOut to 0 to make it sticky
                    titleClass: 'toast-title',
                    messageClass: 'toast-message',
                    target: 'body',
                    closeHtml: '<button>&times;</button>',
                    newestOnTop: true,
                    preventDuplicates: false,
                    progressBar: false
                };
            }

            function publish(args) {
                if (!listener) { return; }
                listener(args);
            }

            function notify(map) {
                var options = getOptions(),
                    iconClass = map.iconClass || options.iconClass;

                if (options.preventDuplicates) {
                    if (map.message === previousToast) {
                        return;
                    } else {
                        previousToast = map.message;
                    }
                }

                if (typeof (map.optionsOverride) !== 'undefined') {
                    options = $.extend(options, map.optionsOverride);
                    iconClass = map.optionsOverride.iconClass || iconClass;
                }

                toastId++;

                $container = getContainer(options, true);
                var intervalId = null,
                    $toastElement = $('<div/>'),
                    $titleElement = $('<div/>'),
                    $messageElement = $('<div/>'),
                    $progressElement = $('<div/>'),
                    $closeElement = $(options.closeHtml),
                    progressBar = {
                        intervalId: null,
                        hideEta: null,
                        maxHideTime: null
                    },
                    response = {
                        toastId: toastId,
                        state: 'visible',
                        startTime: new Date(),
                        options: options,
                        map: map
                    };

                if (map.iconClass) {
                    $toastElement.addClass(options.toastClass).addClass(iconClass);
                }

                if (map.title) {
                    $titleElement.append(map.title).addClass(options.titleClass);
                    $toastElement.append($titleElement);
                }

                if (map.message) {
                    $messageElement.append(map.message).addClass(options.messageClass);
                    $toastElement.append($messageElement);
                }

                if (options.closeButton) {
                    $closeElement.addClass('toast-close-button').attr('role', 'button');
                    $toastElement.prepend($closeElement);
                }

                if (options.progressBar) {
                    $progressElement.addClass('toast-progress');
                    $toastElement.prepend($progressElement);
                }

                $toastElement.hide();
                if (options.newestOnTop) {
                    $container.prepend($toastElement);
                } else {
                    $container.append($toastElement);
                }
                $toastElement[options.showMethod](
                    {duration: options.showDuration, easing: options.showEasing, complete: options.onShown}
                );

                if (options.timeOut > 0) {
                    intervalId = setTimeout(hideToast, options.timeOut);
                    progressBar.maxHideTime = parseFloat(options.timeOut);
                    progressBar.hideEta = new Date().getTime() + progressBar.maxHideTime;
                    if (options.progressBar) {
                        progressBar.intervalId = setInterval(updateProgress, 10);
                    }
                }

                $toastElement.hover(stickAround, delayedHideToast);
                if (!options.onclick && options.tapToDismiss) {
                    $toastElement.click(hideToast);
                }

                if (options.closeButton && $closeElement) {
                    $closeElement.click(function (event) {
                        if (event.stopPropagation) {
                            event.stopPropagation();
                        } else if (event.cancelBubble !== undefined && event.cancelBubble !== true) {
                            event.cancelBubble = true;
                        }
                        hideToast(true);
                    });
                }

                if (options.onclick) {
                    $toastElement.click(function () {
                        options.onclick();
                        hideToast();
                    });
                }

                publish(response);

                if (options.debug && console) {
                    console.log(response);
                }

                return $toastElement;

                function hideToast(override) {
                    if ($(':focus', $toastElement).length && !override) {
                        return;
                    }
                    clearTimeout(progressBar.intervalId);
                    return $toastElement[options.hideMethod]({
                        duration: options.hideDuration,
                        easing: options.hideEasing,
                        complete: function () {
                            removeToast($toastElement);
                            if (options.onHidden && response.state !== 'hidden') {
                                options.onHidden();
                            }
                            response.state = 'hidden';
                            response.endTime = new Date();
                            publish(response);
                        }
                    });
                }

                function delayedHideToast() {
                    if (options.timeOut > 0 || options.extendedTimeOut > 0) {
                        intervalId = setTimeout(hideToast, options.extendedTimeOut);
                        progressBar.maxHideTime = parseFloat(options.extendedTimeOut);
                        progressBar.hideEta = new Date().getTime() + progressBar.maxHideTime;
                    }
                }

                function stickAround() {
                    clearTimeout(intervalId);
                    progressBar.hideEta = 0;
                    $toastElement.stop(true, true)[options.showMethod](
                        {duration: options.showDuration, easing: options.showEasing}
                    );
                }

                function updateProgress() {
                    var percentage = ((progressBar.hideEta - (new Date().getTime())) / progressBar.maxHideTime) * 100;
                    $progressElement.width(percentage + '%');
                }
            }

            function getOptions() {
                return $.extend({}, getDefaults(), toastr.options);
            }

            function removeToast($toastElement) {
                if (!$container) { $container = getContainer(); }
                if ($toastElement.is(':visible')) {
                    return;
                }
                $toastElement.remove();
                $toastElement = null;
                if ($container.children().length === 0) {
                    $container.remove();
                }
            }
            //#endregion

        })();
    });
}(typeof define === 'function' && define.amd ? define : function (deps, factory) {
    if (typeof module !== 'undefined' && module.exports) { //Node
        module.exports = factory(require('jquery'));
    } else {
        window['toastr'] = factory(window['jQuery']);
    }
}));

function initKnockout(e){e.bindingHandlers["class"]={update:function(t,o){var n=e.utils.unwrapObservable(o()),r=t.__ko__previousClassValue__,a=function(o,n){"[object Array]"===Object.prototype.toString.call(o)?e.utils.arrayForEach(o,function(o){var r=e.utils.unwrapObservable(o);e.utils.toggleDomNodeCssClass(t,r,n)}):o&&e.utils.toggleDomNodeCssClass(t,o,n)};a(r,!1),a(n,!0),t.__ko__previousClassValue__=n.concat()}},e.bindingHandlers.keydown={init:function(e,t,o,n){var r=t();$(e).keydown(function(e){return r.call(n,e),!0})}},$("body").keydown(function(e){var t=e.key,o="[data-keypress='"+t+"']:visible",n=$(o);return n.size()>0?(n.click(),e.preventDefault(),!1):void 0})}function boot(e,t,o,n,r,a,i,s){i.debug(!0),$.extend(!0,$.fn.dataTable.defaults,{column:{render:$.fn.dataTable.render.text()}}),$(document).ajaxError(function(e,t){(401===t.status||403===t.status)&&($("#content").removeClass("show-content"),s.navigate("smartLogin"),location.reload(!0))}),$(document).ajaxSend(function(e,t,o){if("GET"!=o.type.toUpperCase()){var n=App.requestVerificationToken;n&&t.setRequestHeader("X-XSRF-Token",n)}}),$(document).ajaxComplete(function(e,t){var o=t.getResponseHeader("XSRFToken");o&&(App.requestVerificationToken=o)});var c=$.Deferred();e(["services/initService","services/text","langs"],function(e,t,o){e.beforeAppStart().then(function(){t.init(o),t.initPromise.then(function(){c.resolve()}),n.lang=t})}),r.title=App.title,r.configurePlugins({router:!0}),c.then(function(){r.start().then(function(){a.useConvention(),r.setRoot("viewmodels/shell")})})}var globalLog=[];console.log1=function(e,t){var o=e;t&&(o+=" : "+t),globalLog.push(o),alert(globalLog.join("\n"))},require.config({paths:{jquery:"../scripts/jquery-2.1.3",knockout:"../scripts/knockout-3.2.0.js",bootstrap:"../scripts/bootstrap",raphael:"../scripts/morrisJS/raphael-min",morris:"../scripts/morrisJS/morris",datatables:"../scripts/jquery.datatables/jquery.dataTables","datatables-extensions":"../scripts/jquery.datatables/jquery.dataTables.extensions","datatables-export-csv":"../scripts/jquery.datatables/jquery.dataTables.exportCSV","jquery-datetimepicker":"../scripts/datepicker/jquery.datetimepicker","jquery-ui":"../scripts/jqueryUI.sortable/jquery-ui-1.10.4.custom",daterangepicker:"../scripts/daterangepicker/daterangepicker",colorpicker:"../scripts/colorpicker/bootstrap.colorpickersliders",taginput:"../scripts/jQuery-Tag-Input/jquery.tag-editor",linq:"../scripts/linq/linq",text:"../scripts/text",durandal:"../scripts/durandal",plugins:"../scripts/durandal/plugins",transitions:"../scripts/durandal/transitions",knockout:"../scripts/knockout-3.2.0.debug","knockout.extenders":"../scripts/knockout.extenders","ko.bindingHandlers":"../scripts/knockout.customBindings","ko.localBindings":"../scripts/knockout.localBindings","knockout.mapping":"../scripts/knockout.mapping","knockout.validation":"../scripts/knockout.validation/knockout.validation.debug","knockout.validation.extenders":"../scripts/knockout.validation/knockout.validation.extenders",moment:"../scripts/moment-with-locales",multiSelectEx:"../scripts/common-controls/multiSelectEx","button-dropdown":"../scripts/common-controls/button-dropdown","custom-datatables-filter":"../scripts/common-controls/custom-datatables-filter",checkbox:"../scripts/common-controls/checkbox",checkboxColumn:"../scripts/common-controls/checkboxColumn","tab-control":"../scripts/common-controls/tab-control",fileDialog:"../scripts/common-controls/fileDialog",paginate:"../scripts/common-controls/paginate",confirm:"../scripts/common-controls/confirm",alert:"../scripts/common-controls/alert",toastr:"../scripts/toastr",enums:"../scripts/enums","es6-promise":"../scripts/es6-promise-2.0.1.min",DragDropTouch:"../scripts/DragDropTouch","jquery.ui.widget":"../scripts/jQuery-File-Upload/vendor/jquery.ui.widget","jquery.iframe-transport":"../scripts/jQuery-File-Upload/jquery.iframe-transport","jquery.fileupload":"../scripts/jQuery-File-Upload/jquery.fileupload","jquery.fileupload-process":"../scripts/jQuery-File-Upload/jquery.fileupload-process","jquery.fileupload-validate":"../scripts/jQuery-File-Upload/jquery.fileupload-validate","jquery.ui.touch-punch":"../scripts/jquery.ui.touch-punch","jquery.slim":"../scripts/slim/slim.global.min","jquery.signalR":"../scripts/jquery.signalR-2.2.0.min",hubs:"../signalr/hubs?",langs:"../Lang/Get?",controls:"../scripts/common-controls",stringMethods:"../scripts/polyfills/stringMethods"},shim:{knockout:{deps:["jquery"],exports:"ko"},"knockout.extenders":{deps:["knockout"]},"ko.bindingHandlers":{deps:["knockout"]},"ko.localBindings":{deps:["knockout"]},"knockout.mapping":{deps:["knockout"],exports:"komapping"},"knockout.validation":{deps:["knockout"],exports:"knockout.validation"},"knockout.validation.extenders":{deps:["knockout","knockout.validation"],exports:"knockout.validation.extenders"},jquery:{deps:[],exports:"jQuery"},bootstrap:{deps:["jquery"],exports:"bootstrap"},morris:{deps:["jquery"],exports:"morris"},raphael:{deps:["jquery"],exports:"raphael"},datatables:{deps:["jquery"],exports:"datatables"},"datatables-extensions":{deps:["datatables"],exports:"datatables-extensions"},"datatables-export-csv":{deps:["datatables"],exports:"datatables-export-csv"},"jquery-datetimepicker":{deps:["jquery"],exports:"jquery-datetimepicker"},"jquery-ui":{deps:["jquery"],exports:"jquery-ui"},"jquery.ui.widget":{deps:["jquery"],exports:"jquery.ui.widget"},"jquery.ui.touch-punch":{deps:["jquery","jquery-ui"],exports:""},"jquery.slim":{deps:["jquery"],exports:""},linq:{deps:[],exports:"linq"},multiSelectEx:{deps:["jquery","knockout"]},"button-dropdown":{deps:["jquery"]},"custom-datatables-filter":{deps:["jquery","datatables"]},checkbox:{deps:["jquery"]},checkboxColumn:{deps:["jquery"]},"tab-control":{deps:["jquery"]},fileDialog:{deps:["jquery"]},paginate:{deps:["jquery"]},confirm:{deps:["jquery"]},alert:{deps:["jquery"]},"jquery.iframe-transport":{deps:["jquery"]},"jquery.fileupload":{deps:["jquery","jquery.iframe-transport"]},"jquery.fileupload-process":{deps:["jquery","jquery.fileupload"]},"jquery.fileupload-validate":{deps:["jquery","jquery.fileupload"]},"jquery.signalR":{deps:["jquery"]},hubs:{deps:["jquery.signalR"],exports:"hubs"},langs:{deps:[],exports:"langs"},colorpicker:{deps:["jquery"],exports:"colorpicker"},taginput:{deps:["jquery","knockout"],exports:"taginput"}}}),require(["stringMethods","knockout","knockout.mapping","ko.bindingHandlers","knockout.extenders","knockout.validation","knockout.validation.extenders","ko.localBindings"],function(e,t,o){initKnockout(t),t.mapping=o,t.validation.init({grouping:{deep:!0}})}),window.Promise||require(["es6-promise"],function(e){window.Promise=e.Promise}),define('main',["require","jquery","bootstrap","knockout","durandal/app","durandal/viewLocator","durandal/system","plugins/router","raphael","morris","datatables","datatables-extensions","datatables-export-csv","jquery-datetimepicker","jquery-ui","linq","moment","multiSelectEx","button-dropdown","custom-datatables-filter","checkbox","checkboxColumn","tab-control","fileDialog","paginate","jquery.iframe-transport","jquery.fileupload","jquery.fileupload-process","jquery.fileupload-validate","jquery.signalR","jquery.ui.touch-punch","jquery.slim","components/date-filter/date-filter","components/qb-accounts/qb-accounts","components/puertoRico-controlNumber/pr-controlNumber","components/multiSelector/multiSelector","daterangepicker","colorpicker","taginput","toastr"],boot);
define('common/constants',[],function(){return{configChangedEvent:"app:config:changed",logConfigChangedEvent:"app:logConfig:changed",logLevelChangedEvent:"app:log:level:changed",logMinLevelChangedEvent:"app:log:minlevel:changed",appDbSave:"app:db:save",adviceLogEvent:"app:log:advice",adviceProfilerEvent:"app:profiler:advice",scannerReadEvent:"app:scanner:read",urls:{getEmployeesWithOpenOrders:"api/Offline/GetEmployeesWithOpenOrders",findOpenOrdersPayments:"api/Offline/FindOpenOrdersPayments"}}});
define('common/dateUtils',["knockout","moment","durandal/app","services/text"],function(e,a,t,n){function o(e){e?a.locale(e):a.locale(n.getLang())}function r(e){return a(new Date(e)).format(d.dateFormat)}function i(e){return a(new Date(e)).format(d.tateFormat)}function m(e){return a(new Date(e)).format(d.dateTimeFormat)}var d={dateFormat:"MM/DD/YY",timeFormat:"h:mm:ss A",dateTimeFormat:"MM/DD/YY h:mm:ss A"};o(n.getLang()),t.on("app:config:changed",function(e){e&&e.config&&e.config.dateTimeFormat?(d.dateFormat=e.config.dateFormat,d.timeFormat=e.config.timeFormat,d.dateTimeFormat=e.config.dateTimeFormat,o(e.config.language)):(d.dateFormat="MM/DD/YY",d.timeFormat="h:mm:ss A",d.dateTimeFormat="MM/DD/YY h:mm:ss A")});var g={formatDate:r,formatTime:i,formatDateTime:m,formats:d};return e.dateUtils=g,g});
define('common/numericUtils',["knockout","durandal/app"],function(e,r){function a(e,r){var a,t;-1!==r.indexOf(",")?(a=",",t=/\d\,*\d*/):-1!==r.indexOf(".")?(a=".",t=/\d\.*\d*/):t=/\d?/;var n=r.match(t)[0],o=r.replace(n,"{0}"),i=2;i=a?n.length-n.indexOf(a)-1:0,currencyFormat={currencyCode:e,symbol:r.replace(/[\(\)\-\d\.,\ ]/g,""),symbolPosition:!1,separator:a,thousandSeparator:"."===a?",":"",textFormat:r,template:o.replace(/[\(\)\-]/g,""),negativeTemplate:o,precision:i},d[currencyFormat.currencyCode]=currencyFormat}function t(e,r){"number"!=typeof e&&(e=Number(e)),"number"!=typeof r&&(r=Number(r));var a=e-r;return Math.abs(a)<.005?0:a>0?1:-1}function n(e,r){return r=r||u,e&&d[r]&&d[r].thousandSeparator?e.toString().replace(/\d(?=(\d{3})+(\.|\,|$))/g,"$&"+d[r].thousandSeparator):e}function o(r,a,o,i,c){a=a||u;var m=d[a],p=e.unwrap(r);if((""===p||null===p||isNaN(p))&&c){var l=15,f=Array(l+1).join(c);if(m)return o?f:m.template.replace("{0}",f);var s=a?" "+a:"";return o?f:f+s}(""===p||null===p||isNaN(p))&&(p=0);var g=Number(p);if(g=m?Number(p).toFixed(m.precision):Number(p).toFixed(currencyFormatDefaults.precision),o)return n(g);var F="";if(m)F=-1===t(g,0)?m.negativeTemplate.replace("{0}",n(Math.abs(g).toFixed(m.precision))):m.template.replace("{0}",n(Math.abs(g).toFixed(m.precision)));else{var s=a?" "+a:"";F=n(g)+s}return m&&m.precision&&","===m.separator&&(F=F.replace(".",",")),F}function i(e,r){return(""===e||null===e||isNaN(e))&&(e=0),r||(r=2),Number(e).toFixed(r)}function c(e){return e=""===e||null===e||void 0===e?0:e.toString().replace(/[^0-9\-\.]/g,""),Number(e)}currencyFormatDefaults={currencyCode:"USD",symbol:"$",symbolPosition:!1,precision:2,separator:".",thousandSeparator:",",textFormat:"$ -0.00"};var m="USD",u=m,d={" USD":currencyFormatDefaults},p=e.observable(d[u]);r.on("app:config:changed",function(e){var r=e&&e.config?e.config.currencyFormat:null;r&&r.currencyCode&&r.textFormat?(u=r.currencyCode,a(r.currencyCode,r.textFormat),p(d[u])):(u=m,a(currencyFormatDefaults.currencyCode,currencyFormatDefaults.textFormat),p(d[u]))}),e.formatCurrency=o;var l={formatCurrency:o,toFixed:i,toNumber:c,currencyFormat:p};return e.formatCurrency=o,e.numeric=l,l});
// from: https://github.com/rauschma/enums

(function(factory) {
    // Support three module loading scenarios
    if (typeof require === 'function' && typeof exports === 'object' && typeof module === 'object') {
        // [1] CommonJS/Node.js
        var target = module['exports'] || exports; // module.exports is for Node.js
        factory(target, require);
    } else if (typeof define === 'function' && define['amd']) {
        // [2] AMD anonymous module
        define('enums',['exports', 'require'], factory);
    } else {
        // [3] No module loader (plain <script> tag) - put directly in global namespace
        factory(window['enums'] = {});
    }
}
(function (exports) {
    function copyOwnFrom(target, source) {
        Object.getOwnPropertyNames(source).forEach(function (propName) {
            Object.defineProperty(target, propName,
                Object.getOwnPropertyDescriptor(source, propName));
        });
        return target;
    }

    function Symbol(name, props) {
        this.name = name;
        this.value = props;
        if (isObject(props)) {
            copyOwnFrom(this, props);
        }
        Object.freeze(this);
    }

    function isObject(val) {
        if (val === null) { return false; }
        return ((typeof val === 'function') || (typeof val === 'object'));
    }

    /** We don’t want the mutable Object.prototype in the prototype chain */
    Symbol.prototype = Object.create(null);
    Symbol.prototype.constructor = Symbol;
    /**
     * Without Object.prototype in the prototype chain, we need toString()
     * in order to display symbols.
     */
    Symbol.prototype.toString = function () {
        return "|" + this.name + "|";
    };

    //check against name or value:
    Symbol.prototype.equals = function (value) {
        return this.name === value || this.value === value;
    }

    Object.freeze(Symbol.prototype);

    Enum = function (obj) {
        if (arguments.length === 1 && obj !== null && typeof obj === "object") {
            Object.keys(obj).forEach(function (name) {
                this[name] = new Symbol(name, obj[name]);
            }, this);
        } else {
            Array.prototype.forEach.call(arguments, function (name) {
                this[name] = new Symbol(name);
            }, this);
        }
        Object.freeze(this);
    }
    Enum.prototype.symbols = function () {
        return Object.keys(this).map(
            function (key) {
                return this[key];
            }, this
        );
    }
    Enum.prototype.contains = function (sym) {
        if (!sym instanceof Symbol) return false;
        return this[sym.name] === sym;
    }
    exports.Enum = Enum;
    exports.Symbol = Symbol;
}));
// Explanation of this pattern: http://www.2ality.com/2011/08/universal-modules.html

;
define('common/paymentGatewayType',["enums"],function(e){var r=new e.Enum({Select_Payment_Gateway:0,Usa_ePAY:1,Pax:2});return r});
define('text',{load: function(id){throw new Error("Dynamic load not allowed: " + id);}});

define('text!components/date-filter/date-filter.html',[],function () { return '<div class="pull-right">\r\n    <div id="reportrange" class="pull-right" style="background: #fff; cursor: pointer; padding: 5px 10px; border: 1px solid #ccc; width: 100%">\r\n        <i class="glyphicon glyphicon-calendar fa fa-calendar"></i>\r\n        &nbsp;\r\n        <span></span> \r\n        <b class="caret"></b>\r\n    </div>\r\n</div>';});


define('text!components/multiSelector/multiSelector.html',[],function () { return '<div class="ms-parent" data-bind="style: { width : options.width }, click : onSelectorClick">\r\n    <button type="button" class="select" data-bind="enable: enabled, click: selectControlClick, validationElement: validationElement">\r\n    <div class="fl">\r\n        <div>\r\n            <!-- ko if: options.filter -->\r\n            <input class="filter-text" type="text" autocomplete="off" autocorrect="off" autocapitilize="off" spellcheck="false"\r\n                   data-bind="enable: enabled, attr : { id: options.filterId, dataid: options.dataid, placeholder:  options.filter_text}, \r\n                   textInput : selectorValueText " />\r\n            <!-- /ko -->\r\n            <!-- ko if: !options.filter -->\r\n            <span class="placeholder sph tl"  data-bind="attr:{ id: options.filterId, dataid: options.dataid, placeholder:  options.filter_text }\r\n                  text: selectorValueText"></span>\r\n            <!-- /ko -->\r\n        </div>\r\n        <div>\r\n            <div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    </button>\r\n    <input style="display:none" data-bind="value: validationElement">\r\n    <div class="ms-drop bottom" data-bind="css: msDropStyle(), style : { display : isOpen() ? \'block\' : \'none\'} ">\r\n    <ul data-bind="style:{ \'max-height\' :  options.maxHeight } " >\r\n        <!-- ko if: options.selectAll &&  !options.single && filteredData.length > 0 -->\r\n            <li>\r\n                <input type="checkbox" name="selectAllItem" data-bind="attr: { id: chackAllId }, checked: selectAll">\r\n                <label data-bind="attr: {for: chackAllId }, text: options.select_all_text"></label>\r\n            </li>\r\n        <!-- /ko -->\r\n\r\n        <!-- ko if: options.single -->\r\n        <!-- ko foreach: filteredData -->\r\n        <li data-bind="click: $parent.selectItem.bind($parent)">\r\n            <input type="radio" data-bind="checked: itemSelected, attr: { \r\n                   id: \'selectItem_\' + $parent.filterId + \'_\' + $data[ $parent.options.optionId],\r\n                   name: \'selectItem_\' + $parent.filterId + \'_\' + $data[ $parent.options.optionId], \r\n                   value: $data[ $parent.options.optionId] } \r\n                    ">\r\n            <label data-bind="attr: { for: $parent.filterId + \'_\' + $data[$parent.options.optionId] }">\r\n                <span data-bind="text: $data[ $parent.options.optionDisplayText]"></span>\r\n                <div class="ms-description" data-bind="text: $data.description, visible: $data.description"></div>\r\n            </label>\r\n            \r\n        </li>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n\r\n        <!-- ko if: !options.single -->\r\n        <!-- ko foreach: filteredData -->\r\n        <li>\r\n            <input type="checkbox" data-bind="checked: itemSelected, attr: {\r\n                   id: \'selectItem_\' + $parent.filterId + \'_\' + $data[ $parent.options.optionId],\r\n                   name: \'selectItem_\' + $parent.filterId + \'_\' + $data[ $parent.options.optionId],\r\n                   value: $data[ $parent.options.optionId] }\r\n                    ">\r\n            <label data-bind="attr: { for: $data[$parent.options.optionId] }, text: $data[$parent.options.optionDisplayText]"></label>\r\n        </li>\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n\r\n         <li class="ms-no-results" data-bind="visible : filteredData.length === 0,  text: options.no_matches_text"></li>\r\n        </ul>\r\n    </div>\r\n</div>';});


define('text!components/puertoRico-controlNumber/pr-controlNumber.html',[],function () { return '<div class="pr-controlNumber">\r\n    <div class="row form-group">\r\n        <div class="col-xs-12 col-md-12">\r\n            <label data-bind="local: \'apps/controlNumber.puertoRico-tax\'"></label>\r\n            <select class="" data-bind="options: taxTypes, optionsText: \'name\', optionsValue: \'id\', value: puertoRicoTaxType"></select>\r\n        </div>\r\n\r\n    </div>\r\n</div>';});


define('text!components/qb-accounts/qb-accounts.html',[],function () { return '<div class="qb-accounts">\r\n    <div class="row form-group">\r\n        <div class="col-xs-12 col-md-12" data-bind="local: \'quickbooks.QuickBooks Chart of Accounts\'">\r\n            QuickBooks Chart of Accounts:&nbsp;\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row form-group" data-bind="visible: canInherit">\r\n        <div class="col-xs-4 col-md-4 ">\r\n            <input type="checkbox" id="qbInheritAccounts" data-bind="checked: isInheritAccounts">\r\n            <label for="qbInheritAccounts" data-bind="local: inheritText"></label>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="row form-group">\r\n        <div class="col-xs-4 col-md-4">\r\n            <label data-bind="local: \'quickbooks.asset_account\'"></label>\r\n            <select class="" data-bind="options: assetAccounts, optionsText: \'name\', optionsValue: \'id\', value: assetAccountId, enable: !isInheritAccounts()"></select>\r\n            <span class="validationMessage" data-bind="validationMessage: assetAccountId"></span>\r\n        </div>\r\n\r\n        <div class="col-xs-4 col-md-4">\r\n            <label data-bind="local: \'quickbooks.income_account\'"></label>\r\n            <select class="" data-bind="options: incomeAccounts, optionsText: \'name\', optionsValue: \'id\', value: incomeAccountId, enable: !isInheritAccounts()"></select>\r\n            <span class="validationMessage" data-bind="validationMessage: incomeAccountId"></span>\r\n        </div>\r\n\r\n        <div class="col-xs-4 col-md-4">\r\n            <label data-bind="local: \'quickbooks.expense_account\'"></label>\r\n            <select class="" data-bind="options: expenseAccounts, optionsText: \'name\', optionsValue: \'id\', value: expenseAccountId, enable: !isInheritAccounts()"></select>\r\n            <span class="validationMessage" data-bind="validationMessage: expenseAccountId"></span>\r\n        </div>\r\n\r\n    </div>\r\n</div>';});

define('data/baseCommon',[],function(){function e(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.superclass=t.prototype}return{extend:e}});
define('controls/confirm',['jquery', 'knockout'], function ($, ko) {

    var defaults = {
        title: ko.T('common.areYouSure'),
        message: '',
        confirm: null,
        buttonOk : null
    };

    var Confirm = function (options) {
        var self = this;

        self.options = $.extend({}, defaults, options);

        self.mainContainer = null;
        self.cancelButton = null;
        self.confirmButton = null;

        createMarkup();
        initializeModal();

        self.show = function() {
            self.mainContainer.modal('show');
        };

        self.close = function() {
            self.mainContainer.modal('hide');
        };

        self.destroy = function() {
            self.mainContainer.remove();
        };

        self.confirmButton.click(function() {
            self.close();
            reset();

            if (self.options.confirm != null) {
                self.options.confirm();
            }
        });
        if (self.cancelButton != null) {
            self.cancelButton.click(function () {
                self.close();
                reset();

                if (self.options.reject != null) {
                    self.options.reject();
                }
            });
        }

        function reset() {
            self.destroy();
            $('.modal-backdrop').remove();
        }

        function createMarkup() {
            self.mainContainer = $('<div>')
                .addClass("modal fade")
                .attr({
                    id: "confirmMessage",
                    tabindex: "-1",
                    role: "dialog",
                    'aria-labelledby': "myModalLabel",
                    'aria-hidden': true
                });
            var $dialogContainer = $('<div>').addClass('modal-dialog');
            var $contentContainer = $('<div>').addClass('modal-content');

            var $headerContent = $('<div>').addClass('modal-header');
            var $closeButton = $('<button>')
                .addClass('close')
                .attr({
                    type: "button",
                    'data-dismiss': "modal"
                })
                .append($('<span aria-hidden="true">&times;</span>'))
                .append($('<span>').addClass('sr-only').text(ko.T('common.close')));

            var titleText = self.options.title != null ? self.options.title : ko.T('common.areYouSure');
            var $titleText = $('<h4>').addClass('modal-title').text(titleText);

            var $bodyContent = $('<div>').addClass('modal-body').html(self.options.message);

            var $footerContent = $('<div>').addClass('modal-footer');
            if (self.options.buttonOk == null) {
                self.cancelButton = $('<button>').addClass('btn btn-default').attr({ 'data-dismiss': "modal", type: "button" }).text(ko.T('common.cancel'));
                self.confirmButton = $('<button>').addClass('btn btn-primary').attr({ type: "button" }).text(ko.T('common.confirm'));
            }
            else {
                self.confirmButton = $('<button>').addClass('btn btn-primary').attr({ type: "button" }).text(ko.T('common.ok'));
            }

            $headerContent.append($closeButton).append($titleText);
            $footerContent.append(self.cancelButton).append(self.confirmButton);
            $contentContainer.append($headerContent).append($bodyContent).append($footerContent);
            $dialogContainer.append($contentContainer);
            self.mainContainer.append($dialogContainer);

            $('body').append(self.mainContainer);
        }

        function initializeModal() {
            self.mainContainer.modal();
        }

        return self;
    };


    return {
        createConfirm: function(title, message, onConfirmCallback, buttonOk, rejectCallback) {
            return new Confirm({ title: title, message: message, confirm: onConfirmCallback, reject: rejectCallback, buttonOk: buttonOk });
        }
    };
});
define('controls/alert',[],function () {
    var defaults = {
        messageContainerSelector: 'body',
        title: 'Well done!',
        message: '',
        success: true,
        delay: 0
    };

    var Alert = function(options) {
        var self = this;

        self.options = $.extend({}, defaults, options);

        self.mainContainer = null;
        self.closeButton = null;

        createMarkup();
        if (self.options.delay != null && self.options.delay != 0) {
            autoCloseAlert();
        }

        function createMarkup() {
            self.mainContainer = $('<div>')
                .addClass("alert alert-dismissible fade in")
                .attr({
                    role: "alert"
                });
            if (self.options.success == true) {
                self.mainContainer.addClass('alert-success');
            } else {
                self.mainContainer.addClass('alert-danger');
            }


            self.closeButton = $('<button>')
                .addClass('close')
                .attr({ 'data-dismiss': "alert" })
                .append($('<span aria-hidden="true">&times;</span>'))
                .append($('<span>').addClass('sr-only').text('Close'));

            var $title = $('<strong>').text(self.options.title);

            self.mainContainer.append(self.closeButton).append($title).append(' ' + self.options.message);
            $(self.options.messageContainerSelector).append(self.mainContainer);
        }

        function autoCloseAlert() {
            return setTimeout(function() {
                self.closeButton.click();
            }, self.options.delay);
        }
    };

    return {
        createSuccessMessage: function (title, message, messageContainerSelector, delay) {
            return new Alert({ messageContainerSelector: messageContainerSelector, title: title, message: message, success: true, delay: delay != null ? delay : 7000 });
        },
        createErrorMessage: function (title, message, messageContainerSelector, delay) {
            return new Alert({ messageContainerSelector: messageContainerSelector, title: title, message: message, success: false, delay: delay != null ? delay: 7000 });
        },
    };
});
define('data/common',["knockout","moment","controls/confirm","controls/alert","common/dateUtils","services/text"],function(e,t,n,o,a,r){function i(e){$(e).hide();var t=$("<div>").attr("id",g).addClass("loader-container");t.height($(window).height()-50),t.insertAfter($(e))}function s(e){$("#"+g).remove(),$(e).show()}function c(t,n,a){return o.createSuccessMessage(e.T("common.success"),t,n,a)}function u(t,n,a){return o.createErrorMessage(e.T("common.error"),t,n,a)}function l(e,t,o,a){return n.createConfirm(e,t,o,null,a)}function p(t){return n.createConfirm(e.T("common.warning"),t,null,e.T("common.ok"))}function d(e){h||(h={}),h[e]={months:t.months(),dayOfWeek:t.weekdaysShort()}}function m(e,n){h&&h[r.getLang()]||d(r.getLang()),localeData=t.localeData();var o={i18n:h,lang:r.getLang(),format:a.formats.dateTimeFormat,formatTime:a.formats.timeFormat,formatDate:a.formats.dateFormat,dayOfWeekStart:localeData.firstDayOfWeek(),timepicker:!1,closeOnDateSelect:!0},i=$.extend({},o,n);e.each(function(){var e=$(this);e.datetimepicker(i)})}function f(e){e.datetimepicker("hide")}function b(e){var t=new Date,n=new Date;switch(t.setHours(0,0,0,0),n.setHours(23,59,59,999),e){case"Today":break;case"Yesterday":t.setDate(t.getDate()-1),n.setDate(n.getDate()-1);break;case"This week":t.setDate(t.getDate()-t.getDay());break;case"Month-to-Date":t=new Date(t.getFullYear(),t.getMonth(),1,0,0,0);break;case"Year-to-Date":t=new Date(t.getFullYear(),0,1,0,0,0);break;case"All":t=void 0,n=void 0}return{startDate:t,endDate:n}}var g="loaderContainer",h=null;return{showLoader:i,showRightPanelContent:s,showConfirmation:l,showMessage:c,showError:u,addDatePicker:m,showWarning:p,hideDataPicker:f,getPeriodDates:b}});
define('data/viewsBroker',["plugins/router","durandal/app","durandal/system"],function(e,t,n){var o=function(){function o(t){if(t.returnViewModel){var o=n.acquire(t.returnViewModel);o.done(function(n){n.isNavigatingBack&&n.isNavigatingBack(!0),t.returnTo&&e.navigate(t.returnTo)})}else t.returnTo&&e.navigate(t.returnTo)}t.on("nav:app:return").then(o)};return new o});

define('text!lang/en.html',[],function () { return '{\r\n\t"meta": {\r\n\t\t"language": "English",\r\n\t\t"code": "en"\r\n\t},\r\n\t"messages": {\r\n\t\t"Bad Request": "Bad request",\r\n\t\t"Entity of type \'{0}\' not found by id \'{1}\'": "Entity of type \'{0}\' not found by id \'{1}\'.",\r\n\t\t"User \'{0}\' not found": "User \'{0}\' not found.",\r\n\t\t"User not found": "User not found",\r\n\t\t"Employee not found": "Employee not found",\r\n\t\t"Transaction not found": "Transaction not found",\r\n\t\t"Employee \'employeeId={0}\' not found": "Employee \'employeeId={0}\' not found.",\r\n\t\t"Transaction \'transactionId={0}\' not found": "Transaction \'transactionId={0}\' not found.",\r\n\t\t"mustFreedomPlan": "You must be a <b>Freedom Plan</b> customer to use this feature.",\r\n\t\t"pleaseContactUs": "Please contact us to upgrade."\r\n\t},\r\n\t"datatable": {\r\n\t\t"EmptyTable": "No data available in table",\r\n\t\t"Info": "Showing _START_ to _END_ of _TOTAL_ entries",\r\n\t\t"InfoEmpty": "Showing 0 to 0 of 0 entries",\r\n\t\t"InfoFiltered": "(filtered from _MAX_ total entries)",\r\n\t\t"InfoPostFix": "",\r\n\t\t"InfoThousands": ",",\r\n\t\t"LengthMenu": "Show _MENU_ entries",\r\n\t\t"LoadingRecords": "Loading...",\r\n\t\t"Processing": "Processing...",\r\n\t\t"Search": "Search:",\r\n\t\t"ZeroRecords": "No matching records found",\r\n\t\t"Paginate_First": "First",\r\n\t\t"Paginate_Last": "Last",\r\n\t\t"Paginate_Next": "Next",\r\n\t\t"Paginate_Previous": "Previous",\r\n\t\t"Aria_SortAscending": ": Activate to sort by ascending columns",\r\n\t\t"Aria_SortDescending": ": Activate to sort by descending columns"\r\n\t},\r\n\t"import": {\r\n\t\t"Invalid file type": "Invalid file type",\r\n\t\t"File is too big message": "File is too large. Max size is {0} MB. Please split the file intto smaller files and upload them individually."\r\n\t},\r\n\t"header": {},\r\n\t"login": {\r\n\t\t"back_office": "Back Office",\r\n\t\t"you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked": "You have exceeded the maximum number of login attempts. Back Office is now locked. Please contact us to unlock Back Office.",\r\n\t\t"invalid_login_or_password": "Invalid login or password",\r\n\t\t"invalid_pin": "Invalid PIN",\r\n\t\t"you_are_not_authorized_to_login": "You are not authorized to login.",\r\n\t\t"version_": "Version: ",\r\n\t\t"termsAndConditionsTitle": "Terms and Conditions",\r\n\t\t"termsAndConditionsButton": "Submit",\r\n\t\t"termsAndConditionsAgree": " I agree with the Terms and Conditions"\r\n\t},\r\n\r\n\t"account": {\r\n\t\t"back_office": "Back Office",\r\n\t\t"account_id": "Enter Account ID",\r\n\t\t"continue": "Continue",\r\n\t\t"account_is_required": "Account ID is required.",\r\n\t\t"account_is_invalid": "The account is invalid.",\r\n\t\t"email": "Email",\r\n\t\t"password": "Password",\r\n\t\t"forgot-password": "Forgot password? Click {0}",\r\n\t\t"not_registered": "Not registered? Click {0} to create an account for free.",\r\n\t\t"unblock_account": "To unblock Back Office, click {0}.",\r\n\t\t"set_password": "Did not set up your password? Click {0}",\r\n\t\t"here": "here",\r\n\t\t"signup": "signup",\r\n\t\t"should_be_equal_to_password": "Passwords do not match.",\r\n\t\t"invalid_password": "Invalid Password. Password should be 9-15 characters in length, have at least 1 lowercase letter, 1 uppercase letter, 1 digit and 1 special character.",\r\n\t\t"duplicate_email": "Such email already set for another user please specify another email",\r\n\t\t"duplicate_email_use_set_password_flow": "Such email is already set for another user please use set password flow",\r\n        "many_emails_set_password_flow": "Such email is set for more than one user please use set password flow",\r\n\t\t"invalid_request_data": "Specified data is invalid",\r\n\t\t"user_not_found": "Specified user not found"\r\n\t},\r\n\r\n\t"resetPassword": {\r\n\t\t"title": "Reset password",\r\n\t\t"title-unblock": "Unblock account",\r\n\t\t"enterEmail": "Enter email",\r\n\t\t"wrongEmail": "Email address not found in the database. Please input another one and try again.",\r\n\t\t"emailRequired": "Please enter your email address.",\r\n\t\t"emailAlreadyUsed": "This email address is already in use by another user. Please use <a href=\'#pin-login\'>set&nbsp;password</a>&nbsp;flow",\r\n\t\t"reset": "Reset",\r\n\t\t"unblock": "Unblock",\r\n\t\t"continue": "Continue",\r\n\t\t"emailSent": "Check your email to reset your&nbsp;password",\r\n\t\t"unexpectedError": "An unexpected error occured. Please try again later.",\r\n\t\t"unblock_check_email": "Please check your email to unblock account",\r\n\t\t"unblock_failed": "Attempt to unblock account failed",\r\n\t\t"unblock_success": "Account successfully unblocked"\r\n\t},\r\n\r\n\t"setPassword": {\r\n\t\t"title": "Set up password",\r\n\t\t"createPassword": "Create new password",\r\n\t\t"confirmPassword": "Confirm new password",\r\n\t\t"submit": "Submit"\r\n\t},\r\n\r\n\t"navigationpanel": {},\r\n\r\n  "appsettings": {\r\n    "category": "App Category",\r\n    "category_name": "App Category Name",\r\n    "select_category": "Select App Category",\r\n    "done": "Done",\r\n    "cancel": "Cancel"\r\n  },\r\n\r\n  "apps": {\r\n        "installedApps": "Installed Apps",\r\n        "apps": "Apps",\r\n        "recommendedForYou": "Recommended For You",\r\n        "freedomPackage": "Freedom Package",\r\n        "freedomPlanOnly": "Freedom Plan only",\r\n        "freeTrial": "Free trial available",\r\n        "eHopper": "by eHopper",\r\n        "install": "Install",\r\n        "uninstall": "Uninstall",\r\n        "installed_apps": "Installed apps",\r\n        "upgrade": "Upgrade",\r\n        "disconnect": "Disconnect"\r\n    },\r\n    "apps/marketingAndLoyalty": {\r\n        "name": "Marketing & Loyalty",\r\n        "company": "by Marketing Box",\r\n        "packageName": "From $29/month",\r\n        "useTheLoyalty": "The Marketing & Loyalty app helps establish unique, interactive communications with customers. You can create a mobile club and built an opt-in database of customers for marketing promotions via text message.",\r\n        "features": "Features",\r\n        "listItem1": "FREE unlimited opt-ins, check-ins and coupon redemptions",\r\n        "listItem2": "Ability to send text messages about specials and promotions to customers",\r\n        "listItem3": "Provide links to mobile websites or custom app downloads",\r\n        "listItem4": "Send Facebook like requests directly from your kiosk",\r\n        "listItem5": "Send digital loyalty coupon orders that can be easily tracked",\r\n        "listItem6": "Access to mobile marketing software w/ additional features",\r\n        "listItem7": "Complete management and reporting tools using web-based software",\r\n        "listItem8": "Eliminate punch cards, which are often lost, misplaced or forgotten",\r\n        "marketingPackageStarter": "To Start $29/month",\r\n        "marketingPackageGrow": "To Grow $49/month"\r\n    },\r\n    "apps/clickInClockOut": {\r\n        "name": "Clock In/Clock Out",\r\n        "listItem1": "This app is available for Freedom Plan users only.",\r\n        "listItem2": "This app will allow your employees to clock in and out, as well as enable managers to monitor their work shifts in Back Office. Employees can clock in and out on the register to record the start and end times of their shift.",\r\n        "listItem3": "When an employee is clocked in and using eHopper, their information and activity is automatically synced with Back Office."\r\n    },\r\n    "apps/controlNumber": {\r\n        "name": "Control # for Puerto Rico",\r\n        "theControlNumberApp": "The Control Number app is for designed for Point of Sale (POS) and Electronic Cash Register (ECR) vendors, manufacturers, distributors and/or businesses that seek a seamless method of becoming compliant with Puerto Rico tax laws and regulations.",\r\n        "toBeginIntegration": "To integrate with your Puerto Rico Control Number:",\r\n        "setupYourStoreLocation": "Set your store location(s):",\r\n        "setPuertoRico": "Set Puerto Rico as the Store Country in Store Settings.",\r\n        "setupYourCityAndStateTaxes": "Set your city and state taxes:",\r\n        "youMustSetupTwoTaxes": "You must set two taxes for the store(s). The first tax should have the tax code \\"STATE_TAX\\" and the second tax should have the tax code \\"CITY_TAX\\".",\r\n        "note": "Note:",\r\n        "youCannotSetup": "You cannot setup more than two taxes for a store in Puerto Rico, otherwise you will not receive a control number for placed orders.",\r\n        "setupYourPRFiscalService": "Set your PR Fiscal Service access token:",\r\n        "assignTheToken": "Assign the token to a register in Register Settings.",\r\n        "toGetAdditionalTokens": "To receive additional tokens, contact bcfiscal@bcposgroup.com for more information.",\r\n        "CityTax": "City Tax",\r\n        "StateTax": "State Tax",\r\n        "puertoRico-tax": "Puerto Rico Tax"\r\n    },\r\n    "apps/orderReceiving": {\r\n        "name": "Purchase Order Receiving",\r\n        "intro": "With the Purchase Order Receiving app, you can easily order and receive products from a vendor.",\r\n        "toProcess": "To process Purchase Order Receiving:",\r\n        "toDo1": "Select Vendor",\r\n        "toDo2": "Select Store Receiver",\r\n        "toDo3": "Define the products and quantities you require",\r\n        "logInfo": "The log of your processed orders are available in the Purchase Order Receiving Report."\r\n},\r\n    "apps/storeTransfer": {\r\n        "name": "Store Transfer",\r\n        "intro": "With the Store Transfer app, you can easily move products from the inventory of one store to another.",\r\n        "toProcess": "To process a transfer:",\r\n        "toDo1": "Select Store Sender",\r\n        "toDo2": "Select Store Receiver",\r\n        "toDo3": "Define the products and quantities you wish to transfer.",\r\n        "logInfo": "The log of your transfers will be available in the Store Transfers Report."\r\n    },\r\n    "apps/creditDebitCard": {\r\n        "name": "Credit/Debit POS Integration",\r\n        "acceptAnyType": "Allows you to have a centralized point of sale, service and communication hub that provides more efficient operations, simplier and speedier transactions, and keeps all data stored and easily accessed.",\r\n        "keyBenefits": "Key benefits include:",\r\n        "listItem1": "Use eHopper Partner Merchant Services, or your own merchant services",\r\n        "listItem2": "Fully integrated with eHopper POS",\r\n        "listItem3": "Accept any type of payment at any store register",\r\n        "listItem4": "Supports EMV chip, magstripe and NFC",\r\n        "listItem5": "Simplifies transactions and speeds up checkout times for better customer service",\r\n        "listItem6": "More business and satisfied customers."\r\n    },\r\n    "apps/updateOrderOnAnyRegister": {\r\n        "name": "Multi-Register",\r\n        "withTheMulti": "With the Multi Register app, employees can update orders from any register in your store.",\r\n        "specifically": "You can perform the following on any register:",\r\n        "list1Item1": "Pay Order",\r\n        "list1Item2": "Update Order",\r\n        "list1Item3": "Save Order",\r\n        "list1Item4": "Refund Order",\r\n        "list1Item5": "Void Order",\r\n        "list1Item6": "Update Fulfillment Status",\r\n        "list1Item7": "Add Tips",\r\n        "list1Item8": "View Order Content/Status",\r\n        "andWhenStore": "When using this app, the following actions will be restricted:",\r\n        "list2Item1": "Paying for save orders",\r\n        "list2Item2": "Updating orders",\r\n        "list2Item3": "Refunding orders",\r\n        "list2Item4": "Voiding orders",\r\n        "list2Item5": "Updating order fulfillment",\r\n        "list2Item6": "Bill/Reciept reprinting for orders",\r\n        "installAndUninstall": "Notes",\r\n        "note1": "Register must be in online mode.",\r\n        "note2": "Do NOT synchronize any registers before or during installation.",\r\n        "note3": "Do not access any order functions until all registered have been synchronized."\r\n    },\r\n\r\n\t"apps/variants": {\r\n\t\t"name": "Inventory Matrix",\r\n\t\t"description": "Use Inventory Matrix to create products that have multiple attributes. For example, a shirt could be defined by style, color or size. Each combination of attributes is unique, has its own SKU, and can have its own price.",\r\n\t\t"feature1": "Helps organize large inventories and streamline stock management",\r\n\t\t"feature2": "Variants can be set by managers and Back Office operators quickly",\r\n\t\t"feature3": "Track sales via report"\r\n\t},\r\n\r\n\t"apps/productTax": {\r\n\t\t"name": "Product Tax Assignment",\r\n\t\t"description": "With the Product Tax Assignment app, you can set and monitor individual taxes that are applied to specific items in your inventory. This will override the default tax rate that is set for your business. This app makes it much easier to process transactions with items that require a different tax rate without having to change any default tax settings in Back Office.",\r\n\t\t"feature1": "Set individual tax rates for any item in your inventory",\r\n\t\t"feature2": "Gives you more flexibility and ease when selling items that require different tax rates",\r\n\t\t"feature3": "Easily set and monitor via Back Office"\r\n\t},\r\n\r\n\t"apps/quickbooks": {\r\n\t\t"name": "QuickBooks",\r\n\t\t"description": "Keep eHopper POS and QuickBooks Online in sync. Automatically import your sales transactions, expenses, inventory, taxes and more.",\r\n\t\t"features": "Features",\r\n\t\t"feature1": "Import sales transactions, including taxes",\r\n\t\t"feature2": "Import expenses such as payins/payouts, refunds and more",\r\n\t\t"feature3": "Synchronization of your account charts",\r\n\t\t"feature4": "Multiple locations capability",\r\n\t\t"note1": "IMPORTANT: QuickBooks integration is currently available only with a single tax line. Ability to add multiple tax lines coming soon."\r\n\t},\r\n\r\n\t"apps/orderFulfilment": {\r\n\t\t"name": "Order Management",\r\n\t\t"description": "Order Management allows you to organize, edit and oversee all order activity within your business. With this feature, you’ll be able to monitor each and every order from creation to completion.",\r\n\t\t"feature1": "Manage order status: \'New,\' \'In Preparation,\' \'In Fulfillment,\' or \'Fulfilled\'",\r\n\t\t"feature2": "Search for specific orders instantly for referencing and checking customer history",\r\n\t\t"feature3": "Track other information, such as tips given and tender used, and use referral numbers for easier look-up"\r\n\t},\r\n\r\n    "apps/menuBuilder": {\r\n        "name": "Menu Builder",\r\n        "inventory_btn": "Menu Builder",\r\n        "description": "Build menu with categories and items.",\r\n        "drop_to_remove": "Drop items here to remove",\r\n        "drop_item_here": "Drop Item Here",\r\n        "btn_save": "Save",\r\n        "btn_cancel": "Close",\r\n        "sortNone": "None",\r\n        "sortName": "Name: A-Z",\r\n        "sortNameDesc": "Name: Z-A",\r\n        "sortPrice": "Price: Low to High",\r\n        "sortPriceDesc": "Price: High to Low",\r\n        "sortCreationDate": "Newest first",\r\n        "sortCreationDateDesc": "Latest first",\r\n        "other": "Other",\r\n        "labelArrange": "items in this category will be arranged automatically by ",\r\n        "unexpectedError": "Sorry, something went wrong. Please try again later."\r\n    },\r\n    "apps/ebtCart": {\r\n        "name": "EBT Card",\r\n        "description": "Allows you to use EBT Card payment.",\r\n        "note" : "NOTE: You can\'t use tips when EBT Card application is turned on."\r\n\r\n    },\r\n  "shell": {\r\n    "apps": "Apps",\r\n    "appDirectory": "App Directory",\r\n    "account": "Select Account",\r\n    "login": "Login",\r\n    "dashboard": "Dashboard",\r\n    "orders": "Orders",\r\n    "order_details": "Order Details",\r\n    "inventory": "Inventory",\r\n    "products": "Products",\r\n    "product": "Product",\r\n    "import_inventory": "Import Inventory",\r\n    "departments": "Departments",\r\n    "department": "Department",\r\n    "categories": "Categories",\r\n    "category": "Category",\r\n    "appdepartments": "App Departments",\r\n    "appdepartment": "App Department",\r\n    "appcategories": "App Categories",\r\n    "appcategory": "App Category",\r\n    "modifiers": "Global Modifiers",\r\n    "modifier": "Modifier",\r\n    "storeTransfer": "Store Transfer",\r\n    "poReceiving": "PO Receiving",\r\n    "adjustment": "Inventory Adjustment",\r\n    "customers": "Customers",\r\n    "import_customers": "Import Customers",\r\n    "vendor_list": "Vendor List",\r\n    "manage_vendor": "Manage Vendor",\r\n    "vendors": "Vendors",\r\n    "employees": "Employees",\r\n    "employee_list": "Employee List",\r\n    "manage_employee": "Manage Employee",\r\n    "reporting": "Reporting",\r\n    "tips_report": "Tips Report",\r\n    "z_report": "Z Report",\r\n    "z_report_details": "Z Report Details",\r\n    "settings": "Settings",\r\n    "store_settings": "Store Settings",\r\n    "enterprise_settings": "Company Settings",\r\n    "register_settings": "Register Settings",\r\n    "manage_register_settings": "Manage Register Settings",\r\n    "new_register": "New Register",\r\n    "tender_settings": "Tender Settings",\r\n    "tax_manager": "Tax Manager",\r\n    "manage_taxes": "New/Edit Tax",\r\n    "help": "Help",\r\n    "logout": "Logout",\r\n    "product_mix_report": "Product Mix Report",\r\n    "taxReport": "Tax Report",\r\n    "transactionsReport": "Transactions Report",\r\n    "agingReport": "Inventory Aging",\r\n    "serialItemTracking": "Serial Item Tracking Report",\r\n    "storeTransfersReport": "Store Transfers Report",\r\n    "storeTransfersDetails": "Store Transfer Details",\r\n    "poReceivingReport": "PO Receiving Report",\r\n    "poReceivingDetails": "PO Receiving Details",\r\n    "adjustmentReport": "Adjustment Report",\r\n    "adjustmentDetails": "Adjusment Details",\r\n    "exportReport": "Export",\r\n    "quickbooks": "QuickBooks Online",\r\n    "quickbooks-disconnect": "Disconnect from QuickBooks Online",\r\n    "menuBuilder": "Menu Builder",\r\n    "clockIn" : "Time Clock",\r\n    "unsupportedBrowser": "Unsupported browser.",\r\n    "taxAgenciesList": "Tax Agencies",\r\n    "manage_taxAgencies": "Manage Tax Agency",\r\n    "community": "Community",\r\n    "supportAccess": "eHopper Support Access"\r\n  },\r\n  "unsupported": {\r\n    "browser": "Your web browser is not supported.",\r\n    "latestVersion": "Please use the latest version of Google Chrome for Windows 7-10 or Android 4.4.2+",\r\n    "yourVersion": "You are currently using {0}&nbsp;{1} on {2}&nbsp;{3}.",\r\n    "qb_latestVersion": "To access all features please use the latest version of Google Chrome for Windows 7-10 or Android 4.4.2+.",\r\n    "qb_yourVersion": "You are currently using {0}&nbsp;{1} on {2}&nbsp;{3} which allows you to manage QuickBooks app."\r\n  },\r\n\r\n  "categories/categoriesList": {\r\n    "new_category": "New Category",\r\n    "toggle_dropdown": "Toggle Dropdown",\r\n    "new_department": "New Department",\r\n    "new_item": "New Item",\r\n    "new_modifier": "New Global Modifier",\r\n    "category_name": "Category Name",\r\n    "department_name": "Department Name",\r\n    "status": "Status",\r\n    "search_for_category": "Search For Category",\r\n    "are_you_sure_you_want_to_delete_selected_category": "Are you sure you want to delete the selected Category?",\r\n    "are_you_sure_you_want_to_delete_selected_categories": "Are you sure you want to delete the selected Categories?",\r\n    "the_category_has_products_assigned_please_delete_those_products_first": "The Category \'{0}\' has products assigned. Please delete those products first.",\r\n    "the_category_": "The Category ",\r\n    "active": "Active",\r\n    "inactive": "Inactive"\r\n  },\r\n  "appcategories/categoriesList": {\r\n    "new_category": "New App Category",\r\n    "toggle_dropdown": "Toggle Dropdown",\r\n    "new_department": "New App Department",\r\n    "category_name": "App Category Name",\r\n    "department_name": "App Department Name",\r\n    "status": "Status",\r\n    "search_for_category": "Search For App Category",\r\n    "are_you_sure_you_want_to_delete_selected_category": "Are you sure you want to delete the selected App Category?",\r\n    "are_you_sure_you_want_to_delete_selected_categories": "Are you sure you want to delete the selected App Categories?",\r\n    "the_category_has_apps_assigned_please_delete_those_apps_first": "The Category \'{0}\' has applications assigned. Please delete those apps first.",\r\n    "the_category_": "The App Category ",\r\n    "active": "Active",\r\n    "inactive": "Inactive"\r\n  },\r\n  "categories/categoryManage": {\r\n    "category_name": "Category Name",\r\n    "category_short_name": "Category Short Name",\r\n    "category_description": "Category Description",\r\n    "department": "Department",\r\n    "select_department": "Select Department...",\r\n    "is_active": "Is Active",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "input_name": "Input Name",\r\n    "input_short_name": "Input Short Name",\r\n    "input_description": "Input Description",\r\n    "new_category": "New Category",\r\n    "edit_category": "Edit Category",\r\n    "category_name_must_be_unique": "Category name must be unique.",\r\n    "the_category_has_products_assigned_please_delete_those_products_first": "The Category has Products assigned. Please delete those Products first.",\r\n\t"general": "General",\r\n\t"localization": "Localization",\r\n    "select_color": "Select Color",\r\n    "color": "Category Display Color"\r\n  },\r\n  "appcategories/categoryManage": {\r\n    "category_name": "App Category Name",\r\n    "category_short_name": "App Category Short Name",\r\n    "category_description": "App Category Description",\r\n    "department": "App Department",\r\n    "select_department": "Select App Department...",\r\n    "is_active": "Is Active",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "input_name": "Input Name",\r\n    "input_short_name": "Input Short Name",\r\n    "input_description": "Input Description",\r\n    "new_category": "New App Category",\r\n    "edit_category": "Edit App Category",\r\n    "category_name_must_be_unique": "App Category name must be unique.",\r\n\t"general": "General",\r\n\t"localization": "Localization",\r\n    "select_color": "Select Color",\r\n    "color": "App Category Display Color"\r\n  },\r\n  "categories/categoryManageNew": {\r\n    "category_name": "Category Name",\r\n    "category_description": "Category Description",\r\n    "department": "Department1",\r\n    "is_active": "Is Active",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "input_name": "Input Name",\r\n    "new_category": "New Category",\r\n    "category_name_must_be_unique": "Category name must be unique."\r\n  },\r\n  "customers/importCustomers": {\r\n    "file_to_import": "File to import",\r\n    "browse_csv_file": "Browse *.csv file",\r\n    "browse": "Browse",\r\n    "uploading": "Uploading",\r\n    "importing": "Importing",\r\n    "done": "DONE",\r\n    "cancel": "Cancel",\r\n    "file_is_too_big_max_size_is_{0}_mb_please_split_it_to_smaller_files_and_update_them_individually": "File is too large. Max size is {0} Mb. Please split it to smaller files and upload them individually.",\r\n    "file_is_too_big_max_size_is_mb_please_split_it_to_smaller_files_and_update_them_individually": "File is too large. Max size is {0} Mb. Please split it to smaller files and upload them individually.",\r\n    "the_error_was_detected_in_line_while_import_no_customers_were_imported_please_fix_problem_and_repeat_import": "An error was detected in line {0} during import. No customers were imported. Please correct then restart the import. {1}",\r\n    "error_importing_": "Error Importing ",\r\n    "processing": "Processing...",\r\n    "abort": "Abort",\r\n    "file_upload_failed_": "File upload failed. ",\r\n    "imported_lines": " Imported {0} lines.",\r\n    "error_in_file_format_error_line_message_": " Error in file format. Error in line #: {0}; Message: {1}.",\r\n    "Number of columns in line {0} is less then expected": "Number of columns in line {0} is less then expected. Expected amount of columns is: {1}.",\r\n    "Number of columns in line {0} is more then expected": "Number of columns in line {0} is more then expected. Expected amount of columns is: {1}.",\r\n    "Invalid format of \'CustomerId\'": "Invalid format of \'CustomerId\'",\r\n    "Field \'{0}\' is required": "Field \'{0}\' is required",\r\n    "Field \'{0}\' has length greater than {1}": "Field \'{0}\' has length greater than {1}.",\r\n    "Phone format \'{0}\' is invalid": "Phone format \'{0}\' is invalid.",\r\n    "Email format \'{0}\' is invalid": "Email format \'{0}\' is invalid.",\r\n    "Zip format \'{0}\' is invalid": "Zip format \'{0}\' is invalid.",\r\n    "Zip should be less than 11 symbols": "Zip should be less than 11 symbols: \'{0}\'.",\r\n    "State format \'{0}\' is invalid": "State format \'{0}\' is invalid.",\r\n    "Invalid country code: \'{0}\'": "Invalid country code: \'{0}\'",\r\n    "Unexpected Import Error": "Unexpected Import Error.",\r\n    "Unexpected Import Error2": "Unexpected Import Error: {0}",\r\n    "Import was completed successfully": "Import was completed successfully.",\r\n    "Customers import is already running": "Customer import has already begun.",\r\n    "invalidStoreName": "Store name doesn\'t exist  in line {0}."\r\n  },\r\n  "dashboard/dashboard": {\r\n    "today": "Today",\r\n    "yesterday": "Yesterday",\r\n    "this_week": "This Week",\r\n    "month-to-date": "Month-to-Date",\r\n    "version_": "Version: ",\r\n    "noteMessageNotFound": "(note mesage not found)"\r\n  },\r\n  "dashboard/widgets/goLive": {\r\n    "go_live_date_is_in_x_days": "Go live date is in {0} days - {1}"\r\n  },\r\n  "dashboard/widgets/salesTransactions": {\r\n    "total_sales_by_category": "Gross Sales By Category",\r\n    "statistic": "Statistic",\r\n    "no_data_available_for_selected_period": "No data available for selected period",\r\n    "total_sales": "Gross Sales"\r\n  },\r\n  "dashboard/widgets/stats": {\r\n    "new_customers": "New Customers",\r\n    "repeat_customers": "Repeat Customers",\r\n    "total_sales": "Gross Sales",\r\n    "total_transactions": "Total Transactions",\r\n    "refunds": "Refunds"\r\n  },\r\n  "dashboard/widgets/support": {\r\n    "support_team": "Support",\r\n    "email_me": "Email me",\r\n    "the_subject_of_the_mail": "The subject of the mail",\r\n    "hide": "Hide",\r\n    "show": "Show",\r\n    "accountId": "Account ID:",\r\n    "webPosUrl": "Web POS URL:",\r\n    "onlineHelp": "Online Help:",\r\n    "communityLabel": "Community:",\r\n    "knowledgeBase": "Knowledge Base",\r\n    "community": "Community",\r\n    "zendeskNickname": "Create eHopper Community Nickname",\r\n    "enterNickname": "<p>The eHopper Community allows eHopper customers, partners and staff to join together and collaborate in sharing information and thoughts about eHopper&rsquo;s POS usage, product feedback, and the best business practices.</p>",\r\n    "enterNicknameNote": "<p>To access and post in the community, please either input your own name or create a nickname.</p>",\r\n    "nicknameSaved": "Your nickname is saved.",\r\n    "note": "Note:"\r\n  },\r\n  "dashboard/widgets/tasks": {\r\n    "getting_started": "Getting Started",\r\n    "my_custom_task": "My Custom Task",\r\n    "you_have_created_50_tasks_which_is_a_limit_delete_some_old_tasks_to_create_a_new_one": "You have created 50 tasks and have reached your task limit. Delete some older tasks in order to create a new one."\r\n  },\r\n  "departments/departmentManage": {\r\n    "department_name": "Department Name",\r\n    "department_description": "Department Description",\r\n    "is_active": "Is Active",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "input_name": "Input Name",\r\n    "input_description": "Input Description",\r\n    "new_department": "New Department",\r\n    "edit_department": "Edit Department",\r\n    "department_name_must_be_unique": "Department name must be unique.",\r\n    "the_department_has_categories_assigned_please_delete_those_categories_first": "The Department has Categories assigned. Please delete those Categories first.",\r\n    "failed_to_save_department": "Failed to save department."\r\n  },\r\n  "appdepartments/departmentManage": {\r\n    "department_name": "App Department Name",\r\n    "department_description": "App Department Description",\r\n    "is_active": "Is Active",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "input_name": "Input Name",\r\n    "input_description": "Input Description",\r\n    "new_department": "New App Department",\r\n    "edit_department": "Edit App Department",\r\n    "department_name_must_be_unique": "App Department name must be unique.",\r\n    "the_department_has_categories_assigned_please_delete_those_categories_first": "The App Department has App Categories assigned. Please delete those App Categories first.",\r\n    "failed_to_save_department": "Failed to save app department."\r\n  },\r\n  "departments/departmentsList": {\r\n    "new_department": "New Department",\r\n    "toggle_dropdown": "Toggle Dropdown",\r\n    "new_category": "New Category",\r\n    "new_item": "New Item",\r\n    "new_modifier": "New Global Modifier",\r\n    "department_name": "Department Name",\r\n    "status": "Status",\r\n    "search_for_department": "Search For Department",\r\n    "are_you_sure_you_want_to_delete_selected_department": "Are you sure you want to delete selected department?",\r\n    "are_you_sure_you_want_to_delete_selected_departments": "Are you sure you want to delete selected departments?",\r\n    "the_department_has_categories_assigned_please_delete_those_categories_first": "The Department \'{0}\' has Categories assigned. Please delete those Categories first.",\r\n    "the_department_": "The Department ",\r\n    "active": "Active",\r\n    "inactive": "Inactive"\r\n  },\r\n  "appdepartments/departmentsList": {\r\n    "new_department": "New App Department",\r\n    "toggle_dropdown": "Toggle Dropdown",\r\n    "new_category": "New App Category",\r\n    "department_name": "App Department Name",\r\n    "status": "Status",\r\n    "search_for_department": "Search For App Department",\r\n    "are_you_sure_you_want_to_delete_selected_department": "Are you sure you want to delete selected app department?",\r\n    "are_you_sure_you_want_to_delete_selected_departments": "Are you sure you want to delete selected app departments?",\r\n    "the_department_has_categories_assigned_please_delete_those_categories_first": "The App Department \'{0}\' has App Categories assigned. Please delete those App Categories first.",\r\n    "the_department_": "The App Department ",\r\n    "active": "Active",\r\n    "inactive": "Inactive"\r\n  },\r\n  "employees/employeeManage": {\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "new_employee": "New Employee",\r\n    "edit_employee": "Edit Employee",\r\n    "general": "General",\r\n    "contact_info": "Contact Info",\r\n    "localization": "Localization",\r\n    "userPinExists": "User with this PIN already exists.",\r\n    "employeeExists": "Employee with the same last name, first name, email and phone number already exists.",\r\n    "should_be_equal_to_pin": "Field should be equal to PIN",\r\n    "Duplicate Pin": "Duplicate Pin.",\r\n    "Duplicate Email": "Duplicate Email.",\r\n    "Duplicate Nickname": "This nickname is already used by another employee.",\r\n    "The last administrator can not be locked": "The last administrator can not be locked.",\r\n    "Enterprise not found": "Enterprise not found."\r\n  },\r\n  "employees/employeesList": {\r\n    "first_name": "First Name",\r\n    "last_name": "Last Name",\r\n    "nickname": "Nickname",\r\n    "email": "Email",\r\n    "phone": "Phone",\r\n    "role": "Role",\r\n    "status": "Status",\r\n    "new_employee": "New Employee",\r\n    "search_for_employee": "Search For Employee",\r\n    "active": "Active",\r\n    "inactive": "Inactive",\r\n    "allStores": "All Stores",\r\n    "stores": " Store(s)",\r\n    "store": " Store"\r\n  },\r\n  "employees/manage-tabs/contactTab": {\r\n    "email": "Email",\r\n    "phone": "Phone",\r\n    "address": "Address",\r\n    "country": "Country",\r\n    "state": "State",\r\n    "city": "City",\r\n    "zip": "Zip",\r\n    "choose_country": "Choose Country...",\r\n    "choose_state": "Choose State..."\r\n  },\r\n  "employees/manage-tabs/generalTab": {\r\n    "first_name": "First Name",\r\n    "last_name": "Last Name",\r\n    "nickname": "Nickname",\r\n    "language": "Language",\r\n    "pin": "PIN",\r\n    "confirm_pin": "Confirm PIN",\r\n    "password": "Password",\r\n    "confirm_password": "Confirm Password",\r\n    "role": "Role",\r\n    "is_active": "Is Active",\r\n    "select_role": "Unassigned",\r\n    "stores" : "Stores:",\r\n    "assignedOnly" : "Assigned Only",\r\n    "searchStore" : "Search of choose Store(s)",\r\n    "selectStore" : "Select Store(s)"\r\n  },\r\n  "employees/manage-tabs/localizationTab": {\r\n    "pos_language": "POS Language",\r\n\t"bo_language": "BO Language",\r\n    "select_pos_language": "Select POS Language...",\r\n    "select_bo_language": "Select BO Language...",\r\n    "same_as_pos_language": "Same as POS language",\r\n    "administrator": "Administrator",\r\n    "backOfficeOperator": "Back Office Operator",\r\n    "salesManager": "Sales Manager",\r\n    "salesPerson": "Sales Person"\r\n  },\r\n  "inventory/importInventory": {\r\n    "file_to_import": "File to import",\r\n    "browse": "Browse",\r\n    "browse_csv_file": "Browse *.csv file",\r\n    "uploading": "Uploading",\r\n    "importing": "Importing",\r\n    "done": "DONE",\r\n    "cancel": "Cancel",\r\n    "error_importing_": "Error Importing ",\r\n    "processing": "Processing...",\r\n    "abort": "Abort",\r\n    "file_upload_failed_": "File upload failed. ",\r\n    "imported_lines": " Imported {0} lines.",\r\n    "error_in_file_format_error_line_message_": "Error in file format. Error in line # {0}; Message: {1}.",\r\n    "Number of columns in line {0} is less then expected": "Number of columns in line {0} is less then expected. Expected amount of columns is: {1}.",\r\n    "Number of columns in line {0} is more then expected": "Number of columns in line {0} is more then expected. Expected amount of columns is: {1}.",\r\n    "import_was_successfully_cancelled": "Import was successfully cancelled.",\r\n    "import_successfully_finished": "Import successfully finished.",\r\n    "cancelling": "Cancelling...",\r\n    "field_is_required": "Field \'{0}\' is required.",\r\n    "Field \'{0}\' has length greater than {1}": "Field \'{0}\' has length greater than {1}.",\r\n    "field_sku_or_cost_exists_while_vendor_is_empty": "Product \'SKU\' and \'Cost\' can not be defined when product Vendor is empty.",\r\n    "cannot_parse_file": "Cannot parse file.",\r\n    "upc_has_a_wrong_format_only_digits_allowed": "UPC has a wrong format. Only digits allowed.",\r\n    "upc_has_a_wrong_format_only_digits_and_letters_allowed": "UPC has a wrong format. Only digits and letters are allowed.",\r\n    "upc_has_a_wrong_format_upc_length_can_be_8_or_12_or_13_digits": "UPC has a wrong format. UPC length can be 8, 12 or 13 digits.",\r\n    "upc_has_a_wrong_format_upc_length_should_be_less_than_13": "UPC has a wrong format. UPC length should less than 13.",\r\n    "upc_has_a_wrong_format_upc_length_should_be_less_than_20": "UPC has a wrong format. UPC length should not be longer than 20.",\r\n    "unitOfMeasure_not_found": "UnitOfMeasure \'{0}\' not found.",\r\n    "vendor_not_found": "Vendor \'{0}\' not found.",\r\n    "field_Name_Category_Department_cannot_be_null": "Field \'Name\', \'Category\', \'Department\' cannot be empty.",\r\n    "the_sku_is_already_exists": "The SKU \'{0}\' is already exists.",\r\n    "field_Sku_cannot_be_null": "Field \'SKU\' cannot be empty.",\r\n    "unexpected_import_error_details_": "Unexpected Import Error. Details: {0}",\r\n    "error_at_line_": " Error at line \'{0}\'.",\r\n    "Inventory import is already running": "Inventory import is already running.",\r\n    "Language id is not found in header column": "Language ID is not found in header column \'{0}\'",\r\n    "language_not_supported": "Language \'{0}\' is not supported.",\r\n    "duplicate_language" : "Duplicate language column \'{0}\'.",\r\n    "Columns with product names not found": "Columns with product names not found",\r\n    "First column header does not contains default language code": "Header of first column does not contain the ISO code of the default language.",\r\n    "field_price_is_invalid": "Invalid \'Price\' listed in field",\r\n    "invalid column header_x": "invalid column header \'{0}\'",\r\n    "column not found_x": "Column not found: \'{0}\'",\r\n    "get_template": "Get Template",\r\n    "Field_x_has invalid boolean value": "Field \'{0}\' has invalid boolean value.",\r\n    "field_x_is_invalid": "Field \'{0}\' is invalid.",\r\n    "field_price_of_store_not_found" : "Field \'Price\' for Store {0} not found.",\r\n    "field_taxable_of_store_not_found": "Field \'Taxable\' for Store {0} not found.",\r\n    "field_discountable_of_store_not_found": "Field \'Discountable\' for Store {0} not found.",\r\n    "field_QuantityOnHand_of_store_not_found": "Field \'Quantity On Hand\' for Store {0} not found.",\r\n    "field_MinimumQuantity_of_store_not_found": "Field \'Minimum Quantity\' for Store {0} not found.",\r\n    "field_RecommendedQuantity_of_store_not_found": "Field \'Recommended Quantity\' for Store {0} not found.",\r\n    "invalid column header_x" : "Invalid column header \'{0}\'",\r\n    "field_should_be_less_and_greater": "Field \'{0}\' should be less than {1} and greater than {2}.",\r\n    "duplicate_category_name" : "Category \'{0}\' is a duplicate name. Category names must be unique.",\r\n    "MinimumQuantity_should_be_less_than_RecommendedQuantity": "Minimum Quantity should be less or equal to the Recommended Quantity.",\r\n    "MinimumQuantity_should_be_less_than_RecommendedQuantity_for_store_x": "Minimum Quantity should be less or equal to Recommended Quantity for Store: \'{0}\'.",\r\n    "invalid_inventory_type": "Invalid \'Inventory Type\': \'{0}\' should be on of: \'Inventory\', \'Non-Inventory\', \'Serialized\'",\r\n    "invalid_options_count" : "Options count should be less or equal to 4",\r\n    "invalid_option_values_count": "Option values count should be less or equal to 10",\r\n    "inventory_matrix_not_installed": "To import matrix product please install \'Inventory Matrix\' Application.",\r\n    "Changing Product Type not allowed" : "Changing Product Type not allowed.",\r\n    "Changing Inventory Type not allowed": "Changing Inventory Type not allowed.",\r\n    "At least one option should be added": "At least one option should be added.",\r\n    "invalid_product_type": "Product type column cannot be empty. It should be “0” for non-matrix products and “1” for matrix products."\r\n  },\r\n   "inventory/importInventory/columns": {\r\n        "Product Name" : "Product Name ({0})",\r\n        "Description" : "Description",\r\n        "Department" : "Department",\r\n        "Category" : "Category",\r\n        "UPC" : "UPC",\r\n        "Product Status" : "Product Status",\r\n        "Cost" : "Cost",\r\n        "Price Type" : "Price Type",\r\n        "Sales Price" : "Sales Price",\r\n        "Taxable" : "Taxable",\r\n        "Discountable" : "Discountable",\r\n        "Quantity on Hand" : "Quantity on Hand",\r\n        "Minimum Quantity" : "Minimum Quantity",\r\n        "Recommended Quantity" : "Recommended Quantity",\r\n        "Vendor" : "Vendor",\r\n        "Vendor SKU" : "Vendor SKU"\r\n    },\r\n  "inventory/inventoryList": {\r\n    "new_item": "New Item",\r\n    "toggle_dropdown": "Toggle Dropdown",\r\n    "new_category": "New Category",\r\n    "new_department": "New Department",\r\n    "new_modifier": "New Global Modifier",\r\n    "import_inventory": "Import Inventory",\r\n    "department": "Department",\r\n    "department_filter": "Department:",\r\n    "all": "All",\r\n    "category": "Category",\r\n    "category_filter": "Category:",\r\n    "id": "ID",\r\n    "item": "Item",\r\n    "cost": "Cost",\r\n    "price": "Price",\r\n    "margin": "Margin",\r\n    "quantity": "Quantity",\r\n    "value": "Value",\r\n    "qty_sold": "Qty Sold",\r\n    "gross_sales": "Gross Sales",\r\n    "status": "Status",\r\n    "search_item_by_title_or_code": "Search item by title or code",\r\n    "no_matching_records_found": "No matching records found",\r\n    "are_you_sure_you_want_to_delete_selected_products": "Are you sure you want to delete the selected Products?",\r\n    "deleting_product_error": "Product: {0} can not be deleted as it is in open orders. ",\r\n    "manual": "Manual",\r\n    "active": "Active",\r\n    "inactive": "Inactive",\r\n    "inventoryType": "Inventory Type",\r\n    "inventoryTypeFilter": "Inventory Type:",\r\n    "inventory": "Inventory",\r\n    "nonInventory": "Non-Inventory",\r\n    "serialized": "Serialized",\r\n    "matrix": "Matrix"\r\n  },\r\n  "inventory/inventoryManage": {\r\n    "cancel": "Cancel",\r\n    "done": "Done",\r\n    "new_inventory_item": "New Inventory Item",\r\n    "vendor": "Vendor",\r\n    "modifier": "Modifier",\r\n    "edit_inventory_item": "Edit Inventory Item",\r\n    "general": "General",\r\n    "pricing": "Pricing",\r\n    "taxes": "Taxes",\r\n    "variants": "Inventory Matrix",\r\n    "modifiers": "Modifiers",\r\n    "vendors": "Vendors",\r\n    "ordering": "Ordering",\r\n    "serials": "Serials",\r\n    "warning_another_product_has_the_same_sku_with_this_vendor": "Warning: Another product has the same SKU with this vendor.",\r\n    "warning_product_picture_max_size_is_exceeded": "Warning: The product picture size has exceeded the maximum size.",\r\n    "another_product_has_save_sku_x_": "Another product has the same SKU: \'{0}\' with this vendor.",\r\n    "unexpected_error_occured_please_try_again_later": "An unexpected error occured. Please try again later.",\r\n    "basic_item": "Inventory Item",\r\n    "variant_item": "Matrix Item",\r\n    "sell_basik": "Sell this item individually",\r\n    "sell_basic": "Sell this item individually",\r\n    "sell_variant": "Sell matrixed item",\r\n    "create": "Create",\r\n    "or" : "OR",\r\n    "name_on_samecategory": "Product with name {0} alredy exists for language {1} in this category",\r\n    "empty_variant": "At least one option should be added"\r\n  },\r\n  "inventory/inventory-manage-tabs/general": {\r\n    "inventoryTypeStandard": "Inventory",\r\n    "inventoryTypeSerialized": "Serialized",\r\n    "inventoryTypeNonInventory": "Non-Inventory",\r\n    "product_name": "Product Name",\r\n    "product_short_name": "Product Short Name",\r\n    "product_description": "Product Description",\r\n    "department": "Department",\r\n    "category": "Category",\r\n    "upc": "UPC",\r\n    "is_active": "Is Active",\r\n    "the_image_is_too_big_max_allowed_size_of_image_is_kb": "The image is too big. Max allowed size of image is {0} KB.",\r\n    "upload_product_image": "Upload product image...",\r\n    "delete_image": "Delete image",\r\n    "choose_department": "Choose Department...",\r\n    "choose_category": "Choose Category...",\r\n    "select_color": "Select Color",\r\n    "color": "Product Display Color",\r\n    "the_image_will_be_deleted": "This image will be deleted.",\r\n    "ok": "OK",\r\n    "cancel": "Cancel",\r\n    "chrome_invalid_version_pic": "To edit image or upload a new image use Chrome version 48 or higher.",\r\n    "chrome_invalid_version_no_pic": "To upload image use Chrome 48 or higher.",\r\n    "browse_images": "Browse images",\r\n    "invalid_image": "Invalid image"\r\n  },\r\n  "inventory/inventory-manage-tabs/ordering": {\r\n    "quantity": "Quantity",\r\n    "recommended_quantity": "Recommended Quantity",\r\n    "minimum_quantity": "Minimum Quantity",\r\n    "input_quantity": "Input Quantity",\r\n    "total_quantity": "Total Quantity",\r\n    "quantityLimits": "Quantity should be greater than {0} and less than {1}",\r\n    "recommendedQuantityLimits": "Recommended Quantity should be greater or equal to {0} and less than {1}",\r\n    "minimumQuantityLimits": "Minimum Quantity should be greater or equal to {0} and less than {1}",\r\n    "minimum_quantity_should_be_less_or_equal_to_recommended_quantity": "Minimum Quantity should be less or equal to Recommended Quantity"\r\n  },\r\n  "inventory/inventory-manage-tabs/pricing": {\r\n    "price_type": "Price Type",\r\n    "unit": "Unit",\r\n    "sales_price": "Sales Price",\r\n    "is_taxable": "All Taxable",\r\n    "is_discountable": "All Discountable",\r\n    "fixed": "Fixed",\r\n    "manual": "Manual",\r\n    "price_should_be_greater_or_equal_to_0_and_less_than_100000": "Price should be greater or equal to 0 and less than 100000",\r\n    "store": "Store",\r\n    "salesPrice": "Sales Price",\r\n    "discountable": "Discountable",\r\n    "taxable": "Taxable",\r\n    "stores": "Stores",\r\n    "name" : "Name",\r\n    "rate" : "Rate"\r\n  },\r\n  "inventory/inventory-manage-tabs/vendorManage": {\r\n    "vendor": "Vendor",\r\n    "sku": "SKU",\r\n    "cost": "Cost",\r\n    "primary": "Primary",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "input_name": "Input Name"\r\n  },\r\n  "inventory/inventory-manage-tabs/vendors": {\r\n    "vendor": "Vendor",\r\n    "sku": "SKU",\r\n    "cost": "Cost",\r\n    "primary": "Primary",\r\n    "new_vendor": "New Vendor",\r\n    "search_or_select_vendors": "Search or select vendors",\r\n    "search_vendors": "Search vendors"\r\n  },\r\n  "inventory/inventory-manage-tabs/modifiers/addOnModifiers": {\r\n    "add-ons": "Add-Ons",\r\n    "modifier_name": "Modifier Name:",\r\n    "price": "Price:",\r\n    "is_active": "Is Active",\r\n    "you_did_not_add_add-ons": "You did not add add-ons.",\r\n    "add_option": "Add option"\r\n  },\r\n  "inventory/inventory-manage-tabs/modifiers/exceptionModifiers": {\r\n    "exceptions": "Exceptions",\r\n    "modifier_name": "Modifier Name:",\r\n    "price": "Price:",\r\n    "is_active": "Is Active",\r\n    "you_did_not_add_exceptions": "You did not add exceptions.",\r\n    "add_option": "Add option"\r\n  },\r\n  "inventory/inventory-manage-tabs/variants": {\r\n    "isActive": "Is Active",\r\n    "variant": "Matrix Item",\r\n    "price": "Price",\r\n    "quantity": "Quantity",\r\n    "cost": "Cost",\r\n    "sku": "SKU",\r\n    "upc": "UPC",\r\n    "varinat_name" : "Attribute Name",\r\n    "variants": "Attribute Values",\r\n    "copy2all": "Copy to All",\r\n    "hide_dis": "Hide Inactive",\r\n    "delete_var": "You are about to remove all items that include this variant.",\r\n    "sku_is_required": "SKU is required"\r\n  },\r\n  "inventory/inventory-manage-tabs/modifiers/groupModifiers": {\r\n    "groups": "Groups",\r\n    "group_name": "Group Name:",\r\n    "option": "Option:",\r\n    "price": "Price:",\r\n    "default": "Default",\r\n    "is_active": "Is Active",\r\n    "you_did_not_add_group_modifier": "You did not add group modifier.",\r\n    "enter_name": "Enter Name",\r\n    "add_option": "Add option"\r\n  },\r\n  "inventory/inventory-manage-tabs/modifiers/modifiers": {\r\n    "selectModifierType": "Select modifier type",\r\n    "new_modifier": "New Global Modifier",\r\n    "product_modifiers_must_have_unique_names": "Product modifiers must have unique names.",\r\n    "varinat_must_have_unique_names": "Attributes must have unique names.",\r\n    "variantOptionNameDuplicate": "Attribute has duplicated values for language {0}",\r\n    "add_modifiers_to_product": "Add modifiers to product",\r\n    "all_stores": "All Stores"\r\n  },\r\n  "inventory/inventory-manage-tabs/serials": {\r\n    "serialNo": "Serial #",\r\n    "serialNotUniqueError": "Serial number must be unique.",\r\n    "serials_were_sold": "The Serials were sold: {0}"\r\n  },\r\n  "modifiers/modifierManage": {\r\n    "modifier_type": "Modifier Type",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "select_modifier_type": "Select modifier type",\r\n    "modifier_with_such_name_already_exists": "Modifier with this already exists.",\r\n    "modifier_with_name_x_already_exists_for_lang_x": "Modifier with name \'{0}\' already exists for language \'{1}\'.",\r\n    "new_modifiers_must_have_unique_names": "New modifiers must have unique names.",\r\n    "new_modifier": "New Global Modifier",\r\n    "modifier_name_must_be_unique": "Modifier name must be unique.",\r\n    "modifier_name_for_lang_x_is_empty": "Modifier name is empty for \'{0}\' language.",\r\n    "varinat_name_for_lang_x_is_empty": "Matrix name is empty for \'{0}\' language.",\r\n    "modifiers_option_name_for_lang_x_is_empty": "\'{0}\' modifier\'s option name  is empty for \'{1}\' language.",\r\n    "modifier_option_name_for_lang_x_must_be_unique": "Modifier option name must be unique for \'{0}\' language.",\r\n    "emptyGroupModifierError": "You can not create group modifier without an option.",\r\n    "edit_modifier": "Edit Modifier",\r\n    "varinat_option_name_for_lang_x_is_empty": "\'{0}\' Matrix option name is empty for \'{1}\' language.",\r\n    "variant_with_name_x_already_exists_for_lang_x": "Modifier with name \'{0}\' already exists for language \'{1}\'."\r\n  },\r\n  "modifiers/modifiersList": {\r\n    "new_modifier": "New Global Modifier",\r\n    "toggle_dropdown": "Toggle Dropdown",\r\n    "new_department": "New Department",\r\n    "new_category": "New Category",\r\n    "new_item": "New Item",\r\n    "modifier": "Modifier",\r\n    "type": "Type",\r\n    "status": "Status",\r\n    "search_for_modifier": "Search For Modifier",\r\n    "are_you_sure_you_want_to_delete_selected_modifier": "Are you sure you want to delete the selected Modifier?",\r\n    "the_modifier_was_not_deleted": "The Modifier was not deleted.",\r\n    "group": "Group",\r\n    "add-on": "Add-On",\r\n    "exception": "Exception",\r\n    "active": "Active",\r\n    "inactive": "Inactive"\r\n  },\r\n  "modifiers/modifier-type/addOnModifier": {\r\n    "add-ons": "Add-Ons",\r\n    "modifier_name": "Modifier Name:",\r\n    "price": "Price:",\r\n    "is_active": "Is Active",\r\n    "add_option": "Add option"\r\n  },\r\n  "modifiers/modifier-type/exceptionModifier": {\r\n    "exceptions": "Exceptions",\r\n    "modifier_name": "Modifier Name:",\r\n    "price": "Price:",\r\n    "is_active": "Is Active",\r\n    "add_option": "Add option"\r\n  },\r\n  "modifiers/modifier-type/groupModifier": {\r\n    "groups": "Groups",\r\n    "group_name": "Group Name",\r\n    "option": "Option:",\r\n    "price": "Price:",\r\n    "default": "Default",\r\n    "is_active": "Is Active",\r\n    "enter_name": "Enter Name",\r\n    "add_option": "Add option"\r\n  },\r\n  "orders/orderDetails": {\r\n    "order_id": "Order ID:",\r\n    "order_name": "Order Name:",\r\n    "customer": "Customer:",\r\n    "customer_phone": "Customer Phone:",\r\n    "employee": "Employee:",\r\n    "order_date": "Order Date:",\r\n    "order_type": "Order Type:",\r\n    "status": "Status:",\r\n    "/": "/",\r\n    "tender_type": "Tender Type:",\r\n    "fulfillment": "Fulfillment:",\r\n    "refnum": "RefNum:",\r\n    "subtotal": "Subtotal:",\r\n    "discount": "Discount:",\r\n    "tax": "Tax:",\r\n    "tips": "Tips:",\r\n    "total": "Total:",\r\n    "back": "Back",\r\n    "order_details": "Order details",\r\n    "order_details_-_register_#_": "Order details - Register # {0} - Order Status: {1}",\r\n    "Pending": "Pending",\r\n    "Completed": "Completed",\r\n    "Failed": "Failed",\r\n    "Voided": "Voided",\r\n    "authCode": "Auth code:",\r\n    "control_number": "Control #:",\r\n    "store": "Store:"\r\n  },\r\n  "orders/orderDetailsItems": {\r\n    "description": "Description",\r\n    "quantity": "Quantity",\r\n    "item_price": "Item Price",\r\n    "discount": "Discount",\r\n    "total_price": "Total Price"\r\n  },\r\n  "orders/ordersList": {\r\n    "order_type": "Order Type:",\r\n    "all": "All",\r\n    "order_status": "Order Status:",\r\n    "fulfillment": "Fulfillment:",\r\n    "order_id": "Order ID",\r\n    "order_name": "Order Name",\r\n    "type": "Type",\r\n    "status": "Status",\r\n    "total": "Total",\r\n    "date": "Date",\r\n    "employee": "Employee",\r\n    "store": "Store",\r\n    "customer": "Customer",\r\n    "search_order": "Search Order",\r\n    "orders": "Orders",\r\n    "upc": "Order ID",\r\n    "name": "Order Name",\r\n    "typeColumn": "Order Type",\r\n    "tenderType": "Tender Type",\r\n    "fulfilmentColumn": "Fulfillment",\r\n    "businessDate": "Date",\r\n    "subtotal": "Subtotal",\r\n    "discount": "Discount",\r\n    "tax": "Tax",\r\n    "tips": "Tips",\r\n    "totalAmount": "Total",\r\n    "controlNumber": "Control #",\r\n    "walkIn": "Walk-In"   \r\n  },\r\n  "registerSettings/registerSettingsList": {\r\n    "register_name": "Register Name",\r\n    "status": "Status",\r\n    "are_you_sure_you_want_to_delete_selected_register_setting": "Are you sure you want to delete selected register setting?",\r\n    "error_occurred_while_deleting_register_setting_": "Error occurred while deleting register setting {0}",\r\n    "employees_": "Employees: ",\r\n    "active": "Enabled",\r\n    "inactive": "Inactive",\r\n    "search_register": "Search For Register",\r\n    "new_register": "New Register",\r\n    "store": "Store"\r\n  },\r\n  "registerSettings/registerSettingsManage": {\r\n    "general": "General",\r\n\t"localization": "Localization",\r\n    "register_name": "Register Name",\r\n    "assigned_only": "Assigned Only",\r\n    "employees": "Employees",\r\n    "register_number": "Register Number",\r\n    "register_license_key": "Register License Key",\r\n    "is_active": "Is Enabled",\r\n    "unblock": "Unblock",\r\n    "deactivate": "Deactivate",\r\n    "deactivateConfirmTitle": "Register Deactivation",\r\n    "deactivateConfirmText": "You are about to deactivate the register.<br />All unsynchronized data on the POS device will&nbsp;be&nbsp;lost.",\r\n    "deactivateSuccess": "The register has been deactivated.",\r\n    "deactivateError": "Error occured during deactivation of the register.",\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "input_name": "Input Name",\r\n    "input_number": "Input Number",\r\n    "register_with_this_name_already_exists_please_select_another_name_for_the_register": "Register with this name already exists. Please select another name for the Register.",\r\n    "register_number_must_be_unique": "Register number must be unique.",\r\n    "new_register_setting": "New Register Setting",\r\n    "edit_register_setting": "Edit Register Setting",\r\n    "search_or_choose_employee(s)": "Search or choose Employee(s)",\r\n    "search_or_choose_device(s)": "Search or choose Device(s)",\r\n    "payment_gateway": "Payment Gateway",\r\n    "control_token": "Control # Token"\r\n  },\r\n  "registerSettings/registerSettingsManage/localization": {\r\n    "pos_language": "POS Language",\r\n\t"kitchen_receipt_language": "Kitchen Receipt Language",\r\n\t"date_format": "Date Format",\r\n\t"time_format": "Time Format",\r\n    "select_pos_language": "Select POS Language...",\r\n\t"select_kitchen_receipt_language": "Select Kitchen Receipt Language...",\r\n\t"select_date_format": "Select Date Format...",\r\n\t"select_time_format": "Select Time Format..."\r\n  },\r\n  "registerSettings/registerSettingsManage/paymentGateway": {\r\n    "payment_gateway": "Payment Gateway",\r\n    "source_key": "Source Key",\r\n    "pin": "PIN",\r\n    "debitCardEnabled": "Enable Debit Card Payments",\r\n    "ebtCardEnabled": "Enable EBT Card Payments"\r\n  },\r\n  "registerSettings/newRegister": {\r\n    "defaultRegisterName": "New Register",\r\n    "requestSubmited": "Request to create <strong>New Register</strong><br />was submitted to customer support.",\r\n    "receiveNotification": "You will receive notification after register is created",\r\n    "unexpectedError": "Sorry, something went wrong. Please try again later.",\r\n    "duplicateName": "A register with this name already exists. Register name must be unique.",\r\n    "duplicateRequestName": "A request with this name already exists. Request name must be unique."\r\n  },\r\n  "shifts/shift": {\r\n    "register": "Register:",\r\n    "opened": "Opened:",\r\n    "opened_by": "Opened by:",\r\n    "closed": "Closed:",\r\n    "closed_by": "Closed by:",\r\n    "transactions": "Transactions:",\r\n    "cash": "Cash:",\r\n    "external_payment": "External Payment:",\r\n    "opening_amount": "Opening Amount:",\r\n    "cash_sales": "Cash Sales:",\r\n    "cash_refunds": "Cash Refunds:",\r\n    "payins": "Payins:",\r\n    "payouts": "Payouts:",\r\n    "closing_amount": "Closing Amount:",\r\n    "variance": "Variance:",\r\n    "revenue": "Revenue",\r\n    "sales": "Sales:",\r\n    "discounts": "Discounts:",\r\n    "refunds": "Refunds:",\r\n    "net_sales": "Net Sales:",\r\n    "tips": "Tips:",\r\n    "tax": "Tax:",\r\n    "total_tendered": "Total Tendered:",\r\n    "tender_breakdown": "Tender Breakdown",\r\n    "credit_card": "Credit Card:",\r\n    "debit_card": "Debit Card:",\r\n    "ebt_card": "EBT Cash Benefit:",\r\n    "back": "Back",\r\n     "ebt_food": "EBT Food Stamp:"\r\n  },\r\n  "shifts/shiftsList": {\r\n    "register": "Register",\r\n    "opened": "Opened",\r\n    "closed": "Closed",\r\n    "transactions": "Transactions",\r\n    "total_tendered": "Total Tendered",\r\n    "variance": "Variance",\r\n    "no_matching_records_found": "No matching records found",\r\n    "openedBy": "Opened By",\r\n    "closedBy": "Closed By",\r\n    "openingAmount": "Opening Amount",\r\n    "cashSales": "Cash Sales",\r\n    "cashRefunds": "Cash Refunds",\r\n    "payins": "Payins",\r\n    "payouts": "Payouts",\r\n    "closingAmount": "Closing Amount",\r\n    "sales": "Sales",\r\n    "discounts": "Discounts",\r\n    "refunds": "Refunds",\r\n    "netSales": "Net Sales",\r\n    "tips": "Tips",\r\n    "tax": "Tax",\r\n    "cash": "Cash",\r\n    "creditCard": "Credit Card",\r\n    "debitCard": "Debit Card",\r\n    "ebtCard": "EBT Card",\r\n    "externalPayment": "External Payment"\r\n  },\r\n  "stores/storesList": {\r\n    "stores": "Stores",\r\n    "search_store": "Search Store",\r\n    "new_store": "New Store",\r\n    "store_name": "Store Name",\r\n    "status" : "Status",\r\n    "employees_":"Employees:",\r\n    "active": "Active",\r\n    "inactive": "Inactive"\r\n  },\r\n  "storeSettings/storeSettings": {\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "saved_successfully": "Changes saved successfully.",\r\n    "general": "General",\r\n    "contacts": "Contacts",\r\n    "registers": "Registers",\r\n    "billing": "Billing",\r\n    "receipt": "Receipt",\r\n    "tips": "Tips",\r\n    "taxes": "Taxes",\r\n    "payment_gateway": "Payment Gateway",\r\n    "localization": "Localization",\r\n    "registers": "Registers"\r\n  },\r\n  "storeSettings/store-settings-tabs/billing": {\r\n    "next_billing_date": "Next billing date",\r\n    "amount_to_pay": "Amount to pay"\r\n  },\r\n  "storeSettings/store-settings-tabs/contacts": {\r\n    "store_name": "Store Name",\r\n    "address_1": "Address 1",\r\n    "address_2": "Address 2",\r\n    "city": "City",\r\n    "state": "State",\r\n    "zip": "Zip",\r\n    "country": "Country",\r\n    "phone": "Phone",\r\n    "email": "Email",\r\n    "web": "Web",\r\n    "choose_country": "Choose Country...",\r\n    "pleaseFillNewStore": "Please fill in the form below to set up a new store.",\r\n    "pleaseFillNewRegister": "Please fill in the form below to set up a new register."\r\n  },\r\n  "storeSettings/store-settings-tabs/general": {\r\n    "storeId": "Store ID",\r\n    "is_active": "Is Enabled",\r\n    "account_id": "Account ID",\r\n    "stores_business": "Store\'s business",\r\n    "tax_rate": "Tax Rate",\r\n    "show_order_type": "Show Order Type",\r\n    "item_notes": "Item Notes",\r\n    "no_notes": "No Notes",\r\n    "mandatory": "Mandatory",\r\n    "optional": "Optional",\r\n    "cancel_store_account": "Cancel Store Account",\r\n    "autoLogoutAfterOrder": "Autologout after each Order",\r\n    "externalPayment": "External Payment",\r\n    "syncOnLogin": "Synchronization on Login",\r\n    "openCashDrawerCC": "Open Cash Drawer on Credit/Debit Card Transaction",\r\n    "show_tax_list": "Show Tax List",\r\n    "displayUPCinShoppingCart": "Display UPC in Shopping cart",\r\n    "displayProductIdinShoppingCart": "Display Product Id in Shopping cart"\r\n  },\r\n  "storeSettings/store-settings-tabs/payment": {\r\n    "payment_gateway": "Payment Gateway",\r\n    "source_key": "Source Key",\r\n    "pin": "PIN",\r\n    "debitCardEnabled": "Enable Debit Card Payments",\r\n    "ebtCardEnabled": "Enable EBT Card Payments"\r\n  },\r\n  "storeSettings/store-settings-tabs/receipt": {\r\n    "kitchen_receipt": "Kitchen Receipt",\r\n    "signature_on_receipt": "Signature on Receipt",\r\n    "tipsNSignature": "Tips & Signature",\r\n    "tipsAndSignatureOnPos": "Tips & Signature on POS",\r\n    "Screen": "on Screen",\r\n    "Receipt": "on Receipt",\r\n    "Terminal": "on Terminal",\r\n    "receipt_template": "Receipt template",\r\n    "load_another_template": "Load another Template",\r\n    "footer" :"Footer"\r\n  },\r\n  "storeSettings/store-settings-tabs/registers": {\r\n    "registers_list": "Registers list",\r\n    "select_#_of_stores_registers": "Select # of Store\'s Registers",\r\n    "price_per_register": "Price per Register"\r\n  },\r\n  "storeSettings/store-settings-tabs/tips": {\r\n    "tips": "Tips",\r\n    "tips_on_credit_card_authorization": "Tips on Credit Card Authorization",\r\n    "keyboard_shortcut_settings": "Keyboard Shortcut Settings",\r\n    "for_curr_amount": "For {0} Amount",\r\n    "for_%_amount": "For % Amount"\r\n  },\r\n  "storeSettings/store-settings-tabs/taxes": {\r\n    "includeTaxesToPrice": "Include taxes to price by default",\r\n    "max_number_taxes_is": "Max allowed number of taxes is",\r\n    "no_taxes_defined": "No taxes defined",\r\n    "ebt_tax_exemption":"EBT Tax Exemption"\r\n  },\r\n  "storeSettings/store-settings-tabs/localization": {\r\n    "pos_language": "POS Language",\r\n\t"kitchen_receipt_language": "Kitchen Receipt Language",\r\n\t"date_format": "Date Format",\r\n\t"time_format": "Time Format",\r\n    "select_pos_language": "Select POS Language...",\r\n\t"select_kitchen_receipt_language": "Select Kitchen Receipt Language...",\r\n\t"select_date_format": "Select Date Format...",\r\n\t"select_time_format": "Select Time Format..."\r\n  },\r\n  "storeSettings/newStore": {\r\n    "defaultStoreName": "New Store",\r\n    "description": "Description",\r\n    "storeDescription": "Store Description",\r\n    "requestSubmited": "Request to create <strong>New Store</strong><br />was submitted to customer support.",\r\n    "receiveNotification": "You will receive notification after store is created",\r\n    "alreadyExists": "Store (or Store creation request) with that name already exists."\r\n  },\r\n  "enterpriseSettings/enterpriseSettings": {\r\n    "done": "Done",\r\n    "cancel": "Cancel",\r\n    "contacts": "Contacts",\r\n    "contacts": "Contacts",\r\n    "marketing": "Marketing",\r\n    "optInCheckIn": "Opt-in/Check-in Key",\r\n    "loyaltyRedemptionKey": "Loyalty Redemption Key",\r\n    "localization": "Localization",\r\n    "saved_successfully": "Saved successfully.",\r\n    "default_lang_change_error": "Some translations for Department name, Category name, Product name, modifier name/options to \'{0}\' are missing. Please add all translations before changing default language. {1} \'{2}\' does not have translation for new language.",\r\n    "Department": "Department",\r\n    "Category": "Category",\r\n    "Product": "Product",\r\n    "Modifier": "Modifier",\r\n    "Modifier Option": "Modifier Option"\r\n  },\r\n  "enterpriseSettings/enterprise-settings-tabs/contacts": {\r\n    "enterprise_code": "Enterpise Code",\r\n    "enterprise_name": "Enterpise Name",\r\n    "address_1": "Address 1",\r\n    "address_2": "Address 2",\r\n    "city": "City",\r\n    "state": "State",\r\n    "zip": "Zip",\r\n    "country": "Country",\r\n    "phone": "Phone",\r\n    "email": "Email",\r\n    "web": "Web",\r\n    "choose_country": "Choose Country..."\r\n  },\r\n\r\n\t"enterpriseSettings/enterprise-settings-tabs/localization": {\r\n\t\t"account_languages": "Account Language(s)",\r\n\t\t"select_language": "Select language",\r\n\t\t"default_language": "Default Language",\r\n\t\t"pos_language": "POS Language",\r\n\t\t"kitchen_receipt_language": "Kitchen Receipt Language",\r\n\t\t"bo_language": "Back Office Language",\r\n\t\t"date_format": "Date Format",\r\n\t\t"time_format": "Time Format",\r\n\t\t"currency": "Currency",\r\n\t\t"currency_format": "Currency Format",\r\n\t\t"select_pos_language": "Select POS language...",\r\n\t\t"select_kitchen_receipt_language": "Select kitchen receipt language...",\r\n\t\t"select_bo_language": "Select Back Office language...",\r\n\t\t"select_date_format": "Select date format...",\r\n\t\t"select_time_format": "Select time format..."\r\n\t},\r\n\t"tips/tipsList": {\r\n\t\t"employee": "Employee:",\r\n\t\t"all": "All",\r\n\t\t"order_id": "Order ID",\r\n\t\t"ref_num": "Ref Num",\r\n\t\t"type": "Type",\r\n\t\t"status": "Status",\r\n\t\t"price": "Price",\r\n\t\t"date": "Date",\r\n\t\t"tips": "Tips",\r\n\t\t"total_tips": "Total Tips:",\r\n\t\t"tips_report": "Tips Report",\r\n\t\t"statusNotPaid": "Not paid",\r\n\t\t"statusPartiallyPaid": "Partially paid",\r\n\t\t"statusPaid": "Paid",\r\n\t\t"statusPartiallyRefunded": "Partially refunded",\r\n\t\t"statusRefunded": "Refunded",\r\n\t\t"statusVoided": "Voided",\r\n\t\t"store": "Store"\r\n\t},\r\n\t"vendors/vendorManage": {\r\n\t\t"done": "Done",\r\n\t\t"cancel": "Cancel",\r\n\t\t"new_vendor": "New Vendor",\r\n\t\t"edit_vendor": "Edit Vendor",\r\n\t\t"general": "General",\r\n\t\t"contact_info": "Contact Info"\r\n\t},\r\n\t"vendors/vendorsList": {\r\n\t\t"new_vendor": "New Vendor",\r\n\t\t"toggle_dropdown": "Toggle Dropdown",\r\n\t\t"new_item": "New Item",\r\n\t\t"new_category": "New Category",\r\n\t\t"vendor_name": "Vendor Name",\r\n\t\t"type": "Type",\r\n\t\t"status": "Status",\r\n\t\t"search_for_vendor": "Search for vendor",\r\n\t\t"are_you_sure_you_want_to_delete_selected_vendor": "Are you sure you want to delete selected vendor?",\r\n\t\t"active": "Active",\r\n\t\t"inactive": "Inactive",\r\n\t\t"vendors_list": "Vendor List",\r\n\t\t"the_vendor_has_vendoritem_assigned_please_delete_those_vendoritem_first": "Item(s) have been assigned to vendor {0}. Please delete the assigned item(s) first."\r\n\t},\r\n\t"vendors/manage-tabs/contactInfo": {\r\n\t\t"address": "Address",\r\n\t\t"country": "Country",\r\n\t\t"state": "State",\r\n\t\t"city": "City",\r\n\t\t"zip": "Zip Code",\r\n\t\t"phone": "Phone Number",\r\n\t\t"fax": "Fax",\r\n\t\t"email": "Email",\r\n\t\t"web_site": "Web Site",\r\n\t\t"contact_name": "Contact Name",\r\n\t\t"www_address_com": "http://www.address.com",\r\n\t\t"choose_country": "Choose Country...",\r\n\t\t"choose_state": "Choose State...",\r\n\t\t"contact_info": "Contact Info"\r\n\t},\r\n\t"vendors/manage-tabs/general": {\r\n\t\t"business_account_#": "Business Account #",\r\n\t\t"vendor_name": "Vendor Name",\r\n\t\t"vendor_type": "Vendor Type",\r\n\t\t"tax_id": "Tax ID",\r\n\t\t"notes": "Notes",\r\n\t\t"is_active": "Is Active",\r\n\t\t"choose_vendor_type": "Choose Vendor Type...",\r\n\t\t"general": "General"\r\n\t},\r\n\t"date-filter/date-filter": {\r\n\t\t"today": "Today",\r\n\t\t"yesterday": "Yesterday",\r\n\t\t"last_7_days": "Last 7 Days",\r\n\t\t"last_30_days": "Last 30 Days",\r\n\t\t"this_month": "This Month",\r\n\t\t"year-to-date": "Year-to-Date",\r\n\t\t"all": "All",\r\n\t\t"custom_range": "Custom Range",\r\n\t\t"apply": "Apply",\r\n\t\t"cancel": "Cancel"\r\n\t},\r\n\t"common": {\r\n\t\t"NA": "N/A",\r\n\t\t"success": "Success!",\r\n\t\t"error": "Error!",\r\n\t\t"warning": "Warning",\r\n\t\t"ok": "OK",\r\n\t\t"cancel": "Cancel",\r\n\t\t"yes": "Yes",\r\n\t\t"no": "No",\r\n\t\t"active": "Active",\r\n\t\t"inactive": "Inactive",\r\n\t\t"delete_selected": "Delete",\r\n\t\t"areYouSure": "Are you sure?",\r\n\t\t"close": "Close",\r\n\t\t"confirm": "Confirm",\r\n\t\t"thisFieldIsRequired": "This field is required.",\r\n\t\t"invalidPin": "Invalid PIN",\r\n\t\t"fieldShouldBeLessThan": "Field should be less than",\r\n\t\t"valueIsTooBig": "Value is too big.",\r\n\t\t"numberIsNotInRange": "Number is not in range.",\r\n\t\t"thisFieldHasToBeValidURL": "Not a valid URL.",\r\n\t\t"websiteIsInvalid": "Website is invalid.",\r\n\t\t"valueMustBeValidPercent": "Value must be a valid percentage.",\r\n\t\t"mustBeGreaterThanOrEqual": "Must be greater than or equal to the other value.",\r\n\t\t"upcIsInvalid": "UPC is invalid.",\r\n\t\t"allArrayElementsMustBeUnique": "All array elements must be unique.",\r\n\t\t"nameMustBeUnique": "Name must be unique.",\r\n\t\t"pleaseSpecifyValidPhoneNumber": "Please input a valid phone number.",\r\n\t\t"search": "Search...",\r\n\t\t"export": "Export"\r\n\t},\r\n\t"models/vendorModel": {\r\n\t\t"vendor_name_must_be_unique": "\'Vendor Name\' must be unique.",\r\n\t\t"vendor_name_is_required": "Vendor name is required",\r\n\t\t"type_is_required": "\'Vendor Type\' is required",\r\n\t\t"city_is_required": "\'City\' is required",\r\n\t\t"address_is_required": "\'Address\' is required",\r\n\t\t"state_is_required": "\'State\' is required",\r\n\t\t"invalid_zip_code": "Invalid \'ZIP Code\'",\r\n\t\t"country_is_required": "\'Country\' is required",\r\n\t\t"phone_is_incorrect": "sPhone Number\' is invalid",\r\n\t\t"please_specify_a_valid_us_phone_number": "Please input a valid US phone number."\r\n\t},\r\n\t"repositories/addressRepository": {\r\n\t\t"invalid_state": "Invalid \'State\'",\r\n\t\t"invalid_zip": "Invalid \'Zip Code\'"\r\n\t},\r\n\t"repositories/businessUnitRepository": {\r\n\t\t"terminal_count_should_be_in_range_of_0_to_100": "Terminal count should be in range of 0 to 100"\r\n\t},\r\n\t"repositories/employeeRepository": {\r\n\t\t"you_are_not_athorized_to_save_employee": "You are not authorized to save employee data."\r\n\t},\r\n\t"repositories/itemSellingPricesRepository": {\r\n\t\t"price_should_be_in_range_of_-100000_to_100000": "Price should be in range of -100000 to 100000."\r\n\t},\r\n\t"repositories/modifiersRepository": {\r\n\t\t"option_name_must_be_unique": "Option name must be unique.",\r\n\t\t"add_on": "Add On",\r\n\t\t"exclusion": "Exclusion"\r\n\t},\r\n\t"repositories/tipsRepository": {\r\n\t\t"credit_card_authorization": "Credit Card Authorization",\r\n\t\t"tips_%_amount": "Tips % Amount",\r\n\t\t"tips_%_used_for_authonly_is_too_high_please_use_value_from_0%_to_{0}%": "Tips % used for AuthOnly is too high. Please use value from 0% to {0}%"\r\n\t},\r\n\t"repositories/presentationApi/employeesRepository": {\r\n\t\t"invalid_email_address": "Invalid email address",\r\n\t\t"invalid_phone": "Invalid phone number",\r\n\t\t"you_are_not_athorized_to_save_employees": "You are not authorized to save employee data.",\r\n\t\t"choose_role_name": "Choose a role for the employee."\r\n\t},\r\n\t"repositories/presentationApi/modifiersRepository": {\r\n\t\t"option_name_must_be_unique": "Option name must be unique.",\r\n\t\t"add_on": "Add On",\r\n\t\t"exclusion": "Exclusion"\r\n\t},\r\n\t"repositories/presentationApi/storesRepository": {\r\n\t\t"invalid_state": "Invalid \'State\'",\r\n\t\t"invalid_zip": "Invalid \'Zip Code\'"\r\n\t},\r\n\t"base/baseListViewModel": {\r\n\t\t"list": "List"\r\n\t},\r\n\t"base/baseManageViewModel": {\r\n\t\t"error_saving_": "Error saving ",\r\n\t\t"edit_": "Edit ",\r\n\t\t"new_": "New "\r\n\t},\r\n\t"modifierTypes": {\r\n\t\t"modifierGroup": "Modifier Group",\r\n\t\t"addons": "Add-ons",\r\n\t\t"exceptions": "Exceptions",\r\n\t\t"0": "Modifier Group",\r\n\t\t"1": "Add-ons",\r\n\t\t"2": "Exceptions"\r\n\t},\r\n\t"reports/productMixReport": {\r\n\t\t"search_item_by_title_or_code": "Search item by title or code",\r\n\t\t"department": "Department",\r\n\t\t"department_filter": "Department:",\r\n\t\t"all": "All",\r\n\t\t"category": "Category",\r\n\t\t"category_filter": "Category:",\r\n\t\t"id": "ID",\r\n\t\t"item": "Item",\r\n\t\t"quantity": "Quantity",\r\n\t\t"qty_sold": "Qty Sold",\r\n\t\t"min_qty": "Min. Qty",\r\n\t\t"gross_sales": "Gross Sales",\r\n\t\t"netSales": "Net Sales",\r\n\t\t"taxAmount": "Tax Amount",\r\n\t\t"register": "Register",\r\n\t\t"register_filter": "Register:",\r\n\t\t"employee": "Employee",\r\n\t\t"employee_filter": "Employee:",\r\n\t\t"no_matching_records_found": "No matching records found",\r\n\t\t"total": "Total:",\r\n\t\t"timeIn": "Clock In Time",\r\n\t\t"timeOut": "Clock Out Time",\r\n\t\t"registerIn": "Clock In Register",\r\n\t\t"register_out": "Clock Out Register",\r\n\t\t"hours": "Hours",\r\n\t\t"confirmDelete": "Are you sure you want to delete the working session?",\r\n\t\t"terminal0": "Cash Terminal",\r\n\t\t"terminal2": "Credit Card Terminal",\r\n\t\t"selectTime": "Select Time",\r\n\t\t"selectDate": "Select Date",\r\n\t\t"employeeError": "Please select \'Employee\'",\r\n\t\t"registerInError": "Select \'Clock In Time\'",\r\n\t\t"registerOutError": "Select \'Clock Out Time\'",\r\n\t\t"clockInError": "Clock in event of ",\r\n\t\t"on": " on ",\r\n\t\t"alredy": " already exists",\r\n\t\t"clockOutError": "Clock out event of ",\r\n\t\t"store": "Store",\r\n\t\t"same": " \'Clock In Time\' should be different from \'Clock Out Time\'"\r\n\t},\r\n\t"reports/transactionReport": {\r\n\t\t"sale": "Sale",\r\n\t\t"refund": "Refund",\r\n\t\t"customer": "Customer",\r\n\t\t"employee": "Employee",\r\n\t\t"stores": "Store",\r\n\t\t"register": "Register",\r\n\t\t"period": "Time Period",\r\n\t\t"amountRange": "$ Amount Range",\r\n\t\t"from": "From",\r\n\t\t"to": "To",\r\n\t\t"format": "Format",\r\n\t\t"export": "Export"\r\n\t},\r\n\t"reports/transactionReportHeaders": {\r\n\t\t"accountId": "Account ID",\r\n\t\t"companyName": "Company Name",\r\n\t\t"storeName": "Store Name",\r\n\t\t"registerName": "Register Name",\r\n\t\t"transactionType": "Transaction Type",\r\n\t\t"transactionId": "Transaction ID",\r\n\t\t"orderId": "Order ID",\r\n\t\t"paymentMethod": "Payment Method",\r\n\t\t"paymentStatus": "Payment Status",\r\n\t\t"cardNumber": "Card Number",\r\n\t\t"authCode": "Auth Code",\r\n\t\t"refNum": "RefNum",\r\n\t\t"total": "Total",\r\n\t\t"tips": "Tips",\r\n\t\t"authorized": "Authorized",\r\n\t\t"captured": "Captured",\r\n\t\t"paymentDate": "Payment Date",\r\n\t\t"employee": "Employee",\r\n\t\t"customer": "Customer",\r\n\t\t"customerAddressLine1": "Customer Address Line 1",\r\n\t\t"customerAddressLine2": "Customer Address Line 2",\r\n\t\t"customerCity": "Customer City",\r\n\t\t"customerState": "Customer State",\r\n\t\t"customerZip": "Customer Zip Code",\r\n\t\t"customerPhone": "Customer Phone #"\r\n\t},\r\n\t"agingReport": {\r\n\t\t"unexpectedError": "Sorry, something went wrong. Please try again later.",\r\n\t\t"searchPlaceholder": "Search by Item, Serial #, or UPC",\r\n\t\t"id": "ID",\r\n\t\t"item": "Item",\r\n\t\t"department": "Department",\r\n\t\t"category": "Category",\r\n\t\t"store": "Store",\r\n\t\t"serial": "Serial #",\r\n\t\t"cost": "Cost",\r\n\t\t"price": "Price",\r\n\t\t"received": "Received",\r\n\t\t"age": "Age (Days)"\r\n\t},\r\n\t"serialItemTracking": {\r\n\t\t"serialNo": "Serial Number",\r\n\t\t"submit": "Submit",\r\n\t\t"notFound": "Serial number not found",\r\n\t\t"unexpectedError": "Sorry, something went wrong. Please try again later.",\r\n\t\t"productId": "Product ID:",\r\n\t\t"productName": "Product Name:",\r\n\t\t"serialItemId": "Serial Item ID:",\r\n\t\t"action": "Action",\r\n\t\t"date": "Date",\r\n\t\t"from": "From",\r\n\t\t"to": "To",\r\n\t\t"amount": "Amount",\r\n\t\t"employee": "Employee",\r\n\t\t"receiving": "Receiving",\r\n\t\t"poReceiving": "Purchase Order Receiving",\r\n\t\t"storeTransfer": "Store Transfer",\r\n\t\t"sale": "Sale",\r\n\t\t"refund": "Refund"\r\n\t},\r\n\t"payment/types": {\r\n\t\t"Cash": "Cash",\r\n\t\t"Check": "Check",\r\n\t\t"CreditCard": "Credit Card",\r\n\t\t"GiftCertificate": "Gift Certificate",\r\n\t\t"ExternalPayment": "External Payment",\r\n\t\t"DebitCard": "Debit Card",\r\n\t\t"EbtCard": "EBT Card",\r\n\t\t"ebtCach": "EBT Cash Benefit",\r\n\t\t"ebtFood": "EBT Food Stamp"\r\n\t},\r\n\t"payment/statuses": {\r\n\t\t"pending": "Pending",\r\n\t\t"completed": "Completed",\r\n\t\t"failed": "Failed",\r\n\t\t"voided": "Voided",\r\n\t\t"refunded": "Refunded",\r\n\t\t"hold": "Hold",\r\n\t\t"declined": "Declined",\r\n\t\t"authorized": "Authorized",\r\n\t\t"cancelled": "Cancelled",\r\n\t\t"partiallyRefunded": "Partially Refunded"\r\n\t},\r\n\t"taxReport": {\r\n\t\t"totalSales": "Total Sales",\r\n\t\t"nonTaxableAmount": "Non-Taxable Amount",\r\n\t\t"taxName": "Tax Name",\r\n\t\t"taxRate": "Tax Rate",\r\n\t\t"taxableAmount": "Taxable Amount",\r\n\t\t"taxCollected": "Tax Collected",\r\n\t\t"taxAgency": "Tax Agency",\r\n\t\t"total": "Total",\r\n\t\t"taxAgency2": "Tax Agency:"\r\n\t},\r\n\t"upgrade": {\r\n\t\t"dialogTitle": "Upgrade",\r\n\t\t"wait": "Upgrade is in progress. Please wait.",\r\n\t\t"upgradeFinished": "Upgrade is complete. You can continue to use eHopper."\r\n\t},\r\n\r\n\t"taxes": {\r\n\t\t"select_tax": "Select a Tax"\r\n\t},\r\n\t"taxes/taxesList": {\r\n\t\t"taxes_list": "Tax Manager",\r\n\t\t"search_by_name_or_code": "Search for tax",\r\n\t\t"new_tax": "New Tax",\r\n\t\t"code": "Code",\r\n\t\t"name": "Name",\r\n\t\t"type": "Type",\r\n\t\t"rate_fee": "Rate",\r\n\t\t"cascade": "Cascade",\r\n\t\t"isActive": "Is Active",\r\n\t\t"isCombined": "Is Combined",\r\n\t\t"active": "Active",\r\n\t\t"inactive": "Inactive",\r\n\t\t"yes": "Yes",\r\n\t\t"no": "No",\r\n\t\t"taxAgency": "Tax Agency",\r\n\t\t"show_inactive": "Display inactive"\r\n\t},\r\n\r\n\t"taxes/taxManage": {\r\n\t\t"tax_name_must_be_unique": "Tax name must be unique.",\r\n\t\t"new_tax": "New Tax",\r\n\t\t"edit_tax": "Edit Tax",\r\n\t\t"tax_name": "Tax Name",\r\n\t\t"input_name": "Input Name",\r\n\t\t"cascade": "Cascade",\r\n\t\t"is_active": "Is Active",\r\n\t\t"tax_code": "Tax Code",\r\n\t\t"tax_type": "Tax Type",\r\n\t\t"select_tax_type": "Select \'Tax Type\'",\r\n\t\t"tax_Agency_placeholder": "Tax Agency",\r\n\t\t"tax_Agency": "Tax Agency:",\r\n\t\t"singe_tax": "Single Tax",\r\n\t\t"combined_tax": "Combined Tax",\r\n\t\t"tax_component_name": "Tax Component Name:",\r\n\t\t"tax_Agency_is_required": "\'Tax Agency\' is required",\r\n\t\t"tax_name_is_required": "\'Tax Name\' is required",\r\n\t\t"x_is_required": "\'{0}\' is required",\r\n\t\t"rate_is_required": "\'Tax Rate\' is required",\r\n\t\t"rate_should_be_less_100": "\'Tax Rate\' should be less then 100%"\r\n\t},\r\n\r\n\t"taxes/taxTypes": {\r\n\t\t"standard": "Standard",\r\n\t\t"flat": "Flat",\r\n\t\t"rate": "Tax Rate"\r\n\t},\r\n\r\n\t"taxAgenies/taxAgeniesList": {\r\n\t\t"tax_agencies_list": "Tax Agencies",\r\n\t\t"search_by_name": "Search for Tax Agency",\r\n\t\t"new_tax_agency": "New Tax Agency",\r\n\t\t"name": "Name",\r\n\t\t"isActive": "Is Active",\r\n\t\t"active": "Active",\r\n\t\t"inactive": "Inactive",\r\n\t\t"yes": "Yes",\r\n\t\t"no": "No",\r\n\t\t"are_you_sure_you_want_to_delete_selected_tax_agency": "Are you sure you want to delete the selected Tax Agency?",\r\n\t\t"are_you_sure_you_want_to_delete_selected_tax_agencies": "Are you sure you want to delete the selected tax agencies?",\r\n\t\t"the_tax_agency_has_taxes_assigned_please_delete_those_taxes_first": "The Tax Agency \'{0}\' has taxes assigned. Please delete these taxes first."\r\n\r\n\t},\r\n\r\n\t"taxAgenies/taxAgencyManage": {\r\n\t\t"input_name": "Tax Agency Name",\r\n\t\t"is_active": "Is Active",\r\n\t\t"done": "Done",\r\n\t\t"cancel": "Cancel",\r\n\t\t"new_tax_agency": "New Tax Agency",\r\n\t\t"edit_tax_agency": "Edit Tax Agency",\r\n\t\t"tax_agency_name_should_be_unique": "Tax Agency name should be unique",\r\n\t\t"such_tax_agency_exist_x": "Tax Agency with name \'{0}\' already exists"\r\n\t},\r\n\r\n\t"taxCombinedDialog": {\r\n\t\t"simple": "Single Tax",\r\n\t\t"combined": "Combined Tax",\r\n\t\t"create": "Create",\r\n\t\t"or": "Or",\r\n\t\t"simple_tax_desc": " ",\r\n\t\t"combined_tax_desc": " "\r\n\t},\r\n\t"storeTransfer": {\r\n\t\t"storeOut": "Store Out",\r\n\t\t"storeIn": "Store In",\r\n\t\t"search": "Search item by title or code",\r\n\t\t"id": "ID",\r\n\t\t"name": "Name",\r\n\t\t"upc": "UPC",\r\n\t\t"sku": "SKU",\r\n\t\t"cost": "Cost",\r\n\t\t"storeOutQuantity": "Store Out Qty",\r\n\t\t"storeInQuantity": "Store In Qty",\r\n\t\t"transferQuantity": "Transfer Qty",\r\n\t\t"transfer": "Transfer",\r\n\t\t"cancel": "Cancel",\r\n\t\t"unexpectedError": "Sorry, something went wrong. Please try again later.",\r\n\t\t"no_product_to_transfer": "No product selected for transfer",\r\n\t\t"storeTransferSuccess": "Store transfer has been completed successfully.",\r\n\t\t"storesAreEqualError": "\'Store Out\' should not be the same as \'Store In\'.",\r\n\t\t"transferQuantityError": "Quantity should be greater than {0} and less than {1}",\r\n\t\t"transferIntegerQuantityError": "Quantity should be an integer number greater than {0} and less than {1}",\r\n\t\t"storeTransferConfirmationTitle": "Store Transfer Confirmation",\r\n\t\t"storeTransferConfirmationMessage": "Are you sure you want to make this transfer?",\r\n\t\t"employee": "Employee",\r\n\t\t"all": "All",\r\n\t\t"totalQuantity": "Total Qty",\r\n\t\t"totalCost": "Total Cost",\r\n\t\t"date": "Date",\r\n\t\t"storeTransferId": "Store Transfer ID",\r\n\t\t"back": "Back",\r\n\t\t"details": "Details",\r\n\t\t"no_items_with_such_serial_in_out_store": "No items with this serial number found in \'Store Out.\'",\r\n\t\t"search_serials": "Search for serials",\r\n\t\t"search_or_select_serials": "Search or select serials",\r\n\t\t"storeTransferForbidden": "You must have at least two active stores to perfom a Store Transfer",\r\n\t\t"no_search_criteria_provided": "Search criteria was not provided",\r\n\t\t"no_items_found_to_transfer": "No items found to transfer",\r\n\t\t"invalid_transfer_quantity_for_item": "Invalid transfer quantity for item: \'{0}\'",\r\n\t\t"exportList": "Store Transfer List",\r\n\t\t"exportListWithDetails": "Include details",\r\n\t\t"showFullList": "Display list",\r\n\t\t"previous": "Previous",\r\n\t\t"next": "Next",\r\n\t\t"startSearch": "Search for individual products in search field or display the full list of products.",\r\n\t\t"delta": "Delta"\r\n\t},\r\n\r\n\t"poReceiving": {\r\n\t\t"done": "Done",\r\n\t\t"Receive": "Received",\r\n\t\t"vendor": "Vendor",\r\n\t\t"refNum": "Ref Num",\r\n\t\t"poReceivingId": "PO Receiving ID",\r\n\t\t"receivedQuantity": "Received Qty",\r\n\t\t"reason": "Reason",\r\n\t\t"receive": "Received",\r\n\t\t"poReceivingSuccess": "PO receiving has been updated successfully.",\r\n\t\t"receivedQuantityError": "Received quantity should be greater than {0} and less than {1}",\r\n\t\t"receivedIntegerQuantityError": "Received quantity should be integer number greater than {0} and less than {1}",\r\n\t\t"poReceivingConfirmationTitle": "Purchase Order Receiving",\r\n\t\t"poReceivingConfirmationMessage": "Are you sure you received this purchase order?",\r\n\t\t"serialNumberNotUnique": "Serial number must be unique.",\r\n\t\t"na": "N/A",\r\n\t\t"found": "Found",\r\n\t\t"lost": "Lost",\r\n\t\t"stolen": "Stolen",\r\n\t\t"broken": "Broken",\r\n\t\t"gift": "Gift",\r\n\t\t"reset": "Reset",\r\n\t\t"other": "Other",\r\n\t\t"showFullList": "Display list",\r\n\t\t"no_product_to_receive": "No product selected"\r\n\t},\r\n\r\n\t"inventoryAdjustment": {\r\n\t\t"done": "Done",\r\n\t\t"vendor": "Vendor",\r\n\t\t"refNum": "Ref Num",\r\n\t\t"inventoryAdjustmentId": "Inventory Adjustment ID",\r\n\t\t"adjustedQuantity": "Adjusted Qty",\r\n\t\t"reason": "Reason",\r\n\t\t"adjust": "Adjust",\r\n\t\t"inventoryAdjustmentSuccess": "Inventory adjustment has been successfully completed.",\r\n\t\t"adjustedQuantityError": "Adjusted quantity should be greater than {0} and less than {1}",\r\n\t\t"adjustedIntegerQuantityError": "Adjusted quantity should be integer number greater than {0} and less than {1}",\r\n\t\t"inventoryAdjustmentConfirmationTitle": "Inventory Adjustment",\r\n\t\t"inventoryAdjustmentConfirmationMessage": "Are you sure you want to make inventory adjustment?",\r\n\t\t"serialNumberNotUnique": "Serial number must be unique.",\r\n\t\t"na": "N/A",\r\n\t\t"found": "Found",\r\n\t\t"lost": "Lost",\r\n\t\t"stolen": "Stolen",\r\n\t\t"broken": "Broken",\r\n\t\t"gift": "Gift",\r\n\t\t"reset": "Reset",\r\n\t\t"other": "Other"\r\n\t},\r\n\r\n\t"quickbooks": {\r\n\t\t"quickbooks": "QuickBooks",\r\n\t\t"welcome": "Welcome to the QuickBooks settings page!<br>Configure your integration parameters and schedule data transfers.",\r\n\t\t"disconnect-text": "eHopper and QuickBooks Online connection has been terminated. <br>To reconnect to QuickBooks, go to App Directory and install application.",\r\n\t\t"settings_header": "QuickBooks Settings",\r\n\t\t"Quickbooks Settings not found": "QuickBooks settings not found.",\r\n\t\t"financial_settings": "Financial Settings",\r\n\t\t"payin_payout_sync": "Enable Payin/Payout Sync",\r\n\t\t"default_inventory_accounts": "Default Inventory Accounts",\r\n\t\t"cash_settings": "Payin / Payout Synchronization",\r\n\t\t"bank_deposit_account": "Bank Account:",\r\n\t\t"asset_account": "Asset Account:",\r\n\t\t"income_account": "Income Account:",\r\n\t\t"expense_account": "Expense Account:",\r\n\t\t"data_transfer": "Data Transfer",\r\n\t\t"data_sync": "Scheduled data sync",\r\n\t\t"settings": "Settings",\r\n\t\t"save": "Save",\r\n\t\t"done": "Done",\r\n\t\t"cancel": "Cancel",\r\n\t\t"sync_accounts": "Fetch QuickBooks Accounts",\r\n\t\t"sync": "Sync Now",\r\n\t\t"select_account": "Select account..",\r\n\t\t"sync_at": "at:",\r\n\t\t"sync_time": "Sync Time (UTC)",\r\n\t\t"QuickBooks Chart of Accounts": "QuickBooks Chart of Accounts:",\r\n\t\t"Inherit from Department": "Inherit from department",\r\n\t\t"Inherit from Category": "Inherit from category",\r\n\t\t"Inherit Accounts": "Inherit accounts",\r\n\t\t"settings_saved": "Settings saved!",\r\n\t\t"field_is_required": "The field is required",\r\n\t\t"settings_not_saved": "Settings are not saved. Save settings first.",\r\n\t\t"errors": "Errors",\r\n\t\t"errors_title": "QuickBooks - Sync Errors",\r\n\t\t"close": "Close",\r\n\t\t"sync_details_title": "Sync Details",\r\n\t\t"details": "Details",\r\n\t\t"sync_log": "Synchronization History",\r\n\t\t"syncedStores": "Stores",\r\n\t\t"syncedTaxes": "Taxes",\r\n\t\t"syncedTaxAgencies": "Tax Agencies",\r\n\t\t"syncedVendors": "Vendors",\r\n\t\t"syncedLobs": "Departments",\r\n\t\t"syncedCategories": "Categories",\r\n\t\t"syncedItems": "Products",\r\n\t\t"syncedAccounts": "Accounts",\r\n\t\t"syncedSales": "Sales",\r\n\t\t"syncedRefunds": "Refunds",\r\n\t\t"syncedPayins": "Payins",\r\n\t\t"syncedPayouts": "Payouts",\r\n\t\t"syncedVoids": "Voids",\r\n\t\t"payin_credit_account": "Cash Drawer Credit Account:",\r\n\t\t"payin_debit_account": "Cash Drawer Debit Account:",\r\n\t\t"In Progress": "In Progress",\r\n\t\t"Completed": "Completed",\r\n\t\t"Failed": "Failed",\r\n\t\t"Cancelled": "Canceled",\r\n\t\t"Unknown": "Unknown",\r\n\t\t"syncedEntities": "Synchronized Entities",\r\n\t\t"date": "Date",\r\n\t\t"status": "Status",\r\n\t\t"messages": "Messages",\r\n\t\t"token_is_expired_title": "Authentication Error",\r\n\t\t"token_is_expired": "Login token expired, please reconnect to QuickBooks.",\r\n\t\t"reconnect": "Reconnect",\r\n\t\t"sync_finished": "Syncronization is finished",\r\n\t\t"error_occured": "Error occured",\r\n\t\t"synced_accounts": "{0} accounts were synced",\r\n\t\t"synced_account": "{0} account was synced",\r\n\t\t"syncInProgress": "Synchronization with QuickBooks is in progress. Please wait..."\r\n\t},\r\n\r\n\t"accountEdit": {\r\n\t\t"addStore": "Add Store",\r\n\t\t"addRegister": "Add Register",\r\n\t\t"enableStore": "Enable Store",\r\n\t\t"disableStore": "Disable Store",\r\n\t\t"enableRegister": "Enable Register",\r\n\t\t"disableRegister": "Disable Register"\r\n\t},\r\n\t"multiselect": {\r\n\t\t"no_matches": "No matches found",\r\n\t\t"enter_value": "Enter a value",\r\n\t\t"select_all": "Select All",\r\n\t\t"disableStore": "Disable Store",\r\n\t\t"enableRegister": "Enable Register",\r\n\t\t"disableRegister": "Disable Register"\r\n\t},\r\n\r\n\t"demo": {\r\n\t\t"quickStart": "Get Started with Ehopper POS",\r\n\t\t"quickStartSubheading": "Freedom Plan Demo",\r\n\t\t"quickStartDescription": "New to eHopper POS? Select one of the demos below to test drive all features available on eHopper under the Freedom plan.",\r\n\t\t"select": "Select",\r\n\t\t"freshStart": "Fresh Start",\r\n\t\t"freshStartDescription": "Use this option if you are ready to use the product right away and don’t want any demos or sample data.",\r\n\t\t"skipDemo": "Skip Demo",\r\n\t\t"skipDemoConfirmation": "If you select this option you will not be able to try demos later.",\r\n\t\t"demoActive": "{0} Demo Mode",\r\n\t\t"demoDescription": "To go live, select either the Freedom or Essential plan below.",\r\n\t\t"essentialPlan": "Essential Plan",\r\n\t\t"essentialPlanConfirmation": "Note: all sample data will be deleted and your account will be downgraded to the Essential&nbsp;Plan.",\r\n\t\t"freedomPlan": "Freedom Plan",\r\n\t\t"freedomPlanConfirmation": "Note: all sample data will be deleted. You will be redirected to our website to pay for the Freedom plan via credit/debit card.",\r\n\t\t"cleanupTitle": "Cleanup",\r\n\t\t"cleanupMessage": "All data from your sample dataset will be deleted."\r\n\t},\r\n\t"supportAccess": {\r\n\t\t"text": "To allow eHopper Customer Support access to your account, create a temporary password below by selecting “Generate Password” button.",\r\n\t\t"button": "Generate Password",\r\n\t\t"please": "Please provide this data to customer support for temporary access: ",\r\n\t\t"accId": "Account ID: ",\r\n\t\t"email": "Email: ",\r\n\t\t"tempPass": "Temporary Password: ",\r\n\t\t"loginTime": "Remaining time left until expiration of password: ",\r\n\t\t"minutes": " minute(s) "\r\n\r\n\t}\r\n}';});


define('text!lang/es.html',[],function () { return '{\r\n\t"meta": {\r\n\t\t"language": "España",\r\n\t\t"code": "es"\r\n\t},\r\n\t"messages": {\r\n\t\t"Bad Request": "Pedido incorrecto",\r\n\t\t"Entity of type \'{0}\' not found by id \'{1}\'": "Persona jurídica tipo \'{0}\' no encontrada por ID \'{1}\'.",\r\n\t\t"User \'{0}\' not found": "Usuario \'{0}\' no encontrado.",\r\n\t\t"User not found": "Usuario no encontrado",\r\n\t\t"Employee not found": "Empleado no encontrado",\r\n\t\t"Transaction not found": "Transacción no encontrada",\r\n\t\t"Employee \'employeeId={0}\' not found": "Empleado \'ID del empleado={0}\' no encontrado.",\r\n\t\t"Transaction \'transactionId={0}\' not found": "Transacción \'ID Transaciones={0}\' no encontrada.",\r\n\t\t"mustFreedomPlan": "Debe ser un cliente de un <b>Plan libre</b> para usar esta función.",\r\n\t\t"pleaseContactUs": "Póngase en contacto con nosotros para una actualización."\r\n\t},\r\n\t"datatable": {\r\n\t\t"EmptyTable": "No hay datos disponibles en la tabla",\r\n\t\t"Info": "Mostrar entradas de _PRINCIPIO_ a _FIN_ del _TOTAL_",\r\n\t\t"InfoEmpty": "Mostrar 0 a 0 de 0 entradas",\r\n\t\t"InfoFiltered": "(filtradas de _Total_MÁX de entradas)",\r\n\t\t"InfoPostFix": "",\r\n\t\t"InfoThousands": "",\r\n\t\t"LengthMenu": "Mostrar_entradas_de MENÚ",\r\n\t\t"LoadingRecords": "Cargando…",\r\n\t\t"Processing": "Procesando…",\r\n\t\t"Search": "Buscar",\r\n\t\t"ZeroRecords": "No se encontraron registros correspondientes",\r\n\t\t"Paginate_First": "Primero",\r\n\t\t"Paginate_Last": "Último",\r\n\t\t"Paginate_Next": "Siguiente",\r\n\t\t"Paginate_Previous": "Anterior",\r\n\t\t"Aria_SortAscending": "",\r\n\t\t"Aria_SortDescending": ""\r\n\t},\r\n\t"import": {\r\n\t\t"Invalid file type": "Tipo de archivo inválido",\r\n\t\t"File is too big message": "Archivo demasiado grande. Tamaño máximo {0} Mb. Divida el archivo en varios archivos más pequeños y súbalos por separado."\r\n\t},\r\n\t"header": {},\r\n\t"login": {\r\n\t\t"back_office": "Back-office",\r\n\t\t"you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked": "Ha superado el número de inicios de sesión.  Back-office de su cuenta está bloqueado.",\r\n\t\t"invalid_login_or_password": "Clave o usuario inválido",\r\n\t\t"invalid_pin": "PIN inválido",\r\n\t\t"you_are_not_authorized_to_login": "No está autorizado para iniciar sesión.",\r\n\t\t"version_": "Versión:",\r\n\t\t"termsAndConditionsTitle": "Términos y condiciones",\r\n\t\t"termsAndConditionsButton": "Enviar",\r\n\t\t"termsAndConditionsAgree": " Estoy de acuerdo con los términos y condiciones"\r\n\t},\r\n\t"account": {\r\n\t\t"back_office": "Back Office",\r\n\t\t"account_id": "ID de cuenta",\r\n\t\t"continue": "Continuar",\r\n\t\t"account_is_required": "Se requiere una cuenta de eHopper.",\r\n\t\t"account_is_invalid": "La cuenta no es válida."\r\n\t},\r\n\t"navigationpanel": {},\r\n\t"apps": {\r\n\t\t"installedApps": "Aplicaciones instaladas",\r\n\t\t"apps": "Aplicaciones",\r\n\t\t"recommendedForYou": "Recomendado para usted",\r\n\t\t"freedomPackage": "Freedom Package",\r\n\t\t"freedomPlanOnly": "Solo Freedom Plan",\r\n\t\t"freeTrial": "Prueba gratuita disponible",\r\n\t\t"eHopper": "por eHopper",\r\n\t\t"install": "Instalar",\r\n\t\t"uninstall": "Desinstalar"\r\n\r\n\t},\r\n\t"apps/marketingAndLoyalty": {\r\n\t\t"name": "Marketing & Loyalty",\r\n\t\t"company": "por Marketing Box",\r\n\t\t"packageName": "De $29/al mes",\r\n\t\t"useTheLoyalty": "La aplicación Marketing & Loyalty ayuda a establecer comunicaciones únicas e interactivas con clientes. Puede crear un club móvil y construir una base de datos de suscripciones voluntarias de clientes para promociones de marketing por medio de mensajes de texto.",\r\n\t\t"features": "Características",\r\n\t\t"listItem1": "Suscripciones voluntarias, registros y reembolsos de cupones GRATIS",\r\n\t\t"listItem2": "Posibilidad de enviar mensajes de texto sobre ofertas especiales y promociones a clientes",\r\n\t\t"listItem3": "Proporciona enlaces a sitios web para móviles o descargas de aplicaciones personalizadas",\r\n\t\t"listItem4": "Envío de solicitudes de Facebook directamente desde su quiosco",\r\n\t\t"listItem5": "Envío de pedidos de cupones de fidelidad digitales que se pueden rastrear con facilidad",\r\n\t\t"listItem6": "Acceso a software de marketing móvil con funciones adicionales",\r\n\t\t"listItem7": "Herramientas completas de gestión e informes que emplean software basado en la web",\r\n\t\t"listItem8": "Elimina las tarjetas perforadas, que a menudo se pierden, se traspapelan o se olvidan",\r\n\t\t"marketingPackageStarter": "Para iniciar un monto de $29/al mes",\r\n\t\t"marketingPackageGrow": "Para incrementar $49/al mes"\r\n\t},\r\n\t"apps/clickInClockOut": {\r\n\t\t"name": "Registro de entrada/Registro de salida",\r\n\t\t"listItem1": "Esta aplicación está disponible solamente para usuarios de Freedom Plan.",\r\n\t\t"listItem2": "Esta aplicación permitirá a sus empleados registrar entradas y salidas, y además permitirá a los gerentes supervisar sus turnos de trabajo en Back Office. Los empleados pueden registrar entradas y salidas en la caja a fin de asentar los horarios de inicio y fin de sus turnos.",\r\n\t\t"listItem3": "Cuando un empleado registra su entrada y utiliza eHopper, su información y su actividad se sincronizan automáticamente con Back Office."\r\n\t},\r\n\t"apps/controlNumber": {\r\n\t\t"name": "Nro. de control para Puerto Rico",\r\n\t\t"theControlNumberApp": "La aplicación Control Number está diseñada para vendedores, fabricantes, distribuidores o empresas con Punto de venta (POS, por sus siglas en inglés) y con Caja registradora electrónica (ECR, por sus siglas en inglés) que buscan un método constante para cumplir con las leyes y reglamentos tributarios de Puerto Rico.",\r\n\t\t"toBeginIntegration": "Para integrar con su Número de control de Puerto Rico:",\r\n\t\t"setupYourStoreLocation": "Establezca la(s) ubicación(es) de su tienda:",\r\n\t\t"setPuertoRico": "Establezca Puerto Rico como el país de la tienda en Configuraciones de tienda.",\r\n\t\t"setupYourCityAndStateTaxes": "Establezca su ciudad e impuestos estatales:",\r\n\t\t"youMustSetupTwoTaxes": "Debe establecer dos impuestos para la(s) tienda(s). El primer impuesto debe tener el código impositivo \\"STATE_TAX\\", mientras que el segundo impuesto debe tener el código impositivo \\"CITY_TAX\\".",\r\n\t\t"note": "Nota:",\r\n\t\t"youCannotSetup": "No puede configurar más de dos impuestos para una tienda en Puerto Rico; de lo contrario, no recibirá un número de control para los pedidos realizados.",\r\n\t\t"setupYourPRFiscalService": "Establezca su token de acceso al servicio fiscal de PR:",\r\n\t\t"assignTheToken": "Asigne el token a una caja en Configuraciones de caja.",\r\n\t\t"toGetAdditionalTokens": "Para recibir tokens adicionales, contáctese con bcfiscal@bcposgroup.com para obtener más información.",\r\n\t\t"CityTax": "City Tax",\r\n\t\t"StateTax": "State Tax",\r\n\t\t"puertoRico-tax": "Puerto Rico Tax"\r\n\t},\r\n\t"apps/orderReceiving": {\r\n\t\t"name": "Purchase Order Receiving",\r\n\t\t"intro": "Con la aplicación Purchase Order Receiving, puede realizar pedidos y recibir productos de un proveedor con facilidad.",\r\n\t\t"toProcess": "Para procesar Purchase Order Receiving:",\r\n\t\t"toDo1": "Seleccionar proveedor",\r\n\t\t"toDo2": "Seleccione Store Receiver (Receptor de tienda)",\r\n\t\t"toDo3": "Defina los productos y las cantidades que requiere.",\r\n\t\t"logInfo": "El registro de sus pedidos procesados se encuentra disponible en el Informe de Purchase Order Receiving."\r\n\t},\r\n\t"apps/storeTransfer": {\r\n\t\t"name": "Store Transfer",\r\n\t\t"intro": "Con la aplicación Store Transfer, puede mover fácilmente los productos del inventario de una tienda a otra.",\r\n\t\t"toProcess": "Para procesar una transferencia:",\r\n\t\t"toDo1": "Seleccione Store Sender (Emisor de tienda)",\r\n\t\t"toDo2": "Seleccione Store Receiver (Receptor de tienda)",\r\n\t\t"toDo3": "Defina los productos y las cantidades que desea transferir.",\r\n\t\t"logInfo": "El registro de sus transferencias estará disponible en el Informe de Store Transfers."\r\n\t},\r\n\t"apps/creditDebitCard": {\r\n\t\t"name": "Integración con POS de crédito/débito",\r\n\t\t"acceptAnyType": "Le permite tener un punto de venta, servicio y centro de comunicación centralizado que proporciona operaciones más eficientes, transacciones más sencillas y rápidas, y mantiene todos los datos almacenados y con un fácil acceso.",\r\n\t\t"keyBenefits": "Los beneficios clave incluyen:",\r\n\t\t"listItem1": "Use eHopper Partner Merchant Services, o sus propios servicios comerciales",\r\n\t\t"listItem2": "Integración completa con eHopper POS",\r\n\t\t"listItem3": "Acepta cualquier tipo de pago en la caja de cualquier tienda",\r\n\t\t"listItem4": "Admite chip EMV, banda magnética y NFC",\r\n\t\t"listItem5": "Simplifica las transacciones y acelera los tiempos de salida para ofrecer un mejor servicio al cliente",\r\n\t\t"listItem6": "Más empresas y clientes satisfechos."\r\n\t},\r\n\t"apps/updateOrderOnAnyRegister": {\r\n\t\t"name": "Multi-Register",\r\n\t\t"withTheMulti": "Mediante la aplicación Multi Register, los empleados pueden actualizar pedidos de cualquier caja en su tienda.",\r\n\t\t"specifically": "Puede llevar a cabo lo siguiente en cualquier pedido:",\r\n\t\t"list1Item1": "Pagar pedido",\r\n\t\t"list1Item2": "Actualizar pedido",\r\n\t\t"list1Item3": "Guardar pedido",\r\n\t\t"list1Item4": "Reembolsar pedido",\r\n\t\t"list1Item5": "Anular pedido",\r\n\t\t"list1Item6": "Actualizar estado de ejecución",\r\n\t\t"list1Item7": "Añadir propinas",\r\n\t\t"list1Item8": "Visualizar contenido/estado de pedido",\r\n\t\t"andWhenStore": "Al utilizar esta aplicación, se restringirán las siguientes acciones:",\r\n\t\t"list2Item1": "Pago de pedidos guardados",\r\n\t\t"list2Item2": "Actualización de pedidos",\r\n\t\t"list2Item3": "Reembolso de pedidos",\r\n\t\t"list2Item4": "Anulación de pedidos",\r\n\t\t"list2Item5": "Actualización de ejecución de pedido",\r\n\t\t"list2Item6": "Reimpresión de factura/recibo para pedidos",\r\n\t\t"installAndUninstall": "Notas",\r\n\t\t"note1": "La caja se debe realizar en modo en línea.",\r\n\t\t"note2": "NO sincronizar ninguna caja antes o durante la instalación.",\r\n\t\t"note3": "No acceda a ninguna función de pedidos hasta que se hayan sincronizado todos los registros."\r\n\t},\r\n\r\n\t"apps/variants": {\r\n\t\t"name": "Matriz de inventario",\r\n\t\t"description": "Use la Matriz de inventario para crear productos que tengan múltiples atributos. Por ejemplo, una camisa se puede definir por estilo, color o tamaño. Cada combinación de atributos es única, tiene su propio SKU y puede tener su propio precio.",\r\n\t\t"feature1": "Ayuda a organizar grandes inventarios y agiliza la gestión de existencias",\r\n\t\t"feature2": "Los gerentes y operadores de Back Office pueden establecer las variantes con rapidez",\r\n\t\t"feature3": "Seguimiento de ventas por medio de informes"\r\n\t},\r\n\r\n\t"apps/productTax": {\r\n\t\t"name": "Product Tax Assignment",\r\n\t\t"description": "Con la aplicación Product Tax Assignment, puede configurar y supervisar impuestos individuales que se aplican a artículos específicos en su inventario. Esto anulará la tasa impositiva predeterminada que se establece para su empresa. Esta aplicación facilita en gran medida el procesamiento de transacciones con elementos que requieren una tasa impositiva diferente sin tener que cambiar ninguna configuración impositiva predeterminada en Back Office.",\r\n\t\t"feature1": "Configuración de tasas impositivas individuales para cualquier artículo en su inventario.",\r\n\t\t"feature2": "Brinda mayor flexibilidad y facilidad al vender artículos que requieren diferentes tasas impositivas",\r\n\t\t"feature3": "Fácil configuración y supervisión por medio de Back Office"\r\n\t},\r\n\r\n\t"apps/quickbooks": {\r\n\t\t"name": "QuickBooks",\r\n\t\t"description": "Mantenga eHopper POS y QuickBooks en línea en forma sincronizada. Importe sus transacciones de venta, gastos, inventario y más en forma automática",\r\n\t\t"features": "Características",\r\n\t\t"feature1": "Importación de transacciones de venta, incluidos impuestos",\r\n\t\t"feature2": "Importe gastos como importes recibidos/importes entregados, reembolsos y más",\r\n\t\t"feature3": "Sincronización de los gráficos de su cuenta",\r\n\t\t"feature4": "Capacidad de múltiples ubicaciones",\r\n\t\t"note1": "IMPORTANTE: La integración de QuickBooks está actualmente disponible solo con una sola línea de impuestos. La posibilidad de agregar varias líneas de impuestos estará disponible próximamente."\r\n\t},\r\n\r\n\t"apps/orderFulfilment": {\r\n\t\t"name": "Administración de pedidos",\r\n\t\t"description": "La característica Administración de pedidos le permite organizar, editar y supervisar toda la actividad del pedido dentro de su negocio. Con esta función, podrá supervisar todos y cada uno de los pedidos desde la creación hasta su finalización.",\r\n\t\t"feature1": "Administración del estado del pedido: Nuevo, en preparación, en ejecución, ejecutado",\r\n\t\t"feature2": "Búsqueda de pedidos específicos al instante para consultar y verificar el historial del cliente",\r\n\t\t"feature3": "Seguimiento de otra información tal como propinas entregadas y pago utilizado, y empleo de números de referencia para facilitar la búsqueda"\r\n\t},\r\n\r\n\t"apps/menuBuilder": {\r\n\t\t"name": "Generador de menús",\r\n\t\t"inventory_btn": "Generador de menús",\r\n\t\t"description": "Crea menús para categorías y artículos.",\r\n\t\t"drop_to_remove": "Desplegar productos aquí para eliminar",\r\n\t\t"drop_item_here": "Desplegar artículo aquí",\r\n\t\t"btn_save": "Guardar",\r\n\t\t"btn_cancel": "Cancelar",\r\n\t\t"sortNone": "Ninguno",\r\n\t\t"sortName": "Nombre",\r\n\t\t"sortNameDesc": "Descenso de nombre",\r\n\t\t"sortPrice": "Precio",\r\n\t\t"sortPriceDesc": "Descenso de precio",\r\n\t\t"sortCreationDate": "Fecha de creación",\r\n\t\t"sortCreationDateDesc": "Descenso de fecha de creación",\r\n\t\t"other": "Otro",\r\n\t\t"labelArrange": "los artículos en esta categoría se organizarán en forma automática",\r\n\t\t"unexpectedError": "Lo sentimos, algo salió mal. Inténtelo de nuevo más tarde."\r\n\t},\r\n\t"shell": {\r\n\t\t"apps": "Aplicaciones",\r\n\t\t"appDirectory": "Aplicación Directorio",\r\n\t\t"account": "Seleccione Cuenta",\r\n\t\t"login": "Inicio de sesión",\r\n\t\t"dashboard": "Mostrador",\r\n\t\t"orders": "Pedidos",\r\n\t\t"order_details": "Detalles del pedido",\r\n\t\t"inventory": "Inventario",\r\n\t\t"products": "Productos",\r\n\t\t"product": "Producto",\r\n\t\t"import_inventory": "Importación de inventario",\r\n\t\t"departments": "Departamentos",\r\n\t\t"department": "Departamento",\r\n\t\t"categories": "Categorías",\r\n\t\t"category": "Categoría",\r\n\t\t"modifiers": "Modificadores",\r\n\t\t"modifier": "Modificador",\r\n\t\t"storeTransfer": "Transferencia de la tienda",\r\n\t\t"poReceiving": "Recepción de PO",\r\n\t\t"adjustment": "Ajuste de inventario",\r\n\t\t"customers": "Clientes",\r\n\t\t"import_customers": "Importar clientes",\r\n\t\t"vendor_list": "Lista de proveedores",\r\n\t\t"manage_vendor": "Gestión de proveedores",\r\n\t\t"vendors": "Proveedores",\r\n\t\t"employees": "Empleados",\r\n\t\t"employee_list": "Lista de empleados",\r\n\t\t"manage_employee": "Gestión de empleados",\r\n\t\t"reporting": "Informes",\r\n\t\t"tips_report": "Propinas",\r\n\t\t"z_report": "Informe Z",\r\n\t\t"z_report_details": "Detalles de informe Z",\r\n\t\t"settings": "Ajustes",\r\n\t\t"store_settings": "Ajustes de la tienda",\r\n\t\t"enterprise_settings": "Ajustes de la compañía",\r\n\t\t"register_settings": "Ajustes de la caja",\r\n\t\t"manage_register_settings": "Gestión de ajustes de la caja",\r\n\t\t"new_register": "Nueva caja",\r\n\t\t"tender_settings": "Ajustes del pago",\r\n\t\t"tax_manager": "Administrador de impuestos",\r\n\t\t"manage_taxes": "Nuevo/Editar impuesto",\r\n\t\t"help": "Ayuda",\r\n\t\t"logout": "Cerrar sesión",\r\n\t\t"product_mix_report": "Mezcla de Productos",\r\n\t\t"taxReport": "Reporte de impuestos",\r\n\t\t"transactionsReport": "Transactions Report",\r\n\t\t"agingReport": "Antigüedad del inventario",\r\n\t\t"serialItemTracking": "Informe de seguimiento de artículo en serie",\r\n\t\t"storeTransfersReport": "Informe de transferencias de la tienda",\r\n\t\t"storeTransfersDetails": "Detalles de la transferencia de la tienda",\r\n\t\t"poReceivingReport": "Informe de recepción de PO",\r\n\t\t"poReceivingDetails": "Detalles de la recepción de PO",\r\n\t\t"exportReport": "Exportar",\r\n\t\t"quickbooks": "QuickBooks en línea",\r\n\t\t"quickbooks-disconnect": "Desconectarse de QuickBooks Online",\r\n\t\t"menuBuilder": "Generador de menús",\r\n\t\t"clockIn": "Reloj de registro de horas",\r\n\t\t"unsupportedBrowser": "Navegador no admitido.",\r\n\t\t"taxAgenciesList": "Agencias tributarias",\r\n\t\t"manage_taxAgencies": "Administrar agencia tributaria"\r\n\t},\r\n\t"unsupported": {\r\n\t\t"browser": "No se admite su navegador de Internet.",\r\n\t\t"latestVersion": "Use la última versión de Google Chrome para Windows 7-10 o Android 4.4.2+",\r\n\t\t"yourVersion": "Actualmente está usando {0}&nbsp;{1} en {2}&nbsp;{3}.",\r\n\t\t"qb_latestVersion": "Para acceder a todas las funciones, use la última versión de Google Chrome para Windows 7-10 o Android 4.4.2+.",\r\n\t\t"qb_yourVersion": "Actualmente está usando {0}&nbsp;{1} en {2}&nbsp;{3} que le permite administrar la aplicación QuickBooks."\r\n\t},\r\n\t"categories/categoriesList": {\r\n\t\t"new_category": "Nueva categoría",\r\n\t\t"toggle_dropdown": "Menú desplegable",\r\n\t\t"new_department": "Nuevo departamento",\r\n\t\t"new_item": "Nuevo artículo",\r\n\t\t"new_modifier": "Nuevo modificador",\r\n\t\t"category_name": "Nombre de la categoría",\r\n\t\t"department_name": "Nombre del departamento",\r\n\t\t"status": "Estatus",\r\n\t\t"search_for_category": "Búsqueda de categoría",\r\n\t\t"are_you_sure_you_want_to_delete_selected_category": "¿Está seguro de que desea borrar la categoría seleccionada?",\r\n\t\t"are_you_sure_you_want_to_delete_selected_categories": "¿Está seguro de que desea borrar las categorías seleccionadas?",\r\n\t\t"the_category_has_products_assigned_please_delete_those_products_first": "La categoría \'{0}\' contiene productos asignados. Primero elimine estos productos.",\r\n\t\t"the_category_": "Categoría",\r\n\t\t"active": "Activa",\r\n\t\t"inactive": "No activa"\r\n\t},\r\n\t"categories/categoryManage": {\r\n\t\t"category_name": "Nombre de la categoría",\r\n\t\t"category_short_name": "Nombre abreviado de la categoría",\r\n\t\t"category_description": "Descripcion de la categoria",\r\n\t\t"department": "Departamento",\r\n\t\t"select_department": "Seleccionar Departamento...",\r\n\t\t"is_active": "Está activa",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"input_name": "Introduzca el nombre",\r\n\t\t"input_short_name": "Introducir abreviación de categoría",\r\n\t\t"input_description": "Introduzca la descripción",\r\n\t\t"new_category": "Nueva categoría",\r\n\t\t"edit_category": "Editar categoría",\r\n\t\t"category_name_must_be_unique": "El nombre de la categoría debe ser único.",\r\n\t\t"the_category_has_products_assigned_please_delete_those_products_first": "La categoría tiene productos asignados. Primero elimine estos productos.",\r\n\t\t"general": "General",\r\n\t\t"localization": "Localización",\r\n\t\t"select_color": "Seleccionar color",\r\n\t\t"color": "Color"\r\n\t},\r\n\t"categories/categoryManageNew": {\r\n\t\t"category_name": "Nombre de la categoría",\r\n\t\t"category_description": "Descripción de la categoría",\r\n\t\t"department": "Departamento",\r\n\t\t"is_active": "Está activa",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"input_name": "Introduzca el nombre",\r\n\t\t"new_category": "Nueva categoría",\r\n\t\t"category_name_must_be_unique": "El nombre de la categoría debe ser único."\r\n\t},\r\n\t"customers/importCustomers": {\r\n\t\t"file_to_import": "Archivo para importar",\r\n\t\t"browse_csv_file": "Buscar archivo *.csv",\r\n\t\t"browse": "Buscar",\r\n\t\t"uploading": "Subiendo",\r\n\t\t"importing": "Importando",\r\n\t\t"done": "LISTO",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"file_is_too_big_max_size_is_{0}_mb_please_split_it_to_smaller_files_and_update_them_individually": "Archivo demasiado grande. Tamaño máximo  {0} Mb. Divida el archivo en varios archivos más pequeños e impórtelos por separado.",\r\n\t\t"file_is_too_big_max_size_is_mb_please_split_it_to_smaller_files_and_update_them_individually": "Archivo demasiado grande. Tamaño máximo {0} Mb. Divida el archivo en varios archivos más pequeños e impórtelos por separado.",\r\n\t\t"the_error_was_detected_in_line_while_import_no_customers_were_imported_please_fix_problem_and_repeat_import": "Error detectado en línea {0} al importar. No se importaron clientes. Resuelva el problema y vuelva a repetir la operación. {1}",\r\n\t\t"error_importing_": "Error de importación",\r\n\t\t"processing": "Procesamiento...",\r\n\t\t"abort": "Interrumpir",\r\n\t\t"file_upload_failed_": "Error al descargar el archivo.",\r\n\t\t"imported_lines": "Importado  {0} líneas.",\r\n\t\t"error_in_file_format_error_line_message_": "Error del formato del archivo. Error en la línea #",\r\n\t\t"Number of columns in line {0} is less then expected": "El número de columnas en la línea  {0} es menor que el que se esperaba. El número de columnas esperado es",\r\n\t\t"Number of columns in line {0} is more then expected": "El número de columnas en la línea {0} es mayor que el que se esperaba. El número de columnas esperado es",\r\n\t\t"Invalid format of \'CustomerId\'": "Formato inválido de ‘ID del cliente’",\r\n\t\t"Field \'{0}\' is required": "Campo \'{0}\' obligatorio",\r\n\t\t"Field \'{0}\' has length greater than {1}": "El campo \'{0}\' es más largo que {1}.",\r\n\t\t"Phone format \'{0}\' is invalid": "Formato de teléfono ‘{0}’ incorrecto.",\r\n\t\t"Email format \'{0}\' is invalid": "Formato de correo electrónico ‘{0}’ incorrecto.",\r\n\t\t"Zip format \'{0}\' is invalid": "Formato de código postal ‘{0}’ incorrecto.",\r\n\t\t"Zip should be less than 11 symbols": "El código postal debe tener menos de 11 símbolos: \'{0}\'.",\r\n\t\t"State format \'{0}\' is invalid": "Formato de estado  ‘{0}’ incorrecto.",\r\n\t\t"Invalid country code: \'{0}\'": "Código de país inválido: \'{0}\'",\r\n\t\t"Unexpected Import Error": "Error de importación imprevisto.",\r\n\t\t"Unexpected Import Error2": "Error de importación imprevisto",\r\n\t\t"Import was completed successfully": "Importación realizada con éxito.",\r\n\t\t"Customers import is already running": "Ya se inició la importación de clientes."\r\n\t},\r\n\t"dashboard/dashboard": {\r\n\t\t"today": "Hoy",\r\n\t\t"yesterday": "Ayer",\r\n\t\t"this_week": "Esta semana",\r\n\t\t"month-to-date": "Mes a la fecha",\r\n\t\t"version_": "Versión",\r\n\t\t"noteMessageNotFound": "(no se encontró mensaje de nota)"\r\n\t},\r\n\t"dashboard/widgets/goLive": {\r\n\t\t"go_live_date_is_in_x_days": "La fecha de iniciación es dentro de  {0} dias - {1}"\r\n\t},\r\n\t"dashboard/widgets/salesTransactions": {\r\n\t\t"total_sales_by_category": "Importe total de ventas por categoría",\r\n\t\t"statistic": "Estadística",\r\n\t\t"no_data_available_for_selected_period": "No hay datos para el período seleccionado",\r\n\t\t"total_sales": "Importe total de ventas"\r\n\t},\r\n\t"dashboard/widgets/stats": {\r\n\t\t"new_customers": "Nuevos clientes",\r\n\t\t"repeat_customers": "Clientes habituales",\r\n\t\t"total_sales": "Importe total de ventas",\r\n\t\t"total_transactions": "Total de transacciones"\r\n\t},\r\n\t"dashboard/widgets/support": {\r\n\t\t"support_team": "Equipo de apoyo",\r\n\t\t"email_me": "Enviarme correo electrónico",\r\n\t\t"the_subject_of_the_mail": "Asunto del correo electrónico",\r\n\t\t"hide": "Ocultar",\r\n\t\t"show": "Mostrar",\r\n\t\t"accountId": "ID de cuenta:",\r\n\t\t"webPosUrl": "URL de POS web:",\r\n\t\t"onlineHelp": "Ayuda en línea:",\r\n\t\t"knowledgeBase": "Base de conocimiento"\r\n\t},\r\n\t"dashboard/widgets/tasks": {\r\n\t\t"getting_started": "Inicio",\r\n\t\t"my_custom_task": "Mi tareas estándar",\r\n\t\t"you_have_created_50_tasks_which_is_a_limit_delete_some_old_tasks_to_create_a_new_one": "Ha creado 50 tareas y alcanzó el límite. Elimine tareas viejas para crear nuevas."\r\n\t},\r\n\t"departments/departmentManage": {\r\n\t\t"department_name": "Nombre del departamento",\r\n\t\t"department_description": "Descripción del departamento",\r\n\t\t"is_active": "Está activa",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"input_name": "Introduzca el nombre",\r\n\t\t"input_description": "",\r\n\t\t"new_department": "Nuevo departamento",\r\n\t\t"edit_department": "Editar departamento",\r\n\t\t"department_name_must_be_unique": "El nombre del departamento debe ser único.",\r\n\t\t"the_department_has_categories_assigned_please_delete_those_categories_first": "El departamento tiene categorías asignadas. Primero elimine esas categorías.",\r\n\t\t"failed_to_save_department": "No se ha podido guardar el departamento."\r\n\t},\r\n\t"departments/departmentsList": {\r\n\t\t"new_department": "Nuevo departamento",\r\n\t\t"toggle_dropdown": "Menú desplegable",\r\n\t\t"new_category": "Nueva categoría",\r\n\t\t"new_item": "Nuevo artículo",\r\n\t\t"new_modifier": "Nuevo modificador",\r\n\t\t"department_name": "Nombre del departamento",\r\n\t\t"status": "Estatus",\r\n\t\t"search_for_department": "Búsqueda del departamento",\r\n\t\t"are_you_sure_you_want_to_delete_selected_department": "¿Está seguro de que desea eliminar el departamento seleccionado?",\r\n\t\t"are_you_sure_you_want_to_delete_selected_departments": "¿Está seguro de que desea eliminar los departamentos seleccionados?",\r\n\t\t"the_department_has_categories_assigned_please_delete_those_categories_first": "E departamento ‘{0}’ contiene categorías asignadas. Primero elimine esas categorías.",\r\n\t\t"the_department_": "Departamento",\r\n\t\t"active": "Activa",\r\n\t\t"inactive": "No activa"\r\n\t},\r\n\t"employees/employeeManage": {\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"new_employee": "Nuevo empleado",\r\n\t\t"edit_employee": "Editar empleado",\r\n\t\t"general": "General",\r\n\t\t"contact_info": "Información de contacto",\r\n\t\t"localization": "Localización",\r\n\t\t"userPinExists": "El usuario con este pin ya existe.",\r\n\t\t"employeeExists": "Ya existe un empleado con el mismo apellido, nombre, correo electrónico y teléfono.",\r\n\t\t"should_be_equal_to_pin": "El campo debe ser igual al PIN"\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\t"employees/employeesList": {\r\n\t\t"first_name": "Nombre",\r\n\t\t"last_name": "Apellido",\r\n\t\t"email": "Correo electrónico",\r\n\t\t"phone": "Teléfono",\r\n\t\t"role": "Función",\r\n\t\t"status": "Estatus",\r\n\t\t"new_employee": "Nuevo empleado",\r\n\t\t"search_for_employee": "Búsqueda de empleado",\r\n\t\t"active": "Activa",\r\n\t\t"inactive": "No activa",\r\n\t\t"allStores": "Todas las tiendas",\r\n\t\t"stores": " Tienda(s))",\r\n\t\t"store": " Tienda"\r\n\t},\r\n\t"employees/manage-tabs/contactTab": {\r\n\t\t"email": "Correo electrónico",\r\n\t\t"phone": "Teléfono",\r\n\t\t"address": "Dirección",\r\n\t\t"country": "País",\r\n\t\t"state": "Estado",\r\n\t\t"city": "Ciudad",\r\n\t\t"zip": "Código postal",\r\n\t\t"choose_country": "Seleccionar país...",\r\n\t\t"choose_state": "Seleccionar estado..."\r\n\t},\r\n\t"employees/manage-tabs/generalTab": {\r\n\t\t"first_name": "Nombre",\r\n\t\t"last_name": "Apellido",\r\n\t\t"language": "Idioma",\r\n\t\t"pin": "PIN",\r\n\t\t"confirm_pin": "Confirmar PIN",\r\n\t\t"password": "Contraseña",\r\n\t\t"confirm_password": "Confirmar contraseña",\r\n\t\t"role": "Función",\r\n\t\t"is_active": "Activa",\r\n\t\t"select_role": "Seleccionar función…",\r\n\t\t"stores": "Tiendas:",\r\n\t\t"assignedOnly": "Solo designados",\r\n\t\t"searchStore": "Búsqueda de tienda(s) elegida(s)",\r\n\t\t"selectStore": "Seleccionar tienda(s)"\r\n\t},\r\n\t"employees/manage-tabs/localizationTab": {\r\n\t\t"pos_language": "Idioma POS",\r\n\t\t"bo_language": "Idioma BO",\r\n\t\t"select_pos_language": "Seleccionar Idioma POS...",\r\n\t\t"select_bo_language": "Seleccionar Idioma de Back-office...",\r\n\t\t"same_as_pos_language": "Mismo idioma que POS",\r\n\r\n\t\t"administrator": "Administrador",\r\n\t\t"backOfficeOperator": "Operador de Back Office",\r\n\t\t"salesManager": "Gerente de ventas",\r\n\t\t"salesPerson": "Vendedor"\r\n\t},\r\n\t"inventory/importInventory": {\r\n\t\t"file_to_import": "Archivo para importar",\r\n\t\t"browse": "Examinar",\r\n\t\t"browse_csv_file": "Examinar archivo *.csv",\r\n\t\t"uploading": "Subiendo",\r\n\t\t"importing": "Importando",\r\n\t\t"done": "LISTO",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"error_importing_": "Error de importación",\r\n\t\t"processing": "Procesamiento...",\r\n\t\t"abort": "Interrumpir",\r\n\t\t"file_upload_failed_": "Error al subir el archivo.",\r\n\t\t"imported_lines": "Importadas  {0} líneas.",\r\n\t\t"error_in_file_format_error_line_message_": "Error de formato de archivo. Error en la línea #",\r\n\t\t"Number of columns in line {0} is less then expected": "El número de columnas en la línea {0} es menor que lo esperado. El número de columnas esperado es",\r\n\t\t"Number of columns in line {0} is more then expected": "El número de columnas en la línea {0} es mayor que el esperado. El número de columnas esperado es",\r\n\t\t"import_was_successfully_cancelled": "Importación cancelada con éxito.",\r\n\t\t"import_successfully_finished": "Importación terminada con éxito.",\r\n\t\t"cancelling": "Cancelando…",\r\n\t\t"field_is_required": "Campo \'{0}\' obligatorio.",\r\n\t\t"Field \'{0}\' has length greater than {1}": "El campo \'{0}\' tiene una longitud mayor que{1}.",\r\n\t\t"field_sku_or_cost_exists_while_vendor_is_empty": "\'SKU\' y \'Coste\' de producto no pueden definirse cuando faltan los datos del proveedor.",\r\n\t\t"cannot_parse_file": "Imposible analizar el archivo.",\r\n\t\t"upc_has_a_wrong_format_only_digits_allowed": "UPC tiene formato incorrecto. Se permiten solo dígitos.",\r\n\t\t"upc_has_a_wrong_format_only_digits_and_letters_allowed": "UPC tiene formato incorrecto. Solo se permiten dígitos y letras.",\r\n\t\t"upc_has_a_wrong_format_upc_length_can_be_8_or_12_or_13_digits": "UPC tiene formato incorrecto. UPC puede constar de 8, 12 o 13 dígitos.",\r\n\t\t"upc_has_a_wrong_format_upc_length_should_be_less_than_13": "UPC tiene formato incorrecto. La longitud de UPC debe ser menor a 13.",\r\n\t\t"upc_has_a_wrong_format_upc_length_should_be_less_than_20": "UPC tiene formato incorrecto. La longitud de UPC no debe ser mayor a 20.",\r\n\t\t"unitOfMeasure_not_found": "Unidad de medida \'{0}\' no encontrada.",\r\n\t\t"vendor_not_found": "Proveedor \'{0}\' no encontrado.",\r\n\t\t"field_Name_Category_Department_cannot_be_null": "Los campos \'Nombre\' \'Categoría\' \'Departamento\' no pueden estar vacíos.",\r\n\t\t"the_sku_is_already_exists": "Sku ‘{0}’ ya existe.",\r\n\t\t"field_Sku_cannot_be_null": "El campo \'Sku\' no puede estar vacío.",\r\n\t\t"unexpected_import_error_details_": "Error de importación imprevisto. Detalles",\r\n\t\t"error_at_line_": "Error en la línea \'{0}\'.",\r\n\t\t"Inventory import is already running": "Importación de inventario en curso.",\r\n\t\t"Language id is not found in header column": "No se encuentra el id de idioma en el encabezado de la columna \'{0}\'",\r\n\t\t"language_not_supported": "El idioma \'{0}\' no está soportado.",\r\n\t\t"duplicate_language": "Duplicar columna de idioma \'{0}\'.",\r\n\t\t"Columns with product names not found": "No se encontraron columnas con los nombres de producto.",\r\n\t\t"First column header does not contains default language code": "El encabezado de la primera columna no contiene el código ISO de idioma predeterminado.",\r\n\t\t"field_price_is_invalid": "El campo \'Precio\' es inválido",\r\n\t\t"invalid column header_x": "El encabezado de columna \'{0}\' es inválido",\r\n\t\t"column not found_x": "No se encontró la columna: \'{0}\'",\r\n\t\t"get_template": "Obtener plantilla",\r\n\t\t"Field_x_has invalid boolean value": "El campo \'{0}\' tiene un valor booleano inválido.",\r\n\t\t"field_x_is_invalid": "El campo \'{0}\' es inválido.",\r\n\t\t"field_price_of_store_not_found": "No se encontró el campo \'Precio\' para la tienda {0}.",\r\n\t\t"field_taxable_of_store_not_found": "No se encontró el campo \'Imponible\' para la tienda {0}.",\r\n\t\t"field_discountable_of_store_not_found": "No se encontró el campo \'Descontable\' para la tienda {0}.",\r\n\t\t"field_QuantityOnHand_of_store_not_found": "No se encontró el campo \'Cantidad en mano\' para la tienda {0}.",\r\n\t\t"field_MinimumQuantity_of_store_not_found": "No se encontró el campo \'Cantidad mínima\' para la tienda {0}.",\r\n\t\t"field_RecommendedQuantity_of_store_not_found": "No se encontró el campo \'Cantidad recomendada\' para la tienda {0}.",\r\n\r\n\t\t"field_should_be_less_and_greater": "El campo \'{0}\' debe ser menor que {1} y mayor que {2}.",\r\n\t\t"duplicate_category_name": "La categoría \'{0}\' es un nombre duplicado. Los nombres de las categorías deben ser únicos.",\r\n\t\t"MinimumQuantity_should_be_less_than_RecommendedQuantity": "La cantidad mínima debe ser menor o igual a la cantidad recomendada.",\r\n\t\t"MinimumQuantity_should_be_less_than_RecommendedQuantity_for_store_x": "La cantidad mínima debe ser menor o igual a la cantidad recomendada para la tienda: \'{0}\'.",\r\n\t\t"invalid_inventory_type": "\'Tipo de inventario\' inválido: \'{0}\' debe estar en: \'Inventario\', \'Fuera de inventario\', \'Serializado\'"\r\n\t},\r\n\t"inventory/importInventory/columns": {\r\n\t\t"Product Name": "Nombre de producto ({0})",\r\n\t\t"Description": "Descripción",\r\n\t\t"Department": "Departamento",\r\n\t\t"Category": "Categoría",\r\n\t\t"UPC": "UPC",\r\n\t\t"Product Status": "Estatus de producto",\r\n\t\t"Cost": "Costo",\r\n\t\t"Price Type": "Tipo de precio",\r\n\t\t"Sales Price": "Precio de venta",\r\n\t\t"Taxable": "Imponible",\r\n\t\t"Discountable": "Descontable",\r\n\t\t"Quantity on Hand": "Cantidad en mano",\r\n\t\t"Minimum Quantity": "Cantidad mínima",\r\n\t\t"Recommended Quantity": "Cantidad recomendada",\r\n\t\t"Vendor": "Proveedor",\r\n\t\t"Vendor SKU": "SKU de proveedor"\r\n\t},\r\n\t"inventory/inventoryList": {\r\n\t\t"new_item": "Nuevo artículo",\r\n\t\t"toggle_dropdown": "Menú desplegable",\r\n\t\t"new_category": "Nueva categoría",\r\n\t\t"new_department": "Nuevo departamento",\r\n\t\t"new_modifier": "Nuevo modificador",\r\n\t\t"import_inventory": "Importar inventario",\r\n\t\t"department": "Departamento",\r\n\t\t"department_filter": "Departamento",\r\n\t\t"all": "Todo",\r\n\t\t"category": "Categoría",\r\n\t\t"category_filter": "Categoría",\r\n\t\t"id": "ID",\r\n\t\t"item": "Artículo",\r\n\t\t"cost": "Coste",\r\n\t\t"price": "Precio",\r\n\t\t"margin": "Margen",\r\n\t\t"quantity": "Cantidad",\r\n\t\t"value": "Valor",\r\n\t\t"qty_sold": "Cantidad vendida",\r\n\t\t"gross_sales": "Importe de ventas brutas",\r\n\t\t"status": "Estatus",\r\n\t\t"search_item_by_title_or_code": "Buscar producto por nombre o código",\r\n\t\t"no_matching_records_found": "No se han encontrado coincidencias",\r\n\t\t"are_you_sure_you_want_to_delete_selected_products": "¿Está seguro de que desea eliminar los productos elegidos?",\r\n\t\t"deleting_product_error": "Producto: {0} no se puede borrar ya que tiene pedidos abiertos. ",\r\n\t\t"manual": "Modo manual",\r\n\t\t"active": "Activa",\r\n\t\t"inactive": "No activa"\r\n\t},\r\n\t"inventory/inventoryManage": {\r\n\t\t"cancel": "Cancelar",\r\n\t\t"done": "Listo",\r\n\t\t"new_inventory_item": "Nuevo artículo de inventario",\r\n\t\t"vendor": "Proveedor",\r\n\t\t"modifier": "Modificador",\r\n\t\t"edit_inventory_item": "Editar artículo de inventario",\r\n\t\t"general": "General",\r\n\t\t"pricing": "Precio",\r\n\t\t"taxes": "Impuestos",\r\n\t\t"variants": "Matriz de inventario",\r\n\t\t"modifiers": "Modificadores",\r\n\t\t"vendors": "Proveedores",\r\n\t\t"ordering": "Pedido",\r\n\t\t"serials": "Números de serie",\r\n\t\t"warning_another_product_has_the_same_sku_with_this_vendor": "Advertencia",\r\n\t\t"warning_product_picture_max_size_is_exceeded": "Advertencia",\r\n\t\t"another_product_has_save_sku_x_": "Otro producto tiene la misma SKU: \'{0}\' que este proveedor.",\r\n\t\t"unexpected_error_occured_please_try_again_later": "Se produjo un error imprevisto. Inténtelo de nuevo más tarde.",\r\n\t\t"basic_item": "Artículo de inventario",\r\n\t\t"variant_item": "Artículo de matriz",\r\n\t\t"sell_basik": "Vender este artículo en forma individual",\r\n\t\t"sell_basic": "Vender este artículo en forma individual",\r\n\t\t"sell_variant": "Vender artículo sometido a matriz",\r\n\t\t"create": "Crear",\r\n\t\t"or": "O",\r\n\t\t"name_on_samecategory": "El producto con el nombre {0} ya existe para el idioma {1} en esta categoría",\r\n\t\t"empty_variant": "Se debe añadir por lo menos una opción"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/general": {\r\n\t\t"inventoryTypeStandard": "Inventario",\r\n\t\t"inventoryTypeSerialized": "En serie",\r\n\t\t"inventoryTypeNonInventory": "Fuera de inventario",\r\n\t\t"product_name": "Nombre de producto",\r\n\t\t"product_short_name": "Nombre abreviado del producto",\r\n\t\t"product_description": "Descripción del producto",\r\n\t\t"department": "Departamento",\r\n\t\t"category": "Categoría",\r\n\t\t"upc": "UPC",\r\n\t\t"is_active": "Activa",\r\n\t\t"the_image_is_too_big_max_allowed_size_of_image_is_kb": "Imagen demasiado grande. El tamaño máximo permitido es {0} Kb.",\r\n\t\t"upload_product_image": "Cargar imagen",\r\n\t\t"delete_image": "Eliminar imagen",\r\n\t\t"choose_department": "Seleccionar departamento...",\r\n\t\t"choose_category": "Seleccionar categoría...",\r\n\t\t"select_color": "Seleccionar color",\r\n\t\t"color": "Color de pantalla del producto",\r\n\t\t"the_image_will_be_deleted": "La imagen será eliminada.",\r\n\t\t"ok": "OK",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"chrome_invalid_version_pic": "Para editar la imagen o subir una imagen nueva use Chrome 48 o una versión superior.",\r\n\t\t"chrome_invalid_version_no_pic": "Para subir una imagen use Chrome 48 o una versión superior.",\r\n\t\t"browse_images": "Examinar imágenes",\r\n\t\t"invalid_image": "Imagen inválida"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/ordering": {\r\n\t\t"quantity": "Cantidad",\r\n\t\t"recommended_quantity": "Cantidad recomendada",\r\n\t\t"minimum_quantity": "Cantidad mínima",\r\n\t\t"input_quantity": "Introduzca la cantidad",\r\n\t\t"total_quantity": "Cantidad total",\r\n\t\t"quantityLimits": "La cantidad debe ser mayor que {0} y menor que {1}",\r\n\t\t"recommendedQuantityLimits": "La cantidad recomendada debe ser mayor o igual que {0} y menor que {1}",\r\n\t\t"minimumQuantityLimits": "La cantidad mínima debe ser mayor o igual que {0} y menor que {1}",\r\n\t\t"minimum_quantity_should_be_less_or_equal_to_recommended_quantity": "La cantidad mínima debe ser menor o igual que la cantidad recomendada"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/pricing": {\r\n\t\t"price_type": "Tipo de precio",\r\n\t\t"unit": "Unidad",\r\n\t\t"sales_price": "Precio de venta",\r\n\t\t"is_taxable": "Imponible",\r\n\t\t"is_discountable": "Descontable",\r\n\t\t"fixed": "Fijo",\r\n\t\t"manual": "Modo manual",\r\n\t\t"price_should_be_greater_or_equal_to_0_and_less_than_100000": "El precio debe ser mayor o igual que 0 y menor que 100000",\r\n\t\t"store": "Tienda",\r\n\t\t"salesPrice": "Precio de venta",\r\n\t\t"discountable": "Descontable",\r\n\t\t"taxable": "Imponible",\r\n\t\t"stores": "Tiendas",\r\n\t\t"name": "Nombre",\r\n\t\t"rate": "Tasa"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/vendorManage": {\r\n\t\t"vendor": "Proveedor",\r\n\t\t"sku": "SKU",\r\n\t\t"cost": "Coste",\r\n\t\t"primary": "Principal",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"input_name": "Introduzca el nombre"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/vendors": {\r\n\t\t"vendor": "Proveedor",\r\n\t\t"sku": "SKU",\r\n\t\t"cost": "Coste",\r\n\t\t"primary": "Principal",\r\n\t\t"new_vendor": "Nuevo proveedor",\r\n\t\t"search_or_select_vendors": "Buscar o seleccionar proveedores",\r\n\t\t"search_vendors": "Buscar proveedores"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/addOnModifiers": {\r\n\t\t"add-ons": "Adiciones",\r\n\t\t"modifier_name": "Nombre del modificador",\r\n\t\t"price": "Precio",\r\n\t\t"is_active": "Activo",\r\n\t\t"you_did_not_add_add-ons": "No ha añadido adiciones.",\r\n\t\t"add_option": "Añadir opción"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/exceptionModifiers": {\r\n\t\t"exceptions": "Excepciones",\r\n\t\t"modifier_name": "Nombre del modificador",\r\n\t\t"price": "Precio",\r\n\t\t"is_active": "Activo",\r\n\t\t"you_did_not_add_exceptions": "No ha añadido excepciones.",\r\n\t\t"add_option": "Añadir opción"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/variants": {\r\n\t\t"isActive": "Está activo",\r\n\t\t"variant": "Artículo de matriz",\r\n\t\t"price": "Precio",\r\n\t\t"quantity": "Cantidad",\r\n\t\t"cost": "Costo",\r\n\t\t"sku": "SKU",\r\n\t\t"upc": "UPC",\r\n\t\t"varinat_name": "Nombre del atributo",\r\n\t\t"variants": "Valores del atributo",\r\n\t\t"copy2all": "Copiar a todos",\r\n\t\t"hide_dis": "Ocultar inactivo",\r\n\t\t"delete_var": "Está a punto de eliminar todos los artículos que incluyen esta variante.",\r\n\t\t"sku_is_required": "Se requiere SKU"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/groupModifiers": {\r\n\t\t"groups": "Grupos",\r\n\t\t"group_name": "Nombre del grupo",\r\n\t\t"option": "Opción",\r\n\t\t"price": "Precio",\r\n\t\t"default": "Predeterminado",\r\n\t\t"is_active": "Activa",\r\n\t\t"you_did_not_add_group_modifier": "No ha añadido modificador de grupo.",\r\n\t\t"enter_name": "Introduzca el nombre",\r\n\t\t"add_option": "Añadir opción"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/modifiers": {\r\n\t\t"selectModifierType": "Tipo de Modificador",\r\n\t\t"new_modifier": "Nuevo modificador",\r\n\t\t"product_modifiers_must_have_unique_names": "Los modificadores de producto deben tener nombres únicos.",\r\n\t\t"varinat_must_have_unique_names": "Los atributos deben tener nombres únicos.",\r\n\t\t"variantOptionNameDuplicate": "El atributo tiene valores duplicados para el idioma {0}",\r\n\t\t"add_modifiers_to_product": "Añadir modificador al producto",\r\n\t\t"all_stores": "Todas las tiendas"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/serials": {\r\n\t\t"serialNo": "Nro. de serie",\r\n\t\t"serialNotUniqueError": "El número de serie debe ser único.",\r\n\t\t"serials_were_sold": "Los números de serie se vendieron: {0}"\r\n\t},\r\n\t"modifiers/modifierManage": {\r\n\t\t"modifier_type": "Tipo de modificador",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"select_modifier_type": "Tipo de Modificador",\r\n\t\t"modifier_with_such_name_already_exists": "Un modificador con este nombre ya existe.",\r\n\t\t"modifier_with_name_x_already_exists_for_lang_x": "Un modificador con el nombre \'{0}\' ya existe en el idioma \'{1}\'.",\r\n\t\t"new_modifiers_must_have_unique_names": "Los modificadores nuevos deben tener nombres únicos.",\r\n\t\t"new_modifier": "Nuevo modificador",\r\n\t\t"modifier_name_must_be_unique": "El nombre del modificador debe ser único.",\r\n\t\t"modifier_name_for_lang_x_is_empty": "El nombre del modificador está vacío para el idioma \'{0}\'.",\r\n\t\t"varinat_name_for_lang_x_is_empty": "El nombre de la matriz está vacío para el idioma \'{0}\'.",\r\n\t\t"modifiers_option_name_for_lang_x_is_empty": "El nombre de opción del modificador \'{0}\' está vacío para el idioma \'{1}\'.",\r\n\t\t"modifier_option_name_for_lang_x_must_be_unique": "El nombre de opción del modificador debe ser único para el idioma \'{0}\'.",\r\n\t\t"emptyGroupModifierError": "No puede crear un modificador de grupo sin una opción",\r\n\t\t"edit_modifier": "Editar modificador",\r\n\t\t"varinat_option_name_for_lang_x_is_empty": "El nombre de opción de la matriz \'{0}\' está vacío para el idioma \'{1}\'.",\r\n\t\t"variant_with_name_x_already_exists_for_lang_x": "Un modificador con el nombre \'{0}\' ya existe en el idioma \'{1}\'."\r\n\t},\r\n\t"modifiers/modifiersList": {\r\n\t\t"new_modifier": "Nuevo modificador",\r\n\t\t"toggle_dropdown": "Menú desplegable",\r\n\t\t"new_department": "Nuevo departamento",\r\n\t\t"new_category": "Nueva categoría",\r\n\t\t"new_item": "Nuevo artículo",\r\n\t\t"modifier": "Modificador",\r\n\t\t"type": "Tipo",\r\n\t\t"status": "Estatus",\r\n\t\t"search_for_modifier": "Buscar modificador",\r\n\t\t"are_you_sure_you_want_to_delete_selected_modifier": "¿Está seguro de que desea eliminar el modificador elegido?",\r\n\t\t"the_modifier_was_not_deleted": "El modificador no ha sido eliminado.",\r\n\t\t"group": "Grupo",\r\n\t\t"add-on": "Adición",\r\n\t\t"exception": "Excepción",\r\n\t\t"active": "Activa",\r\n\t\t"inactive": "No activa"\r\n\t},\r\n\t"modifiers/modifier-type/addOnModifier": {\r\n\t\t"add-ons": "Adiciones",\r\n\t\t"modifier_name": "Nombre del modificador",\r\n\t\t"price": "Precio",\r\n\t\t"is_active": "Activa",\r\n\t\t"add_option": "Añadir opción"\r\n\t},\r\n\t"modifiers/modifier-type/exceptionModifier": {\r\n\t\t"exceptions": "Excepciones",\r\n\t\t"modifier_name": "Nombre del modificador",\r\n\t\t"price": "Precio",\r\n\t\t"is_active": "Activa",\r\n\t\t"add_option": "Añadir opción"\r\n\t},\r\n\t"modifiers/modifier-type/groupModifier": {\r\n\t\t"groups": "Grupos",\r\n\t\t"group_name": "Nombre del grupo",\r\n\t\t"option": "Opción",\r\n\t\t"price": "Precio",\r\n\t\t"default": "Predeterminado",\r\n\t\t"is_active": "Activa",\r\n\t\t"enter_name": "Introduzca el nombre",\r\n\t\t"add_option": "Añadir opción"\r\n\t},\r\n\t"orders/orderDetails": {\r\n\t\t"order_id": "ID del Pedido",\r\n\t\t"order_name": "Pedido",\r\n\t\t"customer": "Cliente",\r\n\t\t"customer_phone": "Teléfono",\r\n\t\t"employee": "Empleado",\r\n\t\t"order_date": "Fecha",\r\n\t\t"order_type": "Tipo de pedido",\r\n\t\t"status": "Estatus",\r\n\t\t"/": "/",\r\n\t\t"tender_type": "Tipo de pago",\r\n\t\t"fulfillment": "Ejecución",\r\n\t\t"refnum": "Número de ref.",\r\n\t\t"subtotal": "Subtotal",\r\n\t\t"discount": "Rebaja",\r\n\t\t"tax": "Impuesto",\r\n\t\t"tips": "Propina",\r\n\t\t"total": "Total",\r\n\t\t"back": "Volver",\r\n\t\t"order_details": "Detalles del pedido",\r\n\t\t"order_details_-_register_#_": "Detalles del pedido - Caja # {0} - Estatus del pedido",\r\n\t\t"Pending": "Pendiente",\r\n\t\t"Completed": "Terminado",\r\n\t\t"Failed": "Fallado",\r\n\t\t"Voided": "Anulado",\r\n\t\t"authCode": "Código de autorización",\r\n\t\t"control_number": "Nro. de control:",\r\n\t\t"store": "Tienda:"\r\n\t},\r\n\t"orders/orderDetailsItems": {\r\n\t\t"description": "Descripción",\r\n\t\t"quantity": "Cantidad",\r\n\t\t"item_price": "Precio del artículo",\r\n\t\t"discount": "Rebaja",\r\n\t\t"total_price": "Precio Total"\r\n\t},\r\n\t"orders/ordersList": {\r\n\t\t"order_type": "Tipo de pedido",\r\n\t\t"all": "Todos",\r\n\t\t"order_status": "Estatus del pedido",\r\n\t\t"fulfillment": "Ejecución",\r\n\t\t"order_id": "ID del pedido",\r\n\t\t"order_name": "Pedido",\r\n\t\t"type": "Tipo",\r\n\t\t"status": "Estatus",\r\n\t\t"total": "Total",\r\n\t\t"date": "Fecha",\r\n\t\t"employee": "Empleado",\r\n\t\t"store": "Tienda",\r\n\t\t"customer": "Cliente",\r\n\t\t"search_order": "Buscar pedido",\r\n\t\t"orders": "Pedidos",\r\n\t\t"upc": "ID del Pedido",\r\n\t\t"name": "Pedido",\r\n\t\t"typeColumn": "Tipo de pedido",\r\n\t\t"tenderType": "Tipo de pago",\r\n\t\t"fulfilmentColumn": "Ejecución",\r\n\t\t"businessDate": "Fecha",\r\n\t\t"subtotal": "Subtotal",\r\n\t\t"discount": "Rebaja",\r\n\t\t"tax": "Impuesto",\r\n\t\t"tips": "Propina",\r\n\t\t"totalAmount": "Total",\r\n\t\t"controlNumber": "Nro. de control:",\r\n\t\t"walkIn": "Ambulante"\r\n\t},\r\n\t"registerSettings/registerSettingsList": {\r\n\t\t"register_name": "Nombre de la caja",\r\n\t\t"status": "Estatus",\r\n\t\t"are_you_sure_you_want_to_delete_selected_register_setting": "¿Está seguro de que desea eliminar los ajustes de la caja seleccionados?",\r\n\t\t"error_occurred_while_deleting_register_setting_": "Se produjo un error al eliminar los ajustes de caja {0}",\r\n\t\t"employees_": "Empleados",\r\n\t\t"active": "Activa",\r\n\t\t"inactive": "No Activa",\r\n\t\t"search_register": "Buscar caja",\r\n\t\t"new_register": "Nueva caja",\r\n\t\t"store": "Tienda"\r\n\t},\r\n\t"registerSettings/registerSettingsManage": {\r\n\t\t"general": "General",\r\n\t\t"localization": "Localización",\r\n\t\t"register_name": "Nombre de la caja",\r\n\t\t"assigned_only": "Solo Designados",\r\n\t\t"employees": "Empleados",\r\n\t\t"register_number": "Número de la caja",\r\n\t\t"register_license_key": "Clave de licencia de la caja",\r\n\t\t"is_active": "Activo",\r\n\t\t"unblock": "Desbloquear",\r\n\t\t"deactivate": "Desactivar",\r\n\t\t"deactivateConfirmTitle": "Desactivación de caja",\r\n\t\t"deactivateConfirmText": "Está a punto de desactivar la caja.<br />Todos los datos no sincronizados en el dispositivo POS &nbsp;se&nbsp;perderán.",\r\n\t\t"deactivateSuccess": "La caja se ha desactivado.",\r\n\t\t"deactivateError": "Ocurrió un error durante la desactivación de la caja.",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"input_name": "Introduzca el nombre",\r\n\t\t"input_number": "Introduzca el número",\r\n\t\t"register_with_this_name_already_exists_please_select_another_name_for_the_register": "La caja con este nombre ya existe. Seleccione otro nombre para la caja.",\r\n\t\t"register_number_must_be_unique": "El número de la caja debe ser único",\r\n\t\t"new_register_setting": "Ajustes de caja nueva",\r\n\t\t"edit_register_setting": "Editar ajustes de caja",\r\n\t\t"search_or_choose_employee(s)": "Buscar o seleccionar empleado(s)",\r\n\t\t"search_or_choose_device(s)": "Buscar o seleccionar dispositivo(s)",\r\n\t\t"payment_gateway": "Pasarela de pago",\r\n\t\t"control_token": "Nro. de control Token"\r\n\t},\r\n\t"registerSettings/registerSettingsManage/localization": {\r\n\t\t"pos_language": "Idioma POS",\r\n\t\t"kitchen_receipt_language": "Idioma del recibo de la cocina",\r\n\t\t"date_format": "Formato de fecha",\r\n\t\t"time_format": "Formato de hora",\r\n\t\t"select_pos_language": "Seleccionar idioma POS ...",\r\n\t\t"select_kitchen_receipt_language": "Seleccionar idioma del recibo de la cocina...",\r\n\t\t"select_date_format": "Seleccionar formato de fecha...",\r\n\t\t"select_time_format": "Seleccionar formato de hora..."\r\n\t},\r\n\t"registerSettings/registerSettingsManage/paymentGateway": {\r\n\t\t"payment_gateway": "Pasarela de pago",\r\n\t\t"source_key": "Clave fuente",\r\n\t\t"pin": "PIN",\r\n\t\t"debitCardEnabled": "Habilitar pagos con tarjeta de débito"\r\n\t},\r\n\t"registerSettings/newRegister": {\r\n\t\t"defaultRegisterName": "Nueva caja",\r\n\t\t"requestSubmited": "La solicitud para crear una <strong>Nueva caja</strong><br />se envió al centro de atención al cliente.",\r\n\t\t"receiveNotification": "Recibirá una notificación tras la creación de la caja",\r\n\t\t"unexpectedError": "Lo sentimos, algo salió mal. Inténtelo de nuevo más tarde.",\r\n\t\t"duplicateName": "La caja con este nombre ya existe.",\r\n\t\t"duplicateRequestName": "Ya existe una solicitud con este nombre. El nombre de la solicitud debe ser único."\r\n\t},\r\n\t"shifts/shift": {\r\n\t\t"register": "Caja",\r\n\t\t"opened": "Abierta",\r\n\t\t"opened_by": "Abierta (por)",\r\n\t\t"closed": "Cerrada",\r\n\t\t"closed_by": "Cerrada (por)",\r\n\t\t"transactions": "Transacciones",\r\n\t\t"cash": "Efectivo",\r\n\t\t"external_payment": "Pago externo",\r\n\t\t"opening_amount": "Importe al abrir",\r\n\t\t"cash_sales": "Ventas en efectivo",\r\n\t\t"cash_refunds": "Devolución Efectivo",\r\n\t\t"payins": "Importes recibidos",\r\n\t\t"payouts": "Importes entregados",\r\n\t\t"closing_amount": "Importe al cerrar",\r\n\t\t"variance": "Variación",\r\n\t\t"revenue": "Ganancias",\r\n\t\t"sales": "Ventas",\r\n\t\t"discounts": "Rebajas",\r\n\t\t"refunds": "Devoluciones",\r\n\t\t"net_sales": "Ventas netas",\r\n\t\t"tips": "Propina",\r\n\t\t"tax": "Impuesto",\r\n\t\t"total_tendered": "Total pagado",\r\n\t\t"tender_breakdown": "Desglose de pagos",\r\n\t\t"credit_card": "Tarjeta de crédito",\r\n\t\t"debit_card": "Tarjeta de débito",\r\n\t\t"back": "Volver"\r\n\t},\r\n\t"shifts/shiftsList": {\r\n\t\t"register": "Caja",\r\n\t\t"opened": "Abierta",\r\n\t\t"closed": "Cerrada",\r\n\t\t"transactions": "Transacciones",\r\n\t\t"total_tendered": "Total pagado",\r\n\t\t"variance": "Variación",\r\n\t\t"no_matching_records_found": "Coincidencias no encontradas",\r\n\t\t"openedBy": "Abierta por",\r\n\t\t"closedBy": "Cerrada por",\r\n\t\t"openingAmount": "Importe al abrir",\r\n\t\t"cashSales": "Ventas en efectivo",\r\n\t\t"cashRefunds": "Devolución en efectivo",\r\n\t\t"payins": "Importes recibidos",\r\n\t\t"payouts": "Importes entregados",\r\n\t\t"closingAmount": "Importe al cerrar",\r\n\t\t"sales": "Ventas",\r\n\t\t"discounts": "Rebajas",\r\n\t\t"refunds": "Devoluciones",\r\n\t\t"netSales": "Ventas netas",\r\n\t\t"tips": "Propinas",\r\n\t\t"tax": "Impuesto",\r\n\t\t"cash": "Efectivo",\r\n\t\t"creditCard": "Tarjeta de crédito",\r\n\t\t"debitCard": "Tarjeta de débito",\r\n\t\t"externalPayment": "Pago externo"\r\n\t},\r\n\t"stores/storesList": {\r\n\t\t"stores": "Tiendas",\r\n\t\t"search_store": "Buscar tienda",\r\n\t\t"new_store": "Nueva tienda",\r\n\t\t"store_name": "Nombre de la tienda",\r\n\t\t"status": "Estado",\r\n\t\t"employees_": "Empleados:",\r\n\t\t"active": "Activo",\r\n\t\t"inactive": "Inactivo"\r\n\t},\r\n\t"storeSettings/storeSettings": {\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"saved_successfully": "Guardado con éxito.",\r\n\t\t"general": "General",\r\n\t\t"contacts": "Contactos",\r\n\r\n\t\t"billing": "Facturas",\r\n\t\t"receipt": "Recibos",\r\n\t\t"tips": "Propina",\r\n\t\t"taxes": "Impuestos",\r\n\t\t"payment_gateway": "Pasarela de pago",\r\n\t\t"localization": "Localización",\r\n\t\t"registers": "Cajas"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/billing": {\r\n\t\t"next_billing_date": "Siguiente fecha de facturación",\r\n\t\t"amount_to_pay": "Importe a pagar"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/contacts": {\r\n\t\t"store_name": "Nombre de la tienda",\r\n\t\t"address_1": "Dirección 1",\r\n\t\t"address_2": "Dirección 2",\r\n\t\t"city": "Ciudad",\r\n\t\t"state": "Estado",\r\n\t\t"zip": "Código postal",\r\n\t\t"country": "País",\r\n\t\t"phone": "Teléfono",\r\n\t\t"email": "Correo electrónico",\r\n\t\t"web": "Web",\r\n\t\t"choose_country": "Seleccionar país…",\r\n\t\t"pleaseFillNewStore": "Complete el siguiente formulario para establecer una nueva tienda.",\r\n\t\t"pleaseFillNewRegister": "Complete el siguiente formulario para establecer una nueva caja."\r\n\t},\r\n\t"storeSettings/store-settings-tabs/general": {\r\n\t\t"storeId": "Identificación de la tienda",\r\n\t\t"is_active": "Está activado",\r\n\t\t"account_id": "ID de cuenta",\r\n\t\t"stores_business": "Ámbito de actividad de la tienda",\r\n\t\t"tax_rate": "Tasa de impuestos",\r\n\t\t"show_order_type": "Mostrar tipo de pedido",\r\n\t\t"item_notes": "Notas de artículos",\r\n\t\t"no_notes": "No hay notas",\r\n\t\t"mandatory": "Obligatorio",\r\n\t\t"optional": "Opcional",\r\n\t\t"cancel_store_account": "Cancelar cuenta de la tienda",\r\n\t\t"autoLogoutAfterOrder": "Autosalida después del pedido",\r\n\t\t"externalPayment": "Pago Externo",\r\n\t\t"syncOnLogin": "Sincronización en inicio de sesión",\r\n\t\t"openCashDrawerCC": "Abrir el cajón de dinero en transacción con tarjeta de crédito/débito",\r\n\t\t"show_tax_list": "Mostrar lista de impuestos"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/payment": {\r\n\t\t"payment_gateway": "Pasarela de pago",\r\n\t\t"source_key": "Clave de la tienda",\r\n\t\t"pin": "PIN",\r\n\t\t"debitCardEnabled": "Habilitar pagos con tarjeta de débito"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/receipt": {\r\n\t\t"kitchen_receipt": "Ticket para la cocina",\r\n\t\t"signature_on_receipt": "Firma en el Ticket",\r\n\t\t"tipsNSignature": "Propinas y firma",\r\n\t\t"tipsAndSignatureOnPos": "Propinas y firma en POS",\r\n\t\t"Screen": "en pantalla",\r\n\t\t"Receipt": "en el ticket",\r\n\t\t"Terminal": "en la terminal",\r\n\t\t"receipt_template": "Plantilla del Ticket",\r\n\t\t"load_another_template": "Cargar otra plantilla",\r\n\t\t"footer": "Pie de página"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/registers": {\r\n\t\t"registers_list": "Lista de Cajas",\r\n\t\t"select_#_of_stores_registers": "Seleccionar # Cajas de la Tienda",\r\n\t\t"price_per_register": "Precio en la Caja"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/tips": {\r\n\t\t"tips": "Propinas",\r\n\t\t"tips_on_credit_card_authorization": "Propinaal autorizar la tarjeta de crédito",\r\n\t\t"keyboard_shortcut_settings": "Ajustes de accesos directos del teclado",\r\n\t\t"for_curr_amount": "De {0} Importe",\r\n\t\t"for_%_amount": "De  % del Importe"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/taxes": {\r\n\t\t"includeTaxesToPrice": "Incluir impuestos al precio por defecto"\r\n\r\n\r\n\t},\r\n\t"storeSettings/store-settings-tabs/localization": {\r\n\t\t"pos_language": "Idioma POS",\r\n\t\t"kitchen_receipt_language": "Idioma del recibo de la cocina",\r\n\t\t"date_format": "Formato de fecha",\r\n\t\t"time_format": "Formato de hora",\r\n\t\t"select_pos_language": "Seleccionar  Idioma POS ...",\r\n\t\t"select_kitchen_receipt_language": "Seleccionar idioma del recibo de la cocina...",\r\n\t\t"select_date_format": "Seleccionar formato de fecha...",\r\n\t\t"select_time_format": "Seleccionar formato de hora..."\r\n\t},\r\n\t"storeSettings/newStore": {\r\n\t\t"defaultStoreName": "Nueva tienda",\r\n\t\t"description": "Descripción",\r\n\t\t"storeDescription": "Descripción de la tienda",\r\n\t\t"requestSubmited": "La solicitud para crear una <strong>Nueva tienda</strong><br />se envió al centro de atención al cliente.",\r\n\t\t"receiveNotification": "Recibirá una notificación tras la creación de la tienda",\r\n\t\t"alreadyExists": "La tienda (o la solicitud de creación de tienda) con ese nombre ya existe."\r\n\t},\r\n\t"enterpriseSettings/enterpriseSettings": {\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"contacts": "Contactos",\r\n\r\n\t\t"marketing": "Marketing",\r\n\t\t"optInCheckIn": "Clave de suscripción voluntaria/registro",\r\n\t\t"loyaltyRedemptionKey": "Clave de recompensa del programa de fidelidad",\r\n\t\t"localization": "Localización",\r\n\t\t"saved_successfully": "Guardado con éxito.",\r\n\t\t"default_lang_change_error": "Faltan algunas traducciones del nombre del departamento, nombre de la categoría, nombre del producto, nombre/opciones del modificador {0}. Añada todas las traducciones antes de cambiar el idioam predeterminado. {1} \'{2}\' no tiene traducción para el nuevo idioma.",\r\n\t\t"Department": "Departamento",\r\n\t\t"Category": "Categoría",\r\n\t\t"Product": "Producto",\r\n\t\t"Modifier": "Modificador",\r\n\t\t"Modifier Option": "Opción del modificador"\r\n\t},\r\n\t"enterpriseSettings/enterprise-settings-tabs/contacts": {\r\n\t\t"enterprise_code": "Enterpise Code",\r\n\t\t"enterprise_name": "Enterpise Name",\r\n\t\t"address_1": "Dirección 1",\r\n\t\t"address_2": "Dirección 2",\r\n\t\t"city": "Ciudad",\r\n\t\t"state": "Estado",\r\n\t\t"zip": "Código postal",\r\n\t\t"country": "Pais",\r\n\t\t"phone": "Teléfono",\r\n\t\t"email": "Correo electrónico",\r\n\t\t"web": "Web",\r\n\t\t"choose_country": "Seleccionar país…"\r\n\t},\r\n\t"enterpriseSettings/enterprise-settings-tabs/localization": {\r\n\t\t"account_languages": "Idiomas de la cuenta",\r\n\t\t"select_language": "Seleccionar idioma",\r\n\t\t"default_language": "Idioma predeterminado",\r\n\t\t"pos_language": "Idioma POS",\r\n\t\t"kitchen_receipt_language": "Idioma del recibo de la cocina",\r\n\t\t"bo_language": "Idioma de BO",\r\n\t\t"date_format": "Formato de fecha",\r\n\t\t"time_format": "Formato de hora",\r\n\t\t"currency": "Moneda",\r\n\t\t"currency_format": "Formato de moneda",\r\n\t\t"select_pos_language": "Seleccionar Idioma POS ...",\r\n\t\t"select_kitchen_receipt_language": "Seleccionar idioma del recibo de la cocina...",\r\n\t\t"select_bo_language": "Seleccionar Idioma de Back-oficina...",\r\n\t\t"select_date_format": "Seleccionar formato de fecha...",\r\n\t\t"select_time_format": "Seleccionar formato de hora..."\r\n\t},\r\n\t"tips/tipsList": {\r\n\t\t"employee": "Empleado",\r\n\t\t"all": "Todos",\r\n\t\t"order_id": "ID de pedido",\r\n\t\t"ref_num": "Número de ref.",\r\n\t\t"type": "Tipo",\r\n\t\t"status": "Estatus",\r\n\t\t"price": "Precio",\r\n\t\t"date": "Fecha",\r\n\t\t"tips": "Propina",\r\n\t\t"total_tips": "Total propina",\r\n\t\t"tips_report": "Informe sobre propinas",\r\n\t\t"statusNotPaid": "No pagado",\r\n\t\t"statusPartiallyPaid": "Pago parcial",\r\n\t\t"statusPaid": "Pagado",\r\n\t\t"statusPartiallyRefunded": "Parcialmente reembolsado",\r\n\t\t"statusRefunded": "Reembolsado",\r\n\t\t"statusVoided": "Cancelado",\r\n\t\t"store": "Tienda"\r\n\t},\r\n\t"vendors/vendorManage": {\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"new_vendor": "Nuevo proveedor",\r\n\t\t"edit_vendor": "Editar vendedor",\r\n\t\t"general": "General",\r\n\t\t"contact_info": "Información de contacto"\r\n\t},\r\n\t"vendors/vendorsList": {\r\n\t\t"new_vendor": "Nuevo proveedor",\r\n\t\t"toggle_dropdown": "Menú desplegable",\r\n\t\t"new_item": "Nuevo artículo",\r\n\t\t"new_category": "Nueva categoría",\r\n\t\t"vendor_name": "Nombre del proveedor",\r\n\t\t"type": "Tipo",\r\n\t\t"status": "Estatus",\r\n\t\t"search_for_vendor": "Buscar proveedor",\r\n\t\t"are_you_sure_you_want_to_delete_selected_vendor": "¿Está seguro de que desea eliminar al proveedor elegido?",\r\n\t\t"active": "Activa",\r\n\t\t"inactive": "No activa",\r\n\t\t"vendors_list": "Lista de Proveedores",\r\n\t\t"the_vendor_has_vendoritem_assigned_please_delete_those_vendoritem_first": "El proveedor {0} no tiene artículo de proveedor asignado. Primero elimine esos artículos de proveedor."\r\n\t},\r\n\t"vendors/manage-tabs/contactInfo": {\r\n\t\t"address": "Dirección",\r\n\t\t"country": "País",\r\n\t\t"state": "Estado",\r\n\t\t"city": "Ciudad",\r\n\t\t"zip": "Código postal",\r\n\t\t"phone": "Teléfono",\r\n\t\t"fax": "Fax",\r\n\t\t"email": "Correo electrónico",\r\n\t\t"web_site": "Sitio web",\r\n\t\t"contact_name": "Persona de contacto",\r\n\t\t"www_address_com": "http",\r\n\t\t"choose_country": "Seleccionar país...",\r\n\t\t"choose_state": "Seleccionar estado...",\r\n\t\t"contact_info": "Información de contacto"\r\n\t},\r\n\t"vendors/manage-tabs/general": {\r\n\t\t"business_account_#": "# de cuenta comercial",\r\n\t\t"vendor_name": "Nombre del proveedor",\r\n\t\t"vendor_type": "Tipo de proveedor",\r\n\t\t"tax_id": "ID de Contribuyente",\r\n\t\t"notes": "Notas",\r\n\t\t"is_active": "Activa",\r\n\t\t"choose_vendor_type": "Tipo de Proveedor",\r\n\t\t"general": "General"\r\n\t},\r\n\t"date-filter/date-filter": {\r\n\t\t"today": "Hoy",\r\n\t\t"yesterday": "Ayer",\r\n\t\t"last_7_days": "Últimos 7 días",\r\n\t\t"last_30_days": "Últimos 30 días",\r\n\t\t"this_month": "Este mes",\r\n\t\t"year-to-date": "Inicio de año a presente",\r\n\t\t"all": "Todo",\r\n\t\t"custom_range": "Rango personalizado",\r\n\t\t"apply": "Aplicar",\r\n\t\t"cancel": "Cancelar"\r\n\t},\r\n\t"common": {\r\n\t\t"NA": "N/C",\r\n\t\t"success": "¡Realizado con éxito!",\r\n\t\t"error": "¡Error!",\r\n\t\t"warning": "Advertencia",\r\n\t\t"ok": "OK",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"yes": "Sí",\r\n\t\t"no": "No",\r\n\t\t"active": "Activo",\r\n\t\t"inactive": "Inactivo",\r\n\t\t"delete_selected": "Borrar",\r\n\t\t"areYouSure": "¿Está seguro?",\r\n\t\t"close": "Cerrar",\r\n\t\t"confirm": "Confirmar",\r\n\t\t"thisFieldIsRequired": "El campo es obligatorio.",\r\n\t\t"invalidPin": "PIN inválido",\r\n\t\t"fieldShouldBeLessThan": "El campo debe ser menor a",\r\n\t\t"valueIsTooBig": "El valor es demasiado grande.",\r\n\t\t"numberIsNotInRange": "Número fuera de rango.",\r\n\t\t"thisFieldHasToBeValidURL": "El campo debe ser un URL válido.",\r\n\t\t"websiteIsInvalid": "Sitio web inválido.",\r\n\t\t"valueMustBeValidPercent": "El valor debe ser un porcentaje válido.",\r\n\t\t"mustBeGreaterThanOrEqual": "Debe ser mayor o igual al otro valor.",\r\n\t\t"upcIsInvalid": "UPC inválido.",\r\n\t\t"allArrayElementsMustBeUnique": "Todos los elementos de la matriz deben ser únicos.",\r\n\t\t"nameMustBeUnique": "El nombre debe ser único.",\r\n\t\t"pleaseSpecifyValidPhoneNumber": "Especificar un número de teléfono válido"\r\n\t},\r\n\t"models/vendorModel": {\r\n\t\t"vendor_name_must_be_unique": "El nombre del proveedor debe ser único.",\r\n\t\t"vendor_name_is_required": "El nombre del proveedor es obligatorio.",\r\n\t\t"type_is_required": "Debe indicar el tipo.",\r\n\t\t"city_is_required": "Debe indicar la ciudad.",\r\n\t\t"address_is_required": "Debe indicar la dirección.",\r\n\t\t"state_is_required": "Debe indicar el estado.",\r\n\t\t"invalid_zip_code": "Código postal inválido",\r\n\t\t"country_is_required": "Debe indicar el país",\r\n\t\t"phone_is_incorrect": "El teléfono es incorrecto",\r\n\t\t"please_specify_a_valid_us_phone_number": "Indique un número de teléfono válido en EE.UU."\r\n\t},\r\n\t"repositories/addressRepository": {\r\n\t\t"invalid_state": "Estado inválido.",\r\n\t\t"invalid_zip": "Código postal inválido."\r\n\t},\r\n\t"repositories/businessUnitRepository": {\r\n\t\t"terminal_count_should_be_in_range_of_0_to_100": "El conteo de la terminal debe estar en el rango de 0 a 100"\r\n\t},\r\n\t"repositories/employeeRepository": {\r\n\t\t"you_are_not_athorized_to_save_employee": "No está autorizado a guardar el empleado"\r\n\t},\r\n\t"repositories/itemSellingPricesRepository": {\r\n\t\t"price_should_be_in_range_of_-100000_to_100000": "El precio debe estar en el rango de 100000 a 100000"\r\n\t},\r\n\t"repositories/modifiersRepository": {\r\n\t\t"option_name_must_be_unique": "El nombre de la opción debe ser único.",\r\n\t\t"add_on": "Adición",\r\n\t\t"exclusion": "Exclusión"\r\n\t},\r\n\t"repositories/tipsRepository": {\r\n\t\t"credit_card_authorization": "Autorización de la tarjeta de crédito",\r\n\t\t"tips_%_amount": "% de propina del importe",\r\n\t\t"tips_%_used_for_authonly_is_too_high_please_use_value_from_0%_to_{0}%": "El % de propina para Solo autorización es demasiado alto. Use un valor entre 0% y {0}%"\r\n\t},\r\n\t"repositories/presentationApi/employeesRepository": {\r\n\t\t"invalid_email_address": "Correo electrónico inválido",\r\n\t\t"invalid_phone": "Teléfono inválido",\r\n\t\t"you_are_not_athorized_to_save_employees": "No está autorizado a guardar empleados",\r\n\t\t"choose_role_name": "Elija el nombre del puesto para el empleado"\r\n\t},\r\n\t"repositories/presentationApi/modifiersRepository": {\r\n\t\t"option_name_must_be_unique": "El nombre de la opción debe ser único.",\r\n\t\t"add_on": "Adición",\r\n\t\t"exclusion": "Exclusión"\r\n\t},\r\n\t"repositories/presentationApi/storesRepository": {\r\n\t\t"invalid_state": "Estado inválido.",\r\n\t\t"invalid_zip": "Código postal inválido."\r\n\t},\r\n\t"base/baseListViewModel": {\r\n\t\t"list": "Lista"\r\n\t},\r\n\t"base/baseManageViewModel": {\r\n\t\t"error_saving_": "Error al guardar",\r\n\t\t"edit_": "Editar",\r\n\t\t"new_": "Nuevo"\r\n\t},\r\n\t"modifierTypes": {\r\n\t\t"modifierGroup": "Grupo de modificadores",\r\n\t\t"addons": "Adiciones",\r\n\t\t"exceptions": "Excepciones",\r\n\t\t"0": "Grupo de modificadores",\r\n\t\t"1": "Adiciones",\r\n\t\t"2": "Excepciones"\r\n\t},\r\n\t"reports/productMixReport": {\r\n\t\t"search_item_by_title_or_code": "Buscar artículo por título o código",\r\n\t\t"department": "Departamento",\r\n\t\t"department_filter": "Departamento",\r\n\t\t"all": "Todo",\r\n\t\t"category": "Categoría",\r\n\t\t"category_filter": "Categoría",\r\n\t\t"id": "ID",\r\n\t\t"item": "Artículo",\r\n\t\t"quantity": "Cantidad",\r\n\t\t"qty_sold": "Cantidad vendida",\r\n\t\t"min_qty": "Cantidad mínima",\r\n\t\t"gross_sales": "Importe de ventas brutas",\r\n\t\t"netSales": "Ventas netas",\r\n\t\t"taxAmount": "Suma del impuesto",\r\n\t\t"register": "Caja",\r\n\t\t"register_filter": "Caja",\r\n\t\t"employee": "Empleado",\r\n\t\t"employee_filter": "Empleado",\r\n\t\t"no_matching_records_found": "No se han encontrado coincidencias",\r\n\t\t"total": "Total",\r\n\t\t"timeIn": "Horario de registro de entrada",\r\n\t\t"timeOut": "Horario de registro de salida",\r\n\t\t"registerIn": "Registrar la entrada de la caja",\r\n\t\t"register_out": "Registrar la salida de la caja",\r\n\t\t"hours": "Horas",\r\n\t\t"confirmDelete": "¿Está seguro de que desea eliminar la sesión de trabajo?",\r\n\t\t"terminal0": "Terminal de efectivo",\r\n\t\t"terminal2": "Terminal de tarjeta de crédito",\r\n\t\t"selectTime": "Seleccionar horario",\r\n\t\t"selectDate": "Seleccionar fecha",\r\n\t\t"employeeError": "Seleccionar empleado",\r\n\t\t"registerInError": "Seleccionar horario de registro de entrada",\r\n\t\t"registerOutError": "Seleccionar horario de registro de salida",\r\n\t\t"clockInError": "Registrar entrada de evento ",\r\n\t\t"on": " el ",\r\n\t\t"alredy": " ya existe",\r\n\t\t"clockOutError": "Registrar salida de evento ",\r\n\t\t"store": "Tienda",\r\n\t\t"same": " El horario de Registro de entrada debe ser diferente al horario de Registro de salida"\r\n\t},\r\n\t"reports/transactionReport": {\r\n\t\t"sale": "Vender",\r\n\t\t"refund": "Reembolsar",\r\n\t\t"customer": "Cliente",\r\n\t\t"employee": "Empleado",\r\n\t\t"stores": "Tiendas",\r\n\t\t"register": "Caja",\r\n\t\t"period": "Período",\r\n\t\t"amountRange": "Rango de importe",\r\n\t\t"from": "Desde",\r\n\t\t"to": "Hasta",\r\n\t\t"format": "Formato",\r\n\t\t"export": "Exportar"\r\n\t},\r\n\t"reports/transactionReportHeaders": {\r\n\t\t"accountId": "ID de cuenta",\r\n\t\t"companyName": "Nombre de la empresa",\r\n\t\t"storeName": "Nombre de la tienda",\r\n\t\t"registerName": "Nombre de la caja",\r\n\t\t"transactionType": "Tipo de transacción",\r\n\t\t"transactionId": "ID de transacción",\r\n\t\t"orderId": "ID de pedido",\r\n\t\t"paymentMethod": "Método de pago",\r\n\t\t"paymentStatus": "Estado de pago",\r\n\t\t"cardNumber": "Número de tarjeta",\r\n\t\t"authCode": "Código de autenticación",\r\n\t\t"refNum": "Número de ref.",\r\n\t\t"total": "Total",\r\n\t\t"tips": "Propinas",\r\n\t\t"authorized": "Autorizado",\r\n\t\t"captured": "Obtenido",\r\n\t\t"paymentDate": "Fecha de pago",\r\n\t\t"employee": "Empleado",\r\n\t\t"customer": "Cliente",\r\n\t\t"customerAddressLine1": "Línea de Dirección del cliente 1 *",\r\n\t\t"customerAddressLine2": "Línea de Dirección del cliente 2 *",\r\n\t\t"customerCity": "Ciudad del cliente",\r\n\t\t"customerState": "Estado del cliente",\r\n\t\t"customerZip": "Código postal del cliente",\r\n\t\t"customerPhone": "Teléfono del cliente"\r\n\t},\r\n\t"agingReport": {\r\n\t\t"unexpectedError": "Lo sentimos, algo salió mal. Inténtelo de nuevo más tarde.",\r\n\t\t"searchPlaceholder": "Buscar por artículo, Nro. de serie, UPC",\r\n\t\t"id": "Identificación",\r\n\t\t"item": "Artículo",\r\n\t\t"department": "Departamento",\r\n\t\t"category": "Categoría",\r\n\t\t"store": "Tienda",\r\n\t\t"serial": "Nro. de serie",\r\n\t\t"cost": "Costo",\r\n\t\t"price": "Precio",\r\n\t\t"received": "Recibido",\r\n\t\t"age": "Edad (Días)"\r\n\t},\r\n\t"serialItemTracking": {\r\n\t\t"serialNo": "Número de serie:",\r\n\t\t"submit": "Enviar",\r\n\t\t"notFound": "No se encontró el número de serie.",\r\n\t\t"unexpectedError": "Lo sentimos, algo salió mal. Inténtelo de nuevo más tarde.",\r\n\t\t"productId": "Identificación del producto:",\r\n\t\t"productName": "Nombre de producto:",\r\n\t\t"serialItemId": "Identificación del artículo en serie:",\r\n\t\t"action": "Acción",\r\n\t\t"date": "Fecha",\r\n\t\t"from": "Desde",\r\n\t\t"to": "Hasta",\r\n\t\t"amount": "Importe",\r\n\t\t"employee": "Empleado",\r\n\t\t"receiving": "Recepción",\r\n\t\t"poReceiving": "Purchase Order Receiving",\r\n\t\t"storeTransfer": "Store Transfer",\r\n\t\t"sale": "Venta",\r\n\t\t"refund": "Reembolsar"\r\n\t},\r\n\t"payment/types": {\r\n\t\t"cash": "Efectivo",\r\n\t\t"check": "Cheque",\r\n\t\t"creditCard": "Tarjeta de crédito",\r\n\t\t"giftCertificate": "Certificado de regalo",\r\n\t\t"externalPayment": "Pago externo",\r\n\t\t"debitCard": "Tarjeta de débito"\r\n\t},\r\n\t"payment/statuses": {\r\n\t\t"pending": "Pendiente",\r\n\t\t"completed": "Terminado",\r\n\t\t"failed": "No realizado",\r\n\t\t"voided": "Anulado",\r\n\t\t"refunded": "Reembolsado",\r\n\t\t"hold": "Mantener",\r\n\t\t"declined": "Rechazado",\r\n\t\t"authorized": "Autorizado",\r\n\t\t"cancelled": "Cancelado",\r\n\t\t"partiallyRefunded": "Parcialmente reembolsado"\r\n\t},\r\n\t"taxReport": {\r\n\t\t"totalSales": "Importe total de ventas",\r\n\t\t"nonTaxableAmount": "Monto no imponible",\r\n\t\t"taxName": "Nombre del impuesto",\r\n\t\t"taxRate": "Tasa de impuestos",\r\n\t\t"taxableAmount": "Monto imponible",\r\n\t\t"taxCollected": "Impuesto recaudado",\r\n\t\t"taxAgency": "Agencia tributaria",\r\n\t\t"total": "Total"\r\n\t},\r\n\t"upgrade": {\r\n\t\t"dialogTitle": "Actualización",\r\n\t\t"wait": "La actualización está en curso. Espere.",\r\n\t\t"upgradeFinished": "La actualización se completó. Puede continuar trabajando con eHopper."\r\n\t},\r\n\t"taxes": {\r\n\t\t"select_tax": "Seleccionar un impuesto"\r\n\r\n\t},\r\n\t"taxes/taxesList": {\r\n\t\t"taxes_list": "Administrador de impuestos",\r\n\t\t"search_by_name_or_code": "Buscar impuesto por nombre o código",\r\n\t\t"new_tax": "Nuevo impuesto",\r\n\t\t"code": "Código",\r\n\t\t"name": "Nombre",\r\n\t\t"type": "Tipo",\r\n\t\t"rate_fee": "Tasa",\r\n\t\t"cascade": "Cascada",\r\n\t\t"isActive": "Está activo",\r\n\t\t"isCombined": "En combinación",\r\n\t\t"active": "Activo",\r\n\t\t"inactive": "Inactivo",\r\n\t\t"yes": "Sí",\r\n\t\t"no": "No",\r\n\t\t"taxAgency": "Agencia tributaria",\r\n\t\t"show_inactive": "Pantalla inactiva"\r\n\t},\r\n\t"taxes/taxManage": {\r\n\t\t"tax_name_must_be_unique": "El nombre del impuesto debe ser único.",\r\n\t\t"new_tax": "Nuevo impuesto",\r\n\t\t"edit_tax": "Editar impuesto",\r\n\t\t"tax_name": "Nombre del impuesto",\r\n\t\t"input_name": "Introducir el nombre",\r\n\t\t"cascade": "Cascada",\r\n\t\t"is_active": "Está activo",\r\n\t\t"tax_code": "Código de impuesto",\r\n\t\t"tax_type": "Tipo de impuesto",\r\n\t\t"select_tax_type": "Seleccionar tipo de impuesto",\r\n\t\t"tax_Agency_placeholder": "Agencia tributaria",\r\n\t\t"tax_Agency": "Agencia tributaria:",\r\n\t\t"singe_tax": "Impuesto simple",\r\n\t\t"combined_tax": "Impuesto combinado",\r\n\t\t"tax_component_name": "Nombre del componente del impuesto:",\r\n\t\t"tax_Agency_is_required": "Se requiere la Agencia tributaria",\r\n\t\t"tax_name_is_required": "Se requiere el nombre del impuesto",\r\n\t\t"x_is_required": "Se requiere \'{0}\' ",\r\n\t\t"rate_is_required": "Se requiere la tasa"\r\n\t},\r\n\r\n\t"taxes/taxTypes": {\r\n\t\t"standart": "Estándar",\r\n\t\t"flat": "Plana",\r\n\t\t"rate": "Tasa de impuestos"\r\n\t},\r\n\r\n\t"taxAgenies/taxAgeniesList": {\r\n\t\t"tax_agencies_list": "Agencias tributarias",\r\n\t\t"search_by_name": "Buscar agencia tributaria por nombre",\r\n\t\t"new_tax_agency": "Nueva agencia tributaria",\r\n\t\t"name": "Nombre",\r\n\t\t"isActive": "Está activo",\r\n\t\t"active": "Activo",\r\n\t\t"inactive": "Inactivo",\r\n\t\t"yes": "Sí",\r\n\t\t"no": "No",\r\n\t\t"are_you_sure_you_want_to_delete_selected_tax_agency": "¿Está seguro de que desea eliminar la Agencia tributaria seleccionada?",\r\n\t\t"are_you_sure_you_want_to_delete_selected_tax_agencies": "¿Está seguro de que desea eliminar las Agencias tributarias seleccionadas?",\r\n\t\t"the_tax_agency_has_taxes_assigned_please_delete_those_taxes_first": " La Agencia tributaria \'{0}\' tiene impuestos asignados. Primero elimine estos impuestos."\r\n\t},\r\n\t"taxAgenies/taxAgencyManage": {\r\n\t\t"input_name": "Nombre de agencia tributaria",\r\n\t\t"is_active": "Está activo",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"new_tax_agency": "Nueva agencia tributaria",\r\n\t\t"edit_tax_agency": "Editar agencia tributaria",\r\n\t\t"tax_agency_name_should_be_unique": "El nombre de la Agencia tributaria debe ser único",\r\n\t\t"such_tax_agency_exist_x": "La Agencia tributaria con el nombre \'{0}\' ya existe"\r\n\t},\r\n\r\n\t"taxCombinedDialog": {\r\n\t\t"simple": "Impuesto simple",\r\n\t\t"combined": "Impuesto combinado",\r\n\t\t"create": "Crear",\r\n\t\t"or": "O",\r\n\t\t"simple_tax_desc": " ",\r\n\t\t"combined_tax_desc": " "\r\n\t},\r\n\t"storeTransfer": {\r\n\t\t"storeOut": "Valor guardado fuera de la tienda",\r\n\t\t"storeIn": "Valor guardado dentro de la tienda",\r\n\t\t"search": "Buscar elemento por título o código",\r\n\t\t"id": "ID",\r\n\t\t"name": "Nombre",\r\n\t\t"upc": "UPC",\r\n\t\t"sku": "SKU",\r\n\t\t"cost": "Costo",\r\n\t\t"storeOutQuantity": "Guardar cantidad fuera de la tienda",\r\n\t\t"storeInQuantity": "Guardar cantidad dentro de la tienda",\r\n\t\t"transferQuantity": "Transferir cantidad",\r\n\t\t"transfer": "Transferir",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"unexpectedError": "Lo sentimos, algo salió mal. Inténtelo de nuevo más tarde.",\r\n\t\t"no_product_to_transfer": "No se seleccionó un producto para la transferencia",\r\n\t\t"storeTransferSuccess": "La transferencia de la tienda ha finalizado satisfactoriamente.",\r\n\t\t"storesAreEqualError": "El \'valor guardado fuera de la tienda\' no debe ser igual al \'valor guardado dentro de la tienda\'.",\r\n\t\t"transferQuantityError": "Debe ser numérico",\r\n\t\t"transferIntegerQuantityError": "Debe ser numérico",\r\n\t\t"storeTransferConfirmationTitle": "Confirmación de transferencia de la tienda",\r\n\t\t"storeTransferConfirmationMessage": "¿Está seguro de que desea hacer una transferencia?",\r\n\t\t"employee": "Empleado",\r\n\t\t"all": "Todos",\r\n\t\t"totalQuantity": "Cantidad total",\r\n\t\t"totalCost": "Costo total",\r\n\t\t"date": "Fecha",\r\n\t\t"storeTransferId": "Identificación de transferencia de la tienda",\r\n\r\n\t\t"back": "Volver",\r\n\t\t"details": "Detalles",\r\n\t\t"no_items_with_such_serial_in_out_store": "No se encontraron artículos con dicho número de serie en la tienda externa",\r\n\t\t"search_serials": "Buscar números de serie",\r\n\t\t"search_or_select_serials": "Buscar o seleccionar números de serie",\r\n\t\t"storeTransferForbidden": "Debe tener al menos dos tiendas activas para poder realizar la transferencia de la tienda",\r\n\t\t"search_or_select_serials": "Buscar o seleccionar números de serie",\r\n\t\t"no_search_criteria_provided": "No se suministraron criterios de búsqueda",\r\n\t\t"no_items_found_to_transfer": "No se encontraron artículos para transferir",\r\n\t\t"invalid_transfer_quantity_for_item": "Cantidad de transferencia inválida para el artículo: \'{0}\'",\r\n\t\t"exportList": "Lista de transferencias de la tienda",\r\n\t\t"exportListWithDetails": "Incluir detalles",\r\n\t\t"showFullList": "Mostrar lista",\r\n\t\t"previous": "Anterior",\r\n\t\t"next": "Siguiente",\r\n\t\t"startSearch": "Buscar un producto para agregar uno por uno o cambiar para mostrar la lista completa"\r\n\t},\r\n\t"poReceiving": {\r\n\t\t"done": "Listo",\r\n\t\t"Receive": "Recibir",\r\n\t\t"vendor": "Proveedor",\r\n\t\t"refNum": "Número de ref.",\r\n\t\t"poReceivingId": "Identificación de recepción de PO",\r\n\t\t"receivedQuantity": "Cantidad recibida",\r\n\t\t"reason": "Motivo",\r\n\t\t"receive": "Recibir",\r\n\t\t"poReceivingSuccess": "La recepción de PO ha finalizado satisfactoriamente.",\r\n\t\t"receivedQuantityError": "La cantidad recibida debe ser mayor que 0 y menor que 100000",\r\n\t\t"receivedIntegerQuantityError": "La cantidad recibida debe ser un número entero mayor que 0 y menor que 100000",\r\n\t\t"poReceivingConfirmationTitle": "Purchase Order Receiving",\r\n\t\t"poReceivingConfirmationMessage": "¿Está seguro de que desea hacer una recepción de PO?",\r\n\t\t"serialNumberNotUnique": "El número de serie debe ser único.",\r\n\t\t"na": "N/C",\r\n\t\t"found": "Encontrado",\r\n\t\t"lost": "Perdido",\r\n\t\t"stolen": "Robado",\r\n\t\t"broken": "Dañado",\r\n\t\t"gift": "Regalo",\r\n\t\t"reason": "Motivo",\r\n\t\t"reset": "Reiniciar",\r\n\t\t"other": "Otro",\r\n\t\t"showFullList": "Mostrar lista",\r\n\t\t"no_product_to_receive": "No se seleccionó un producto para recibir"\r\n\t},\r\n\t"inventoryAdjustment": {\r\n\t\t"done": "Listo",\r\n\t\t"vendor": "Proveedor",\r\n\t\t"refNum": "Número de ref.",\r\n\t\t"inventoryAdjustmentId": "Identificación de ajuste de inventario",\r\n\t\t"adjustedQuantity": "Cantidad ajustada",\r\n\t\t"reason": "Motivo",\r\n\t\t"adjust": "Ajustar",\r\n\t\t"inventoryAdjustmentSuccess": "El ajuste de inventario ha finalizado satisfactoriamente.",\r\n\t\t"adjustedQuantityError": "La cantidad ajustada debe ser mayor que {0} y menor que {1}",\r\n\t\t"adjustedIntegerQuantityError": "La cantidad ajustada debe ser un número entero mayor que {0} y menor que {1}",\r\n\t\t"inventoryAdjustmentConfirmationTitle": "Ajuste de inventario",\r\n\t\t"inventoryAdjustmentConfirmationMessage": "¿Está seguro de que desea hacer un ajuste de inventario?",\r\n\t\t"serialNumberNotUnique": "El número de serie debe ser único.",\r\n\t\t"na": "N/C",\r\n\t\t"found": "Encontrado",\r\n\t\t"lost": "Perdido",\r\n\t\t"stolen": "Robado",\r\n\t\t"broken": "Dañado",\r\n\t\t"gift": "Regalo",\r\n\t\t"reason": "Motivo",\r\n\t\t"reset": "Reiniciar",\r\n\t\t"other": "Otro"\r\n\t},\r\n\r\n\t"quickbooks": {\r\n\t\t"quickbooks": "QuickBooks",\r\n\t\t"welcome": "¡Bienvenido a la página de configuraciones de QuickBooks!<br>Configure sus parámetros de integración y programe transferencias de fechas.",\r\n\t\t"disconnect-text": "La conexión de eHopper y QuickBooks Online ha finalizado. <br>Para volver a conectarse a QuickBooks navegue al Directorio de aplicaciones e instale la aplicación.",\r\n\t\t"settings_header": "Configuraciones de QuickBooks",\r\n\t\t"Quickbooks Settings not found": "No se encontraron configuraciones de QuickBooks.",\r\n\t\t"financial_settings": "Configuraciones financieras",\r\n\t\t"payin_payout_sync": "Habilitar sincronización de importes recibidos/importes entregados",\r\n\t\t"default_inventory_accounts": "Cuentas de inventario predeterminadas",\r\n\t\t"cash_settings": "Sincronización de importes recibidos/importes entregados",\r\n\t\t"bank_deposit_account": "Cuenta bancaria:",\r\n\t\t"asset_account": "Cuenta de activos:",\r\n\t\t"income_account": "Cuenta de ingresos:",\r\n\t\t"expense_account": "Cuenta de gastos:",\r\n\t\t"data_transfer": "Transferencia de fecha",\r\n\t\t"data_sync": "Sincronización de datos programada",\r\n\t\t"settings": "Configuraciones",\r\n\t\t"save": "Guardar",\r\n\t\t"done": "Listo",\r\n\t\t"cancel": "Cancelar",\r\n\t\t"sync_accounts": "Buscar cuentas de QuickBooks",\r\n\t\t"sync": "Sincronizar ahora",\r\n\t\t"select_account": "Seleccione Cuenta...",\r\n\t\t"sync_at": "en:",\r\n\t\t"sync_time": "Tiempo de sincronización (UTC)",\r\n\t\t"QuickBooks Chart of Accounts": "Gráfico de cuentas de QuickBooks:",\r\n\t\t"Inherit from Department": "Heredar del Departamento",\r\n\t\t"Inherit from Category": "Heredar de la Categoría",\r\n\t\t"Inherit Accounts": "Heredar cuentas",\r\n\t\t"settings_saved": "¡Configuraciones guardadas!",\r\n\t\t"field_is_required": "El campo es obligatorio",\r\n\t\t"settings_not_saved": "No se guardan las configuraciones. Guarde las configuraciones primero.",\r\n\t\t"errors": "Errores",\r\n\t\t"errors_title": "QuickBooks - Errores de sincronización",\r\n\t\t"close": "Cerrar",\r\n\t\t"sync_details_title": "Detalles de la sincronización",\r\n\t\t"details": "Detalles",\r\n\t\t"sync_log": "Historial de sincronización",\r\n\t\t"syncedStores": "Tiendas",\r\n\t\t"syncedTaxes": "Impuestos",\r\n\t\t"syncedTaxAgencies": "Agencias tributarias",\r\n\t\t"syncedVendors": "Proveedores",\r\n\t\t"syncedLobs": "Departamentos",\r\n\t\t"syncedCategories": "Categorías",\r\n\t\t"syncedItems": "Productos",\r\n\t\t"syncedAccounts": "Cuentas",\r\n\t\t"syncedSales": "Ventas",\r\n\t\t"syncedRefunds": "Reembolsos",\r\n\t\t"syncedPayins": "Importes recibidos",\r\n\t\t"syncedPayouts": "Importes entregados",\r\n\t\t"syncedVoids": "Anulaciones",\r\n\t\t"payin_credit_account": "Cuenta de crédito del cajón de dinero:",\r\n\t\t"payin_debit_account": "Cuenta de débito del cajón de dinero:",\r\n\t\t"In Progress": "En proceso",\r\n\t\t"Completed": "Terminado",\r\n\t\t"Failed": "No realizado",\r\n\t\t"Cancelled": "Cancelado",\r\n\t\t"Unknown": "Desconocido",\r\n\t\t"syncedEntities": "Entidades sincronizadas",\r\n\t\t"date": "Fecha",\r\n\t\t"status": "Estado",\r\n\t\t"messages": "Mensajes",\r\n\t\t"token_is_expired_title": "Error de autenticación",\r\n\t\t"token_is_expired": "El token de inicio de sesión expiró, restablezca la conexión con QuickBooks.",\r\n\t\t"reconnect": "Volver a conectar",\r\n\t\t"sync_finished": "La sincronización ha finalizado",\r\n\t\t"error_occured": "Se ha producido un error",\r\n\t\t"synced_accounts": "{0} Las cuentas se sincronizaron",\r\n\t\t"synced_account": "{0} La cuenta se sincronizó"\r\n\r\n\t},\r\n\t"accountEdit": {\r\n\t\t"addStore": "Añadir tienda",\r\n\t\t"addRegister": "Añadir caja",\r\n\t\t"enableStore": "Habilitar tienda",\r\n\t\t"disableStore": "Deshabilitar tienda",\r\n\t\t"enableRegister": "Habilitar caja",\r\n\t\t"disableRegister": "Deshabilitar caja"\r\n\t},\r\n\t"multiselect": {\r\n\t\t"no_matches": "No se encontraron coincidencias",\r\n\t\t"enter_value": "Ingresar un valor",\r\n\t\t"select_all": "Seleccionar todo",\r\n\t\t"disableStore": "Deshabilitar tienda",\r\n\t\t"enableRegister": "Habilitar caja",\r\n\t\t"disableRegister": "Deshabilitar caja"\r\n\t}\r\n}';});


define('text!lang/fr.html',[],function () { return '{\r\n\t"meta": {\r\n\t\t"language": "Français",\r\n\t\t"code": "fr"\r\n\t},\r\n\t"messages": {\r\n\t\t"Bad Request": "Demande incorrecte",\r\n\t\t"Entity of type \'{0}\' not found by id \'{1}\'": "Entité de type \\"{0}\\" non trouvée par l\'identifiant \\"{1}\\".",\r\n\t\t"User \'{0}\' not found": "Utilisateur \\"{0}\\" non trouvé",\r\n\t\t"User not found": "Utilisateur non trouvé",\r\n\t\t"Employee not found": "Employé non trouvé",\r\n\t\t"Transaction not found": "Transaction non trouvée",\r\n\t\t"Employee \'employeeId={0}\' not found": "Employé \\"employeeId={0}\\" non trouvé",\r\n\t\t"Transaction \'transactionId={0}\' not found": "Transaction \\"transactionId={0}\\" non trouvée",\r\n\r\n\t\t"mustFreedomPlan": "Vous devez être client d’un <b>Plan Liberté</b> pour utiliser cette fonctionnalité.",\r\n\t\t"pleaseContactUs": "Veuillez nous contacter pour une mise à niveau."\r\n\t},\r\n\t"datatable": {\r\n\t\t"EmptyTable": "Aucune donnée disponible dans la table",\r\n\t\t"Info": "Afficher les entrées _START_ to _END_ of _TOTAL_",\r\n\t\t"InfoEmpty": "Affichage de 0 à 0 sur 0 entrées",\r\n\t\t"InfoFiltered": "(filtré dans le total des entrées _MAX_)",\r\n\t\t"InfoPostFix": "",\r\n\t\t"InfoThousands": ",",\r\n\t\t"LengthMenu": "Afficher les entrées _MENU_",\r\n\t\t"LoadingRecords": "Chargement en cours...",\r\n\t\t"Processing": "Traitement en cours...",\r\n\r\n\r\n\t\t"Search": "Rechercher :",\r\n\t\t"ZeroRecords": "Aucun enregistrement correspondant trouvé",\r\n\t\t"Paginate_First": "Premier",\r\n\t\t"Paginate_Last": "Dernier",\r\n\t\t"Paginate_Next": "Suivant",\r\n\t\t"Paginate_Previous": "Précédent",\r\n\t\t"Aria_SortAscending": ": activer pour effectuer un tri ascendant",\r\n\r\n\t\t"Aria_SortDescending": ": activer pour effectuer un tri descendant"\r\n\t},\r\n\t"import": {\r\n\t\t"Invalid file type": "Type de fichier invalide",\r\n\r\n\t\t"File is too big message": "Le fichier est trop gros. La taille max. est {0} Mo. Le découper en fichiers plus petits et les télécharger séparément."\r\n\t},\r\n\t"header": {},\r\n\t"login": {\r\n\t\t"back_office": "Service administratif",\r\n\t\t"you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked": "Vous avez dépassé le nombre de tentatives de connexion autorisées. L\'administration de votre compte est bloquée.",\r\n\r\n\r\n\t\t"invalid_pin": "Code PIN invalide",\r\n\t\t"you_are_not_authorized_to_login": "Vous n\'êtes pas autorisé(e) à vous connecter.",\r\n\t\t"version_": "Version :",\r\n\t\t"termsAndConditionsTitle": "Terms and conditions",\r\n\t\t"termsAndConditionsButton": "Submit",\r\n\t\t"termsAndConditionsAgree": " I agree with terms and conditions"\r\n\t},\r\n\r\n\t"account": {\r\n\t\t"back_office": "Arrière-guichet",\r\n\t\t"account_id": "Identifiant du compte",\r\n\t\t"continue": "Continuer",\r\n\t\t"account_is_required": "Un compte eHopper est nécessaire.",\r\n\t\t"account_is_invalid": "Le compte est invalide."\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\r\n\t"navigationpanel": {},\r\n\r\n\t"apps": {\r\n\t\t"installedApps": "Applis installées",\r\n\t\t"apps": "Applis",\r\n\t\t"recommendedForYou": "Recommandé pour vous",\r\n\t\t"freedomPackage": "Offre Liberté",\r\n\t\t"freedomPlanOnly": "Plan Liberté seulement",\r\n\t\t"freeTrial": "Essai gratuit disponible",\r\n\t\t"eHopper": "par eHopper",\r\n\t\t"install": "Installer",\r\n\t\t"uninstall": "Désinstaller"\r\n\r\n\t},\r\n\r\n\t"apps/marketingAndLoyalty": {\r\n\t\t"name": "Marketing et fidélité",\r\n\t\t"company": "par Marketing Box",\r\n\t\t"packageName": "À partir de 29 $/mois",\r\n\r\n\t\t"useTheLoyalty": "L\'appli Marketing et fidélité permet d\'établir une communication interactive exclusive avec les clients. Vous pouvez créer un club mobile et construire une base de données clients avec adhésion facultative pour l\'envoi de promotions commerciales par SMS.",\r\n\t\t"features": "Fonctions",\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t"listItem1": "Option d\'adhésion, inscriptions et échanges de coupons illimités et GRATUITS",\r\n\t\t"listItem2": "Possibilité d\'envoyer des SMS sur les offres spéciales et les promotions aux clients",\r\n\t\t"listItem3": "Fournir des liens vers des sites Web mobiles ou des téléchargements d\'applis personnalisées",\r\n\t\t"listItem4": "Envoyer des demandes « J\'aime » de Facebook directement de votre kiosque",\r\n\t\t"listItem5": "Envoyez des commandes de coupons de fidélité numériques pouvant être facilement suivis",\r\n\t\t"listItem6": "Accès à des logiciels de marketing mobile avec des fonctions supplémentaires",\r\n\t\t"listItem7": "Renseignez les outils de gestion et de rapports à l\'aide de logiciels du Web",\r\n\t\t"listItem8": "Éliminez les cartes à perforer, qui sont souvent perdues, égarées ou oubliées",\r\n\t\t"marketingPackageStarter": "Commencer 29 $/mois",\r\n\t\t"marketingPackageGrow": "Grandir 49 $/mois"\r\n\t},\r\n\r\n\t"apps/clickInClockOut": {\r\n\r\n\r\n\r\n\r\n\t\t"name": "Pointer en arrivant / Pointer en partant",\r\n\t\t"listItem1": "Cette appli est seulement accessible aux utilisateurs du Plan Liberté.",\r\n\t\t"listItem2": "Cette appli permettra à vos employés de pointer en arrivant et en partant, et aux cadres de contrôler leurs heures de travail dans l\'arrière-guichet. Les employés peuvent pointer sur la caisse en arrivant et en partant pour enregistrer leurs heures de début et de fin de travail.",\r\n\t\t"listItem3": "Lorsqu\'un employé a pointé en arrivant et qu\'il utilise eHopper, ses informations et activités sont automatiquement synchronisées avec l\'arrière-guichet."\r\n\t},\r\n\t"apps/controlNumber": {\r\n\t\t"name": "N° de contrôle de Porto Rico",\r\n\t\t"theControlNumberApp": "L\'appli Numéro de contrôle est conçue pour les fabricants, les distributeurs et les fournisseurs de points de vente et de caisses enregistreuses électroniques et/ou les entreprises qui recherchent une méthode transparente pour se conformer aux lois et réglementations fiscales de Porto Rico.",\r\n\t\t"toBeginIntegration": "À intégrer avec votre Numéro de contrôle de Porto Rico :",\r\n\t\t"setupYourStoreLocation": "Paramétrez l\'emplacement de vos magasins :",\r\n\t\t"setPuertoRico": "Paramétrez Porto Rico comme Pays du magasin dans Paramètres du magasin.",\r\n\t\t"setupYourCityAndStateTaxes": "Paramétrez vos taxes de ville et d\'état :",\r\n\t\t"youMustSetupTwoTaxes": "Vous devez paramétrer deux types de taxes pour le(s) magasin(s). La première taxe doit comporter le code de taxe « STATE_TAX » et la deuxième doit comporter le code de taxe « CITY_TAX ».",\r\n\t\t"note": "Note :",\r\n\t\t"youCannotSetup": "Vous ne pouvez pas définir plus de deux taxes pour un magasin à Porto Rico, sinon vous ne recevrez pas de numéro de contrôle pour les commandes passées.",\r\n\t\t"setupYourPRFiscalService": "Paramétrez votre jeton d\'accès au service fiscal de PR :",\r\n\t\t"assignTheToken": "Attribuez le jeton à une caisse dans Paramètres de la caisse.",\r\n\t\t"toGetAdditionalTokens": "Pour recevoir des jetons supplémentaires, contactez bcfiscal@bcposgroup.com pour obtenir plus d\'informations.",\r\n\t\t"CityTax": "Taxe de la ville",\r\n\t\t"StateTax": "Taxe de l\'état",\r\n\t\t"puertoRico-tax": "Taxe de Porto Rico"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\r\n\t"apps/orderReceiving": {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t"name": "Réception de commande d\'achat",\r\n\t\t"intro": "Avec l\'appli Réception de commande d\'achat, vous pouvez facilement commander et recevoir les produits d\'un fournisseur.",\r\n\t\t"toProcess": "Pour traiter une réception de commande d\'achat :",\r\n\t\t"toDo1": "Sélectionnez un fournisseur",\r\n\t\t"toDo2": "Sélectionnez le Magasin de réception",\r\n\t\t"toDo3": "Définissez les produits et les quantités dont vous avez besoin",\r\n\t\t"logInfo": "Le journal de vos commandes traitées sera disponible dans le Rapport des réceptions de commandes d\'achat."\r\n\t},\r\n\r\n\t"apps/storeTransfer": {\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t"name": "Transfert de magasin",\r\n\t\t"intro": "Avec l\'appli Transfert de magasin, vous pouvez facilement déplacer des produits du stock d\'un magasin à un autre.",\r\n\t\t"toProcess": "Pour effectuer un transfert :",\r\n\t\t"toDo1": "Sélectionnez le Magasin d\'envoi",\r\n\t\t"toDo2": "Sélectionnez le Magasin de réception",\r\n\t\t"toDo3": "Définissez les produits et les quantités que vous souhaitez transférer.",\r\n\t\t"logInfo": "Le journal de vos transferts sera disponible dans le Rapport des transferts de magasin."\r\n\t},\r\n\t"apps/creditDebitCard": {\r\n\r\n\r\n\r\n\r\n\t\t"name": "Intégration du point de vente crédit / débit",\r\n\t\t"acceptAnyType": "Vous permet de disposer d\'une plate-forme centralisée de points de vente, de services et de communication qui offre un fonctionnement plus efficace, des transactions simplifiées et plus rapides, et stocke toutes les données en facilitant leur accès.",\r\n\t\t"keyBenefits": "Les avantages principaux sont :",\r\n\t\t"listItem1": "Utilisez les services marchands partenaires de eHopper ou vos propres services marchands",\r\n\t\t"listItem2": "Entièrement intégré aux points de vente eHopper",\r\n\r\n\t\t"listItem3": "Accepter n\'importe quel type de paiement à n\'importe quelle caisse du magasin",\r\n\t\t"listItem4": "Prend en charge les cartes à puce EMV, les lecteurs magnétiques et les puces NFC",\r\n\r\n\r\n\t\t"listItem5": "Simplifie les transactions et accélère le délai de finalisation, ce qui améliore le service au client",\r\n\t\t"listItem6": "Plus de ventes et de clients satisfaits."\r\n\t},\r\n\t"apps/updateOrderOnAnyRegister": {\r\n\t\t"name": "Multi-caisses",\r\n\r\n\r\n\t\t"withTheMulti": "Avec l\'appli Multi-caisses, les employés peuvent mettre les commandes à jour à partir de n\'importe quelle caisse du magasin.",\r\n\t\t"specifically": "Vous pouvez effectuer les opérations sur n\'importe quelle caisse :",\r\n\t\t"list1Item1": "Payer la commande",\r\n\t\t"list1Item2": "Mettre à jour la commande",\r\n\t\t"list1Item3": "Enregistrer la commande",\r\n\t\t"list1Item4": "Rembourser la commande",\r\n\t\t"list1Item5": "Annuler la commande",\r\n\r\n\t\t"list1Item6": "Mettre à jour le statut du traitement",\r\n\t\t"list1Item7": "Ajouter des pourboires",\r\n\r\n\r\n\t\t"list1Item8": "Voir le contenu / l\'état de la commande",\r\n\t\t"andWhenStore": "Lors de l\'utilisation de cette appli, les actions suivantes sont restreintes :",\r\n\t\t"list2Item1": "Paiement des commandes enregistrées",\r\n\t\t"list2Item2": "Mise à jour des commandes",\r\n\t\t"list2Item3": "Remboursement des commandes",\r\n\t\t"list2Item4": "Annulation des commandes",\r\n\r\n\r\n\t\t"list2Item5": "Mise à jour du traitement de la commande",\r\n\t\t"list2Item6": "Réimpression des factures / reçus des commandes",\r\n\t\t"installAndUninstall": "Notes",\r\n\r\n\r\n\r\n\t\t"note1": "La caisse doit être en mode « en ligne ».",\r\n\t\t"note2": "NE PAS synchroniser les caisses avant ou pendant l\'installation.",\r\n\t\t"note3": "N\'accédez pas aux fonctions de commande avant que toutes les caisses aient été enregistrées."\r\n\t},\r\n\r\n\t"apps/variants": {\r\n\r\n\r\n\r\n\r\n\r\n\t\t"name": "Matrice d\'inventaire",\r\n\t\t"description": "Utilisez la matrice d\'inventaire pour créer des produits avec plusieurs attributs. Par exemple, une chemise peut être définie par son style, sa couleur ou sa taille. Chaque combinaison d\'attributs est unique, possède sa propre UGS et peut avoir son propre prix.",\r\n\t\t"feature1": "Aide à l\'organisation des stocks importants et fluidifie la gestion des stocks",\r\n\t\t"feature2": "Des variantes peuvent être paramétrées rapidement par les cadres et les opérateurs de l\'arrière-guichet",\r\n\t\t"feature3": "Suivez les ventes sur les rapports"\r\n\t},\r\n\r\n\t"apps/productTax": {\r\n\r\n\r\n\r\n\r\n\r\n\t\t"name": "Attribution de la taxe du produit",\r\n\t\t"description": "Avec l\'appli d\'attribution de la taxe du produit, vous pouvez paramétrer et superviser les taxes individuelles appliquées à des articles spécifiques de vos stocks. Ceci annulera le taux de taxe par défaut paramétré pour votre entreprise. Cette appli facilite grandement le traitement des transactions comportant des articles qui exigent un taux de taxe différent sans avoir à modifier les paramètres de taxes par défaut dans l\'arrière-guichet.",\r\n\t\t"feature1": "Paramétrez les taux de taxes individuels de tous les articles en stock",\r\n\t\t"feature2": "Vous donne plus de flexibilité et de facilité lorsque vous vendez des articles qui ont des taux de taxes différents",\r\n\t\t"feature3": "Facilement paramétré et supervisé par l\'arrière-guichet"\r\n\t},\r\n\r\n\t"apps/quickbooks": {\r\n\t\t"name": "QuickBooks",\r\n\r\n\t\t"description": "Maintenez les points de vente eHopper et QuickBooks Online synchronisés. Importez automatiquement vos transactions de vente, vos charges, vos stocks, vos taxes, etc.",\r\n\t\t"features": "Fonctions",\r\n\t\t"feature1": "Importez les transactions de ventes, y compris les taxes",\r\n\r\n\r\n\r\n\r\n\t\t"feature2": "Importez les charges comme les dépôts et les retraits, les remboursements, etc.",\r\n\t\t"feature3": "Synchronisation des graphiques de votre compte",\r\n\t\t"feature4": "Fonctionnalité de sites multiples",\r\n\t\t"note1": "IMPORTANT : l\'intégration dans QuickBooks est actuellement disponible avec une seule ligne d\'impôt. Il sera bientôt possible d\'ajouter plusieurs lignes d\'impôts."\r\n\t},\r\n\r\n\t"apps/orderFulfilment": {\r\n\r\n\r\n\r\n\r\n\r\n\t\t"name": "Gestion des commandes",\r\n\t\t"description": "La Gestion des commandes vous permet d\'organiser, de modifier et de superviser toute l\'activité des commandes dans votre entreprise.  Avec cette fonction, vous pourrez surveiller chaque commande de sa création jusqu\'à sa finalisation.",\r\n\t\t"feature1": "Gérez le statut des commandes : Nouvelle, En préparation, En traitement, Traitée",\r\n\t\t"feature2": "Recherchez instantanément des commandes spécifiques pour référencer et vérifier l\'historique des clients",\r\n\t\t"feature3": "Retrouvez d\'autres informations comme les pourboires donnés et les moyens de paiement utilisés et utilisez les numéros de référence pour les retrouver plus facilement"\r\n\t},\r\n\r\n\t"apps/menuBuilder": {\r\n\r\n\t\t"name": "Développeur de menus",\r\n\t\t"inventory_btn": "Développeur de menus",\r\n\r\n\t\t"description": "Développez des menus pour les catégories et les articles.",\r\n\t\t"drop_to_remove": "Déposez les produits ici pour les supprimer",\r\n\t\t"drop_item_here": "Déposer l\'article ici",\r\n\t\t"btn_save": "Enregistrer",\r\n\t\t"btn_cancel": "Annuler",\r\n\t\t"sortNone": "Aucun(e)",\r\n\t\t"sortName": "Nom",\r\n\t\t"sortNameDesc": "Noms ascendants",\r\n\t\t"sortPrice": "Prix",\r\n\t\t"sortPriceDesc": "Prix descendants",\r\n\t\t"sortCreationDate": "Date de création",\r\n\t\t"sortCreationDateDesc": "Dates de création descendantes",\r\n\t\t"other": "Autre",\r\n\r\n\r\n\t\t"labelArrange": "les articles de cette catégorie seront réorganisés automatiquement",\r\n\t\t"unexpectedError": "Désolé, un problème est survenu. Veuillez réessayer plus tard."\r\n\t},\r\n\t"shell": {\r\n\t\t"apps": "Applis",\r\n\t\t"appDirectory": "Répertoire des applis",\r\n\t\t"account": "Sélectionner un compte",\r\n\t\t"login": "Connexion",\r\n\t\t"dashboard": "Tableau de bord",\r\n\t\t"orders": "Commandes",\r\n\t\t"order_details": "Détails de la commande",\r\n\t\t"inventory": "Stocks",\r\n\t\t"products": "Produits",\r\n\t\t"product": "Produit",\r\n\t\t"import_inventory": "Importer les stocks",\r\n\t\t"departments": "Services",\r\n\t\t"department": "Service",\r\n\t\t"categories": "Catégories",\r\n\t\t"category": "Catégorie",\r\n\t\t"modifiers": "Modificateurs",\r\n\t\t"modifier": "Modificateur",\r\n\t\t"storeTransfer": "Transfert de magasin",\r\n\t\t"poReceiving": "Réception du bon de commande",\r\n\t\t"adjustment": "Ajustement des stocks",\r\n\t\t"customers": "Clients",\r\n\t\t"import_customers": "Importer les clients",\r\n\t\t"vendor_list": "Liste des fournisseurs",\r\n\t\t"manage_vendor": "Gérer le fournisseur",\r\n\t\t"vendors": "Fournisseurs",\r\n\t\t"employees": "Employés",\r\n\t\t"employee_list": "Liste des employés",\r\n\t\t"manage_employee": "Gérer l\'employé",\r\n\t\t"reporting": "Rapports",\r\n\t\t"tips_report": "Rapport sur les pourboires",\r\n\t\t"z_report": "Rapport Z (rapport de fermeture de caisse)",\r\n\t\t"z_report_details": "Informations du rapport Z",\r\n\t\t"settings": "Paramètres",\r\n\t\t"store_settings": "Enregistrer les paramètres",\r\n\t\t"enterprise_settings": "Paramètres de la société",\r\n\t\t"register_settings": "Paramètres de la caisse",\r\n\t\t"manage_register_settings": "Gérer les paramètres de la caisse",\r\n\t\t"new_register": "Nouvelle caisse",\r\n\t\t"tender_settings": "Paramètres de la remise",\r\n\t\t"tax_manager": "Responsable de la fiscalité",\r\n\t\t"manage_taxes": "Nouvelle / Modifier la taxe",\r\n\t\t"help": "Aide",\r\n\t\t"logout": "Déconnexion",\r\n\t\t"product_mix_report": "Rapport sur la gamme de produits",\r\n\t\t"taxReport": "Rapport sur les taxes",\r\n\t\t"transactionsReport": "Rapport sur les transactions",\r\n\t\t"agingReport": "Vieillissement des stocks",\r\n\t\t"serialItemTracking": "Rapport de suivi d\'un article de série",\r\n\t\t"storeTransfersReport": "Rapport de transferts de magasin",\r\n\t\t"storeTransfersDetails": "Détails de transfert de magasin",\r\n\t\t"poReceivingReport": "Rapport de réception du bon de commande",\r\n\t\t"poReceivingDetails": "Détails de réception du bon de commande",\r\n\r\n\t\t"exportReport": "Exporter",\r\n\t\t"quickbooks": "QuickBooks Online",\r\n\t\t"quickbooks-disconnect": "Se déconnecter de QuickBooks Online",\r\n\r\n\t\t"menuBuilder": "Développeur de menus",\r\n\t\t"clockIn": "Horloge",\r\n\t\t"unsupportedBrowser": "Navigateur non pris en charge.",\r\n\t\t"taxAgenciesList": "Agences fiscales",\r\n\t\t"manage_taxAgencies": "Gérer l\'agence fiscale"\r\n\t},\r\n\t"unsupported": {\r\n\t\t"browser": "Votre navigateur Web n\'est pas pris en charge.",\r\n\t\t"latestVersion": "Veuillez utiliser la version la plus récente de Google Chrome pour Windows 7 à 10 ou Android 4.4.2+",\r\n\t\t"yourVersion": "Vous utilisez actuellement {0}&nbsp;{1} sur {2}&nbsp;{3}.",\r\n\t\t"qb_latestVersion": "Pour accéder à toutes les fonctions, veuillez utiliser la version la plus récente de Google Chrome pour Windows 7 à 10 ou Android 4.4.2+.",\r\n\t\t"qb_yourVersion": "Vous utilisez actuellement {0}&nbsp;{1} sur {2}&nbsp;{3} ce qui vous autorise à gérer l\'appli QuickBooks."\r\n\r\n\r\n\t},\r\n\r\n\t"categories/categoriesList": {\r\n\t\t"new_category": "Nouvelle catégorie",\r\n\t\t"toggle_dropdown": "Inverser la liste déroulante",\r\n\t\t"new_department": "Nouveau service",\r\n\t\t"new_item": "Nouvel article",\r\n\t\t"new_modifier": "Nouveau modificateur",\r\n\t\t"category_name": "Nom de la catégorie",\r\n\t\t"department_name": "Nom du service",\r\n\t\t"status": "Statut",\r\n\t\t"search_for_category": "Rechercher une catégorie",\r\n\t\t"are_you_sure_you_want_to_delete_selected_category": "Voulez-vous vraiment supprimer la catégorie sélectionnée ?",\r\n\t\t"are_you_sure_you_want_to_delete_selected_categories": "Êtes-vous sûr de vouloir supprimer les catégories sélectionnées?",\r\n\t\t"the_category_has_products_assigned_please_delete_those_products_first": "La catégorie \\"{0}\\" a des produits attribués. Supprimer d\'abord ces produits.",\r\n\t\t"the_category_": "La catégorie",\r\n\t\t"active": "Actif(ve)",\r\n\t\t"inactive": "Inactif(ve)"\r\n\t},\r\n\t"categories/categoryManage": {\r\n\t\t"category_name": "Nom de la catégorie",\r\n\t\t"category_short_name": "Nom court de la catégorie",\r\n\t\t"category_description": "Description de la catégorie",\r\n\t\t"department": "Service",\r\n\t\t"select_department": "Sélectionner le service...",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"input_name": "Saisir le nom",\r\n\t\t"input_short_name": "Saisir le nom court",\r\n\t\t"input_description": "Saisir la description",\r\n\t\t"new_category": "Nouvelle catégorie",\r\n\t\t"edit_category": "Modifier la catégorie",\r\n\t\t"category_name_must_be_unique": "Le nom de la catégorie doit être unique.",\r\n\t\t"the_category_has_products_assigned_please_delete_those_products_first": "La catégorie a des produits qui lui sont attribués. Supprimer d\'abord ces produits.",\r\n\t\t"general": "Général",\r\n\t\t"localization": "Localisation",\r\n\t\t"select_color": "Sélectionner la couleur",\r\n\r\n\t\t"color": "Couleur"\r\n\t},\r\n\t"categories/categoryManageNew": {\r\n\t\t"category_name": "Nom de la catégorie",\r\n\t\t"category_description": "Description de la catégorie",\r\n\t\t"department": "Service",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"input_name": "Saisir le nom",\r\n\t\t"new_category": "Nouvelle catégorie",\r\n\t\t"category_name_must_be_unique": "Le nom de la catégorie doit être unique."\r\n\t},\r\n\t"customers/importCustomers": {\r\n\t\t"file_to_import": "Fichier à importer",\r\n\t\t"browse_csv_file": "Parcourir le fichier *.csv",\r\n\t\t"browse": "Parcourir",\r\n\t\t"uploading": "Téléchargement ascendant en cours",\r\n\t\t"importing": "Importation en cours",\r\n\t\t"done": "TERMINÉ",\r\n\t\t"cancel": "Annuler",\r\n\t\t"file_is_too_big_max_size_is_{0}_mb_please_split_it_to_smaller_files_and_update_them_individually": "Le fichier est trop gros. La taille max. est {0} Mo. Le découper en fichiers plus petits et les télécharger séparément.",\r\n\t\t"file_is_too_big_max_size_is_mb_please_split_it_to_smaller_files_and_update_them_individually": "Le fichier est trop gros. La taille max. est {0} Mo. Le découper en fichiers plus petits et les télécharger séparément.",\r\n\t\t"the_error_was_detected_in_line_while_import_no_customers_were_imported_please_fix_problem_and_repeat_import": "L\'erreur a été détectée en ligne {0} au cours de l\'importation. Aucun client n\'a été importé. Corriger le problème et relancer l\'importation. {1}",\r\n\t\t"error_importing_": "Erreur au cours de l\'importation",\r\n\t\t"processing": "Traitement en cours...",\r\n\t\t"abort": "Interruption de l\'opération",\r\n\t\t"file_upload_failed_": "Le téléchargement ascendant du fichier a échoué.",\r\n\t\t"imported_lines": "{0} lignes importées.",\r\n\t\t"error_in_file_format_error_line_message_": "Erreur de format de fichier. Erreur en ligne n°{0}. Message :",\r\n\t\t"Number of columns in line {0} is less then expected": "Le nombre de colonnes de la ligne {0} est plus petit que prévu. Le montant attendu des colonnes est : {1}.",\r\n\t\t"Number of columns in line {0} is more then expected": "Le nombre de colonnes en ligne {0} est supérieur au nombre attendu. Le montant attendu des colonnes est : {1}.",\r\n\t\t"Invalid format of \'CustomerId\'": "Format de \\"CustomerId\\" invalide",\r\n\t\t"Field \'{0}\' is required": "Le champ \\"{0}\\" est obligatoire",\r\n\t\t"Field \'{0}\' has length greater than {1}": "La longueur du champ \\"{0}\\" est supérieure à {1}.",\r\n\t\t"Phone format \'{0}\' is invalid": "Le format du numéro de téléphone \\"{0}\\" est invalide.",\r\n\t\t"Email format \'{0}\' is invalid": "Le format de l\'adresse électronique \\"{0}\\" est invalide",\r\n\t\t"Zip format \'{0}\' is invalid": "Le format du code postal \\"{0}\\" est invalide.",\r\n\t\t"Zip should be less than 11 symbols": "Le code postal doit comporter moins de 11 symboles : \\"{0}\\".",\r\n\t\t"State format \'{0}\' is invalid": "Le format de l\'état \\"{0}\\" est invalide.",\r\n\t\t"Invalid country code \'{0}\'": "Code pays invalide : \\"{0}\\"",\r\n\t\t"Unexpected Import Error": "Erreur d\'importation inattendue.",\r\n\t\t"Unexpected Import Error2": "Erreur d\'importation inattendue : {0}",\r\n\t\t"Import was completed successfully": "L\'importation s\'est bien terminée.",\r\n\t\t"Customers import is already running": "L\'importation des clients a déjà été lancée."\r\n\r\n\t},\r\n\t"dashboard/dashboard": {\r\n\t\t"today": "Aujourd\'hui",\r\n\t\t"yesterday": "Hier",\r\n\t\t"this_week": "Cette semaine",\r\n\t\t"month-to-date": "Cumul du mois",\r\n\t\t"version_": "Version :",\r\n\t\t"noteMessageNotFound": "(note mesage not found)"\r\n\t},\r\n\t"dashboard/widgets/goLive": {\r\n\t\t"go_live_date_is_in_x_days": "La mise en service est dans {0} jours - {1}"\r\n\t},\r\n\t"dashboard/widgets/salesTransactions": {\r\n\t\t"total_sales_by_category": "Ventes totales par catégorie",\r\n\t\t"statistic": "Statistique",\r\n\t\t"no_data_available_for_selected_period": "Aucune donnée disponible pour la période sélectionnée",\r\n\t\t"total_sales": "Ventes totales"\r\n\t},\r\n\t"dashboard/widgets/stats": {\r\n\t\t"new_customers": "Nouveaux clients",\r\n\t\t"repeat_customers": "Répéter les clients",\r\n\t\t"total_sales": "Ventes totales",\r\n\t\t"total_transactions": "Transactions totales"\r\n\t},\r\n\t"dashboard/widgets/support": {\r\n\t\t"support_team": "Équipe d\'assistance",\r\n\t\t"email_me": "Envoyez-moi un e-mail",\r\n\t\t"the_subject_of_the_mail": "L\'objet du mail",\r\n\t\t"hide": "Masquer",\r\n\t\t"show": "Afficher",\r\n\t\t"accountId": "ID du compte :",\r\n\t\t"webPosUrl": "URL du point de vente Web :",\r\n\t\t"onlineHelp": "Aide en ligne :",\r\n\t\t"knowledgeBase": "Base de connaissances"\r\n\t},\r\n\t"dashboard/widgets/tasks": {\r\n\t\t"getting_started": "Mise en route",\r\n\t\t"my_custom_task": "Ma tâche personnalisée",\r\n\t\t"you_have_created_50_tasks_which_is_a_limit_delete_some_old_tasks_to_create_a_new_one": "Vous avez créé 50 tâches et atteint la limite. Supprimez certaines tâches anciennes pour en créer une nouvelle."\r\n\t},\r\n\t"departments/departmentManage": {\r\n\t\t"department_name": "Nom du service",\r\n\t\t"department_description": "Description du service",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"input_name": "Saisir le nom",\r\n\t\t"input_description": "Saisir la description",\r\n\t\t"new_department": "Nouveau service",\r\n\t\t"edit_department": "Modifier le service",\r\n\t\t"department_name_must_be_unique": "Le nom du service doit être unique.",\r\n\t\t"the_department_has_categories_assigned_please_delete_those_categories_first": "Le service a des catégories qui lui sont attribuées. Supprimer d\'abord ces catégories.",\r\n\t\t"failed_to_save_department": "L\'enregistrement du service a échoué."\r\n\t},\r\n\t"departments/departmentsList": {\r\n\t\t"new_department": "Nouveau service",\r\n\t\t"toggle_dropdown": "Inverser la liste déroulante",\r\n\t\t"new_category": "Nouvelle catégorie",\r\n\t\t"new_item": "Nouvel article",\r\n\t\t"new_modifier": "Nouveau modificateur",\r\n\t\t"department_name": "Nom du service",\r\n\t\t"status": "Statut",\r\n\t\t"search_for_department": "Rechercher un service",\r\n\t\t"are_you_sure_you_want_to_delete_selected_department": "Voulez-vous vraiment supprimer le service sélectionné ?",\r\n\t\t"are_you_sure_you_want_to_delete_selected_departments": "Êtes-vous sûr de vouloir supprimer les services sélectionnés?",\r\n\t\t"the_department_has_categories_assigned_please_delete_those_categories_first": "Le service \\"{0}\\" a des catégories attribuées. Supprimer d\'abord ces catégories.",\r\n\t\t"the_department_": "Le service",\r\n\t\t"active": "Actif(ve)",\r\n\t\t"inactive": "Inactif(ve)"\r\n\t},\r\n\t"employees/employeeManage": {\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"new_employee": "Nouvel(le) employé(e)",\r\n\t\t"edit_employee": "Modifier un(e) employé(e)",\r\n\t\t"general": "Général",\r\n\t\t"contact_info": "Coordonnées",\r\n\t\t"localization": "Localisation",\r\n\t\t"userPinExists": "Il existe déjà un utilisateur avec ce code PIN.",\r\n\t\t"employeeExists": "Il existe déjà un(e) employé(e) ayant les mêmes nom de famille, prénom, adresse électronique et numéro de téléphone.",\r\n\t\t"should_be_equal_to_pin": "Le champ doit être égal au code PIN"\r\n\t},\r\n\t"employees/employeesList": {\r\n\t\t"first_name": "Prénom",\r\n\t\t"last_name": "Nom de famille",\r\n\t\t"email": "Adresse électronique",\r\n\t\t"phone": "Téléphone",\r\n\t\t"role": "Rôle",\r\n\t\t"status": "Statut",\r\n\t\t"new_employee": "Nouvel(le) employé(e)",\r\n\t\t"search_for_employee": "Rechercher un(e) employé(e)",\r\n\t\t"active": "Actif(ve)",\r\n\t\t"inactive": "Inactif(ve)",\r\n\t\t"allStores": "Tous les magasins",\r\n\t\t"stores": " Magasin(s)",\r\n\t\t"store": " Magasin"\r\n\t},\r\n\t"employees/manage-tabs/contactTab": {\r\n\t\t"email": "Adresse électronique",\r\n\t\t"phone": "Téléphone",\r\n\t\t"address": "Adresse",\r\n\t\t"country": "Pays",\r\n\t\t"state": "État",\r\n\t\t"city": "Ville",\r\n\t\t"zip": "Code postal",\r\n\t\t"choose_country": "Choisir un pays...",\r\n\t\t"choose_state": "Choisir un état..."\r\n\t},\r\n\t"employees/manage-tabs/generalTab": {\r\n\t\t"first_name": "Prénom",\r\n\t\t"last_name": "Nom de famille",\r\n\r\n\r\n\r\n\r\n\r\n\t\t"language": "Langue",\r\n\t\t"pin": "Code PIN",\r\n\t\t"confirm_pin": "Confirmer le code PIN",\r\n\t\t"role": "Rôle",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"select_role": "Sélectionner un rôle...",\r\n\r\n\t\t"stores": "Magasins :",\r\n\t\t"assignedOnly": "Assigné seulement",\r\n\r\n\t\t"searchStore": "Recherche de magasin(s) à sélectionner",\r\n\t\t"selectStore": "Sélectionner le(s) magasin(s)"\r\n\t},\r\n\t"employees/manage-tabs/localizationTab": {\r\n\t\t"pos_language": "Langue du point de vente",\r\n\t\t"bo_language": "Langue du service administratif",\r\n\t\t"select_pos_language": "Sélectionner la langue du point de vente...",\r\n\t\t"select_bo_language": "Sélectionner la langue du service administratif...",\r\n\t\t"same_as_pos_language": "Comme le langage du POS",\r\n\t\t"administrator": "Administrateur",\r\n\t\t"backOfficeOperator": "Opérateur de l\'arrière-guichet",\r\n\t\t"salesManager": "Directeur commercial",\r\n\t\t"salesPerson": "Vendeur(se)"\r\n\t},\r\n\t"inventory/importInventory": {\r\n\t\t"file_to_import": "Fichier à importer",\r\n\t\t"browse": "Parcourir",\r\n\t\t"browse_csv_file": "Parcourir le fichier *.csv",\r\n\t\t"uploading": "Téléchargement ascendant en cours",\r\n\t\t"importing": "Importation en cours",\r\n\t\t"done": "TERMINÉ",\r\n\t\t"cancel": "Annuler",\r\n\t\t"error_importing_": "Erreur au cours de l\'importation",\r\n\t\t"processing": "Traitement en cours...",\r\n\t\t"abort": "Interruption de l\'opération",\r\n\t\t"file_upload_failed_": "Le téléchargement ascendant du fichier a échoué.",\r\n\t\t"imported_lines": "{0} lignes importées.",\r\n\t\t"error_in_file_format_error_line_message_": "Erreur de format de fichier. Erreur en ligne n°{0}. Message : {1}.",\r\n\t\t"Number of columns in line {0} is less then expected": "Le nombre de colonnes de la ligne {0} est plus petit que prévu. Le montant attendu des colonnes est : {1}.",\r\n\t\t"Number of columns in line {0} is more then expected": "Le nombre de colonnes en ligne {0} est supérieur au nombre attendu. Le montant attendu des colonnes est : {1}.",\r\n\t\t"import_was_successfully_cancelled": "L\'importation a bien été annulée.",\r\n\t\t"import_successfully_finished": "L\'importation s\'est bien terminée.",\r\n\t\t"cancelling": "Annulation en cours...",\r\n\t\t"field_is_required": "Le champ \\"{0}\\" est obligatoire.",\r\n\t\t"Field \'{0}\' has length greater than {1}": "La longueur du champ \\"{0}\\" est supérieure à {1}.",\r\n\t\t"field_sku_or_cost_exists_while_vendor_is_empty": "\\"L\'UGS\\" et le \\"Prix\\" du produit ne peuvent pas être définis lorsque le fournisseur du produit n\'est pas renseigné.",\r\n\t\t"cannot_parse_file": "Impossible d\'analyser le fichier.",\r\n\t\t"upc_has_a_wrong_format_only_digits_allowed": "Le format du CUP est incorrect. Seuls les chiffres sont autorisés.",\r\n\t\t"upc_has_a_wrong_format_only_digits_and_letters_allowed": "Le format du CUP est incorrect. Seuls les chiffres et les lettres sont autorisés.",\r\n\t\t"upc_has_a_wrong_format_upc_length_can_be_8_or_12_or_13_digits": "Le format du CUP est incorrect. Le CUP peut comporter 8, 12 ou 13 chiffres.",\r\n\t\t"upc_has_a_wrong_format_upc_length_should_be_less_than_13": "Le format du CUP est incorrect. La longueur du CUP doit être inférieure à 13.",\r\n\t\t"upc_has_a_wrong_format_upc_length_should_be_less_than_20": "Le format du CUP est incorrect. La longueur du CUP doit être inférieure ou égale à 20.",\r\n\t\t"unitOfMeasure_not_found": "Unité de mesure \\"{0}\\" non trouvée.",\r\n\t\t"vendor_not_found": "Fournisseur \\"{0}\\" non trouvé.",\r\n\t\t"field_Name_Category_Department_cannot_be_null": "Les champs \\"Nom\\", \\"Catégorie\\", \\"Service\\" doivent être renseignés.",\r\n\t\t"the_sku_is_already_exists": "L\'UGS \\"{0}\\" existe déjà.",\r\n\t\t"field_Sku_cannot_be_null": "Le champ \\"UGS\\" ne peut pas être vide.",\r\n\t\t"unexpected_import_error_details_": "Erreur d\'importation inattendue. Détails : {0}",\r\n\t\t"error_at_line_": "Erreur en ligne \\"{0}\\".",\r\n\t\t"Inventory import is already running": "L\'importation des clients est déjà en cours d\'exécution.",\r\n\t\t"Language id is not found in header column": "L\'identifiant de la langue ne se trouve pas dans la colonne d\'en-tête \\"{0}\\"",\r\n\t\t"language_not_supported": "La langue \\"{0}\\" n\'est pas gérée.",\r\n\t\t"duplicate_language": "Colonne de langue \\"{0}\\" en double.",\r\n\t\t"Columns with product names not found": "Colonnes avec noms de produits introuvables",\r\n\t\t"First column header does not contains default language code": "L\'en-tête de la première colonne ne contient pas le code ISO de la langue par défaut.",\r\n\t\t"field_price_is_invalid": "Le champ « prix » est invalide",\r\n\t\t"invalid column header_x": "Le titre de colonne \'{0}\' est invalide",\r\n\t\t"column not found_x": "Colonne introuvable : ’{0}’",\r\n\t\t"get_template": "Obtenir un modèle",\r\n\t\t"Field_x_has invalid boolean value": "Le champ \'{0}\' a une valeur booléenne invalide.",\r\n\t\t"field_x_is_invalid": "Le champ \'{0}\' est invalide.",\r\n\t\t"field_price_of_store_not_found": "Le champ « prix » du magasin {0} est introuvable.",\r\n\t\t"field_taxable_of_store_not_found": "Le champ « imposable » du magasin {0} est introuvable.",\r\n\t\t"field_discountable_of_store_not_found": "Le champ « escomptable » du magasin {0} est introuvable.",\r\n\t\t"field_QuantityOnHand_of_store_not_found": "Le champ « Quantité restante » du magasin {0} est introuvable.",\r\n\t\t"field_MinimumQuantity_of_store_not_found": "Le champ « Quantité minimale » du magasin {0} est introuvable.",\r\n\t\t"field_RecommendedQuantity_of_store_not_found": "Le champ « Quantité recommandée » du magasin {0} est introuvable.",\r\n\t\t"invalid column header_x": "Invalid column header \'{0}\'",\r\n\t\t"field_should_be_less_and_greater": "Le champ \\"{0}\\" doit être inférieur à {1} et supérieur à {2}.",\r\n\r\n\t\t"duplicate_category_name": "La catégorie \\"{0}\\" est un nom en double. Les noms de catégories doivent être uniques.",\r\n\t\t"MinimumQuantity_should_be_less_than_RecommendedQuantity": "La quantité minimum doit être inférieure ou égale à la quantité recommandée.",\r\n\t\t"MinimumQuantity_should_be_less_than_RecommendedQuantity_for_store_x": "La quantité minimum doit être inférieure ou égale à la quantité recommandée pour le magasin : \\"{0}\\".",\r\n\r\n\t\t"invalid_inventory_type": "« Type d\'inventaire » invalide :\\"{0}\\" doit être soit : « En stock », « Pas en stock », « Numéroté »"\r\n\t},\r\n\t"inventory/importInventory/columns": {\r\n\t\t"Product Name": "Nom du produit ({0})",\r\n\t\t"Description": "Description",\r\n\t\t"Department": "Service",\r\n\t\t"Category": "Catégorie",\r\n\r\n\t\t"UPC": "CUP",\r\n\t\t"Product Status": "Statut du produit",\r\n\r\n\t\t"Cost": "Coût",\r\n\t\t"Price Type": "Type de prix",\r\n\t\t"Sales Price": "Prix de vente",\r\n\t\t"Taxable": "Taxable",\r\n\t\t"Discountable": "Escomptable",\r\n\t\t"Quantity on Hand": "Quantité disponible",\r\n\t\t"Minimum Quantity": "Quantité minimum",\r\n\t\t"Recommended Quantity": "Quantité recommandée",\r\n\t\t"Vendor": "Fournisseur",\r\n\t\t"Vendor SKU": "Unité de gestion de stock du fournisseur"\r\n\t},\r\n\t"inventory/inventoryList": {\r\n\t\t"new_item": "Nouvel article",\r\n\t\t"toggle_dropdown": "Inverser la liste déroulante",\r\n\t\t"new_category": "Nouvelle catégorie",\r\n\t\t"new_department": "Nouveau service",\r\n\t\t"new_modifier": "Nouveau modificateur",\r\n\t\t"import_inventory": "Importer les stocks",\r\n\t\t"department": "Service",\r\n\t\t"department_filter": "Service :",\r\n\t\t"all": "Tous",\r\n\t\t"category": "Catégorie",\r\n\t\t"category_filter": "Catégorie:",\r\n\t\t"id": "Identifiant",\r\n\t\t"item": "Article",\r\n\t\t"cost": "Coût",\r\n\t\t"price": "Prix",\r\n\t\t"margin": "Marge",\r\n\t\t"quantity": "Quantité",\r\n\t\t"value": "Valeur",\r\n\t\t"qty_sold": "Qté vendue",\r\n\t\t"gross_sales": "Ventes brutes",\r\n\t\t"status": "Statut",\r\n\t\t"search_item_by_title_or_code": "Rechercher un article par titre ou code",\r\n\t\t"no_matching_records_found": "Aucun enregistrement correspondant trouvé",\r\n\t\t"are_you_sure_you_want_to_delete_selected_products": "Êtes-vous sûr de vouloir supprimer les produits sélectionnés?",\r\n\r\n\t\t"deleting_product_error": "Le produit : {0} ne peut pas être supprimé car des commandes sont en cours.",\r\n\t\t"manual": "Manuel",\r\n\t\t"active": "Actif(ve)",\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t\t"inactive": "Inactif(ve)"\r\n\t},\r\n\t"inventory/inventoryManage": {\r\n\t\t"cancel": "Annuler",\r\n\t\t"done": "Terminé",\r\n\t\t"new_inventory_item": "Nouvel article en stock",\r\n\t\t"vendor": "Fournisseur",\r\n\t\t"modifier": "Modificateur",\r\n\t\t"edit_inventory_item": "Modifier un article en stock",\r\n\t\t"general": "Général",\r\n\t\t"pricing": "Prix",\r\n\t\t"taxes": "Taxes",\r\n\t\t"variants": "Matrice d\'inventaire",\r\n\t\t"modifiers": "Modificateurs",\r\n\t\t"vendors": "Fournisseurs",\r\n\t\t"ordering": "Commande en cours",\r\n\t\t"serials": "Séries",\r\n\t\t"warning_another_product_has_the_same_sku_with_this_vendor": "Avertissement : il existe un autre produit avec cette UGS chez ce fournisseur.",\r\n\t\t"warning_product_picture_max_size_is_exceeded": "Avertissement : la taille maximale de l\'image du produit est dépassée.",\r\n\t\t"another_product_has_save_sku_x_": "Cet UGS est associé à un autre produit : ’{0}’ pour ce fournisseur.",\r\n\t\t"unexpected_error_occured_please_try_again_later": "Une erreur imprévue s\'est produite. Veuillez réessayer plus tard.",\r\n\t\t"basic_item": "Article en stock",\r\n\t\t"variant_item": "Article de la matrice",\r\n\r\n\r\n\t\t"sell_basik": "Vendre cet article seul",\r\n\t\t"sell_basic": "Vendre cet article seul",\r\n\t\t"sell_variant": "Vendre un article de la matrice",\r\n\t\t"create": "Créer",\r\n\t\t"or": "OU",\r\n\r\n\t\t"name_on_samecategory": "Il existe déjà un produit portant le nom {0} pour la langue {1} dans cette catégorie",\r\n\t\t"empty_variant": "Une option au moins doit être ajoutée"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/general": {\r\n\t\t"inventoryTypeStandard": "Stocks",\r\n\t\t"inventoryTypeSerialized": "Numéroté",\r\n\t\t"inventoryTypeNonInventory": "Non stocké",\r\n\t\t"product_name": "Nom du produit",\r\n\t\t"product_short_name": "Nom court du produit",\r\n\t\t"product_description": "Description du produit",\r\n\t\t"department": "Service",\r\n\t\t"category": "Catégorie",\r\n\t\t"upc": "CUP",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"the_image_is_too_big_max_allowed_size_of_image_is_kb": "L\'image est trop grande. La taille d\'image maximum autorisée est {0} Ko.",\r\n\t\t"upload_product_image": "Télécharger l\'image du produit...",\r\n\t\t"delete_image": "Supprimer l\'image",\r\n\t\t"choose_department": "Choisir un service...",\r\n\t\t"choose_category": "Choisir une catégorie...",\r\n\t\t"select_color": "Sélectionner la couleur",\r\n\r\n\t\t"color": "Couleur d\'affichage du produit",\r\n\t\t"the_image_will_be_deleted": "L\'image va être supprimée.",\r\n\t\t"ok": "OK",\r\n\t\t"cancel": "Annuler",\r\n\t\t"chrome_invalid_version_pic": "To edit image or upload new image use Chrome 48.0.0 and higher.",\r\n\t\t"chrome_invalid_version_no_pic": "To upload image use Chrome 48.0.0 and higher.",\r\n\t\t"browse_images": "Browse images",\r\n\t\t"invalid_image": "Image non valide"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/ordering": {\r\n\t\t"quantity": "Quantité",\r\n\t\t"recommended_quantity": "Quantité recommandée",\r\n\t\t"minimum_quantity": "Quantité minimum",\r\n\t\t"input_quantity": "Saisir la quantité",\r\n\t\t"total_quantity": "Quantité totale",\r\n\r\n\t\t"quantityLimits": "La quantité doit être supérieure à {0} et inférieure à {1}",\r\n\t\t"recommendedQuantityLimits": "La quantité recommandée doit être supérieure ou égale à {0} et inférieure à {1}",\r\n\r\n\t\t"minimumQuantityLimits": "La quantité minimale doit être supérieure ou égale à {0} et inférieure à {1}",\r\n\t\t"minimum_quantity_should_be_less_or_equal_to_recommended_quantity": "La quantité minimum doit être inférieure ou égale à la quantité recommandée"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/pricing": {\r\n\t\t"price_type": "Type de prix",\r\n\t\t"unit": "Unité",\r\n\t\t"sales_price": "Prix de vente",\r\n\t\t"is_taxable": "Est taxable",\r\n\t\t"is_discountable": "Est escomptable",\r\n\t\t"fixed": "Fixe",\r\n\t\t"manual": "Manuel",\r\n\t\t"price_should_be_greater_or_equal_to_0_and_less_than_100000": "Le prix doit être supérieur ou égal à 0 et inférieur à 100 000",\r\n\t\t"store": "Magasin",\r\n\t\t"salesPrice": "Prix de vente",\r\n\t\t"discountable": "Escomptable",\r\n\t\t"taxable": "Imposable",\r\n\t\t"stores": "Magasins",\r\n\t\t"name": "Nom",\r\n\t\t"rate": "Taux"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/vendorManage": {\r\n\t\t"vendor": "Fournisseur",\r\n\t\t"sku": "UGS",\r\n\t\t"cost": "Coût",\r\n\t\t"primary": "Principal",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"input_name": "Saisir le nom"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/vendors": {\r\n\t\t"vendor": "Fournisseur",\r\n\t\t"sku": "UGS",\r\n\t\t"cost": "Coût",\r\n\t\t"primary": "Principal",\r\n\t\t"new_vendor": "Nouveau fournisseur",\r\n\t\t"search_or_select_vendors": "Rechercher ou sélectionner des fournisseurs",\r\n\t\t"search_vendors": "Rechercher des fournisseurs"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/addOnModifiers": {\r\n\t\t"add-ons": "Ajouts",\r\n\t\t"modifier_name": "Nom du modificateur :",\r\n\t\t"price": "Prix :",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"you_did_not_add_add-ons": "Vous n\'avez pas mis d\'ajouts.",\r\n\t\t"add_option": "Ajouter une option"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/exceptionModifiers": {\r\n\t\t"exceptions": "Exceptions",\r\n\t\t"modifier_name": "Nom du modificateur :",\r\n\t\t"price": "Prix :",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"you_did_not_add_exceptions": "Vous n\'avez pas ajouté d\'exceptions.",\r\n\t\t"add_option": "Ajouter une option"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/variants": {\r\n\t\t"isActive": "Est actif(ve)",\r\n\t\t"variant": "Article de la matrice",\r\n\t\t"price": "Prix",\r\n\t\t"quantity": "Quantité",\r\n\t\t"cost": "Coût",\r\n\t\t"sku": "UGS",\r\n\t\t"upc": "CUP",\r\n\t\t"varinat_name": "Nom de l\'attribut",\r\n\t\t"variants": "Valeurs de l\'attribut",\r\n\t\t"copy2all": "Copie à tous",\r\n\t\t"hide_dis": "Masquer les inactifs",\r\n\r\n\t\t"delete_var": "Vous êtes sur le point de supprimer tous les articles qui comportent cette variante.",\r\n\t\t"sku_is_required": "L’UGS est obligatoire"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/groupModifiers": {\r\n\t\t"groups": "Groupes",\r\n\t\t"group_name": "Nom du groupe :",\r\n\t\t"option": "Option :",\r\n\t\t"price": "Prix :",\r\n\t\t"default": "Valeur par défaut",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"you_did_not_add_group_modifier": "Vous n\'avez pas ajouté de modificateur de groupe.",\r\n\t\t"enter_name": "Saisir le nom",\r\n\t\t"add_option": "Ajouter une option"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/modifiers/modifiers": {\r\n\t\t"selectModifierType": "Sélectionner le type de modificateur",\r\n\t\t"new_modifier": "Nouveau modificateur",\r\n\t\t"product_modifiers_must_have_unique_names": "Les modificateurs des produits doivent avoir des noms uniques.",\r\n\t\t"varinat_must_have_unique_names": "Les attributs doivent avoir des noms uniques.",\r\n\t\t"variantOptionNameDuplicate": "Un attribut a des valeurs dupliquées pour la langue {0}",\r\n\t\t"add_modifiers_to_product": "Ajouter des modificateurs au produit",\r\n\t\t"all_stores": "Tous les magasins"\r\n\t},\r\n\t"inventory/inventory-manage-tabs/serials": {\r\n\t\t"serialNo": "N° de série",\r\n\t\t"serialNotUniqueError": "Le numéro de série doit être unique.",\r\n\t\t"serials_were_sold": "Les séries ont été vendues : {0}"\r\n\t},\r\n\t"modifiers/modifierManage": {\r\n\t\t"modifier_type": "Type de modificateur",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"select_modifier_type": "Sélectionner le type de modificateur",\r\n\t\t"modifier_with_such_name_already_exists": "Il existe déjà un modificateur portant ce nom.",\r\n\t\t"modifier_with_name_x_already_exists_for_lang_x": "Il existe déjà un modificateur portant le nom \\"{0}\\" pour la langue \\"{1}\\".",\r\n\t\t"new_modifiers_must_have_unique_names": "Les nouveaux modificateurs doivent avoir des noms uniques.",\r\n\t\t"new_modifier": "Nouveau modificateur",\r\n\t\t"modifier_name_must_be_unique": "Le nom du modificateur doit être unique.",\r\n\t\t"modifier_name_for_lang_x_is_empty": "Le nom du modificateur est non renseigné pour la langue \\"{0}\\".",\r\n\t\t"varinat_name_for_lang_x_is_empty": "Le nom de la matrice n\'est pas renseigné pour la langue \\"{0}\\".",\r\n\t\t"modifiers_option_name_for_lang_x_is_empty": "Le nom d\'option du modificateur \\"{0}\\" est non renseigné pour la langue \\"{1}\\".",\r\n\t\t"modifier_option_name_for_lang_x_must_be_unique": "Le nom d\'option du modificateur doit être unique pour \\"{0}\\" langue(s).",\r\n\t\t"emptyGroupModifierError": "Vous ne pouvez pas créer de modificateur de groupe sans option",\r\n\t\t"edit_modifier": "Modifier le modificateur",\r\n\t\t"varinat_option_name_for_lang_x_is_empty": "Le nom d\'option de la matrice \\"{0}\\" n\'est pas renseigné pour la langue \\"{1}\\".",\r\n\t\t"variant_with_name_x_already_exists_for_lang_x": "Il existe déjà un modificateur portant le nom \\"{0}\\" pour la langue \\"{1}\\"."\r\n\t},\r\n\t"modifiers/modifiersList": {\r\n\t\t"new_modifier": "Nouveau modificateur",\r\n\t\t"toggle_dropdown": "Inverser la liste déroulante",\r\n\t\t"new_department": "Nouveau service",\r\n\t\t"new_category": "Nouvelle catégorie",\r\n\t\t"new_item": "Nouvel article",\r\n\t\t"modifier": "Modificateur",\r\n\t\t"type": "Type",\r\n\t\t"status": "Statut",\r\n\t\t"search_for_modifier": "Rechercher un modificateur",\r\n\t\t"are_you_sure_you_want_to_delete_selected_modifier": "Voulez-vous vraiment supprimer le modificateur sélectionné ?",\r\n\t\t"the_modifier_was_not_deleted": "Le modificateur n\'a pas été supprimé.",\r\n\t\t"group": "Groupe",\r\n\t\t"add-on": "Ajout",\r\n\t\t"exception": "Exception",\r\n\t\t"active": "Actif(ve)",\r\n\t\t"inactive": "Inactif(ve)"\r\n\t},\r\n\t"modifiers/modifier-type/addOnModifier": {\r\n\t\t"add-ons": "Ajouts",\r\n\t\t"modifier_name": "Nom du modificateur :",\r\n\t\t"price": "Prix :",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"add_option": "Ajouter une option"\r\n\t},\r\n\t"modifiers/modifier-type/exceptionModifier": {\r\n\t\t"exceptions": "Exceptions",\r\n\t\t"modifier_name": "Nom du modificateur :",\r\n\t\t"price": "Prix :",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"add_option": "Ajouter une option"\r\n\t},\r\n\t"modifiers/modifier-type/groupModifier": {\r\n\t\t"groups": "Groupes",\r\n\t\t"group_name": "Nom du groupe",\r\n\t\t"option": "Option :",\r\n\t\t"price": "Prix :",\r\n\t\t"default": "Valeur par défaut",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"enter_name": "Saisir le nom",\r\n\t\t"add_option": "Ajouter une option"\r\n\t},\r\n\t"orders/orderDetails": {\r\n\t\t"order_id": "Identifiant de la commande :",\r\n\t\t"order_name": "Nom de la commande :",\r\n\t\t"customer": "Client :",\r\n\t\t"customer_phone": "Téléphone du client :",\r\n\t\t"employee": "Employé(e) :",\r\n\t\t"order_date": "Date de la commande :",\r\n\t\t"order_type": "Type de commande :",\r\n\t\t"status": "Statut :",\r\n\t\t"/": "/",\r\n\t\t"tender_type": "Type de remise :",\r\n\t\t"fulfillment": "Traitement :",\r\n\t\t"refnum": "Num. réf. :",\r\n\t\t"subtotal": "Sous-total :",\r\n\t\t"discount": "Remise :",\r\n\t\t"tax": "Taxe :",\r\n\t\t"tips": "Pourboires :",\r\n\t\t"total": "Total :",\r\n\t\t"back": "Retour",\r\n\t\t"order_details": "Détails de la commande",\r\n\t\t"order_details_-_register_#_": "Détails de la commande - Caisse n°{0} - Statut de la commande : {1}",\r\n\t\t"Pending": "En instance",\r\n\t\t"Completed": "Terminé",\r\n\t\t"Failed": "Échec",\r\n\t\t"Voided": "Annulé",\r\n\t\t"authCode": "Code authentification :",\r\n\t\t"control_number": "N° de contrôle :",\r\n\t\t"store": "Magasin"\r\n\t},\r\n\t"orders/orderDetailsItems": {\r\n\t\t"description": "Description",\r\n\t\t"quantity": "Quantité",\r\n\t\t"item_price": "Prix de l\'article",\r\n\t\t"discount": "Remise",\r\n\t\t"total_price": "Prix total"\r\n\t},\r\n\t"orders/ordersList": {\r\n\t\t"order_type": "Type de commande :",\r\n\t\t"all": "Tous",\r\n\t\t"order_status": "Statut de la commande :",\r\n\t\t"fulfillment": "Traitement :",\r\n\t\t"order_id": "Identifiant de la commande",\r\n\t\t"order_name": "Nom de la commande",\r\n\t\t"type": "Type",\r\n\t\t"status": "Statut",\r\n\t\t"total": "Total",\r\n\t\t"date": "Date",\r\n\t\t"employee": "Employé(e)",\r\n\t\t"store": "Magasin",\r\n\t\t"customer": "Client",\r\n\t\t"search_order": "Ordre de recherche",\r\n\t\t"orders": "Commandes",\r\n\t\t"upc": "Identifiant de la commande",\r\n\t\t"name": "Nom de la commande",\r\n\t\t"typeColumn": "Type de commande",\r\n\t\t"tenderType": "Type de moyen de paiement",\r\n\t\t"fulfilmentColumn": "Traitement",\r\n\t\t"businessDate": "Date",\r\n\t\t"subtotal": "Sous-total",\r\n\t\t"discount": "Remise",\r\n\t\t"tax": "Taxe",\r\n\t\t"tips": "Pourboires",\r\n\t\t"totalAmount": "Total",\r\n\t\t"controlNumber": "N° de contrôle"\r\n\r\n\t},\r\n\t"registerSettings/registerSettingsList": {\r\n\t\t"register_name": "Nom de la caisse",\r\n\t\t"status": "Statut",\r\n\t\t"are_you_sure_you_want_to_delete_selected_register_setting": "Voulez-vous vraiment supprimer le paramètre de la caisse sélectionnée ?",\r\n\t\t"error_occurred_while_deleting_register_setting_": "Une erreur s\'est produite lors de la suppression du paramètre de la caisse {0}",\r\n\t\t"employees_": "Employés :",\r\n\t\t"active": "Activé(e)",\r\n\t\t"inactive": "Inactif(ve)",\r\n\t\t"search_register": "Rechercher une caisse",\r\n\t\t"new_register": "Nouvelle caisse",\r\n\t\t"store": "Magasin"\r\n\t},\r\n\t"registerSettings/registerSettingsManage": {\r\n\t\t"general": "Général",\r\n\t\t"localization": "Localisation",\r\n\t\t"register_name": "Nom de la caisse",\r\n\t\t"assigned_only": "Attribué seulement",\r\n\t\t"employees": "Employés",\r\n\t\t"register_number": "Numéro de la caisse",\r\n\t\t"register_license_key": "Clé de la licence de la caisse",\r\n\t\t"is_active": "Est activé(e)",\r\n\t\t"unblock": "Débloquer",\r\n\t\t"deactivate": "Désactiver",\r\n\t\t"deactivateConfirmTitle": "Désactivation de la caisse",\r\n\r\n\t\t"deactivateConfirmText": "Vous êtes sur la point de désactiver la caisse.<br />Toutes les données non synchronisées de l\'appareil du point de vente &nbsp;seront&nbsp;perdues.",\r\n\t\t"deactivateSuccess": "La caisse a été désactivée.",\r\n\r\n\t\t"deactivateError": "Une erreur s\'est produite lors de la désactivation de la caisse.",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"input_name": "Saisir le nom",\r\n\t\t"input_number": "Saisir le nombre",\r\n\t\t"register_with_this_name_already_exists_please_select_another_name_for_the_register": "Il existe déjà une caisse portant ce nom. Sélectionner un autre nom pour la caisse.",\r\n\t\t"register_number_must_be_unique": "Le nom de la caisse doit être unique.",\r\n\t\t"new_register_setting": "Nouveau paramètre de caisse",\r\n\t\t"edit_register_setting": "Modifier le paramètre de la caisse",\r\n\t\t"search_or_choose_employee(s)": "Rechercher ou choisir un/des employé(s)",\r\n\t\t"search_or_choose_device(s)": "Rechercher ou choisir un/des appareil(s)",\r\n\t\t"payment_gateway": "Passerelle de paiement",\r\n\t\t"control_token": "Jeton du numéro de contrôle"\r\n\t},\r\n\t"registerSettings/registerSettingsManage/localization": {\r\n\t\t"pos_language": "Langue du point de vente",\r\n\t\t"kitchen_receipt_language": "Langue du reçu de cuisine",\r\n\t\t"date_format": "Format de la date",\r\n\t\t"time_format": "Format de l\'heure",\r\n\t\t"select_pos_language": "Sélectionner la langue du point de vente...",\r\n\t\t"select_kitchen_receipt_language": "Sélectionner la langue du reçu de cuisine...",\r\n\t\t"select_date_format": "Sélectionner le format de la date...",\r\n\t\t"select_time_format": "Sélectionner le format de l\'heure..."\r\n\t},\r\n\t"registerSettings/registerSettingsManage/paymentGateway": {\r\n\t\t"payment_gateway": "Passerelle de paiement",\r\n\t\t"source_key": "Clé source",\r\n\t\t"pin": "Code PIN",\r\n\t\t"debitCardEnabled": "Activer les paiements par carte de débit"\r\n\t},\r\n\t"registerSettings/newRegister": {\r\n\t\t"defaultRegisterName": "Nouvelle caisse",\r\n\t\t"requestSubmited": "La demande de création d’une <strong>Nouvelle Caisse</strong><br />a été soumise au service client.",\r\n\r\n\r\n\r\n\r\n\t\t"receiveNotification": "Vous recevrez un avis lorsqu’une nouvelle caisse sera créée.",\r\n\t\t"unexpectedError": "Désolé, une erreur est survenue. Veuillez réessayer plus tard.",\r\n\t\t"duplicateName": "Il existe déjà une caisse associée à ce nom.",\r\n\t\t"duplicateRequestName": "Il existe déjà une demande portant ce nom. Le nom de la demande doit être unique."\r\n\t},\r\n\t"shifts/shift": {\r\n\t\t"register": "Caisse :",\r\n\t\t"opened": "Ouvert :",\r\n\t\t"opened_by": "Ouvert à :",\r\n\t\t"closed": "Fermé :",\r\n\t\t"closed_by": "Fermé à :",\r\n\t\t"transactions": "Transactions :",\r\n\t\t"cash": "Espèces :",\r\n\t\t"external_payment": "Paiement externe",\r\n\t\t"opening_amount": "Montant à l\'ouverture :",\r\n\t\t"cash_sales": "Ventes au comptant :",\r\n\t\t"cash_refunds": "Remboursements en espèces :",\r\n\t\t"payins": "Dépôts :",\r\n\t\t"payouts": "Paiements :",\r\n\t\t"closing_amount": "Montant à la fermeture :",\r\n\t\t"variance": "Écart :",\r\n\t\t"revenue": "Recettes",\r\n\t\t"sales": "Ventes :",\r\n\t\t"discounts": "Remises :",\r\n\t\t"refunds": "Remboursements :",\r\n\t\t"net_sales": "Ventes nettes :",\r\n\t\t"tips": "Pourboires :",\r\n\t\t"tax": "Taxe :",\r\n\t\t"total_tendered": "Total remis :",\r\n\t\t"tender_breakdown": "Répartition de la remise",\r\n\t\t"credit_card": "Carte de crédit :",\r\n\t\t"debit_card": "Carte de débit :",\r\n\t\t"back": "Retour"\r\n\t},\r\n\t"shifts/shiftsList": {\r\n\t\t"register": "Caisse",\r\n\t\t"opened": "Ouvert",\r\n\t\t"closed": "Fermé",\r\n\t\t"transactions": "Transactions",\r\n\t\t"total_tendered": "Total remis",\r\n\t\t"variance": "Écart",\r\n\t\t"no_matching_records_found": "Aucun enregistrement correspondant trouvé",\r\n\t\t"openedBy": "Ouvert à",\r\n\t\t"closedBy": "Fermé à",\r\n\t\t"openingAmount": "Montant à l\'ouverture",\r\n\t\t"cashSales": "Ventes au comptant",\r\n\t\t"cashRefunds": "Remboursements en espèces",\r\n\t\t"payins": "Dépôts",\r\n\t\t"payouts": "Paiements",\r\n\t\t"closingAmount": "Montant à la fermeture",\r\n\t\t"sales": "Ventes",\r\n\t\t"discounts": "Remises",\r\n\t\t"refunds": "Remboursements",\r\n\t\t"netSales": "Ventes nettes",\r\n\t\t"tips": "Pourboires",\r\n\t\t"tax": "Taxe",\r\n\t\t"cash": "Espèces",\r\n\t\t"creditCard": "Carte de crédit",\r\n\t\t"debitCard": "Carte de débit",\r\n\t\t"externalPayment": "Paiement externe"\r\n\t},\r\n\t"stores/storesList": {\r\n\t\t"stores": "Magasins",\r\n\t\t"search_store": "Rechercher un magasin",\r\n\t\t"new_store": "Nouveau magasin",\r\n\t\t"store_name": "Nom du magasin",\r\n\t\t"status": "Statut",\r\n\r\n\t\t"employees_": "Employés :",\r\n\t\t"active": "Actif",\r\n\t\t"inactive": "Inactif"\r\n\t},\r\n\t"storeSettings/storeSettings": {\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"saved_successfully": "Enregistré avec succès.",\r\n\t\t"general": "Général",\r\n\t\t"contacts": "Contacts",\r\n\t\t"registers": "Registres",\r\n\t\t"billing": "Facturation",\r\n\t\t"receipt": "Reçu",\r\n\t\t"tips": "Pourboires",\r\n\t\t"taxes": "Taxes",\r\n\t\t"payment_gateway": "Passerelle de paiement",\r\n\t\t"localization": "Localisation"\r\n\r\n\r\n\t},\r\n\t"storeSettings/store-settings-tabs/billing": {\r\n\t\t"next_billing_date": "Prochaine date de facturation",\r\n\t\t"amount_to_pay": "Montant à payer"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/contacts": {\r\n\t\t"store_name": "Nom du magasin",\r\n\t\t"address_1": "Adresse 1",\r\n\t\t"address_2": "Adresse 2",\r\n\t\t"city": "Ville",\r\n\t\t"state": "État",\r\n\t\t"zip": "Code postal",\r\n\t\t"country": "Pays",\r\n\t\t"phone": "Téléphone",\r\n\t\t"email": "Adresse électronique",\r\n\t\t"web": "Site Web",\r\n\t\t"choose_country": "Choisir un pays...",\r\n\r\n\r\n\t\t"pleaseFillNewStore": "Veuillez remplir le formulaire ci-dessous pour configurer un nouveau magasin.",\r\n\t\t"pleaseFillNewRegister": "Veuillez remplir le formulaire ci-dessous pour configurer une nouvelle caisse."\r\n\t},\r\n\t"storeSettings/store-settings-tabs/general": {\r\n\t\t"storeId": "ID du magasin",\r\n\t\t"is_active": "Activé",\r\n\t\t"account_id": "Identifiant du compte",\r\n\t\t"stores_business": "Activités du magasin",\r\n\t\t"tax_rate": "Taux de taxes",\r\n\t\t"show_order_type": "Afficher le type de commande",\r\n\t\t"item_notes": "Notes de l\'article",\r\n\t\t"no_notes": "Aucune note",\r\n\t\t"mandatory": "Obligatoire",\r\n\t\t"optional": "Facultatif(ve)",\r\n\t\t"cancel_store_account": "Annuler le compte du magasin",\r\n\t\t"autoLogoutAfterOrder": "Déconnexion automatique après chaque commande",\r\n\t\t"externalPayment": "Paiement externe",\r\n\t\t"syncOnLogin": "Synchronisation lors de la connexion",\r\n\r\n\t\t"openCashDrawerCC": "Ouvrir le tiroir-caisse lors d\'une transaction par carte de débit / crédit",\r\n\t\t"show_tax_list": "Afficher la liste des taxes"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/payment": {\r\n\t\t"payment_gateway": "Passerelle de paiement",\r\n\t\t"source_key": "Clé source",\r\n\t\t"pin": "Code PIN",\r\n\t\t"debitCardEnabled": "Activer les paiements par carte de débit"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/receipt": {\r\n\t\t"kitchen_receipt": "Reçu de cuisine",\r\n\t\t"signature_on_receipt": "Signature sur le reçu",\r\n\t\t"tipsNSignature": "Pourboires et signature",\r\n\t\t"tipsAndSignatureOnPos": "Pourboires et signature sur le point de vente",\r\n\t\t"Screen": "à l\'écran",\r\n\t\t"Receipt": "sur le reçu",\r\n\t\t"Terminal": "sur le terminal",\r\n\t\t"receipt_template": "Modèle de reçu",\r\n\t\t"load_another_template": "Charger un autre modèle",\r\n\t\t"footer": "Pied de page"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/registers": {\r\n\t\t"registers_list": "Liste des caisses",\r\n\t\t"select_#_of_stores_registers": "Sélectionner les numéros des caisses du magasin",\r\n\t\t"price_per_register": "Prix par caisse"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/tips": {\r\n\t\t"tips": "Pourboires",\r\n\t\t"tips_on_credit_card_authorization": "Pourboires sur l\'autorisation de carte de crédit",\r\n\t\t"keyboard_shortcut_settings": "Paramètres de raccourci du clavier",\r\n\t\t"for_curr_amount": "Pour le montant {0}",\r\n\t\t"for_%_amount": "Pour le montant de %"\r\n\r\n\r\n\t},\r\n\t"storeSettings/store-settings-tabs/taxes": {\r\n\t\t"includeTaxesToPrice": "Inclure les taxes dans le prix par défaut"\r\n\t},\r\n\t"storeSettings/store-settings-tabs/localization": {\r\n\t\t"pos_language": "Langue du point de vente",\r\n\t\t"kitchen_receipt_language": "Langue du reçu de cuisine",\r\n\t\t"date_format": "Format de la date",\r\n\t\t"time_format": "Format de l\'heure",\r\n\t\t"select_pos_language": "Sélectionner la langue du point de vente...",\r\n\t\t"select_kitchen_receipt_language": "Sélectionner la langue du reçu de cuisine...",\r\n\t\t"select_date_format": "Sélectionner le format de la date...",\r\n\t\t"select_time_format": "Sélectionner le format de l\'heure..."\r\n\t},\r\n\t"storeSettings/newStore": {\r\n\t\t"defaultStoreName": "Nouveau magasin",\r\n\t\t"description": "Description",\r\n\t\t"storeDescription": "Description du magasin",\r\n\t\t"requestSubmited": "La demande de création d’un <strong>Nouveau magasin</strong><br />a été soumise au service client",\r\n\r\n\r\n\t\t"receiveNotification": "Vous recevrez un avis lorsqu’un nouveau magasin sera créé",\r\n\t\t"alreadyExists": "Il existe déjà un magasin (ou une demande de création de magasin) portant ce nom."\r\n\t},\r\n\t"enterpriseSettings/enterpriseSettings": {\r\n\t\t"done": "Terminé",\r\n\r\n\r\n\t\t"cancel": "Annuler",\r\n\t\t"contacts": "Contacts",\r\n\r\n\t\t"marketing": "Marketing",\r\n\t\t"optInCheckIn": "Clé d\'option d\'adhésion/d\'inscription",\r\n\t\t"loyaltyRedemptionKey": "Clé du Remboursement Fidélité",\r\n\t\t"localization": "Localisation",\r\n\t\t"saved_successfully": "Enregistré avec succès.",\r\n\r\n\t\t"default_lang_change_error": "Il manque certaines traductions : Nom du service, Nom de la catégorie, Nom du produit, Nom du modificateur / options pour \\"{0}\\". Ajouter toutes les traductions avant de changer de langue par défaut. {1} \\"{2}\\" n\'a/n\'ont pas de traduction dans la nouvelle langue.",\r\n\t\t"Department": "Service",\r\n\t\t"Category": "Catégorie",\r\n\t\t"Product": "Produit",\r\n\t\t"Modifier": "Modificateur",\r\n\t\t"Modifier Option": "Option du modificateur"\r\n\t},\r\n\t"enterpriseSettings/enterprise-settings-tabs/contacts": {\r\n\t\t"enterprise_code": "Code d’entreprise",\r\n\t\t"enterprise_name": "Nom de l’entreprise",\r\n\t\t"address_1": "Adresse 1",\r\n\t\t"address_2": "Adresse 2",\r\n\t\t"city": "Ville",\r\n\t\t"state": "État",\r\n\t\t"zip": "Code postal",\r\n\t\t"country": "Pays",\r\n\t\t"phone": "Téléphone",\r\n\t\t"email": "Email",\r\n\t\t"web": "Adresse Web",\r\n\t\t"choose_country": "Choisir un pays..."\r\n\t},\r\n\r\n\t"enterpriseSettings/enterprise-settings-tabs/localization": {\r\n\t\t"account_languages": "Langues du compte",\r\n\t\t"select_language": "Sélectionner la langue",\r\n\t\t"default_language": "Langue par défaut",\r\n\t\t"pos_language": "Langue du point de vente",\r\n\t\t"kitchen_receipt_language": "Langue du reçu de cuisine",\r\n\t\t"bo_language": "Langue du service administratif",\r\n\t\t"date_format": "Format de la date",\r\n\t\t"time_format": "Format de l\'heure",\r\n\t\t"currency": "Devise",\r\n\t\t"currency_format": "Format de la devise",\r\n\t\t"select_pos_language": "Sélectionner la langue du point de vente...",\r\n\t\t"select_kitchen_receipt_language": "Sélectionner la langue du reçu de cuisine...",\r\n\t\t"select_bo_language": "Sélectionner la langue du service administratif...",\r\n\t\t"select_date_format": "Sélectionner le format de la date...",\r\n\t\t"select_time_format": "Sélectionner le format de l\'heure..."\r\n\t},\r\n\t"tips/tipsList": {\r\n\t\t"employee": "Employé(e) :",\r\n\t\t"all": "Tous",\r\n\t\t"order_id": "Identifiant de la commande",\r\n\t\t"ref_num": "Num. réf.",\r\n\t\t"type": "Type",\r\n\t\t"status": "Statut",\r\n\t\t"price": "Prix",\r\n\t\t"date": "Date",\r\n\t\t"tips": "Pourboires",\r\n\t\t"total_tips": "Pourboires totaux :",\r\n\t\t"tips_report": "Rapport sur les pourboires",\r\n\t\t"statusNotPaid": "Non payé",\r\n\t\t"statusPartiallyPaid": "Payé en partie",\r\n\t\t"statusPaid": "Payé",\r\n\t\t"statusPartiallyRefunded": "Remboursé en partie",\r\n\t\t"statusRefunded": "Remboursé",\r\n\t\t"statusVoided": "Annulé",\r\n\t\t"store": "Magasin"\r\n\t},\r\n\t"vendors/vendorManage": {\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"new_vendor": "Nouveau fournisseur",\r\n\t\t"edit_vendor": "Modifier le fournisseur",\r\n\t\t"general": "Général",\r\n\t\t"contact_info": "Coordonnées"\r\n\t},\r\n\t"vendors/vendorsList": {\r\n\t\t"new_vendor": "Nouveau fournisseur",\r\n\t\t"toggle_dropdown": "Inverser la liste déroulante",\r\n\t\t"new_item": "Nouvel article",\r\n\t\t"new_category": "Nouvelle catégorie",\r\n\t\t"vendor_name": "Nom du fournisseur",\r\n\t\t"type": "Type",\r\n\t\t"status": "Statut",\r\n\t\t"search_for_vendor": "Rechercher un fournisseur",\r\n\t\t"are_you_sure_you_want_to_delete_selected_vendor": "Voulez-vous vraiment supprimer le fournisseur sélectionné ?",\r\n\t\t"active": "Actif(ve)",\r\n\t\t"inactive": "Inactif(ve)",\r\n\t\t"vendors_list": "Liste des fournisseurs",\r\n\t\t"the_vendor_has_vendoritem_assigned_please_delete_those_vendoritem_first": "Le fournisseur {0} a des VendorItem attribués. Supprimer d\'abord ces VendorItem."\r\n\t},\r\n\t"vendors/manage-tabs/contactInfo": {\r\n\t\t"address": "Adresse",\r\n\t\t"country": "Pays",\r\n\t\t"state": "État",\r\n\t\t"city": "Ville",\r\n\t\t"zip": "Code postal",\r\n\t\t"phone": "Téléphone",\r\n\t\t"fax": "Fax",\r\n\t\t"email": "Adresse électronique",\r\n\t\t"web_site": "Site Web",\r\n\t\t"contact_name": "Nom du contact",\r\n\t\t"www_address_com": "http://www.adresse.com",\r\n\t\t"choose_country": "Choisir un pays...",\r\n\t\t"choose_state": "Choisir un état...",\r\n\t\t"contact_info": "Coordonnées"\r\n\t},\r\n\t"vendors/manage-tabs/general": {\r\n\t\t"business_account_#": "Numéro du compte d\'affaires",\r\n\t\t"vendor_name": "Nom du fournisseur",\r\n\t\t"vendor_type": "Type de fournisseur",\r\n\t\t"tax_id": "Identifiant de la taxe",\r\n\t\t"notes": "Notes",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"choose_vendor_type": "Choisir un type de fournisseur...",\r\n\t\t"general": "Général"\r\n\t},\r\n\t"date-filter/date-filter": {\r\n\t\t"today": "Aujourd\'hui",\r\n\t\t"yesterday": "Hier",\r\n\t\t"last_7_days": "7 derniers jours",\r\n\t\t"last_30_days": "30 derniers jours",\r\n\t\t"this_month": "Ce mois-ci",\r\n\t\t"year-to-date": "Cumul de l\'année",\r\n\t\t"all": "Tous",\r\n\t\t"custom_range": "Plage personnalisée",\r\n\t\t"apply": "Appliquer",\r\n\t\t"cancel": "Annuler"\r\n\t},\r\n\t"common": {\r\n\t\t"NA": "S/O",\r\n\t\t"success": "Félicitations !",\r\n\t\t"error": "Erreur !",\r\n\t\t"warning": "Avertissement",\r\n\t\t"ok": "OK",\r\n\t\t"cancel": "Annuler",\r\n\t\t"yes": "Oui",\r\n\t\t"no": "Non",\r\n\t\t"active": "Actif",\r\n\t\t"inactive": "Inactif",\r\n\t\t"delete_selected": "Supprimer",\r\n\t\t"areYouSure": "Êtes-vous sûr(e) ?",\r\n\t\t"close": "Fermer",\r\n\t\t"confirm": "Confirmer",\r\n\t\t"thisFieldIsRequired": "Ce champ est obligatoire.",\r\n\t\t"invalidPin": "Code PIN invalide",\r\n\t\t"fieldShouldBeLessThan": "Le champ doit être inférieur à",\r\n\t\t"valueIsTooBig": "La valeur est trop grande.",\r\n\t\t"numberIsNotInRange": "Le nombre n\'est pas dans la plage.",\r\n\t\t"thisFieldHasToBeValidURL": "Ce champ doit être une URL valide.",\r\n\t\t"websiteIsInvalid": "Le site Web est invalide.",\r\n\t\t"valueMustBeValidPercent": "La valeur doit être un pourcentage valide.",\r\n\t\t"mustBeGreaterThanOrEqual": "Doit être supérieur ou égal à l\'autre valeur.",\r\n\t\t"upcIsInvalid": "Le CUP est invalide.",\r\n\t\t"allArrayElementsMustBeUnique": "Tous les éléments du tableau doivent être uniques.",\r\n\t\t"nameMustBeUnique": "Le nom doit être unique.",\r\n\t\t"pleaseSpecifyValidPhoneNumber": "Spécifiez un numéro de téléphone valide"\r\n\t},\r\n\t"models/vendorModel": {\r\n\t\t"vendor_name_must_be_unique": "Le nom du fournisseur doit être unique.",\r\n\t\t"vendor_name_is_required": "Le nom du fournisseur est obligatoire",\r\n\t\t"type_is_required": "Le type est obligatoire",\r\n\t\t"city_is_required": "La ville est obligatoire",\r\n\t\t"address_is_required": "L\'adresse est obligatoire",\r\n\t\t"state_is_required": "L\'état est obligatoire",\r\n\t\t"invalid_zip_code": "Code postal non valide",\r\n\t\t"country_is_required": "Le pays est obligatoire",\r\n\t\t"phone_is_incorrect": "Le numéro de téléphone est incorrect",\r\n\t\t"please_specify_a_valid_us_phone_number": "Spécifier un numéro de téléphone américain valide"\r\n\t},\r\n\t"repositories/addressRepository": {\r\n\t\t"invalid_state": "État invalide.",\r\n\t\t"invalid_zip": "Code postal invalide."\r\n\t},\r\n\t"repositories/businessUnitRepository": {\r\n\t\t"terminal_count_should_be_in_range_of_0_to_100": "Le compte du terminal doit être compris dans l\'intervalle entre 0 et 100"\r\n\t},\r\n\t"repositories/employeeRepository": {\r\n\t\t"you_are_not_athorized_to_save_employee": "Vous n\'êtes pas autorisé à enregistrer l\'employé"\r\n\t},\r\n\t"repositories/itemSellingPricesRepository": {\r\n\t\t"price_should_be_in_range_of_-100000_to_100000": "Le prix doit être compris dans l\'intervalle entre -100 000 et 100 000"\r\n\t},\r\n\t"repositories/modifiersRepository": {\r\n\t\t"option_name_must_be_unique": "Le nom de l\'option doit être unique.",\r\n\t\t"add_on": "Ajout",\r\n\t\t"exclusion": "Exclusion"\r\n\t},\r\n\t"repositories/tipsRepository": {\r\n\t\t"credit_card_authorization": "Autorisation de carte de crédit",\r\n\t\t"tips_%_amount": "Montant du pourcentage de pourboires",\r\n\t\t"tips_%_used_for_authonly_is_too_high_please_use_value_from_0%_to_{0}%": "Le pourcentage de pourboire utilisés pour AuthOnly est trop élevé. Utiliser une valeur entre 0 % et {0} %"\r\n\t},\r\n\t"repositories/presentationApi/employeesRepository": {\r\n\t\t"invalid_email_address": "Adresse électronique invalide",\r\n\t\t"invalid_phone": "Numéro de téléphone invalide",\r\n\t\t"you_are_not_athorized_to_save_employees": "Vous n\'êtes pas autorisé à enregistrer les employés",\r\n\r\n\t\t"choose_role_name": "Choisir le nom de rôle de l’employé"\r\n\t},\r\n\t"repositories/presentationApi/modifiersRepository": {\r\n\t\t"option_name_must_be_unique": "Le nom de l\'option doit être unique.",\r\n\t\t"add_on": "Ajout",\r\n\t\t"exclusion": "Exclusion"\r\n\t},\r\n\t"repositories/presentationApi/storesRepository": {\r\n\t\t"invalid_state": "État invalide.",\r\n\t\t"invalid_zip": "Code postal invalide."\r\n\t},\r\n\t"base/baseListViewModel": {\r\n\t\t"list": "Liste"\r\n\t},\r\n\t"base/baseManageViewModel": {\r\n\t\t"error_saving_": "Erreur lors de l\'enregistrement",\r\n\t\t"edit_": "Modifier",\r\n\t\t"new_": "Nouveau"\r\n\t},\r\n\t"modifierTypes": {\r\n\t\t"modifierGroup": "Groupe de modificateurs",\r\n\t\t"addons": "Ajouts",\r\n\t\t"exceptions": "Exceptions",\r\n\r\n\t\t"0": "Groupe de modificateurs",\r\n\t\t"1": "Ajouts",\r\n\t\t"2": "Exceptions"\r\n\t},\r\n\t"reports/productMixReport": {\r\n\t\t"search_item_by_title_or_code": "Rechercher un article par titre ou code",\r\n\t\t"department": "Service",\r\n\t\t"department_filter": "Service :",\r\n\t\t"all": "Tous",\r\n\t\t"category": "Catégorie",\r\n\t\t"category_filter": "Catégorie",\r\n\t\t"id": "Identifiant",\r\n\t\t"item": "Article",\r\n\t\t"quantity": "Quantité",\r\n\t\t"qty_sold": "Qté vendue",\r\n\t\t"min_qty": "Qté min.",\r\n\t\t"gross_sales": "Ventes brutes",\r\n\t\t"netSales": "Ventes nettes",\r\n\t\t"taxAmount": "Montant de la taxe",\r\n\t\t"register": "Caisse",\r\n\t\t"register_filter": "Caisse :",\r\n\t\t"employee": "Employé(e)",\r\n\t\t"employee_filter": "Employé(e) :",\r\n\t\t"no_matching_records_found": "Aucun enregistrement correspondant trouvé",\r\n\t\t"total": "Total :",\r\n\t\t"timeIn": "Heure de pointage à l\'arrivée",\r\n\t\t"timeOut": "Heure de pointage au départ",\r\n\t\t"registerIn": "Caisse de pointage à l\'arrivée",\r\n\t\t"register_out": "Caisse de pointage au départ",\r\n\t\t"hours": "Heures",\r\n\r\n\t\t"confirmDelete": "Voulez-vous vraiment supprimer la session de travail ?",\r\n\t\t"terminal0": "Terminal de caisse",\r\n\t\t"terminal2": "Terminal de paiement électronique",\r\n\t\t"selectTime": "Sélectionner une heure",\r\n\t\t"selectDate": "Sélectionner une date",\r\n\r\n\t\t"employeeError": "Sélectionner un(e) employé(e)",\r\n\t\t"registerInError": "Sélectionner l\'heure de pointage à l\'arrivée",\r\n\t\t"registerOutError": "Sélectionner l\'heure de pointage au départ",\r\n\t\t"clockInError": "Évènement de pointage à l\'arrivée",\r\n\r\n\r\n\t\t"on": "sur",\r\n\t\t"alredy": "existe déjà",\r\n\t\t"clockOutError": "Évènement de pointage au départ",\r\n\t\t"store": "Magasin",\r\n\r\n\t\t"same": " L’heure d’arrivée doit être différente de l’heure de départ"\r\n\t},\r\n\t"reports/transactionReport": {\r\n\t\t"sale": "Sale",\r\n\t\t"refund": "Refund",\r\n\t\t"customer": "Client",\r\n\t\t"employee": "Employé(e)",\r\n\t\t"stores": "Magasins",\r\n\t\t"register": "Caisse",\r\n\t\t"period": "Période",\r\n\t\t"amountRange": "Plage de montants",\r\n\t\t"from": "De",\r\n\r\n\t\t"to": "À",\r\n\t\t"format": "Format",\r\n\t\t"export": "Exporter"\r\n\t},\r\n\t"reports/transactionReportHeaders": {\r\n\t\t"accountId": "Account ID",\r\n\t\t"companyName": "Company Name",\r\n\t\t"storeName": "Store Name",\r\n\t\t"registerName": "Register Name",\r\n\t\t"transactionType": "Transaction Type",\r\n\t\t"transactionId": "Transaction ID",\r\n\t\t"orderId": "Order ID",\r\n\t\t"paymentMethod": "Payment Method",\r\n\t\t"paymentStatus": "Payment Status",\r\n\t\t"cardNumber": "Card Number",\r\n\t\t"authCode": "Auth Code",\r\n\t\t"refNum": "RefNum",\r\n\t\t"total": "Total",\r\n\t\t"tips": "Tips",\r\n\t\t"authorized": "Authorized",\r\n\t\t"captured": "Captured",\r\n\t\t"paymentDate": "Payment Date",\r\n\t\t"employee": "Employee",\r\n\t\t"customer": "Customer",\r\n\t\t"customerAddressLine1": "Customer Address line 1",\r\n\t\t"customerAddressLine2": "Customer Address line 2",\r\n\t\t"customerCity": "Customer City",\r\n\t\t"customerState": "Customer State",\r\n\t\t"customerZip": "Customer Zip",\r\n\t\t"customerPhone": "Customer Phone"\r\n\t},\r\n\t"agingReport": {\r\n\r\n\t\t"unexpectedError": "Désolé, un problème est survenu. Veuillez réessayer plus tard.",\r\n\t\t"searchPlaceholder": "Rechercher par article, n° de série, CUP",\r\n\t\t"id": "Identifiant",\r\n\t\t"item": "Article",\r\n\t\t"department": "Service",\r\n\t\t"category": "Catégorie",\r\n\t\t"store": "Magasin",\r\n\t\t"serial": "N° de série",\r\n\t\t"cost": "Coût",\r\n\t\t"price": "Prix",\r\n\t\t"received": "Reçu(e)",\r\n\r\n\t\t"age": "Âge (jours)"\r\n\t},\r\n\t"serialItemTracking": {\r\n\t\t"serialNo": "Numéro de série",\r\n\t\t"submit": "Soumettre",\r\n\r\n\r\n\t\t"notFound": "Numéro de série non trouvé",\r\n\t\t"unexpectedError": "Désolé, un problème est survenu. Veuillez réessayer plus tard.",\r\n\t\t"productId": "ID du produit :",\r\n\t\t"productName": "Nom du produit :",\r\n\t\t"serialItemId": "ID de série de l\'article :",\r\n\t\t"action": "Action",\r\n\t\t"date": "Date",\r\n\t\t"from": "De",\r\n\r\n\t\t"to": "À",\r\n\t\t"amount": "Montant",\r\n\t\t"employee": "Employé(e)",\r\n\t\t"receiving": "Réception",\r\n\t\t"poReceiving": "Réception de commande d\'achat",\r\n\t\t"storeTransfer": "Transfert de magasin",\r\n\t\t"sale": "Vente",\r\n\t\t"refund": "Rembourser"\r\n\t},\r\n\t"payment/types": {\r\n\t\t"cash": "Espèces",\r\n\t\t"check": "Chèque",\r\n\t\t"creditCard": "Carte de crédit",\r\n\t\t"giftCertificate": "Bon-cadeau",\r\n\t\t"externalPayment": "Paiement externe",\r\n\t\t"debitCard": "Carte de débit"\r\n\r\n\r\n\t},\r\n\r\n\t"payment/statuses": {\r\n\t\t"pending": "En instance",\r\n\t\t"completed": "Terminé",\r\n\t\t"failed": "Échec",\r\n\t\t"voided": "Nulle",\r\n\t\t"refunded": "Remboursée",\r\n\t\t"hold": "En attente",\r\n\t\t"declined": "Refusé",\r\n\t\t"authorized": "Autorisé",\r\n\t\t"cancelled": "Annulée",\r\n\t\t"partiallyRefunded": "Remboursement partiel"\r\n\t},\r\n\t"taxReport": {\r\n\t\t"totalSales": "Ventes totales",\r\n\t\t"nonTaxableAmount": "Montant non taxable",\r\n\t\t"taxName": "Nom de la taxe",\r\n\t\t"taxRate": "Taux de taxes",\r\n\t\t"taxableAmount": "Montant taxable",\r\n\t\t"taxCollected": "Taxes collectées",\r\n\t\t"taxAgency": "Agence Fiscale",\r\n\t\t"total": "Total"\r\n\t},\r\n\t"upgrade": {\r\n\t\t"dialogTitle": "Mise à niveau",\r\n\r\n\t\t"wait": "La mise à niveau est en cours. Veuillez patienter.",\r\n\t\t"upgradeFinished": "La mise à niveau est terminée. Vous pouvez continuer à travailler avec eHopper."\r\n\t},\r\n\r\n\t"taxes": {\r\n\t\t"select_tax": "Sélectionner une taxe"\r\n\t},\r\n\r\n\r\n\t"taxes/taxesList": {\r\n\t\t"taxes_list": "Responsable de la fiscalité",\r\n\t\t"search_by_name_or_code": "Rechercher une taxe par nom ou par code",\r\n\t\t"new_tax": "Nouvelle taxe",\r\n\t\t"code": "Code",\r\n\t\t"name": "Name",\r\n\t\t"type": "Type",\r\n\t\t"rate_fee": "Taux",\r\n\t\t"cascade": "Cascade",\r\n\t\t"isActive": "Est actif(ve)",\r\n\t\t"isCombined": "Est combiné(e)",\r\n\t\t"active": "Actif(ve)",\r\n\t\t"inactive": "Inactif(ve)",\r\n\t\t"yes": "Oui",\r\n\t\t"no": "Non",\r\n\r\n\r\n\t\t"taxAgency": "Agence fiscale",\r\n\t\t"show_inactive": "Afficher les inactives"\r\n\r\n\t},\r\n\r\n\r\n\r\n\r\n\t"taxes/taxManage": {\r\n\t\t"tax_name_must_be_unique": "Le nom de la taxe doit être unique.",\r\n\t\t"new_tax": "Nouvelle taxe",\r\n\t\t"edit_tax": "Modifier la taxe",\r\n\t\t"tax_name": "Nom de la taxe",\r\n\t\t"input_name": "Saisir le nom",\r\n\t\t"cascade": "Cascade",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"tax_code": "Code taxe",\r\n\t\t"tax_type": "Type de taxe",\r\n\t\t"select_tax_type": "Sélectionner un type de taxe",\r\n\t\t"tax_Agency_placeholder": "Agence fiscale",\r\n\t\t"tax_Agency": "Agence fiscale",\r\n\r\n\t\t"singe_tax": "Taxe unique",\r\n\t\t"combined_tax": "Taxe combinée",\r\n\t\t"tax_component_name": "Nom du composant de la taxe",\r\n\t\t"tax_Agency_is_required": "L\'agence fiscale est obligatoire",\r\n\t\t"tax_name_is_required": "Le nom de la taxe est obligatoire",\r\n\t\t"x_is_required": "\'{0}\' est obligatoire",\r\n\t\t"rate_is_required": "Le taux est obligatoire"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\r\n\t"taxes/taxTypes": {\r\n\t\t"standart": "Standard",\r\n\t\t"flat": "Fixe",\r\n\t\t"rate": "Taux de taxes"\r\n\t},\r\n\r\n\t"taxAgenies/taxAgeniesList": {\r\n\t\t"tax_agencies_list": "Agences fiscales",\r\n\r\n\t\t"search_by_name": "Rechercher l\'Agence fiscale par nom",\r\n\t\t"new_tax_agency": "Nouvelle agence fiscale",\r\n\t\t"name": "Nom",\r\n\t\t"isActive": "Est actif(ve)",\r\n\t\t"active": "Actif(ve)",\r\n\t\t"inactive": "Inactif(ve)",\r\n\t\t"yes": "Oui",\r\n\r\n\r\n\r\n\r\n\t\t"no": "Non",\r\n\t\t"are_you_sure_you_want_to_delete_selected_tax_agency": "Voulez-vous vraiment supprimer l\'agence fiscale sélectionnée ?",\r\n\t\t"are_you_sure_you_want_to_delete_selected_tax_agencies": "Voulez-vous vraiment supprimer les agences fiscales sélectionnées ?",\r\n\t\t"the_tax_agency_has_taxes_assigned_please_delete_those_taxes_first": "Des taxes sont déjà attribuées à l\'agence fiscale \'{0}\'. Veuillez tout d\'abord supprimer ces taxes."\r\n\r\n\r\n\r\n\r\n\t},\r\n\r\n\r\n\t"taxAgenies/taxAgencyManage": {\r\n\t\t"input_name": "Nom de l\'agence fiscale",\r\n\t\t"is_active": "Est actif(ve)",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"new_tax_agency": "Nouvelle agence fiscale",\r\n\t\t"edit_tax_agency": "Modifier l\'agence fiscale",\r\n\t\t"tax_agency_name_should_be_unique": "Le nom de l\'agence fiscale doit être unique",\r\n\t\t"such_tax_agency_exist_x": "Il existe déjà une agence fiscale portant le nom \'{0}\'."\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\r\n\t"taxCombinedDialog": {\r\n\t\t"simple": "Taxe unique",\r\n\t\t"combined": "Taxe combinée",\r\n\t\t"create": "Créer",\r\n\t\t"or": "Ou",\r\n\t\t"simple_tax_desc": " ",\r\n\t\t"combined_tax_desc": " "\r\n\r\n\t},\r\n\t"storeTransfer": {\r\n\t\t"storeOut": "Départ de magasin",\r\n\t\t"storeIn": "Arrivée en magasin",\r\n\t\t"search": "Rechercher un article par titre ou code",\r\n\t\t"id": "ID",\r\n\t\t"name": "Nom",\r\n\t\t"upc": "CUP",\r\n\t\t"sku": "UGS",\r\n\t\t"cost": "Coût",\r\n\t\t"storeOutQuantity": "Qté départ de magasin",\r\n\t\t"storeInQuantity": "Qté arrivée en magasin",\r\n\t\t"transferQuantity": "Qté de transfert",\r\n\t\t"transfer": "Transfert",\r\n\t\t"cancel": "Annuler",\r\n\t\t"unexpectedError": "Désolé, une erreur est survenue. Veuillez réessayer plus tard.",\r\n\t\t"no_product_to_transfer": "Aucun produit sélectionné pour le transfert",\r\n\t\t"storeTransferSuccess": "Le transfert de magasin a été réalisé avec succès.",\r\n\t\t"storesAreEqualError": "« Départ de magasin » ne devrait pas être égal à « Arrivée en magasin ».",\r\n\t\t"transferQuantityError": "Doit être une valeur numérique",\r\n\t\t"transferIntegerQuantityError": "Doit être une valeur numérique",\r\n\t\t"storeTransferConfirmationTitle": "Confirmation de transfert de magasin",\r\n\t\t"storeTransferConfirmationMessage": "Êtes-vous sûr de vouloir faire un transfert?",\r\n\t\t"employee": "Employé",\r\n\t\t"all": "Tous",\r\n\t\t"totalQuantity": "Qté totale",\r\n\t\t"totalCost": "Coût total",\r\n\t\t"date": "Date",\r\n\t\t"storeTransferId": "ID de transfert de magasin",\r\n\t\t"transferQuantity": "Qté de transfert",\r\n\t\t"back": "Retour",\r\n\t\t"details": "Détails",\r\n\t\t"no_items_with_such_serial_in_out_store": "Aucun article avec ce numéro de série trouvé dans le magasin de sortie",\r\n\t\t"search_serials": "Rechercher les séries",\r\n\t\t"search_or_select_serials": "Rechercher ou sélectionner des séries",\r\n\t\t"storeTransferForbidden": "Vous devez avoir au moins deux magasins actifs pour pouvoir effectuer un transfert de magasins",\r\n\t\t"search_or_select_serials": "Rechercher ou sélectionner des séries",\r\n\t\t"no_search_criteria_provided": "Les critères de recherche n\'ont pas été fournis",\r\n\t\t"no_items_found_to_transfer": "Aucun article trouvé pour le transfert",\r\n\t\t"invalid_transfer_quantity_for_item": "Quantité de transfert invalide pour l\'article : \\"{0}\\"",\r\n\t\t"exportList": "Liste des transferts du magasin",\r\n\t\t"exportListWithDetails": "Inclure les détails",\r\n\t\t"showFullList": "Afficher la liste",\r\n\t\t"previous": "Précédent",\r\n\t\t"next": "Suivant",\r\n\t\t"startSearch": "Veuillez rechercher un produit à ajouter un par un ou basculer pour afficher la liste en entier"\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\t},\r\n\r\n\t"poReceiving": {\r\n\t\t"done": "Terminé",\r\n\t\t"Receive": "Recevoir",\r\n\t\t"vendor": "Fournisseur",\r\n\t\t"refNum": "No réf.",\r\n\t\t"poReceivingId": "ID de réception du bon de commande",\r\n\t\t"receivedQuantity": "Qté reçue",\r\n\t\t"reason": "Motif",\r\n\t\t"receive": "Recevoir",\r\n\r\n\r\n\r\n\t\t"poReceivingSuccess": "La réception du bon de commande a été réalisée avec succès.",\r\n\t\t"receivedQuantityError": "La quantité reçue doit être supérieure à 0 et inférieure à 100 000",\r\n\t\t"receivedIntegerQuantityError": "La quantité reçue doit être un nombre entier relatif supérieur à 0 et inférieur à 100 000",\r\n\t\t"poReceivingConfirmationTitle": "Réception de commande d\'achat",\r\n\t\t"poReceivingConfirmationMessage": "Êtes-vous sûr de vouloir recevoir un bon de commande?",\r\n\t\t"serialNumberNotUnique": "Le numéro de série doit être unique.",\r\n\t\t"na": "S/O",\r\n\t\t"found": "Trouvé(e)",\r\n\t\t"lost": "Perdu(e)",\r\n\t\t"stolen": "Volé(e)",\r\n\t\t"broken": "Cassé(e)",\r\n\t\t"gift": "Cadeau",\r\n\t\t"reason": "Motif",\r\n\t\t"reset": "Réinitialiser",\r\n\r\n\r\n\r\n\t\t"other": "Autre",\r\n\t\t"showFullList": "Afficher la liste",\r\n\t\t"no_product_to_receive": "Aucun produit sélectionné pour la réception"\r\n\r\n\r\n\t},\r\n\r\n\t"inventoryAdjustment": {\r\n\t\t"done": "Terminé",\r\n\t\t"vendor": "Fournisseur",\r\n\t\t"refNum": "Num. réf.",\r\n\t\t"inventoryAdjustmentId": "ID d\'ajustement des stocks",\r\n\t\t"adjustedQuantity": "Qté ajustée",\r\n\t\t"reason": "Motif",\r\n\t\t"adjust": "Ajuster",\r\n\r\n\t\t"inventoryAdjustmentSuccess": "L\'ajustement des stocks a été correctement effectué.",\r\n\t\t"adjustedQuantityError": "La quantité ajustée doit être supérieure à {0} et inférieure à {1}",\r\n\r\n\t\t"adjustedIntegerQuantityError": "La quantité ajustée doit être un nombre entier supérieur à {0} et inférieur à {1}",\r\n\t\t"inventoryAdjustmentConfirmationTitle": "Ajustement des stocks",\r\n\t\t"inventoryAdjustmentConfirmationMessage": "Voulez-vous vraiment faire un ajustement de l\'inventaire ?",\r\n\t\t"serialNumberNotUnique": "Le numéro de série doit être unique.",\r\n\t\t"na": "S/O",\r\n\t\t"found": "Trouvé(e)",\r\n\t\t"lost": "Perdu(e)",\r\n\t\t"stolen": "Volé(e)",\r\n\t\t"broken": "Cassé(e)",\r\n\t\t"gift": "Cadeau",\r\n\t\t"reason": "Motif",\r\n\t\t"reset": "Réinitialiser",\r\n\t\t"other": "Autre"\r\n\t},\r\n\r\n\t"quickbooks": {\r\n\t\t"quickbooks": "QuickBooks",\r\n\t\t"welcome": "Bienvenue sur la page des paramètres QuickBooks !<br>Configurez vos paramètres d\'intégration et programmez des transferts de données.",\r\n\t\t"disconnect-text": "La connexion eHopper et QuickBooks Online a été désactivée. <br>Pour vous reconnecter à QuickBooks, allez au Répertoire des applis et installez l\'application.",\r\n\t\t"settings_header": "Paramètres QuickBooks",\r\n\t\t"Quickbooks Settings not found": "Paramètres QuickBooks non trouvés.",\r\n\t\t"financial_settings": "Paramètres financiers",\r\n\t\t"payin_payout_sync": "Activer la synchro. des dépôts / retraits",\r\n\t\t"default_inventory_accounts": "Comptes de stocks par défaut",\r\n\t\t"cash_settings": "Synchronisation des dépôts / retraits",\r\n\t\t"bank_deposit_account": "Compte bancaire :",\r\n\t\t"asset_account": "Compte d\'actifs :",\r\n\t\t"income_account": "Résultat de l\'exercice :",\r\n\t\t"expense_account": "Compte de charges :",\r\n\t\t"data_transfer": "Transfert de données",\r\n\t\t"data_sync": "Synchro de données programmée",\r\n\t\t"settings": "Paramètres",\r\n\t\t"save": "Enregistrer",\r\n\t\t"done": "Terminé",\r\n\t\t"cancel": "Annuler",\r\n\t\t"sync_accounts": "Récupérer les comptes QuickBooks",\r\n\t\t"sync": "Synchroniser maintenant",\r\n\t\t"select_account": "Sélectionner un compte...",\r\n\t\t"sync_at": "à :",\r\n\t\t"sync_time": "Heure de synchro. (UTC)",\r\n\t\t"QuickBooks Chart of Accounts": "Plan comptable QuickBooks :",\r\n\t\t"Inherit from Department": "Hériter du service",\r\n\t\t"Inherit from Category": "Hériter de la catégorie",\r\n\t\t"Inherit Accounts": "Hériter d\'une liste de comptes",\r\n\t\t"settings_saved": "Paramètres annulés !",\r\n\t\t"field_is_required": "Le champ est obligatoire",\r\n\t\t"settings_not_saved": "Les paramètres ne sont pas enregistrés. Enregistrez d\'abord les paramètres.",\r\n\t\t"errors": "Erreurs",\r\n\t\t"errors_title": "QuickBooks - Erreurs de synchronisation",\r\n\t\t"close": "Fermer",\r\n\t\t"sync_details_title": "Détails de la synchronisation",\r\n\t\t"details": "Détails",\r\n\t\t"sync_log": "Historique de synchronisation",\r\n\t\t"syncedStores": "Magasins",\r\n\t\t"syncedTaxes": "Taxes",\r\n\t\t"syncedTaxAgencies": "Agences fiscales",\r\n\t\t"syncedVendors": "Fournisseurs",\r\n\t\t"syncedLobs": "Services",\r\n\t\t"syncedCategories": "Catégories",\r\n\t\t"syncedItems": "Produits",\r\n\t\t"syncedAccounts": "Comptes",\r\n\t\t"syncedSales": "Ventes",\r\n\t\t"syncedRefunds": "Remboursements",\r\n\t\t"syncedPayins": "Dépôts",\r\n\t\t"syncedPayouts": "Retraits",\r\n\t\t"syncedVoids": "Annulations",\r\n\t\t"payin_credit_account": "Compte de crédit du tiroir-caisse",\r\n\t\t"payin_debit_account": "Compte de débit du tiroir-caisse :",\r\n\t\t"In Progress": "En cours",\r\n\t\t"Completed": "Terminé",\r\n\t\t"Failed": "Échec",\r\n\t\t"Cancelled": "Annulé(e)",\r\n\t\t"Unknown": "Inconnu(e)",\r\n\t\t"syncedEntities": "Entités synchronisées",\r\n\t\t"date": "Date",\r\n\t\t"status": "Statut",\r\n\t\t"messages": "Messages",\r\n\t\t"token_is_expired_title": "Erreur d\'authentification",\r\n\t\t"token_is_expired": "Jeton de connexion expiré, veuillez vous reconnecter à QuickBooks.",\r\n\t\t"reconnect": "Reconnecter",\r\n\t\t"sync_finished": "La synchronisation est terminée",\r\n\t\t"error_occured": "Une erreur s\'est produite",\r\n\t\t"synced_accounts": "{0} comptes ont été synchronisés",\r\n\t\t"synced_account": "{0} compte(s) a/ont été synchronisé(s)"\r\n\r\n\t},\r\n\r\n\t"accountEdit": {\r\n\t\t"addStore": "Ajouter un magasin",\r\n\t\t"addRegister": "Ajouter une caisse",\r\n\t\t"enableStore": "Activer le magasin",\r\n\t\t"disableStore": "Désactiver le magasin",\r\n\t\t"enableRegister": "Activer la caisse",\r\n\t\t"disableRegister": "Désactiver la caisse"\r\n\t},\r\n\t"multiselect": {\r\n\t\t"no_matches": "Aucune correspondance trouvée",\r\n\t\t"enter_value": "Saisir une valeur",\r\n\t\t"select_all": "Tout sélectionner",\r\n\t\t"disableStore": "Désactiver le magasin",\r\n\t\t"enableRegister": "Activer la caisse",\r\n\t\t"disableRegister": "Désactiver la caisse"\r\n\t}\r\n\r\n}';});


define('text!lang/ru.html',[],function () { return '{\r\n    "meta": {\r\n        "language": "Русский",\r\n        "code": "ru"\r\n    },\r\n    "messages": {\r\n        "Bad Request": "Неправильный запрос",\r\n        "Entity of type \'{0}\' not found by id \'{1}\'": "Юридическое лицо типа \'{0}\' не найдено по ID \'{1}\'.",\r\n        "User \'{0}\' not found": "Пользователь \'{0}\' не найден.",\r\n        "User not found": "Пользователь не найден",\r\n        "Employee not found": "Сотрудник не найден",\r\n        "Transaction not found": "Транзакция не найдена",\r\n        "Employee \'employeeId={0}\' not found": "Сотрудник \'ID сотрудника={0}\' не найден.",\r\n        "Transaction \'transactionId={0}\' not found": "Транзакция \'ID транзакции={0}\' не найдена.",\r\n        "mustFreedomPlan": "Для использования этого функционала необходим план <b>Freedom</b>.",\r\n        "pleaseContactUs": "Пожалуйста, свяжитесь с нами для изменения плана."\r\n    },\r\n    "datatable": {\r\n        "EmptyTable": "Данные отсутствуют",\r\n        "Info": "Показаны записи с _START_ по _END_ из _TOTAL_",\r\n        "InfoEmpty": "Показаны записи с 0 по 0 из 0",\r\n        "InfoFiltered": "(filtered from _MAX_ total entries)",\r\n        "InfoPostFix": "",\r\n        "InfoThousands": ",",\r\n        "LengthMenu": "Show _MENU_ entries",\r\n        "LoadingRecords": "Загрузка...",\r\n        "Processing": "Обработка...",\r\n        "Search": "Поиск:",\r\n        "ZeroRecords": "Данные отсутствуют",\r\n        "Paginate_First": "Первая",\r\n        "Paginate_Last": "Последняя",\r\n        "Paginate_Next": "Следующая",\r\n        "Paginate_Previous": "Предыдущая",\r\n        "Aria_SortAscending": ": сортировать А-Я",\r\n        "Aria_SortDescending": ": сортировать Я-А"\r\n    },\r\n    "import": {\r\n        "Invalid file type": "Неподдерживаемый тип файла",\r\n        "File is too big message": "Файл слишком большой. Максимальный размер {0} Mb. Разделите файл на несколько файлов меньшего размера и импортируйте их отдельно."\r\n    },\r\n    "header": {},\r\n    "login": {\r\n        "back_office": "Бэк-офис",\r\n        "you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked": "Вы превысили количество попыток авторизации. Бэк-офис Вашей учетной записи заблокирован.",\r\n        "invalid_pin": "Недействительный PIN",\r\n        "you_are_not_authorized_to_login": "Вы не авторизированы для входа в систему.",\r\n        "version_": "Версия",\r\n        "termsAndConditionsTitle": "Правила и Условия",\r\n        "termsAndConditionsButton": "Подтвердить",\r\n        "termsAndConditionsAgree": "Я согласен(а) с Правилами и Условиями"\r\n    },\r\n    "navigationpanel": {},\r\n\r\n"apps": {\r\n    "install": "Установить",\r\n    "uninstall": "Удалить"\r\n},\r\n\r\n    "shell": {\r\n        "apps": "Приложения",\r\n        "appDirectory": "Каталог приложений",\r\n        "login": "Логин",\r\n        "dashboard": "Рабочий Стол",\r\n        "orders": "Заказы",\r\n        "order_details": "Информация о Заказе",\r\n        "inventory": "Каталог",\r\n        "products": "Товары",\r\n        "product": "Товар",\r\n        "import_inventory": "Импорт Товаров",\r\n        "departments": "Отделы",\r\n        "department": "Отдел",\r\n        "categories": "Категории",\r\n        "category": "Категория",\r\n        "modifiers": "Модификаторы",\r\n        "modifier": "Модификатор",\r\n        "storeTransfer": "Трансфер магазина",\r\n        "poReceiving": "Приём товара",\r\n        "customers": "Клиенты",\r\n        "import_customers": "Импорт Клиентов",\r\n        "vendor_list": "Список Поставщиков",\r\n        "manage_vendor": "Управление Поставщиками",\r\n        "vendors": "Поставщики",\r\n        "employees": "Сотрудники",\r\n        "employee_list": "Список Сотрудников",\r\n        "manage_employee": "Управление Сотрудниками",\r\n        "reporting": "Отчетность",\r\n        "tips_report": "Отчет о Чаевых",\r\n        "z_report": "Z-Отчет",\r\n        "z_report_details": "Информация о Z-Отчете",\r\n        "settings": "Настройки",\r\n        "store_settings": "Настройки Магазина",\r\n        "enterprise_settings": "Настройки Компании",\r\n        "register_settings": "Настройки Кассы",\r\n        "manage_register_settings": "Управление Настройками Кассы",\r\n        "new_register": "Новая Касса",\r\n        "tender_settings": "Настройки Заказа",\r\n        "tax_manager": "Менеджер Налогов",\r\n        "manage_taxes": "Создать/Изменить Налог",\r\n        "help": "Помощь",\r\n        "logout": "Выход",\r\n        "product_mix_report": "Отчет о Продажах Товара",\r\n        "taxReport": "Отчет о налогах",\r\n        "transactionsReport": "Отчет о транзакциях",\r\n        "storeTransfersReport": "Отчёт о Трансфере магазина",\r\n        "storeTransfersDetails": "Детали Трансфера магазина",\r\n        "poReceivingReport": "Отчёт о Приёме товара",\r\n        "poReceivingDetails": "Детали Приёма товара",\r\n        "exportReport": "Экспорт",\r\n        "clockIn": "Табельные Часы",\r\n        "quickbooks": "QuickBooks",\r\n        "menuBuilder": "Конструктор меню"\r\n    },\r\n    "categories/categoriesList": {\r\n        "new_category": "Новая Категория",\r\n        "toggle_dropdown": "Выпадающее Меню",\r\n        "new_department": "Новый Отдел",\r\n        "new_item": "Новый Товар",\r\n        "new_modifier": "Новый Модификатор",\r\n        "category_name": "Название Категории",\r\n        "department_name": "Название Отдела",\r\n        "status": "Статус",\r\n        "search_for_category": "Поиск Категории",\r\n        "are_you_sure_you_want_to_delete_selected_category": "Вы уверены, что хотите удалить выбранную категорию?",\r\n        "are_you_sure_you_want_to_delete_selected_categories": "Вы уверены, что хотите удалить выбранные категории?",\r\n        "the_category_has_products_assigned_please_delete_those_products_first": "Категория \'{0}\' содержит товары. Сначала удалите товары.",\r\n        "the_category_": "Категория",\r\n        "active": "Активная",\r\n        "inactive": "Неактивная"\r\n    },\r\n    "categories/categoryManage": {\r\n        "category_name": "Название Категории",\r\n        "category_short_name": "Введите Короткое Имя",\r\n        "category_description": "Описание Категории",\r\n        "department": "Отдел",\r\n        "select_department": "Выбрать Отдел...",\r\n        "is_active": "Активная",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "input_name": "Введите Имя",\r\n        "input_short_name": "Введите короткое Имя",\r\n        "input_description": "Введите описание",\r\n        "new_category": "Новая Категория",\r\n        "edit_category": "Редактировать Категорию",\r\n        "category_name_must_be_unique": "Название категории должно быть уникальным.",\r\n        "the_category_has_products_assigned_please_delete_those_products_first": "Категория содержит товары. Сначала удалите товары.",\r\n        "general": "Общее",\r\n        "localization": "Локализация",\r\n        "select_color": "Выберите цвет",\r\n        "color": "Цвет"\r\n    },\r\n    "categories/categoryManageNew": {\r\n        "category_name": "Название Категории",\r\n        "category_description": "Описание Категории",\r\n        "department": "Отдел",\r\n        "is_active": "Активная",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "input_name": "Введите Имя",\r\n        "new_category": "Новая Категория",\r\n        "category_name_must_be_unique": "Название категории должно быть уникальным."\r\n    },\r\n    "customers/importCustomers": {\r\n        "file_to_import": "Файл Для Импорта",\r\n        "browse_csv_file": "Поиск *.csv Файла",\r\n        "browse": "Поиск",\r\n        "uploading": "Загрузка",\r\n        "importing": "Импорт",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "file_is_too_big_max_size_is_{0}_mb_please_split_it_to_smaller_files_and_update_them_individually": "Файл слишком большой. Максимальный размер {0} Mb. Разделите файл на несколько файлов меньшего размера и импортируйте их отдельно.",\r\n        "file_is_too_big_max_size_is_mb_please_split_it_to_smaller_files_and_update_them_individually": "Файл слишком большой. Максимальный размер {0} Mb. Разделите файл на несколько файлов меньшего размера и импортируйте их отдельно.",\r\n        "the_error_was_detected_in_line_while_import_no_customers_were_imported_please_fix_problem_and_repeat_import": "Обнаружена ошибка в строке {0} при импорте. Файл не был импортирован. Устраните ошибку и повторите операцию заново. {1}",\r\n        "error_importing_": "Ошибка импорта",\r\n        "processing": "Обработка...",\r\n        "abort": "Прерывание",\r\n        "file_upload_failed_": "Ошибка при загрузке файла.",\r\n        "imported_lines": "Импортировано {0} строк.",\r\n        "error_in_file_format_error_line_message_": "Ошибка формата файла. Ошибка в строке #",\r\n        "Number of columns in line {0} is less then expected": "Количество колонок в строке {0} меньшее чем ожидалось. Ожидаемое количество колонок",\r\n        "Number of columns in line {0} is more then expected": "Количество колонок в строке {0} большее чем ожидалось. Ожидаемое количество колонок",\r\n        "Invalid format of \'CustomerId\'": "Неверный формат ‘ID клиента’",\r\n        "Field \'{0}\' is required": "Поле \'{0}\' обязательное",\r\n        "Field \'{0}\' has length greater than {1}": "Поле \'{0}\' длиннее чем{1}.",\r\n        "Phone format \'{0}\' is invalid": "Формат телефона ‘{0}’ неверный.",\r\n        "Email format \'{0}\' is invalid": "Формат электронной почты ‘{0}’ неверный.",\r\n        "Zip format \'{0}\' is invalid": "Формат индекса ‘{0}’ неверный.",\r\n        "State format \'{0}\' is invalid": "Формат штата  ‘{0}’ неверный.",\r\n        "Invalid country code: \'{0}\'": "Неправильный код страны: \'{0}\'",\r\n        "Unexpected Import Error": "Непредвиденная ошибка импорта.",\r\n        "Unexpected Import Error2": "Непредвиденная ошибка импорта",\r\n        "Import was completed successfully": "Импорт успешно завершен.",\r\n        "Customers import is already running": "Импорт клиентов уже запущен."\r\n    },\r\n    "dashboard/dashboard": {\r\n        "today": "Сегодня",\r\n        "yesterday": "Вчера",\r\n        "this_week": "На этой неделе",\r\n        "month-to-date": "С начала месяца",\r\n        "version_": "Версия",\r\n        "noteMessageNotFound": "(заметка не найдена)"\r\n    },\r\n    "dashboard/widgets/goLive": {\r\n        "go_live_date_is_in_x_days": "Дата ввода в эксплуатацию наступает через {0} дней - {1"\r\n    },\r\n    "dashboard/widgets/salesTransactions": {\r\n        "total_sales_by_category": "Общая Сумма Продаж По Категориям",\r\n        "statistic": "Статистический",\r\n        "no_data_available_for_selected_period": "Нет данных за выбранный период",\r\n        "total_sales": "Общая Сумма Продаж"\r\n    },\r\n    "dashboard/widgets/stats": {\r\n        "new_customers": "Новые Клиенты",\r\n        "repeat_customers": "Постоянные Клиенты",\r\n        "total_sales": "Общая Сумма Продаж",\r\n        "total_transactions": "Общее Количество Транзакций"\r\n    },\r\n    "dashboard/widgets/support": {\r\n        "support_team": "Команда Поддержки",\r\n        "email_me": "Отправить мне Еmail",\r\n        "the_subject_of_the_mail": "Тема Письма",\r\n        "hide": "Показать",\r\n        "show": "Скрыть"\r\n    },\r\n    "dashboard/widgets/tasks": {\r\n        "getting_started": "Начало",\r\n        "my_custom_task": "Мое Стандартное Задание",\r\n        "you_have_created_50_tasks_which_is_a_limit_delete_some_old_tasks_to_create_a_new_one": "Вы создали 50 заданий - максимальное допустимое количество. Удалите старые задания, чтобы создать новые."\r\n    },\r\n    "departments/departmentManage": {\r\n        "department_name": "Название Отдела",\r\n        "department_description": "Описание Отдела",\r\n        "is_active": "Активная",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "input_name": "Введите Имя",\r\n        "input_description": "Введите Описание",\r\n        "new_department": "Новый Отдел",\r\n        "edit_department": "Редактировать Отдел",\r\n        "department_name_must_be_unique": "Название отдела должно быть уникальным.",\r\n        "the_department_has_categories_assigned_please_delete_those_categories_first": "Отдел содержит категории. Сначала удалите категории.",\r\n        "failed_to_save_department": "Не удалось сохранить отдел."\r\n    },\r\n    "departments/departmentsList": {\r\n        "new_department": "Новый Отдел",\r\n        "toggle_dropdown": "Выпадающее Меню",\r\n        "new_category": "Новая Категория",\r\n        "new_item": "Новый Товар",\r\n        "new_modifier": "Новый Модификатор",\r\n        "department_name": "Название Отдела",\r\n        "status": "Статус",\r\n        "search_for_department": "Поиск Отдела",\r\n        "are_you_sure_you_want_to_delete_selected_department": "Вы уверены, что хотите удалить выбранный отдел?",\r\n        "are_you_sure_you_want_to_delete_selected_departments": "Вы уверены, что хотите удалить выбранные отделы?",\r\n        "the_department_has_categories_assigned_please_delete_those_categories_first": "Отдел \'{0}\' содержит категории. Сначала удалите категории.",\r\n        "the_department_": "Отдел",\r\n        "active": "Активная",\r\n        "inactive": "Неактивная"\r\n    },\r\n    "employees/employeeManage": {\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "new_employee": "Новый Сотрудник",\r\n        "edit_employee": "Редактировать данные о Сотруднике",\r\n        "general": "Общее",\r\n        "contact_info": "Контакты",\r\n        "localization": "Локализация",\r\n        "userPinExists": "Пользователь с данным PIN уже существует.",\r\n        "employeeExists": "Сотрудник уже существует."\r\n    },\r\n    "employees/employeesList": {\r\n        "first_name": "Имя",\r\n        "last_name": "Фамилия",\r\n        "email": "Электронная почта",\r\n        "phone": "Телефон",\r\n        "role": "Роль",\r\n        "status": "Статус",\r\n        "new_employee": "Новый Сотрудник",\r\n        "search_for_employee": "Поиск Сотрудника",\r\n        "active": "Активная",\r\n        "inactive": "Неактивная",\r\n        "allStores": "Все магазины",\r\n        "stores": " Магазин(ы)",\r\n        "store": " Магазин"\r\n    },\r\n    "employees/manage-tabs/contactTab": {\r\n        "email": "Электронная почта",\r\n        "phone": "Телефон",\r\n        "address": "Адрес",\r\n        "country": "Страна",\r\n        "state": "Штат",\r\n        "city": "Город",\r\n        "zip": "Индекс",\r\n        "choose_country": "Выбрать Страну...",\r\n        "choose_state": "Выбрать Штат..."\r\n    },\r\n    "employees/manage-tabs/generalTab": {\r\n        "first_name": "Имя",\r\n        "last_name": "Фамилия",\r\n        "language": "Язык",\r\n        "pin": "PIN",\r\n        "role": "Роль",\r\n        "is_active": "Активная",\r\n        "select_role": "Выбрать Роль...",\r\n        "stores": "Магазины:",\r\n        "assignedOnly": "Только назначен",\r\n        "searchStore": "Поиск Магазинов",\r\n        "selectStore": "Выбрать Магазин(ы)"\r\n    },\r\n    "employees/manage-tabs/localizationTab": {\r\n        "pos_language": "Язык POS",\r\n        "bo_language": "Язык Бэк-офиса",\r\n        "select_pos_language": "Выбрать Язык POS...",\r\n        "select_bo_language": "Выбрать Язык Бэк-офиса...",\r\n        "same_as_pos_language": "Такой же, как и язык POS",\r\n\r\n        "administrator": "Администратор"\r\n    },\r\n    "inventory/importInventory": {\r\n        "file_to_import": "Файл Для Импорта",\r\n        "browse": "Поиск",\r\n        "browse_csv_file": "Поиск *.csv Файла",\r\n        "uploading": "Загрузка",\r\n        "importing": "Импорт",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "error_importing_": "Ошибка импорта",\r\n        "processing": "Обработка...",\r\n        "abort": "Прерывание",\r\n        "file_upload_failed_": "Ошибка при Загрузке файла.",\r\n        "imported_lines": "Импортировано {0} строк.",\r\n        "error_in_file_format_error_line_message_": "Ошибка формата файла. Ошибка в строке #",\r\n        "Number of columns in line {0} is less then expected": "Количество колонок в строке {0} меньшее, чем ожидалось. Ожидаемое количество колонок",\r\n        "Number of columns in line {0} is more then expected": "Количество колонок в строке {0} большее, чем ожидалось. Ожидаемое количество колонок",\r\n        "import_was_successfully_cancelled": "Импорт успешно отменен.",\r\n        "import_successfully_finished": "Импорт успешно завершен.",\r\n        "cancelling": "Отмена...",\r\n        "field_is_required": "Поле \'{0}\' требуется.",\r\n        "Field \'{0}\' has length greater than {1}": "Поле \'{0}\' длиннее, чем{1}.",\r\n        "field_sku_or_cost_exists_while_vendor_is_empty": "Поле \'Sku\' или \'Стоимость\' существует, в то время как данные поставщика отсутствуют.",\r\n        "cannot_parse_file": "Невозможно разобрать файл.",\r\n        "upc_has_a_wrong_format_only_digits_allowed": "UPC содержит неверный формат. Допускаются только цифры.",\r\n        "upc_has_a_wrong_format_upc_length_can_be_8_or_12_or_13_digits": "UPC содержит неверный формат. UPC может состоять только из 8, 12 или 13 цифр.",\r\n        "unitOfMeasure_not_found": "Единица измерения \'{0}\' не найдена.",\r\n        "vendor_not_found": "Поставщик \'{0}\' не найден.",\r\n        "field_Name_Category_Department_cannot_be_null": "Поле \'Название\', \'Категория\', \'Отдел\' не может быть незаполненным.",\r\n        "the_sku_is_already_exists": "Sku ‘{0}’ уже существует.",\r\n        "field_Sku_cannot_be_null": "Поле \'Sku\' не может быть незаполненным.",\r\n        "unexpected_import_error_details_": "Непредвиденная ошибка импорта. Детали",\r\n        "error_at_line_": "Ошибка в строке \'{0}\'.",\r\n        "Inventory import is already running": "Импорт товаров уже запущен.",\r\n        "Language id is not found in header column": "В колонке с заглавием не найден код языка \'{0}\'",\r\n        "language_not_supported": "Язык \'{0}\' не поддерживается.",\r\n        "duplicate_language": "Duplicate language column \'{0}\'.",\r\n        "Columns with product names not found": "Колонки с названиями товаров не найдены",\r\n        "First column header does not contains default language code": "Заглавие первой колонки не содержит код языка по умолчанию.",\r\n        "field_cost_is_negative": "Значение \'Cost\' отрицательное",\r\n        "field_price_is_negative": "Значение \'Price\' отрицательное",\r\n        "field_price_is_invalid": "Значение \'Price\' введено неверно"\r\n    },\r\n    "inventory/importInventory/columns": {\r\n        "Product Name": "Название Товара ({0})",\r\n        "Description": "Описание",\r\n        "Department": "Отдел",\r\n        "Category": "Категория",\r\n        "UPC": "UPC",\r\n        "Product Status": "Статус Товара",\r\n        "Cost": "Стоимость",\r\n        "Price Type": "Тип цены",\r\n        "Sales Price": "Цена",\r\n        "Taxable": "Налогооблагаем",\r\n        "Discountable": "Скидка применима",\r\n        "Quantity on Hand": "Количество в стоке",\r\n        "Minimum Quantity": "Минимальное количество",\r\n        "Recommended Quantity": "Рекомендуемое количество",\r\n        "Vendor": "Поставщик",\r\n        "Vendor SKU": "SKU Поставщика"\r\n    },\r\n    "inventory/inventoryList": {\r\n        "new_item": "Новый Товар",\r\n        "toggle_dropdown": "Выпадающее Меню",\r\n        "new_category": "Новая Категория",\r\n        "new_department": "Новый Отдел",\r\n        "new_modifier": "Новый Модификатор",\r\n        "import_inventory": "Импорт Товаров",\r\n        "department": "Отдел",\r\n        "department_filter": "Отдел",\r\n        "all": "Все",\r\n        "category": "Категория",\r\n        "category_filter": "Категория",\r\n        "id": "ID",\r\n        "item": "Товар",\r\n        "cost": "Стоимость",\r\n        "price": "Цена",\r\n        "margin": "Маржа",\r\n        "quantity": "Количество",\r\n        "value": "цена склада",\r\n        "qty_sold": "Продано",\r\n        "gross_sales": "Сумма Продаж Брутто",\r\n        "status": "Статус",\r\n        "search_item_by_title_or_code": "Поиск товара по названию или коду",\r\n        "no_matching_records_found": "Совпадений не найдено",\r\n        "are_you_sure_you_want_to_delete_selected_products": "Вы уверены, что хотите удалить выбранные Товары?",\r\n        "deleting_product_error": "Товар: {0} не может быть удалён, так как есть открытые заказы. ",\r\n        "manual": "Ручная",\r\n        "active": "Активная",\r\n        "inactive": "Неактивная"\r\n    },\r\n    "inventory/inventoryManage": {\r\n        "cancel": "Отмена",\r\n        "done": "Готово",\r\n        "new_inventory_item": "Новый Товар",\r\n        "vendor": "Поставщик",\r\n        "modifier": "Модификатор",\r\n        "edit_inventory_item": "Редактировать Товар",\r\n        "general": "Общее",\r\n        "pricing": "Цена",\r\n        "taxes": "Taxes",\r\n        "modifiers": "Модификаторы",\r\n        "vendors": "Поставщики",\r\n        "ordering": "Склад",\r\n        "warning_another_product_has_the_same_sku_with_this_vendor": "Предупреждение",\r\n        "warning_product_picture_max_size_is_exceeded": "Предупреждение",\r\n        "another_product_has_save_sku_x_": "Существует Товар с указанным SKU: \'{0}\' данного Поставщика.",\r\n        "unexpected_error_occured_please_try_again_later": "Произошла непредвиденная ошибка. Повторите попытку позже."\r\n    },\r\n    "inventory/inventory-manage-tabs/general": {\r\n        "product_name": "Название Товара",\r\n        "product_short_name": "Короткое название товара",\r\n        "product_description": "Описание Товара",\r\n        "department": "Отдел",\r\n        "category": "Категория",\r\n        "upc": "UPC",\r\n        "is_active": "Активная",\r\n        "the_image_is_too_big_max_allowed_size_of_image_is_kb": "Изображение слишком большое. Максимальный допустимый размер изображения {0} Kb.",\r\n        "upload_product_image": "Загрузить картинку",\r\n        "delete_image": "Удалить картинку",\r\n        "choose_department": "Выбрать отдел...",\r\n        "choose_category": "Выбрать категорию...",\r\n        "the_image_will_be_deleted": "Изображение будет удалено.",\r\n        "ok": "OK",\r\n        "cancel": "Отмена",\r\n        "chrome_invalid_version_pic": "Чтобы изменить изображение или загрузить новое, используйте последнюю версию Google Chrome.",\r\n        "chrome_invalid_version_no_pic": "Чтобы загрузить новое изображение, используйте последнюю версию Google Chrome.",\r\n        "browse_images": "Загрузить изображения"\r\n    },\r\n    "inventory/inventory-manage-tabs/ordering": {\r\n        "quantity": "Количество",\r\n        "recommended_quantity": "Рекомендованное количество",\r\n        "minimum_quantity": "Минимальное количество",\r\n        "input_quantity": "Введите количество",\r\n        "total_quantity": "Общее колчество",\r\n        "quantityLimits": "Количество должно быть больше {0} и меньше {1}",\r\n        "recommendedQuantityLimits": "Рекомендованное количество должно быть больше или равно {0} и меньше {1}",\r\n        "minimumQuantityLimits": "Минимальное количество должно быть больше или равно {0} и меньше {1}",\r\n        "minimum_quantity_should_be_less_or_equal_to_recommended_quantity": "Минимальное количество должно быть меньше или равно рекомендованному количеству"\r\n    },\r\n    "inventory/inventory-manage-tabs/pricing": {\r\n        "price_type": "Тип Цены",\r\n        "unit": "Единица Измерения",\r\n        "sales_price": "Розничная Цена",\r\n        "is_taxable": "Облагается Налогом",\r\n        "is_discountable": "Подлежит Скидке",\r\n        "fixed": "Фиксированная",\r\n        "manual": "Ручной Режим",\r\n        "price_should_be_greater_or_equal_to_0_and_less_than_100000": "Цена должна быть выше или равна 0 и ниже 100000",\r\n        "store": "Магазин",\r\n        "salesPrice": "Цена",\r\n        "discountable": "Скидка применима",\r\n        "taxable": "Налогообложение",\r\n        "stores": "Магазины",\r\n        "name": "Название",\r\n        "rate": "Ставка"\r\n    },\r\n    "inventory/inventory-manage-tabs/vendorManage": {\r\n        "vendor": "Поставщик",\r\n        "sku": "SKU",\r\n        "cost": "Стоимость",\r\n        "primary": "Основной",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "input_name": "Введите Имя"\r\n    },\r\n    "inventory/inventory-manage-tabs/vendors": {\r\n        "vendor": "Поставщик",\r\n        "sku": "SKU",\r\n        "cost": "Стоимость",\r\n        "primary": "Основной",\r\n        "new_vendor": "Новый Поставщик",\r\n        "search_or_select_vendors": "Поиск Или Выбор Поставщика",\r\n        "search_vendors": "Поиск Поставщика"\r\n    },\r\n    "inventory/inventory-manage-tabs/modifiers/addOnModifiers": {\r\n        "add-ons": "Добавки",\r\n        "modifier_name": "Название Модификатора",\r\n        "price": "Цена",\r\n        "is_active": "Активная",\r\n        "you_did_not_add_add-ons": "Вы не добавили добавки.",\r\n        "add_option": "Добавить Варианты"\r\n    },\r\n    "inventory/inventory-manage-tabs/modifiers/exceptionModifiers": {\r\n        "exceptions": "Исключения",\r\n        "modifier_name": "Название Модификатора",\r\n        "price": "Цена",\r\n        "is_active": "Активная",\r\n        "you_did_not_add_exceptions": "Вы не добавили исключения.",\r\n        "add_option": "Добавить Варианты"\r\n    },\r\n    "inventory/inventory-manage-tabs/modifiers/groupModifiers": {\r\n        "groups": "Группы",\r\n        "group_name": "Название Группы",\r\n        "option": "Вариант",\r\n        "price": "Цена",\r\n        "default": "По Умолчанию",\r\n        "is_active": "Активная",\r\n        "you_did_not_add_group_modifier": "Вы не добавили группу.",\r\n        "enter_name": "Введите Имя",\r\n        "add_option": "Добавить Варианты"\r\n    },\r\n    "inventory/inventory-manage-tabs/modifiers/modifiers": {\r\n        "selectModifierType": "Выбрать Тип Модификатора",\r\n        "new_modifier": "Новый Модификатор",\r\n        "product_modifiers_must_have_unique_names": "Модификатор товара должен иметь уникальное название.",\r\n        "add_modifiers_to_product": "Добавить Модификаторы Товара",\r\n        "all_stores": "Все магазины"\r\n    },\r\n    "modifiers/modifierManage": {\r\n        "modifier_type": "Тип Модификатора",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "select_modifier_type": "Выбрать Тип Модификатора",\r\n        "modifier_with_such_name_already_exists": "Модификатор с таким названием уже существует.",\r\n        "modifier_with_name_x_already_exists_for_lang_x": "Модификатор \'{0}\' уже существует для языка \'{1}\'.",\r\n        "new_modifiers_must_have_unique_names": "Новые модификаторы должны иметь уникальные названия.",\r\n        "new_modifier": "Новый Модификатор",\r\n        "modifier_name_must_be_unique": "Название модификатора должно быть уникальным.",\r\n        "modifier_name_for_lang_x_is_empty": "Не задано название модификатора для языка \'{0}\'.",\r\n        "modifiers_option_name_for_lang_x_is_empty": "Не задано название опции группы \'{0}\' для языка \'{1}\'.",\r\n        "modifier_option_name_for_lang_x_must_be_unique": "Название опции должно быть уникальным внутри группы для языка \'{0}\'.",\r\n        "emptyGroupModifierError": "Нельзя создать групповой модификатор без опций",\r\n        "edit_modifier": "Редактировать Модификатор"\r\n    },\r\n    "modifiers/modifiersList": {\r\n        "new_modifier": "Новый Модификатор",\r\n        "toggle_dropdown": "Выпадающее Меню",\r\n        "new_department": "Новый Отдел",\r\n        "new_category": "Новая Категория",\r\n        "new_item": "Новый Товар",\r\n        "modifier": "Модификатор",\r\n        "type": "Тип",\r\n        "status": "Статус",\r\n        "search_for_modifier": "Поиск Модификатора",\r\n        "are_you_sure_you_want_to_delete_selected_modifier": "Вы уверены, что хотите удалить выбранный модификатор?",\r\n        "the_modifier_was_not_deleted": "Модификатор не был удален.",\r\n        "group": "Группа",\r\n        "add-on": "Добавка",\r\n        "exception": "Исключение",\r\n        "active": "Активная",\r\n        "inactive": "Неактивная"\r\n    },\r\n    "modifiers/modifier-type/addOnModifier": {\r\n        "add-ons": "Добавки",\r\n        "modifier_name": "Название Модификатора",\r\n        "price": "Цена",\r\n        "is_active": "Активная",\r\n        "add_option": "Добавить Марианты"\r\n    },\r\n    "modifiers/modifier-type/exceptionModifier": {\r\n        "exceptions": "Исключения",\r\n        "modifier_name": "Название Модификатора",\r\n        "price": "Цена",\r\n        "is_active": "Активная",\r\n        "add_option": "Добавить Варианты"\r\n    },\r\n    "modifiers/modifier-type/groupModifier": {\r\n        "groups": "Группы",\r\n        "group_name": "Название Группы",\r\n        "option": "Вариант",\r\n        "price": "Цена",\r\n        "default": "По Умолчанию",\r\n        "is_active": "Активная",\r\n        "enter_name": "Введите Имя",\r\n        "add_option": "Добавить Варианты"\r\n    },\r\n    "orders/orderDetails": {\r\n        "order_id": "ID Заказа",\r\n        "order_name": "Название Заказа",\r\n        "customer": "Клиент",\r\n        "customer_phone": "Телефон Клиента",\r\n        "employee": "Сотрудник",\r\n        "order_date": "Дата Заказа",\r\n        "order_type": "Тип Заказа",\r\n        "status": "Статус",\r\n        "/": "/",\r\n        "tender_type": "Тип Заказа",\r\n        "fulfillment": "Выполнение",\r\n        "refnum": "Исх. Номер",\r\n        "subtotal": "Подсумма",\r\n        "discount": "Скидка",\r\n        "tax": "Налог",\r\n        "tips": "Чаевые",\r\n        "total": "Всего",\r\n        "back": "Назад",\r\n        "order_details": "Данные Заказа",\r\n        "order_details_-_register_#_": "Данные заказа - Касса # {0} - Статус заказа",\r\n        "Pending": "В обработке",\r\n        "Completed": "Завершен",\r\n        "Failed": "Не прошел",\r\n        "Voided": "Отменен",\r\n        "authCode": "Код авториз.:",\r\n        "control_number": "Контрольный #:",\r\n        "store": "Магазин:"\r\n    },\r\n    "orders/orderDetailsItems": {\r\n        "description": "Описание",\r\n        "quantity": "Количество",\r\n        "item_price": "Цена За Единицу",\r\n        "discount": "Скидка",\r\n        "total_price": "Общая Цена"\r\n    },\r\n    "orders/ordersList": {\r\n        "order_type": "Тип Заказа",\r\n        "all": "Все",\r\n        "order_status": "Статус Заказа",\r\n        "fulfillment": "Выполнение",\r\n        "order_id": "ID Заказа",\r\n        "order_name": "Название Заказа",\r\n        "type": "Тип",\r\n        "status": "Статус",\r\n        "total": "Всего",\r\n        "date": "Дата",\r\n        "employee": "Сотрудник",\r\n        "store": "Магазин",\r\n        "customer": "Клиент",\r\n        "search_order": "Поиск Заказа",\r\n        "orders": "Заказы",\r\n        "upc": "Код заказа",\r\n        "name": "Название",\r\n        "typeColumn": "Тип заказа",\r\n        "tenderType": "Тип оплаты",\r\n        "fulfilmentColumn": "Выполнение",\r\n        "businessDate": "Дата",\r\n        "subtotal": "Пром.итог",\r\n        "discount": "Скидка",\r\n        "tax": "Налог",\r\n        "tips": "Чаевые",\r\n        "totalAmount": "Сумма",\r\n        "controlNumber": "Контр.№",\r\n        "walkIn": "Неизвестный"\r\n    },\r\n    "registerSettings/registerSettingsList": {\r\n        "register_name": "Название Кассы",\r\n        "status": "Статус",\r\n        "are_you_sure_you_want_to_delete_selected_register_setting": "Вы уверены, что хотите удалить выбранные настройки кассы?",\r\n        "error_occurred_while_deleting_register_setting_": "Произошла ошибка во время удаления настроек кассы {0}",\r\n        "employees_": "Сотрудники",\r\n        "active": "Активная",\r\n        "inactive": "Неактивная",\r\n        "search_register": "Поиск Кассы",\r\n        "new_register": "Новая Касса",\r\n        "store": "Магазин"\r\n    },\r\n    "registerSettings/registerSettingsManage": {\r\n        "general": "Общее",\r\n        "localization": "Локализация",\r\n        "register_name": "Название Кассы",\r\n        "assigned_only": "Только Назначенные",\r\n        "employees": "Сотрудники",\r\n        "register_number": "Номер Кассы",\r\n        "register_license_key": "Лицензионный Ключ Кассы",\r\n        "is_active": "Активная",\r\n        "unblock": "Разблокировать",\r\n        "deactivate": "Деактивировать",\r\n        "deactivateConfirmTitle": "Деактивация кассы",\r\n        "deactivateConfirmText": "Вы собираетесь деактивировать кассу.<br />Все несинхронизированные данные на устройстве кассы будут потеряны.",\r\n        "deactivateSuccess": "Касса деактивирована.",\r\n        "deactivateError": "Произошла ошибка при деактивации кассы.",\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "input_name": "Введите Имя",\r\n        "input_number": "Введите Номер",\r\n        "register_with_this_name_already_exists_please_select_another_name_for_the_register": "Касса с таким названием уже существует. Выберите другое название для кассы.",\r\n        "register_number_must_be_unique": "Номер кассы должен быть уникальным.",\r\n        "new_register_setting": "Настройки Новой Кассы",\r\n        "edit_register_setting": "Редактировать Настройки Кассы",\r\n        "search_or_choose_employee(s)": "Поиск Или Выбор Сотрудника(ов)",\r\n        "search_or_choose_device(s)": "Поиск Или Выбор Устройств",\r\n        "payment_gateway": "Платежный Шлюз",\r\n        "control_token": "Токен контрольного #",\r\n        "store": "Магазин"\r\n    },\r\n    "registerSettings/registerSettingsManage/localization": {\r\n        "pos_language": "Язык POS",\r\n        "kitchen_receipt_language": "Язык Чека Для Кухни",\r\n        "date_format": "Формат Даты",\r\n        "time_format": "Формат Времени",\r\n        "select_pos_language": "Выбрать Язык POS ...",\r\n        "select_kitchen_receipt_language": "Выбрать Язык Чека Для Кухни...",\r\n        "select_date_format": "Выбрать Формат Даты...",\r\n        "select_time_format": "Выбрать Формат Времени..."\r\n    },\r\n    "registerSettings/registerSettingsManage/paymentGateway": {\r\n        "payment_gateway": "Платежный Шлюз",\r\n        "source_key": "Ключ Магазина",\r\n        "pin": "PIN",\r\n        "debitCardEnabled": "Включить Платежи Дебетовыми Картами"\r\n    },\r\n    "registerSettings/newRegister": {\r\n        "defaultRegisterName": "Новая Касса",\r\n        "requestSubmited": "Запрос на создание <strong>Новой Кассы</strong><br /> был направлен в Команду Поддержки.",\r\n        "receiveNotification": "Вы получите уведомление о создании Кассы",\r\n        "unexpectedError": "Извините, произошла ошибка. Повторите попытку позже.",\r\n        "duplicateName": "Касса с указанным именем уже существует."\r\n    },\r\n    "shifts/shift": {\r\n        "register": "Касса",\r\n        "opened": "Открыта",\r\n        "opened_by": "Открыта (кем)",\r\n        "closed": "Закрыта",\r\n        "closed_by": "Закрыта (кем)",\r\n        "transactions": "Транзакции",\r\n        "cash": "Наличные",\r\n        "external_payment": "Внешний Платеж",\r\n        "opening_amount": "Сумма На Открытие",\r\n        "cash_sales": "Продажа За Наличные",\r\n        "cash_refunds": "Возврат Наличными",\r\n        "payins": "Внесенная Сумма",\r\n        "payouts": "Выданная Сумма",\r\n        "closing_amount": "Сумма На Закрытие",\r\n        "variance": "Расхождение",\r\n        "revenue": "Доход",\r\n        "sales": "Продажи",\r\n        "discounts": "Скидки",\r\n        "refunds": "Возвраты",\r\n        "net_sales": "Продажи Нетто",\r\n        "tips": "Чаевые",\r\n        "tax": "Налог",\r\n        "total_tendered": "Всего Оплачено",\r\n        "tender_breakdown": "Разбивка Оплат",\r\n        "credit_card": "Кредитная Карта",\r\n        "debit_card": "Дебетовая Карта",\r\n        "back": "Назад"\r\n    },\r\n    "shifts/shiftsList": {\r\n        "register": "Касса",\r\n        "opened": "Открыта",\r\n        "closed": "Закрыта",\r\n        "transactions": "Транзакции",\r\n        "total_tendered": "Всего Оплачено",\r\n        "variance": "Расхождение",\r\n        "no_matching_records_found": "Совпадения не найдены",\r\n        "openedBy": "Открыта (кем)",\r\n        "closedBy": "Закрыта (кем)",\r\n        "openingAmount": "Сумма при открытии",\r\n        "cashSales": "Продажи за Наличные",\r\n        "cashRefunds": "Возврат наличных",\r\n        "payins": "Служебные вносы",\r\n        "payouts": "Служебные выносы",\r\n        "closingAmount": "Сумма при закрытии",\r\n        "sales": "Продажи",\r\n        "discounts": "Скидки",\r\n        "refunds": "Возвраты",\r\n        "netSales": "Продажи нетто",\r\n        "tips": "Чаевые",\r\n        "tax": "Налоги",\r\n        "cash": "Наличные",\r\n        "creditCard": "Кредитная карта",\r\n        "debitCard": "Дебетовая карта",\r\n        "externalPayment": "Другой платёж",\r\n        "store": "Магазин"\r\n    },\r\n    "stores/storesList": {\r\n        "stores": "Магазин",\r\n        "search_store": "Поиск Магазин",\r\n        "new_store": "Новый Магазин",\r\n        "store_name": "Название Магазина",\r\n        "status": "Статус",\r\n        "employees_": "Сотрудники:",\r\n        "active": "Активный",\r\n        "inactive": "Неактивный"\r\n    },\r\n    "storeSettings/storeSettings": {\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "saved_successfully": "Успешно сохранено.",\r\n        "general": "Общее",\r\n        "contacts": "Контакты",\r\n        "registers": "Кассы",\r\n        "billing": "Счета",\r\n        "receipt": "Чек",\r\n        "tips": "Чаевые",\r\n        "taxes": "Налоги",\r\n        "payment_gateway": "Платежный Шлюз",\r\n        "localization": "Локализация"\r\n    },\r\n    "storeSettings/store-settings-tabs/billing": {\r\n        "next_billing_date": "Следующая Дата Выставления Счета",\r\n        "amount_to_pay": "Сумма к Оплате"\r\n    },\r\n    "storeSettings/store-settings-tabs/contacts": {\r\n        "store_name": "Название Магазина",\r\n        "address_1": "Адрес 1",\r\n        "address_2": "Адрес 2",\r\n        "city": "Город",\r\n        "state": "Штат",\r\n        "zip": "Индекс",\r\n        "country": "Страна",\r\n        "phone": "Телефон",\r\n        "email": "Электронная почта",\r\n        "web": "Веб-сайт",\r\n        "choose_country": "Выбрать Страну...",\r\n        "pleaseFillNewStore": "Пожалуйста, заполните форму для создания нового Магазина.",\r\n        "pleaseFillNewRegister": "Пожалуйста, заполните форму для создания новой Кассы."\r\n    },\r\n    "storeSettings/store-settings-tabs/general": {\r\n        "storeId": "ID Магазина",\r\n        "is_active": "Активен",\r\n        "account_id": "ID Учетной Записи",\r\n        "stores_business": "Сфера Деятельности Магазина",\r\n        "tax_rate": "Налоговая Ставка",\r\n        "show_order_type": "Показать Тип Заказа",\r\n        "item_notes": "Примечания к Товару",\r\n        "no_notes": "Нет Примечаний",\r\n        "mandatory": "Обязательно",\r\n        "optional": "Не Обязательно",\r\n        "cancel_store_account": "Отменить Счет Магазина",\r\n        "autoLogoutAfterOrder": "Автовыход После Заказа",\r\n        "externalPayment": "Внешний Платеж",\r\n        "syncOnLogin": "Синхронизация при входе",\r\n        "openCashDrawerCC": "Открывать кассу при карточных транзакциях",\r\n        "show_tax_list": "Показать список налогов"\r\n    },\r\n    "storeSettings/store-settings-tabs/payment": {\r\n        "payment_gateway": "Платежный Шлюз",\r\n        "source_key": "Ключ Магазина",\r\n        "pin": "PIN",\r\n        "debitCardEnabled": "Включить Платежи Дебетовыми Картами"\r\n    },\r\n    "storeSettings/store-settings-tabs/receipt": {\r\n        "kitchen_receipt": "Чек Для Кухни",\r\n        "signature_on_receipt": "Подпись На Чеке",\r\n        "tipsNSignature": "Чаевые и Подпись",\r\n        "Screen": "на Экране",\r\n        "Receipt": "на Чеке",\r\n        "Terminal": "на Терминале",\r\n        "receipt_template": "Шаблон Чека",\r\n        "load_another_template": "Загрузить Другой Шаблон",\r\n        "footer": "Нижний колонтитул"\r\n    },\r\n    "storeSettings/store-settings-tabs/registers": {\r\n        "registers_list": "Список Касс",\r\n        "select_#_of_stores_registers": "Выбрать # Кассы Магазина",\r\n        "price_per_register": "Цена На Кассе"\r\n    },\r\n    "storeSettings/store-settings-tabs/tips": {\r\n        "tips": "Чаевые",\r\n        "tips_on_credit_card_authorization": "Чаевые При Авторизации Карты",\r\n        "keyboard_shortcut_settings": "Кнопки Быстрого Вызова",\r\n        "for_curr_amount": "На {0} Сумму",\r\n        "for_%_amount": "На % Суммы"\r\n    },\r\n    "storeSettings/store-settings-tabs/localization": {\r\n        "pos_language": "Язык POS ",\r\n        "kitchen_receipt_language": "Язык Чека Для Кухни",\r\n        "date_format": "Формат Даты",\r\n        "time_format": "Формат Времени",\r\n        "select_pos_language": "Выбрать Язык POS ...",\r\n        "select_kitchen_receipt_language": "Выбрать Язык Чека Для Кухни...",\r\n        "select_date_format": "Выбрать Формат Даты...",\r\n        "select_time_format": "Выбрать Формат Времени..."\r\n    },\r\n    "storeSettings/newStore": {\r\n        "defaultStoreName": "Новый Магазин",\r\n        "description": "Описание",\r\n        "storeDescription": "Описание Магазина",\r\n        "requestSubmited": "Заявка на создание <strong>Нового Магазина</strong><br /> направлена в Команду Поддержки.",\r\n        "receiveNotification": "Вы получите уведомление когда Магазин будет создан"\r\n    },\r\n    "enterpriseSettings/enterpriseSettings": {\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "contacts": "Контакты",\r\n        "marketing": "Маркетинг",\r\n        "localization": "Локализация",\r\n        "saved_successfully": "Успешно сохранено.",\r\n        "default_lang_change_error": "Переводы для названия отдела, названия категории\\tназвания товара, Название модификатора/вариантов на языке \'{0}\' отсутствует. Добавьте все переводы до изменения языка по умолчанию. {1} \'{2}\' не выполнен перевод для нового языка.",\r\n        "Department": "Отдел",\r\n        "Category": "Категория",\r\n        "Product": "Товар",\r\n        "Modifier": "Модификатор",\r\n        "Modifier Option": "Вариант Модификатора"\r\n    },\r\n    "enterpriseSettings/enterprise-settings-tabs/contacts": {\r\n        "enterprise_code": "Код Компании",\r\n        "enterprise_name": "Название Компании",\r\n        "address_1": "Адрес 1",\r\n        "address_2": "Адрес 2",\r\n        "city": "Город",\r\n        "state": "Область/Штат",\r\n        "zip": "Индекс",\r\n        "country": "Страна",\r\n        "phone": "Телефон",\r\n        "email": "Электронная почта",\r\n        "web": "Веб-сайт",\r\n        "choose_country": "Выбрать Страну..."\r\n    },\r\n    "enterpriseSettings/enterprise-settings-tabs/localization": {\r\n        "account_languages": "Языки",\r\n        "select_language": "Выбрать Язык",\r\n        "default_language": "Язык По Умолчанию",\r\n        "pos_language": "Язык POS ",\r\n        "kitchen_receipt_language": "Язык Чека Для Кухни",\r\n        "bo_language": "Язык Бэк-офиса",\r\n        "date_format": "Формат Даты",\r\n        "time_format": "Формат Времени",\r\n        "currency": "Валюта",\r\n        "currency_format": "Формат Валюты",\r\n        "select_pos_language": "Выбрать Язык POS ...",\r\n        "select_kitchen_receipt_language": "Выбрать Язык Чека Для Кухни...",\r\n        "select_bo_language": "Выбрать Язык Бэк-офиса...",\r\n        "select_date_format": "Выбрать Формат Даты...",\r\n        "select_time_format": "Выбрать Формат Времени..."\r\n    },\r\n    "tips/tipsList": {\r\n        "employee": "Сотрудник",\r\n        "all": "Все",\r\n        "order_id": "ID Заказа",\r\n        "ref_num": "Исх. Номер",\r\n        "type": "Тип",\r\n        "status": "Статус",\r\n        "price": "Цена",\r\n        "date": "Дата",\r\n        "tips": "Чаевые",\r\n        "total_tips": "Всего Чаевых",\r\n        "tips_report": "Отчет О Чаевых",\r\n        "statusNotPaid": "Не оплачен",\r\n        "statusPartiallyPaid": "Оплачен частично",\r\n        "statusPaid": "Оплачен",\r\n        "statusPartiallyRefunded": "Частичный возврат",\r\n        "statusRefunded": "Возврат завершен",\r\n        "statusVoided": "Отменён",\r\n        "store": "Магазин"\r\n    },\r\n    "vendors/vendorManage": {\r\n        "done": "Готово",\r\n        "cancel": "Отмена",\r\n        "new_vendor": "Новый Поставщик",\r\n        "general": "Общее",\r\n        "contact_info": "Контакты"\r\n    },\r\n    "vendors/vendorsList": {\r\n        "new_vendor": "Новый Поставщик",\r\n        "toggle_dropdown": "Выпадающее Меню",\r\n        "new_item": "Новый Товар",\r\n        "new_category": "Новая Категория",\r\n        "vendor_name": "Название Поставщика",\r\n        "type": "Тип",\r\n        "status": "Статус",\r\n        "search_for_vendor": "Поиск Поставщика",\r\n        "are_you_sure_you_want_to_delete_selected_vendor": "Вы уверены, что хотите удалить выбранного поставщика?",\r\n        "active": "Активная",\r\n        "inactive": "Неактивная",\r\n        "vendors_list": "Список Поставщиков",\r\n        "the_vendor_has_vendoritem_assigned_please_delete_those_vendoritem_first": "Поставщик {0} имеет позицию поставщика. Сначала удалите позицию поставщика."\r\n    },\r\n    "vendors/manage-tabs/contactInfo": {\r\n        "address": "Адрес",\r\n        "country": "Страна",\r\n        "state": "Штат",\r\n        "city": "Город",\r\n        "zip": "Индекс",\r\n        "phone": "Телефон",\r\n        "fax": "Факс",\r\n        "email": "Электронная почта",\r\n        "web_site": "Веб-сайт",\r\n        "contact_name": "Контактное Лицо",\r\n        "www_address_com": "http",\r\n        "choose_country": "Выбрать Страну...",\r\n        "choose_state": "Выбрать Штат...",\r\n        "contact_info": "Контакты"\r\n    },\r\n    "vendors/manage-tabs/general": {\r\n        "business_account_#": " # Учетной Записи",\r\n        "vendor_name": "Название Поставщика",\r\n        "vendor_type": "Тип Поставщика",\r\n        "tax_id": "ID Налогоплатильщика",\r\n        "notes": "Примечания",\r\n        "is_active": "Активная",\r\n        "choose_vendor_type": "Выбрать Тип Поставщика...",\r\n        "general": "Общее"\r\n    },\r\n    "date-filter/date-filter": {\r\n        "today": "Сегодня",\r\n        "yesterday": "Вчера",\r\n        "last_7_days": "Последние 7 Дней",\r\n        "last_30_days": "Последние 30 Дней",\r\n        "this_month": "В этом месяце",\r\n        "year-to-date": "С начала года",\r\n        "all": "Все",\r\n        "custom_range": "Произвольный период",\r\n        "apply": "Применить",\r\n        "cancel": "Отмена"\r\n    },\r\n    "common": {\r\n        "success": "Выполнено успешно!",\r\n        "error": "Ошибка!",\r\n        "warning": "Предупреждение",\r\n        "ok": "OK",\r\n        "cancel": "Отмена",\r\n        "yes": "Да",\r\n        "no": "Нет",\r\n        "active": "Активный",\r\n        "inactive": "Неактивный",\r\n        "delete_selected": "Удалить",\r\n        "areYouSure": "Вы уверены?",\r\n        "thisFieldIsRequired": "Это поле обязательное."\r\n    },\r\n    "models/vendorModel": {\r\n        "vendor_name_must_be_unique": "Название поставщика должно быть уникальным.",\r\n        "vendor_name_is_required": "Требуется название поставщика",\r\n        "type_is_required": "Требуется указать тип",\r\n        "city_is_required": "Требуется указать город",\r\n        "address_is_required": "Требуется указать адрес",\r\n        "state_is_required": "Требуется указать штат",\r\n        "invalid_zip_code": "Недействительный индекс",\r\n        "country_is_required": "Требуется указать страну",\r\n        "please_specify_a_valid_us_phone_number": "Укажите действительный номер телефона в США"\r\n    },\r\n    "repositories/addressRepository": {\r\n        "invalid_state": "Недействительный штат.",\r\n        "invalid_zip": "Недействительный индекс."\r\n    },\r\n    "repositories/businessUnitRepository": {\r\n        "terminal_count_should_be_in_range_of_0_to_100": "Счет терминала должен быть в диапазоне от 0 до 100"\r\n    },\r\n    "repositories/employeeRepository": {\r\n        "you_are_not_athorized_to_save_employee": "Вы не имеете права сохранить сотрудника"\r\n    },\r\n    "repositories/itemSellingPricesRepository": {\r\n        "price_should_be_in_range_of_-100000_to_100000": "Цена должна быть в диапазоне от 100000 до 100000"\r\n    },\r\n    "repositories/modifiersRepository": {\r\n        "option_name_must_be_unique": "Вариант названия должен быть уникальным.",\r\n        "add_on": "Добавка",\r\n        "exclusion": "Исключение"\r\n    },\r\n    "repositories/tipsRepository": {\r\n        "credit_card_authorization": "Авторизация Кредитной Карты",\r\n        "tips_%_amount": "Чаевые % От Суммы",\r\n        "tips_%_used_for_authonly_is_too_high_please_use_value_from_0%_to_{0}%": "Сумма Чаевых %, использованных только для авторизации\\tслишком большая. Используйте стоимость от 0% до {0}%"\r\n    },\r\n    "repositories/presentationApi/employeesRepository": {\r\n        "invalid_email_address": "Недействительный email",\r\n        "invalid_phone": "Недействительный телефон",\r\n        "you_are_not_athorized_to_save_employees": "Вы не имеете права сохранить сотрудника",\r\n        "choose_role_name": "Выберите Роль сотрудника"\r\n    },\r\n    "repositories/presentationApi/modifiersRepository": {\r\n        "option_name_must_be_unique": "Вариант названия должен быть уникальным.",\r\n        "add_on": "Добавка",\r\n        "exclusion": "Исключение"\r\n    },\r\n    "repositories/presentationApi/storesRepository": {\r\n        "invalid_state": "Недействительный штат.",\r\n        "invalid_zip": "Недействительный индекс."\r\n    },\r\n    "base/baseListViewModel": {\r\n        "list": "Список"\r\n    },\r\n    "base/baseManageViewModel": {\r\n        "error_saving_": "Ошибка при сохранении",\r\n        "edit_": "Редактировать",\r\n        "new_": "Новый"\r\n    },\r\n    "modifierTypes": {\r\n        "0": "Группа",\r\n        "1": "Добавки",\r\n        "2": "Исключения",\r\n        "modifierGroup": "Группа",\r\n        "addons": "Добавки",\r\n        "exceptions": "Исключения"\r\n    },\r\n    "reports/productMixReport": {\r\n        "search_item_by_title_or_code": "Поиск товара по названию или коду",\r\n        "department": "Отдел",\r\n        "department_filter": "Отдел",\r\n        "all": "Все",\r\n        "category": "Категория",\r\n        "category_filter": "Категория",\r\n        "id": "ID",\r\n        "item": "Товар",\r\n        "quantity": "Количество",\r\n        "qty_sold": "Проданное Количество",\r\n        "gross_sales": "Продажи брутто",\r\n        "netSales": "Продажи нетто",\r\n        "taxAmount": "Налоги",\r\n        "register": "Касса",\r\n        "register_filter": "Касса",\r\n        "employee": "Сотрудник",\r\n        "employee_filter": "Сотрудник",\r\n        "no_matching_records_found": "Совпадения не найдены",\r\n        "total": "Всего",\r\n        "timeIn": "Время прихода",\r\n        "timeOut": "Время ухода",\r\n        "registerIn": "Касса прихода",\r\n        "register_out": "Касса ухода",\r\n        "hours": "Часы",\r\n        "confirmDelete": "Вы уверены, что хотите удалить рабочее время?",\r\n        "terminal0": "Терминал для наличных",\r\n        "terminal2": "Терминал для кредитных карт",\r\n        "selectTime": "Выбрать время",\r\n        "selectDate": "Выбрать дату",\r\n        "employeeError": "Выберите Сотрудника",\r\n        "registerInError": "Укажите время прихода",\r\n        "registerOutError": "Укажите время ухода",\r\n        "clockInError": "Clock In event of ",\r\n        "on": " на ",\r\n        "alredy": " уже существует",\r\n        "clockOutError": "Clock Out event of ",\r\n        "store": "Магазин",\r\n        "same": " Время прихода и ухода должно быть разным"\r\n    },\r\n    "reports/transactionReport": {\r\n        "sale": "Продажа",\r\n        "refund": "Возврат"\r\n    },\r\n    "reports/transactionReportHeaders": {\r\n        "accountId": "ID Аккаунта",\r\n        "companyName": "Компания",\r\n        "storeName": "Магазин",\r\n        "registerName": "Касса",\r\n        "transactionType": "Тип транзакции",\r\n        "transactionId": "ID Транзакции",\r\n        "orderId": "ID Заказа",\r\n        "paymentMethod": "Метод платежа",\r\n        "paymentStatus": "Статус платежа",\r\n        "cardNumber": "Номер карты",\r\n        "authCode": "Код Авторизации",\r\n        "refNum": "Номер сверки",\r\n        "total": "Всего",\r\n        "tips": "Чаевые",\r\n        "authorized": "Авторизовано",\r\n        "captured": "Принято",\r\n        "paymentDate": "Дата платежа",\r\n        "employee": "Сотрудник",\r\n        "customer": "Клиент",\r\n        "customerAddressLine1": "Адрес клиента 1",\r\n        "customerAddressLine2": "Адрес клиента 2",\r\n        "customerCity": "Город",\r\n        "customerState": "Область/Штат",\r\n        "customerZip": "Индекс",\r\n        "customerPhone": "Телефон"\r\n    },\r\n    "payment/types": {\r\n        "cash": "Наличные",\r\n        "check": "Чек",\r\n        "creditCard": "Кредитная карта",\r\n        "giftCertificate": "Подарочный сертификат",\r\n        "externalPayment": "Другой платёж",\r\n        "debitCard": "Дебетовая карта"\r\n    },\r\n    "payment/statuses": {\r\n        "pending": "В процессе",\r\n        "completed": "Завершён",\r\n        "failed": "Неуспешный",\r\n        "voided": "Отменён",\r\n        "refunded": "Возвращён",\r\n        "hold": "Приостановлен",\r\n        "declined": "Отклонён",\r\n        "authorized": "Авторизован",\r\n        "cancelled": "Отменён",\r\n        "partiallyRefunded": "Частично возвращён"\r\n    },\r\n    "taxReport": {\r\n        "totalSales": "Сумма продаж",\r\n        "nonTaxableAmount": "Необлагаемая сумма",\r\n        "taxName": "Название налога",\r\n        "taxRate": "Налоговая ставка",\r\n        "taxableAmount": "Облагаемая сумма",\r\n        "taxCollected": "Удержано налога",\r\n        "total": "Итого"\r\n    },\r\n    "upgrade": {\r\n        "dialogTitle": "Обновление",\r\n        "wait": "Идёт обновление. Пожалуйста, подождите.",\r\n        "upgradeFinished": "Обновление завершено."\r\n    },\r\n    "taxes/taxesList": {\r\n        "taxes_list": "Менеджер налогов",\r\n        "search_by_name_or_code": "Поиск налога по имени или коду",\r\n        "new_tax": "Новый налог",\r\n        "code": "Код",\r\n        "name": "Название",\r\n        "type": "Тип",\r\n        "rate_fee": "Ставка",\r\n        "cascade": "Каскад",\r\n        "isActive": "Активен",\r\n        "active": "Активен",\r\n        "inactive": "Неактивен",\r\n        "yes": "Да",\r\n        "no": "Нет"\r\n    },\r\n    "taxes/taxManage": {\r\n        "tax_name_must_be_unique": "Название налога должно быть уникальным.",\r\n        "new_tax": "Новый налог",\r\n        "edit_tax": "Изменить налог",\r\n        "tax_name": "Название налога",\r\n        "input_name": "Введите название",\r\n        "cascade": "Каскад",\r\n        "is_active": "Активен",\r\n        "tax_code": "Код налога",\r\n        "tax_type": "Тип налога",\r\n        "select_tax_type": "Выбрать тип налога"\r\n    },\r\n    "taxes/taxTypes": {\r\n        "standart": "Стандартный",\r\n        "flat": "Фиксированный",\r\n        "rate": "Ставка"\r\n    },\r\n    "storeTransfer": {\r\n        "storeOut": "Магазин Из",\r\n        "storeIn": "Магазин В",\r\n        "search": "Поиск Товара по названию или коду",\r\n        "id": "ID",\r\n        "name": "Название",\r\n        "upc": "UPC",\r\n        "sku": "SKU",\r\n        "cost": "Стоимость",\r\n        "storeOutQuantity": "Количество в Магазине Из",\r\n        "storeInQuantity": "Количество в Магазине В",\r\n        "transferQuantity": "Количество для трансфера",\r\n        "transfer": "Трансфер",\r\n        "cancel": "Отмена",\r\n        "unexpectedError": "Произошла ошибка. Пожалуйста, повторите попытку позже.",\r\n        "storeTransferSuccess": "Трансфер прошёл успешно.",\r\n        "storesAreEqualError": "\'Магазин Из\' не может совпадать с \'Магазин В\'.",\r\n        "transferQuantityError": "Количество должно быть больше {0} и меньше {1}",\r\n        "transferIntegerQuantityError": "Количество должно быть целым числом больше {0} и меньше {1}",\r\n        "storeTransferConfirmationTitle": "Подтверждение трансфера",\r\n        "storeTransferConfirmationMessage": "Вы уверены, что хотите произвести трансфер?",\r\n        "employee": "Сотрудник",\r\n        "all": "Все",\r\n        "totalQuantity": "Общее количество",\r\n        "totalCost": "Общая стоимость",\r\n        "date": "Дата",\r\n        "storeTransferId": "ID Трансфера",\r\n        "back": "Назад",\r\n        "details": "Детали",\r\n        "no_items_with_such_serial_in_out_store": "Не найдено товаров с таким серийным номером в Магазине Из",\r\n        "search_serials" :"Поиск серийного номера",\r\n        "search_or_select_serials": "Поиск или выбор серийных номеров",\r\n        "storeTransferForbidden": "У вас должно быть минимум два активных магазина для выполнения данной операции"\r\n    },\r\n    "poReceiving": {\r\n        "vendor": "Поставщик",\r\n        "refNum": "Номер сверки",\r\n        "poReceivingId": "ID Приёма товара",\r\n        "receivedQuantity": "Получено количество",\r\n        "receive": "Получить",\r\n        "poReceivingSuccess": "Приём товара осуществлён успешно.",\r\n        "receivedQuantityError": "Количество принимаемого товара должно быть от 0 до 100000",\r\n        "receivedIntegerQuantityError": "Количество принимаемого товара должно быть числом от 0 до 100000",\r\n        "poReceivingConfirmationMessage": "Вы уверены, что хотите произвести приём товара?"\r\n    },\r\n    "quickbooks": {\r\n        "quickbooks": "Quickbooks",\r\n        "Quickbooks Settings not found": "Quickbooks Settings not found",\r\n        "payin_payout_sync": "Payin / Payout synchronization",\r\n        "default_inventory_accounts": "Default Inventory Accounts: ",\r\n        "asset_account": "Asset Account",\r\n        "income_account": "Income Account",\r\n        "expense_account": "Expense Account",\r\n        "data_transfer": "Data Transfer: ",\r\n        "data_sync": "Sync Data",\r\n        "done": "Done",\r\n        "cancel": "Cancel",\r\n        "sync": "Sync Now",\r\n        "select_account": "Select Account...",\r\n        "sync_time": "Sync Time",\r\n        "QuickBooks Chart of Accounts": "QuickBooks Chart of Accounts:",\r\n        "Inherit from Department": "Inherit from Department",\r\n        "Inherit from Category": "Inherit from Category",\r\n        "Inherit Accounts": "Inherit Accounts"\r\n    }\r\n}';});

define('models/base/baseModel',["knockout","durandal/system","durandal/events"],function(e,t,o){var n=function(e){o.includeIn(this),this.initialize.call(this,e)};return $.extend(n.prototype,{name:"BaseModel",options:{computedFields:[],modelDesc:{entityType:"Business",entityName:"BaseModel"},idProperty:"id",properties:{},validators:{},excludeFromSave:[]},initialize:function(t){this.properties=e.mapping.fromJS({}),this.options=$.extend({},this.options,t),this.computed=this.options.computed||{},this.validator=$.isFunction(this.options.Validator)?new this.options.Validator:this.options.Validator,this.name=this.options.name||this.name;var o=this;this.options.computedPromise?this.options.computedPromise.done(function(e){o.computed=e,o._setupProperties(o.options.properties)}):this._setupProperties(this.options.properties)},getOptions:function(){return this.options},entityName:function(){return this.options.modelDesc.entityName},_setupProperties:function(t){this.properties.__ko_mapping__||(this.properties=e.mapping.fromJS({})),e.mapping.fromJS(t,this.properties);var o=this.properties,n=this;this.options.validators&&Object.keys(this.options.validators).forEach(function(e){var t=n._getProperty(o,e);t&&n._initValidators(n.options.validators[e],function(e){t.extend(e)})}),this.validationModel=e.validatedObservable(o)},_initValidators:function(e,t){var o=$.Deferred();o.done(t);var n=[],r=this,i=function(e){var t=[];return e.paramsOptions&&Object.keys(e.paramsOptions).forEach(function(o){var n=e.paramsOptions[o];if(n.idDynamic){var i=r._resolveValidatorValue(n.value,e);if(i&&i.done){var a=i.done(function(t){e.params[o]=t});t.push(a)}else e.params[o]=i}else e.params[o]=n.value}),t};Object.keys(e).forEach(function(t){var o=e[t];if(o!==!0){o.params=o.params||{};var a=i(o);a.length>0&&(n=n.concat(a));var s=o.validatorContext?r._getProperty(r.properties,o.validatorContext):r.properties;o.validateIf&&(o.onlyIf=o.validateIf.bind(s)),o.validatorContext&&(o.useOnlyIf&&r.validator&&r.validator.onlyIf?o.onlyIf=r.validator.onlyIf.bind(s):o.onlyIf&&(o.onlyIf=o.onlyIf.bind(s)))}}),0===n.length?o.resolve(e):$.when.apply($,n).then(function(){o.resolve(e)})},_resolveValidatorValue:function(e){return this._getParamValue(e)},_getParamValue:function(t,o){for(var n=t.split("."),r=o||this,i=0;i<n.length;i++)r=e.isObservable(r)?r()[n[i]]:r[n[i]];return e.isObservable(r)?r():r},_getProperty:function(e,t){for(var o=t.split("."),n=e,r=0;r<o.length;r++)n=n[o[r]];return n},getDataContext:function(t){var o;return o=t?e.validatedObservable(this._getProperty(this.properties,t)):this.validationModel,o.resetValidation=this.resetValidation.bind(this,o,t),o.resetValidationMessages=this.resetValidationMessages.bind(this,o),o},resetValidationMessages:function(e){e.errors.showAllMessages(!1)},resetValidation:function(e,t){e.errors.showAllMessages(!1);var o=t?Object.keys(this._getProperty(this.options.properties,t)):Object.keys(this.options.properties);o.forEach(function(t){e().hasOwnProperty(t)&&(e()[t].clearError&&e()[t].clearError(),e()[t].isModified&&e()[t].isModified(!1))})},getProperties:function(){return this.properties},addValidators:function(e){for(t in e){this.options.validators[t]=e[t];var t=this._getProperty(properties,t);t&&t.extend(this.options.validators[t])}},toPlainObject:function(t){if(t)return e.toJS(this);var o=[];for(p in this.options.properties)o.push(p);var n=["__ko_mapping__"];return this.options.excludeFromSave&&(n=n.concat(this.options.excludeFromSave)),e.mapping.toJS(this.properties,{ignore:n})},createFromServerEntity:function(e){var t=Object.create(this);return t.loadFromServerEntity(e),t},reset:function(){this._setupProperties(this.options.properties)},loadFromServerEntity:function(e){return this._setupProperties(e),this},getValidationModel:function(){return this.validationModel},isValid:function(){return this.validationModel.isValid()},errors:function(){return this.validationModel.errors},getId:function(){var t=this._getProperty(this.properties,this.options.idProperty);return e.isObservable(t)?t():t},getEntities:function(){return[this.properties]}}),n});
define('models/base/entityTableRow',["knockout","durandal/system","durandal/events"],function(e){function t(t,o,n,r,i){var a=this;a.entityName=o,a.entity=t,a.checked=e.observable(!1),a.rowNum=e.observable(),a.canEdit=n?!0:!1,a.canDelete=r?!0:!1,a.edit=n||function(){},a.deleteRow=r||function(){},a.actions=i}return t});
define('models/variantModel',["knockout","durandal/system","data/baseCommon"],function(e){function t(t,n){var i=this;i.businessUnitId=null,i.isActive=e.observable(!0),i.name=e.observable(),i.sku=e.observable().extend({required:{message:e.T("inventory/inventory-manage-tabs/variants.sku_is_required")}}),i.upc=e.observable(),i.variantKeys=[0,0,0,0],i.isRoot=n,i.dimantionKeys=0,i.cost=e.observable(0).extend({number:!0,range:{message:e.T("inventory/inventory-manage-tabs/pricing.price_should_be_greater_or_equal_to_0_and_less_than_100000"),params:{maxValue:1e5,minValue:0,includeMinValue:!0}}}),i.unitPrice=e.observable(0).extend({number:!0,range:{message:e.T("inventory/inventory-manage-tabs/pricing.price_should_be_greater_or_equal_to_0_and_less_than_100000"),params:{maxValue:1e5,minValue:0,includeMinValue:!0}}}),i.digits=e.observable(new Number(2)),i.onHandQuantity=e.observable(0).extend({decimal:i.digits,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/ordering.quantityLimits",null,[-1e8,1e8]),params:{minValue:-1e8,maxValue:1e8}}}),i.calcDimantionKeys=function(){i.dimantionKeys=0;for(var e=1,t=0;t<i.variantKeys.length;t++){var n=i.variantKeys[t];i.dimantionKeys+=new Number(n)*e,e*=100}},i.calcVariantKeys=function(){for(var e=1e6,t=i.variantKeys.length-1;t>=0;t--)i.variantKeys[t],i.variantKeys[t]=Math.floor(i.dimantionKeys/e),i.dimantionKeys-=i.variantKeys[t]*e,e/=100},i.recalcQuantity=function(){var e=0;Enumerable.From(t.buItems()).ForEach(function(t){var n=i.findVariants(i.variantKeys,t.variants());n&&(e+=new Number(n.onHandQuantity()))});var n=i.findVariants(i.variantKeys,t.variants());n&&n.onHandQuantity(e)},i.isRoot?(i.cost.subscribe(function(){Enumerable.From(t.buItems()).ForEach(function(e){var t=i.findVariants(i.variantKeys,e.variants());t&&t.cost(i.cost())})}),i.unitPrice.subscribe(function(){Enumerable.From(t.buItems()).ForEach(function(e){var t=i.findVariants(i.variantKeys,e.variants());t&&t.unitPrice(i.unitPrice())})}),i.upc.subscribe(function(){Enumerable.From(t.buItems()).ForEach(function(e){var t=i.findVariants(i.variantKeys,e.variants());t&&t.upc(i.upc())})}),i.sku.subscribe(function(){Enumerable.From(t.buItems()).ForEach(function(e){var t=i.findVariants(i.variantKeys,e.variants());t&&t.sku(i.sku())})}),i.isActive.subscribe(function(){Enumerable.From(t.buItems()).ForEach(function(e){var t=i.findVariants(i.variantKeys,e.variants());t&&t.isActive(i.isActive())})})):i.onHandQuantity.subscribe(i.recalcQuantity),i.findVariants=function(e,t){var n=null;if(t)for(var i=0;i<t.length;i++){var o=t[i];if(o.variantKeys[0]==e[0]&&o.variantKeys[1]==e[1]&&o.variantKeys[2]==e[2]&&o.variantKeys[3]==e[3])return o}return n},i.toPlainObject=function(){i.calcDimantionKeys();var t=["businessUnitId","isActive","onHandQuantity","sku","upc","cost","dimantionKeys","unitPrice"],n=JSON.parse(e.toJSON(i,t));return n},i.errors=e.validation.group(i,{deep:!0})}function n(e,n,i){return t.createFromServerEntity(e,n,i)}function i(e,n){return new t(e,n)}return t.createFromServerEntity=function(e,n,i){var o=new t(n,i);return o.dimantionKeys=e.dimantionKeys,o.calcVariantKeys(),o.businessUnitId=e.businessUnitId,o.isActive(e.isActive),o.onHandQuantity(e.onHandQuantity),o.sku(e.sku),o.upc(e.upc),o.cost(e.cost),o.unitPrice(e.unitPrice),o},{createFromServerEntity:n,createNew:i}});
define('models/buItemModel',["knockout","durandal/system","data/baseCommon","models/variantModel"],function(e,t,n,o){function r(){var t=this;t.id=null,t.itemId=null,t.businessUnitId=null,t.isActive=e.observable(),t.isDiscountable=e.observable(null),t.priceVisible=e.observable(!1),t.minimumQuantity=e.observable(null),t.recommendedQuantity=e.observable(null),t.taxId=null,t.variants=e.observableArray(null),t.taxList=e.observableArray(null),t.digits=e.observable(new Number(2)),t.unitPrice=e.observable(null).extend({step:.01,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/pricing.price_should_be_greater_or_equal_to_0_and_less_than_100000"),params:{maxValue:1e5,minValue:0,includeMinValue:!0}}}),t.store=e.observable(),t.isTaxable=e.observable(null),t.onHandQuantity=e.observable().extend({decimal:t.digits,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/ordering.quantityLimits",null,[-1e8,1e8]),params:{minValue:-1e8,maxValue:1e8}}}),t.recommendedQuantity=e.observable().extend({decimal:t.digits,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/ordering.recommendedQuantityLimits",null,[0,1e8]),params:{minValue:0,maxValue:1e8,includeMinValue:!0}}}),t.minimumQuantity=e.observable().extend({decimal:t.digits,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/ordering.minimumQuantityLimits",null,[0,1e8]),params:{minValue:0,maxValue:1e8,includeMinValue:!0}},lessThan:{message:e.T("inventory/inventory-manage-tabs/ordering.minimum_quantity_should_be_less_or_equal_to_recommended_quantity"),params:{target:t.recommendedQuantity,canBeEqual:!0}}}),t.toPlainObject=function(){t.taxList().length>0&&(t.taxId=t.taxList()[0].id());var n=["id","itemId","businessUnitId","isActive","isDiscountable","isTaxable","onHandQuantity","minimumQuantity","recommendedQuantity","unitPrice","priceVisible","taxId"],o=JSON.parse(e.toJSON(t,n)),r=Enumerable.From(t.variants()).Select(function(e){return e.toPlainObject()}).ToArray();return o.jsonVariants=JSON.stringify(r),o}}function i(e,t){return r.createFromServerEntity(e,t)}return r.createFromServerEntity=function(e,t){var n=new r;n.id=e.id,n.itemId=e.itemId,n.businessUnitId=e.businessUnitId,n.isActive(e.isActive),n.isDiscountable(e.isDiscountable),n.priceVisible(e.priceVisible),n.isTaxable(e.isTaxable),n.taxId=e.taxId,n.onHandQuantity(e.onHandQuantity),n.minimumQuantity(e.minimumQuantity),n.recommendedQuantity(e.recommendedQuantity),n.unitPrice(e.unitPrice);var i=JSON.parse(e.jsonVariants);if(i)for(var a=0;a<i.length;a++){var s=i[a];n.variants.push(o.createFromServerEntity(s,t,!1))}return n},{createFromServerEntity:i}});
define('models/buItemValueModel',["knockout","durandal/system","data/baseCommon"],function(e){function t(){var t=this;t.id=null,t.itemModifierValueId=null,t.businessUnitId=null,t.unitPrice=e.observable(0).extend({step:.01,number:!0,range:{message:e.T("repositories/itemSellingPricesRepository.price_should_be_in_range_of_-100000_to_100000"),params:{maxValue:1e5,minValue:-1e5,includeMinValue:!0}}}),t.toPlainObject=function(){var n=["id","itemModifierValueId","businessUnitId","unitPrice"];return JSON.parse(e.toJSON(t,n))}}function n(e){return t.createFromServerEntity(e)}function o(){return new t}return t.createFromServerEntity=function(e){var n=new t;return n.id=e.id,n.itemModifierValueId=e.itemModifierValueId,n.businessUnitId=e.businessUnitId,n.unitPrice(new Number(e.unitPrice).toFixed(2)),n},{createFromServerEntity:n,createNew:o}});
define('models/businessObjectNameModel',["knockout","data/config"],function(e,t){function n(n){var o=this;$.extend(o,n),o.name=e.observable(n.name),o.shortName=e.observable(n.shortName),o.description=e.observable(n.description),o.errors=e.validation.group(o),o.name.extend({required:{message:e.T("common.thisFieldIsRequired"),onlyIf:function(){return n.languageId===t.defaultLanguage}}})}return n.prototype.setupUniqueNameConstraint=function(e,t,n){if(null!=t&&t.length>0){var o=Enumerable.From(t).Where(function(t){return t.languageId===e.languageId}).Select(function(e){return e.name}).ToArray();this.name.extend({uniqueName:{params:{array:o,ignore:[this.name()]},message:n}})}},n.prototype.toFlatModel=function(){return{id:this.id,languageId:this.languageId,name:this.name(),shortName:this.shortName(),description:this.description()}},n});
define('models/categoryModel',["durandal/system","data/baseCommon","models/base/baseModel"],function(e,t,n){var o=function(){o.superclass.constructor.apply(this,arguments)};return t.extend(o,n),$.extend(o.prototype,{name:"CategoryModel",options:{modelDesc:{entityType:"Product",entityName:"Category"},properties:{id:null,name:null,description:null,isActive:!0,lobId:null,color:null},validators:{name:{required:!0},lobId:{required:!0}}},initialize:function(e){o.superclass.initialize.call(this,e)}}),o});
define('models/fulfilmentMethods',[],function(){return{DineIn:"Dine In",TakeOut:"Take Out",Delivery:"Delivery"}});
define('models/inventoryType',[],function(){return{standard:0,serialized:1,nonInventory:2}});
define('models/quickbooksSettingsModel',["knockout","durandal/system","data/baseCommon","models/base/baseModel"],function(e,t,n,o){var i=function(){i.superclass.constructor.apply(this,arguments)};return n.extend(i,o),$.extend(i.prototype,{name:"QuickbooksSettingsModel",options:{modelDesc:{entityType:"",entityName:"QuickbooksSettings"},properties:{id:null,isSyncPayinPayout:null,isSyncData:null,syncTime:null,bankDepositAccountId:null,assetAccountId:null,incomeAccountId:null,expenseAccountId:null,payinsAccountId:null,payoutsAccountId:null,accounts:[],bankAccounts:[],assetAccounts:[],incomeAccounts:[],expenseAccounts:[],times:[],isTokenExpired:null},validators:{payinsAccountId:{required:{message:e.T("quickbooks.field_is_required"),validateIf:function(){return this.isSyncPayinPayout()}}},payoutsAccountId:{required:{message:e.T("quickbooks.field_is_required"),validateIf:function(){return this.isSyncPayinPayout()}}},bankDepositAccountId:{required:{message:e.T("quickbooks.field_is_required")}},assetAccountId:{required:{message:e.T("quickbooks.field_is_required")}},incomeAccountId:{required:{message:e.T("quickbooks.field_is_required")}},expenseAccountId:{required:{message:e.T("quickbooks.field_is_required")}}},excludeFromSave:["accounts","bankAccounts","assetAccounts","incomeAccounts","expenseAccounts","times","isTokenExpired"]},initialize:function(e){i.superclass.initialize.call(this,e)}}),i});
define('models/taxModel',["knockout"],function(e){function t(t,n){var o=this;o.taxes=t,o.id=e.observable(n),o.tax=e.computed(function(){var e=t.filter(function(e){return e.id==o.id()});return e.length>0?e[0]:null}),o.taxRate=e.computed(function(){return o.tax()&&o.tax().getRate?o.tax().getRate():""}),o.taxType=e.computed(function(){return o.tax()?e.T("taxes/taxTypes."+o.tax().taxTypeName):""}),o.taxCascade=e.computed(function(){return o.tax()?o.tax().cascade?e.T("taxes/taxesList.yes"):e.T("taxes/taxesList.no"):""})}return t});
define('models/transactionModel',["durandal/system","data/baseCommon","models/base/baseModel"],function(e,t,n){var o=function(){o.superclass.constructor.apply(this,arguments)};return t.extend(o,n),$.extend(o.prototype,{name:"TransactionModel",options:{modelDesc:{entityType:"",entityName:"Transaction"},properties:{id:null,upc:null,voided:null,beginDateTime:null,register:null,registerNumber:null,tenderType:null,transactionType:null,customerName:null,employee:null,transactionItems:[{id:null,upc:null,refunded:null,description:null,quantity:null,price:null,discount:null,totalPrice:null}],subtotal:null,discountAmount:null,taxAmount:null,totalAmount:null,tenderData:null,name:null,type:null,typeText:null,statusCode:null,status:null,fulfilment:null,fulfilmentText:null,transactionStatus:null,store:null},validators:{}},initialize:function(e){o.superclass.initialize.call(this,e)}}),o});
define('models/vendorModel',["knockout","durandal/system","data/baseCommon","models/base/baseModel"],function(e,t,n,i){var o=function(){o.superclass.constructor.apply(this,arguments)};n.extend(o,i);var r=function(){};return r.prototype.onlyIf=function(){return this.city()||this.addressLine1()||this.territory()||this.postalCode()||this.phone()||this.fax()||this.eMail()||this.website()||this.contactName()||this.isoCountryId()},r.prototype.vendorNames=function(){return this.vendorNames},$.extend(o.prototype,{name:"VendorModel",options:{Validator:r,computedFields:["vendorNames"],modelDesc:{entityType:"Business",entityName:"Vendor"},idProperty:"vendor.id",properties:{vendor:{id:null,name:null,isActive:!0,type:void 0,taxId:null,notes:null,addressId:null,enterpriseId:null},contact:{id:null,city:null,addressLine1:null,territory:void 0,postalCode:null,isoCountryId:void 0,isStateVisible:!1,phone:null,fax:null,eMail:null,website:null,contactName:null,enterpriseId:null}},validators:{"vendor.name":{uniqueName:{paramsOptions:{array:{idDynamic:!0,value:"computed.vendorNames"},ignore:{idDynamic:!0,value:"properties.vendor.name"},id:{idDynamic:!0,value:"properties.vendor.id"}},message:e.T("models/vendorModel.vendor_name_must_be_unique")},required:{message:e.T("models/vendorModel.vendor_name_is_required")}},"vendor.type":{required:{message:e.T("models/vendorModel.type_is_required")}},"contact.city":{required:{message:e.T("models/vendorModel.city_is_required"),validatorContext:"contact",useOnlyIf:!0}},"contact.addressLine1":{required:{message:e.T("models/vendorModel.address_is_required"),validatorContext:"contact",useOnlyIf:!0}},"contact.postalCode":{pattern:{message:e.T("models/vendorModel.invalid_zip_code"),params:/^[a-z0-9]+$/i}},"contact.isoCountryId":{required:{message:e.T("models/vendorModel.country_is_required"),validatorContext:"contact",useOnlyIf:!0}},"contact.phone":{phoneUS:{message:e.T("models/vendorModel.please_specify_a_valid_us_phone_number")}},"contact.fax":{phoneUS:{message:"Please specify a valid US phone number"}},"contact.eMail":{minLength:0,maxLength:50,email:!0},"contact.website":{website:!0}}},initialize:function(e){o.superclass.initialize.call(this,e)}}),o});
define('repositories/addressRepository',["knockout","data/config"],function(e,t){function n(){var t=this;t.id=e.observable(),t.city=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")},minLength:0,maxLength:255}),t.addressLine1=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")}}),t.addressLine2=e.observable(),t.addressLine3=e.observable(),t.addressLine4=e.observable(),t.enterpriseId=e.observable(),t.state=e.observable().extend({required:!0,pattern:{message:e.T("repositories/addressRepository.invalid_state"),params:/^[a-zA-Z]{2}$/}}),t.zip=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")},pattern:{message:e.T("repositories/addressRepository.invalid_zip"),params:/^\d{5}$/}}),t.countryId=e.observable().extend({required:!0}),t.countries=e.computed(function(){return f()}),t.phone=e.observable().extend({phone:!0,phoneNumber:!0,notify:"always"}),t.email=e.observable().extend({email:!0}),t.web=e.observable().extend({website:!0}),t.errors=e.validation.group(t),t.toPlainObject=function(){var n={id:t.id,city:t.city,addressLine1:t.addressLine1,addressLine2:t.addressLine2,addressLine3:t.addressLine3,addressLine4:t.addressLine4,enterpriseId:t.enterpriseId,territory:t.state,postalCode:t.zip,isoCountryId:t.countryId,phone:t.phone,email:t.email,website:t.web};return JSON.parse(e.toJSON(n))}}function r(e){return n.createFromServerEntity(e)}function i(){return new n}function o(){var e=[];return $.ajax({type:"GET",url:g,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return n.createFromServerEntity(e)}).ToArray()}}),e}function a(){return t.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:g,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return n.createFromServerEntity(e)}).ToArray()})})}function s(e){var t=null;return $.ajax({type:"GET",url:h,data:{id:e},async:!1,success:function(e){t=n.createFromServerEntity(e)}}),t}function u(e){return $.ajax({type:"GET",url:h,data:{id:e},async:!0}).then(function(e){return n.createFromServerEntity(e)})}function l(e){var t=!1;return $.ajax({type:"POST",url:x,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function c(e){return $.ajax({type:"POST",url:x,data:e.toPlainObject(),async:!0})}function d(e){var t=!1,n=k+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function p(e){var t=k+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}function m(){var t=this;t.id=e.observable(),t.name=e.observable(),t.errors=e.validation.group(t),t.toPlainObject=function(){var n=["id","name"];return JSON.parse(e.toJSON(t,n))}}function f(){var e=[];return $.ajax({type:"GET",url:T,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return m.createFromServerEntity(e)}).OrderBy(function(e){return e.name}).ToArray()}}),e}function y(){return $.ajax({type:"GET",url:T,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return m.createFromServerEntity(e)}).OrderBy(function(e){return e.name}).ToArray()})}function b(e){var t=null;return $.ajax({type:"GET",url:T,data:{id:e},async:!1,success:function(e){t=m.createFromServerEntity(e)}}),t}function v(e){return $.ajax({type:"GET",url:T,data:{id:e},async:!0}).then(function(e){return m.createFromServerEntity(e)})}var g="api/Business/GetAddressByEnterprise",h="api/Business/GetAddress",x="api/Business/SaveAddress",k="api/Business/RemoveAddress",T="api/Business/GetIsoCountry";return n.createFromServerEntity=function(e){var t=i();return t.id(e.id),t.city(e.city),t.addressLine1(e.addressLine1),t.addressLine2(e.addressLine2),t.addressLine3(e.addressLine3),t.addressLine4(e.addressLine4),t.state(e.territory),t.zip(e.postalCode),t.countryId(e.isoCountryId),t.phone(e.phone),t.email(e.eMail),t.web(e.website),t.enterpriseId(e.enterpriseId),t},m.createFromServerEntity=function(e){var t=new m;return t.id(e.id),t.name(e.name),t},{createNewAddress:i,createFromServerEntity:r,loadAllAddresses:o,loadAllAddressesAsync:a,loadAddressById:s,loadAddressByIdAsync:u,saveAddress:l,saveAddressAsync:c,removeAddress:d,removeAddressAsync:p,loadAllCountries:f,loadAllCountriesAsync:y,loadCountryById:b,loadCountryByIdAsync:v}});
define('repositories/appDirectoryRepository',["knockout","data/config"],function(e,t){function n(){return t.configLoading.then(function(){return $.ajax({type:"GET",url:c+t.enterpriseId})})}function r(){return t.configLoading.then(function(){return $.ajax({type:"GET",url:l+t.enterpriseId})})}function i(e){return $.ajax({type:"POST",url:m,data:e})}function o(e){return $.ajax({type:"GET",url:d,data:{id:e}})}function a(e){return $.ajax({type:"POST",url:p,data:e})}function s(e){return $.ajax({type:"POST",url:f,data:e})}function u(e){return $.ajax({type:"POST",url:y,data:e})}var l="api/enterprise/GetAppStatus/",c="api/enterprise/GetAppDirectory/",d="api/enterprise/GetAppById/",p="api/enterprise/SaveApp/",m="api/enterprise/SaveAppStatus/",f="api/enterprise/InstallApp/",y="api/enterprise/UninstallApp/";return{loadAppStatus:r,loadAppDirectory:n,saveAppStatus:i,getAppById:o,saveApp:a,installApp:s,uninstallApp:u}});
define('repositories/base/basePresentationRepository',["data/config","services/text"],function(e,t){function n(){this.getUrl="",this.getByIdUrl="",this.saveUrl="",this.createUrl="",this.removeUrl=""}return $.extend(n.prototype,{_isSupported:function(e){return void 0!==e&&null!==e&&""!==e},get:function(){var n=this;return n._isSupported(n.getUrl)?e.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:n.getUrl,data:{enterpriseId:e,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()}})}):$.Deferred().reject("Unsupported command.").promise()},getById:function(e){return this._isSupported(this.getByIdUrl)?$.ajax({type:"GET",url:this.getByIdUrl,data:{id:e,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()}}):$.Deferred().reject("Unsupported command.").promise()},save:function(e){return this._isSupported(this.saveUrl)?$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:this.saveUrl,data:JSON.stringify(e)}):$.Deferred().reject("Unsupported command.").promise()},create:function(){var n=this;return n._isSupported(n.createUrl)?e.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:n.createUrl,data:{enterpriseId:e,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()}})}):$.Deferred().reject("Unsupported command.").promise()},remove:function(e){return this._isSupported(this.removeUrl)?$.ajax({type:"POST",url:this.removeUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"}):$.Deferred().reject("Unsupported command.").promise()}}),n});
define('repositories/receiptRepository',["knockout","data/config"],function(e,t){function r(){var t=this;t.id=e.observable(),t.template=e.observable(),t.errors=e.validation.group(t),t.toPlainObject=function(){var r=["id","template"];return JSON.parse(e.toJSON(t,r))}}function n(){return new r}function a(){var e=[];return $.ajax({type:"GET",url:p,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),e}function i(){return t.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:p,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})})}function o(e){var t=null;return $.ajax({type:"GET",url:m,data:{id:e},async:!1,success:function(e){t=r.createFromServerEntity(e)}}),t}function s(e){return $.ajax({type:"GET",url:m,data:{id:e},async:!0}).then(function(e){return r.createFromServerEntity(e)})}function u(e){var t=null;return $.ajax({type:"POST",url:f,data:e.toPlainObject(),async:!1,success:function(e){t=r.createFromServerEntity(e)}}),t}function c(e){return $.ajax({type:"POST",url:f,data:e.toPlainObject(),async:!0})}function l(e){var t=!1,r=y+"/"+e.id();return $.ajax({type:"DELETE",url:r,data:null,async:!1,success:function(){t=!0}}),t}function d(e){var t=y+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}var p="api/Business/GetReceiptByEnterprise",m="api/Business/GetReceipt",f="api/Business/SaveReceipt",y="api/Business/RemoveReceipt";return r.createFromServerEntity=function(e){if(null==e)return null;var t=n();return t.id(e.id),t.template(e.template),t},{createNewReceipt:n,loadAllReceipts:a,loadAllReceiptsAsync:i,loadReceiptById:o,loadReceiptByIdAsync:s,saveReceipt:u,saveReceiptAsync:c,removeReceipt:l,removeReceiptAsync:d}});
define('repositories/tipsRepository',["knockout","data/config"],function(e){function t(t){var r=this;if(r.isOn=e.observable(),r.tipsMoneyValue1=e.observable(0),r.tipsMoneyValue2=e.observable(0),r.tipsMoneyValue3=e.observable(0),r.tipsPercentValue1=e.observable(0).extend({percentExt:!0}),r.tipsPercentValue2=e.observable(0).extend({percentExt:!0}),r.tipsPercentValue3=e.observable(0).extend({percentExt:!0}),r.maxTips=e.computed(function(){var e=r.tipsPercentValue3();return e<r.tipsPercentValue2()&&(e=r.tipsPercentValue2()),e<r.tipsPercentValue1()&&(e=r.tipsPercentValue1()),r.authTipsValue&&setTimeout(function(){r.authTipsValue.valueHasMutated()},100),e}),r.authTipsValue=e.observable(0).extend({percentExt:!0,lessThan:{params:{message:e.T("repositories/tipsRepository.tips_%_used_for_authonly_is_too_high_please_use_value_from_0%_to_{0}%"),canBeEqual:!0,target:r.maxTips}}}),t){r.isOn(t.tipsIsOn||!1),r.authTipsValue(t.tipsAuthValue||0);var n=(t.tipsMoneyValues||"").split("|"),a=(t.tipsPercentValues||"").split("|");n.length>0&&r.tipsMoneyValue1(Number(n[0])||0),n.length>1&&r.tipsMoneyValue2(Number(n[1])||0),n.length>2&&r.tipsMoneyValue3(Number(n[2])||0),a.length>0&&r.tipsPercentValue1(Number(a[0])||0),a.length>1&&r.tipsPercentValue2(Number(a[1])||0),a.length>2&&r.tipsPercentValue3(Number(a[2])||0)}r.errors=e.validation.group(r),r.validationModel=e.validatedObservable({authTipsValue:r.authTipsValue}),r.toPlainObject=function(){var t=["id","isOn","authTipsValue","tipsMoneyValue1","tipsMoneyValue2","tipsMoneyValue3","tipsPercentValue1","tipsPercentValue2","tipsPercentValue3"];return JSON.parse(e.toJSON(r,t))},r.toBuObject=function(e){e.tipsIsOn=r.isOn(),e.tipsAuthValue=r.authTipsValue(),e.tipsMoneyValues=r.tipsMoneyValue1()+"|"+r.tipsMoneyValue2()+"|"+r.tipsMoneyValue3(),e.tipsPercentValues=r.tipsPercentValue1()+"|"+r.tipsPercentValue2()+"|"+r.tipsPercentValue3()}}function r(e){return new t(e)}function n(e){return $.ajax({type:"GET",url:i,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return t.createFromServerEntity(e)}).ToArray()})}function a(e){var r=null;return $.ajax({type:"POST",url:o,data:e.toPlainObject(),async:!1,success:function(e){r=t.createFromServerEntity(e)}}),r}var i="api/Business/GetTipsSettingsByBusinessUnit",o="api/Business/SaveTipsSettings";return t.createFromServerEntity=function(e){if(!e)return null;var r=new t(e);return r},{createTips:r,loadTipsByBusinessUnit:n,saveTips:a}});
define('repositories/businessUnitRepository',["knockout","repositories/addressRepository","repositories/receiptRepository","repositories/tipsRepository","data/config","data/permissions"],function(e,t,n,r,i){function a(){var t=this;t.id=e.observable(),t.name=e.observable().extend({required:!0,minLength:0,maxLength:100}),t.pictureId=e.observable(),t.businessUnitTypeCode=e.observable(),t.addressId=e.observable(),t.address=e.observable(),t.nextBillingDate=e.observable().extend({date:!0}),t.amountToPay=e.observable().extend({amount:!0}),t.terminalCount=e.observable(0).extend({required:!0}).extend({number:!0,range:{message:e.T("repositories/businessUnitRepository.terminal_count_should_be_in_range_of_0_to_100"),params:{maxValue:100,minValue:0,includeMinValue:!0}}}),t.pricePerTerminal=e.observable().extend({amount:!0}),t.businessUnitNumber=e.observable(),t.maxRegisterNumber=e.observable(),t.receiptId=e.observable(),t.receipt=e.observable(),t.errors=e.validation.group(t),t.sourceKey=e.observable(),t.pin=e.observable(),t.paymentGatewayTypeCode=e.observable(),t.notesMode=e.observable(),t.tipsIsOn=e.observable(),t.tipsAuthValue=e.observable(),t.tipsMoneyValues=e.observable(),t.tipsPercentValues=e.observable(),t.tipsSettings=e.observable(r.createTips()),t.showOrderType=e.observable(!1),t.ebtTaxExemption=e.observable(!1),t.businessUnitGroupNumber=e.observable(),t.useKitchenPrinter=e.observable(!1),t.fulfilment=e.observable(!1),t.receiptSignature=e.observable(!1),t.errors=e.validation.group(t),t.toPlainObject=function(){var n=["id","name","pictureId","businessUnitGroupId","businessUnitTypeCode","addressId","nextBillingDate","amountToPay","terminalCount","pricePerTerminal","receiptId","businessUnitNumber","maxRegisterNumber","sourceKey","pin","paymentGatewayTypeCode","notesMode","tipsIsOn","tipsAuthValue","tipsMoneyValues","tipsPercentValues","showOrderType","businessUnitGroupNumber","useKitchenPrinter","fulfilment","receiptSignature","ebtTaxExemption"],r=JSON.parse(e.toJSON(t,n));return r}}function o(){return i.fetchConfig().then(function(e){return e.stores.slice(0)})}function s(){addresses=t.loadAllAddresses()}function u(){return t.loadAllAddressesAsync().then(function(e){addresses=e})}function l(){receipts=n.loadAllReceipts()}function c(){return n.loadAllReceiptsAsync().then(function(e){receipts=e})}function d(){return new a}function p(){s(),l();var e=[];return $.ajax({type:"GET",url:F,data:{id:i.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return a.createFromServerEntity(e)}).ToArray()}}),e}function m(){return i.getEnterpriseId().then(function(e){return c().then(function(){return $.ajax({type:"GET",url:F,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return a.createFromServerEntity(e)}).ToArray()})})})}function f(e){s(),l();var t=null;return $.ajax({type:"GET",url:w,data:{id:e},async:!1,success:function(e){t=a.createFromServerEntity(e)}}),t}function y(e){u().then(c).then(function(){return $.ajax({type:"GET",url:w,data:{id:e},async:!0}).then(function(e){return a.createFromServerEntity(e)})})}function b(){return i.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:P,data:{enterpriseId:e},async:!0})},function(){return null})}function v(e){var t=!1;return $.ajax({type:"POST",url:D,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function g(e){return $.ajax({type:"POST",url:D,data:e.toPlainObject(),async:!0})}function h(e){var t=!1,n=C+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function x(e){var t=C+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}function T(){var t=this;t.id=e.observable(),t.name=e.observable().extend({required:!0})}function k(){var t=this;t.id=e.observable(),t.name=e.observable().extend({required:!0})}function I(){var e=[];return $.ajax({type:"GET",url:N,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return T.createFromServerEntity(e)}).ToArray()}}),e}function A(){return $.ajax({type:"GET",url:N,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return T.createFromServerEntity(e)}).ToArray()})}function S(){var e=[];return $.ajax({type:"GET",url:O,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return k.createFromServerEntity(e)}).ToArray()}}),e}function q(){return $.ajax({type:"GET",url:O,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return k.createFromServerEntity(e)}).ToArray()})}function j(e,t){return $.ajax({type:"POST",url:V,data:{storeName:e,description:t},async:!0})}function _(){return $.ajax({type:"GET",url:L,async:!0})}function E(){return $.ajax({type:"GET",url:U,async:!0})}var F="api/Business/GetBusinessUnitByEnterprise",w="api/Business/GetBusinessUnit",D="api/Business/SaveBusinessUnit",C="api/Business/RemoveBusinessUnit",N="api/Business/GetBusinessUnitTypes",O="api/Business/GetPaymentGatewayTypes",P="api/Business/GetStores",V="api/Business/NewStore",L="api/business/GetStoreTransferEmployees",U="api/business/GetAdjustmentEmployees";return addresses=[],receipts=[],businessUnitTypes=[],paymentGatewayTypes=[],a.createFromServerEntity=function(e){var n=d();n.id(e.id),n.name(e.name),n.pictureId(e.pictureId),n.businessUnitNumber(e.businessUnitNumber),n.maxRegisterNumber(e.maxRegisterNumber),n.businessUnitTypeCode(e.businessUnitTypeCode),n.addressId(e.addressId),n.address(t.createFromServerEntity(e.address)),n.nextBillingDate(e.nextBillingDate),n.amountToPay(e.amountToPay),n.terminalCount(e.terminalCount),n.pricePerTerminal(e.pricePerTerminal),n.receiptId(e.receiptId);var i=Enumerable.From(receipts).SingleOrDefault(null,function(e){return e.id()==n.receiptId()});n.receipt(i),n.sourceKey(e.sourceKey),n.pin(e.pin),n.paymentGatewayTypeCode(e.paymentGatewayTypeCode),n.notesMode(e.notesMode.toString());var a=e;return n.tipsSettings(r.createTips(a)),n.showOrderType=e.showOrderType,n.ebtTaxExemption=e.ebtTaxExemption,n.businessUnitGroupNumber(e.businessUnitGroupNumber),n.useKitchenPrinter(e.useKitchenPrinter),n.fulfilment(e.fulfilment),n.receiptSignature(e.receiptSignature),n},T.createFromServerEntity=function(e){var t=new T;return t.id(e),t.name(e.replace("_"," ")),t},k.createFromServerEntity=function(e){var t=new k;return t.id(e),t.name(e.replace("_"," ").replace("_"," ")),t},{createNewBusinessUnit:d,loadAllBusinessUnits:p,loadAllBusinessUnitsAsync:m,loadBusinessUnitById:f,loadBusinessUnitByIdAsync:y,saveBusinessUnit:v,saveBusinessUnitAsync:g,removeBusinessUnit:h,removeBusinessUnitAsync:x,loadAllBusinessUnitTypes:I,loadAllBusinessUnitTypesAsync:A,loadAllPaymentGatewayTypes:S,loadAllPaymentGatewayTypesAsync:q,loadAllBusinessUnitsByEmployeeAsync:o,loadStores:b,newStore:j,getStoreTransferEmployees:_,getAdjustmentEmployees:E}});
define('repositories/departmentsRepository',["knockout","data/config","services/text"],function(e,t,n){function r(){var n=this;n.id=e.observable(),n.name=e.observable().extend({required:!0}),n.description=e.observable(),n.isActive=e.observable(!0),n.enterpriseId=e.observable(t.enterpriseId),n.nameAndStatus=e.computed(function(){return n.isActive()?n.name():n.name()+" ("+e.T("common.inactive")+")"}),n.errors=e.validation.group(n),n.toPlainObject=function(){var t=["id","name","description","isActive","enterpriseId"];return JSON.parse(e.toJSON(n,t))}}function i(){return new r}function a(e){return r.createFromServerEntity(e)}function o(){var e=[];return $.ajax({type:"GET",url:f,data:{enterpriseId:t.enterpriseId,lang:n.getLang().toUpperCase(),defaultLang:n.getDefaultLang().toUpperCase()},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),e}function s(){return n.getLang().toUpperCase(),t.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:f,data:{enterpriseId:e,lang:n.getLang().toUpperCase(),defaultLang:n.getDefaultLang().toUpperCase()},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})})}function u(e){var t=null;return $.ajax({type:"GET",url:y,data:{id:e},async:!1,success:function(e){t=r.createFromServerEntity(e)}}),t}function l(e){return $.ajax({type:"GET",url:y,data:{id:e},async:!0}).then(function(e){return r.createFromServerEntity(e)})}function c(e){var t=!1;return $.ajax({type:"POST",url:v,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function d(e){return $.ajax({type:"POST",url:v,data:e.toPlainObject(),async:!0})}function p(e){var t=!1,n=b+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function m(e){var t=b+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}var f="api/Lobs/Get",y="api/Product/GetLob",v="api/Product/SaveLob",b="api/Product/RemoveLob";return r.createFromServerEntity=function(e){var t=i();return t.id(e.id),t.name(e.name),t.description(e.description),t.isActive(e.isActive),t},{createNew:i,createFromServerEntity:a,loadAll:o,loadAllAsync:s,loadById:u,loadByIdAsync:l,save:c,saveAsync:d,remove:p,removeAsync:m}});
define('repositories/categoriesRepository',["knockout","repositories/departmentsRepository","data/config","services/text"],function(t,n,r,i){function a(){var e=this;e.id=t.observable(),e.name=t.observable().extend({required:!0}),e.description=t.observable(),e.isActive=t.observable(!0),e.color=t.observable(),e.lobId=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),e.department=t.computed(function(){return Enumerable.From(E).SingleOrDefault(null,function(t){return t.id()==e.lobId()})}),e.nameAndStatus=t.computed(function(){return e.isActive()?e.name():e.name()+" ("+t.T("common.inactive")+")"}),e.errors=t.validation.group(e),e.toPlainObject=function(){var n=["id","name","description","isActive","lobId","color"];return JSON.parse(t.toJSON(e,n))}}function o(){return new a}function s(e){return a.createFromServerEntity(e)}function u(){var e=[];return $.ajax({type:"GET",url:T,data:{enterpriseId:r.enterpriseId,lang:i.getLang().toUpperCase(),defaultLang:i.getDefaultLang().toUpperCase()},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return a.createFromServerEntity(e)}).ToArray(),j=e}}),e}function l(){var t=$.Deferred();return r.getEnterpriseId().then(function(n){$.ajax({type:"GET",url:T,data:{enterpriseId:n,lang:i.getLang().toUpperCase(),defaultLang:i.getDefaultLang().toUpperCase()},async:!0}).then(function(e){j=Enumerable.From(e).Select(function(e){return a.createFromServerEntity(e)}).ToArray(),t.resolve(j)},function(t){t.reject(e)})},function(t){t.reject(e)}),t.promise()}function c(){return $.ajax({type:"GET",url:k,data:{enterpriseId:r.enterpriseId,lang:i.getLang().toUpperCase(),defaultLang:i.getDefaultLang().toUpperCase()},async:!0})}function d(e){var t=null;return $.ajax({type:"GET",url:I,data:{id:e},async:!1,success:function(e){t=a.createFromServerEntity(e)}}),t}function p(e){return $.ajax({type:"GET",url:I,data:{id:e},async:!0}).then(function(e){return a.createFromServerEntity(e)})}function m(e){return 0==j.length&&u(),Enumerable.From(j).Where(function(t){return t.lobId()==e}).ToArray()}function f(e){return 0==j.length?l().then(function(){return Enumerable.From(j).Where(function(t){return t.lobId()==e}).ToArray()}):($.Deferred().resolve(Enumerable.From(j).Where(function(t){return t.lobId()==e}).ToArray()).promise(),void 0)}function y(e){var t=!1;return $.ajax({type:"POST",url:A,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function b(e){return $.ajax({type:"POST",url:A,data:e.toPlainObject(),async:!0})}function v(e){var t=!1,n=S+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function g(e){var t=S+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}function h(){E.length=0}function x(){j.length=0}var T="api/Categories/Get",k="api/Categories/GetMenuBuilder",I="api/Product/GetCategory",A="api/Product/SaveCategory",S="api/Product/RemoveCategory",E=[],j=[];return a.createFromServerEntity=function(e){var t=o();return t.id(e.id),t.name(e.name),t.description(e.description),t.isActive(e.isActive),t.color(e.color),t.lobId(e.lobId),t},{createNew:o,createFromServerEntity:s,loadAll:u,loadAllAsync:l,loadListForMenuBuilder:c,loadById:d,loadByIdAsync:p,loadByLobId:m,loadByLobIdAsync:f,save:y,saveAsync:b,remove:v,removeAsync:g,resetDepartmentsList:h,resetCategoriesList:x}});
define('repositories/clockInRepository',["knockout","data/config","services/text","common/dateUtils"],function(e,t,n,r){function i(e,r){return t.getEnterpriseId().then(function(t){return $.ajax({type:"POST",url:s,data:{id:t,lang:n.getLang().toUpperCase(),defaultLang:n.getDefaultLang().toUpperCase(),pagingRequest:e},async:!0}).then(function(e){return e.searchNum=r,e})})}function a(t,n){return $.ajax({type:"POST",url:u,data:t.toPlainObject(),async:!0}).then(function(e){return t.clockInId(e.clockInId),t.clockOutId(e.clockOutId),e},function(i){for(var a="",o=0;o<n.employees().length;o++)n.employees()[o].id==t.employee()&&(a=n.employees()[o].firstName+" "+n.employees()[o].lastName);if(i&&i.responseJSON&&"clockInError"==i.responseJSON.exceptionMessage){var s=e.T("reports/productMixReport.clockInError")+a+e.T("reports/productMixReport.on")+r.formatDateTime(e.unwrap(t.clockInTime))+e.T("reports/productMixReport.alredy");t.clockInTimeError(s)}else if(i&&i.responseJSON&&"clockInSame"==i.responseJSON.exceptionMessage)t.clockInTimeError(e.T("reports/productMixReport.same"));else{var s=e.T("reports/productMixReport.clockOutError")+a+e.T("reports/productMixReport.on")+r.formatDateTime(e.unwrap(t.clockOutTime))+e.T("reports/productMixReport.alredy");t.clockInTimeError(s)}})}function o(e){return $.ajax({type:"POST",url:l,data:e.toPlainObject(),async:!0}).then(function(e){return e})}var s="api/ClockIn/GetAllProductsByEnterprise",u="api/ClockIn/Save",l="api/ClockIn/Delete";return{getAllProductsUrl:s,loadAllAsync:i,save:a,deleteItem:o}});
define('repositories/deviceRepository',["knockout","data/config"],function(e,t){function n(){var t=this;t.id=e.observable(),t.name=e.observable().extend({required:!0}),t.isActive=e.observable(),t.deviceAddress=e.observable(),t.enterpriseId=e.observable().extend({required:!0}),t.licenseKey=e.observable(),t.errors=e.validation.group(t),t.toPlainObject=function(){var t=["id","name","isActive","deviceAddress","enterpriseId","licenseKey"];return JSON.parse(e.toJSON(this,t))}}function r(){return new n}function i(){var e=[];return $.ajax({type:"GET",url:l,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return n.createFromServerEntity(e)}).ToArray()}}),e}function a(){return $.ajax({type:"GET",url:l,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return n.createFromServerEntity(e)}).ToArray()})}function o(e){var t=!1;return $.ajax({type:"POST",url:d,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function s(e){return $.ajax({type:"POST",url:d,data:e.toPlainObject(),async:!0})}function u(e){var t=!1,n=p+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function c(e){var t=p+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}var l="api/Business/GetDeviceByEnterprise",d="api/Business/SaveDevice",p="api/Business/RemoveDevice";return n.createFromServerEntity=function(e){if(null==e)return null;var t=new n;return t.id(e.id),t.name(e.name),t.isActive(e.isActive),t.deviceAddress(e.deviceAddress),t.enterpriseId(e.enterpriseId),t.licenseKey(e.licenseKey),t},{createNew:r,loadAll:i,loadAllAsync:a,save:o,saveAsync:s,remove:u,removeAsync:c,Device:n}});
define('repositories/employeeRepository',["knockout","data/config"],function(e,t){function n(){var t=this;t.id=e.observable(),t.enterpriseId=e.observable(),t.firstName=e.observable(),t.lastName=e.observable(),t.fullName=e.computed(function(){return t.firstName()+" "+t.lastName()}),t.errors=e.validation.group(t),t.toPlainObject=function(){var t=["id","enterpriseId","firstName","lastName"];return JSON.parse(e.toJSON(this,t))}}function r(){return new n}function i(){var e=[];return $.ajax({type:"GET",url:l,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return n.createFromServerEntity(e)}).ToArray()}}),e}function a(){return $.ajax({type:"GET",url:l,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return n.createFromServerEntity(e)}).ToArray()})}function o(t){var n=!1;return $.ajax({type:"POST",url:d,data:t.toPlainObject(),async:!1,success:function(){n=!0},error:function(t){401==t.status&&(n=[e.T("repositories/employeeRepository.you_are_not_athorized_to_save_employee")])}}),n}function s(e){return $.ajax({type:"POST",url:d,data:e.toPlainObject(),async:!0})}function u(e){var t=!1,n=p+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function c(e){var t=p+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}var l="api/Business/GetEmployeeByEnterprise",d="api/Business/SaveEmployee",p="api/Business/RemoveEmployee";return n.createFromServerEntity=function(e){if(null==e)return null;var t=new n;return t.id(e.id),t.enterpriseId(e.enterpriseId),t.firstName(e.firstName),t.lastName(e.lastName),t},{createNew:r,loadAll:i,loadAllAsync:a,save:o,saveAsync:s,remove:u,removeAsync:c,Employee:n}});
define('repositories/enterpriseRepository',["knockout"],function(e){function t(){var t=this;t.id=e.observable(),t.name=e.observable().extend({required:!0}),t.releaseDate=e.observable().extend({date:!0}),t.toPlainObject=function(){var n=["id","name","releaseDate"];return JSON.parse(e.toJSON(t,n))}}function n(){var e=[];return $.ajax({type:"GET",url:u,async:!1,success:function(n){e=Enumerable.From(n).Select(function(e){return t.createFromServerEntity(e)}).ToArray()}}),e}function r(){return $.ajax({type:"GET",url:u,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return t.createFromServerEntity(e)}).ToArray()})}function i(e){var n=null;return $.ajax({type:"GET",url:u,data:{id:e},async:!1,success:function(e){n=t.createFromServerEntity(e)}}),n}function a(e){return $.ajax({type:"GET",url:u,data:{id:e},async:!0}).then(function(e){return t.createFromServerEntity(e)})}function o(e){var t=!1;return $.ajax({type:"POST",url:c,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function s(e){return $.ajax({type:"POST",url:c,data:e.toPlainObject(),async:!0})}var u="api/Business/GetEnterprise",c="api/Business/SaveEnterprise";return t.createFromServerEntity=function(e){var n=new t;return n.id(e.id),n.name(e.name),n.releaseDate(e.releaseDate),n},{loadAll:n,loadAllAsync:r,loadById:i,loadByIdAsync:a,save:o,saveAsync:s}});
define('repositories/itemSellingPricesRepository',["knockout","data/config"],function(e,t){function n(n){var r=this;r.id=e.observable(),r.isTaxable=e.observable(!0),r.isDiscountable=e.observable(!0),r.unitOfMeasureId=e.observable(t.unitOfMeasureId),r.unitPrice=e.observable(0).extend({amount:!0}).extend({number:!0,range:{message:e.T("repositories/itemSellingPricesRepository.price_should_be_in_range_of_-100000_to_100000"),params:{maxValue:1e5,minValue:-1e5,includeMinValue:!0,includeMaxValue:!0}}}),r.minUnitPrice=e.observable(),r.maxUnitPrice=e.observable(),r.referenceId=e.observable(n),r.toPlainObject=function(){var t=["id","isTaxable","isDiscountable","unitOfMeasureId","unitPrice","minUnitPrice","maxUnitPrice","referenceId"];return JSON.parse(e.toJSON(this,t))}}function r(e){return new n(e)}function i(t){var n={unitPrice:{create:function(t){return e.mapping.fromJS(t.data).extend({amount:!0})}}};return e.mapping.fromJS(e.mapping.toJS(t),n)}function a(e){return n.createFromServerEntity(e)}function o(){var e=[];return $.ajax({type:"GET",url:p,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return n.createFromServerEntity(e)}).ToArray()}}),e}function s(){return t.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:p,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return n.createFromServerEntity(e)}).ToArray()})})}function u(e){var t=null;return $.ajax({type:"POST",url:m,data:e.toPlainObject(),async:!1,success:function(e){t=n.createFromServerEntity(e)}}),t}function c(e){return $.ajax({type:"POST",url:m,data:e.toPlainObject(),async:!0}).then(function(e){return n.createFromServerEntity(e)})}function l(e){var t=!1,n=f+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function d(e){var t=f+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}var p="api/Product/GetItemSellingPricesByEnterprise",m="api/Product/SaveItemSellingPrices",f="api/Product/RemoveItemSellingPrices";return n.createFromServerEntity=function(e){if(null==e)return r();var t=r();return t.id(e.id),t.isTaxable(e.isTaxable),t.isDiscountable(e.isDiscountable),t.unitOfMeasureId(e.unitOfMeasureId),t.unitPrice(e.unitPrice),t.minUnitPrice(e.minUnitPrice),t.maxUnitPrice(e.maxUnitPrice),t.referenceId(e.referenceId),t},{ItemSellingPrice:n,createNew:r,createCopy:i,createFromServerEntity:a,loadAll:o,loadAllAsync:s,save:u,saveAsync:c,remove:l,removeAsync:d}});
define('repositories/picturesRepository',["knockout"],function(e){function t(){var t=this;t.id=e.observable(),t.enterpriseId=e.observable().extend({required:!0}),t.content=e.observable().extend({required:!0,base64:!0}),t.errors=e.validation.group(t),t.toPlainObject=function(){var n=["id","enterpriseId","content"];return JSON.parse(e.toJSON(t,n))}}function n(){return new t}function r(e){return t.createFromServerEntity(e)}function i(){var e=[];return $.ajax({type:"GET",url:p,async:!1,success:function(n){e=Enumerable.From(n).Select(function(e){return t.createFromServerEntity(e)}).ToArray()}}),e}function a(){return $.ajax({type:"GET",url:p,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return t.createFromServerEntity(e)}).ToArray()})}function o(e){var n=null;return $.ajax({type:"GET",url:p,data:{id:e},async:!1,success:function(e){n=t.createFromServerEntity(e)}}),n}function s(e){return $.ajax({type:"GET",url:p,data:{id:e},async:!0}).then(function(e){return t.createFromServerEntity(e)})}function u(e){var n=null;return $.ajax({type:"POST",dataType:"json",contentType:"application/json",url:m,data:JSON.stringify(e.toPlainObject()),async:!1,success:function(e){n=t.createFromServerEntity(e)}}),n}function c(e){return $.ajax({type:"POST",url:m,data:e.toPlainObject(),async:!0}).then(function(e){return t.createFromServerEntity(e)})}function l(e){var t=!1,n=f+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function d(e){var t=f+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}var p="api/Product/GetPicture",m="api/Product/SavePicture",f="api/Product/RemovePicture";return t.createFromServerEntity=function(e){if(null==e)return null;var t=n();return t.id(e.id),t.enterpriseId(e.enterpriseId),t.content(e.content),t},{createNewPicture:n,createFromServerEntity:r,loadAllPictures:i,loadAllPicturesAsync:a,loadPictureById:o,loadPictureByIdAsync:s,savePicture:u,savePictureAsync:c,removePicture:l,removePictureAsync:d}});
define('repositories/vendorsRepository',["knockout","data/config"],function(e,t){function r(){var t=this;t.id=e.observable(),t.name=e.observable().extend({required:!0}),t.errors=e.validation.group(t),t.type=e.observable(),t.isActive=e.observable(),t.typeName=e.computed(function(){return Enumerable.From(x).SingleOrDefault(null,function(e){return e.code==t.type()})}),t.toPlainObject=function(){var r=["id","name"];return JSON.parse(e.toJSON(t,r))}}function n(){return new r}function a(e){return r.createFromServerEntity(e)}function i(){var e=[];return $.ajax({type:"GET",url:h,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),S=e,e}function o(){var e=[];return $.ajax({type:"GET",url:g,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),S=e,e}function s(){return $.ajax({type:"GET",url:E,async:!0}).then(function(e){x=e})}function u(){return s().done(function(){})}function c(){return t.getEnterpriseId().then(function(e){return u().then(function(){return $.ajax({type:"GET",url:g,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})})})}function l(){return t.getEnterpriseId().then(function(e){return u().then(function(){return $.ajax({type:"GET",url:h,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})})})}function d(){return c().done(function(e){S=e})}function p(e){var t=null;return $.ajax({type:"GET",url:g,data:{id:e},async:!1,success:function(e){t=r.createFromServerEntity(e)}}),t}function m(e){return $.ajax({type:"GET",url:g,data:{id:e},async:!0}).then(function(e){return r.createFromServerEntity(e)})}function y(e){var t=!1;return $.ajax({type:"POST",url:T,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function f(e){return $.ajax({type:"POST",url:T,data:e.toPlainObject(),async:!0})}function v(e){var t=!1,r=I+"/"+e.id();return $.ajax({type:"DELETE",url:r,data:null,async:!1,success:function(){t=!0}}),t}function b(e){var t=I+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}var g="api/Business/GetVendorByEnterprise",h="api/Business/GetActiveVendorByEnterprise",T="api/Business/SaveVendor",I="api/Business/RemoveVendor",E="api/Business/GetVendorTypes",S=[],x=[];return r.createFromServerEntity=function(e){var t=n();return t.id(e.id),t.name(e.name),t.type(e.type),t.isActive(e.isActive),t},{vendors:S,createNew:n,createFromServerEntity:a,loadAll:o,loadAllAsync:c,reLoadAllAsync:d,loadAllActiveAsync:l,loadAllActive:i,loadById:p,loadByIdAsync:m,save:y,saveAsync:f,remove:v,removeAsync:b}});
define('repositories/vendorItemsRepository',["knockout","data/config","repositories/vendorsRepository"],function(e,t,r){function n(e){x=e}function a(e){return 0==x.length&&(x=r.loadAll()),Enumerable.From(x).SingleOrDefault(null,function(t){return t.id()==e})}function i(t){var r=this;t=t||{},r.id=e.observable(),r.sku=e.observable().extend({required:!0}),r.vendorId=e.observable(t.vendorId),r.vendorOject=e.observable(t.vendorObject),r.vendor=e.computed(function(){return r.vendorOject()||r.vendorOject(a(r.vendorId())),r.vendorOject()}),r.cost=e.observable("0.00").extend({defaultIfBlank:"0.00"}).extend({number:!0}),r.isPrimary=e.observable(),r.isPrimary(!1),r.itemId=e.observable(),r.errors=e.validation.group(r,{deep:!0}),r.toPlainObject=function(){var t=["id","sku","vendorId","itemId","isPrimary","cost"];return JSON.parse(e.toJSON(r,t))}}function o(){return 0==x.length&&(x=r.loadAll()),x}function s(){return x.length=0,x=r.loadAll()}function u(e){return new i(e)}function c(e){return i.createFromServerEntity(e)}function l(e){var t=Enumerable.From(d()).Where(function(t){return t.itemId()==e?t:void 0}).ToArray();return t}function d(){var e=[];return x=r.loadAll(),$.ajax({type:"GET",url:T,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return i.createFromServerEntity(e)}).ToArray()}}),e}function p(){return r.reLoadAllAsync().done(function(e){x=e})}function m(){return p().then(function(){return $.ajax({type:"GET",url:T,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return i.createFromServerEntity(e)}).ToArray()})})}function y(e){var t=null;return $.ajax({type:"GET",url:T,data:{id:e},async:!1,success:function(e){t=i.createFromServerEntity(e)}}),t}function f(e){return $.ajax({type:"GET",url:T,data:{id:e},async:!0}).then(function(e){return i.createFromServerEntity(e)})}function v(e){var t=!1;return $.ajax({type:"POST",url:I,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function b(e){return $.ajax({type:"POST",url:I,data:e.toPlainObject(),async:!0})}function g(e){var t=!1,r=S+"/"+e.id();return $.ajax({type:"DELETE",url:r,data:null,async:!1,success:function(){t=!0}}),t}function h(e){var t=S+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}var T="api/Product/GetVendorItem",I="api/Product/SaveVendorItem",S="api/Product/RemoveVendorItem",x=[];return i.createFromServerEntity=function(e){var t=u(e);return t.vendorOject(e.vendorObject),t.cost(e.cost),t.isPrimary(e.isPrimary),t.id(e.id),t.sku(e.sku),t.vendorId(e.vendorId),t.itemId(e.itemId),t},{createNew:u,createFromServerEntity:c,loadAll:d,loadAllAsync:m,loadByItemId:l,loadById:y,loadByIdAsync:f,save:v,saveAsync:b,getVendors:o,reloadVendors:s,setVendors:n,getVendorById:a,remove:g,removeAsync:h}});
define('repositories/itemsRepository',["knockout","repositories/picturesRepository","repositories/categoriesRepository","repositories/vendorItemsRepository","repositories/itemSellingPricesRepository"],function(e,t,n,r,i){function a(){this.id=e.observable(),this.enterpriseId=e.observable(),this.name=e.observable(),this.description=e.observable(),this.upc=e.observable(),this.isActive=e.observable(!0),this.isManualPrice=e.observable(),this.categoryItems=e.observableArray([]),this.pictureId=e.observable(),this.picture=e.observable(),this.productCode=e.observable(),this.color=e.observable()}function o(){return new a}function s(){var e=[];return it=t.loadAllPictures(),tt=n.loadAll(),nt=b(),A(),rt=r.loadAll(),$.ajax({type:"GET",url:G,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return a.createFromServerEntity(e)}).ToArray()}}),e}function u(){return $.when(t.loadAllPicturesAsync().then(function(e){it=e}),n.loadAllAsync().then(function(e){tt=e}),g().then(function(e){nt=e}),k(),r.loadAllAsync().then(function(e){rt=e})).then(function(){return $.ajax({type:"GET",url:G,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return a.createFromServerEntity(e)}).ToArray()})})}function c(){Z=s()}function l(){return u().then(function(e){Z=e})}function d(e){var t=null;return $.ajax({type:"GET",url:G,data:{id:e},async:!1,success:function(e){t=a.createFromServerEntity(e),t.categoryItems(h(t.id()))}}),t}function p(e){var t;return T(e).then(function(n){return t=n,$.ajax({type:"GET",url:G,data:{id:e},async:!0})}).then(function(e){var n=a.createFromServerEntity(e);n.categoryItems(t)})}function m(e){var n=null;if(null!=e.picture()){e.picture().enterpriseId(e.enterpriseId());var r=t.savePicture(e.picture());e.pictureId(r.id())}return $.ajax({type:"POST",url:R,data:e.toPlainObject(),async:!1,success:function(e){n=a.createFromServerEntity(e)}}),n}function f(e){var n=new $.Deferred;n.then(function(){return $.ajax({type:"POST",url:R,data:e.toPlainObject(),async:!0}).then(function(e){return a.createFromServerEntity(e)})}),null!=e.picture()?(e.picture().enterpriseId(e.enterpriseId()),t.savePictureAsync(e.picture()).then(function(t){e.pictureId(t.id()),n.resolve()})):n.resolve()}function y(){var t=this;t.id=e.observable(),t.itemId=e.observable(),t.categoryId=e.observable(),t.toPlainObject=function(){var n=["id","itemId","categoryId"];return JSON.parse(e.toJSON(t,n))}}function v(){return new y}function b(){var e=[];return $.ajax({type:"GET",url:Q,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return y.createFromServerEntity(e)}).ToArray()}}),e}function g(){return $.ajax({type:"GET",url:Q,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return y.createFromServerEntity(e)}).ToArray()})}function h(e){var t=b();return Enumerable.From(t).Where(function(t){return t.itemId()==e}).ToArray()}function T(e){return g().then(function(t){return Enumerable.From(t).Where(function(t){return t.itemId()==e}).ToArray()})}function x(e){var t=null;return $.ajax({type:"POST",url:J,data:e.toPlainObject(),async:!1,success:function(e){t=y.createFromServerEntity(e)}}),t}function I(e){return $.ajax({type:"POST",url:J,data:e.toPlainObject(),async:!0}).then(function(e){return y.createFromServerEntity(e)})}function S(e){var t=!1,n=K+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function E(e){var t=K+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}function A(){et=i.loadAll()}function k(){return i.loadAllAsync().then(function(e){et=e})}function j(){this.id="",this.name="",this.quantityDecimalPlaces=0}function F(){return new j}function P(e){return j.createFromServerEntity(e)}function O(){var e=[];return $.ajax({type:"GET",url:W,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return j.createFromServerEntity(e)}).ToArray()}}),e}function D(){return $.ajax({type:"GET",url:W,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return j.createFromServerEntity(e)}).ToArray()})}function _(){this.id=e.observable(),this.referenceId=e.observable(),this.businessUnitId=e.observable(),this.onHandQuantity=e.observable(),this.minimumQuantity=e.observable(),this.recommendedQuantity=e.observable(),this.unitOfMeasureId=e.observable()}function q(){return new _}function w(){c();var e=[];return $.ajax({type:"GET",url:z,async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return _.createFromServerEntity(e)}).ToArray()}}),e}function N(e){c();var t=null;return $.ajax({type:"GET",url:z,data:{id:e},async:!1,success:function(e){t=_.createFromServerEntity(e)}}),t}function C(){return l().then(function(){return $.ajax({type:"GET",url:z,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return _.createFromServerEntity(e)}).ToArray()})})}function L(e){var t=null;return $.ajax({type:"POST",url:Y,data:e.toPlainObject(),async:!1,success:function(e){t=_.createFromServerEntity(e)}}),t}function U(e){return $.ajax({type:"POST",url:Y,data:e.toPlainObject(),async:!0}).then(function(e){return _.createFromServerEntity(e)})}function M(e){var t=!1,n=H+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function V(e){var t=H+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}function B(e,t){var n=[];return $.ajax({type:"POST",url:X+"/"+e,data:JSON.stringify(t),contentType:"application/json",async:!1,success:function(){}}),n}var G="api/Product/GetItem",R="api/Product/SaveItem",Q="api/Product/GetCategoryItem",J="api/Product/SaveCategoryItem",K="api/Product/RemoveCategoryItem",z="api/Product/GetItemInventory",Y="api/Product/SaveItemInventory",H="api/Product/RemoveItemInventory",W="api/Product/GetUnitOfMeasure",X="api/Product/ImportInventory2",Z=[],et=[],tt=[],nt=[],rt=[],it=[];return a.prototype.toPlainObject=function(){var t=["id","enterpriseId","name","description","upc","isActive","isManualPrice","pictureId","productCode","color"];return JSON.parse(e.toJSON(this,t))},a.createFromServerEntity=function(e){var t=o();t.id(e.id),t.enterpriseId(e.enterpriseId),t.name(e.name),t.description(e.description),t.upc(e.upc),t.isActive(e.isActive),t.isManualPrice(e.isManualPrice),t.productCode(e.productCode),t.color(e.color),t.pictureId(e.pictureId);var n=Enumerable.From(it).SingleOrDefault(null,function(e){return e.id()==t.pictureId()});t.picture(n);var r=Enumerable.From(nt).SingleOrDefault(null,function(t){return t.itemId()==e.id});if(r){var i=Enumerable.From(tt).SingleOrDefault(null,function(e){return e.id()==r.categoryId()});t.categoryItems.push(i)}return t},y.createFromServerEntity=function(e){var t=v();return t.id(e.id),t.itemId(e.itemId),t.categoryId(e.categoryId),t},j.createFromServerEntity=function(e){return e},_.prototype.toPlainObject=function(){var t=["id","referenceId","businessUnitId","onHandQuantity","minimumQuantity","recommendedQuantity","unitOfMeasureId"];return JSON.parse(e.toJSON(this,t))},_.findSellingPrice=function(e){if(!e)return null;var t=Enumerable.From(et).FirstOrDefault(null,function(t){return t.referenceId()===e.id()});return t},_.createFromServerEntity=function(t){if(null==t)return null;var n=q();n.id(t.id),n.referenceId(t.referenceId),n.onHandQuantity(t.onHandQuantity),n.minimumQuantity(t.minimumQuantity),n.recommendedQuantity(t.recommendedQuantity),n.unitOfMeasureId(t.unitOfMeasureId),n.item=Enumerable.From(Z).SingleOrDefault(null,function(e){return e.id()==n.referenceId()});var r=Enumerable.From(rt).Where(function(e){return e.itemId()==n.item.id()}).OrderByDescending(function(e){return e.isPrimary()}).ToArray();n.vendorItems=e.observableArray(r);var i=_.findSellingPrice(n.item);return n.sellingPrice=e.observable(i),n},{createNewCategoryItem:v,loadAllCategoryItems:b,loadAllCategoryItemsAsync:g,loadAllCategoryItemsByItemId:h,loadAllCategoryItemsByItemIdAsync:T,saveCategoryItem:x,saveCategoryItemAsync:I,removeCategoryItem:S,removeCategoryItemAsync:E,createNewItem:o,loadAllItems:s,loadAllItemsAsync:u,loadItemById:d,loadItemByIdAsync:p,saveItem:m,saveItemAsync:f,createNewUnitOfMeasure:F,createUnitOfMeasureFromServerEntity:P,loadAllUnitsOfMeasure:O,loadAllUnitsOfMeasureAsync:D,createNewItemInventory:q,loadAllItemInventories:w,loadAllItemInventoriesAsync:C,saveItemInventory:L,saveItemInventoryAsync:U,removeItemInventory:M,removeItemInventoryAsync:V,loadInventoriesItemById:N,findSellingPrice:_.findSellingPrice,importInventory:B}});
define('repositories/modifierTypesRepository',["jquery","knockout"],function(e,t){function n(e){this.code=e.code,this.name=t.T("modifierTypes."+e.name)}function r(){var e=a.map(function(e){return new n(e)});return e}function i(){var t=a.map(function(e){return new n(e)});return e.Deferred().resolve(t).promise()}var a=[{code:0,name:"modifierGroup"},{code:1,name:"addons"},{code:2,name:"exceptions"}];return{loadAll:r,loadAllAsync:i}});
define('repositories/modifierValuesRepository',["knockout","data/config","repositories/itemSellingPricesRepository"],function(e,t,n){function r(){var t=this;t.id=e.observable(),t.itemModifierId=e.observable(),t.optionName=e.observable().extend({required:!0}),t.optionOrder=e.observable().extend({required:!0}),t.isManualPrice=e.observable(!1).extend({required:!0}),t.itemInventoryId=e.observable(),t.itemSellingPrice=e.observable(n.createNew()),t.errors=e.validation.group(t),t.toPlainObject=function(){var t=["id","itemModifierId","optionName","optionOrder","isManualPrice","itemInventoryId"],n=JSON.parse(e.toJSON(this,t));return n.itemSellingPrice=null!=this.itemSellingPrice()?this.itemSellingPrice().toPlainObject():null,n}}function i(){return new r}function a(e){return r.createFromServerEntity(e)}function o(){f();var e=[];return $.ajax({type:"GET",url:v,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),e}function s(){return y().then(function(){return $.ajax({type:"GET",url:v,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})})}function u(e){f();var t=null;return $.ajax({type:"GET",url:b,data:{id:e},async:!1,success:function(e){t=r.createFromServerEntity(e)}}),t}function c(e){return y().then(function(){return $.ajax({type:"GET",url:b,data:{id:e},async:!0}).then(function(e){return r.createFromServerEntity(e)})})}function l(e){var t=null;$.ajax({type:"POST",url:g,data:e.toPlainObject(),async:!1,success:function(e){t=r.createFromServerEntity(e)}}),e.itemSellingPrice().referenceId(t.id());var i=n.save(e.itemSellingPrice());return t.itemSellingPrice(i),t}function d(e){var t=null;return $.ajax({type:"POST",url:g,data:e.toPlainObject(),async:!0}).then(function(e){return r.createFromServerEntity(e)}).then(function(r){return t=r,e.itemSellingPrice().referenceId(t.id()),n.saveAsync(e.itemSellingPrice())}).then(function(e){return t.itemSellingPrice(e),t})}function p(e){var t=!1,n=h+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function m(e){var t=h+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}function f(){T=n.loadAll()}function y(){return n.loadAllAsync().then(function(e){T=e})}var v="api/Product/GetAllItemModifierValueByEnterprise",b="api/Product/GetItemModifierValue",g="api/Product/SaveItemModifierValue",h="api/Product/RemoveItemModifierValue",T=[];return r.createFromServerEntity=function(e){var t=i();if(t.id(e.id),t.itemModifierId(e.itemModifierId),t.optionName(e.optionName),t.optionOrder(e.optionOrder),t.isManualPrice(e.isManualPrice),t.itemInventoryId(e.itemInventoryId),null!=T&&T.length>0){var r=Enumerable.From(T).SingleOrDefault(n.createNew(),function(e){return e.referenceId()==t.id()});t.itemSellingPrice(r)}return t},{createNew:i,createFromServerEntity:a,loadAll:o,loadAllAsync:s,loadById:u,loadByIdAsync:c,save:l,saveAsync:d,remove:p,removeAsync:m}});
define('repositories/modifiersRepository',["knockout","data/config","repositories/modifierValuesRepository","repositories/itemSellingPricesRepository"],function(e,t,n,r){function i(){var t=this;t.id=e.observable(),t.referenceId=e.observable(),t.name=e.observable().extend({required:!0}),t.description=e.observable(),t.isActive=e.observable(!0).extend({required:!0}),t.order=e.observable().extend({required:!0}),t.defaultOption=e.observable("1").extend({required:!0}),t.itemModifierTypeCode=e.observable().extend({required:!0}),t.isGroupModifier=e.computed(function(){return 0==t.itemModifierTypeCode()}),t.isAddOnModifier=e.computed(function(){return 1==t.itemModifierTypeCode()}),t.isExceptionModifier=e.computed(function(){return 2==t.itemModifierTypeCode()}),t.modifierValues=e.observableArray([]).extend({arrayElementUniqueProperty:{propertyName:"optionName",errorMessage:e.T("repositories/modifiersRepository.option_name_must_be_unique")}}),t.addModifierValue=function(){var e=n.createNew(),r=t.modifierValues().length>0?Enumerable.From(t.modifierValues()).Max(function(e){return e.optionOrder()})+1:1;e.optionOrder(r),t.modifierValues.push(e)},t.deleteModifierValue=function(e){if(t.modifierValues.splice(t.modifierValues.indexOf(e),1),null!=e.id()&&t.pendingValuesForDelete().push(e),t.defaultOption()==e.optionOrder()){var n=t.modifierValues().lenth>0?Enumerable.From(t.modifierValues()).Min(function(e){return e.optionOrder()}):1;t.defaultOption(n.toString())}},t.pendingValuesForDelete=e.observableArray([]),t.errors=e.validation.group(t),t.toPlainObject=function(){var t=["id","referenceId","name","description","isActive","defaultOption","itemModifierTypeCode","order"],n=JSON.parse(e.toJSON(this,t));return n.itemModifierValues=Enumerable.From(this.modifierValues()).Select(function(e){return e.toPlainObject()}).ToArray(),n}}function a(){return new i}function o(e){return i.createFromServerEntity(e)}function s(t){var n={itemSellingPrice:{create:function(t){return e.observable(r.createCopy(t.data))}}},i=e.mapping.fromJS(e.mapping.toJS(t),n);return i.errors=e.validation.group(i),i}function u(e){var t=a();return t.itemModifierTypeCode(0),t.addModifierValue(),t.referenceId(e),t.order(0),t}function c(t){var n=a();return n.itemModifierTypeCode(1),n.addModifierValue(),n.modifierValues()[0].optionName(e.T("repositories/modifiersRepository.add_on")),n.referenceId(t),n.order(0),n}function l(t){var n=a();return n.itemModifierTypeCode(2),n.addModifierValue(),n.modifierValues()[0].optionName(e.T("repositories/modifiersRepository.exclusion")),n.referenceId(t),n.order(0),n}function d(){var e=[];return $.ajax({type:"GET",url:k,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return i.createFromServerEntity(e)}).ToArray()}}),e}function p(){return $.ajax({type:"GET",url:k,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return i.createFromServerEntity(e)}).ToArray()})}function m(){E();var e=[];return $.ajax({type:"GET",url:F,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return i.createFromServerEntity(e)}).ToArray()}}),e}function f(){return S().then(function(){return $.ajax({type:"GET",url:F,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return i.createFromServerEntity(e)}).ToArray()})})}function y(e){E();var t=null;return $.ajax({type:"GET",url:q,data:{id:e},async:!1,success:function(e){t=i.createFromServerEntity(e)}}),t}function v(e){return S().then(function(){return $.ajax({type:"GET",url:q,data:{id:e},async:!0}).then(function(e){return i.createFromServerEntity(e)})})}function b(e){E();var t=null;return $.ajax({type:"GET",url:P,data:{id:e},async:!1,success:function(e){t=Enumerable.From(e).Select(function(e){return i.createFromServerEntity(e)}).ToArray()}}),t}function g(e){return S().then(function(){return $.ajax({type:"GET",url:P,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return i.createFromServerEntity(e)}).ToArray()})})}function h(e){(1==e.itemModifierTypeCode()||2==e.itemModifierTypeCode())&&e.modifierValues().length>0&&e.modifierValues()[0].optionName(e.name()),e.modifierValues().forEach(function(t,n){e.defaultOption()==t.optionOrder()&&e.defaultOption(n+1),t.optionOrder(n+1)});var t=null,r=e.toPlainObject();return delete r.itemModifierValues,$.ajax({type:"POST",url:O,data:r,async:!1,success:function(e){t=i.createFromServerEntity(e)}}),null!=t&&e.modifierValues().length>0&&e.modifierValues().forEach(function(e){e.itemModifierId(t.id()),n.save(e)}),e.pendingValuesForDelete().length>0&&Enumerable.From(e.pendingValuesForDelete()).ForEach(function(e){n.remove(e)}),t}function T(e){(1==e.itemModifierTypeCode()||2==e.itemModifierTypeCode())&&e.modifierValues().length>0&&e.name(e.modifierValues()[0].optionName()),e.modifierValues().forEach(function(t,n){e.defaultOption()==t.optionOrder()&&e.defaultOption(n+1),t.optionOrder(n+1)});var t=e.toPlainObject();return delete t.itemModifierValues,$.ajax({type:"POST",url:O,data:t,async:!0}).then(function(e){return i.createFromServerEntity(e)}).then(function(t){null!=t&&e.modifierValues().length>0&&e.modifierValues().forEach(function(e){e.itemModifierId(t.id()),n.saveAsync(e)})}).then(function(){e.pendingValuesForDelete().length>0&&Enumerable.From(e.pendingValuesForDelete()).ForEach(function(e){n.removeAsync(e)})})}function x(e){var t=!1,n=D+"/"+e.id();return $.ajax({type:"DELETE",url:n,data:null,async:!1,success:function(){t=!0}}),t}function I(e){var t=D+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}function E(){N=n.loadAll()}function S(){return n.loadAllAsync().then(function(e){N=e})}function A(e){var t=null;return $.ajax({type:"POST",url:M,data:{sourceId:e,destinationReferenceId:1},async:!1,success:function(e){E(),t=i.createFromServerEntity(e)}}),t}function j(){return $.ajax({type:"POST",url:M,data:{sourceId:id,destinationReferenceId:1},async:!0}).then(function(e){return S().then(function(){return i.createFromServerEntity(e)})})}var k="api/Product/GetAllItemModifierByEnterprise",F="api/Product/GetAllItemModifierTemplateByEnterprise",P="api/Product/GetItemModifierByReference",O="api/Product/SaveItemModifier",D="api/Product/RemoveItemModifier",q="api/Product/GetItemModifier",M="api/Product/CopyItemModifier",N=[];return i.createFromServerEntity=function(e){if(null==e)return null;var t=a();t.id(e.id),t.referenceId(e.referenceId),t.name(e.name),t.description(e.description),t.isActive(e.isActive),t.order(e.order),t.defaultOption(e.defaultOption.toString()),t.itemModifierTypeCode(e.itemModifierTypeCode);var r=[];return null!=e.itemModifierValues&&e.itemModifierValues.length>0?r=Enumerable.From(e.itemModifierValues).Select(function(e){return n.createFromServerEntity(e)}).OrderBy(function(e){return e.optionOrder()}).ToArray():null!=N&&N.length>0&&(r=Enumerable.From(N).Where(function(e){return e.itemModifierId()==t.id()}).OrderBy(function(e){return e.optionOrder()}).ToArray()),t.modifierValues(r),t},{createNew:a,createCopy:s,createNewGroupModifierTemplate:u,createNewAddOnModifierTemplate:c,createNewExceptionModifierTemplate:l,createFromServerEntity:o,loadAll:d,loadAllAsync:p,loadAllTemplates:m,loadAllTemplatesAsync:f,loadById:y,loadByIdAsync:v,loadByReferenceId:b,loadByReferenceIdAsync:g,createCopyById:A,createCopyByIdAsync:j,save:h,saveAsync:T,remove:x,removeAsync:I}});
define('repositories/presentationApi/categoriesRepository',["data/config","services/text","common/utils","repositories/base/basePresentationRepository"],function(e,t,n,r){function i(){i.superclass.constructor.apply(this,arguments),this.getUrl="api/Categories/Get",this.getByIdUrl="api/Categories/GetById",this.saveUrl="api/Categories/Save",this.createUrl="api/Categories/Create",this.removeUrl="api/Categories/Remove",this.removeManyUrl="api/Categories/RemoveMany"}return n.extend(i,r),$.extend(i.prototype,{removeMany:function(e){return $.ajax({type:"POST",url:this.removeManyUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"})}}),$.extend(i.prototype,{getAppCategories:function(){return e.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:"api/Categories/GetAppCategories",data:{enterpriseId:e,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()}})})}}),$.extend(i.prototype,{createAppCategory:function(){return e.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:"api/Categories/CreateAppCategory",data:{enterpriseId:e,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()}})})}}),new i});
define('repositories/presentationApi/employeesRepository',["jquery","knockout","data/config"],function(e,t,n){function r(){var e=this;e.id=t.observable(),e.firstName=t.observable(),e.lastName=t.observable(),e.nickname=t.observable(),e.email=t.observable(),e.phone=t.observable().extend({phone:!0,phoneNumber:!0}),e.role=t.observable(),e.storesText=t.observable(),e.stores=t.observable(),e.isActive=t.observable(!0)}function i(){return n.getEnterpriseId().then(function(t){return e.ajax({type:"GET",url:d,data:{id:t},async:!0}).then(function(e){return window.Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})})}function a(){var e=l;return e?(b.indexOf(e.countryId())>-1?(e.stateId.extend(g),e.stateVisible(!0)):(e.stateId.rules&&e.stateId.rules.remove(function(e){return"required"===e.rule}),e.stateVisible(!1)),void 0):!1}function o(e){var n=this;n.id=t.observable(),n.enterpriseId=t.observable(),n.firstName=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),n.lastName=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),n.nickname=t.observable(),e&&(n.pin=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")},pin:!0}),n.confirmPin=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")},pin:!0}).extend({areSame:{params:{target:n.pin},message:t.T("employees/employeeManage.should_be_equal_to_pin")}}),n.password=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")},pattern:{message:t.T("account.invalid_password"),params:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{9,15}$/,onlyIf:function(){return!(n.id()&&"******"===n.password())}}}),n.confirmPassword=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}).extend({areSame:{params:{target:n.password},message:t.T("account.should_be_equal_to_password")}})),n.isoLanguageId=t.observable(),n.isoLanguages=t.observableArray(),n.languagesWithoutCustom=t.computed(function(){return n.isoLanguages().filter(function(e){return"C0"!==e.id})}),n.roleId=t.observableArray().extend({required:{message:t.T("repositories/presentationApi/employeesRepository.choose_role_name")}}),n.roles=t.observableArray(),n.isActive=t.observable(),n.email=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")},email:{message:t.T("repositories/presentationApi/employeesRepository.invalid_email_address")}}),n.phone=t.observable().extend({phone:{message:t.T("repositories/presentationApi/employeesRepository.invalid_phone")},notify:"always"}),n.phone.phone.extend({required:!0}),n.address=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),n.countryId=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),n.countryChange=a,n.countries=t.observableArray(),n.stateVisible=t.observable(!0),n.stateId=t.observable(),n.allStates=t.observableArray(),n.employeeBusinessUnits=t.observableArray(),n.businessUnits=t.observableArray(),n.businessUnitsSelected=t.observableArray(),n.states=t.computed(function(){return window.Enumerable.From(n.allStates()).Where(function(e){return e.isoCountryId===n.countryId()}).ToArray()}),n.city=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),n.zip=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")},pattern:{message:t.T("repositories/presentationApi/storesRepository.invalid_zip"),params:/^[a-z0-9]+$/i}}),n.boLanguage=t.computed(function(){return window.Enumerable.From(n.isoLanguages()).SingleOrDefault({name:t.T("employees/manage-tabs/localizationTab.same_as_pos_language")},function(e){return e.id===n.isoLanguageId()}).name}),n.isAssignShopEditeble=t.computed(function(){return"Sales Manager"===n.roleId()||"Back Office Operator"===n.roleId()||"Sales Person"===n.roleId()}),n.toPlainObject=function(){return JSON.parse(t.toJSON(n))}}function s(){return n.getEnterpriseId().then(function(t){return e.ajax({type:"GET",url:v,data:{id:t},async:!0}).then(function(e){return o.createFromServerEntity(e)})})}function u(t,n){var r=p;return n&&(r=m),e.ajax({type:"GET",url:r,data:{id:t},async:!0}).then(function(e){return o.createFromServerEntity(e)})}function c(t,n){var r=f;return n&&(r=y),e.ajax({type:"POST",dataType:"json",contentType:"application/json",url:r,data:JSON.stringify(t.toPlainObject()),async:!0})}var l,d="api/Employees/GetAllEmployeesByEnterprise",p="api/Employees/GetEmployeeById",m="api/Employees/GetEmployeeAdminById",f="api/Employees/Save",y="api/Employees/SaveEmployeeAdmin",v="api/Employees/Create",b=["CA","US"],g={required:!0};return r.createFromServerEntity=function(e){if(!e)return null;var n=new r;return n.id(e.id),n.firstName(e.firstName),n.lastName(e.lastName),n.nickname(e.nickname),n.email(e.email),n.phone(e.phone),n.role(e.role),n.isActive(e.isActive),n.stores(e.stores),-1===e.storeCount?n.storesText(t.T("employees/employeesList.allStores")):n.storesText(e.storeCount+" "+t.T("employees/employeesList.stores")),n},o.createFromServerEntity=function(e){if(!e)return null;var t=void 0!==e.pin;return l=new o(t),l.id(e.id),l.enterpriseId(e.enterpriseId),l.firstName(e.firstName),l.lastName(e.lastName),l.nickname(e.nickname),t&&(l.pin(e.pin),l.confirmPin(e.pin),l.password(e.password),l.confirmPassword(e.password)),l.isoLanguageId(e.isoLanguageId),l.isoLanguages(e.isoLanguages),l.roleId(e.roleId),l.roles(e.roles),l.isActive(e.isActive),l.email(e.email),l.phone(e.phone),l.address(e.address),l.countryId(e.countryId),l.countries(e.countries),l.stateId(e.stateId),l.allStates(e.states),l.city(e.city),l.zip(e.zip),l.employeeBusinessUnits(e.employeeBusinessUnits),l.businessUnits(e.businessUnits),a(),l},{createNewAsync:s,loadAll:i,loadByIdAsync:u,saveAsync:c}});
define('repositories/presentationApi/enterpriseRepository',["common/utils","repositories/base/basePresentationRepository"],function(e,t){function n(){n.superclass.constructor.apply(this,arguments),this.getByIdUrl="api/Enterprise/Get",this.saveUrl="api/Enterprise/Save"}return e.extend(n,t),new n});
define('repositories/presentationApi/lobsRepository',["data/config","services/text","common/utils","repositories/base/basePresentationRepository"],function(e,t,n,r){function i(){i.superclass.constructor.apply(this,arguments),this.getUrl="api/Lobs/Get",this.getByIdUrl="api/Lobs/GetById",this.saveUrl="api/Lobs/Save",this.createUrl="api/Lobs/Create",this.removeUrl="api/Lobs/Remove",this.removeManyUrl="api/Lobs/RemoveMany"}return n.extend(i,r),$.extend(i.prototype,{removeMany:function(e){return $.ajax({type:"POST",url:this.removeManyUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"})}}),$.extend(i.prototype,{getAppLobs:function(){return e.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:"api/Lobs/GetAppLobs",data:{enterpriseId:e,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()}})})}}),new i});
define('repositories/presentationApi/modifiersRepository',["jquery","knockout","data/config","repositories/modifiersRepository","repositories/modifierValuesRepository","repositories/itemSellingPricesRepository","services/text","models/buItemValueModel"],function(e,t,n,r,i,a,o,s){function u(e,r,i){for(var a=0;a<n.languages.length;++a)if(!i||-1===i.indexOf(n.languages[a].id)){var o={objectId:r,languageId:n.languages[a].id,language:{id:n.languages[a].id,name:n.languages[a].name},name:t.observable()};n.defaultLanguage&&n.languages[a].id==n.defaultLanguage&&o.name.extend({required:{message:t.T("common.thisFieldIsRequired")}}),e.names.push(o)}}function c(e){var n=this;n.id=t.observable(),n.referenceId=t.observable(e),n.name=t.observable(),n.names=t.observableArray().extend({required:!0}),n.dimantion=-1,u(n,e),n.findNameByLang=function(e){return e=e.toUpperCase(),n.names().find(function(t){return t.languageId===e})},n.findNameIndexByLang=function(e){return e=e.toUpperCase(),n.names().findIndex(function(t){return t.languageId===e})},n.findNameByLangAndValue=function(e,t){return e=e.toUpperCase(),n.names().find(function(n){return n.languageId===e&&n.name()===t})},n.findNameIndexByLangAndValue=function(e,t){return e=e.toUpperCase(),n.names().findIndex(function(n){return n.languageId===e&&n.name()===t})},n.order=t.observable().extend({required:!0}),n.defaultOption=t.observable("1").extend({required:!0}),n.isActive=t.observable(!0).extend({required:!0}),n.itemModifierTypeCode=t.observable().extend({required:!0}),n.itemModifierValues=t.observableArray([]),n.isGroupModifier=t.computed(function(){return 0==n.itemModifierTypeCode()}),n.isAddOnModifier=t.computed(function(){return 1==n.itemModifierTypeCode()}),n.isExceptionModifier=t.computed(function(){return 2==n.itemModifierTypeCode()}),n.addModifierValue=function(e){var t=e;t&&t.id&&(t=t.id());var r=new l(t),i=n.itemModifierValues().length>0?Enumerable.From(n.itemModifierValues()).Max(function(e){return e.optionOrder()})+1:1;r.optionOrder(i),n.itemModifierValues.push(r)},n.deleteModifierValue=function(e){if(n.itemModifierValues.splice(n.itemModifierValues.indexOf(e),1),n.defaultOption()==e.optionOrder()){var t=n.itemModifierValues().length>0?Enumerable.From(n.itemModifierValues()).Min(function(e){return e.optionOrder()}):1;n.defaultOption(t.toString())}},n.toPlainObject=function(){var e=JSON.parse(t.toJSON(n));return e.itemModifierValues=Enumerable.From(n.itemModifierValues()).Select(function(e){return e.toPlainObject()}).ToArray(),e},n.toItemModifier=function(){var e=r.createNew();e.id(n.id()),e.referenceId(n.referenceId()),e.name(n.name()),e.isActive(n.isActive()),e.order(n.order()),e.defaultOption(n.defaultOption().toString()),e.itemModifierTypeCode(n.itemModifierTypeCode());var t=Enumerable.From(n.itemModifierValues()).Select(function(e){return e.toItemModifierValue()}).ToArray();return e.modifierValues(t),e},n.sortItemModifierValues=function(){n.itemModifierValues.sort(O)}}function l(e){var n=this;n.id=t.observable(),n.itemModifierId=t.observable(e),n.names=t.observableArray().extend({required:!0}),n.dimantion=-1,u(n,e),n.findNameByLang=function(e){return e=e.toUpperCase(),n.names().find(function(t){return t.languageId===e})},n.findNameIndexByLang=function(e){return e=e.toUpperCase(),n.names().findIndex(function(t){return t.languageId===e})},n.findNameByLangAndValue=function(e,t){return e=e.toUpperCase(),n.names().find(function(n){return n.languageId===e&&n.name()===t})},n.findNameIndexByLangAndValue=function(e,t){return e=e.toUpperCase(),n.names().findIndex(function(n){return n.languageId===e&&n.name()===t})},n.modPrices=t.observableArray([]),n.optionOrder=t.observable().extend({required:!0}),n.itemSellingPrice=t.observable(a.createNew(e)),n.price=t.observable(0).extend({amount:!0}).extend({number:!0,range:{message:t.T("repositories/itemSellingPricesRepository.price_should_be_in_range_of_-100000_to_100000"),params:{maxValue:1e5,minValue:-1e5,includeMinValue:!0}}}),n.selectedStoreId=t.observable(null),n.modPrice=t.pureComputed({read:function(){if(n.selectedStoreId()&&"All"!=n.selectedStoreId()){var e=null;return n.modPrices().forEach(function(t){t.businessUnitId==n.selectedStoreId()&&(e=t.unitPrice())}),e}return n.price()},write:function(e){n.selectedStoreId()&&"All"!=n.selectedStoreId()?n.modPrices().forEach(function(t){t.businessUnitId==n.selectedStoreId()&&t.unitPrice(e)}):(n.price(e),n.modPrices().forEach(function(t){t.unitPrice(e)}))},owner:this}).extend({number:!0,range:{message:t.T("repositories/itemSellingPricesRepository.price_should_be_in_range_of_-100000_to_100000"),params:{maxValue:1e5,minValue:-1e5,includeMinValue:!0}}}),n.toPlainObject=function(){var e=JSON.parse(t.toJSON(n));return e.modPrices=n.modPrices().map(function(e){return e.toPlainObject()}),e},n.toItemModifierValue=function(){var e=i.createNew();return e.id(n.id()),e.itemModifierId(n.itemModifierId()),e.optionOrder(n.optionOrder()),e.itemSellingPrice(n.itemSellingPrice()),e},n.price.subscribe(function(e){n.itemSellingPrice()&&n.itemSellingPrice().unitPrice(e)})}function d(e){return c.createFromServerEntity(e)}function p(e){return new c(e)}function m(e,n){var r=c.createFromServerEntity(t.mapping.toJS(e),n);return r.errors=t.validation.group(r),r}function f(e){var t=p(e);return t.itemModifierTypeCode(0),t.addModifierValue(e),t.order(0),t}function y(e){var t=p(e);return t.itemModifierTypeCode(1),t.addModifierValue(e),t.order(0),t}function v(e){var t=p(e);return t.itemModifierTypeCode(2),t.addModifierValue(e),t.order(0),t}function b(){var t=[];return e.ajax({type:"GET",url:A,async:!1,data:{id:n.enterpriseId,lang:o.getLang().toUpperCase(),defaultLang:o.getDefaultLang().toUpperCase()},success:function(e){t=Enumerable.From(e).Select(function(e){return c.createFromServerEntity(e)}).ToArray()}}),t}function g(){return n.getEnterpriseId().then(function(t){return e.ajax({type:"GET",url:A,data:{id:t,lang:o.getLang().toUpperCase(),defaultLang:o.getDefaultLang().toUpperCase()},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return c.createFromServerEntity(e)}).ToArray()})})}function h(t){var n=null;return e.ajax({type:"GET",url:j,data:{id:t},async:!1,success:function(e){n=c.createFromServerEntity(e)}}),n}function T(t){return e.ajax({type:"GET",url:j,data:{id:t},async:!0}).then(function(e){return c.createFromServerEntity(e)})}function I(e){!e.isGroupModifier()&&e.itemModifierValues()&&e.itemModifierValues()[0].names().forEach(function(t){var n=e.names().filter(function(e){return e.languageId===t.languageId});n&&n.length&&t.name(n[0].name())})}function x(t){I(t);var n=null;return e.ajax({type:"POST",dataType:"json",contentType:"application/json",url:F,data:JSON.stringify(t.toPlainObject()),async:!1,success:function(e){n=c.createFromServerEntity(e)},error:function(e){n={isSuccess:!1,message:e.responseText}}}),n}function S(t){return I(t),e.ajax({type:"POST",dataType:"json",contentType:"application/json",url:F,data:JSON.stringify(t.toPlainObject()),async:!0}).then(function(e){return c.createFromServerEntity(e)},function(e){return{isSuccess:!1,message:e.responseText}})}function E(t){return t&&"Array"===t.constructor.name&&t.forEach(function(e){I(e)}),e.ajax({type:"POST",dataType:"json",contentType:"application/json",url:P,data:JSON.stringify(t.map(function(e){return e.toPlainObject()})),async:!0}).then(function(e){return e&&"Array"===e.constructor.name?e.map(function(e){return c.createFromServerEntity(e)}):e},function(e){return{isSuccess:!1,message:e.responseText}})}var A="api/Modifiers/GetAllModifiersByReference",j="api/Modifiers/GetModifierById",F="api/Modifiers/Save",P="api/Modifiers/SaveList",O=function(e,t){return e.languageId<t.languageId?-1:e.languageId>t.languageId?1:0};return c.createFromServerEntity=function(e,r){if(null==e)return null;var i=o.getLang().toUpperCase(),a=o.getDefaultLang().toUpperCase(),s=new c;if(s.dimantion=e.dimantion,s.id(e.id),s.referenceId(e.referenceId),s.name(e.name||""),e.names){var d=Enumerable.From(e.names).Where(function(e){return e.languageId===a}).FirstOrDefault();d&&s.name(d.name)}else e.names=[];var p,m=[];return s.names.removeAll(),e.names.sort(O),e.names.forEach(function(e){p||(p=e.objectId);var r={id:e.id,objectId:e.objectId,languageId:e.languageId,language:e.language,name:t.observable(e.name)};n.defaultLanguage&&e.languageId==n.defaultLanguage&&r.name.extend({required:{message:t.T("common.thisFieldIsRequired")}}),s.names.push(r),e.languageId===i&&e.name&&s.name(e.name),m.push(e.languageId)}),u(s,p,m),s.order(e.order),s.defaultOption(e.defaultOption.toString()),s.isActive(e.isActive),s.itemModifierTypeCode(e.itemModifierTypeCode),e.itemModifierValues&&s.itemModifierValues(e.itemModifierValues.map(function(e){return l.createFromServerEntity(e,r)})),s},l.createFromServerEntity=function(e,r){if(null==e)return null;var i=new l;if(i.id(e.id),i.itemModifierId(e.itemModifierId),i.selectedStoreId(r),i.dimantion=e.dimantion,e.names){var o,c=[];i.names.removeAll(),e.names.sort(O),e.names.forEach(function(e){o||(o=e.objectId);var r={id:e.id,objectId:e.objectId,languageId:e.languageId,language:e.language,name:t.observable(e.name)};n.defaultLanguage&&e.languageId==n.defaultLanguage&&r.name.extend({required:{message:t.T("common.thisFieldIsRequired")}}),i.names.push(r),c.push(e.languageId)}),u(i,o,c)}var d=[];return e.modPrices&&(d=e.modPrices.map(function(e){return s.createFromServerEntity(e)})),i.modPrices(d),i.optionOrder(e.optionOrder),i.itemSellingPrice(a.createFromServerEntity(e.itemSellingPrice)),i.price(e.price||0),i},{createFromServerEntity:d,createNew:p,createCopy:m,createNewGroupModifierTemplate:f,createNewAddOnModifierTemplate:y,createNewExceptionModifierTemplate:v,loadAll:b,loadAllAsync:g,loadById:h,loadByIdAsync:T,save:x,saveAsync:S,saveList:E}});
define('repositories/presentationApi/ordersRepository',["data/config","services/text"],function(e,t){function n(n){return $.get(n,{enterpriseId:e.enterpriseId,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()})}function r(){return n(s)}function i(){return n(u)}function a(){return n(c)}function o(e,n,r,i,a,o){var s={startDate:e,endDate:n,stores:r,agancyId:i,sortColumn:a,isAsc:o,lang:t.getLang().toUpperCase(),defaultLang:t.getDefaultLang().toUpperCase()};return $.post(l,s)}var s="api/Transaction/LoadFulfillmentStatuses",u="api/Transaction/LoadPaymentStatuses",c="api/Transaction/LoadOrderTypes",l="api/Transaction/GetTaxReport";return{loadFulfillments:r,loadPaymentStatuses:i,loadOrderTypes:a,loadTaxReport:o}});
define('repositories/presentationApi/productsRepository',["knockout","data/config","repositories/presentationApi/modifiersRepository","repositories/picturesRepository","repositories/vendorsRepository","repositories/vendorItemsRepository","repositories/departmentsRepository","repositories/itemsRepository","services/text","models/buItemModel","models/variantModel"],function(e,t,r,n,a,i,o,s,u,c,l){function d(){var t=this;t.id=e.observable(),t.productCode=e.observable(),t.name=e.observable(),t.category=e.observable(),t.cost=e.observable(),t.price=e.observable(),t.quantity=e.observable(),t.isActive=e.observable(!0),t.upc=e.observable(),t.margin=e.computed(function(){return null==t.cost()||0==t.cost()||null==t.price()?null:100*(t.price()-t.cost())/t.cost()}),t.inventoryValue=e.computed(function(){return t.price()&&t.quantity()?t.price()*t.quantity():0})}function p(){var e=[];return $.ajax({type:"POST",url:C,async:!1,data:{id:t.enterpriseId},success:function(t){e=Enumerable.From(t).Select(function(e){return d.createFromServerEntity(e)}).ToArray()}}),e}function m(){return t.getEnterpriseId().then(function(e){return $.ajax({type:"POST",data:{id:e,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return d.createFromServerEntity(e)}).ToArray()})})}function f(){var t=this;t.itemId=e.observable(),t.enterpriseId=e.observable(),t.inventoryType=e.observable(0),t.names=[],t.lobId=e.observable(),t.categoryId=e.observable(),t.upc=e.observable(),t.isActive=e.observable(),t.productImage=e.observable(),t.departments=e.observableArray(),t.categories=e.observableArray(),t.serialNumbers=e.observableArray(),t.variants=e.observableArray(),t.productType=e.observable(),t.itemSellingPriceId=e.observable(),t.isManualPrice=e.observable(),t.unitOfMeasureId=e.observable(),t.salesPrice=e.observable(),t.isTaxable=e.observable(),t.isDiscountable=e.observable(),t.unitsOfMeasure=e.observableArray(),t.color=e.observable(),t.modifierTypes=e.observableArray(),t.modifierTemplates=e.observableArray(),t.itemModifiers=e.observableArray(),t.vendors=e.observableArray(),t.vendorItems=e.observableArray(),t.activeVendors=e.computed(function(){var r=t.vendors();return r?r.filter(function(t){return e.unwrap(t.isActive)}):[]}),t.itemInventoryId=e.observable(),t.quantity=e.observable(),t.minQuantity=e.observable(),t.recommendedQuantity=e.observable(),t.buItems=e.observableArray(),t.serialNumbers=[],t.taxList=e.observableArray(),t.appsData={},t.toPlainObject=function(){var r=JSON.parse(e.toJSON(t));r.productImage=null!=t.productImage()?t.productImage().toPlainObject():null;var n=Enumerable.From(t.variants()).Select(function(e){return e.toPlainObject()}).ToArray();return r.jsonVariants=JSON.stringify(n),r.itemModifiers=Enumerable.From(t.itemModifiers()).Select(function(e){return e.toPlainObject()}).ToArray(),r.vendorItems=Enumerable.From(t.vendorItems()).Select(function(e){return e.toPlainObject()}).ToArray(),r.buItems=Enumerable.From(t.buItems()).Select(function(e){return e.toPlainObject()}).ToArray(),r}}function y(){var e=new f;return e}function v(){var e=null;return $.ajax({type:"GET",url:D,data:{id:t.enterpriseId,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!1,success:function(t){e=f.createFromServerEntity(t)}}),e}function b(){return t.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:D,data:{id:e,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!0}).then(function(e){return f.createFromServerEntity(e)})})}function g(e){var t=null;return $.ajax({type:"GET",url:N,data:{id:e,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!1,success:function(e){t=f.createFromServerEntity(e)}}),t}function h(e){return $.ajax({type:"GET",url:N,data:{id:e,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!0}).then(function(e){return f.createFromServerEntity(e)})}function T(e){var t=!1;return $.ajax({type:"POST",dataType:"json",contentType:"application/json",url:q,data:JSON.stringify(e.toPlainObject()),async:!1,success:function(e){t=e}}),t}function I(e){return $.ajax({type:"POST",dataType:"json",contentType:"application/json",url:q,data:JSON.stringify(e.toPlainObject()),async:!0})}function x(e,t){return $.ajax({type:"POST",url:w,data:{searchString:e,storeOutId:t,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!0})}function S(e,t,r){return t||(t=null),$.ajax({type:"GET",url:_,data:{itemId:e,vendorId:t,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase(),isPoTransfer:!!r},async:!0})}function E(e,t,r,n,a){return n||(n=null),$.ajax({type:"GET",url:V,data:{itemId:e,query:t,storeOutId:r,vendorId:n,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase(),isPoTransfer:!!a},async:!0})}function A(e,t,r,n,a){return t||(t=null),$.ajax({type:"GET",url:U,data:{searchString:e,vendorId:t,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase(),isPoTransfer:!!r,pageNo:n,pageSize:a}})}function j(e){return $.ajax({type:"POST",dataType:"json",contentType:"application/json",url:G,data:JSON.stringify(e),async:!0})}function P(e){return $.ajax({type:"POST",dataType:"json",contentType:"application/json",url:B,data:JSON.stringify(e),async:!0})}function F(e){return $.ajax({type:"GET",url:R,data:{id:e,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!0})}function O(e){return $.ajax({type:"POST",url:J,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"})}function k(){return $.ajax({type:"GET",url:L,data:{enterpriseId:t.enterpriseId,lang:u.getLang().toUpperCase(),defaultLang:u.getDefaultLang().toUpperCase()},async:!0})}function M(e){return $.ajax({type:"POST",url:Q,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"})}var C="api/Products/GetAllProductsByEnterprise",L="api/Products/GetMenuBuilder",N="api/Products/GetProductById",q="api/Products/Save",D="api/Products/Create",w="api/Products/Search",_="api/Products/GetInventoryTransferLine",U="api/Products/GetInventoryTransferLines",V="api/Products/FindAndGetInventoryTransferLine",G="api/Products/StoreTransfer",B="api/Products/POReceiving",R="api/Products/StoreTransferDetails",J="api/Products/RemoveMany",Q="api/Products/SaveMenuBuilder";d.createFromServerEntity=function(e){if(null==e)return null;var t=new d;return t.id(e.id),t.productCode(e.productCode),t.name(e.name),t.category(e.category),t.cost(e.cost),t.price(e.price),t.quantity(e.quantity),t.isActive(e.isActive),t.upc(e.upc),t};var z=function(e,t){return e.languageId<t.languageId?-1:e.languageId>t.languageId?1:0};return f.createFromServerEntity=function(u){if(null==u)return null;var d=new f;d.itemId(u.itemId),d.enterpriseId(u.enterpriseId),d.inventoryType(u.inventoryType),d.names=u.names,d.names&&d.names.sort(z),d.lobId(u.lobId),d.categoryId(u.categoryId),d.upc(u.upc),d.isActive(u.isActive);var p=n.createFromServerEntity(u.productImage);d.productImage(p);var m=Enumerable.From(u.departments).Select(function(e){return o.createFromServerEntity(e)}).ToArray();d.departments(m),d.itemSellingPriceId(u.itemSellingPriceId),d.isManualPrice(u.isManualPrice),d.unitOfMeasureId(u.unitOfMeasureId),d.salesPrice(u.salesPrice),d.isTaxable(u.isTaxable),d.isDiscountable(u.isDiscountable),d.color(u.color),d.productType(u.productType);var y=Enumerable.From(u.unitsOfMeasure).Select(function(e){return s.createUnitOfMeasureFromServerEntity(e)}).ToArray();d.unitsOfMeasure(y),d.modifierTypes(u.modifierTypes);var v=Enumerable.From(u.modifierTemplates).Select(function(e){return r.createFromServerEntity(e)}).ToArray();d.modifierTemplates(v);var b=Enumerable.From(u.itemModifiers).Select(function(e){return r.createFromServerEntity(e)}).ToArray();d.itemModifiers(b);var g=Enumerable.From(u.vendors).Select(function(e){return a.createFromServerEntity(e)}).ToArray();d.vendors(g),d.quantity(0);var h=JSON.parse(u.jsonVariants);if(h)for(var T=0;T<h.length;T++){var I=h[T];d.variants.push(l.createFromServerEntity(I,d,!0))}var x=t.stores.map(function(e){return e.id}),S=Enumerable.From(u.buItems).Select(function(e){return x.includes(e.businessUnitId)&&d.quantity(d.quantity()+e.onHandQuantity),c.createFromServerEntity(e,d)}).ToArray();if(d.buItems(S),S.length>0)for(var E=0;E<S[0].variants().length;E++)S[0].variants()[E].recalcQuantity();d.taxList=e.observableArray(u.taxList);var A=Enumerable.From(u.vendorItems).Select(function(e){var t=Enumerable.From(g).SingleOrDefault(null,function(t){return t.id()==e.vendorId});return e.vendorObject=t,i.createFromServerEntity(e)}).ToArray();return d.vendorItems(A),d.itemInventoryId(u.itemInventoryId),d.minQuantity(u.minQuantity),d.recommendedQuantity(u.recommendedQuantity),d.appsData=u.appsData,d.serialNumbers=u.serialNumbers,d},{getAllProductsUrl:C,createNewProduct:y,createNew:v,createNewAsync:b,loadAll:p,loadAllAsync:m,loadListForMenuBuilder:k,loadById:g,loadByIdAsync:h,save:T,saveAsync:I,removeMany:O,search:x,getInventoryTransferLine:S,getInventoryTransferLines:A,findAndGetInventoryTransferLine:E,storeTransfer:j,poReceiving:P,storeTransferDetails:F,saveMenuBuilder:M}});
define('repositories/registerEmployeeRepository',["knockout","data/config"],function(e,t){function r(){var t=this;t.id=e.observable(),t.registerId=e.observable(),t.employeeId=e.observable(),t.errors=e.validation.group(t),t.toPlainObject=function(){var t=["id","registerId","deviceId"];return JSON.parse(e.toJSON(this,t))}}function n(){var e=[];return $.ajax({type:"GET",url:c,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),e}function a(){return $.ajax({type:"GET",url:c,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})}function i(e){var t=!1;return $.ajax({type:"POST",url:l,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function o(e){return $.ajax({type:"POST",url:l,data:e.toPlainObject(),async:!0})}function s(e){var t=!1,r=d+"/"+e.id();return $.ajax({type:"DELETE",url:r,data:null,async:!1,success:function(){t=!0}}),t}function u(e){var t=d+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}var c="api/Business/GetRegisterEmployeeByEnterprise",l="api/Business/SaveRegisterEmployee",d="api/Business/RemoveRegisterEmployee";return r.createFromServerEntity=function(e){if(null==e)return null;var t=new r;return t.id(e.id),t.registerId(e.registerId),t.employeeId(e.employeeId),t},{loadAll:n,loadAllAsync:a,save:i,saveAsync:o,remove:s,removeAsync:u}});
define('repositories/registerDeviceRepository',["knockout","data/config"],function(e,t){function r(){var t=this;t.id=e.observable(),t.registerId=e.observable(),t.deviceId=e.observable(),t.errors=e.validation.group(t),t.toPlainObject=function(){var t=["id","registerId","deviceId"];return JSON.parse(e.toJSON(this,t))}}function n(){var e=[];return $.ajax({type:"GET",url:c,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),e}function a(){return $.ajax({type:"GET",url:c,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})}function i(e){var t=!1;return $.ajax({type:"POST",url:l,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function o(e){return $.ajax({type:"POST",url:l,data:e.toPlainObject(),async:!0})}function s(e){var t=!1,r=d+"/"+e.id();return $.ajax({type:"DELETE",url:r,data:null,async:!1,success:function(){t=!0}}),t}function u(e){var t=d+"/"+e.id();$.ajax({type:"DELETE",url:t,data:null,async:!0})}var c="api/Business/GetRegisterDeviceByEnterprise",l="api/Business/SaveRegisterDevice",d="api/Business/RemoveRegisterDevice";return r.createFromServerEntity=function(e){if(null==e)return null;var t=new r;return t.id(e.id),t.registerId(e.registerId),t.deviceId(e.deviceId),t},{loadAll:n,loadAllAsync:a,save:i,saveAsync:o,remove:s,removeAsync:u}});
define('repositories/registerRepository',["knockout","data/config","repositories/registerEmployeeRepository","repositories/employeeRepository","repositories/deviceRepository","repositories/registerDeviceRepository"],function(e,t,r,n,a,i){function o(){var r=this;r.id=e.observable(),r.name=e.observable().extend({required:!0}),r.isActive=e.observable(!0),r.businessUnitId=e.observable(t.businessUnitId).extend({required:!0}),r.registerNumber=e.observable(0),r.businessUnitName=e.observable(""),r.employees=e.observableArray([]),r.devices=e.observableArray([]),r.stores=e.observableArray([]),r.transactionSequenceNumber=e.observable(),r.errors=e.validation.group(r),r.toPlainObject=function(){return{id:r.id(),name:r.name(),isActive:r.isActive(),businessUnitId:r.businessUnitId(),employees:Enumerable.From(r.employees()).Select(function(e){return e.toPlainObject()}).ToArray(),devices:Enumerable.From(r.devices()).Select(function(e){return e.toPlainObject()}).ToArray(),registerNumber:r.registerNumber(),transactionSequenceNumber:r.transactionSequenceNumber()}}}function s(){return new o}function u(e){return o.createFromServerEntity(e)}function c(){var e=[];return $.ajax({type:"GET",url:g,async:!1,data:{id:t.enterpriseId},success:function(t){e=Enumerable.From(t).Select(function(e){return o.createFromServerEntity(e)}).ToArray()}}),e}function l(){return t.getEnterpriseId().then(function(){return $.ajax({type:"GET",url:g,data:{id:t.enterpriseId},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return o.createFromServerEntity(e)}).ToArray()})})}function d(e){var t=null;return $.ajax({type:"GET",url:h,data:{id:e},async:!1,success:function(e){t=o.createFromServerEntity(e)}}),t}function p(e){return $.ajax({type:"GET",url:h,data:{id:e},async:!0}).then(function(e){return o.createFromServerEntity(e)})}function m(e){var t=!1;return $.ajax({type:"POST",url:T,data:e.toPlainObject(),async:!1,success:function(){t=!0}}),t}function y(e){return $.ajax({type:"POST",url:T,data:e.toPlainObject(),async:!0})}function f(e){var t=!1,r=I+"/"+e.id();return $.ajax({type:"DELETE",url:r,data:null,async:!1,success:function(){t=!0}}),t}function v(e){var t=I+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}function b(e,t){return $.ajax({type:"POST",url:x,data:{registerName:e,businessUnitId:t},async:!0})}var g="api/Register/GetByEnterprise",h="api/Register/GetById",T="api/Register/Save",I="api/Register/Remove",x="api/Register/NewRegister";return o.createFromServerEntity=function(e){var t=s();return t.id(e.id),t.name(e.name),t.isActive(e.isActive),t.businessUnitId(e.businessUnitId),t.registerNumber(e.registerNumber),t.transactionSequenceNumber(e.transactionSequenceNumber),t.businessUnitName(e.businessUnitName),null!=e.devices&&e.devices.length>0&&e.devices.forEach(function(e){t.devices.push(a.Device.createFromServerEntity(e))}),null!=e.employees&&e.employees.length>0&&e.employees.forEach(function(e){t.employees.push(n.Employee.createFromServerEntity(e))}),t.stores(e.stores),t},{createNew:s,createFromServerEntity:u,loadAll:c,loadAllAsync:l,loadById:d,loadByIdAsync:p,save:m,saveAsync:y,remove:f,removeAsync:v,newRegister:b}});
define('repositories/presentationApi/registersRepository',["knockout","data/config","repositories/registerRepository","repositories/employeeRepository","repositories/deviceRepository"],function(e,t,r,n,a){function i(){var e={PR:{controlNumberToken:{type:"string",value:""}}};return e}function o(e){var r=i(),n=$.Deferred();return t.fetchConfig().then(function(){var a=r[t.countryId];a&&Object.keys(a).forEach(function(t){e[t]||(e[t]=a[t].value)}),n.resolve(e)}),n.promise()}function s(){var t=this;t.id=e.observable(),t.name=e.observableArray().extend({required:!0}),t.isActive=e.observable(!0),t.businessUnitId=e.observable().extend({required:!0}),t.businessUnitCountryId=e.observable(),t.registerNumber=e.observable(),t.isBlocked=e.observable(),t.employees=e.observableArray([]),t.devices=e.observableArray([]),t.allEmployees=e.observableArray([]),t.allDevices=e.observableArray([]),t.stores=e.observableArray([]),t.paymentGatewayTypeCode=e.observable(),t.paymentGatewaySourceKey=e.observable(),t.paymentGatewayPin=e.observable(),t.ebtCardEnabled=e.observable(),t.debitCardEnabled=e.observable(),t.allPaymentGatewayTypes=e.observableArray([]),t.allRegisters=e.observableArray([]),t.posLanguageId=e.observable(),t.kitchenReceiptLanguageId=e.observable(),t.languages=e.observableArray(),t.dateFormatId=e.observable(),t.dateFormats=e.observableArray(),t.timeFormatId=e.observable(),t.timeFormats=e.observableArray(),o({}).then(function(r){t.properties=e.mapping.fromJS(r)}),t.toPlainObject=function(){return{id:t.id(),name:t.name(),isActive:t.isActive(),isBlocked:t.isBlocked(),businessUnitId:t.businessUnitId(),employees:Enumerable.From(t.employees()).Where(function(e){return null!==e}).Select(function(e){return e.toPlainObject()}).ToArray(),devices:Enumerable.From(t.devices()).Select(function(e){return e.toPlainObject()}).ToArray(),registerNumber:t.registerNumber(),paymentGatewayTypeCode:t.paymentGatewayTypeCode(),paymentGatewaySourceKey:t.paymentGatewaySourceKey(),paymentGatewayPin:t.paymentGatewayPin(),ebtCardEnabled:t.ebtCardEnabled(),debitCardEnabled:t.debitCardEnabled(),posLanguageId:t.posLanguageId(),kitchenReceiptLanguageId:t.kitchenReceiptLanguageId(),dateFormatId:t.dateFormatId(),timeFormatId:t.timeFormatId(),properties:t._propertiesToPlain()}},t._propertiesToPlain=function(){return e.mapping.toJS(t.properties,{ignore:["__ko_mapping__"]})}}function u(e,t,n){return $.ajax({type:e||"GET",url:m,data:t,async:!0}).then(function(e){return n?e:Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})}function c(){return $.Deferred().resolve(new s).promise()}function l(e){return $.ajax({type:"GET",url:f,data:{id:e},async:!0}).then(function(e){return s.createFromServerEntity(e)})}function d(e){return $.ajax({type:"POST",dataType:"json",contentType:"application/json",url:y,data:JSON.stringify(e.toPlainObject()),async:!0}).then(function(e){return e})}function p(e){return $.ajax({type:"POST",url:v+e,contentType:"application/json"})}var m="api/Register/GetAllRegistersByEnterprise",f="api/Register/GetById",y="api/Register/Save",v="api/Register/Deactivate/";return s.createFromServerEntity=function(t){if(null==t)return null;var i=new s;return i.id(t.id),i.businessUnitId(t.businessUnitId),i.businessUnitCountryId(t.businessUnitCountryId),i.name(t.name),i.isActive(t.isActive),i.isBlocked(t.isBlocked),i.registerNumber(t.registerNumber),null!=t.devices&&t.devices.length>0&&t.devices.forEach(function(e){i.devices.push(a.Device.createFromServerEntity(e))}),null!=t.employees&&t.employees.length>0&&t.employees.forEach(function(e){i.employees.push(n.Employee.createFromServerEntity(e))}),null!=t.allDevices&&t.allDevices.length>0&&t.allDevices.forEach(function(e){i.allDevices.push(a.Device.createFromServerEntity(e))}),null!=t.allEmployees&&t.allEmployees.length>0&&t.allEmployees.forEach(function(e){i.allEmployees.push(n.Employee.createFromServerEntity(e))}),null!=t.allRegisters&&t.allRegisters.length>0&&t.allRegisters.forEach(function(e){i.allRegisters.push(r.createFromServerEntity(e))}),i.stores(t.stores),i.paymentGatewayTypeCode(t.paymentGatewayTypeCode),i.paymentGatewaySourceKey(t.paymentGatewaySourceKey),i.paymentGatewayPin(t.paymentGatewayPin),i.debitCardEnabled(t.debitCardEnabled),i.ebtCardEnabled(t.ebtCardEnabled),i.allPaymentGatewayTypes(t.allPaymentGatewayTypes),i.posLanguageId(t.posLanguageId),i.kitchenReceiptLanguageId(t.kitchenReceiptLanguageId),i.languages(t.languages),i.dateFormatId(t.dateFormatId),i.dateFormats(t.dateFormats),i.timeFormatId(t.timeFormatId),i.timeFormats(t.timeFormats),e.mapping.fromJS(t.properties,i.properties),i},{createNew:c,loadAll:u,loadById:l,save:d,deactivate:p}});
define('repositories/presentationApi/shiftsRepository',[],function(){function e(e){return $.ajax({type:"GET",url:r,data:{id:e},async:!0})}var t="api/Shifts/GetAllShiftsByEnterprise",r="api/Shifts/Get";return{getAllShiftsUrl:t,loadById:e}});
define('repositories/presentationApi/storesRepository',["knockout","data/config","services/text","models/taxModel"],function(e,t,r,n){function a(){var e=c;return e?(p.indexOf(e.countryId())>-1?(e.stateMaxLength(m),e.state.extend(y)):(e.stateMaxLength(f),e.state.rules.remove(function(e){return"required"==e.rule||"pattern"==e.rule})),void 0):!1}function i(){var t=this;t.storeId=null,t.pictureId=null,t.isActive=e.observable(),t.enterpriseCode=e.observable(),t.enterpriseId=e.observable(),t.businessUnitType=e.observable(),t.businessUnitTypes=e.observableArray(),t.showOrderType=e.observable(),t.ebtTaxExemption=e.observable(),t.notesMode=e.observable(),t.autoLogoutAfterOrder=e.observable(),t.syncOnLogin=e.observable(),t.openCashDrawerCC=e.observable(),t.externalPayment=e.observable(),t.printTaxList=e.observable(),t.generalTabErrors=e.validation.group([t.enterpriseCode,t.businessUnitType,t.showOrderType,t.notesMode,t.printTaxList]),t.storeName=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")},minLength:0,maxLength:100}),t.address1=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")}}),t.address2=e.observable(),t.city=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")},minLength:0,maxLength:255}),t.state=e.observable().extend(y),t.isStateRequired=e.observable(!0),t.stateMaxLength=e.observable(2),t.countryChange=a,t.zip=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")},pattern:{message:e.T("repositories/presentationApi/storesRepository.invalid_zip"),params:/^[a-z0-9]+$/i}}),t.countryId=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")}}),t.countries=e.observableArray(),t.phone=e.observable().extend({phone:{required:!0},phoneNumber:!0}),t.email=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")},email:!0}),t.web=e.observable().extend({website:!0}),t.contactsTabErrors=e.validation.group([t.storeName,t.address1,t.address2,t.city,t.state,t.zip,t.countryId,t.phone.phone,t.email,t.web]),t.kitchenReceipt=e.observable(),t.tipsSignatureSettings=e.observableArray(),t.signatureOnReceipt=e.observable(),t.receiptTemplate=e.observable(),t.footers=e.observableArray(),t.receiptTabErrors=e.validation.group([t.kitchenReceipt,t.signatureOnReceipt,t.receiptTemplate]),t.footer=e.observable(),t.tips=e.observable(),t.tipsOnCreditCardAuth=e.observable().extend({percentExt:!0}),t.tipsMoneyValues=e.pureComputed({read:function(){return(isNaN(t.tipsMoneyValue1())?"0":t.tipsMoneyValue1())+"|"+(isNaN(t.tipsMoneyValue2())?"0":t.tipsMoneyValue2())+"|"+(isNaN(t.tipsMoneyValue3())?"0":t.tipsMoneyValue3())},write:function(e){null==e&&(e="");var r=e.length>0?e.split("|"):[];try{var n=r.length>0?parseFloat(r[0]):0;t.tipsMoneyValue1(n)}catch(a){t.tipsMoneyValue1(0)}try{var i=r.length>0?parseFloat(r[1]):0;t.tipsMoneyValue2(i)}catch(a){t.tipsMoneyValue2(0)}try{var o=r.length>0?parseFloat(r[2]):0;t.tipsMoneyValue3(o)}catch(a){t.tipsMoneyValue3(0)}}}),t.tipsPercentValues=e.pureComputed({read:function(){return(isNaN(t.tipsPercentValue1())?"0":t.tipsPercentValue1())+"|"+(isNaN(t.tipsPercentValue2())?"0":t.tipsPercentValue2())+"|"+(isNaN(t.tipsPercentValue3())?"0":t.tipsPercentValue3())},write:function(e){null==e&&(e="");var r=e.split("|");t.tipsPercentValue1(r.length>0?parseFloat(r[0]):0),t.tipsPercentValue2(r.length>1?parseFloat(r[1]):0),t.tipsPercentValue3(r.length>2?parseFloat(r[2]):0)}}),t.tipsMoneyValue1=e.observable(),t.tipsMoneyValue2=e.observable(),t.tipsMoneyValue3=e.observable(),t.tipsPercentValue1=e.observable().extend({percentExt:!0}),t.tipsPercentValue2=e.observable().extend({percentExt:!0}),t.tipsPercentValue3=e.observable().extend({percentExt:!0}),t.tipsTabErrors=e.validation.group([t.tips,t.tipsOnCreditCardAuth,t.tipsMoneyValue1,t.tipsMoneyValue2,t.tipsMoneyValue3,t.tipsPercentValue1,t.tipsPercentValue2,t.tipsPercentValue3]),t.includeTaxesToPrice=e.observable(),t.storeTaxes=e.observableArray([]),t.taxes=[],t.taxesTabErrors=e.validation.group([t.storeTaxes]),t.maxTaxNumber=5,t.paymentGatewayType=e.observable(),t.paymentGatewayTypes=e.observableArray(),t.sourceKey=e.observable(),t.pin=e.observable(),t.debitCardEnabled=e.observable(),t.ebtCardEnabled=e.observable(),t.paymentTabErrors=e.validation.group([t.paymentGatewayType,t.sourceKey,t.pin]),t.posLanguageId=e.observable(),t.kitchenReceiptLanguageId=e.observable(),t.languages=e.observableArray(),t.languagesWithoutCustom=e.computed(function(){return t.languages().filter(function(e){return"C0"!=e.id})}),t.dateFormatId=e.observable(),t.dateFormats=e.observableArray(),t.timeFormatId=e.observable(),t.timeFormats=e.observableArray(),t.localizationTabErrors=e.validation.group([t.posLanguageId,t.kitchenReceiptLanguageId,t.dateFormatId,t.timeFormatId]),t.errors=e.validation.group(t,{deep:!0}),t.toPlainObject=function(){var r=JSON.parse(e.toJSON(t));return r.storeTaxes=r.storeTaxes.map(function(e){return e.id}),delete r.taxes,r},t.addTax=function(){return t.taxes.length>0?(t.storeTaxes.push(new n(t.taxes,t.taxes[0].id)),!0):!1},t.removeTax=function(e){var r=t.storeTaxes.indexOf(e);r>=0&&t.storeTaxes.splice(r,1)}}function o(e){if(e.taxes){var t=function(){return this.properties?this.properties.rate:0},r=e.taxes;r.forEach(function(e){if(e.getRate=t,e.description="",e.childTaxesIds&&e.childTaxesIds.length){var n=r.filter(function(t){return e.childTaxesIds.indexOf(t.id)>=0}).map(function(e){return e.locName});e.description=n.join(", ")}})}}function s(e){return $.ajax({type:"GET",url:l,data:{id:e,lang:r.getLang().toUpperCase(),defaultLang:r.getDefaultLang().toUpperCase()},async:!0}).then(function(e){return i.createFromServerEntity(e)})}function u(e){return e.taxId=e.storeTaxes().length>0?e.storeTaxes()[0].id():null,$.ajax({type:"POST",dataType:"json",contentType:"application/json",url:d,data:JSON.stringify(e.toPlainObject()),async:!0})}var c,l="api/Stores/Get",d="api/Stores/Save",p=["CA","US"],m=2,f=100,y={required:{message:e.T("common.thisFieldIsRequired")},pattern:{message:e.T("repositories/presentationApi/storesRepository.invalid_state"),params:/^[a-z]{2}$/i}};return i.createFromServerEntity=function(t){return null==t?null:(c=new i,c.storeId=t.storeId,c.pictureId=t.pictureId,c.isActive(t.isActive),c.enterpriseCode(t.enterpriseCode),c.enterpriseId(t.enterpriseId),c.businessUnitType(t.businessUnitType),c.businessUnitTypes(t.businessUnitTypes),c.showOrderType(t.showOrderType),c.ebtTaxExemption(t.ebtTaxExemption),c.printTaxList(t.printTaxList),c.notesMode(t.notesMode.toString()),c.autoLogoutAfterOrder(t.autoLogoutAfterOrder),c.syncOnLogin(t.syncOnLogin),c.openCashDrawerCC(t.openCashDrawerCC),c.externalPayment(t.externalPayment),c.storeName(t.storeName),c.address1(t.address1),c.address2(t.address2),c.city(t.city),c.state(t.state),c.zip(t.zip),c.countryId(t.countryId),c.countries(t.countries),c.phone(t.phone),c.email(t.email),c.web(t.web),c.footers(t.footers),c.kitchenReceipt(t.kitchenReceipt),c.tipsSignatureSettings(t.tipsSignatureSettings),c.signatureOnReceipt(t.signatureOnReceipt),c.footer(t.footer),c.receiptTemplate(t.receiptTemplate),c.tips(t.tips),c.tipsOnCreditCardAuth(t.tipsOnCreditCardAuth),c.tipsMoneyValues(t.tipsMoneyValues),c.tipsPercentValues(t.tipsPercentValues),c.taxes=t.taxes,c.taxId=t.taxId,o(c),c.includeTaxesToPrice(t.includeTaxesToPrice),c.taxId?c.storeTaxes.push(new n(c.taxes,c.taxId)):c.storeTaxes([]),c.paymentGatewayType(t.paymentGatewayType),c.paymentGatewayTypes(t.paymentGatewayTypes),c.sourceKey(t.sourceKey),c.pin(t.pin),c.debitCardEnabled(t.debitCardEnabled),c.ebtCardEnabled(t.ebtCardEnabled),c.posLanguageId(t.posLanguageId),c.kitchenReceiptLanguageId(t.kitchenReceiptLanguageId),c.languages(t.languages),c.dateFormatId(t.dateFormatId),c.dateFormats(t.dateFormats),c.timeFormatId(t.timeFormatId),c.timeFormats(t.timeFormats),c.errors=e.validation.group(c),a(),c)},{get:s,save:u}});
define('repositories/presentationApi/taxAgenciesRepository',["common/utils","repositories/base/basePresentationRepository"],function(e,t){function r(){r.superclass.constructor.apply(this,arguments),this.getUrl="api/TaxAgencies/Get",this.getByIdUrl="api/TaxAgencies/GetById",this.saveUrl="api/TaxAgencies/Save",this.createUrl="api/TaxAgencies/Create",this.removeUrl="api/TaxAgencies/Remove",this.removeManyUrl="api/TaxAgencies/RemoveMany"}return e.extend(r,t),$.extend(r.prototype,{removeMany:function(e){return $.ajax({type:"POST",url:this.removeManyUrl,data:JSON.stringify(e),contentType:"application/json; charset=utf-8",dataType:"json"})}}),new r});
define('repositories/presentationApi/taxesRepository',["common/utils","repositories/base/basePresentationRepository"],function(e,t){function r(){r.superclass.constructor.apply(this,arguments),this.getUrl="api/Taxes/Get",this.getByIdUrl="api/Taxes/GetById",this.saveUrl="api/Taxes/Save",this.createUrl="api/Taxes/Create",this.removeUrl="api/Taxes/Remove"}return e.extend(r,t),new r});
define('repositories/presentationApi/transactionsReportRepository',["knockout","data/config"],function(){function e(){return $.ajax({type:"GET",url:t,async:!0})}var t="api/payment/TranReportFilterData";return{loadFilterData:e}});
define('repositories/productMixReportRepository',["knockout","data/config","services/text"],function(e,t,r){function n(e,n){return t.getEnterpriseId().then(function(t){return $.ajax({type:"POST",url:a,data:{id:t,lang:r.getLang().toUpperCase(),defaultLang:r.getDefaultLang().toUpperCase(),cashTerminalName:r.getString("reports/productMixReport.terminal0"),creditCardTerminalName:r.getString("reports/productMixReport.terminal2"),pagingRequest:e},async:!0}).then(function(e){return e||(e=i),e.searchNum=n,e})})}var a="api/ProductMixReport/GetAllProductsByEnterprise",i={total:{rowCount:0,quantity:0,quantitySold:0,minQuantity:0,sold:0,netSales:0,salesTax:0},recordsTotal:0,recordsFiltered:0,data:[]};return{getAllProductsUrl:a,loadAllAsync:n}});
define('repositories/salesTransactionsRepository',["knockout","services/text"],function(e,t){function r(){var t=this;t.categoryName=e.observable(),t.totalSales=e.observable(),t.percent=e.observable(),t.totalSalesByTransaction=e.observable(),t.photo=e.observable()}function n(e){return e.lang=t.getLang().toUpperCase(),e.defaultLang=t.getDefaultLang().toUpperCase(),$.ajax({type:"POST",url:a,data:e,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})}var a="api/Business/GetSalesByCategory";return r.createFromServerEntity=function(e){var t=new r;return t.categoryName(e.categoryName),t.totalSales(e.totalSales),t.totalSalesByTransaction(e.totalSalesByTransaction),t},{loadAllAsync:n}});
define('repositories/statsRepository',["knockout","plugins/http","data/common"],function(e){function t(){var t=this;t.newCustomers=e.observable(0),t.repeatCustomers=e.observable(0),t.totalSales=e.observable(0),t.totalTransactions=e.observable(0),t.refunds=e.observable(0)}function r(){return new t}function n(e,t,r,n,i){var o={startDate:e,endDate:t,enterpriseId:r,stores:n};return $.ajax({type:"POST",url:a,data:o,async:!0}).then(function(e){i(e)})}var a="api/Business/GetStats";return t.prototype.createFromServerEntity=function(e){var t=r();return t.newCustomers(e.newCustomers),t.repeatCustomers(e.repeatCustomers),t.totalSales(e.totalSales),t.totalTransactions(e.totalTransactions),t.refunds(e.refunds),t},t.prototype.fillFromEntity=function(e){var t=this;return t.newCustomers(e.newCustomers),t.repeatCustomers(e.repeatCustomers),t.totalSales(e.totalSales),t.totalTransactions(e.totalTransactions),t.refunds(e.refunds),t},{loadStats:n,createNew:r}});
define('repositories/supportTeamMemberRepository',["knockout"],function(e){function t(){var t=this;t.id=e.observable(),t.firstName=e.observable(),t.lastName=e.observable(),t.email=e.observable(),t.fullName=e.computed(function(){return t.firstName()+" "+t.lastName()}),t.description=e.observable(),t.photo=e.observable()}function r(){var e=[];return $.ajax({type:"GET",url:o,async:!1,success:function(r){e=Enumerable.From(r).Select(function(e){return t.createFromServerEntity(e)}).ToArray()}}),e}function n(){return $.ajax({type:"GET",url:o,async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return t.createFromServerEntity(e)}).ToArray()})}function a(e){var r=null;return $.ajax({type:"GET",url:o,data:{id:e},async:!1,success:function(e){r=t.createFromServerEntity(e)}}),r}function i(e){return $.ajax({type:"GET",url:o,data:{id:e},async:!0}).then(function(e){return t.createFromServerEntity(e)})}var o="api/Business/GetSupportTeamMembers";return t.createFromServerEntity=function(e){var r=new t;return r.id(e.id),r.firstName(e.firstName),r.email(e.email),r.lastName(e.lastName),r.description(e.description),r.photo("data:image/jpeg;base64,"+e.photo),r},{loadAllSupportTeamMembers:r,loadAllSupportTeamMembersAsync:n,loadSupportTeamMemberById:a,loadSupportTeamMemberByIdAsync:i}});
define('repositories/taskItemsRepository',["knockout","data/config"],function(e,t){function r(){var r=this;r.id=e.observable(),r.taskItemId=e.observable(),r.name=e.observable().extend({required:!0}),r.isDefault=e.observable().extend({required:!0}),r.isDefault(!1),r.url=e.observable(),r.enterpriseId=e.observable(t.enterpriseId),r.isDone=e.observable(),r.isDone(!1),r.isEdit=e.observable(!1),r.isEdit.subscribe(function(e){0==e&&i(this).then(function(e){r.id(e.id),r.taskItemId(e.taskItemId)})},r),r.errors=e.validation.group(r),r.toPlainObject=function(){var t=["id","taskItemId","isDone","enterpriseId","url","isDefault","name"],n=JSON.parse(e.toJSON(r,t));return n}}function n(){return new r}function a(){return $.ajax({type:"GET",url:s,async:!0}).then(function(e){return e?e.map(function(e){return r.createFromServerEntity(e)}):null})}function i(e){return $.ajax({type:"POST",url:u,data:e.toPlainObject(),async:!0})}function o(e){var t=c+"/"+e.taskItemId();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}var s="api/Business/GetTasks",u="api/Business/SaveTask",c="api/Business/RemoveTask";return r.createFromServerEntity=function(e){var t=n();return t.id(e.id),t.taskItemId(e.taskItemId),t.isDone(e.isDone),t.enterpriseId(e.enterpriseId),t.name(e.name),t.isDefault(e.isDefault),t.url(e.url),t},{createNew:n,loadAll:a,save:i,remove:o}});
define('repositories/tasksRepository',["knockout","data/config"],function(e,t){function r(){var t=this;t.id=e.observable(),t.name=e.observable().extend({required:!0}),t.isDefault=e.observable().extend({required:!0}),t.isDefault(!1),t.errors=e.validation.group(t),t.url=e.observable(),t.toPlainObject=function(){var r=["id","name","isDefault","url"];return JSON.parse(e.toJSON(t,r))}}function n(){return new r}function a(){var e=[];return $.ajax({type:"GET",url:m,data:{id:t.enterpriseId},async:!1,success:function(t){e=Enumerable.From(t).Select(function(e){return r.createFromServerEntity(e)}).ToArray()}}),v=e,e}function i(){return t.getEnterpriseId().then(function(e){return $.ajax({type:"GET",url:m,data:{id:e},async:!0}).then(function(e){return Enumerable.From(e).Select(function(e){return r.createFromServerEntity(e)}).ToArray()})})}function o(){return i().done(function(e){v=e})}function s(e){var t=null;return $.ajax({type:"GET",url:m,data:{id:e},async:!1,success:function(e){t=r.createFromServerEntity(e)}}),t}function u(e){return $.ajax({type:"GET",url:m,data:{id:e},async:!0}).then(function(e){return r.createFromServerEntity(e)})}function c(e){var t=!1;return $.ajax({type:"POST",url:f,data:e.toPlainObject(),async:!1,success:function(r){t=!0,e.id(r.id)}}),t}function l(e){return $.ajax({type:"POST",url:f,data:e.toPlainObject(),async:!0})}function d(e){var t=!1,r=y+"/"+e.id();return $.ajax({type:"DELETE",url:r,data:null,async:!1,success:function(){t=!0}}),t}function p(e){var t=y+"/"+e.id();return $.ajax({type:"DELETE",url:t,data:null,async:!0})}var m="api/Business/GetTaskByEnterprise",f="api/Business/SaveTask",y="api/Business/RemoveTask",v=[];return r.createFromServerEntity=function(e){var t=n();return t.id(e.id),t.name(e.name),t.isDefault(e.isDefault),t.url(e.url),t},{tasks:v,createNew:n,loadAll:a,loadAllAsync:i,reLoadAllAsync:o,loadById:s,loadByIdAsync:u,save:c,saveAsync:l,remove:d,removeAsync:p}});
define('repositories/userSettingsRepository',[],function(){function e(){var e;return $.ajax({type:"GET",url:o,async:!1,success:function(t){e=t}}),e}function t(){return $.ajax({type:"GET",url:o,async:!0})}function r(t){var r=e(),n=Enumerable.From(r).SingleOrDefault(null,function(e){return e.key===t});return null!=n?n.value:null}function n(e){return t().then(function(t){var r=Enumerable.From(t).SingleOrDefault(null,function(t){return t.key===e});return null!=r?r.value:null})}function a(e,t){var r=[];r.push({key:e,value:t}),$.ajax({type:"POST",data:JSON.stringify(r),contentType:"application/json",dataType:"json",url:o,async:!1})}function i(e,t){var r=[];return r.push({key:e,value:t}),$.ajax({type:"POST",data:JSON.stringify(r),contentType:"application/json",dataType:"json",url:o,async:!0})}var o="api/Account/UserSettings";return{loadUserSettings:e,loadUserSettingsAsync:t,loadUserSetting:r,loadUserSettingAsync:n,saveSetting:a,saveSettingAsync:i}});
define('services/LogManager',["knockout","durandal/app","durandal/system","plugins/router","common/utils","toastr","common/constants"],function(t,r,n,a,i,o,s){function u(e){return null!==e?JSON.stringify(e):null}function l(e,t,r,n,a,i,o){this.logLevel=e,this.loggerName=void 0,this.title=o,this.correlationId=void 0,this.tenantId=void 0,this.timestamp=new Date,this.message=t,this.eventId=void 0,this.logScope=i||[],this.logSource=r,this.arguments=n||[],this.results=[],this.context=a||[]}function c(e,t,r,n){var a;a=e instanceof Error?e:new Error(e),t||(t=a.fileName),r||(r=a.lineNumber?a.lineNumber:F(a.stack));var i={error:e,file:t,line:r,col:n,stack:a.stack};return i}function d(e){var r=[];if(e)for(var n=0;n<e.length;n++){var a,o=e[n];if(a=t&&t.isObservable(o)?o():i.isFunction(o)?"function":o)try{var s;s="string"==typeof a?a:u(a),r.push({key:n,value:s})}catch(l){var c="ERROR serialization of object type: "+typeof a+" - message: "+l.message;r.push({key:n,value:c})}}return r}function p(e){var r=[];return Object.keys(e).forEach(function(n,a,o){var o,s=e[n];o=t&&t.isObservable(s)?s():i.isFunction(s)?"function":s;var l="";try{l="string"==typeof o?o:u(o)}catch(c){l="ERROR serialization of object type: "+typeof o+" - message: "+c.message}l||(l=""),r.push({key:n,value:l})}),r}function m(e,t,r){var n,i,o=[],s="",u=a.activeInstruction();if(null!=t&&(s=t.name),e)if($.isPlainObject(e)){var l=p(e);o=o.concat(l)}else if($.isArray(e)){var l=d(e);o=o.concat(l)}else o.push({key:"source",value:e});if(null!=u&&(n=u.config.route,i=u.config.moduleId,o.push({key:"route",value:n}),o.push({key:"moduleId",value:i})),s&&o.push({key:"function",value:s}),r){var c=p(r);o=o.concat(c)}return o}function f(e){for(var t="",r=[],n=0;n<e.length;n++)Object.keys(e[n]).forEach(function(t){r.push(t+": "+e[n][t])});return t=r.join("; "),"["+t+"]"}function y(e){return"DEBUG"===e?"info":"INFO"===e?"info":"WARN"===e?"warning":"ERROR"===e?"error":"FATAL"===e?"error":e}function v(t,a){this.separator="|",this.logDestination=t||x,this.logLevel=a,this.isLevelEnabledAgainstThat=function(e,t){return e&&t?j.logLevels.indexOf(e)<=j.logLevels.indexOf(t):!1},this.isLevelEnabled=function(e){var t=!1;return this.logLevel&&(t=j.logLevels.indexOf(this.logLevel)<=e),t?void 0:j.isLevelEnabled(e)},this.getLogLevel=function(){return this.logLevel||j.logLevel},this.isLogToConsoleEnabled=function(){return(this.logDestination&T)>0},this.isLogToShellEnabled=function(){return(this.logDestination&E)>0},this.isLogToToastEnabled=function(){return(this.logDestination&I)>0},this.isLogToDbEnabled=function(){return(this.logDestination&S)>0},this.isDebugEnabled=function(){return this.isLevelEnabled(j.debugLevel)||j.isDebugEnabled()},this.isInfoEnabled=function(){return this.isLevelEnabled(j.infoLevel)||j.isInfoEnabled()},this.isErrorEnabled=function(){return this.isLevelEnabled(j.errorLevel)||j.isErrorEnabled()},this.isWarnEnabled=function(){return this.isLevelEnabled(j.warnLevel)||j.isWarnEnabled()},this.isFatalEnabled=function(){return this.isLevelEnabled(j.fatalLevel)||j.isFatalEnabled()},this.showToast=function(e,t,r){"error"===t?(e.length>256&&(e="An unexpected error has occured."),o.error(e,null,r)):"warning"===t?o.warning(e,null,r):o.info(e,null,r)},this.logToToast=function(e,t,r,n){r?this.showToast(t,y(r.type||e),n):this.showToast(t,y(e),n)},this.logErrorToToast=function(e,t){this.showToast(e,"error",t)},this.logToConsole=function(){1==g.call(arguments).length&&"string"==typeof g.call(arguments)[0]?n.log(g.call(arguments).toString()):n.log.apply(n,g.call(arguments))},this.logErrorToConsole=function(e,t){n.error(e,t)},this.logToShell=function(e){if(window.nativeShell&&e){var t=JSON.stringify(e);window.nativeShell.log(t)}},this.logToDb=function(e){e&&r.trigger(s.appDbSave,e)},this.buildLogEntry=function(e,t,r,n,a,i,o,s){var u=n||[];a&&(u=u.concat(a));var c=d(u),p=d(i),m=d(o),f=[],y=new l(e,t,r,c,m,f,s);return y.results=p,y},this.logToToastInternal=function(e,t,r,n){this.isLogToToastEnabled()&&r&&this.logToToast(e,t,r,n||r.options)},this.logInternal=function(e,t,r,n,a,i,o,s,u,l){var c=this.buildLogEntry(e,t,r,n,i,o,s,u);if(this.isLogToConsoleEnabled()){var p=f(r),m=[e,p,t];n&&(m=m.concat(d(n))),i&&(m=m.concat(i)),o&&(m=m.concat(o)),s&&(m=m.concat(s)),l&&m.push(l),this.logToConsole.apply(this,m)}this.isLogToShellEnabled()&&this.logToShell(c),this.isLogToDbEnabled()&&this.logToDb(c),this.logToToastInternal(e,t,a)},this.log=function(e,t,r,n,a,i,o,s,u){var l=j.logLevels.indexOf(e);if(!this.isLevelEnabled(l))return this.logToToastInternal(e,t,a),void 0;var c=this.log.caller,d=void 0;n&&"[object Arguments]"===n.toString()&&(d=g.call(n)),d||null!=c&&n&&(d=g.call(c.arguments));var p=m(r,c);this.logInternal(e,t,p,d,a,i,o,s,u)},this.logDebug=function(e,t,r,n,a,i,o,s){var u=j.logLevels[j.debugLevel];if(!this.isDebugEnabled())return this.logToToastInternal(u,e,n),void 0;var l=this.logDebug.caller,c=void 0;r&&"[object Arguments]"===r.toString()&&(c=g.call(r)),c||null!=l&&r&&(c=g.call(l.arguments));var d=m(t,l);this.logInternal(u,e,d,c,n,a,i,o,s)},this.logInfo=function(e,t,r,n,a,i,o,s){var u=j.logLevels[j.infoLevel];if(!this.isInfoEnabled())return this.logToToastInternal(u,e,n),void 0;var l=this.logInfo.caller,c=void 0;r&&"[object Arguments]"===r.toString()&&(c=g.call(r)),c||null!=l&&r&&(c=g.call(l.arguments));var d=m(t,l);this.logInternal(u,e,d,c,n,a,i,o,s)},this.logError=function(t,r,n,a,i,o,s,l,d){t instanceof Error&&(i||(i=t),t=t.message);var p=j.logLevels[j.errorLevel];if(!this.isErrorEnabled())return this.logToToastInternal(p,t,a),void 0;var f=this.logError.caller,y=void 0;n&&"[object Arguments]"===n.toString()&&(y=g.call(n)),y||null!=f&&n&&(y=g.call(f.arguments));var v=void 0;i&&(i instanceof Error?v=c(i):"string"==typeof e?v={error:i}:i.error&&i.file?v=i:i.then?i.responseText&&(v={error:i.responseText}):v={error:u(i)});var b=m(r,f,v);this.logInternal(p,t,b,y,a,o,s,l,d,v)},this.logWarn=function(e,t,r,n,a,i,o,s){var u=j.logLevels[j.warnLevel];if(!this.isWarnEnabled())return this.logToToastInternal(u,e,n),void 0;var l=this.logWarn.caller,c=void 0;r&&"[object Arguments]"===r.toString()&&(c=g.call(r)),c||null!=l&&r&&(c=g.call(l.arguments));var d=m(t,l);this.logInternal(u,e,d,c,n,a,i,o,s)},this.logFatal=function(e,t,r,n,a,i,o,s,u){var l=j.logLevels[j.fatalLevel];if(!this.isFatalEnabled())return this.logToToastInternal(l,e,n),void 0;var d=this.logFatal.caller,p=void 0;r&&"[object Arguments]"===r.toString()&&(p=g.call(r)),p||null!=d&&r&&(p=g.call(d.arguments));var f=void 0;a&&(f=a instanceof Error?c(a):a);var y=m(t,d,f);this.logInternal(l,e,y,p,n,i,o,s,u,f)}}function b(){var e=this;this.DestConsole=1,this.DestShell=2,this.DestToast=4,this.DestDb=8,this._getLogLevel=function(e){if(e&&e.logLevel){var t;return isNaN(e.logLevel)?t=e.logLevel:j.logLevels.length>e.logLevel&&(t=j.logLevels[e.logLevel]),t}return void 0},r.on(s.logConfigChangedEvent).then(function(t){var r=e._getLogLevel(t);r&&e.logLevel(r)}),r.on(s.logMinLevelChangedEvent).then(function(t){var r=e._getLogLevel(t);r&&e.minLogLevel(r)}),this.levelChanged=function(e){r.trigger(s.logLevelChangedEvent,{level:e})},this.logLevel=function(e){return e&&(j.logLevel=e.toUpperCase(),this.levelChanged(j.logLevel)),j.logLevel},this.minLogLevel=function(e){if(e){var t=e.toUpperCase();j.isLevelEnabled(j.levelIndex(t))||(j.logLevel=t,this.levelChanged(j.logLevel))}return j.logLevel},this.getErrorInfo=function(e,t,r,n){return c(e,t,r,n)},this.getLogger=function(e,t){return new v(e,t)}}o.options.positionClass="toast-bottom-right";var g=Array.prototype.slice,h=window.__DEBUG__?"DEBUG":"ERROR",T=1,E=2,I=4,S=8,x=T|E|I|S,A=["UNDEFINED","DEBUG","INFO","WARN","ERROR","FATAL"],j={logLevels:A,undefinedLevel:A.indexOf("UNDEFINED"),debugLevel:A.indexOf("DEBUG"),infoLevel:A.indexOf("INFO"),warnLevel:A.indexOf("WARN"),errorLevel:A.indexOf("ERROR"),fatalLevel:A.indexOf("FATAL"),logLevel:h,isLevelEnabled:function(e){return this.logLevels.indexOf(this.logLevel)<=e},isDebugEnabled:function(){return this.isLevelEnabled(this.debugLevel)},isInfoEnabled:function(){return this.isLevelEnabled(this.infoLevel)},isWarnEnabled:function(){return this.isLevelEnabled(this.warnLevel)},isErrorEnabled:function(){return this.isLevelEnabled(this.errorLevel)},isFatalEnabled:function(){return this.isLevelEnabled(this.fatalLevel)},levelIndex:function(e){return this.logLevels.indexOf(e)}},F=function(e){var t=e.split("\n")[2];return t=t.indexOf(" (")>=0?t.split(" (")[1].substring(0,t.length-1):t.split("at ")[1]};return new b});
define('services/dataTableText',["durandal/app","services/text"],function(e,t){function r(){n={processing:t.T("datatable.Processing"),search:t.T("datatable.Search"),lengthMenu:t.T("datatable.LengthMenu"),info:t.T("datatable.Info"),infoEmpty:t.T("datatable.InfoEmpty"),infoFiltered:t.T("datatable.InfoFiltered"),infoPostFix:t.T("datatable.InfoPostFix"),loadingRecords:t.T("datatable.LoadingRecords"),zeroRecords:t.T("datatable.ZeroRecords"),emptyTable:t.T("datatable.EmptyTable"),paginate:{first:t.T("datatable.Paginate_First"),previous:t.T("datatable.Paginate_Previous"),next:t.T("datatable.Paginate_Next"),last:t.T("datatable.Paginate_Last")},aria:{sortAscending:t.T("datatable.Aria_SortAscending"),sortDescending:t.T("datatable.Aria_SortDescending")}}}e.on("app:lang:changed",function(){r()});var n=null,a={getLanguage:function(){return n||r(),n}};return a});
define('plugins/dialog',["durandal/system","durandal/app","durandal/composition","durandal/activator","durandal/viewEngine","jquery","knockout"],function(e,t,n,r,a,o,i){function s(t){return e.defer(function(n){e.isString(t)?e.acquire(t).then(function(t){n.resolve(e.resolveObject(t))}).fail(function(n){e.error("Failed to load dialog module ("+t+"). Details: "+n.message)}):n.resolve(t)}).promise()}var l,u={},c=i.observable(0),d=function(e,t,n,r,a){this.message=e,this.title=t||d.defaultTitle,this.options=n||d.defaultOptions,this.autoclose=r||!1,this.settings=o.extend({},d.defaultSettings,a)};return d.prototype.selectOption=function(e){l.close(this,e)},d.prototype.getView=function(){return a.processMarkup(d.defaultViewMarkup)},d.setViewUrl=function(e){delete d.prototype.getView,d.prototype.viewUrl=e},d.defaultTitle=t.title||"Application",d.defaultOptions=["Ok"],d.defaultSettings={buttonClass:"btn btn-default",primaryButtonClass:"btn-primary autofocus",secondaryButtonClass:"","class":"modal-content messageBox",style:null},d.setDefaults=function(e){o.extend(d.defaultSettings,e)},d.prototype.getButtonClass=function(e){var t="";return this.settings&&(this.settings.buttonClass&&(t=this.settings.buttonClass),0===e()&&this.settings.primaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.primaryButtonClass),e()>0&&this.settings.secondaryButtonClass&&(t.length>0&&(t+=" "),t+=this.settings.secondaryButtonClass)),t},d.prototype.getClass=function(){return this.settings?this.settings["class"]:"messageBox"},d.prototype.getStyle=function(){return this.settings?this.settings.style:null},d.prototype.getButtonText=function(t){var n=o.type(t);return"string"===n?t:"object"===n?"string"===o.type(t.text)?t.text:(e.error("The object for a MessageBox button does not have a text property that is a string."),null):(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.prototype.getButtonValue=function(t){var n=o.type(t);return"string"===n?t:"object"===n?"undefined"===o.type(t.text)?(e.error("The object for a MessageBox button does not have a value property defined."),null):t.value:(e.error("Object for a MessageBox button is not a string or object but "+n+"."),null)},d.defaultViewMarkup=['<div data-view="plugins/messageBox" data-bind="css: getClass(), style: getStyle()">','<div class="modal-header">','<h3 data-bind="html: title"></h3>',"</div>",'<div class="modal-body">','<p class="message" data-bind="html: message"></p>',"</div>",'<div class="modal-footer">',"<!-- ko foreach: options -->",'<button data-bind="click: function () { $parent.selectOption($parent.getButtonValue($data)); }, text: $parent.getButtonText($data), css: $parent.getButtonClass($index)"></button>',"<!-- /ko -->",'<div style="clear:both;"></div>',"</div>","</div>"].join("\n"),l={MessageBox:d,currentZIndex:1050,getNextZIndex:function(){return++this.currentZIndex},isOpen:i.computed(function(){return c()>0}),getContext:function(e){return u[e||"default"]},addContext:function(e,t){t.name=e,u[e]=t;var n="show"+e.substr(0,1).toUpperCase()+e.substr(1);this[n]=function(t,n){return this.show(t,n,e)}},createCompositionSettings:function(e,t){var n={model:e,activate:!1,transition:!1};return t.binding&&(n.binding=t.binding),t.attached&&(n.attached=t.attached),t.compositionComplete&&(n.compositionComplete=t.compositionComplete),n},getDialog:function(e){return e?e.__dialog__:void 0},close:function(e){var t=this.getDialog(e);if(t){var n=Array.prototype.slice.call(arguments,1);t.close.apply(t,n)}},show:function(t,a,o){var i=this,l=u[o||"default"];return e.defer(function(e){s(t).then(function(t){var o=r.create();o.activateItem(t,a).then(function(r){if(r){var a=t.__dialog__={owner:t,context:l,activator:o,close:function(){var n=arguments;o.deactivateItem(t,!0).then(function(r){r&&(c(c()-1),l.removeHost(a),delete t.__dialog__,0===n.length?e.resolve():1===n.length?e.resolve(n[0]):e.resolve.apply(e,n))})}};a.settings=i.createCompositionSettings(t,l),l.addHost(a),c(c()+1),n.compose(a.host,a.settings)}else e.resolve(!1)})})}).promise()},showMessage:function(t,n,r,a,o){return e.isString(this.MessageBox)?l.show(this.MessageBox,[t,n||d.defaultTitle,r||d.defaultOptions,a||!1,o||{}]):l.show(new this.MessageBox(t,n,r,a,o))},install:function(e){t.showDialog=function(e,t,n){return l.show(e,t,n)},t.closeDialog=function(){return l.close.apply(l,arguments)},t.showMessage=function(e,t,n,r,a){return l.showMessage(e,t,n,r,a)},e.messageBox&&(l.MessageBox=e.messageBox),e.messageBoxView&&(l.MessageBox.prototype.getView=function(){return a.processMarkup(e.messageBoxView)}),e.messageBoxViewUrl&&l.MessageBox.setViewUrl(e.messageBoxViewUrl)}},l.addContext("default",{blockoutOpacity:.2,removeDelay:200,addHost:function(e){var t=o("body"),n=o('<div class="modalBlockout"></div>').css({"z-index":l.getNextZIndex(),opacity:this.blockoutOpacity}).appendTo(t),r=o('<div class="modalHost"></div>').css({"z-index":l.getNextZIndex()}).appendTo(t);if(e.host=r.get(0),e.blockout=n.get(0),!l.isOpen()){e.oldBodyMarginRight=t.css("margin-right"),e.oldInlineMarginRight=t.get(0).style.marginRight;var a=o("html"),i=t.outerWidth(!0),s=a.scrollTop();o("html").css("overflow-y","hidden");var u=o("body").outerWidth(!0);t.css("margin-right",u-i+parseInt(e.oldBodyMarginRight,10)+"px"),a.scrollTop(s)}},removeHost:function(e){if(o(e.host).css("opacity",0),o(e.blockout).css("opacity",0),setTimeout(function(){i.removeNode(e.host),i.removeNode(e.blockout)},this.removeDelay),!l.isOpen()){var t=o("html"),n=t.scrollTop();t.css("overflow-y","").scrollTop(n),e.oldInlineMarginRight?o("body").css("margin-right",e.oldBodyMarginRight):o("body").css("margin-right","")}},attached:function(e){o(e).css("visibility","hidden")},compositionComplete:function(e,t,n){var r=l.getDialog(n.model),a=o(e),i=a.find("img").filter(function(){var e=o(this);return!(this.style.width&&this.style.height||e.attr("width")&&e.attr("height"))});a.data("predefinedWidth",a.get(0).style.width);var s=function(e,t){setTimeout(function(){var n=o(e);t.context.reposition(e),o(t.host).css("opacity",1),n.css("visibility","visible"),n.find(".autofocus").first().focus()},1)};s(e,r),i.load(function(){s(e,r)}),(a.hasClass("autoclose")||n.model.autoclose)&&o(r.blockout).click(function(){r.close()})},reposition:function(e){var t=o(e),n=o(window);t.data("predefinedWidth")||t.css({width:""});var r=t.outerWidth(!1),a=t.outerHeight(!1),i=n.height()-10,s=n.width()-10,l=Math.min(a,i),u=Math.min(r,s);t.css({"margin-top":(-l/2).toString()+"px","margin-left":(-u/2).toString()+"px"}),a>i?t.css("overflow-y","auto").outerHeight(i):t.css({"overflow-y":"",height:""}),r>s?t.css("overflow-x","auto").outerWidth(s):(t.css("overflow-x",""),t.data("predefinedWidth")?t.css("width",t.data("predefinedWidth")):t.outerWidth(u))}}),l});

define('text!views/quickStartDialog.html',[],function () { return '<div class="quick-start-dialog">\r\n    <div>\r\n        <h2 data-bind="local: \'demo.quickStart\'"></h2>\r\n        <h4 data-bind="local: \'demo.quickStartSubheading\'"></h4>\r\n        <div class="quick-start-tip" data-bind="local: \'demo.quickStartDescription\'"></div>\r\n    </div>\r\n\r\n    <ul data-bind="foreach: datasets"><li>\r\n            <a data-bind="style: { backgroundColor: bgColor, backgroundImage: bgImage }, click: $parent.installDataset">\r\n                <div>\r\n                    <span data-bind="text: name"></span>\r\n                    <ul data-bind="foreach: features">\r\n                        <li data-bind="text: $data"></li>\r\n                    </ul>\r\n                </div>\r\n                <div data-bind="local: \'demo.select\'"></div>\r\n            </a>\r\n        </li></ul>\r\n\r\n    <div class="fresh-start">\r\n        <h4 data-bind="local: \'demo.freshStart\'"></h4>\r\n        <div data-bind="local: \'demo.freshStartDescription\'" class="fresh-start-description"></div>\r\n    </div>\r\n\r\n    <button data-bind="click: skipDemo, local: \'demo.skipDemo\'" class="btn btn-default no-demo"></button>\r\n    <div class="clearfix"></div>\r\n</div>\r\n\r\n\r\n';});


define('text!views/goFreedomDialog.html',[],function () { return '<div class="modal-content messageBox" style="width: 600px">\r\n    <div class="modal-header">\r\n        <h3 data-bind="local: \'demo.freedomPlan\'"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p class="message" data-bind="local: \'demo.freedomPlanConfirmation\'"></p>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <a data-bind="local: \'common.yes\', click: clearDemo" class="btn btn-default btn-primary autofocus" style="width: 80px"\r\n           href="https://ehopper.com/freedom/" target="_blank"></a>\r\n        <button data-bind="local: \'common.no\', click: noFreedom" class="btn btn-default"></button>\r\n        <div style="clear: both"></div>\r\n    </div>\r\n</div>';});

define('services/demo',["knockout","jquery","durandal/app","plugins/dialog","plugins/router","durandal/viewEngine","text!views/quickStartDialog.html","text!views/goFreedomDialog.html","data/config","data/common"],function(e,t,n,r,a,i,o,s,u){function l(e){T(!0),t.post("api/Demo/Install",{code:e.code,name:e.name}).then(function(){u.isDemo=!0,u.demoName=e.name,n.trigger("app:config:changed"),r.close(b),T(!1),window.location.reload(!0)},function(e){T(!1),console.log(e.statusText)})}function c(){T(!0),t.post("api/Demo/NoDemo").then(function(){r.close(b),u.isDemo=!1,T(!1)},function(e){T(!1),console.log(e.statusText)})}function d(){r.show(new r.MessageBox(e.T("demo.skipDemoConfirmation"),e.T("demo.skipDemo"),[{text:"Yes",value:!0},{text:"No",value:!1}],!1)).then(function(e){e&&c()})}function p(){r.close(g)}function m(){return T(!0),t.post("api/Demo/Cleanup").then(function(){u.isDemo=!1,u.demoName=null,n.trigger("app:config:changed"),T(!1),a.navigate(""),window.location.reload(!0)},function(e){T(!1),console.log(e.statusText)}),!0}function f(){return u.isDemo?(g||(g=new r.MessageBox,g.getView=function(){return i.processMarkup(s)},g.noFreedom=p,g.clearDemo=m),r.show(g),!1):!0}function y(t){"freedom"===t?f():r.show(new r.MessageBox(e.T("demo.essentialPlanConfirmation"),e.T("demo.essentialPlan"),[{text:"Yes",value:!0},{text:"No",value:!1}],!1)).then(function(e){e&&m()})}function v(){null===u.isDemo&&(b=new r.MessageBox(null,null,null,!1),b.getView=function(){return i.processMarkup(o)},b.datasets=h,b.installDataset=l,b.skipDemo=d,r.show(b))}var b,g,h=[{code:0,name:"Food & Drinks",features:["Modifiers","Orders & Tips","Delivery","Sales & Kitchen Receipts"],bgColor:"#eca535",bgImage:"url(content/images/demo/qsr.png)"},{code:1,name:"Retail Store",features:["Inventory Matrix: ex vendor, style, color, size","Multi Store support","Vendor management","Retail Reports"],bgColor:"#2da782",bgImage:"url(content/images/demo/retail.png)"},{code:2,name:"Serialized Store",features:["Full Inventory Management","Serialized Items Tracking","Aging Report"],bgColor:"#8b62af",bgImage:"url(content/images/demo/serialized.png)"},{code:3,name:"Grocery",features:["Same as QSR","Full Inventory Control","Unit Priced Items: lb., oz.,  kg., etc."],bgColor:"#49a1ae",bgImage:"url(content/images/demo/grocery.png)"}],T=e.observable();return{isLoading:T,quickStart:v,cleanup:y,goFreedom:f}});
define('services/initService',["services/LogManager"],function(e){function t(){return s.logDebug("beforeAppStart",o,!0),r(u)}function n(){return s.logDebug("afterLogin",o,!0),r(l).then(function(){return a()})}function r(e){var t=$.Deferred(),n=e.map(function(e){return e.module});return require(n,function(){var n=i.call(arguments,0),r=[];n&&n.forEach(function(t,n){var a=e[n],i=a.action||t.activate||t.init||t.start;if(i){i=t[i];var o=i.call(t);o&&r.push(o)}}),$.when.apply($,r).then(function(){t.resolve()})}),t.promise()}function a(){s.logDebug("afterLoginInit",o,!0)}var i=Array.prototype.slice,o="services/initService",s=e.getLogger();s.logDebug("loading module.",o);var u=[{module:"common/numericUtils",action:""},{module:"common/dateUtils",action:""},{module:"services/timers/upgradeTimer",action:"start"}],l=[];return{beforeAppStart:t,afterLogin:n}});
define('services/jivoChat',[],function(){function e(){function e(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="//code.jivosite.com/script/widget/"+t;var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(e,n)}var t="thM1kJZAE1",n=document,r=window;"complete"==n.readyState?e():r.attachEvent?r.attachEvent("onload",e):r.addEventListener("load",e,!1)}return{init:e}});
define('services/scannerListener',["durandal/app","common/constants"],function(e,t){var n=(new Date).getTime(),r="",a={startChar:[],endChar:[9,13]};$(function(){function i(){var e=r&&"string"==typeof r;return e}function o(o){var s=o.timeStamp-n;(s>100||-1!==a.endChar.indexOf(o.charCode))&&(r=""),n=o.timeStamp,"INPUT"==o.target.tagName&&13===o.charCode&&0===r.length&&$(o.target).hasClass("scannerInput")&&(r=o.target.value),13==o.charCode&&r.length>1&&i()?e.trigger(t.scannerReadEvent,{e:o,data:r}):r+=String.fromCharCode(o.charCode)}document.addEventListener("keypress",o)})});
define('services/ssoLoginService',["knockout","durandal/app","plugins/router","data/config","services/LogManager","services/initService","plugins/http","common/utils"],function(e,t,n,r,a,i,o,s){function u(){f().then(function(e){var t=e.identityServerUrl+"connect/authorize",n=e.clientId,r=encodeURIComponent(window.location.protocol+"//"+window.location.host+"/"),a="code id_token",i=e.ssoScopes,o=Date.now()+""+Math.random(),s="companyId:"+e.companyId+";brandId:"+e.brandId+";userAuthType:"+e.userAuthType;localStorage.state=o;var u=t+"?"+"client_id="+encodeURIComponent(n)+"&"+"redirect_uri="+r+"&"+"response_type="+a+"&"+"scope="+i+"&"+"state="+encodeURIComponent(o)+"&"+"nonce="+encodeURIComponent(o)+"&"+"acr_values="+encodeURIComponent(s);x.logDebug("reguestToIdentityServer",T,!1,!1,u),window.location=u})}function l(){return x.logDebug("readCodeFromUrl",T),c()}function c(){x.logDebug("processTokenCallback",T,!1,!1);var e=window.location.hash.substr(1),t=e.split("&").reduce(function(e,t){var n=t.split("=");return e[n[0]]=n[1],e},{});if(!t.error){if(t.state===localStorage.state)return localStorage.removeItem("state"),x.logDebug("code from Url",T,!1,!1,t.code),t.code;x.logDebug("readCodeFromUrl: invalid state",T)}}function d(){var e={},t=P.getItemObject(A),n=P.getItemObject(j),r=P.getItemObject(F);return t&&(e.AuthCode=t),n&&(e.Authorization="Bearer "+n),r&&(e.RefreshToken=r),e}function p(){x.logDebug("endSession",T);var e=P.getItemObject(j),t=P.getItemObject(F);if(e&&t){var n=d();o.get("api/account/revoketoken/"+s.getIdFromCookie(),null,n)}y()}function m(){x.logDebug("tryToRefreshToken",T);var e=$.Deferred(),t=h+s.getIdFromCookie(),n=d();return o.get(t,null,n).then(function(t){P.setItemObject(j,t.accessToken),P.setItemObject(F,t.refreshToken),e.resolve(t)},function(t){x.logDebug("Sso Login not successfully.",T,!1,!1,t),e.reject()}),e.promise()}function f(){x.logDebug("getSsoSettings",T);var e=$.Deferred(),t=g+s.getIdFromCookie();return o.get(t).then(function(t){P.setItemObject(O,t.isEnabled),e.resolve(t)},function(t){x.logDebug("Sso settings not found.",T,!1,!1,t),e.reject()}),e.promise()}function y(){P.removeItemObject(A),P.removeItemObject(j),P.removeItemObject(F)}function v(){x.logDebug("loginSso",T);var e=$.Deferred(),t=d(),n={accountId:s.getIdFromCookie(),email:-1,password:-1};return o.post(b+s.getIdFromCookie(),n,t).then(function(t){return 0!==t.resultCode?(2!==t.resultCode?e.reject(I[t.resultCode]||E):e.reject(S),void 0):(8==t&&window.localStorage.setItem("isTempPass",!0),P.setItemObject(j,t.accessToken),P.setItemObject(F,t.refreshToken),e.resolve(t),void 0)},function(t){y(),x.logDebug("Sso Login not successfully",T,!1,!1,t),e.reject(t)}),e.promise()}var b="api/account/login/",g="api/account/ssosettings/",h="api/account/refreshtoken/",T="services/ssoLoginService",I={5:e.T("login.you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked"),7:e.T("account.many_emails_set_password_flow")},E=e.T("login.invalid_login_or_password"),S=e.T("login.you_are_not_authorized_to_login"),x=a.getLogger();x.logDebug("loading module.",T);var A="SsoAuthCodeKey",j="SsoTokenKey",F="SsoRefreshTokenKey",O="ssoEnabledKey",P={getItemObject:function(e){return window.localStorage.getItem(e)},setItemObject:function(e,t){window.localStorage.setItem(e,t)},removeItemObject:function(e){window.localStorage.removeItem(e)}};return{reguestToIdentityServer:u,readCodeFromUrl:l,storage:P,loginSso:v,createHeadersForRequestWithSso:d,clearStoredToken:y,tokenStorageKey:j,authCodeStorageKey:A,refreshTokenStorageKey:F,tryToRefreshToken:m,getSsoSettings:f,endSession:p,ssoEnabledKey:O}});
define('services/timers/timer',["common/utils"],function(e){function t(t,n,r){var a=this;a.type=r,a.isTimeout="timeout"===a.type,a.callback=t,a.period=n,a.isStopped=!1,a.interval=null,a.stop=function(){a.isStopped=!0,a.isTimeout?clearTimeout(a.interval):clearInterval(a.interval),a.interval=null},a.tryStart=function(){return a.isStopped=!1,null!=a.interval?a.interval:a.start()},a.start=function(){if(a.isStopped=!1,null==a.callback&&!e.isFunction(a.callback))throw new Error("Timer callback must be a function.");null!=a.interval&&a.stop();var r=!1,i=function(){if(!r){r=!0;try{t()}catch(e){}r=!1,a.isTimeout&&!a.isStopped&&(a.interval=setTimeout(i,a.period))}};a.interval=a.isTimeout?setTimeout(i,a.period):setInterval(i,n),t()}}return t.startNewTimer=function(e,n){var r=new t(e,n);return r.start(),r},t});
define('services/timers/upgradeTimer',["services/timers/timer","common/utils","services/LogManager","durandal/app","data/config","plugins/dialog","services/text","knockout"],function(e,t,n,r,a,i,o,s){function u(){v.logDebug("startStatusTimer",y,!0);var t=!1;return r.on("app:auth:log:status",function(e){t=e.login}),p||(p=e.startNewTimer(function(){a.isLoaded&&a.getEnterpriseId().then(function(e){$.ajax({type:"GET",url:m,data:{enterpriseId:e},async:!1,success:function(e){if((1==e.upgradeState||2==e.upgradeState)&&!b){var t=o.T("upgrade.dialogTitle"),n=o.T("upgrade.wait"),r={"margin-left":($(window).width()-400)/2+"px","margin-top":($(window).height()-205)/2+"px",width:"750px"};g=new T(n,t,[],!1,{style:r},!1),b=!0,i.show(g)}3==e.upgradeState&&(h=e.targetVersion,setTimeout(l,3e3),g&&g.message(o.T("upgrade.upgradeFinished")))}})})},6e4)),p}function l(){i.close(g),b=!1,window.location="//"+window.location.host+"/"+h+"/"+window.location.search}function c(){v.logDebug("stopStatusTimer",y,!0),null!=p&&p.stop(),p=null}function d(e){var t=$.Deferred();return $.ajax({type:"POST",url:f,contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({code:e}),async:!0,success:function(){}}).then(function(e){3==e.upgradeState?(h=e.targetVersion,window.location="//"+window.location.host+"/"+h+"/"+window.location.search,t.reject("")):t.resolve()},function(){t.resolve()}),t.promise()}var p,m="api/Upgrade/GetUpgradeStatus",f="api/Upgrade/GetUpgradeStatusByCode",y="services/timers/upgradeTimer",v=n.getLogger();v.logDebug("loading module.",y);var b=!1,g=null,h="",T=function(e,t,n,r,a){this.titleText=s.observable(t),this.options=n,this.autoclose=r||!1,this.settings=$.extend({},a),this.header=o.T("upgrade.wait"),this.cancel=function(){},this.viewUrl="views/upgradeDialog.html",T.superclass.constructor.apply(this,arguments),this.message=s.observable(e),this.toggle=function(e,t){var n=e[$(t.delegateTarget).attr("data-with")];n(!n())}};return t.extend(T,i.MessageBox),T.prototype.getView=void 0,{start:u,stop:c,checkUpgradeByCode:d}});
define('services/userAgent',["services/LogManager"],function(e){var t="userAgent",n=e.getLogger();n.logDebug("loading module.",t);var r,a,i,o,s,u,l=navigator.appVersion,c=navigator.userAgent,d=navigator.appName,p=""+parseFloat(navigator.appVersion);-1!=(i=c.indexOf("Opera"))&&(d="Opera",p=c.substring(i+6),-1!=(i=c.indexOf("Version"))&&(p=c.substring(i+8))),-1!=(i=c.indexOf("OPR"))?(d="Opera",p=c.substring(i+4)):-1!=(i=c.indexOf("Edge"))?(d="Microsoft Edge",p=c.substring(i+5)):-1!=(i=c.indexOf("MSIE"))?(d="Microsoft Internet Explorer",p=c.substring(i+5)):-1!=(i=c.indexOf("Chrome"))?(d="Chrome",p=c.substring(i+7)):-1!=(i=c.indexOf("Safari"))?(d="Safari",p=c.substring(i+7),-1!=(i=c.indexOf("Version"))&&(p=c.substring(i+8))):-1!=(i=c.indexOf("Firefox"))?(d="Firefox",p=c.substring(i+8)):-1!=c.indexOf("Trident/")?(d="Microsoft Internet Explorer",p=c.substring(c.indexOf("rv:")+3)):(a=c.lastIndexOf(" ")+1)<(i=c.lastIndexOf("/"))&&(d=c.substring(a,i),p=c.substring(i+1),d.toLowerCase()==d.toUpperCase()&&(d=navigator.appName)),-1!=(o=p.indexOf(";"))&&(p=p.substring(0,o)),-1!=(o=p.indexOf(" "))&&(p=p.substring(0,o)),-1!=(o=p.indexOf(")"))&&(p=p.substring(0,o)),r=parseInt(""+p,10),isNaN(r)&&(p=""+parseFloat(navigator.appVersion),r=parseInt(navigator.appVersion,10));var m=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var f in m){var y=m[f];if(y.r.test(c)){s=y.s;break}}switch(/Windows/.test(s)&&(u=/Windows (.*)/.exec(s)[1],s="Windows"),s){case"Mac OS X":u=/Mac OS X (10[._\d]+)/.exec(c)[1],u=u.replace("_",".");break;case"Android":u=/Android ([._\d]+)/.exec(c)[1];break;case"iOS":u=/OS (\d+)_(\d+)_?(\d+)?/.exec(l),u=u[1]+"."+u[2]+"."+(0|u[3])}return{browser:d,browserVersion:p,browserMajorVersion:r,os:s,osVersion:u,checkBrowserCompatibility:function(){return"Chrome"==d&&r>=48&&("Windows"==s&&parseFloat(u)>=7||"Android"==s&&u>="4.4.2"||"Mac OS X"==s&&parseFloat(u)>=10.1)||"Safari"==d&&("Mac OS X"==s&&parseFloat(u)>=10.1||"iOS"==s&&parseFloat(u)>=9)}}});

define('text!views/promptNicknameDialog.html',[],function () { return '<div class="modal-content messageBox" style="width: 600px">\r\n    <div class="modal-header">\r\n        <h3 data-bind="local: \'dashboard/widgets/support.zendeskNickname\'"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <div class="message" data-bind="html: ko.local(\'dashboard/widgets/support.enterNickname\')"></div>\r\n        <div class="message" data-bind="html: ko.local(\'dashboard/widgets/support.enterNicknameNote\')"></div>\r\n        <input type="text" class="form-control input-lg" data-bind="value: nickname, valueUpdate: \'input\'" maxlength="200" />\r\n    </div>\r\n    <div class="modal-footer">\r\n        <button class="btn btn-lg btn-primary"\r\n            data-bind="local: \'common.ok\', click: function () { selectOption(true); }, enable: nickname"></button>\r\n        <button class="btn btn-lg btn-default"\r\n            data-bind="local: \'common.cancel\', click: function () { selectOption(false); }"></button>\r\n        <div style="clear: both"></div>\r\n    </div>\r\n</div>';});


define('text!views/nicknameSavedDialog.html',[],function () { return '<div class="modal-content messageBox" style="width: 400px">\r\n    <div class="modal-header">\r\n        <h3 data-bind="local: \'dashboard/widgets/support.zendeskNickname\'"></h3>\r\n    </div>\r\n    <div class="modal-body">\r\n        <p class="message" data-bind="local: \'dashboard/widgets/support.nicknameSaved\'"></p>\r\n    </div>\r\n    <div class="modal-footer">\r\n        <a class="btn btn-lg btn-primary" href="Zendesk/Login" target="_blank"\r\n           data-bind="local: \'common.ok\', click: function () { selectOption(true); return true; }"></a>\r\n        <div style="clear: both"></div>\r\n    </div>\r\n</div>';});

define('services/zendesk',["jquery","knockout","plugins/dialog","durandal/viewEngine","text!views/promptNicknameDialog.html","text!views/nicknameSavedDialog.html","data/config"],function(e,t,n,r,a,i,o){function s(){if(o.nickname)return!0;var t=new n.MessageBox(null,null,null,!1);return t.getView=function(){return r.processMarkup(a)},u(o.fullName),t.nickname=u,n.show(t).then(function(t){t&&e.ajax({type:"POST",url:"api/Employees/SetNickname",data:{code:u()}}).then(function(){o.nickname=u();var e=new n.MessageBox(null,null,null,!1);e.getView=function(){return r.processMarkup(i)},n.show(e)},function(e){console.log(e)})}),!1}var u=t.observable();return{checkNickname:s}});
define('signalr/signalr-importHub',["data/config","hubs"],function(e){function t(e,t,n,a,i,o){r[e+"Finished"]=t,r[e+"Progress"]=n,r[e+"Error"]=a,r[e+"Cancelled"]=o}var n,r={},a={inventoryProgress:function(){r.inventoryProgress&&r.inventoryProgress.apply(null,arguments)},inventoryError:function(){r.inventoryError&&r.inventoryError.apply(null,arguments)},inventoryFinished:function(){r.inventoryFinished&&r.inventoryFinished.apply(null,arguments)},inventoryCancelled:function(){r.inventoryCancelled&&r.inventoryCancelled.apply(null,arguments)},customersProgress:function(){r.customersProgress&&r.customersProgress.apply(null,arguments)},customersError:function(){r.customersError&&r.customersError.apply(null,arguments)},customersFinished:function(){r.customersFinished&&r.customersFinished.apply(null,arguments)}};n=$.connection.importHub;for(var i in a)n.client[i]=a[i];return $.connection.hub.start().done(function(){n.server.join(e.enterpriseId)}),signalr={connect:t}});
define('viewmodels/account',["knockout","durandal/app","plugins/router","data/session","data/config","data/permissions","services/userAgent","common/utils"],function(e,t,n,r,a,i,o,s){function u(e){b(e)}function l(){b("")}function c(){l()}function d(){var e=s.getIdFromQuery(),t=s.getIdFromCookie();return""===t&&""!==e&&s.setEnterpriseCodeCookie(e),""!==s.getIdFromCookie()?(setTimeout(function(){n.navigate("smartLogin"),location.reload(!0)},1),!1):!0}function p(){c()}function m(){c(),f()}function f(){$(".version").text(e.T("login.version_")+a.version)}function y(){var e=window.location,t=e.protocol+"//"+e.host+"/"+e.pathname.split("/")[1];"/"!==t.substr(t.length-1)&&(t+="/"),t+=e.search,s.setEnterpriseCodeCookie(I()),window.location.replace(t)}function v(){return l(),I()?$.ajax({type:"POST",url:"api/Account/ValidateEnterprise",contentType:"application/json; charset=utf-8",dataType:"json",data:JSON.stringify({code:I()})}).then(function(e){-1==e?u(T):y()},function(e){u(e.statusText)}):u(h),!1}var g=e.T("account.back_office"),b=e.observable(""),h=e.T("account.account_is_required"),T=e.T("account.account_is_invalid"),I=e.observable(""),E=e.computed(function(){return I()?Array(I().length+1).join("*"):""});return{title:g,continueHandler:v,activate:p,attached:m,account:I,canActivate:d,clear:c,errorMessage:b,accountIdHidden:E}});
define('viewmodels/base/baseViewModel',["jquery","knockout","durandal/system","durandal/events"],function(e,t,n,r){var a=function(e){r.includeIn(this),this.initialize.call(this,e)};return $.extend(a.prototype,{name:"BaseViewModel",defaults:{},initialize:function(e){this.options=$.extend({},this.options,e,this.defaults)},activate:function(){n.log(this.name+" - BaseViewModel - activating")},attached:function(){n.log(this.name+" - BaseViewModel -  attached")},deactivate:function(){n.log(this.name+" - BaseViewModel -  deactivating")},detached:function(){n.log(this.name+" - BaseViewModel -  detached")},compositionComplete:function(){n.log(this.name+" - BaseViewModel -  compositionComplete")},_buildModuleUrl:function(e,t){for(p in t){var n="\\(?\\/:"+p+"\\)?",r=RegExp(n,"ig");e=e.replace(r,t[p]?"/"+t[p]:"")}return e},_findRouteByModuleId:function(e,t){for(var n=null,r=0;r<e.length;r++){var a=e[r];if(a.moduleId===t||a.route===t){n=a;break}if(a.childRoutes&&a.childRoutes.routes&&(n=this._findRouteByModuleId(a.childRoutes.routes,t)))return n}return n}}),a});
define('viewmodels/base/baseListViewModel',["knockout","plugins/router","durandal/system","data/baseCommon","data/common","viewmodels/base/baseViewModel","models/base/entityTableRow","repositories/base/baseRepository","services/dataTableText"],function(e,t,n,r,a,i,o,s,u){function l(){l.superclass.constructor.apply(this,arguments)}return r.extend(l,i),$.extend(l.prototype,{name:"BaseListViewModel",moduleId:"",modelType:o,listContainer:".listContainer",containerSelector:"",title:e.observable(e.T("base/baseListViewModel.list")),pageNo:0,sortOrder:[[0,"asc"]],initGrid:function(){this.options={tableDefinition:{language:u.getLanguage(),processing:!0,info:!0,paging:!0,lengthChange:!1,autoWidth:!1}}},drawCallback:function(){this.onDrawCallback&&this.onDrawCallback(),$(".checkbox",this.view).checkbox($("#checkAll",this.view).prop("checked")),$(this.listContainer,this.view).initializeCheckboxesColumn()},createdRow:function(t,n,r){this.onCreatedRow&&this.onCreatedRow(t,n,r),n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:n.entity.id}),a.attr("data-bind","click: edit, css:{checked: checked()}"),e.applyBindings(n,a[0]),a[0]},initialize:function(){this.initGrid(),this.bindGridCallbacks(),$.extend(this.defaults.tableDefinition,this.options.tableDefinition),l.superclass.initialize.apply(this,arguments)},bindGridCallbacks:function(){this.options.tableDefinition.ajax=this.ajaxLoad.bind(this),this.options.tableDefinition.drawCallback=this.drawCallback.bind(this),this.options.tableDefinition.createdRow=this.createdRow.bind(this)},activate:function(){var e=l.superclass.activate.apply(this,arguments);return n.log(this.name+" activating"),e},attached:function(e){l.superclass.attached.apply(this,arguments),n.log(this.name+" attached"),this.view=e,this.onAttached(),this.setupTable(),this.onSetupTable()},deactivate:function(){l.superclass.deactivate.apply(this,arguments),n.log(this.name+" deactivating")},detached:function(){l.superclass.detached.apply(this,arguments),n.log(this.name+" detached")},getLoadListParams:function(e){return e},loadData:function(){var e=this;this.table.ajax.reload(function(){a.showRightPanelContent(e.containerSelector)})},ajaxLoad:function(e,t,n){e.start||(e.start=e.length*this.pageNo),this.onAjaxLoad(e,n,function(e){t(e)})},resetPaging:function(){this.pageNo=0},applyFilters:function(){this.resetPaging(),this.onApplyFilters&&this.onApplyFilters(),this.loadData()},onApplyFilters:function(){},onAjaxLoad:function(){},onAttached:function(){},onSetupTable:function(){var e=this;this.table.on("page",function(){e.pageNo=e.table.page.info().page}),this.table.on("init",function(t,n){n.oApi._fnPageChange(n,e.pageNo,!0)}),this.table.on("order",function(t,n){e.sortOrder[0][0]=e.table.order()[0][0],e.sortOrder[0][1]=e.table.order()[0][1],n.oApi._fnPageChange(n,e.pageNo,!0)})},setupTable:function(){this.table=$(this.listContainer,this.view).DataTable(this.options.tableDefinition),new $.fn.DataTable.SearchFilter(this.table)}}),l});
define('viewmodels/controls/storesFilter',["knockout","durandal/system","durandal/app","plugins/router","data/config","repositories/businessUnitRepository"],function(e,t,n,r,a,i){function o(t,n,r,a,o){var s=this;s.name=a,s.stores=t,s.needSelectAll=!1,s.needSelectAll=!0,s.labelNotVisible=!1,r&&(s.labelNotVisible=!0),s.divStyle=e.observable("width:380px;float:left;"),r&&s.divStyle(""),s.contStyle=e.observable(" filter_control_cont "),o&&s.contStyle(o),s.storesArr=e.observableArray(),s.initialize=function(){var n=new $.Deferred;return s.storeChanged.pause(),t.removeAll(),i.loadAllBusinessUnitsByEmployeeAsync().then(function(r){if(s.storesArr(r),r&&r.length)for(var a=0;a<r.length;a++)t().push({id:e.observable(r[a].id)});n.resolve(r)}).always(function(){s.storeChanged.resume()}),n.promise()},s.storeChanged=e.pauseableComputed(function(){var e=s.stores();return e}).extend({rateLimit:1e3}),s.createNewBUEmployee=function(){return{id:e.observable()}},s.setupMultiSelect=function(){var t=this;return{vendorPlaceholder:e.T("employees/manage-tabs/generalTab.selectStore"),itemId:"id",createNewArrItem:t.createNewBUEmployee,filter:!0,selectAll:t.needSelectAll,name:t.name,beginUpdate:function(){t.storeChanged.pause()},endUpdate:function(){t.storeChanged.resume()},onCheckAll:function(){t.stores.removeAll();for(var n=0;n<t.storesArr().length;n++)t.stores.push({id:e.observable(t.storesArr()[n].id)})},onUncheckAll:function(){t.stores.removeAll()},placeholder:e.T("employees/manage-tabs/generalTab.selectStore")}}}return o});
define('viewmodels/header',["knockout","durandal/system","durandal/app","plugins/router"],function(e,t,n,r){function a(){var n=r.activeItem();if(n.title){var a=t.isFunction(n.title)?n.title():n.title;u(e.T(a))}else n=r.activeInstruction().config,n.isAppRoute?u(n.name):u(e.T(n.title))}function i(){}function o(){}function s(e,t){t.preventDefault(),t.stopPropagation(),n.trigger("nav:toggle")}var u=e.observable("");return vm={activate:a,attached:i,compositionComplete:o,navigationPath:u,clickButton:s}});
define('viewmodels/adjustment-report/adjustments',["knockout","moment","plugins/router","durandal/system","data/baseCommon","data/common","data/config","common/dateUtils","common/numericUtils","viewmodels/base/baseListViewModel","models/base/entityTableRow","repositories/base/baseRepository","common/dateUtils","viewmodels/controls/storesFilter","services/text","repositories/vendorsRepository","repositories/businessUnitRepository","services/dataTableText","viewmodels/header","models/dateSpan"],function(e,t,n,r,a,i,o,s,u,l,c,d,s,p,m,f,y,v,g,b){function h(){N&&N.ajax&&(M=0,N.ajax.reload())}function T(e,t){var n={VendorId:j(),EmployeeId:L(),Query:C(),Stores:F(),Skip:e.start,Take:e.length,startDate:V().dateFrom.toISOString(),endDate:V().dateTo.toISOString(),orderColumn:e.order[0].column,orderDir:"desc"===e.order[0].dir?1:0};$.post("api/Products/GetAdjustmentReport",n).then(function(e){"function"==typeof t&&(e&&e.data&&(e.data=e.data.map(function(e){return e})),t(e))})}function I(e){n.navigate("adjustment-report-drilldown/"+e)}function E(){N=$("#tbl_adjustment_report").DataTable({processing:!0,serverSide:!0,ajax:T,info:!1,language:v.getLanguage(),paging:!0,displayStart:10*M,lengthChange:!1,autoWidth:!1,columns:[{data:"code",sWidth:"20em"},{data:"date",render:function(e){return s.formatDateTime(e)}},{data:"store"},{data:"employee"},{data:"totalCost",render:function(e){return u.formatCurrency(e)}},{data:"delta"}],order:D,createdRow:function(e,t){e&&t&&t.id&&e.addEventListener("click",function(){I(t.id)})}}),N.on("page",function(){M=N.page.info().page}),N.on("order",function(){D[0][0]=N.order()[0][0],D[0][1]=N.order()[0][1]})}function S(){E()}function x(){f.loadAllAsync().then(function(t){t.splice(0,0,{id:null,name:e.local("storeTransfer.all")}),O(t)}),y.getAdjustmentEmployees().then(function(t){t.splice(0,0,{id:null,name:e.local("storeTransfer.all")}),w(t)})}var A=e.observable(!0),O=e.observableArray(),j=e.observable(),F=e.observableArray().extend({rateLimit:500}),P=new p(F),k=e.observable(),w=e.observableArray(),L=e.observable(),C=e.observable(),N=null,M=0,D=[[0,"asc"]],V=e.observable(new b(t().startOf("day"),t().endOf("day"),e.T("date-filter/date-filter.today")));return P.initialize().fail(function(){i.showError(e.local("agingReport.unexpectedError"),"#agingReportMessages",5e3)}),C.subscribe(h),V.subscribe(h),j.subscribe(h),L.subscribe(h),F.subscribe(h),{loading:A,searchString:C,vendors:O,vendor:j,stores:F,store:k,dateRange:V,employees:w,employee:L,activate:x,storesFilter:P,attached:S}});
define('viewmodels/adjustment-report/drilldown',["knockout","moment","plugins/router","data/common","common/numericUtils","common/dateUtils","models/dateSpan","services/text","repositories/presentationApi/productsRepository","services/dataTableText","viewmodels/header"],function(e,t,n,r,a,i,o,s,u,l){function c(e,t){var n={AdjustmentId:g(),Skip:e.start,Take:e.length};$.post("api/Products/GetAdjustmentDetails",n).then(function(e){"function"==typeof t&&(e&&e.data&&(e.data=e.data.map(function(e){return e})),t(e))})}function d(){y=$("#tbl_adjustment_drilldown").DataTable({processing:!0,serverSide:!0,ajax:c,info:!1,language:l.getLanguage(),paging:!0,lengthChange:!1,autoWidth:!1,columns:[{data:"code",sWidth:"20em"},{data:"name"},{data:"upc"},{data:"sku"},{data:"cost"},{data:"delta"},{data:"reason"}],order:h}),y.on("page",function(){b=y.page.info().page}),y.on("order",function(){h[0][0]=y.order()[0][0],h[0][1]=y.order()[0][1]})}function p(){d()}function m(t){g(t),u.storeTransferDetails(t).then(function(e){e?(T.code(e.code),T.vendor(e.vendor),T.store(e.storeIn),T.date(i.formatDateTime(e.date)),T.employee(e.employee)):(T.code(null),T.vendor(null),T.store(null),T.date(null),T.employee(null))},function(){r.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferDetailsMessage",5e3)})}function f(){window.history.back()}var y,v=e.observable(!1),b=0,g=e.observable(),h=[[0,"asc"]],T={code:e.observable(),date:e.observable(),store:e.observable(),employee:e.observable(),vendor:e.observable()};return{loading:v,activate:m,attached:p,back:f,model:T}});
define('viewmodels/appstore/appDirectory',["knockout","jquery","durandal/app","plugins/router","data/config","data/common","repositories/appDirectoryRepository","repositories/presentationApi/categoriesRepository","plugins/dialog","common/utils","services/userAgent","services/demo"],function(e,t,n,r,a,i,o,s,u,l,c,d){function p(){s.getAppCategories().then(function(e){D(e)})}function m(){_={},N().forEach(function(e){e.visible=!0,e.visibilityCheck&&!e.visibilityCheck()&&(e.visible=!1),_[e.id]=e})}function f(e,t){var n=this;return e||(t=!n.installed(),n.installed(t)),A().then(function(){i.showMessage(t?n.name+" application successfully installed":n.name+" application has been uninstalled","#appDirectoryMessage",3e3),n.afterChangeStatus&&n.afterChangeStatus()},function(){e||n.installed(!t),i.showError("An error occurred","#appDirectoryMessage",5e3)}),u.close(V),n.installed()?!0:void 0}function y(e,t){return e&&_[e]?(_[e].installed(t&&t.installed||!1),_[e].enabled(t&&t.enabled||!1),void 0):!1}function v(e){V=new q([],{style:U},"views/appstore/apps/"+e.template,e),u.show(V)}function g(){return c.checkBrowserCompatibility()}function b(){return e.T("unsupported.qb_yourVersion",null,[c.browser,c.browserMajorVersion,c.os,c.osVersion])}function h(){return t.when(o.loadAppDirectory()).then(function(t){t.externalApps.forEach(function(t){var n=e.utils.arrayFirst(N(),function(e){return e.key===t.key});n?N.replace(n,I(t)):N.push(I(t))}),m()},function(){i.showError("An error occurred","#appDirectoryMessage",5e3)})}function T(e,t){if(null==e||0==e.length)return"";for(var n=t||name,r=null,i=0;i<e.length;i++){var o=e[i];if(o.languageId.toUpperCase()==a.language.toUpperCase())return o[n];o.languageId.toUpperCase()==a.defaultLanguage.toUpperCase()&&(r=e[i])}return r.name}function I(t){var r={id:t.id,key:t.key,type:t.type,serverKey:t.key,categoryId:t.categoryId||"",installed:e.observable(t.isInstalled),enabled:e.observable(t.isEnabled),name:T(t.names,"name"),company:t.company,description:T(t.names,"description"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:t.image,template:t.template,changeCategory:function(){this.installed()===!0?(this.categoryId=t.categoryId=this.categoryId||"",o.saveApp(t)):t.categoryId=this.categoryId},changeAppStatus:function(){this.installed()?this.disconnectApp():this.connectApp()},afterChangeStatus:function(){n.trigger("app:3rd:changed",this)},connectApp:function(){var e=this;o.installApp(t).then(function(){i.showMessage(e.name+" application was successful installed to eHopper","#appDirectoryMessage",3e3),e.installed(!0),e.afterChangeStatus()},function(){i.showError("An error occurred","#appDirectoryMessage",5e3)}),u.close(V)},disconnectApp:function(){var e=this;u.close(V),i.showConfirmation("Confirmation","Do you want to uninstall "+e.name+" from eHopper?",function(){o.uninstallApp(t).then(function(){i.showMessage(e.name+" application was successful uninstalled from eHopper","#appDirectoryMessage",3e3),e.installed(!1),e.afterChangeStatus()},function(){i.showError("An error occurred","#appDirectoryMessage",5e3)}),u.close(V)},function(){u.show(V)})}};return r}function E(){return t.when(a.configLoading,o.loadAppStatus()).then(function(e,t){y("marketing-and-loyalty",{installed:t[0].marketingAndLoyalty,enabled:!0}),C[P].forEach(function(n){_[n]&&y(n,{installed:t[0][_[n].serverKey],enabled:e[0].isDemo||e[0].planCode===P})}),y("card-payment",{installed:t[0].cardPaymentApp,enabled:e[0].isDemo||e[0].planCode===L||e[0].planCode===P}),F(!(e[0].planCode===P)||e[0].planCode===w)},function(){i.showError("An error occurred","#appDirectoryMessage",5e3)})}function S(e){return h().then(E).then(function(){return e&&(_[e]&&"function"==typeof _[e].enabled&&_[e].enabled()?v(_[e]):r.navigate("app-directory")),!0})}function x(){p()}function A(){var e={enterpriseId:a.enterpriseId};return Object.keys(_).forEach(function(t){e[_[t].serverKey]=_[t].installed()}),o.saveAppStatus(e).then(function(){return a.reload()})}var O={"false":"Install","true":"Uninstall"},j=e.observable("starter"),F=e.observableArray(!1),k={starter:"https://markbox-ehopper-test.chargebee.com/hosted_pages/plans/Starter-Ehopper",grow:"https://markbox-ehopper-test.chargebee.com/hosted_pages/plans/Ehopper-Grow"},P=2,w=3,L=4,C={},N=e.observableArray(),D=e.observableArray(),M={id:"quickbooks",serverKey:"quickbooksApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/quickbooks.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"logo-qbo.png",template:"quickbooksApp.html",visibilityCheck:function(){return!0},changeAppStatus:function(){this.installed()?this.disconnectApp():this.connectApp()},connectApp:function(){var e=this,t=f.bind(this),n=this.installed(),r=l.popupWindow("QB/Connect","QbToEhopper",800,600),a=setInterval(function(){r.closed&&(clearInterval(a),E().then(function(){e.installed()!==n&&t(!0,e.installed())}))},300)},disconnectApp:function(){var n=this,r=this.installed(),a=f.bind(this),o=t.ajax({type:"POST",url:"QB/Disconnect",async:!0});o.then(function(e){e.isSuccessful?E().then(function(){n.installed()!==r&&a(!0,n.installed())}):i.showError(e.errorMessage,"#appDirectoryMessage",5e3)},function(){i.showError(e.T("quickbooks.error_occured"),"#appDirectoryMessage",5e3)})},afterChangeStatus:function(){n.trigger("app:quickbooksChanged")}};c.checkBrowserCompatibility()&&N([{id:"marketing-and-loyalty",serverKey:"marketingAndLoyalty",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/marketingAndLoyalty.name"),company:e.T("apps/marketingAndLoyalty.company"),packageName:e.T("apps/marketingAndLoyalty.packageName"),packageDescription:"",image:"marketing.png",template:"marketingAndLoyalty.html",marketingPackage:j,links:k,marketingPackageUrl:e.computed(function(){return k[j()]})},{id:"clock-in",serverKey:"clockInApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/clickInClockOut.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"clock in.png",template:"clockInApp.html",afterChangeStatus:function(){n.trigger("app:clockInChanged")}},{id:"multi-register",serverKey:"multipleRegistersApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/updateOrderOnAnyRegister.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"update order.png",template:"multipleRegistersApp.html"},{id:"control-number",serverKey:"controlNumberApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/controlNumber.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"ControlNum.png",template:"controlNumberApp.html"},{id:"order-receiving",serverKey:"poReceivingApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/orderReceiving.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"purchase-order-receiving.png",template:"poReceivingApp.html",afterChangeStatus:function(){n.trigger("app:poReceivingChanged")}},{id:"store-transfer",serverKey:"storeTransferApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/storeTransfer.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"store-transfer.png",template:"storeTransferApp.html",afterChangeStatus:function(){n.trigger("app:storeTransferChanged")}},{id:"card-payment",serverKey:"cardPaymentApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/creditDebitCard.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"card-payment.png",template:"cardPaymentApp.html"},{id:"order-fulfilment",serverKey:"orderFulfilmentApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/orderFulfilment.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"delivery-options.png",template:"orderFulfilment.html"},{id:"menu-builder",serverKey:"menuBuilderApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/menuBuilder.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"menu-builder.png",template:"menuBuilder.html",afterChangeStatus:function(){n.trigger("app:menuBuilderChanged")}},{id:"variants",serverKey:"variantApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/variants.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"product-variants.png",template:"variantsApp.html"},{id:"ebt-card",serverKey:"ebtCardApp",installed:e.observable(!1),enabled:e.observable(!1),name:e.T("apps/ebtCart.name"),company:e.T("apps.eHopper"),packageName:e.T("apps.freedomPackage"),packageDescription:e.T("apps.freedomPlanOnly"),image:"card-payment.png",template:"ebtCardPaymentApp.html"}]),M.visibilityCheck()&&N.push(M);var $,V=null,U={"margin-left":(t(window).width()-400)/2+"px","margin-top":(t(window).height()-205)/2+"px","background-color":"#FFFFFF;",width:"750px"},_={};C[P]=["clock-in","multi-register","control-number","order-receiving","store-transfer","card-payment","variants","quickbooks","menu-builder","order-fulfilment","ebt-card"],m();var q=function(e,n,r,a){this.options=e,this.autoclose=!0,this.settings=t.extend({},n),this.model=a,this.viewUrl=r,this.appAction=O,this.categories=D,this.changeAppStatus=a.changeAppStatus?a.changeAppStatus.bind(a):f.bind(a,!1,!1),q.superclass.constructor.apply(this,arguments)};return l.extend(q,u.MessageBox),q.prototype.getView=void 0,$={appAction:O,activate:S,attached:x,supportedBrowser:g,yourBrowser:b,apps:N,appClick:v,categories:D,isEssentialPlan:F,goFreedom:d.goFreedom}});
define('viewmodels/categories/models/categoryNameModel',["knockout","models/businessObjectNameModel","common/utils"],function(e,t,n){function r(t,n){r.superclass.constructor.apply(this,arguments),this.shortName=e.observable(t.shortName),this.setupUniqueNameConstraint(t,n,e.T("categories/categoryManage.category_name_must_be_unique"))}return n.extend(r,t),r.prototype.toFlatModel=function(){var e=r.superclass.toFlatModel.apply(this,arguments);return e.categoryId=this.categoryId,e},r});
define('viewmodels/categories/models/categoryModel',["knockout","viewmodels/categories/models/categoryNameModel"],function(e,t){function n(n){var r=this;r.id=n.id;var a=n.names.map(function(e){return new t(e,n.otherNames)});r.names=e.observableArray(a),r.color=e.observable(n.color),r.isActive=e.observable(n.isActive),r.isAppCategory=n.isAppCategory,r.lobId=e.observable(n.lobId).extend({required:{message:e.T("common.thisFieldIsRequired")}}),r.lobs=e.observableArray(n.lobs);for(var i=0;i<r.lobs().length;i++)r.lobs()[i].isActive||(r.lobs()[i].name=r.lobs()[i].name+" ("+e.T("common.inactive")+")");r.appsData={};var o=n;Object.keys(o.appsData).forEach(function(t){r.appsData[t]=e.observable();var n=o.appsData[t],a={};Object.keys(n).forEach(function(t){a[t]=e.observable(n[t])}),r.appsData[t](a)}),r.errors=e.validation.group(r),r.toFlatModel=function(){var t={};return Object.keys(r.appsData).forEach(function(n){t[n]={};var a=e.unwrap(r.appsData[n]);Object.keys(a).forEach(function(r){t[n][r]=e.unwrap(a[r])})}),{id:r.id,isActive:r.isActive(),isAppCategory:r.isAppCategory,lobId:r.lobId(),color:r.color(),appsData:t,names:Enumerable.From(r.names()).Where(function(e){return e.name().length>0}).Select(function(e){return e.toFlatModel()}).ToArray()}}}return n});
define('viewmodels/appstore/appSettings',["knockout","jquery","durandal/app","plugins/router","data/config","data/common","repositories/appDirectoryRepository","repositories/presentationApi/categoriesRepository","plugins/dialog","services/ssoLoginService","viewmodels/categories/models/categoryModel"],function(e,t,n,r,a,i,o,s,u,l){function c(){r.navigate("app-directory")}function d(e){if(e){var t=o.getAppById(e);return t.then(function(e){(null===e.categoryId||void 0===e.categoryId)&&(e.categoryId="");var t=l.storage.getItemObject("SsoTokenKey");e.settingsUrl+="?access_token="+t,p(e)})}}var p=e.observable();return{activate:d,model:p,cancel:c}});
define('viewmodels/base/BaseManageViewModel',["knockout","durandal/app","plugins/router","durandal/system","data/baseCommon","data/common","viewmodels/base/baseViewModel","models/base/baseModel","repositories/base/baseRepository"],function(e,t,n,r,a,i,o,s,u){function l(){l.superclass.constructor.apply(this,arguments)}return a.extend(l,o),$.extend(l.prototype,{name:"BaseManageViewModel",savingMsg:e.T("base/baseManageViewModel.error_saving_"),modelType:s,moduleId:"",parentModuleId:"",parentRoute:null,resetOnActivate:!0,route:null,updateTitle:!0,initialize:function(){l.superclass.initialize.apply(this,arguments),this.returnParams={},this.errors=e.observableArray(),this.completeJobs=[],this.modelReady=e.observable(!1),this.repo=new u({model:this.modelType.prototype}),this.resolveRoutes(),this.initModelProperties()},_setModelReady:function(e){this.modelReady(e)},activate:function(e){l.superclass.activate.apply(this,arguments),r.log(this.name+" - BaseManageViewModel - activating"),this.completeJobs.length=0,this.resetOnActivate&&this.reset();var t=n.activeInstruction();return t.queryParams&&(t.queryParams.returnTo&&(this.returnParams.returnTo=t.queryParams.returnTo,this.parentModuleId=t.queryParams.returnTo,this.parentRoute=this._findRouteByModuleId(n.routes,this.parentModuleId)),t.queryParams.event&&(this.returnParams.event=t.queryParams.event),t.queryParams.returnViewModel&&(this.returnParams.returnViewModel=t.queryParams.returnViewModel)),this.createModel(e)},attached:function(){return l.superclass.attached.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  attached"),this._whaitToModelReady()},deactivate:function(){l.superclass.deactivate.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  deactivating")},detached:function(){l.superclass.detached.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  detached")},compositionComplete:function(){l.superclass.compositionComplete.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  compositionComplete")},_whaitToModelReady:function(){var e=this;return $.when.apply($,e.completeJobs).then(function(){e._setModelReady(!0)})},resolveRoutes:function(){var e=n.routes;this.route=this._findRouteByModuleId(e,this.moduleId),this.parentModuleId?this.parentRoute=this._findRouteByModuleId(e,this.parentModuleId):this.route&&this.route.parent&&(this.parentRoute=this._findRouteByModuleId(e,this.route.parent)),this.parentRoute||r.log(this.name+" - parentModule is not defined.")},close:function(r){if(this.parentRoute)n.navigate(this.parentRoute.route);else{if(this.returnParams.event){var a=r;e.isObservable(a)&&(a=a()),a&&(this.returnParams.itemType=a.entityName(),this.returnParams.itemId=a.getId(),this.returnParams.items=a.getEntities()),t.trigger(this.returnParams.event,this.returnParams)}this.returnParams.returnTo?n.navigate(this.returnParams.returnTo):n.navigateBack()}},initModelProperties:function(){this.options.model?(this.model=this.options.model,this.dataContext=this.model.getDataContext(this.options.dataContextPath)):this.createNewModel(),this.initModel()},reset:function(){this.returnParams={},this.model&&this.model.reset&&this.model.reset()},createNewModel:function(){var e=this;e.lcfPromise=this.loadComputedFields(this.modelType),e.model=new e.modelType({computedPromise:e.lcfPromise}),e.lcfPromise.then(function(){e.dataContext=e.model.getDataContext(e.options.dataContextPath)})},initModel:function(){},loadModelFailed:function(){},fetchModel:function(e){var t=this;return this.repo.load({id:e},function(e){return t.model.loadFromServerEntity(e),t.initModel(),t.modelLoaded(t.model),t.model},function(e,n,r){t.loadModelFailed&&t.loadModelFailed(e,n,r)})},createModel:function(t){var n=this,r=$.Deferred();return n.modelLoadedPromise=r.promise(),t?(this.fetchModel(t).then(function(){r.resolve(n.model)}),this.updateTitle&&(this.getBaseTitle?this.title(this.baseTitle()):this.title(e.T("base/baseManageViewModel.edit_")+this.modelType.prototype.entityName()))):(this.initModelProperties(),n.modelLoaded(n.model),this.updateTitle&&(this.getBaseTitle?this.title(this.baseTitle()):this.title(e.T("base/baseManageViewModel.new_")+this.modelType.prototype.entityName())),r.resolve(n.model)),r},loadComputedFields:function(e){var t=$.Deferred();this.resolveComputedFields(t,e);var n=t.promise();return n},resolveComputedFields:function(){},modelLoaded:function(){},show:function(e,t){var r="";if(t)for(p in t)r+=p+"="+t[p]+"&";var a;e?(a=this._buildModuleUrl(this.route.route,{id:e}),n.navigate(a+(r?"?"+r:""))):(a=this._buildModuleUrl(this.route.route,{id:""}),n.navigate(a+(r?"?"+r:"")))},cancel:function(){this.close()},validate:function(){var e=this,t=e.validationContext||e.dataContext,n=t.isValid();return n||t.errors.showAllMessages(),n},clearErrors:function(){this.errors([])},afterSave:function(e){var t=this;e?t.close(e):t.close(t.model)},save:function(t){var n=this;return n.clearErrors(),n.validate()?this.repo.save(this.model).done(function(e){var r=n.model;t?(r=new n.modelType({computedPromise:n.lcfPromise}),r.loadFromServerEntity(e)):n.model.loadFromServerEntity(e),n.afterSave(r)}).fail(function(t,a){var i=t.responseJSON,o="";if(i&&i.message){if(o=e.T(i.message),o=n.savingMsg+n.modelType.prototype.entityName()+" - "+o,n.errors.push(o),i.modelState)for(var s in i.modelState)for(var u=i.modelState[s],l=0;l<u.length;l++)n.errors.push(u[l]),o+="; "+u[l];r.error(o)}else r.error(a)}):void 0}}),l});
define('viewmodels/base/baseManageCompositeViewModel',["knockout","durandal/system","data/baseCommon","viewmodels/base/BaseManageViewModel"],function(e,t,n,r){function a(){a.superclass.constructor.apply(this,arguments)}return n.extend(a,r),$.extend(a.prototype,{name:"BaseManageCompositeViewModel",tabsContainer:"#tabs",tabsContentContainer:"#tabs-content",initialize:function(){a.superclass.initialize.apply(this,arguments)},activate:function(){var e=a.superclass.activate.apply(this,arguments);t.log(this.name+" - BaseManageCompositeViewModel - activating");var n=this;this.configTabsJobs=this.buildTabConfig();var r=$.Deferred();return n.completeJobs.push(r.promise()),e&&n.completeJobs.push(e),$.when.apply($,this.configTabsJobs).then(function(){r.resolve(n.tabConfigs)}),$.when.apply($,n.completeJobs)},attached:function(){var e=a.superclass.attached.apply(this,arguments);t.log(this.name+" - BaseManageCompositeViewModel -  attached");var n=this;return e.then(function(){return n.initTabsAfterViewLoads()})},initTabsAfterViewLoads:function(){var e=this;return $.when.apply($,this.configTabsJobs).then(function(){e.initTabs()})},deactivate:function(){a.superclass.deactivate.apply(this,arguments),t.log(this.name+" - BaseManageCompositeViewModel -  deactivating"),this.$tabsContainer=$(this.tabsContainer),this.$tabsContentContainer=$(this.tabsContentContainer),this.$tabsContainer.html(),this.$tabsContentContainer.html()},detached:function(){a.superclass.detached.apply(this,arguments),t.log(this.name+" - BaseManageCompositeViewModel -  detached")},buildTabConfig:function(){this.tabConfigs=e.observableArray();var n=this,r=[];return $.each(this.options.tabs,function(a,i){var o=t.acquire(i.model);o.done(function(t){var r=new t({model:n.model,dataContextPath:i.dataContextPath}),a={id:i.id,containerSelector:"#"+i.id,name:i.title,model:i.model,view:i.view,config:i,viewModel:e.observable({view:i.view,model:r})};n.tabConfigs.push(a)}),r.push(o)}),r},initTabs:function(){this.$tabsContainer=$(this.tabsContainer),this.$tabsContentContainer=$(this.tabsContentContainer),this.tabConfigs.sort(function(e,t){return e.config.order>t.config.order}),this.tabControl=this.$tabsContainer.tabControl({tabs:this.tabConfigs()})},goToTab:function(e){null!=this.tabControl&&this.tabControl.goToTab(e)},save:function(){var e=!1;this.clearErrors();for(var t=0;t<this.tabConfigs().length;t++){var n=this.tabConfigs()[t];if(!n.viewModel().model.validate()){null!=this.tabControl&&this.tabControl.setTabErrors(t),e=!0;break}null!=this.tabControl&&this.tabControl.clearTabErrors(t)}return e?void 0:a.superclass.save.apply(this,arguments)}}),a});
define('viewmodels/base/baseManageViewModel',["knockout","durandal/app","plugins/router","durandal/system","data/baseCommon","data/common","viewmodels/base/baseViewModel","models/base/baseModel","repositories/base/baseRepository"],function(e,t,n,r,a,i,o,s,u){function l(){l.superclass.constructor.apply(this,arguments)}return a.extend(l,o),$.extend(l.prototype,{name:"BaseManageViewModel",savingMsg:e.T("base/baseManageViewModel.error_saving_"),modelType:s,moduleId:"",parentModuleId:"",parentRoute:null,resetOnActivate:!0,route:null,updateTitle:!0,initialize:function(){l.superclass.initialize.apply(this,arguments),this.returnParams={},this.errors=e.observableArray(),this.completeJobs=[],this.modelReady=e.observable(!1),this.repo=new u({model:this.modelType.prototype}),this.resolveRoutes(),this.initModelProperties()},_setModelReady:function(e){this.modelReady(e)},activate:function(e){l.superclass.activate.apply(this,arguments),r.log(this.name+" - BaseManageViewModel - activating"),this.completeJobs.length=0,this.resetOnActivate&&this.reset();var t=n.activeInstruction();return t.queryParams&&(t.queryParams.returnTo&&(this.returnParams.returnTo=t.queryParams.returnTo,this.parentModuleId=t.queryParams.returnTo,this.parentRoute=this._findRouteByModuleId(n.routes,this.parentModuleId)),t.queryParams.event&&(this.returnParams.event=t.queryParams.event),t.queryParams.returnViewModel&&(this.returnParams.returnViewModel=t.queryParams.returnViewModel)),this.createModel(e)},attached:function(){return l.superclass.attached.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  attached"),this._whaitToModelReady()},deactivate:function(){l.superclass.deactivate.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  deactivating")},detached:function(){l.superclass.detached.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  detached")},compositionComplete:function(){l.superclass.compositionComplete.apply(this,arguments),r.log(this.name+" - BaseManageViewModel -  compositionComplete")},_whaitToModelReady:function(){var e=this;return $.when.apply($,e.completeJobs).then(function(){e._setModelReady(!0)})},resolveRoutes:function(){var e=n.routes;this.route=this._findRouteByModuleId(e,this.moduleId),this.parentModuleId?this.parentRoute=this._findRouteByModuleId(e,this.parentModuleId):this.route&&this.route.parent&&(this.parentRoute=this._findRouteByModuleId(e,this.route.parent)),this.parentRoute||r.log(this.name+" - parentModule is not defined.")},close:function(r){if(this.parentRoute)n.navigate(this.parentRoute.route);else{if(this.returnParams.event){var a=r;e.isObservable(a)&&(a=a()),a&&(this.returnParams.itemType=a.entityName(),this.returnParams.itemId=a.getId(),this.returnParams.items=a.getEntities()),t.trigger(this.returnParams.event,this.returnParams)}this.returnParams.returnTo?n.navigate(this.returnParams.returnTo):n.navigateBack()}},initModelProperties:function(){this.options.model?(this.model=this.options.model,this.dataContext=this.model.getDataContext(this.options.dataContextPath)):this.createNewModel(),this.initModel()},reset:function(){this.returnParams={},this.model&&this.model.reset&&this.model.reset()},createNewModel:function(){var e=this;e.lcfPromise=this.loadComputedFields(this.modelType),e.model=new e.modelType({computedPromise:e.lcfPromise}),e.lcfPromise.then(function(){e.dataContext=e.model.getDataContext(e.options.dataContextPath)})},initModel:function(){},loadModelFailed:function(){},fetchModel:function(e){var t=this;return this.repo.load({id:e},function(e){return t.model.loadFromServerEntity(e),t.initModel(),t.modelLoaded(t.model),t.model},function(e,n,r){t.loadModelFailed&&t.loadModelFailed(e,n,r)})},createModel:function(t){var n=this,r=$.Deferred();return n.modelLoadedPromise=r.promise(),t?(this.fetchModel(t).then(function(){r.resolve(n.model)}),this.updateTitle&&(this.getBaseTitle?this.title(this.baseTitle()):this.title(e.T("base/baseManageViewModel.edit_")+this.modelType.prototype.entityName()))):(this.initModelProperties(),n.modelLoaded(n.model),this.updateTitle&&(this.getBaseTitle?this.title(this.baseTitle()):this.title(e.T("base/baseManageViewModel.new_")+this.modelType.prototype.entityName())),r.resolve(n.model)),r},loadComputedFields:function(e){var t=$.Deferred();this.resolveComputedFields(t,e);var n=t.promise();return n},resolveComputedFields:function(){},modelLoaded:function(){},show:function(e,t){var r="";if(t)for(p in t)r+=p+"="+t[p]+"&";var a;e?(a=this._buildModuleUrl(this.route.route,{id:e}),n.navigate(a+(r?"?"+r:""))):(a=this._buildModuleUrl(this.route.route,{id:""}),n.navigate(a+(r?"?"+r:"")))},cancel:function(){this.close()},validate:function(){var e=this,t=e.validationContext||e.dataContext,n=t.isValid();return n||t.errors.showAllMessages(),n},clearErrors:function(){this.errors([])},afterSave:function(e){var t=this;e?t.close(e):t.close(t.model)},save:function(t){var n=this;return n.clearErrors(),n.validate()?this.repo.save(this.model).done(function(e){var r=n.model;t?(r=new n.modelType({computedPromise:n.lcfPromise}),r.loadFromServerEntity(e)):n.model.loadFromServerEntity(e),n.afterSave(r)}).fail(function(t,a){var i=t.responseJSON,o="";if(i&&i.message){if(o=e.T(i.message),o=n.savingMsg+n.modelType.prototype.entityName()+" - "+o,n.errors.push(o),i.modelState)for(var s in i.modelState)for(var u=i.modelState[s],l=0;l<u.length;l++)n.errors.push(u[l]),o+="; "+u[l];r.error(o)}else r.error(a)}):void 0}}),l});
define('viewmodels/categories/categoriesList',["knockout","plugins/router","repositories/presentationApi/categoriesRepository","data/common","services/dataTableText"],function(e,t,n,r,a){function i(){return O()?"app":""}function o(){return e.T(i()+"categories/categoriesList.are_you_sure_you_want_to_delete_selected_category")}function s(t){var n=O()?e.T("appcategories/categoriesList.the_category_has_apps_assigned_please_delete_those_apps_first",null,t):e.T("categories/categoriesList.the_category_has_products_assigned_please_delete_those_products_first",null,t);return n}function u(){return e.T(i()+"categories/categoriesList.are_you_sure_you_want_to_delete_selected_categories")}function l(t){var n=O()?e.T("appcategories/categoriesList.the_category_has_apps_assigned_please_delete_those_apps_first",null,t):e.T("categories/categoriesList.the_category_has_products_assigned_please_delete_those_products_first",null,t);return n}function c(a){var i=this;i.category=e.observable(a),i.rowNum=e.observable(),i.edit=function(){t.navigate(I("category/"+i.category().id))},i.selected=e.observable(!1),i.selectItem=function(e,t){t.stopPropagation(),e.selected(!e.selected()),p()},i.deleteRow=function(e,t){t.stopPropagation(),r.showConfirmation(void 0,o,function(){n.remove(i.category().id).then(function(e){e?P.row("#row"+i.category().id).remove().draw(!1):r.showError(s(i.category().name),"#messages")})})}}function d(){t.navigate(I("category"))}function p(){M(m().length>0)}function m(){if(w){var e=w.filter(function(e){return e.selected()}).map(function(e){return e.category().id});return e}return[]}function f(e){if(w){var t=w.filter(function(t){return t.category().id===e});if(t&&t.length>0)return t[0].category().name}return""}function y(e){r.showError(e.join("<br />"),"#messages",5e3)}function v(e){for(var t=0;t<w.length;t++)if(w[t].category().id==e){w.splice(t,1);break}}function g(e){P.row("#row"+e).remove().draw(!1),v(e)}function b(){var e=m();e.length>0&&r.showConfirmation(void 0,u(),function(){n.removeMany(e).then(function(e){if(e.removed&&e.removed.forEach(function(e){g(e)}),e.errors){var t=[];e.errors.forEach(function(e){var n=e.data,r=l(f(n));t.push(r)}),t.length>0&&y(t)}})})}function h(e,t){e.start=j*e.length;var a=O()?n.getAppCategories():n.get();return a.then(function(e){"function"==typeof t&&(e&&(e=e.map(function(e){return new c(e)})),w=e,t({data:e}))}).always(function(){r.showRightPanelContent(F)}),a.abort=function(){},a}function T(){P=$("#categoriesTable",A).DataTable({processing:!0,info:!1,paging:!0,lengthChange:!1,autoWidth:!1,ajax:h,language:a.getLanguage(),columns:[{bSortable:!1,bSearchable:!1,data:null,render:function(e){return'<div class="checkbox"><input type="checkbox" id="chk'+e.category().id+'" data-bind="checked: selected"><label for="chk'+e.category().id+'" data-bind="click: selectItem"></label></div>'}},{data:"category().name"},{data:"category().lobName",bSearchable:!1},{data:"category().isActive",render:function(t){return 1==t?e.T("categories/categoriesList.active"):e.T("categories/categoriesList.inactive")},sWidth:"150px",bSearchable:!1},{data:null,render:function(){return'<input type="button" class="delete-row-button" data-bind="click: deleteRow" />'},width:"50px",className:"center no-padding",bSortable:!1,bSearchable:!1}],order:L,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:"row"+n.category().id}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),0!==j&&P.page(j).draw(!1),new $.fn.DataTable.SearchFilter(P),P.on("page",function(){C(!1),j=P.page.info().page}),P.on("order",function(e,t){C(!1),L[0][0]=P.order()[0][0],L[0][1]=P.order()[0][1],t.oApi._fnPageChange(t,j,!0)})}function I(e){var t=O()?"app"+e+"/:isAppMode":e;return t}function S(e){C(!1),O(":isAppMode"===e),k=!0}function E(){k=!1}function x(e){k===!0&&(A=e,r.showLoader(F),T())}var A,P,k=!1,O=e.observable(!1),w=[],F="div.pane-right > div.categories",j=0,C=e.observable(),L=[[1,"asc"]],M=e.observable(!1);return C.subscribe(function(e){w&&(w.forEach(function(t){$("#chk"+t.category().id+" + label").is(":visible")&&t.selected(e)}),p())}),{activate:S,deactivate:E,attached:x,isAppMode:O,getRoute:I,getKeyPrefix:i,showNewCategory:d,selectAll:C,deleteSelected:b,hasSelected:M}});
define('viewmodels/languageSelector',["knockout","data/config"],function(e,t){function n(){a(t.defaultLanguage)}function r(e){a(e.id)}var a=e.observable(),i=e.observableArray();return t.fetchConfig().then(function(){i(t.languages)}),{activate:n,languages:i,selectedLanguage:a,selectLanguage:r}});
define('viewmodels/categories/categoryManage',["knockout","plugins/router","repositories/presentationApi/categoriesRepository","repositories/categoriesRepository","data/common","viewmodels/categories/models/categoryModel","viewmodels/languageSelector"],function(e,t,n,r,a,i,o){function s(){return v()?"app":""}function u(t,r){v(":isAppMode"===r);var a;return t?(a=n.getById(t),g(e.T(s()+"categories/categoryManage.edit_category"))):(a=v()?n.createAppCategory():n.create(),g(e.T(s()+"categories/categoryManage.new_category"))),a.then(function(e){if(e.lobs){var t=e.lobs.filter(function(t){return t.id===e.lobId});0==t.length&&(e.lobId="")}else e.lobId="";e.isAppCategory=v(),h(new i(e)),b=null})}function l(e){return event.preventDefault(),e.handled===!0?!1:($("input#color1 + .cp-container.swatches-active").toggleClass("visible"),e.handled=!0,void 0)}function c(){$("input#color1 + .cp-container.swatches-active").removeClass("visible")}function d(t){$(".checkbox",t).checkbox(),$("input#color1 + .cp-container.swatches-active").length<1&&($("input#color1",t).ColorPickerSliders({flat:!0,placement:"bottom",color:h().color()?"rgb("+h().color()+")":"#ffffff",swatches:["#6d2e28","#903643","#b96846","#b97b41","#828134","#387355","#a73b3c","#bc4559","#da644f","#da964d","#9ba138","#4cab70","#d55356","#df536c","#f1785e","#f5b15f","#bfba42","#81bf7d","#f05d6d","#df8b8b","#fe9663","#f6cc24","#c9d15e","#9ccb7e","#494949","#ae69e2","#6c76e1","#698fcd","#37adbe","#7fb5b2","#b7b7b7","#406cb7","#515a97","#5675af","#6292b4","#40bdad","#e0e0e0","#2e487e","#373079","#6072a3","#537e96","#2e8e83","#ffffff","#434f75","#4b516d","#37578d","#265972","#75978f"],customswatches:!1,order:{},size:"large",previewformat:"rgb",titleswatchesreset:e.T(s()+"categories/categoryManage.select_color"),onchange:function(e,t){b=t.tiny._r+","+t.tiny._g+","+t.tiny._b}}),$("input#color1",t).on("touchend click",l),$("div.cp-swatch",t).on("touchend click",c))}function p(e){var t=v()?"app"+e+"/:isAppMode":e;return t}function m(){b&&h().color(b),0==h().errors().length?("255,255,255"==h().color()&&h().color(null),n.save(h().toFlatModel()).then(function(e){0===e.length?(r.resetCategoriesList(),y()):e.forEach(function(e){a.showError(e,"#saveMessages",5e3)})})):h().errors.showAllMessages()}function f(){y()}function y(){t.navigate(p("categories"))}var v=e.observable(!1),g=e.observable(e.T(s()+"categories/categoryManage.new_category")),b=null,h=e.observable();return{activate:u,attached:d,getRoute:p,getKeyPrefix:s,save:m,cancel:f,title:g,model:h,langs:o}});
define('viewmodels/categories/categoryManageNew',["knockout","plugins/router","durandal/system","data/common","data/baseCommon","viewmodels/base/baseManageViewModel","models/categoryModel","repositories/base/baseRepository"],function(e,t,n,r,a,i,o,s){function u(){u.superclass.constructor.apply(this,arguments)}return a.extend(u,i),$.extend(u.prototype,{name:"CategoryManage",moduleId:"viewmodels/categories/categoryManage",modelType:o,title:e.observable(e.T("categories/categoryManageNew.new_category")),departmentsList:e.observableArray(),initialize:function(){u.superclass.initialize.apply(this,arguments),this.departmentsRepo=new s({modelDesc:{entityType:"Product",entityName:"Lob"}})},activate:function(){u.superclass.activate.apply(this,arguments),n.log(this.name+" activating");var e=this;e.departmentsList().length||this.departmentsRepo.load({},function(t){e.departmentsList(t.slice())})},attached:function(e){u.superclass.attached.apply(this,arguments),n.log(this.name+" attached"),$(".checkbox",e).checkbox()},deactivate:function(){u.superclass.deactivate.apply(this,arguments),n.log(this.name+" deactivating")},detached:function(){u.superclass.detached.apply(this,arguments),n.log(this.name+" detached")}}),new u});
define('viewmodels/customers/importCustomers',["knockout","durandal/app","plugins/router","durandal/system","data/baseCommon","data/common","viewmodels/base/baseViewModel","data/config","signalr/signalr-importHub"],function(e,t,n,r,a,i,o,s,u){function l(){l.superclass.constructor.apply(this,arguments)}return a.extend(l,o),$.extend(l.prototype,{name:"CustomersImportViewModel",importErrorMsg:e.T("customers/importCustomers.error_importing_"),containerSelector:".import-customers",initialize:function(){l.superclass.initialize.apply(this,arguments),this.createModel(),u.connect("customers",this.onImportFinished.bind(this),this.onImportProgress.bind(this),this.onImportError.bind(this),this.onImportStarted.bind(this))},activate:function(){l.superclass.activate.apply(this,arguments),r.log(this.name+" - activating")},attached:function(){l.superclass.attached.apply(this,arguments),r.log(this.name+" - attached"),this.reset();var t=this.model();$("<button/>").addClass("btn btn-primary").prop("disabled",!0).text(e.T("customers/importCustomers.processing")).on("click",function(){var t=$(this),n=t.data();t.off("click").text(e.T("customers/importCustomers.abort")).on("click",function(){t.remove(),n.abort()}),n.submit().always(function(){t.remove()})}),$("#importCustomersFile").fileupload({url:"api/Upload/UploadFile",dataType:"json",autoUpload:!1,acceptFileTypes:/(\.|\/)(csv)$/i,maxFileSize:s.importMaxFileSize,messages:{maxFileSize:e.T("customers/importCustomers.file_is_too_big_max_size_is_mb_please_split_it_to_smaller_files_and_update_them_individually",null,(s.importMaxFileSize/1048576).toFixed(2))}}).on("fileuploadadd",function(e,n){$.each(n.files,function(e,r){t.data(n),t.file(r.name)})}).on("fileuploadprocessalways",function(n,r){var a=r.index,i=r.files[a];t.error(""),t.message("");var o="";o=i.errorId?e.T(i.errorId,null,i.parameters):i.error,o&&(t.error(o),t.data(),t.file("")),t.error()||t.readyForUpload(!0)}).on("fileuploadprogressall",function(e,n){var r=parseInt(100*(n.loaded/n.total),10);t.uploadProgress(r)}).on("fileuploaddone",function(n,r){t.isUploading(!1),t.uploadProgress(0),t.error(""),t.message(""),$.each(r.result.files,function(n,r){var a="";a=r.errorId?e.T(r.errorId,null,r.parameters):r.error,a&&(t.error(a),t.data(),t.file(""))})}).on("fileuploadsubmit",function(e,t){t.formData={enterpriseId:s.enterpriseId,action:"ImportCustomers"}}).on("fileuploadfail",function(n,r){t.isUploading(!1),t.uploadProgress(0);var a="",i=r.jqXHR;i&&i.responseJSON&&(a=i.responseJSON.exceptionMessage||i.responseJSON.message),a=e.T("customers/importCustomers.file_upload_failed_")+e.T(a),t.error(a)}).prop("disabled",!$.support.fileInput).parent().addClass($.support.fileInput?void 0:"disabled")},deactivate:function(){l.superclass.deactivate.apply(this,arguments),r.log(this.name+" -  deactivating")},detached:function(){l.superclass.detached.apply(this,arguments),r.log(this.name+" -  detached")},compositionComplete:function(){l.superclass.compositionComplete.apply(this,arguments),r.log(this.name+" - compositionComplete")},onImportFinished:function(t,n){var r=this.model();r.file()!=t&&r.file(t),r.isImporting(!1),r.importProgress(0);var a=n.message;n.messageId&&(a=e.T(n.messageId,null,n.parameters)),r.message(a+e.T("customers/importCustomers.imported_lines",null,n.line))},onImportProgress:function(e,t){var n=this.model();n.file()!=e&&n.file(e),n.isImporting(!0),n.importProgress(t.progress)},onImportError:function(t,n){var r=this.model();r.file()!=t&&r.file(t),r.isImporting(!1),r.importProgress(0);var a=e.T("customers/importCustomers.the_error_was_detected_in_line_while_import_no_customers_were_imported_please_fix_problem_and_repeat_import",null,[n.line,n.message]);r.error(a)},onImportStarted:function(){},close:function(){n.navigateBack()},cancel:function(){this.close()},getTemplateFileUrl:"api/Upload/GetTemplateFile",downloadTemplate:function(){var e=this.getTemplateFileUrl+"/"+s.enterpriseId+"?type=customers";window.open(e,"_blank","")},reset:function(){var e=this.model();e.file(""),e.isImporting(!1),e.isUploading(!1),e.uploadProgress(0),e.importProgress(0),e.readyForUpload(!1),e.error(""),e.message(""),e.data()},createModel:function(){this.model||(this.model=e.observable({file:e.observable(""),isImporting:e.observable(!1),isUploading:e.observable(!1),uploadProgress:e.observable(0),importProgress:e.observable(0),readyForUpload:e.observable(!1),error:e.observable(""),message:e.observable(""),data:e.observable("")}))},"import":function(){this.model().message(""),this.model().error(""),this.model().isUploading(!0),this.model().data().submit()}}),new l});
define('viewmodels/dashboard/widgets/stats',["knockout","repositories/statsRepository","repositories/userSettingsRepository"],function(e,t,n){function r(e,n,r,a){m(!0),t.loadStats(e,n,r,a,function(e){p.fillFromEntity(e),m(!1)})}function a(){return o()}function i(){s(),l()}function o(){return n.loadUserSettingAsync(d).then(function(e){null!=e&&(f=e.split(","))})}function s(){for(var e=[],t=$(".stats"),n=0;n<f.length;n++){var r=f[n];e.push($("#"+r))}t.append(e)}function u(e){n.saveSettingAsync(d,e)}function l(){c=$(".stats").sortable({scroll:!1,items:".stat",axis:"x",containment:$(".stats"),tolerance:"pointer",cursorAt:{left:100},update:function(){u($(this).sortable("toArray").toString())}})}var c,d="statsWidgets",p=t.createNew(),m=e.observable(!1),f=[];return{attached:i,activate:a,load:r,loading:m,stats:p}});
define('viewmodels/dashboard/widgets/salesTransactions',["knockout","common/numericUtils","repositories/salesTransactionsRepository","viewmodels/dashboard/widgets/stats"],function(e,t,n){function r(e){d=e}function a(n){var r=this;r.transactions=e.observableArray(n);var a=0;for(o=0;o<r.transactions().length;o++)a+=r.transactions()[o].totalSales();for(r.total=e.observable(t.formatCurrency(a)),o=0;o<r.transactions().length;o++)0!=a&&(r.transactions()[o].percent(t.toFixed(100*r.transactions()[o].totalSales()/a)),r.transactions()[o].color=l[o%c],r.transactions()[o].chartText="("+t.toFixed(r.transactions()[o].percent())+"% - "+t.formatCurrency(r.transactions()[o].totalSales())+")",r.transactions()[o].width=r.transactions()[o].percent()+"%",r.transactions()[o].label=e.T("dashboard/widgets/salesTransactions.total_sales"),r.transactions()[o].value=r.transactions()[o].totalSales());return r}function i(e,t,r,a){p(!0);var i={startDate:e,endDate:t,enterpriseId:r,stores:a};n.loadAllAsync(i).then(function(e){$(".legend-element",d).html(""),u().fillWithData(e),s()}).always(function(){p(!1)})}function s(){null!=d&&new Morris.Donut({element:$("#salesBreakdownChart",d),data:u().transactions(),colors:l,totalNumber:u().total()})}var u=e.observable(new a([])),l=["#2da782","#eca535","#8b62af","#0B62A4","#3980B5","#679DC6","#95BBD7","#B0CCE1","#095791","#095085","#083E67","#052C48","#042135"],c=8,d=null,p=e.observable(!1);return a.prototype.fillWithData=function(n){var r=this,a=0,i=0;return $.each(n,function(e,t){a=t.totalSalesByTransaction(),i+=t.totalSales()}),$.each(n,function(n,r){r.percent(t.toFixed(100*r.totalSales()/i)),r.color=l[n%c],r.chartText="("+t.toFixed(r.percent())+"% - "+t.formatCurrency(r.totalSales())+")",r.width=r.percent()+"%",r.label=e.T("dashboard/widgets/salesTransactions.total_sales"),r.value=r.totalSales()}),r.transactions(n),r.total(t.formatCurrency(a)),r},{loadTransactions:i,attached:r,model:u,loading:p,refreshChart:s}});
define('viewmodels/salesSdk/appsIframeCommand',["knockout","jquery","services/ssoLoginService"],function(e,t,n){function r(){var e=new t.Deferred;return n.tryToRefreshToken().then(function(t){e.resolve({message:null,postData:{access_token:t.accessToken}})},function(t){e.reject({message:t,postData:null})}),e.promise()}return{requestToNewToken:r}});
define('viewmodels/salesSdk/salesSdkListener',["knockout","jquery","durandal/app","plugins/http","viewmodels/salesSdk/appsIframeCommand"],function(e,t,n,r,a){function o(e){var t=e.data.postId.split(":")[0];if(l){var n=l[t];n&&n(e.data.postData).then(function(t){i(e,t)},function(t){i(e,t)})}}function i(e,t){var n=new s(t.message);n.postData=t.postData,e.source.postMessage({response:n,postId:e.data.postId},"*")}var s=function(e){var t=void 0!==e&&null!==e,n=this;n.isError=t,n.isSuccess=!t,n.errorMessage=e,n.postData=null},l={RequestToNewToken:a.requestToNewToken};window.addEventListener?window.addEventListener("message",o):window.attachEvent("onmessage",o)});
define('viewmodels/dashboard/dashboard',["knockout","moment","plugins/router","data/config","data/common","viewmodels/dashboard/widgets/stats","viewmodels/dashboard/widgets/salesTransactions","services/timers/upgradeTimer","viewmodels/controls/storesFilter","common/utils","services/demo","viewmodels/salesSdk/appsIframeCommand","viewmodels/salesSdk/salesSdkListener"],function(e,t,n,r,a,i,o,s,u,l,c){function d(){w(w()+1)}function p(){I.subscribe(function(){d()}),E.storeChanged.subscribe(function(){d()})}function m(){var e=r.fetchConfig().then(function(e){A(!(2===e.planCode||3===e.planCode))});return $.when(e,s.checkUpgradeByCode(l.getIdFromCookie())).promise()}function f(){g(),v()}function y(){k.then(function(){p(),d()}),o.refreshChart(),r.fetchConfig().then(function(e){null===e.isDemo&&c.quickStart()})}function v(){$(".version").text(e.T("dashboard/dashboard.version_")+r.version)}function g(){}function b(){var t;return e.computed(function(){t=I()}).dispose(),{startDate:t&&t.dateFrom&&t.dateFrom.isAfter("2010-01-01")?t.dateFromString():null,endDate:t&&t.dateTo&&!t.dateTo.isAfter()?t.dateToString():null}}function h(){var e=r.config.planCode;return{id:e,url:"https://ehopper.com/wp-content/uploads/bo-marketing-package-"+e+".html","class":"package-"+e}}function T(){if(x){var t,n=b();e.computed(function(){t=S()}).dispose(),r.getEnterpriseId().then(function(e){i.load(n.startDate,n.endDate,e,t),o.loadTransactions(n.startDate,n.endDate,e,t)})}}var I=e.observable(),S=e.observableArray(),E=new u(S),x=!1,A=e.observable(!1),w=e.observable(0).extend({rateLimit:300}),k=E.initialize().then(function(){x=!0});return w.subscribe(function(){T()}),{dateRange:I,activate:m,attached:f,compositionComplete:y,storesFilter:E,stores:S,applyPeriodFilter:T,storeLoaded:x,getPackage:h,isEssentialPlan:A,goFreedom:c.goFreedom}});
define('viewmodels/dashboard/widgets/goLive',["knockout","data/common","data/config","common/dateUtils","repositories/enterpriseRepository","repositories/base/baseRepository"],function(e,t,n,r,a,i){function o(){return n.getEnterpriseId().then(function(e){return a.loadByIdAsync(e)}).then(function(e){l=e,c.date(l.releaseDate.date()),c.liveMessage(u(l.releaseDate.date()))})}function s(){}function u(t){var n=new Date(t),a=new Date,i=new Date(a.toDateString()),o=Math.floor((n-i)/864e5);return e.T("dashboard/widgets/goLive.go_live_date_is_in_x_days",null,[o,r.formatDate(t)])}var l,c={date:e.observable(),liveMessage:e.observable()},d=new i({modelDesc:{entityType:"",entityName:"GoLive"}});return d.options.routeType=d.routeType.routeTypeByEntityName,{activate:o,attached:s,model:c}});
define('viewmodels/dashboard/widgets/support',["knockout","data/config","services/zendesk"],function(e,t,n){function r(){return t.fetchConfig().then(function(e){l=e.employeeId,d(o()),c(e.enterpriseCode)})}function a(){d(!d()),u()}function i(){var e=window.localStorage.getItem("config");return e&&(e=JSON.parse(e)),e&&e[l]||{}}function o(){var e=i();return e&&e.supportWidgetCollapsed||!1}function s(e,t){var n=window.localStorage.getItem("config");n=n?JSON.parse(n):{},n[e]=t,window.localStorage.setItem("config",JSON.stringify(n))}function u(){var e=i();e.supportWidgetCollapsed=d(),s(l,e)}var l,c=e.observable(""),d=e.observable(!1),p=e.computed(function(){return d()?e.T("dashboard/widgets/support.show"):e.T("dashboard/widgets/support.hide")});return{activate:r,enterpriseCode:c,noteMessage:t.supportNote,collapsedWidget:d,collapseText:p,triggerCollapse:a,checkNickname:n.checkNickname}});
define('viewmodels/dashboard/widgets/tasks',["knockout","repositories/taskItemsRepository","plugins/router","data/common","data/config"],function(e,t,n,r,a){function i(e,t){if(!e.url()&&!t.url())return 0;if(!e.url())return 1;if(!e.url())return-1;var n=k.indexOf(e.url()),r=k.indexOf(t.url());return-1===n?1:-1===r?-1:(n-r)/Math.abs(n-r)}function o(){w(!0),t.loadAll().then(function(e){e.sort(i),E(f(e))}).always(function(){w(!1)})}function s(){o(),a.fetchConfig().then(function(e){S=e.employeeId,x(d())})}function u(e){T=e,l(),I.refreshItems(),I.restyleNavButtons()}function l(){I=$(".tasks-table",T).paginate({pageSize:5,itemSelector:".tasks-table tr",nextSelector:"#nextTasks",prevSelector:"#prevTasks",scrollAreaSelector:".tasks-body",orientation:"vertical",delay:0})}function c(){var e=window.localStorage.getItem("config");return e&&(e=JSON.parse(e)),e&&e[S]||{}}function d(){var e=c();return e&&e.gettingStartedWidgetCollapsed||!1}function p(e,t){var n=window.localStorage.getItem("config");n=n?JSON.parse(n):{},n[e]=t,window.localStorage.setItem("config",JSON.stringify(n))}function m(){var e=c();e.gettingStartedWidgetCollapsed=x(),p(S,e)}function f(t){var n=this;return n.tasks=e.observableArray(t),n.deleteSelected=g,n.itemClick=b,n.done=v,n.doneTask=y,n.createNew=h,n.textStyle="line-through",n.triggerCollapse=function(){x(!x()),m()},n.collapsedWidget=x,n.collapseText=A,n}function y(){var e=this;e.isDone(!e.isDone()),t.save(e)}function v(){var e=this;return t.save(e).then(function(t){e.isEdit(!1);var n=E().tasks.indexOf(e);E().tasks.splice(n,1,t)}),!1}function g(){var e=E().tasks.indexOf(this);return E().tasks.splice(e,1),I.refreshItems(),I.restyleNavButtons(),t.remove(this),!1}function b(){this.isDefault()?this.url()&&n.navigate(this.url()):this.isEdit(!0)}function h(){if(E().tasks().length>=50)return r.showWarning(e.T("dashboard/widgets/tasks.you_have_created_50_tasks_which_is_a_limit_delete_some_old_tasks_to_create_a_new_one")),void 0;for(;1!=I.page;)I.scrollPrev();var n=t.createNew();return n.isEdit(!0),E().tasks.splice(0,0,n),I.refreshItems(),I.restyleNavButtons(),!1}var T,I,S,E=e.observable(),x=e.observable(!1),A=e.computed(function(){return x()?e.T("dashboard/widgets/support.show"):e.T("dashboard/widgets/support.hide")}),w=e.observable(!1),k=["enterpriseSettings","stores","registerSettings","modifiers","vendorsList","items","employees"];return{activate:s,attached:u,done:v,loading:w,collapsedWidget:x,model:E}});
define('viewmodels/departments/models/departmentNameModel',["knockout","models/businessObjectNameModel","common/utils"],function(e,t,n){function r(t,n){r.superclass.constructor.apply(this,arguments),this.setupUniqueNameConstraint(t,n,e.T("departments/departmentManage.department_name_must_be_unique"))}return n.extend(r,t),r});
define('viewmodels/departments/models/departmentModel',["knockout","viewmodels/departments/models/departmentNameModel"],function(e,t){function n(n){var r=this;r.id=n.id,r.enterpriseId=n.enterpriseId;var a=Enumerable.From(n.names).Select(function(e){return new t(e,n.otherNames)}).ToArray();r.names=e.observableArray(a),r.isActive=e.observable(n.isActive),r.lobs=e.observableArray(n.lobs),r.isAppDepartment=n.isAppLob,r.appsData={},Object.keys(n.appsData).forEach(function(t){r.appsData[t]=e.observable();var a=n.appsData[t],i={};Object.keys(a).forEach(function(t){i[t]=e.observable(a[t])}),r.appsData[t](i)}),r.errors=e.validation.group(r),r.toFlatModel=function(){var t={};return Object.keys(r.appsData).forEach(function(n){t[n]={};var a=e.unwrap(r.appsData[n]);Object.keys(a).forEach(function(r){t[n][r]=e.unwrap(a[r])})}),{id:r.id,enterpriseId:r.enterpriseId,isActive:r.isActive(),isAppLob:r.isAppDepartment,appsData:t,names:Enumerable.From(r.names()).Where(function(e){return e.name().length>0}).Select(function(e){return e.toFlatModel()}).ToArray()}}}return n});
define('viewmodels/departments/departmentManage',["knockout","plugins/router","repositories/presentationApi/lobsRepository","repositories/categoriesRepository","data/common","data/config","plugins/history","viewmodels/departments/models/departmentModel","viewmodels/languageSelector","repositories/base/baseRepository"],function(e,t,n,r,a,i,o,s,u){function l(){return v()?"app":""}function c(t,r){v(":isAppMode"===r);var a;return t?(a=n.getById(t),b(e.T(l()+"departments/departmentManage.edit_department"))):(a=n.create(),b(e.T(l()+"departments/departmentManage.new_department"))),a.then(function(e){e.isAppLob=v(),g(new s(e))})}function d(){}function p(e){var t=v()?"app"+e+"/:isAppMode":e;return t}function m(){0==g().errors().length?n.save(g().toFlatModel()).then(function(t){0===t.length?(r.resetDepartmentsList(),y()):a.showError(e.T(l()+"departments/departmentManage.failed_to_save_department"),"#saveMessages",5e3)}):g().errors.showAllMessages()}function f(){y()}function y(){t.navigate(p("departments"))}var v=e.observable(!1),g=e.observable(),b=e.observable(""),h=e.observable({canInherit:!1,isInheritAccounts:e.observable(!1),assetAccountId:e.observable(),incomeAccountId:e.observable(),expenseAccountId:e.observable()});return{activate:c,attached:d,getRoute:p,getKeyPrefix:l,save:m,cancel:f,department:g,title:b,langs:u,qbAccountsModel:h}});
define('viewmodels/departments/departmentsList',["knockout","plugins/router","repositories/presentationApi/lobsRepository","data/common","services/dataTableText"],function(e,t,n,r,a){function i(){return P()?"app":""}function o(){return e.T(i()+"departments/departmentsList.are_you_sure_you_want_to_delete_selected_department")}function s(t){return e.T(i()+"departments/departmentsList.the_department_has_categories_assigned_please_delete_those_categories_first",null,t)}function u(){return e.T(i()+"departments/departmentsList.are_you_sure_you_want_to_delete_selected_departments")}function l(t){return e.T(i()+"departments / departmentsList.the_department_has_categories_assigned_please_delete_those_categories_first",null,t)}function c(a){var i=this;i.department=e.observable(a),i.rowNum=e.observable(),i.edit=function(){t.navigate(I("department/"+i.department().id))},i.selected=e.observable(!1),i.selectItem=function(e,t){t.stopPropagation(),e.selected(!e.selected()),p()},i.deleteRow=function(e,t){t.stopPropagation(),r.showConfirmation(void 0,o(),function(){n.remove(i.department().id).then(function(e){e?w.row("#row"+i.department().id).remove().draw(!1):r.showError(s(i.department().name),"#messages",5e3)})})}}function d(){t.navigate(I("department"))}function p(){L(m().length>0)}function m(){if(F){var e=F.filter(function(e){return e.selected()}).map(function(e){return e.department().id});return e}return[]}function f(e){if(F){var t=F.filter(function(t){return t.department().id===e});if(t&&t.length>0)return t[0].department().name}return""}function y(e){r.showError(e.join("<br />"),"#messages",5e3)}function v(e){for(var t=0;t<F.length;t++)if(F[t].department().id==e){F.splice(t,1);break}}function g(e){w.row("#row"+e).remove().draw(!1),v(e)}function b(){var e=m();e.length>0&&r.showConfirmation(void 0,u(),function(){n.removeMany(e).then(function(e){if(e.removed&&e.removed.forEach(function(e){g(e)}),e.errors){var t=[];e.errors.forEach(function(e){var n=e.data,r=l(f(n));t.push(r)}),t.length>0&&y(t)}})})}function h(e,t){e.start=C*e.length;var a=P()?n.getAppLobs():n.get();return a.then(function(e){"function"==typeof t&&(e&&(e=e.map(function(e){return new c(e)})),F=e,t({data:e}))}).always(function(){r.showRightPanelContent(O)}),a.abort=function(){},a}function T(){w=$("#departmentsTable",A).DataTable({processing:!0,info:!1,paging:!0,lengthChange:!1,autoWidth:!1,ajax:h,language:a.getLanguage(),columns:[{bSortable:!1,bSearchable:!1,data:null,render:function(e){return'<div class="checkbox"><input type="checkbox" id="chk'+e.department().id+'" data-bind="checked: selected"><label for="chk'+e.department().id+'" data-bind="click: selectItem"></label></div>'}},{data:"department().name",sWidth:"70%"},{data:"department().isActive",render:function(t){return 1==t?e.T("departments/departmentsList.active"):e.T("departments/departmentsList.inactive")},sWidth:"150px",bSearchable:!1},{data:null,render:function(){return'<input type="button" class="delete-row-button" data-bind="click: deleteRow" />'},sWidth:"50px",sClass:"center no-padding",bSortable:!1,bSearchable:!1}],order:M,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:"row"+n.department().id}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),0!==C&&w.page(C).draw(!1),new $.fn.DataTable.SearchFilter(w),w.on("page",function(){j(!1),C=w.page.info().page}),w.on("order",function(e,t){j(!1),t.oApi._fnPageChange(t,C,!0)})}function I(e){var t=P()?"app"+e+"/:isAppMode":e;return t}function S(e){j(!1),P(":isAppMode"===e),k=!0}function E(){k=!1}function x(e){k===!0&&(A=e,r.showLoader(O),T())}var A,w,k=!1,P=e.observable(!1),F=[],O="div.pane-right > div.departments",C=0,j=e.observable(),M=[[1,"asc"]],L=e.observable(!1);j.subscribe(function(e){F&&(F.forEach(function(t){$("#chk"+t.department().id+" + label").is(":visible")&&t.selected(e)}),p())});var _={activate:S,deactivate:E,attached:x,isAppMode:P,getRoute:I,getKeyPrefix:i,showNewDepartment:d,selectAll:j,deleteSelected:b,hasSelected:L};return _});
define('viewmodels/doUnblockAccount',["knockout","durandal/app","plugins/router","plugins/dialog","data/config","services/userAgent","common/utils"],function(e,t,n,r,a,i,o){function s(){var e=o.getIdFromQuery();if(""===o.getIdFromCookie()){if(""===e)return setTimeout(function(){n.navigate("account")},1),!1;o.setEnterpriseCodeCookie(e)}return new Promise(function(e){e(!0)})}function u(t,a){return p(null),f(!1),req={enterprise:t,token:a},$.post("api/Account/DoUnblockAccount",req).then(function(t){f(!1),t?r.show(new r.MessageBox(e.local("resetPassword.unblock_success"),e.local("resetPassword.title-unblock"),["OK"],!0)).then(function(){n.navigate("smartLogin")}):p(m)},function(e){f(!1),p(e.statusText)})}function l(){$(".version").text(e.T("login.version_")+a.version)}function c(){n.navigate("smartLogin")}var d=e.T("login.back_office"),p=e.observable(),m=e.T("resetPassword.unblock_failed"),f=e.observable();return{title:d,canActivate:s,activate:u,attached:l,errorMessage:p,continueTologin:c,isLoading:f}});
define('viewmodels/employees/employeeManage',["knockout","durandal/app","data/common","plugins/router","repositories/presentationApi/employeesRepository","data/permissions","data/config"],function(e,t,n,r,a,i,o){function s(t){h=i.hasPermission("ADM"),S(!0),t?a.loadByIdAsync(t,h).then(function(t){u(t),g(t),g().businessUnitsSelected([]);for(var n=0;n<t.employeeBusinessUnits().length;n++)g().businessUnitsSelected().push({id:e.observable(t.employeeBusinessUnits()[n].bussinesUnitId)});b(e.T("employees/employeeManage.edit_employee")),setTimeout(function(){S(!1)},300)}):a.createNewAsync().then(function(e){u(e),g(e),g().businessUnitsSelected([]),f(g()),b("New Employee"),setTimeout(function(){S(!1)},300)})}function u(e){e.adminPermissionGranted=h}function l(e){S(!0),v=e,$(".checkbox",v).checkbox(),m()}function c(){var r=!0;if(T()().length>0?(y.setTabErrors(0),T().showAllMessages(),r=!1):y.clearTabErrors(0),I()().length>0?(y.setTabErrors(1),I().showAllMessages(),r=!1):y.clearTabErrors(1),r){if(g().employeeBusinessUnits([]),g().isAssignShopEditeble())for(var i=0;i<g().businessUnitsSelected().length;i++){var s=g().businessUnitsSelected()[i];g().employeeBusinessUnits.push({bussinesUnitId:s.id,employeeId:g().id})}S(!0),a.saveAsync(g(),h).then(function(r){null!=r.length&&0===r.length?(p(),g().id()&&g().id()===o.employeeId&&(o.nickname=g().nickname(),o.language.toUpperCase()!==g().isoLanguageId()&&t.trigger("app:reload"))):(S(!1),$("#saveMessages").empty(),$.isArray(r)&&r.forEach(function(t){n.showError(e.T(t),"#saveMessages",0)}))},function(){S(!1)})}}function d(){p()}function p(){r.navigate("employees")}function m(){y=$(".employees-tabs").tabControl({tabs:[{name:e.T("employees/employeeManage.general"),containerSelector:"#generalTab"},{name:e.T("employees/employeeManage.contact_info"),containerSelector:"#contactsTab"},{name:e.T("employees/employeeManage.localization"),containerSelector:"#localizationTab"}]})}function f(e){e.firstName.isModified(!1),e.lastName.isModified(!1),e.pin.isModified(!1),e.confirmPin.isModified(!1),e.password.isModified(!1),e.confirmPassword.isModified(!1),e.roleId.isModified(!1),e.email.isModified(!1),e.address.isModified(!1),e.countryId.isModified(!1),e.stateId.isModified(!1),e.city.isModified(!1),e.zip.isModified(!1)}var y,v,g=e.observable(),b=e.observable(e.T("employees/employeeManage.new_employee")),h=!1,T=e.computed(function(){if(g()){var t=g();return h?e.validation.group([t.email,t.firstName,t.lastName,t.pin,t.password,t.confirmPin,t.confirmPassword,t.roleId,t.isActive],{deep:!0}):e.validation.group([t.email,t.firstName,t.lastName,t.isActive],{deep:!0})}return e.validation.group({})}),I=e.computed(function(){if(g()){var t=g();return e.validation.group([t.phone.phone,t.address,t.countryId,t.stateId,t.city,t.zip],{deep:!0})}return e.validation.group({})}),S=e.observable();return{activate:s,attached:l,save:c,cancel:d,model:g,title:b,loading:S}});
define('viewmodels/employees/employeesList',["knockout","data/common","plugins/router","repositories/presentationApi/employeesRepository","services/dataTableText","viewmodels/controls/storesFilter"],function(e,t,n,r,a,i){function o(){m&&m.draw()}function s(t){var r=this;r.rowNum=e.observable(),r.employee=e.observable(t),r.edit=function(){n.navigate("employee/"+r.employee().id())}}function u(){return t.showLoader(f),h||I.initialize().then(function(){I.storeChanged.subscribe(function(){b={};var t;e.computed(function(){t=T()}).dispose(),t||(t=[]),t=t.map(function(t){return e.unwrap(t.id)}),t.forEach(function(e){b[e]=1}),o()})}),r.loadAll().then(function(e){h=!0,g=Enumerable.From(e).Select(function(e){return new s(e)}).ToArray()})}function l(){m=$("#employeesTable",p).DataTable({processing:!0,info:!1,paging:!0,lengthChange:!1,autoWidth:!1,data:g,language:a.getLanguage(),columns:[{data:"employee().firstName()"},{data:"employee().lastName()"},{data:"employee().nickname()"},{data:"employee().email()"},{data:"employee().phone.phone()"},{data:"employee().storesText()"},{data:"employee().role()",searchable:!1},{data:"employee().isActive",render:function(t){return 1==t()?e.T("employees/employeesList.active"):e.T("employees/employeesList.inactive")},searchable:!1,width:"80px"},{data:"employee().stores()",visible:!1,searchable:!1}],order:v,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:n.employee().id()}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),0!==y&&m.page(y).draw(!1),new $.fn.DataTable.SearchFilter(m),m.on("page",function(){y=m.page.info().page}),m.on("order",function(){v[0][0]=m.order()[0][0],v[0][1]=m.order()[0][1]}),t.showRightPanelContent(f)}function c(e){p=e,l()}function d(){n.navigate("employee")}var p,m,f="div.pane-right > div",y=0,v=[[1,"asc"]],g=[],b=null,h=!1,T=e.observableArray(),I=new i(T);return $.fn.dataTable.ext.search.push(function(e,t,n,r){if("employeesTable"!==e.nTable.id)return!0;if(null==b)return!0;if(!r)return!0;if(!h)return!0;var a=r.employee(),i=a.role();if("Administrator"===i)return!0;if(T().length===I.storesArr().length)return!0;employeesStores=a.stores();for(var o=0,s=employeesStores.length;s>o;o++)if(b[employeesStores[o]])return!0;return!1}),{attached:c,activate:u,showNewEmployee:d,storesFilter:I}});
define('viewmodels/employees/manage-tabs/contactTab',["viewmodels/employees/employeeManage"],function(e){function t(){e.model()&&e.model().countryId&&"function"==typeof e.model().countryId.isModified&&e.model().countryId.isModified(!1)}return{model:e.model,setUnmodified:t}});
define('viewmodels/employees/manage-tabs/generalTab',["viewmodels/employees/employeeManage","knockout"],function(e,t){function n(){return{id:t.observable()}}function r(){return{vendorPlaceholder:t.T("employees/manage-tabs/generalTab.searchStore"),itemId:"id",createNewArrItem:n,filter:!0,selectAll:!0,onCheckAll:function(){e.model().businessUnitsSelected([]);for(var n=0;n<s().length;n++)e.model().businessUnitsSelected.push({id:t.observable(s()[n].id)})},onUncheckAll:function(){e.model().businessUnitsSelected([])},disabled:!e.model().isAssignShopEditeble(),placeholder:t.T("employees/manage-tabs/generalTab.searchStore")}}function a(){}function i(){s(e.model().businessUnits())}function o(){e.model()&&e.model().roleId&&"function"==typeof e.model().roleId.isModified&&e.model().roleId.isModified(!1)}var s=t.observableArray(),u=t.observable(!1);return u.subscribe(function(t){if(t){var n=Enumerable.From(e.model().businessUnits()).Where(function(t){for(var n=!1,r=0;r<e.model().businessUnitsSelected().length;r++)if(e.model().businessUnitsSelected()[r].id()===t.id){n=!0;break}return n}).ToArray();s(n)}else s(e.model().businessUnits())}),e.model.subscribe(function(e){e&&i()}),{model:e.model,setupMultiSelect:r,attached:a,bussinesUnitsToShow:s,isAssignOnly:u,setUnmodified:o}});
define('viewmodels/employees/manage-tabs/localizationTab',["viewmodels/employees/employeeManage"],function(e){return{model:e.model}});
define('viewmodels/enterprise/enterprise-settings-tabs/contacts',["knockout","data/permissions"],function(e,t){function n(n){function r(){u.indexOf(a.countryId())>-1?a.state.extend(l):a.state.rules&&a.state.rules.remove(function(e){return"required"==e.rule})}var a=this;a.enabled=e.observable(t.hasPermission("ADM")),a.enterpriseId=n.enterpriseId,a.enterpriseCode=n.enterpriseCode,a.name=e.observable(n.name).extend({required:{message:e.T("common.thisFieldIsRequired")},minLength:0,maxLength:100}),a.address1=e.observable(n.address1).extend({required:{message:e.T("common.thisFieldIsRequired")}}),a.address2=e.observable(n.address2),a.city=e.observable(n.city).extend({required:{message:e.T("common.thisFieldIsRequired")},minLength:0,maxLength:255}),a.state=e.observable(n.state),a.zip=e.observable(n.zip).extend({required:{message:e.T("common.thisFieldIsRequired")},message:e.T("repositories/presentationApi/storesRepository.invalid_zip"),maxLength:10}),a.countryId=e.observable(n.countryId).extend({required:{message:e.T("common.thisFieldIsRequired")}}),a.countries=e.observableArray(n.countries),a.phone=e.observable(n.phone).extend({phone:{required:!0},phoneNumber:!0}),a.email=e.observable(n.email).extend({required:{message:e.T("common.thisFieldIsRequired")},email:!0}),a.web=e.observable(n.web).extend({website:!0}),a.errors=e.validation.group([a.name,a.address1,a.address2,a.city,a.state,a.zip,a.countryId,a.phone.phone,a.email,a.web]),a.fillEnterpriseModel=function(e){return e.name=a.name(),e.address1=a.address1(),e.address2=a.address2(),e.city=a.city(),e.state=a.state(),e.zip=a.zip(),e.countryId=a.countryId(),e.phone=a.phone(),e.email=a.email(),e.web=a.web(),e},a.countryChange=r,r()}function r(e){s(new n(e)),setTimeout(function(){e.isAdmin||$(o).find("input, textarea, button, select").attr("disabled","disabled")},100)}function a(e){s().fillEnterpriseModel(e)}function i(e){o=e}var o,s=e.observable(),u=["US","CA"],l={required:!0,pattern:{message:e.T("repositories/presentationApi/storesRepository.invalid_state"),params:/^[a-zA-Z]{2}|N\/A$/}};return{attached:i,model:s,fill:r,fillEnterpriseModel:a}});
define('viewmodels/enterprise/enterprise-settings-tabs/general',["knockout","data/config"],function(e,t){function n(n){this.businessUnitTypes=e.observableArray(n.businessUnitTypes),this.businessUnitType=e.observable(n.businessUnitType),this.showOrderType=e.observable(n.showOrderType),this.externalPayment=e.observable(n.externalPayment),this.notesMode=e.observable(n.notesMode.toString()),this.autoLogoutAfterOrder=e.observable(n.autoLogoutAfterOrder),this.syncOnLogin=e.observable(n.syncOnLogin),this.openCashDrawerCC=e.observable(n.openCashDrawerCC),this.printTaxList=e.observable(n.printTaxList),this.merchantType=n.merchantType,this.displayProductIdinShoppingCart=e.observable(n.displayProductIdinShoppingCart),this.displayUPCinShoppingCart=e.observable(n.displayUPCinShoppingCart),this.orderFulfilmentInstalled=e.observable(t.config.isOrderFulfilmentApp),this.fillEnterpriseModel=function(e){return e.businessUnitType=this.businessUnitType(),e.showOrderType=this.orderFulfilmentInstalled?this.showOrderType():!1,e.externalPayment=this.externalPayment(),e.notesMode=this.notesMode(),e.autoLogoutAfterOrder=this.autoLogoutAfterOrder(),e.syncOnLogin=this.syncOnLogin(),e.openCashDrawerCC=this.openCashDrawerCC(),e.printTaxList=this.printTaxList(),e.displayProductIdinShoppingCart=this.displayProductIdinShoppingCart(),e.displayUPCinShoppingCart=this.displayUPCinShoppingCart(),e},this.isCompanySettings=!0}function r(e){s(new n(e)),setTimeout(function(){e.isAdmin||$(o).find("input, textarea, button, select").attr("disabled","disabled")},100)}function a(e){s().fillEnterpriseModel(e)}function i(e){o=e}var o,s=e.observable();return{attached:i,model:s,fill:r,fillEnterpriseModel:a}});
define('viewmodels/enterprise/enterprise-settings-tabs/localization',["knockout","data/permissions"],function(e,t){function n(n){var a=this;a.enabled=e.observable(t.hasPermission("ADM")),a.enterpriseId=n.enterpriseId,a.posLanguageId=e.observable(n.posLanguageId).extend({required:!0}),a.kitchenReceiptLanguageId=e.observable(n.kitchenReceiptLanguageId).extend({required:!0}),a.boLanguageId=e.observable(n.boLanguageId).extend({required:!0}),a.defaultLanguageId=e.observable(n.defaultLanguageId).extend({required:!0}),a.enterpriseLanguages=e.observableArray(Enumerable.From(n.enterpriseLanguages).Select(function(t){return{id:e.observable(t)}}).ToArray()),a.languages=e.observableArray(n.languages),a.accountLanguages=e.computed(function(){return a.languages().filter(function(e){return Enumerable.From(a.enterpriseLanguages()).Any(function(t){return t.id()==e.id})})}),a.accountLanguagesWithoutCustom=e.computed(function(){return a.languages().filter(function(e){return Enumerable.From(a.enterpriseLanguages()).Any(function(t){return e.id!=o&&t.id()==e.id})})}),a.allSelectedAccountLanguagesOption=r(a.accountLanguages()),a.dateFormatId=e.observable(n.dateFormatId),a.dateFormats=e.observableArray(n.dateFormats),a.timeFormatId=e.observable(n.timeFormatId),a.timeFormats=e.observableArray(n.timeFormats),a.currencyId=e.observable(n.currencyId),a.currencies=e.observableArray(n.currencies),a.errors=e.validation.group(a),a.fillEnterpriseModel=function(e){return e.enterpriseId=a.enterpriseId,e.posLanguageId=a.posLanguageId(),e.kitchenReceiptLanguageId=a.kitchenReceiptLanguageId(),e.boLanguageId=a.boLanguageId(),e.defaultLanguageId=a.defaultLanguageId(),e.enterpriseLanguages=Enumerable.From(a.enterpriseLanguages()).Select(function(e){return e.id()}).ToArray(),e.dateFormatId=a.dateFormatId(),e.timeFormatId=a.timeFormatId(),e.currencyId=a.currencyId(),e}}function r(t){var n=t.reduce(function(e,t,n,r){var a=e+t.name;return n!=r.length-1&&(a+=", "),a},""),r={};return r.id=0,r.name=n,e.observable(r)}function a(){}var i=e.observable(),o="C0";return{model:i,fill:function(e){i(new n(e))},languagesMultipleSelectOptions:{vendorPlaceholder:e.T("enterpriseSettings/enterprise-settings-tabs/localization.select_language"),itemId:"id",width:"300px",createNewArrItem:function(){return{id:e.observable()}}},compositionComplete:a}});
define('viewmodels/enterprise/enterprise-settings-tabs/marketing',["knockout"],function(e){function t(e){i(e.marketingAndLoyaltyKey),o(e.optInCheckInKey),setTimeout(function(){e.isAdmin||$(a).find("input, textarea, button, select").attr("disabled","disabled")},100)}function n(e){e.marketingAndLoyaltyKey=i(),e.optInCheckInKey=o()}function r(e){a=e}var a,i=e.observable(),o=e.observable();return{attached:r,loyaltyRedemptionKey:i,optInCheckInKey:o,fill:t,fillEnterpriseModel:n}});
define('viewmodels/enterprise/enterprise-settings-tabs/receipt',["knockout","viewmodels/languageSelector"],function(e,t){function n(e,t){return{id:"00000000-0000-0000-0000-000000000000",description:"",reciptId:e,languageId:t.id}}function r(r){this.kitchenReceipt=e.observable(r.kitchenReceipt);for(var a=r.footers[0].reciptId,i=r.footers.map(function(e){return e.languageId}),o=0;o<t.languages().length;++o)-1===i.indexOf(t.languages()[o].id)&&r.footers.push(n(a,t.languages()[o]));this.footers=e.observableArray(r.footers),this.footers().forEach(function(t){t.description=e.observable(t.description)}),this.fillEnterpriseModel=function(t){return t.kitchenReceipt=this.kitchenReceipt(),this.footers().forEach(function(t){t.description=e.unwrap(t.description)}),t.footers=this.footers(),t}}function a(e){u(new r(e)),setTimeout(function(){e.isAdmin||$(s).find("input, textarea, button, select").attr("disabled","disabled")},100)}function i(e){u().fillEnterpriseModel(e)}function o(e){s=e}var s,u=e.observable();return{attached:o,model:u,fill:a,fillEnterpriseModel:i,langs:t}});
define('viewmodels/enterprise/enterprise-settings-tabs/taxes',["knockout","models/taxModel"],function(e,t){function n(){return this.properties?this.properties.rate:0}function r(r){this.maxTaxNumber=5,r.taxes&&r.taxes.length&&r.taxes.forEach(function(e){e.getRate=n}),this.ebtTaxExemption=e.observable(r.ebtTaxExemption),this.ebtInstalled=r.ebtInstalled,this.taxId=r.taxId,this.taxes=r.taxes||[],this.storeTaxes=e.observableArray(),r.taxId&&this.storeTaxes.push(new t(this.taxes,r.taxId));var a=this.taxes;a.forEach(function(e){if(e.description="",e.childTaxesIds&&e.childTaxesIds.length){var t=a.filter(function(t){return e.childTaxesIds.indexOf(t.id)>=0}).map(function(e){return e.locName});e.description=t.join(", ")}}),this.addTax=function(){return this.taxes.length>0?(this.storeTaxes.push(new t(this.taxes,this.taxes[0].id)),!0):!1},this.removeTax=function(e){var t=this.storeTaxes.indexOf(e);-1!==t&&(this.storeTaxes.splice(t,1),this.taxId=null)},this.fillEnterpriseModel=function(e){return this.storeTaxes().length>0&&(e.taxId=this.storeTaxes()[0].id()),e.ebtTaxExemption=this.ebtTaxExemption(),e}}function a(e){d(new r(e)),setTimeout(function(){e.isAdmin||$(c).find("input, textarea, button, select").attr("disabled","disabled")},100)}function i(e){d().fillEnterpriseModel(e)}function o(e){d().addTax(e)}function s(e){d().removeTax(e)}function u(e){c=e}function l(t){return{filter_placeholder:e.T("taxes.select_tax-tax"),width:"80%",optionText:"locName",optionId:"id",data:d().taxes,editable:!1,single:!0,filter:!0,selectAll:!1,selectedItem:t.id,valueText:e.observable(t.locName||(t.tax&&t.tax()?t.tax().locName:"")),noRadio:!0,autohide:!0,multiple:!1}}var c,d=e.observable();return{attached:u,setupTaxesSelect:l,model:d,fill:a,fillEnterpriseModel:i,addTax:o,removeTax:s}});
define('viewmodels/enterprise/enterprise-settings-tabs/tips',["knockout"],function(e){function t(t){this.tips=e.observable(t.tips),this.tipsOnCreditCardAuth=e.observable(t.tipsOnCreditCardAuth).extend({percentExt:!0}),this.tipsSignatureSettings=e.observable(t.tipsSignatureSettings),this.tipsAndSignatureOnPos=e.observable(t.tipsAndSignatureOnPos),this.signatureOnReceipt=e.observable(t.signatureOnReceipt);var n=t.tipsMoneyValues?t.tipsMoneyValues.split("|"):[0,0,0];this.tipsMoneyValue1=e.observable(parseFloat(n[0])),this.tipsMoneyValue2=n.length>1?e.observable(parseFloat(n[1])):e.observable(0),this.tipsMoneyValue3=n.length>2?e.observable(parseFloat(n[2])):e.observable(0);var r=t.tipsPercentValues?t.tipsPercentValues.split("|"):[0,0,0];this.tipsPercentValue1=e.observable(parseFloat(r[0])).extend({percentExt:!0}),this.tipsPercentValue2=r.length>1?e.observable(parseFloat(r[1])).extend({percentExt:!0}):e.observable(0).extend({percentExt:!0}),this.tipsPercentValue3=r.length>2?e.observable(parseFloat(r[2])).extend({percentExt:!0}):e.observable(0).extend({percentExt:!0}),this.fillEnterpriseModel=function(e){return e.tips=this.tips(),e.tipsOnCreditCardAuth=this.tipsOnCreditCardAuth(),e.tipsAndSignatureOnPos=this.tipsAndSignatureOnPos(),e.signatureOnReceipt=this.signatureOnReceipt(),e.tipsMoneyValues=(this.tipsMoneyValue1()||0)+"|"+(this.tipsMoneyValue2()||0)+"|"+(this.tipsMoneyValue3()||0),e.tipsPercentValues=(this.tipsPercentValue1()||0)+"|"+(this.tipsPercentValue2()||0)+"|"+(this.tipsPercentValue3()||0),e},this.isCompanySettings=!0}function n(e){o(new t(e)),setTimeout(function(){e.isAdmin||$(i).find("input, textarea, button, select").attr("disabled","disabled")},100)}function r(e){o().fillEnterpriseModel(e)}function a(e){i=e}var i,o=e.observable();return{attached:a,model:o,fill:n,fillEnterpriseModel:r}});
define('viewmodels/enterprise/enterpriseSettings',["knockout","plugins/router","durandal/app","data/common","data/config","data/permissions","repositories/presentationApi/enterpriseRepository","viewmodels/enterprise/enterprise-settings-tabs/general","viewmodels/enterprise/enterprise-settings-tabs/contacts","viewmodels/enterprise/enterprise-settings-tabs/receipt","viewmodels/enterprise/enterprise-settings-tabs/tips","viewmodels/enterprise/enterprise-settings-tabs/taxes","viewmodels/enterprise/enterprise-settings-tabs/localization","viewmodels/enterprise/enterprise-settings-tabs/marketing"],function(e,t,n,r,a,i,o,s,u,l,c,d,p,m){function f(){E(i.hasPermission("ADM")),A(a.isMarketingAndLoyaltyApp),a.getEnterpriseId().then(function(e){o.getById(e).then(function(e){k(a.isCardPaymentApp||e.externalPayment),w(a.ebtCardApp)})})}function v(){}function g(){r.showLoader(S),a.getEnterpriseId().then(function(e){o.getById(e).then(function(e){e.isAdmin=E(),e.ebtInstalled=w,s.fill(e),u.fill(e),l.fill(e),c.fill(e),d.fill(e),p.fill(e),m.fill(e),r.showRightPanelContent(S),b()})})}function y(){for(var t=!0,a=[s,u,l,c,d,p,m],i={},f=0;f<a.length;f++){var v=a[f],g="function"==typeof v.model?v.model():v;g.errors&&(0!=g.errors().length||g.validationModel&&!g.validationModel.isValid())?(I.setTabErrors(f),g.errors.showAllMessages(),t=!1):(I.clearTabErrors(f),g.fillEnterpriseModel(i))}t&&(x(!0),o.save(i).then(function(t){x(!1),0===t.length?(r.showMessage(e.T("enterpriseSettings/enterpriseSettings.saved_successfully"),"#saveMessages"),n.trigger("app:reload")):t.forEach(function(t){r.showError(e.T(t),"#saveMessages")})}).fail(function(){x(!1)}))}function b(){I=$(".enterprise-settings-tabs").tabControl({tabs:P})}function h(){T()}function T(){t.navigate("#")}var I,S="div.pane-right div.enterprise-settings",x=e.observable(!1),E=e.observable(),A=e.observable(),w=e.observable(),k=e.observable(),P=[{name:e.T("storeSettings/storeSettings.general"),containerSelector:"#enterpriseGeneralTab"},{name:e.T("enterpriseSettings/enterpriseSettings.contacts"),containerSelector:"#enterpriseContactsTab"},{name:e.T("storeSettings/storeSettings.receipt"),containerSelector:"#enterpriseReceiptTab"},{name:e.T("storeSettings/storeSettings.tips"),containerSelector:"#enterpriseTipsTab",visibleObservableVariable:k},{name:e.T("storeSettings/storeSettings.taxes"),containerSelector:"#enterpriseTaxesTab"},{name:e.T("enterpriseSettings/enterpriseSettings.localization"),containerSelector:"#localizationTab"},{name:e.T("enterpriseSettings/enterpriseSettings.marketing"),containerSelector:"#marketingTab"}];return{activate:f,compositionComplete:v,attached:g,save:y,progress:x,cancel:h,isAdmin:E,isMarketingAndLoyalty:A,ebtInstalled:w}});
define('viewmodels/inventory/importInventory',["jquery","knockout","durandal/app","plugins/router","durandal/system","data/baseCommon","data/common","viewmodels/base/baseViewModel","data/config","signalr/signalr-importHub"],function(e,t,n,r,a,i,o,s,u,l){function c(){c.superclass.constructor.apply(this,arguments)}return i.extend(c,s),e.extend(c.prototype,{name:"InventoryImportViewModel",importErrorMsg:t.T("inventory/importInventory.error_importing_"),containerSelector:".import-inventory",uploadUrl:"api/Upload/UploadFile",cancelUrl:"api/Upload/CancelUpload",initialize:function(){c.superclass.initialize.apply(this,arguments),this.createModel(),l.connect("inventory",this.onImportFinished.bind(this),this.onImportProgress.bind(this),this.onImportError.bind(this),this.onImportStarted.bind(this),this.onCancelled.bind(this))},activate:function(){c.superclass.activate.apply(this,arguments),a.log(this.name+" - activating")},attached:function(){c.superclass.attached.apply(this,arguments),a.log(this.name+" - attached"),this.reset();var n=this,r=this.model();e("#importInventoryFile").fileupload({url:n.uploadUrl,dataType:"json",autoUpload:!1,acceptFileTypes:/(\.|\/)(csv)$/i,maxFileSize:u.importMaxFileSize,messages:{maxFileSize:t.T("import.File is too big message",null,(u.importMaxFileSize/1048576).toFixed(2))}}).on("fileuploadadd",function(t,n){e.each(n.files,function(e,t){r.data(n),r.file(t.name)})}).on("fileuploadprocessalways",function(e,n){var a=n.index,i=n.files[a];r.error(""),r.message("");var o="";o=i.errorId?t.T(i.errorId,null,i.parameters):i.error,o&&(r.error(o),r.data(),r.file("")),r.error()||r.readyForUpload(!0)}).on("fileuploadprogressall",function(e,t){var n=parseInt(100*(t.loaded/t.total),10);r.uploadProgress(n)}).on("fileuploaddone",function(n,a){r.isUploading(!1),r.uploadProgress(0),r.error(""),r.message(""),e.each(a.result.files,function(e,n){var a="";a=n.errorId?t.T(n.errorId,null,n.parameters):n.error,a&&(r.error(a),r.data(),r.file(""))})}).on("fileuploadsubmit",function(e,t){t.formData={enterpriseId:u.enterpriseId,action:"ImportInventory"}}).on("fileuploadfail",function(e,n){r.isUploading(!1),r.uploadProgress(0);var a="",i=n.jqXHR;i&&i.responseJSON&&(a=i.responseJSON.exceptionMessage||i.responseJSON.message),a=t.T("inventory/importInventory.file_upload_failed_")+t.T(a),r.error(a)}).prop("disabled",!e.support.fileInput).parent().addClass(e.support.fileInput?void 0:"disabled")},deactivate:function(){c.superclass.deactivate.apply(this,arguments),a.log(this.name+" -  deactivating")},detached:function(){c.superclass.detached.apply(this,arguments),a.log(this.name+" -  detached")},compositionComplete:function(){c.superclass.compositionComplete.apply(this,arguments),a.log(this.name+" - compositionComplete")},onImportFinished:function(e,n){var r=this.model();r.file()!=e&&r.file(e),r.isImporting(!1),r.importProgress(0);var a=n.message;n.messageId&&(a=t.T(n.messageId,null,n.parameters)),r.message(a+t.T("inventory/importInventory.imported_lines",null,n.line))},onCancelled:function(){var e=this.model();e.isImporting(!1),e.importProgress(0),e.message(t.T("inventory/importInventory.import_was_successfully_cancelled"))},onImportProgress:function(e,t){var n=this.model();n.file()!=e&&n.file(e),n.isImporting(!0),n.importProgress(t.progress)},onImportError:function(e,n){var r=this.model();r.file()!=e&&r.file(e),r.isImporting(!1),r.importProgress(0);var a=n.message;n.messageId&&(a=t.T(n.messageId,null,n.parameters)),r.error(a+t.T("inventory/importInventory.error_at_line_",null,n.line+1))},onImportStarted:function(){},close:function(){r.navigateBack()},cancel:function(){var n=this.model();e.post(this.cancelUrl,{"":u.enterpriseId}).then(function(e){e&&n.importProgress(t.T("inventory/importInventory.cancelling"))})},reset:function(){var e=this.model();e.file(""),e.isImporting(!1),e.isUploading(!1),e.uploadProgress(0),e.importProgress(0),e.readyForUpload(!1),e.error(""),e.message(""),e.data()},getTemplateFileUrl:"api/Upload/GetTemplateFile",downloadTemplate:function(){var e=this.getTemplateFileUrl+"/"+u.enterpriseId+"?type=inventory";window.open(e,"_blank","")},createModel:function(){this.model||(this.model=t.observable({file:t.observable(""),isImporting:t.observable(!1),isUploading:t.observable(!1),uploadProgress:t.observable(0),importProgress:t.observable(0),readyForUpload:t.observable(!1),error:t.observable(""),message:t.observable(""),data:t.observable("")}))},"import":function(){this.model().message(""),this.model().error(""),this.model().isUploading(!0),this.model().data().submit()}}),new c});
define('viewmodels/inventory/models/itemNameModel',["models/businessObjectNameModel","common/utils"],function(e,t){function n(){n.superclass.constructor.apply(this,arguments)}return t.extend(n,e),n});
define('viewmodels/inventory/inventory-manage-tabs/general',["jquery","knockout","plugins/dialog","data/config","repositories/itemsRepository","repositories/departmentsRepository","repositories/categoriesRepository","repositories/picturesRepository","viewmodels/inventory/models/itemNameModel","viewmodels/languageSelector"],function(e,t,n,r,a,i,o,s,u,l){function c(){var e=navigator.userAgent.match(/Chrom(e|ium)\/([0-9]+)\./);return e?parseInt(e[2],10):!1}function d(){U(c()>=48)}function p(){return R(""),_(!1),L()||A(),$=!1,e.when([O()])}function m(){L().color(N)}function f(t){return event.preventDefault(),t.handled===!0?!1:(e("input#color2 + .cp-container.swatches-active").toggleClass("visible"),t.handled=!0,void 0)}function g(){e("input#color2 + .cp-container.swatches-active").removeClass("visible")}function v(){if(e("input#color2 + .cp-container.swatches-active").length<1){var n=e("input#color2",D);n.ColorPickerSliders({flat:!0,placement:"bottom",color:L().color()?"rgb("+L().color()+")":"#ffffff",swatches:["#6d2e28","#903643","#b96846","#b97b41","#828134","#387355","#a73b3c","#bc4559","#da644f","#da964d","#9ba138","#4cab70","#d55356","#df536c","#f1785e","#f5b15f","#bfba42","#81bf7d","#f05d6d","#df8b8b","#fe9663","#f6cc24","#c9d15e","#9ccb7e","#494949","#ae69e2","#6c76e1","#698fcd","#37adbe","#7fb5b2","#b7b7b7","#406cb7","#515a97","#5675af","#6292b4","#40bdad","#e0e0e0","#2e487e","#373079","#6072a3","#537e96","#2e8e83","#ffffff","#434f75","#4b516d","#37578d","#265972","#75978f"],customswatches:!1,order:{},size:"large",previewformat:"rgb",titleswatchesreset:t.T("categories/categoryManage.select_color"),onchange:function(e,t){N=t.tiny._r+","+t.tiny._g+","+t.tiny._b}}),n.on("touchend click",f),e("div.cp-swatch",D).on("touchend click",g)}}function y(){D&&L()&&(I(),v())}function b(t){e(".checkbox",t).checkbox(),D=t}function h(){return $=!0,!0}function T(){j._options.didLoad=h,j._options.didTransform=h,j._options.didRemove=h}function I(){try{if(Slim.find(document.getElementById("slim-image")))return!1;j=Slim.create(document.getElementById("slim-image"),{ratio:"3:2",label:t.T("inventory/inventory-manage-tabs/general.browse_images"),statusFileType:t.T("inventory/inventory-manage-tabs/general.invalid_image"),minSize:{width:10,height:10},didInit:T}),e("#picturePreview").attr("src")||e(".slim-file-hopper").show()}catch(n){}}function S(){function n(){return new Promise(function(e){if(U())var t=setInterval(function(){document.getElementById("slim-image")&&(I(),clearInterval(t),e(!0))},200);else e(!0)})}function r(){return new Promise(function(e){var t=setInterval(function(){document.getElementById("color2")&&(v(),clearInterval(t),e(!0))},200)})}function a(){var t=e.Deferred();if(!j||!j.data||!$)return t.resolve().promise();var n,r,a,i,o,s,u,l,c,d=280,p=.8,m="image/jpeg",f=j.data&&j.data.output&&j.data.output.image;return f?(n=f.toDataURL(m,p),a=f.width,i=f.height,c=a/i,o=d,s=d/c>>0,o>d&&(s=d/o*s,o=d),s>d&&(o=d/s*o,s=d),u=new Image,u.src=n,u.setAttribute("crossOrigin","anonymous"),u.onload=function(){f.width=o,f.height=s,l=f.getContext("2d"),l.drawImage(u,0,0,o,s),r=f.toDataURL(m,p),u.remove(),k(r),t.resolve()}):(F(),t.resolve()),t}var i=this;i.initialize=function(){return e.when.apply(e,[n(),r()])},i.id=t.observable(),i.enterpriseId=t.observable(),i.inventoryType=V,i.names=t.observableArray(),i.productType=t.observable(),i.departmentId=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),i.departmentId.subscribe(function(e){var n=o.loadByLobId(e);n&&(n=n.filter(function(e){return t.unwrap(e.isActive)||null!=i.id()})),i.categories(n)}),i.color=t.observable(),i.departments=t.observableArray([]),i.categoryId=t.observable().extend({required:{message:t.T("common.thisFieldIsRequired")}}),i.categories=t.observableArray([]),i.upc=t.observable().extend({upc2:!0}),i.isActive=t.observable(!0),i.picture=t.observable(),i.generateImage=a,i.chromeBrowserCheck=U,i.loadCategories=function(){return o.loadAllAsync().then(function(e){i.categories(Enumerable.From(e).Where(function(e){return e.lobId()==i.departmentId()||""==i.departmentId()}).ToArray())})},i.errors=t.validation.group([i.names,i.departmentId,i.categoryId,i.upc])}function x(e){L(S.createFromProduct(e)),L().initialize(),N=null}function E(e){L(S.createFromProduct(e)),L().initialize(),N=null}function A(){M&&(M.destroy(),M=void 0),_(!1)}function w(e){R(e.message)}function k(e){var t=atob(e.substr(e.indexOf("base64,")+7)).length;if(t<=r.productPictureMaxSize){var n=s.createNewPicture();n.content.image(e),_(!1),L().picture(n)}else _(!0)}function P(){R(""),_(!1),M||(M=e("#loadPicture",D).fileDialog({type:"image",selector:"#loadPicture",onloadCallback:k,onError:w})),M.show()}function F(){L().picture(null),R(""),_(!1)}function C(){n.showMessage(t.T("inventory/inventory-manage-tabs/general.the_image_will_be_deleted"),t.T("inventory/inventory-manage-tabs/general.delete_image"),[{text:t.T("inventory/inventory-manage-tabs/general.ok"),value:!0},{text:t.T("inventory/inventory-manage-tabs/general.cancel"),value:!1}],!0).then(function(e){e===!0&&L().picture(null),R(""),_(!1)})}function O(){return o.loadAllAsync()}var M,j,L=t.observable(),_=t.observable(!1),N=null,D=null,$=!1,U=t.observable(!0),R=t.observable(),V=t.observable(0);return d(),S.createFromProduct=function(e){var n=new S;n.id(e.itemId()),n.enterpriseId(e.enterpriseId());var r=Enumerable.From(e.names).Select(function(t){return new u(t,e.otherNames)}).ToArray();return n.inventoryType(e.inventoryType()),n.names(r),n.upc(e.upc()),n.isActive(e.isActive()),n.picture(e.productImage()),n.color=t.observable(e.color()),n.productType(e.productType()),null!=e.lobId()&&n.departmentId(e.lobId()),n.departments(e.departments()),null!=e.categoryId()&&n.categoryId(e.categoryId()),n.errors=t.validation.group([n.names,n.departmentId,n.categoryId,n.upc]),n},{compositionComplete:y,attached:b,activate:p,model:L,create:x,fill:E,reset:A,showFileUpload:P,deleteImage:C,imageSizeExceeded:_,error:R,productPictureMaxSize:r.productPictureMaxSize,langs:l,setUpColor:v,setUpSlim:I,saveColor:m,inventoryType:V}});
define('viewmodels/modifiers/modifierManage',["knockout","plugins/router","durandal/system","data/common","data/config","plugins/history","data/baseCommon","viewmodels/base/baseManageViewModel","repositories/modifierTypesRepository","repositories/presentationApi/modifiersRepository","viewmodels/languageSelector"],function(e,t,n,r,a,i,o,s,u,l,c){function d(){var t=this;t.entityName=function(){return"Modifier"},t.getId=function(){return Enumerable.From(t.allModifiers()).Select(function(e){return e.id()}).ToArray().join()},t.getEntities=function(){return t.allModifiers()},t.modifierType=e.observable(),t.modifierType.subscribe(function(n){0==n?Enumerable.From(t.groupModifiers()).Where(function(t){return t.errors=e.validation.group(t),!t.isValid()}).ForEach(function(e){t.deleteGroupModifier(e)}):1==n?Enumerable.From(t.addOnModifiers()).Where(function(t){return t.errors=e.validation.group(t),!t.isValid()}).ForEach(function(e){t.deleteAddOnModifier(e)}):2==n&&Enumerable.From(t.exceptionModifiers()).Where(function(t){return t.errors=e.validation.group(t),!t.isValid()}).ForEach(function(e){t.deleteExceptionModifier(e)})},this,"beforeChange"),t.modifierType.subscribe(function(e){0===e?0===t.groupModifiers().length&&t.addGroupModifier():1===e?0===t.addOnModifiers().length&&t.addAddOnModifier():2===e&&0===t.exceptionModifiers().length&&t.addExceptionModifier();var n=$("#groupModifiers");n.length>0&&$(window).scrollTop(n.offset().top)}),t.modifierTypes=u.loadAll(),t.groupModifiers=e.observableArray([]),t.addGroupModifier=function(){t.groupModifiers.push(l.createNewGroupModifierTemplate(a.enterpriseId))},t.deleteGroupModifier=function(e){t.groupModifiers.splice(t.groupModifiers.indexOf(e),1)},t.addOnModifiers=e.observableArray([]),t.addAddOnModifier=function(){t.addOnModifiers.push(l.createNewAddOnModifierTemplate(a.enterpriseId))},t.deleteAddOnModifier=function(e){t.addOnModifiers.splice(t.addOnModifiers.indexOf(e),1)},t.exceptionModifiers=e.observableArray([]),t.addExceptionModifier=function(){t.exceptionModifiers.push(l.createNewExceptionModifierTemplate(a.enterpriseId))},t.deleteExceptionModifier=function(e){t.exceptionModifiers.splice(t.exceptionModifiers.indexOf(e),1)},t.attachModifier=function(e){var r=e.findNameByLang(App.defaultLang);r.length>0?r=r[0]:r||n.error("default language modifier name not found");var a;0===e.itemModifierTypeCode()?a=t.groupModifiers:1===e.itemModifierTypeCode()?a=t.addOnModifiers:2===e.itemModifierTypeCode()&&(a=t.exceptionModifiers);var i=a().findIndex(function(t){return t.id()==e.id()});if(-1===i&&(i=a().findIndex(function(e){return e.findNameIndexByLangAndValue(App.defaultLang,r.name())>=0})),i>=0){a()[i].id(e.id()),a()[i].names().forEach(function(t){var n=e.findNameByLang(t.languageId);t.id=n.id,t.objectId=n.objectId}),e.sortItemModifierValues();for(var o=a()[i].itemModifierValues().length,s=0;o>s;s++)a()[i].itemModifierValues()[s].id(e.itemModifierValues()[s].id()),a()[i].itemModifierValues()[s].itemModifierId(e.itemModifierValues()[s].itemModifierId()),a()[i].itemModifierValues()[s].itemSellingPrice().id(e.itemModifierValues()[s].itemSellingPrice().id()),a()[i].itemModifierValues()[s].itemSellingPrice().referenceId(e.itemModifierValues()[s].itemSellingPrice().referenceId()),a()[i].itemModifierValues()[s].names().forEach(function(t){var n=e.itemModifierValues()[s].findNameByLang(t.languageId);t.id=n.id,t.objectId=n.objectId})}else n.error("modifier not found")},t.allModifiers=e.computed(function(){var e=[];return e=e.concat(t.groupModifiers()),e=e.concat(t.addOnModifiers()),e=e.concat(t.exceptionModifiers())}).extend({arrayElementUniqueProperty:{propertyName:"name",errorMessage:e.T("modifiers/modifierManage.new_modifiers_must_have_unique_names")}}),t.getInvalidModifiers=function(){var n=[],r=t.allModifiers();return Enumerable.From(r).ForEach(function(t){t.errors=e.validation.group(t)}),n=n.concat(Enumerable.From(r).Where(function(e){return 0!=e.errors().length}).ToArray())}}function p(){p.superclass.constructor.apply(this,arguments)}return d.createFromModifier=function(e){var t=new d;return e.isGroupModifier()?t.groupModifiers.push(e):e.isAddOnModifier()?t.addOnModifiers.push(e):e.isExceptionModifier()&&t.exceptionModifiers.push(e),t.modifierType(e.itemModifierTypeCode()),t},o.extend(p,s),$.extend(p.prototype,{errorSummary:e.observable(""),name:"ModifierManage",moduleId:"viewmodels/modifiers/modifierManage",modifier:e.observable(l.createNew()),title:e.observable(""),editMode:e.observable(!1),isLoading:e.observable(!1),langs:c,initialize:function(){p.superclass.initialize.apply(this,arguments)},activate:function(){this.isLoading(!1),this.errorSummary(""),p.superclass.activate.apply(this,arguments),n.log(this.name+" activating")},deactivate:function(){},attached:function(){p.superclass.attached.apply(this,arguments),n.log(this.name+" attached")},save:function(){var t=this;t.errorSummary("");var n=[],r=this.model().getInvalidModifiers();if(0===r.length){var a=[];this.model().allModifiers().forEach(function(e){e.itemModifierValues().forEach(function(e){e.modPrice(e.itemSellingPrice().unitPrice())})}),this.model().allModifiers().forEach(function(r){var i=l.createFromServerEntity(r.toPlainObject()),o=l.saveAsync(i).then(function(r){r.isSuccess===!1?n.push(e.T(r.message)):t.model().attachModifier(r)},function(t){t.message&&n.push(e.T(t.message))});a.push(o)}),$.when.apply($,a).then(function(){n.length>0?t.errorSummary(n.join("<br />")):t.close(t.model())},function(){n.length>0&&t.errorSummary(n.join("<br />"))})}else r.forEach(function(e){e.errors.showAllMessages()})},saveList:function(){var t=this;t.errorSummary("");var n=[],r=this.model().getInvalidModifiers();if(0===r.length){this.model().allModifiers().forEach(function(e){e.itemModifierValues().forEach(function(e){e.modPrice(e.itemSellingPrice().unitPrice())})});var a=this.model().allModifiers().map(function(e){return l.createFromServerEntity(e.toPlainObject())});t.isLoading(!0),l.saveList(a).then(function(r){r&&"Array"===r.constructor.name?(r.forEach(function(a){r.isSuccess===!1?n.push(e.T(a.message)):t.model().attachModifier(a)}),t.close(t.model())):n.push(e.T(r.message))},function(t){t&&t.message?n.push(e.T(t.message)):n.push(e.T("inventory/inventoryManage.unexpected_error_occured_please_try_again_later"))}).always(function(){t.isLoading(!1),n.length>0&&t.errorSummary(n.join("<br />"))})}else r.forEach(function(e){e.errors.showAllMessages()})},createNewModel:function(){this.model=e.observable(new d)},createModel:function(t){if(t){var n=l.loadById(t);this.modifier(n),this.title(e.T("modifiers/modifierManage.edit_modifier")),this.editMode(!0),this.model(d.createFromModifier(this.modifier()))}else this.modifier(l.createNew()),this.title(e.T("modifiers/modifierManage.new_modifier")),this.editMode(!1),this.model(new d)},getId:function(){return $.makeArray(arguments).join("_")},splitId:function(e){return e.split("_")}}),new p});
define('viewmodels/inventory/inventory-manage-tabs/modifiers/modifiers',["jquery","knockout","plugins/router","repositories/presentationApi/modifiersRepository","repositories/modifierTypesRepository","viewmodels/modifiers/modifierManage","viewmodels/languageSelector","viewmodels/controls/storesFilter","models/buItemValueModel","data/config"],function(e,t,n,r,a,i,o,s,u,l){function c(n){function a(e){n.forEach(function(t){t.itemModifierValues().forEach(function(t){t.selectedStoreId(e)})})}var i=this;i.selectedStore=t.observable(),n||(n=[]),i.selectedStore.subscribe(function(e){a(e)}),a(i.selectedStore()),i.storesFilter=new s(t.observableArray()),i.stores=t.observableArray(),i.isEnterprise=t.computed(function(){return"All"==i.selectedStore()}),i.storesFilter.initialize().then(function(){i.stores(i.storesFilter.storesArr()),i.stores.unshift({id:t.observable("All"),storeName:t.T("inventory/inventory-manage-tabs/modifiers/modifiers.all_stores")}),i.selectedStore("All")}),i.modifierType=t.observable(),i.modifierTypes=t.observableArray(),i.selectedModifiers=t.observableArray([]),i.selectedModifiers.subscribe(function(e){window.Enumerable.From(e).ForEach(function(e){var n=window.Enumerable.From(i.allTemplates()).FirstOrDefault(null,function(t){return t.name()==e.name()&&t.itemModifierTypeCode()==i.modifierType()}),a=r.createCopy(n,i.selectedStore());null!=a&&(a.id(null),a.itemModifierValues().forEach(function(e){e.id(null),i.stores().forEach(function(n){if("All"!=t.unwrap(n.id)){var r=u.createNew();r.unitPrice(e.itemSellingPrice().unitPrice()),r.businessUnitId=n.id,e.modPrices.push(r)}}),e.itemSellingPrice().id(null)}),i.addTemplate(a))}),i.selectedModifiers().length=0}),i.allTemplates=t.observableArray([]),i.reloadTemplates=function(){var e=window.Enumerable.From(r.loadAll()).OrderBy(function(e){return e.name()}).ToArray();i.allTemplates(e)},i.templates=t.computed(function(){return null==i.modifierType()?[]:window.Enumerable.From(i.allTemplates()).Where(function(e){return e.itemModifierTypeCode()==i.modifierType()}).ToArray()}),i.addTemplate=function(e){e.isGroupModifier()?i.addGroupModifier(e):e.isAddOnModifier()?i.addAddOnModifier(e):e.isExceptionModifier()&&i.addExceptionModifier(e)},i.deletedModifiers=t.observableArray([]),i.groupModifiers=t.observableArray(window.Enumerable.From(n).Where(function(e){return e.isGroupModifier()}).OrderBy(function(e){return e.order()}).ToArray()),i.addGroupModifier=function(e){e||(e=i.createNewModifier(0)),i.groupModifiers.push(e)},i.deleteGroupModifier=function(e){i.groupModifiers.splice(i.groupModifiers.indexOf(e),1),null!=e.id()&&i.deletedModifiers.push(e)},i.addOnModifiers=t.observableArray(window.Enumerable.From(n).Where(function(e){return e.isAddOnModifier()}).OrderBy(function(e){return e.order()}).ToArray()),i.defaultModifierNames=[{name:"New Group",index:0},{name:"New Add-on",index:0},{name:"New Exception",index:0}],i.getNewModifierName=function(e){return i.defaultModifierNames[e].index+=1,i.defaultModifierNames[e].name+" "+i.defaultModifierNames[e].index},i.createNewModifier=function(e){var t;0===e?t=r.createNewGroupModifierTemplate(l.enterpriseId):1===e?t=r.createNewAddOnModifierTemplate(l.enterpriseId):2===e&&(t=r.createNewExceptionModifierTemplate(l.enterpriseId));var n=r.createCopy(t,i.selectedStore()),a=i.getNewModifierName(e);return n.names().forEach(function(e){e.languageId===l.defaultLanguage&&e.name(a)}),0!==e&&n.itemModifierValues()[0].names().forEach(function(e){e.languageId===l.defaultLanguage&&e.name(a)}),n},i.addAddOnModifier=function(e){e||(e=i.createNewModifier(1)),i.addOnModifiers.push(e)},i.deleteAddOnModifier=function(e){i.addOnModifiers.splice(i.addOnModifiers.indexOf(e),1),null!=e.id()&&i.deletedModifiers.push(e)},i.exceptionModifiers=t.observableArray(window.Enumerable.From(n).Where(function(e){return e.isExceptionModifier()}).OrderBy(function(e){return e.order()}).ToArray()),i.addExceptionModifier=function(e){e||(e=i.createNewModifier(2)),i.exceptionModifiers.push(e)},i.deleteExceptionModifier=function(e){i.exceptionModifiers.splice(i.exceptionModifiers.indexOf(e),1),null!=e.id()&&i.deletedModifiers.push(e)},i.allModifiers=t.computed(function(){var e=[];return e=e.concat(i.groupModifiers()),e=e.concat(i.addOnModifiers()),e=e.concat(i.exceptionModifiers())}).extend({localizationUniqueProperty:{errorMessage:t.T("inventory/inventory-manage-tabs/modifiers/modifiers.product_modifiers_must_have_unique_names")}}),i.getInvalidModifiers=function(){var e=[],n=i.allModifiers();return window.Enumerable.From(n).ForEach(function(e){e.errors=t.validation.group(e)}),e=e.concat(window.Enumerable.From(n).Where(function(e){return 0!=e.errors().length}).ToArray())},i.setupMultiSelect=function(){e("#modifierTemplates",v).multipleSelect({filter:!0,selectAll:!1,placeholder:t.T("inventory/inventory-manage-tabs/modifiers/modifiers.add_modifiers_to_product"),selectedItemsArr:b().selectedModifiers,vendorPlaceholder:"Add modifiers to product",itemId:"name",createNewArrItem:r.createNew})}}function d(e){v=e}function p(e){var t=e.itemModifiers();y||(y=e.names.map(function(e){return{languageId:e.language.id,name:e.language.name,containerSelector:"#modifiersPane input[data-lang="+e.languageId+"]"}}));var n=new c(t);n.modifierTypes(e.modifierTypes()),n.allTemplates(e.modifierTemplates()),b(n)}function m(){b(new c),h(!1)}function f(){h(!0);var e,t=n.activeInstruction(),r=2;t.params.length>0&&(e=t.params[0]);var a="product/"+e+"/"+r;i.show(null,{returnTo:a,event:"nav:invManage:return",returnViewModel:"viewmodels/inventory/inventoryManage"})}function g(){T("")}var v,y,b=t.observable(),h=t.observable(!1),T=t.observable("");return{activate:g,binding:d,model:b,getId:function(){return e.makeArray(arguments).join("_")},showNewModifier:f,fill:p,reset:m,isNavigatingToNewModifierTemplates:h,langs:o,validationMessage:T}});
define('viewmodels/inventory/inventory-manage-tabs/modifiers/addOnModifiers',["viewmodels/inventory/inventory-manage-tabs/modifiers/modifiers"],function(e){function t(e){e.addAddOnModifier()}return{model:e.model,getId:e.getId,langs:e.langs,addModifier:t}});
define('viewmodels/inventory/inventory-manage-tabs/modifiers/exceptionModifiers',["viewmodels/inventory/inventory-manage-tabs/modifiers/modifiers"],function(e){function t(e){e.addExceptionModifier()}return{model:e.model,getId:e.getId,langs:e.langs,addModifier:t}});
define('viewmodels/inventory/inventory-manage-tabs/modifiers/groupModifiers',["viewmodels/inventory/inventory-manage-tabs/modifiers/modifiers"],function(e){function t(e){e.model().addGroupModifier()}var n={items:".modifier-group"};return{model:e.model,getId:e.getId,sortableOptions:n,langs:e.langs,addModifier:t}});
define('viewmodels/inventory/inventory-manage-tabs/pricing',["knockout","viewmodels/controls/storesFilter"],function(e,t){function n(){c()||o()}function r(){var t=this,n=e.observableArray();t.priceId=e.observable(),t.isDiscountable=e.observable(!0),t.referenceId=e.observable(),t.isFixedPrice=e.observable(!0),t.unitId=e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")}}),t.unitTypes=e.observableArray(),t.buItems=e.observableArray(),t.buItems.subscribe(function(){var r=[];n([]),t.buItems().forEach(function(t){r.push(e.validation.group(t))}),n(r)}),t.buItemsErrors=e.computed(function(){var e=[];return n().forEach(function(t){e=e.concat(t())}),e}),t.pricingTypes=e.computed(function(){return[{value:!0,name:e.T("inventory/inventory-manage-tabs/pricing.fixed")},{value:!1,name:e.T("inventory/inventory-manage-tabs/pricing.manual")}]}),t.unitPrice=e.observable(0).extend({step:.01,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/pricing.price_should_be_greater_or_equal_to_0_and_less_than_100000"),params:{maxValue:1e5,minValue:0,includeMinValue:!0}}}),t.stores=p,t.storesFilter=m,t.errors=e.validation.group(this),t.setStoreNames=function(){Enumerable.From(t.buItems()).ForEach(function(e){for(var n=t.storesFilter.storesArr(),r=0;r<n.length;r++){var a=n[r];a.id==e.businessUnitId&&e.store(a.storeName)}})},t.removeBuItem=function(e){e.priceVisible(!1),e.isDiscountable(null),e.unitPrice(null),e.onHandQuantity(null),e.minimumQuantity(null),e.recommendedQuantity(null)},t.selectedStore=e.observable(),t.addCustomePrice=function(){t.selectedStore()&&Enumerable.From(t.buItems()).ForEach(function(e){t.selectedStore()==e.businessUnitId&&(e.priceVisible(!0),e.isDiscountable(t.isDiscountable()),e.unitPrice(t.unitPrice()))})}}function a(e){var t=new r;t.unitTypes(e.unitsOfMeasure()),t.buItems(e.buItems()),c(t),t.setStoreNames();var n=window.localStorage.getItem("prodType");1==n&&t.unitId("_item")}function i(e){c(r.createFromProduct(e))}function o(){c(new r)}function s(e){d=e}function u(){for(var e=[],t=0;t<m.storesArr().length;++t)for(var n=m.storesArr()[t],r=0;r<p().length;++r)p()[r].id()===n.id&&e.push(n);return e}function l(e){for(var t=0;t<p().length;++t)if(p()[t].id()===e.businessUnitId)return!0;return!1}var c=e.observable(),d=null,p=e.observableArray(),m=new t(p,!0,!0,"price"),f=e.observable(!0);return r.createFromProduct=function(e){var t=new r;return t.referenceId(e.itemId()),t.isFixedPrice(!e.isManualPrice()),t.priceId(e.itemSellingPriceId()),t.isDiscountable(e.isDiscountable()),t.unitId(e.unitOfMeasureId()),t.unitPrice("number"==typeof e.salesPrice()?e.salesPrice().toFixed(2):0),t.unitTypes(e.unitsOfMeasure()),t.buItems(e.buItems()),t.setStoreNames(),t},{activate:n,model:c,create:a,fill:i,reset:o,attached:s,stores:p,storesFilter:m,isStoreIncluded:l,getFilteredStoreList:u,unitOfMeasureEditable:f}});
define('viewmodels/inventory/inventory-manage-tabs/ordering',["knockout","repositories/itemsRepository","viewmodels/inventory/inventory-manage-tabs/pricing","data/config"],function(e,t,n,r){function a(){c()||s(),f(r.isPoReceivingApp)}function i(){this.id=e.observable(),this.storesFilter=m,this.buItems=e.observableArray(),this.digits=e.computed(function(){var e=n.model().unitId();if(null!=e){var t=Enumerable.From(n.model().unitTypes()).FirstOrDefault(null,function(t){return t.id==e});if(null!=t)return t.quantityDecimalPlaces}return 0});var t=this;this.onHandQuantity=e.observable(0).extend({decimal:t.digits,number:!0}),t.recommendedQuantity=e.observable(0).extend({decimal:t.digits,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/ordering.recommendedQuantityLimits",null,[0,1e8]),params:{minValue:0,maxValue:1e8,includeMinValue:!0}}}),t.minimumQuantity=e.observable(0).extend({decimal:t.digits,number:!0,range:{message:e.T("inventory/inventory-manage-tabs/ordering.minimumQuantityLimits",null,[0,1e8]),params:{minValue:0,maxValue:1e8,includeMinValue:!0}},lessThan:{message:e.T("inventory/inventory-manage-tabs/ordering.minimum_quantity_should_be_less_or_equal_to_recommended_quantity"),params:{target:t.recommendedQuantity,canBeEqual:!0}}}),t.setStoreNames=function(){Enumerable.From(t.buItems()).ForEach(function(e){for(var n=t.storesFilter.storesArr(),r=0;r<n.length;r++){var a=n[r];a.id==e.businessUnitId&&e.store(a.storeName)}e.digits(t.digits()),e.onHandQuantity.subscribe(function(){t.onHandQuantity(0),Enumerable.From(t.buItems()).ForEach(function(e){t.onHandQuantity(new Number(e.onHandQuantity())+new Number(t.onHandQuantity()))})})})},t.errors=e.validation.group(t)}function o(e){c(i.createFromProduct(e))}function s(){c(new i)}function u(e){d=e}function l(e){var t=new i;t.buItems(e.buItems()),c(t),t.setStoreNames()}var c=e.observable(),d=null,p=n.stores,m=n.storesFilter,f=e.observable();i.createFromProduct=function(e){var t=new i;return t.id(e.itemId()),t.onHandQuantity(e.quantity()),t.minimumQuantity(e.minQuantity()),t.recommendedQuantity(e.recommendedQuantity()),t.buItems(e.buItems()),t.setStoreNames(),t};var g=n.isStoreIncluded;return{activate:a,model:c,fill:o,reset:s,attached:u,create:l,isStoreIncluded:g,stores:p,storesFilter:m,poReceivingEnabled:f}});
define('viewmodels/inventory/inventory-manage-tabs/quickbooks',["knockout","linq","plugins/router","data/common"],function(e){function t(e){s=e}function n(t){var n=this;if(n.appsData={},null!=t&&t.appsData&&t.appsData[c]){n.appsData[c]=e.observable();var r=t.appsData[c],a={};Object.keys(r).forEach(function(t){a[t]=e.observable(r[t])}),n.appsData[c](a)}n.errors=e.validation.group(n)}function r(e){u(new n(e))}function a(t){var n=u();if(n.appsData&&n.appsData[c]){t.appsData=t.appsData||{};var r={},a=e.unwrap(n.appsData[c]);Object.keys(a).forEach(function(t){r[t]=e.unwrap(a[t])}),t.appsData[c]=r}}function i(e){l(""),u(new n(e))}function o(){}var s,u=e.observable(),l=e.observable(),c="qb";return{activate:o,attached:t,model:u,fill:r,fillModel:a,reset:i,validationMessage:l}});
define('viewmodels/inventory/inventory-manage-tabs/serials',["knockout","viewmodels/inventory/inventory-manage-tabs/pricing","data/config"],function(e,t,n){function r(){storeIds=m().map(function(e){return e.id()}),p().forEach(function(e){e.visible(-1!==storeIds.indexOf(e.businessUnitId))})}function a(t){var n;t.buItems().forEach(function(r){n={visible:e.observable(!1),businessUnitId:r.businessUnitId,businessUnitItemId:r.id,expanded:e.observable(!1),store:r.store(),serialNumbers:e.observableArray(t.serialNumbers.filter(function(e){return e.businessUnitItemId===r.id}).map(function(t){return{id:t.id,businessUnitItemId:t.businessUnitItemId,serialNo:e.observable(t.serialNo)}})),newSerialNo:e.observable()},p.push(n)}),r()}function i(e){p().forEach(function(t){t.serialNumbers().forEach(function(t){t.serialNo()&&e.serialNumbers.push({id:t.id,businessUnitItemId:t.businessUnitItemId,serialNo:t.serialNo()})})})}function o(){p.removeAll(),f("")}function s(e){e.expanded(!e.expanded())}function u(t){if(t.newSerialNo()){var n={businessUnitItemId:t.businessUnitItemId,serialNo:e.observable(t.newSerialNo())};t.serialNumbers.push(n),t.newSerialNo("")}}function l(e){var t=p().filter(function(t){return t.businessUnitItemId===e.businessUnitItemId})[0];t.serialNumbers.remove(e)}function c(e,t){return 13===t.keyCode&&($textBox=$(t.delegateTarget),$textBox.next().focus(),u(e),$textBox.focus()),!0}function d(){v(n.isPoReceivingApp)}var p=e.observableArray(),m=t.stores,f=e.observable(),v=e.observable();return m.subscribe(r),{fill:a,write:i,reset:o,storeSerials:p,turn:s,add:u,remove:l,validationMessage:f,onKeyPress:c,poReceivingEnabled:v,activate:d}});
define('viewmodels/inventory/inventory-manage-tabs/taxes',["knockout","viewmodels/controls/storesFilter","models/taxModel"],function(e,t,n){function r(){p()||s()}function a(){var n=this;this.referenceId=e.observable(),this.buItems=e.observableArray(),this.stores=f,this.storesFilter=new t(f,!0,!0,"tax"),v=this.storesFilter,v.initialize(),this.errors=e.validation.group(this),n.isTaxable=e.observable(!0),n.addCustomePrice=function(){var e=n.selectedStore();e&&n.buItems().forEach(function(t){t.businessUnitId===e&&(t.addTax(),t.isTaxable(n.isTaxable()))})},n.setStoreNames=function(){Enumerable.From(n.buItems()).ForEach(function(e){for(var t=n.storesFilter.storesArr(),r=0;r<t.length;r++){var a=t[r];a.id==e.businessUnitId&&e.store(a.storeName)}})},n.selectedStore=e.observable(),n.taxList=e.observableArray(),n.storeAddList=e.computed(function(){var e=new Array;if(!v)return e;for(var t=0;t<v.storesArr().length;++t)for(var r=v.storesArr()[t],a=0;a<f().length;++a)if(f()[a].id()===r.id){var i=!1;Enumerable.From(n.buItems()).ForEach(function(e){e.businessUnitId==r.id&&e.taxList().length>0&&(i=!0)}),i||e.push(r)}return e})}function i(e){var t=new a;t.buItems(e.buItems()),p(t),t.setStoreNames()}function o(e){p(a.createFromProduct(e))}function s(){p(new a)}function u(e){m=e}function l(){for(var e=new Array,t=0;t<p().taxList().length;++t){var n=p().taxList()[t];e.push(n)}return e}function c(e){for(var t=0;t<p().taxList().length;++t){var n=p().taxList()[t];if(n.id==e)return n.rate}return""}function d(t){return{filter_placeholder:e.T("taxes.select_tax-tax"),width:"80%",optionText:"name",optionId:"id",data:l(),editable:!1,single:!0,filter:!0,selectAll:!1,selectedItem:t.id,valueText:e.observable(t.name||t.locName||(t.tax&&t.tax()?t.tax().name:"")),noRadio:!0,autohide:!0,multiple:!1}}var p=e.observable(),m=null,f=e.observableArray(),v=null;return a.createFromProduct=function(t){var r=new a;r.referenceId(t.itemId()),r.buItems(t.buItems()),r.setStoreNames(),r.taxList(t.taxList()),r.isTaxable(t.isTaxable());var i=t.taxList();return i.forEach(function(e){if(e.description="",e.childTaxes&&e.childTaxes.length){var t=i.filter(function(t){return e.childTaxes.indexOf(t.id)>=0}).map(function(e){return e.name});e.description=t.join(", ")}e.getRate=function(){return e.rate}}),Enumerable.From(r.buItems()).ForEach(function(r){if(r.isTaxVisible=e.computed(function(){var t=f().filter(function(t){return e.unwrap(t.id)===r.businessUnitId});return r.taxList().length>0&&t.length>0}),r.isSingleLineTax=e.computed(function(){return r.isTaxVisible()&&r.taxList&&r.taxList().length<1}),r.addTax=function(){t.taxList().length>0&&r.taxList.push(new n(t.taxList(),t.taxList()[0].id))},r.removeTax=function(e){r.taxList.remove(e,0),r.taxId=null},r.taxId){var a=new n(t.taxList(),r.taxId);r.taxList.push(a)}}),r},{setupTaxesSelect:d,activate:r,model:p,create:i,fill:o,reset:s,attached:u,stores:f,storesFilter:v,getTaxList:l,getRate:c}});
define('viewmodels/inventory/inventory-manage-tabs/variants',["knockout","plugins/router","repositories/presentationApi/modifiersRepository","repositories/modifierTypesRepository","viewmodels/modifiers/modifierManage","viewmodels/languageSelector","viewmodels/controls/storesFilter","models/buItemValueModel","repositories/presentationApi/modifiersRepository","data/config","models/variantModel","data/common"],function(e,t,r,a,o,s,u,l,c,d,p,f){function v(t,a){function o(){}var l=this;l.selectedStore=e.observable(),t||(t=[]),l.product=a,l.isDiscountable=e.observable(a.isDiscountable()),l.variants=e.computed(function(){if(l.selectedStore()){if("All"==l.selectedStore())return a.variants();var e=null;return Enumerable.From(a.buItems()).ForEach(function(t){t.businessUnitId==l.selectedStore()&&(e=t.variants())}),e}}),l.findVariants=function(e){var t=[];if(l.product.variants)for(var n=0;n<l.product.variants().length;n++){var r=l.product.variants()[n];r.variantKeys[0]==e[0]&&r.variantKeys[1]==e[1]&&r.variantKeys[2]==e[2]&&r.variantKeys[3]==e[3]&&(t.push(r),Enumerable.From(a.buItems()).ForEach(function(e){e.variants()[n]?t.push(e.variants()[n]):t.push(p.createNew(l.product,!1))}))}return t},l.deleteVariants=function(e,t){for(var n=new Array,r=0;r<l.product.variants().length;r++)l.product.variants()[r].variantKeys[e]==t&&n.push(l.product.variants()[r]);for(var i=0;i<n.length;i++){var o=l.product.variants.indexOf(n[i]);l.product.variants.splice(o,1),Enumerable.From(a.buItems()).ForEach(function(e){e.variants.splice(o,1)})}l.generateVariants()},l.setVariantValue=function(e,t,n,r,i,o){for(var s=Array(),u=0;u<i.length;u++)i[u].length>0?s.push(i[u][arguments[u]].dimantion):s.push(0);var c=l.findVariants(s),d=!1;0==c.length&&(c=[p.createNew(l.product,!0)],o++,d=!0);for(var m=0;m<c.length;m++){for(var f=c[m],v=[],u=0;u<i.length;u++)i[u].length>0&&(v.push(l.findLocName(i[u][arguments[u]].names)),f.variantKeys[u]=i[u][arguments[u]].dimantion);f.name(v.join(" / ")),d&&(l.product.variants.push(f),Enumerable.From(a.buItems()).ForEach(function(e){var t=p.createNew(l.product,!1);t.name(f.name()),t.variantKeys=f.variantKeys,t.businessUnitId=e.businessUnitId,e.variants.push(t)}),f.sku(o))}return o},l.generateVariants=function(){for(var e=[[],[],[],[]],t=0;t<l.groupModifiers().length;t++)if(5>t){var n=l.groupModifiers()[t].dimantion;e[n]=l.groupModifiers()[t].itemModifierValues()}for(var r=0;r<e[0].length;r++){0==e[1].length&&(w=l.setVariantValue(r,a,i,o,e,w));for(var a=0;a<e[1].length;a++){0==e[2].length&&(w=l.setVariantValue(r,a,i,o,e,w));for(var i=0;i<e[2].length;i++){0==e[3].length&&(w=l.setVariantValue(r,a,i,o,e,w));for(var o=0;o<e[3].length;o++)w=l.setVariantValue(r,a,i,o,e,w)}}}},s.selectedLanguage.subscribe(function(){l.generateVariants()}),l.findLocName=function(e){for(n=0;n<e().length;n++){var t=e()[n];if(t.languageId==s.selectedLanguage()){if(t.name())return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"==t.name()?"":t.name();break}}for(n=0;n<e().length;n++){var t=e()[n];if(t.languageId==d.defaultLanguage)return"&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;"==t.name()?"":t.name()}return""},l.selectedStore.subscribe(function(e){o(e)}),o(l.selectedStore()),l.storesFilter=new u(e.observableArray()),l.stores=e.observableArray(),l.colapsed=e.observable(!0),l.hideDisabled=e.observable(!1),l.closePanel=function(){l.colapsed(!l.colapsed())},l.getPanelStyle=e.computed(function(){return l.colapsed()?"caret_close":"caret_open"}),l.isEnterprise=e.computed(function(){return"All"==l.selectedStore()}),l.isQuantityEditable=e.computed(function(){return!l.isEnterprise()&&!d.isPoReceivingApp}),l.onFocus=function(e,t){t.target.select(),l.lastInput&&l.lastInput.removeClass("focus"),l.lastInput=$(t.target),l.lastInput.addClass("focus")},l.copyToAll=function(e,t){if(l.variants())for(i=0;i<l.variants().length;i++)0==e?l.variants()[i].unitPrice(t.unitPrice()):1==e?l.variants()[i].onHandQuantity(t.onHandQuantity()):l.variants()[i].cost(t.cost());l.lastInput.focus()},l.storesFilter.initialize().then(function(){l.stores(l.storesFilter.storesArr()),l.stores.unshift({id:e.observable("All"),storeName:e.T("inventory/inventory-manage-tabs/modifiers/modifiers.all_stores")}),l.selectedStore("All")}),l.modifierType=e.observable(),l.deletedModifiers=e.observableArray([]),l.sortableOptions={items:".modifier-group"},l.groupModifiers=e.observableArray(Enumerable.From(t).Where(function(e){return e.isGroupModifier()}).OrderBy(function(e){return e.order()}).ToArray()),l.addGroupModifier=function(e){var e=c.createNewGroupModifierTemplate(d.enterpriseId);e.itemModifierValues([]),e.dimantion=l.getMaxDemantion(l.groupModifiers())+1,l.groupModifiers.push(e),l.product.variants([]),Enumerable.From(a.buItems()).ForEach(function(e){e.variants([]),w=1e9}),l.generateVariants()},l.deleteGroupModifier=function(e){l.groupModifiers.splice(l.groupModifiers.indexOf(e),1),null!=e.id()&&l.deletedModifiers.push(e),l.generateVariants()},l.isNewProduct=e.observable(!1),l.allModifiers=e.computed(function(){var e=[];return e=e.concat(l.groupModifiers())}).extend({localizationUniqueProperty:{errorMessage:e.T("inventory/inventory-manage-tabs/modifiers/modifiers.varinat_must_have_unique_names")}}),l.getInvalidVarinats=function(){var e=[],t=l.product.variants();return t.forEach(function(t){t.isValid()||e.push(t)}),e},l.getInvalidModifiers=function(){var e=[];return e},l.isAddModVisible=e.computed(function(){return l.groupModifiers().length<4&&l.isEnterprise()}),l.getItemByDimantion=function(e,t){for(var n=0;n<e.length;n++)if(e[n].dimantion==t)return e[n]},l.getMaxDemantion=function(e){var t=-1;if(e&&e.length>0)for(var n=0;n<e.length;n++)e[n].dimantion>t&&(t=e[n].dimantion);return t},l.setName=function(e,t){for(n=0;n<e().length;n++){var r=e()[n];if(r.languageId==s.selectedLanguage())return r.name(t),t}},l.setupTagInput=function(t){var n=l,r=n.groupModifiers()[t()];if(r){var a=new Array;Enumerable.From(r.itemModifierValues()).ForEach(function(e){a.push(e.names()[0].name())}),$("[id-modIndex="+t()+"]",I).tagEditor("destroy"),$("[id-modIndex="+t()+"]",I).tagEditor({initialTags:r.itemModifierValues,mDemantion:t(),beforeTagSave:function(e,t,a,i,o,s){for(var u=0;u<n.groupModifiers().length;u++){var c=n.groupModifiers()[u];if(c.dimantion==r.dimantion){var d=!1;for(m=0;m<c.itemModifierValues().length;m++){var p=c.itemModifierValues()[m];if(p.dimantion==s){d=!0;var f=l.setName(p.names,o);return l.generateVariants(),f}}if(!d){c.addModifierValue(c.id());var v=l.getItemByDimantion(c.itemModifierValues(),-1);v.dimantion=l.getMaxDemantion(c.itemModifierValues())+1;var g=l.setName(v.names,o);return l.generateVariants(),g}}}return o},beforeTagDelete:function(t,a,i,o,u){var c=r.names().filter(function(e){return e.languageId===s.selectedLanguage()}),d=c[0].name();return d?d+="/":d="",f.showConfirmation(void 0,e.T("inventory/inventory-manage-tabs/variants.delete_var")+"  <b>"+d+o+"?</b>",function(){for(var e=0;e<n.groupModifiers().length;e++){var t=n.groupModifiers()[e];if(t.dimantion==r.dimantion)for(m=0;m<t.itemModifierValues().length;m++){var a=t.itemModifierValues()[m];if(a.dimantion==u){var i=t.itemModifierValues().indexOf(a);return t.itemModifierValues.splice(i,1),l.deleteVariants(t.dimantion,a.dimantion),!0}}}},function(){return!1}),!1},placeholder:"",editable:l.isEnterprise,selectedLng:s.selectedLanguage,idVal:r.id()})}},l.setupMultiSelect=function(){$("#modifierTemplates",I).multipleSelect({filter:!0,selectAll:!1,placeholder:e.T("inventory/inventory-manage-tabs/modifiers/modifiers.add_modifiers_to_product"),selectedItemsArr:S().selectedModifiers,vendorPlaceholder:"Add modifiers to product",itemId:"name",createNewArrItem:r.createNew})}}function g(e){I=e}function b(e){var t=e.itemModifiers();x||(x=e.names.map(function(e){return{languageId:e.language.id,name:e.language.name,containerSelector:"#modifiersPane input[data-lang="+e.languageId+"]"}}));var n=new v(t,e);n.generateVariants(),S(n),E(!1)}function y(e){b(e),E(!0)}function h(){S(new v)}function T(){A("")}var I,x,S=e.observable(),E=(e.observable(!1),e.observable(!1)),A=e.observable(""),w=1e9;return{activate:T,binding:g,model:S,getId:function(){return $.makeArray(arguments).join("_")},fill:b,reset:h,langs:s,validationMessage:A,isNewProduct:E,create:y}});
define('viewmodels/inventory/inventory-manage-tabs/vendorManage',["knockout","plugins/router","repositories/vendorItemsRepository"],function(e,t){function n(){}function r(e){e?t.navigate("vendor/"+e):t.navigate("vendor")}return{attached:n,show:r}});
define('viewmodels/vendors/vendorManage',["jquery","knockout","durandal/system","data/config","data/baseCommon","viewmodels/base/baseManageCompositeViewModel","models/vendorModel","repositories/base/baseRepository"],function(e,t,n,r,a,o,i,s){function l(){l.superclass.constructor.apply(this,arguments)}var u=t.observable(!1);return a.extend(l,o),e.extend(l.prototype,{loading:u,name:"VendorManage",moduleId:"viewmodels/vendors/vendorManage",modelType:i,tabsContainer:".vendors-tabs",tabsContentContainer:".vendors-tabs-content",containerSelector:"div.pane-right > div.vendor-manage",title:t.observable(t.T("vendors/vendorManage.new_vendor")),baseTitle:t.observable(t.T("vendors/vendorManage.new_vendor")),getBaseTitle:!0,defaults:{tabs:[{id:"general",title:t.T("vendors/vendorManage.general"),model:"viewmodels/vendors/manage-tabs/general",view:"views/vendors/manage-tabs/general.html",dataContextPath:"vendor",order:0},{id:"contactInfo",title:t.T("vendors/vendorManage.contact_info"),model:"viewmodels/vendors/manage-tabs/contactInfo",view:"views/vendors/manage-tabs/contactInfo.html",dataContextPath:"contact",order:1}]},initialize:function(){this.vendorsRepo=new s({modelDesc:{entityType:"Business",entityName:"VendorByEnterprise"}}),l.superclass.initialize.apply(this,arguments),this.modelReady(!0),this.repo.options.routeType=this.repo.routeType.routeTypeByEntityName},activate:function(e){e?this.baseTitle(t.T("vendors/vendorManage.edit_vendor")):this.baseTitle(t.T("vendors/vendorManage.new_vendor"));var r=l.superclass.activate.apply(this,arguments);return n.log(this.name+" activating"),r},attached:function(){l.superclass.attached.apply(this,arguments),n.log(this.name+" attached")},save:function(){u(!0);var e=l.superclass.save.apply(this,[!0]);e?e.then(function(){u(!1)}):u(!1)},deactivate:function(){l.superclass.deactivate.apply(this,arguments),n.log(this.name+" deactivating")},detached:function(){l.superclass.detached.apply(this,arguments),n.log(this.name+" detached")},initModel:function(){this.model.properties.vendor.enterpriseId()||this.model.properties.vendor.enterpriseId(r.enterpriseId),this.model.properties.contact.enterpriseId()||this.model.properties.contact.enterpriseId(r.enterpriseId)},resolveComputedFields:function(e){var t=this.vendorsRepo.load({}),n=t.then(function(e){return Enumerable.From(e).Select(function(e){return e.name}).ToArray()});e.resolve({vendorNames:n})},modelLoaded:function(e){if(!e)return!1;var n=e&&e.properties||!1;if(!n)return!1;var r=n.contact,a=r.isStateVisible,o=["CA","US"],i=["US"],s={required:{message:t.T("models/vendorModel.state_is_required")}},l={phoneUS:{message:t.T("models/vendorModel.please_specify_a_valid_us_phone_number")}},u={pattern:{message:t.T("models/vendorModel.phone_is_incorrect"),params:/^[0-9()+\-]{1,21}$/i}};if(!r)return!1;var c=r.isoCountryId,d=r.territory,p=r.phone,m=function(){o.indexOf(c())>-1?(a(!0),d.extend(s)):(d.rules&&d.rules.remove(function(e){return"required"==e.rule}),a(!1)),i.indexOf(c())>-1?(p.rules&&p.rules.remove(function(e){return"pattern"==e.rule}),p.extend(l)):(p.rules&&p.rules.remove(function(e){return"phoneUS"==e.rule}),p.extend(u))};c.subscribe(m),m()}}),new l});
define('viewmodels/inventory/inventory-manage-tabs/vendors',["knockout","linq","plugins/router","repositories/vendorsRepository","repositories/vendorItemsRepository","data/common","viewmodels/vendors/vendorManage"],function(e,t,n,r,a,i,o){function s(e){b=e}function u(e){if(e&&e.length){var t=0;e.forEach(function(e){e.isPrimary()&&++t}),0===t&&e[0].isPrimary(!0)}}function l(t,n){function r(t){a.errors=e.validation.group(t,{deep:!0})}var a=this,i=[];u(n),n.forEach(function(e){this.push(e.id())},i),a.etalonIds=i,a.vendorItemsArray=e.observableArray(n),a.vendorItemsArray.subscribe(function(t){for(var n=0;n<t.length;n++){var i=t[n];i.vendor()||(i.vendor.__ko_proto__===e.dependentObservable&&(i.vendor=e.observable()),a.vendors().forEach(function(e){return e.id()===i.vendorId()?(i.vendor(e),!1):void 0}))}0==t.length?a.primaryVendor(""):""!=a.primaryVendor()&&Enumerable.From(t).Any(function(e){return e.isPrimary()})||a.primaryVendor(t[0].vendorId()),r(t)}),a.vendors=e.observable(t),a.showNewVendor=d;var o=Enumerable.From(a.vendorItemsArray()).FirstOrDefault(null,function(e){return e.isPrimary()});a.primaryVendor=e.observable(null!=o?o.vendorId():""),a.primaryVendor.subscribe(function(e){a.vendorItemsArray().forEach(function(e){e.isPrimary(!1)});var t=Enumerable.From(a.vendorItemsArray()).FirstOrDefault(null,function(t){return t.vendorId()==e});null!=t&&t.isPrimary(!0)}),r(a.vendorItemsArray())}function c(e){for(var t=y().vendorItemsArray().length-1;t>=0;--t)if(y().vendorItemsArray()[t].id()==e.id()&&y().vendorItemsArray()[t].vendor().name()==e.vendor().name())return y().vendorItemsArray.splice(t,1),void 0}function d(){h(!0);var e=n.activeInstruction(),t=void 0,r=void 0;e.params.length>0&&(t=e.params[0]),r=3;var a="product/"+t+"/"+r;o.show(null,{returnTo:a,event:"nav:invManage:return",returnViewModel:"viewmodels/inventory/inventoryManage"})}function p(e,t){y(new l(e,t))}function m(e){y(new l(e.activeVendors(),e.vendorItems()))}function f(e){T(""),h(!1),y(new l(e,[]))}function v(){return{vendorPlaceholder:e.T("inventory/inventory-manage-tabs/vendors.search_vendors"),itemId:"vendorId",createNewArrItem:function(e){var t=a.getVendorById();return a.createNew({vendorId:e,vendorObject:t})},filter:!0,selectAll:!1,placeholder:e.T("inventory/inventory-manage-tabs/vendors.search_or_select_vendors")}}function g(){}var b,y=e.observable(),h=e.observable(!1),T=e.observable();return{activate:g,attached:s,showNewVendor:d,model:y,fill:m,fillWithLists:p,reset:f,deleteSelected:c,isNavigatingToNewVendor:h,validationMessage:T,setupMultiSelect:v}});
define('viewmodels/inventory/inventoryManage',["jquery","knockout","durandal/app","data/config","data/common","plugins/router","repositories/itemsRepository","repositories/itemSellingPricesRepository","repositories/vendorItemsRepository","repositories/modifiersRepository","repositories/presentationApi/modifiersRepository","viewmodels/inventory/inventory-manage-tabs/general","viewmodels/inventory/inventory-manage-tabs/pricing","viewmodels/inventory/inventory-manage-tabs/ordering","viewmodels/inventory/inventory-manage-tabs/serials","viewmodels/inventory/inventory-manage-tabs/modifiers/modifiers","viewmodels/inventory/inventory-manage-tabs/vendors","viewmodels/inventory/inventory-manage-tabs/taxes","viewmodels/inventory/inventory-manage-tabs/quickbooks","viewmodels/inventory/inventory-manage-tabs/variants","plugins/history","repositories/presentationApi/productsRepository","viewmodels/controls/storesFilter","models/inventoryType"],function(e,t,n,r,a,i,o,s,u,l,c,d,p,m,f,v,g,b,y,h,T,I,x,S){function E(e){if(H(!0),"Vendor"==e.itemType){var n,a;if(e.itemId){var o=u.reloadVendors();a=[],R&&(a=R.vendorItems());var s=o.filter(function(n){return t.unwrap(n.id)===e.itemId&&t.unwrap(n.isActive)});s.length>0&&(n=u.createNew(),n.vendorId(e.itemId),a.push(n),g.fillWithLists(o,a))}}else if("Modifier"===e.itemType){if(e.items)e.items.forEach(function(e){v.model().addTemplate(e);var t=e.findNameByLang(r.language)||e.findNameByLang(r.defaultLanguage);e.name(t.name()),v.model().allTemplates.push(e)});else if(e.itemId){var c=l.loadById(e.itemId);null!=c&&v.model().addTemplate(c)}e.returnTo&&i.navigate(e.returnTo)}}function A(){a.showRightPanelContent(z),e(J).show()}function w(n,i){tt(r.variantApp),nt(r.isQuickbooksApp);var o=window.localStorage.getItem("prodType");o||(o=0),e(W).show(),B=i,H()||(N(),R=null,n&&"null"!==n?(Q(n),I.loadByIdAsync(n).then(function(e){e&&(R=e,q=ProductTypes.Variant,u.setVendors(R.vendors()),k(R,q),R.productType()==ProductTypes.Variant&&h.fill(R),d.fill(R),p.fill(R),v.fill(R),g.fill(R),m.fill(R),f.fill(R),b.fill(R),b.stores(t.unwrap(p.stores).slice(0)),y.fill(R)),A(),d.setUpColor(),d.setUpSlim()},function(){a.showError("An error occurred","#inventoryManageErrorSummary"),A()}),G(t.T("inventory/inventoryManage.edit_inventory_item"))):($=null,I.createNewAsync().then(function(n){n&&(R=n,q=1,R.productType(o),k(R,q),R.productType()==ProductTypes.Variant&&h.create(R),d.create(R),p.create(R),m.create(R),g.fill(R),v.fill(R),f.fill(R),b.fill(R),b.stores(t.unwrap(p.stores).slice(0)),y.fill(R)),a.showRightPanelContent(z),e(J).show(),d.setUpColor(),d.setUpSlim()},function(){a.showError("An error occurred","#inventoryManageErrorSummary"),A(),d.setUpColor(),d.setUpSlim()}),G(t.T("inventory/inventoryManage.new_inventory_item")))),g.isNavigatingToNewVendor(!1)}function k(e,t){e.productType()!=t?U.hideTab("#variantTab"):(U.hideTab("#pricingTab"),U.hideTab("#modifiersTab"),U.hideTab("#orderingTab"))}function M(){R||(a.showLoader(z),e(J).hide()),C(),H()&&(k(R,q),H(!1)),null!=B&&_(B)}function F(){v.isNavigatingToNewModifierTemplates()||g.isNavigatingToNewVendor()||e(W).hide()}function P(e){e?i.navigate("product/"+e):i.navigate("product")}function C(){var n=[{name:t.T("inventory/inventoryManage.general"),containerSelector:"#generalTab"},{name:t.T("inventory/inventoryManage.pricing"),containerSelector:"#pricingTab"},{name:t.T("inventory/inventoryManage.modifiers"),containerSelector:"#modifiersTab"},{name:t.T("inventory/inventoryManage.vendors"),containerSelector:"#vendorsTab"},{name:t.T("inventory/inventoryManage.ordering"),containerSelector:"#orderingTab"},{name:t.T("inventory/inventoryManage.serials"),containerSelector:"#serialsTab"},{name:t.T("inventory/inventoryManage.taxes"),containerSelector:"#taxesTab"}];r.variantApp&&n.push({name:t.T("inventory/inventoryManage.variants"),containerSelector:"#variantTab"}),r.isQuickbooksApp&&n.push({name:t.T("quickbooks.quickbooks"),containerSelector:"#quickbooksTab"}),U=e(".inventory-tabs").tabControl({goToTabHandler:O,tabs:n})}function O(e){Z((1===e||4===e||5===e)&&X.storesArr().length>1)}function _(e){null!=U&&U.goToTab(e)}function j(){var n=!0,r=p.model().buItemsErrors(),a=d.model().generateImage();if(d.model().errors().length>0?(U.setTabErrors(0),d.model().errors.showAllMessages(),n=!1):(d.saveColor(),U.clearTabErrors(0)),p.model().isFixedPrice()||p.model().unitPrice(0),0!=p.model().errors().length)U.setTabErrors(1),p.model().errors.showAllMessages(),n=!1;else if(0!=r.length){var i=!1;r.forEach(function(e){i=/price/i.test(e)}),i?(U.setTabErrors(1),n=!1):U.clearTabErrors(1)}else U.clearTabErrors(1);var o=v.model().getInvalidModifiers();if(0!=o.length?(U.setTabErrors(2),o.forEach(function(e){e.errors.showAllMessages()}),n=!1):U.clearTabErrors(2),R.productType()==ProductTypes.Variant){var s=h.model().getInvalidModifiers(),u=h.model().getInvalidVarinats();0!=u.length||0!=s.length?(U.setTabErrors(7),u.forEach(function(e){e.errors.showAllMessages()}),s.forEach(function(e){e.errors.showAllMessages()}),n=!1):0==h.model().allModifiers().length?(n=!1,U.setTabErrors(7),h.validationMessage(t.T("inventory/inventoryManage.empty_variant"))):(h.validationMessage(""),U.clearTabErrors(7))}if(g.validationMessage(""),0!=g.model().errors().length?(U.setTabErrors(3),g.model().errors.showAllMessages(),n=!1):U.clearTabErrors(3),0!=m.model().errors().length)U.setTabErrors(4),m.model().errors.showAllMessages(),n=!1;else if(r.length>0){var l=!1;r.forEach(function(e){l=/quantity/i.test(e)}),l?(U.setTabErrors(4),n=!1):U.clearTabErrors(4)}else U.clearTabErrors(4);return y.validationMessage(""),0!=y.model().errors().length?(U.setTabErrors(5),y.model().errors.showAllMessages(),n=!1):U.clearTabErrors(5),n?(a.then(function(){var n=D();et(!0),I.saveAsync(n).then(L,function(n){if(et(!1),n.responseText&&"text://"===n.responseText.substr(0,7)){var r=t.T(n.responseText);n.responseText.indexOf("another_product_has_save_sku_x_")>=0?(U.setTabErrors(3),g.validationMessage(r)):n.responseText.indexOf("variant")>=0||n.responseText.indexOf("varinat")>=0?(U.setTabErrors(7),h.validationMessage(r)):n.responseText.indexOf("serials")>=0?(U.setTabErrors(5),f.validationMessage(r)):n.responseText.indexOf("modifiers")>=0?(U.setTabErrors(2),v.validationMessage(r)):(U.setTabErrors(0),d.error(r))}else{switch(n.responseText){case"notUniqueVendorItemSku":g.validationMessage(t.T("inventory/inventoryManage.warning_another_product_has_the_same_sku_with_this_vendor")),U.setTabErrors(3);break;case"pictureMaxSizeExceeded":d.error(t.T("inventory/inventoryManage.warning_product_picture_max_size_is_exceeded")),U.setTabErrors(0);break;default:K(t.T("inventory/inventoryManage.unexpected_error_occured_please_try_again_later"))}e(document).scrollTop(0)}})},function(){}),void 0):(K().length>0&&e(document).scrollTop(0),void 0)}function L(){et(!1),i.navigate("items")}function N(){d.reset(),p.reset(),v.reset(),m.reset(),f.reset(),K(""),g.reset([]),y.reset(),H(!1)}function D(){var e=I.createNewProduct(),t=[];if(e.enterpriseId(r.enterpriseId),e.itemId(d.model().id()),e.inventoryType(d.model().inventoryType()),e.names=window.Enumerable.From(d.model().names()).Where(function(e){return e.name().length>0}).Select(function(e){return e.toFlatModel()}).ToArray(),e.lobId(d.model().departmentId()),e.categoryId(d.model().categoryId()),e.upc(d.model().upc()),e.isActive(d.model().isActive()),e.productImage(d.model().picture()),e.color(d.model().color()),e.itemSellingPriceId(p.model().priceId()),e.isManualPrice(!p.model().isFixedPrice()),e.unitOfMeasureId(p.model().unitId()),e.salesPrice(p.model().unitPrice()),e.isTaxable(b.model().isTaxable()),e.isDiscountable(p.model().isDiscountable()),e.buItems(p.model().buItems()),t=window.Enumerable.From(v.model().allModifiers()).Select(function(e){return c.createFromServerEntity(e.toPlainObject())}).ToArray(),R.productType()==ProductTypes.Variant&&r.variantApp&&R.productType()==ProductTypes.Variant&&(t=window.Enumerable.From(h.model().allModifiers()).Select(function(e){return c.createFromServerEntity(e.toPlainObject())}).ToArray()),e.itemModifiers(t),e.productType(R.productType()),e.productType()==ProductTypes.Variant&&(e.variants(h.model().product.variants()),e.isDiscountable(h.model().isDiscountable()),e.buItems&&e.buItems()))for(var n=0;n<e.buItems().length;n++)e.buItems()[n].isDiscountable(e.isDiscountable());return e.vendorItems(g.model().vendorItemsArray()),e.itemInventoryId(m.model().id()),e.quantity(m.model().onHandQuantity()),e.minQuantity(m.model().minimumQuantity()),e.recommendedQuantity(m.model().recommendedQuantity()),e.inventoryType()===S.serialized&&f.write(e),y.fillModel(e),e}function V(){return{cacheViews:!1,applyBindings:!0}}var U,$,R,q,B,G=t.observable(t.T("inventory/inventoryManage.new_inventory_item")),z="#inventoryManage",J="#inventoryManage2",W=".inventory-item-form",Q=t.observable(),K=t.observable(""),H=t.observable(!1),Y=p.stores,X=p.storesFilter,Z=t.observable(!1),et=t.observable(!1);X.initialize(),d.inventoryType.subscribe(function(e){e===S.serialized&&p.model()&&"function"==typeof p.model().unitId&&"_item"!==p.model().unitId()&&p.model().unitId("_item"),p.unitOfMeasureEditable(e!==S.serialized)});var tt=t.observable(r.variantApp),nt=t.observable(r.isQuickbooksApp);return n.on("nav:invManage:return").then(E),ProductTypes={Regular:0,Variant:1},{show:P,title:G,activate:w,attached:M,deactivate:F,save:j,goToTab:_,modifiersTab:v,errorSummary:K,itemId:Q,isNavigatingBack:H,stores:Y,storesFilter:X,storesFilterVisible:Z,binding:V,inventoryType:d.inventoryType,showVariant:tt,showQuickbooks:nt,loading:et}});
define('viewmodels/inventory/inventoryList',["jquery","knockout","plugins/router","repositories/itemsRepository","data/common","viewmodels/inventory/inventoryManage","repositories/presentationApi/productsRepository","data/config","common/numericUtils","repositories/categoriesRepository","repositories/departmentsRepository","services/text","services/dataTableText","plugins/dialog","common/utils"],function(e,t,n,r,a,i,o,s,u,l,c,d,p,m,f){function v(t){a.showLoader(O),A(t),this.productFilter.initialize(),e(".button-dropdown",t).buttonDropDown()}function g(){function n(){return c.loadAllAsync().then(function(e){r.departments(window.Enumerable.From(e).Where(function(e){return e.isActive()}).ToArray())})}this.departmentId=t.observable(),this.departments=t.observableArray(),this.categoryId=t.observable(),this.categories=t.observableArray(),this.inventoryTypes=[{id:"0",name:t.T("inventory/inventoryList.inventory")},{id:"2",name:t.T("inventory/inventoryList.nonInventory")},{id:"1",name:t.T("inventory/inventoryList.serialized")},{id:"3",name:t.T("inventory/inventoryList.matrix")}],this.inventorySelected=t.observableArray(this.inventoryTypes.slice(0)).extend({rateLimit:1e3}),this.inventorySelected.subscribe(F),this.apply=function(){this.callback&&this.callback()},this.inventoryTypeFilterOptions={filter:!1,selectAll:!1,placeholder:t.T("inventory/inventoryList.inventoryType"),selectedItemsArr:this.inventorySelected,itemId:"id",createNewArrItem:function(e){return r.inventoryTypes.filter(function(t){return t.id===e})[0]}};var r=this;this.loadCategories=function(){return l.loadAllAsync().then(function(e){r.categories(window.Enumerable.From(e).Where(function(e){return e.isActive()&&(e.lobId()==r.departmentId()||""==r.departmentId())}).ToArray())})},this.initialize=function(){return e.when(n(),r.loadCategories())}}function b(e){var n=this;n.product=e,n.rowNum=t.observable(),n.selected=t.observable(!1),n.selectItem=function(e,t){t.stopPropagation(),e.selected(!e.selected()),y()}}function y(){L(h().length>0)}function h(){if(table){for(var e=table.data().length,t=[],n=0;e>n;n++){var r=table.data()[n];r.selected()&&t.push(r.product.id)}return t}return[]}function T(e){if(table)for(var t=table.data().length,n=0;t>n;n++){var r=table.data()[n];if(r.product.id==e)return r.product.name}return""}function I(e){a.showError(e.join("<br />"),"#messages",5e3)}function x(){F()}function S(){var e=h();e.length>0&&a.showConfirmation(void 0,t.T("inventory/inventoryList.are_you_sure_you_want_to_delete_selected_products"),function(){T(e[0]),o.removeMany(e).then(function(e){if(e.errors){var n=[];e.errors.forEach(function(e){var r=e.data;n.push(t.T("inventory/inventoryList.deleting_product_error",null,T(r)))}),n.length>0&&I(n)}x()})})}function E(n){var r="",a="",i="0|1|2|3";return t.computed(function(){a=productFilter.categoryId(),r=productFilter.departmentId(),i=productFilter.inventorySelected().map(function(e){return e.id}).join("|")}).dispose(),0!==pageNo&&0===n.start&&(n.start=n.length*pageNo),e.extend({},n,{categoryId:a,departmentId:r,inventoryTypes:i})}function A(n){var r={active:d.getString("inventory/inventoryList.active"),inactive:d.getString("inventory/inventoryList.inactive")};s.getEnterpriseId().then(function(i){table=e("#inventoryTable",n).DataTable({processing:!0,serverSide:!0,rowId:"product.id",ajax:function(t,n){e.post(o.getAllProductsUrl,{id:i,lang:d.getLang().toUpperCase(),defaultLang:d.getDefaultLang().toUpperCase(),pagingRequest:E(t)}).then(function(e){e.data=window.Enumerable.From(e.data).Select(function(e){return new b(e)}).ToArray(),n(e)})},info:!1,paging:!0,lengthChange:!1,autoWidth:!1,language:p.getLanguage(),columns:[{bSortable:!1,bSearchable:!1,data:null,render:function(){return'<div class="checkbox"><input type="checkbox" data-bind="checked: selected, attr: {id: product.id }"><label data-bind="attr: {for: product.id }, click: selectItem" ></label></div>'}},{data:"product.productCode",sWidth:"60px"},{data:"product.name",sClass:"force-wrap",sWidth:"140px"},{data:"product.category",sWidth:"105px"},{data:"product.department",sWidth:"130px"},{data:"product.cost",render:function(e){return null==e||""==e?"":u.formatCurrency(e)},sClass:"numeric-data",sWidth:"75px",bSearchable:!1,sType:"natural"},{data:"product.price",render:function(e){return null==e?t.T("inventory/inventoryList.manual"):u.formatCurrency(e)},sClass:"numeric-data",sWidth:"95px",bSearchable:!1,sType:"natural"},{data:"product.margin",render:function(e){return null!=e?e.toFixed(2)+"%":""},sClass:"numeric-data",sWidth:"90px",bSearchable:!1,sType:"natural"},{data:"product",render:function(e){return e.inventoryType===N.NonInventory?t.T("common.NA"):e?e.quantity:""},sClass:"numeric-data",sWidth:"80px",bSearchable:!1},{data:"product",render:function(e){return e.inventoryType===N.NonInventory?t.T("common.NA"):e?u.formatCurrency(e.inventoryValue):""},sClass:"numeric-data",sWidth:"95px",bSearchable:!1},{sClass:"center",data:"product.status",render:function(e){return r[e]},sWidth:"70px"},{data:"product.upc",bVisible:!1,bSearchable:!0}],order:sortOrder,initComplete:function(){a.showRightPanelContent(O)},createdRow:function(n,r,a){r.rowNum(a);var i=e(n);return i.addClass("editable"),i.attr("data-bind","click: edit"),t.applyBindings(r,i[0]),i[0]}}),table.resetPage=function(){pageNo=0},new e.fn.DataTable.SearchFilter(table),table.on("init",function(e,t){t.oApi._fnPageChange(t,pageNo,!0)}),table.on("page",function(){pageNo=table.page.info().page,selectAll(!1)}),table.on("order",function(e,t){sortOrder[0][0]=table.order()[0][0],sortOrder[0][1]=table.order()[0][1],t.oApi._fnPageChange(t,pageNo,!0)})})}function w(){i.show()}function k(){productFilter.loadCategories(),productFilter.categoryId(null),F()}function F(){pageNo=0,selectAll(!1),table.ajax.reload(function(){a.showRightPanelContent(O)})}function M(){selectAll(!1)}function P(){var n="",r="",a="0|1|2|3",i=j,o=e(".datatable-search").val(),s=d.getLang().toUpperCase();t.computed(function(){r=productFilter.categoryId(),n=productFilter.departmentId(),a=productFilter.inventorySelected().map(function(e){return e.id}).join("|")}).dispose(),i+="?inventoryTypes="+a+"&categoryId="+r+"&departmentId="+n+"&lang="+s+"&search="+o;var u=window.open(i,"_blank");u.focus()}function C(){if(window.localStorage.setItem("prodType",0),s.variantApp){var t={"margin-left":(e(window).width()-400)/2+"px","margin-top":(e(window).height()-205)/2+"px",width:"750px"};dialogModel=new _({style:t}),dialogModel.autoclose=!0,m.show(dialogModel)}else n.navigate("product",!0)}var O="div.pane-right > div.inventory",j="api/Products/ExportProductList";pageNo=0,productFilter=new g,table=null,selectAll=t.observable(),sortOrder=[[2,"asc"]];var L=t.observable(!1),_=function(e){this.options=e,this.autoclose=!0,this.selectSimple=function(){var e=this;m.close(e),window.localStorage.setItem("prodType",0),n.navigate("product",!0)},this.selectVariant=function(){var e=this;m.close(e),window.localStorage.setItem("prodType",1),n.navigate("product",!0)},this.closeDialog=function(){m.close(this)},this.viewUrl="views/dialogs/variantDialog.html",_.superclass.constructor.apply(this,arguments)};f.extend(_,m.MessageBox),_.prototype.getView=void 0,b.prototype.edit=function(e){i.show(e.product.id)},selectAll.subscribe(function(e){if(table&&table.data()){for(var t=table.data().length,n=[],r=0;t>r;r++){var a=table.data()[r];a.selected(e)}return y(),n}});var N={Standard:0,Serialized:1,NonInventory:2};return{activate:M,attached:v,router:n,showNewInventoryItem:w,productFilter:productFilter,applyFilters:F,depChanged:k,selectAll:selectAll,deleteSelected:S,hasSelected:L,config:s,navToProduct:C,exportProducts:P}});
var DragDropTouch;
(function (DragDropTouch_1) {
    
    /**
     * Object used to hold the data that is being dragged during drag and drop operations.
     *
     * It may hold one or more data items of different types. For more information about
     * drag and drop operations and data transfer objects, see
     * <a href="https://developer.mozilla.org/en-US/docs/Web/API/DataTransfer">HTML Drag and Drop API</a>.
     *
     * This object is created automatically by the @see:DragDropTouch singleton and is
     * accessible through the @see:dataTransfer property of all drag events.
     */
    var DataTransfer = (function () {
        function DataTransfer() {
            this._dropEffect = 'move';
            this._effectAllowed = 'all';
            this._data = {};
        }
        Object.defineProperty(DataTransfer.prototype, "dropEffect", {
            /**
             * Gets or sets the type of drag-and-drop operation currently selected.
             * The value must be 'none',  'copy',  'link', or 'move'.
             */
            get: function () {
                return this._dropEffect;
            },
            set: function (value) {
                this._dropEffect = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(DataTransfer.prototype, "effectAllowed", {
            /**
             * Gets or sets the types of operations that are possible.
             * Must be one of 'none', 'copy', 'copyLink', 'copyMove', 'link',
             * 'linkMove', 'move', 'all' or 'uninitialized'.
             */
            get: function () {
                return this._effectAllowed;
            },
            set: function (value) {
                this._effectAllowed = value;
            },
            enumerable: true,
            configurable: true
        });
        Object.defineProperty(DataTransfer.prototype, "types", {
            /**
             * Gets an array of strings giving the formats that were set in the @see:dragstart event.
             */
            get: function () {
                return Object.keys(this._data);
            },
            enumerable: true,
            configurable: true
        });
        /**
         * Removes the data associated with a given type.
         *
         * The type argument is optional. If the type is empty or not specified, the data
         * associated with all types is removed. If data for the specified type does not exist,
         * or the data transfer contains no data, this method will have no effect.
         *
         * @param type Type of data to remove.
         */
        DataTransfer.prototype.clearData = function (type) {
            if (type != null) {
                delete this._data[type];
            }
            else {
                this._data = null;
            }
        };
        /**
         * Retrieves the data for a given type, or an empty string if data for that type does
         * not exist or the data transfer contains no data.
         *
         * @param type Type of data to retrieve.
         */
        DataTransfer.prototype.getData = function (type) {
            return this._data[type] || '';
        };
        /**
         * Set the data for a given type.
         *
         * For a list of recommended drag types, please see
         * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Recommended_Drag_Types.
         *
         * @param type Type of data to add.
         * @param value Data to add.
         */
        DataTransfer.prototype.setData = function (type, value) {
            this._data[type] = value;
        };
        /**
         * Set the image to be used for dragging if a custom one is desired.
         *
         * @param img An image element to use as the drag feedback image.
         * @param offsetX The horizontal offset within the image.
         * @param offsetY The vertical offset within the image.
         */
        DataTransfer.prototype.setDragImage = function (img, offsetX, offsetY) {
            var ddt = DragDropTouch._instance;
            ddt._imgCustom = img;
            ddt._imgOffset = { x: offsetX, y: offsetY };
        };
        return DataTransfer;
    }());
    DragDropTouch_1.DataTransfer = DataTransfer;
    /**
     * Defines a class that adds support for touch-based HTML5 drag/drop operations.
     *
     * The @see:DragDropTouch class listens to touch events and raises the
     * appropriate HTML5 drag/drop events as if the events had been caused
     * by mouse actions.
     *
     * The purpose of this class is to enable using existing, standard HTML5
     * drag/drop code on mobile devices running IOS or Android.
     *
     * To use, include the DragDropTouch.js file on the page. The class will
     * automatically start monitoring touch events and will raise the HTML5
     * drag drop events (dragstart, dragenter, dragleave, drop, dragend) which
     * should be handled by the application.
     *
     * For details and examples on HTML drag and drop, see
     * https://developer.mozilla.org/en-US/docs/Web/Guide/HTML/Drag_operations.
     */
    var DragDropTouch = (function () {
        /**
         * Initializes the single instance of the @see:DragDropTouch class.
         */
        function DragDropTouch() {
            this._lastClick = 0;
            // enforce singleton pattern
            if (DragDropTouch._instance) {
                throw 'DragDropTouch instance already created.';
            }
            // listen to touch events
            if ('ontouchstart' in document) {
                var d = document, ts = this._touchstart.bind(this), tm = this._touchmove.bind(this), te = this._touchend.bind(this);
                d.addEventListener('touchstart', ts);
                d.addEventListener('touchmove', tm);
                d.addEventListener('touchend', te);
                d.addEventListener('touchcancel', te);
            }
        }
        /**
         * Gets a reference to the @see:DragDropTouch singleton.
         */
        DragDropTouch.getInstance = function () {
            return DragDropTouch._instance;
        };
        // ** event handlers
        DragDropTouch.prototype._touchstart = function (e) {
            var _this = this;
            if (this._shouldHandle(e)) {
                // raise double-click and prevent zooming
                if (Date.now() - this._lastClick < DragDropTouch._DBLCLICK) {
                    if (this._dispatchEvent(e, 'dblclick', e.target)) {
                        e.preventDefault();
                        this._reset();
                        return;
                    }
                }
                // clear all variables
                this._reset();
                // get nearest draggable element
                var src = this._closestDraggable(e.target);
                if (src) {
                    // give caller a chance to handle the hover/move events
                    if (!this._dispatchEvent(e, 'mousemove', e.target) &&
                        !this._dispatchEvent(e, 'mousedown', e.target)) {
                        // get ready to start dragging
                        this._dragSource = src;
                        this._ptDown = this._getPoint(e);
                        this._lastTouch = e;
                        e.preventDefault();
                        // show context menu if the user hasn't started dragging after a while
                        setTimeout(function () {
                            if (_this._dragSource == src && _this._img == null) {
                                if (_this._dispatchEvent(e, 'contextmenu', src)) {
                                    _this._reset();
                                }
                            }
                        }, DragDropTouch._CTXMENU);
                    }
                }
            }
        };
        DragDropTouch.prototype._touchmove = function (e) {
            if (this._shouldHandle(e)) {
                // see if target wants to handle move
                var target = this._getTarget(e);
                if (this._dispatchEvent(e, 'mousemove', target)) {
                    this._lastTouch = e;
                    e.preventDefault();
                    return;
                }
                // start dragging
                if (this._dragSource && !this._img) {
                    var delta = this._getDelta(e);
                    if (delta > DragDropTouch._THRESHOLD) {
                        this._dispatchEvent(e, 'dragstart', this._dragSource);
                        this._createImage(e);
                        this._dispatchEvent(e, 'dragenter', target);
                    }
                }
                // continue dragging
                if (this._img) {
                    this._lastTouch = e;
                    e.preventDefault(); // prevent scrolling
                    if (target != this._lastTarget) {
                        this._dispatchEvent(this._lastTouch, 'dragleave', this._lastTarget);
                        this._dispatchEvent(e, 'dragenter', target);
                        this._lastTarget = target;
                    }
                    this._moveImage(e);
                    this._dispatchEvent(e, 'dragover', target);
                }
            }
        };
        DragDropTouch.prototype._touchend = function (e) {
            if (this._shouldHandle(e)) {
                // see if target wants to handle up
                if (this._dispatchEvent(this._lastTouch, 'mouseup', e.target)) {
                    e.preventDefault();
                    return;
                }
                // user clicked the element but didn't drag, so clear the source and simulate a click
                if (!this._img) {
                    this._dragSource = null;
                    this._dispatchEvent(this._lastTouch, 'click', e.target);
                    this._lastClick = Date.now();
                }
                // finish dragging
                this._destroyImage();
                if (this._dragSource) {
                    if (e.type.indexOf('cancel') < 0) {
                        this._dispatchEvent(this._lastTouch, 'drop', this._lastTarget);
                    }
                    this._dispatchEvent(this._lastTouch, 'dragend', this._dragSource);
                    this._reset();
                }
            }
        };
        // ** utilities
        // ignore events that have been handled or that involve more than one touch
        DragDropTouch.prototype._shouldHandle = function (e) {
            return e &&
                !e.defaultPrevented &&
                e.touches && e.touches.length < 2;
        };
        // clear all members
        DragDropTouch.prototype._reset = function () {
            this._destroyImage();
            this._dragSource = null;
            this._lastTouch = null;
            this._lastTarget = null;
            this._ptDown = null;
            this._dataTransfer = new DataTransfer();
        };
        // get point for a touch event
        DragDropTouch.prototype._getPoint = function (e, page) {
            if (e && e.touches) {
                e = e.touches[0];
            }
            return { x: page ? e.pageX : e.clientX, y: page ? e.pageY : e.clientY };
        };
        // get distance between the current touch event and the first one
        DragDropTouch.prototype._getDelta = function (e) {
            var p = this._getPoint(e);
            return Math.abs(p.x - this._ptDown.x) + Math.abs(p.y - this._ptDown.y);
        };
        // get the element at a given touch event
        DragDropTouch.prototype._getTarget = function (e) {
            var pt = this._getPoint(e), el = document.elementFromPoint(pt.x, pt.y);
            while (el && getComputedStyle(el).pointerEvents == 'none') {
                el = el.parentElement;
            }
            return el;
        };
        // create drag image from source element
        DragDropTouch.prototype._createImage = function (e) {
            // just in case...
            if (this._img) {
                this._destroyImage();
            }
            // create drag image from custom element or drag source
            var src = this._imgCustom || this._dragSource;
            this._img = src.cloneNode(true);
            this._copyStyle(src, this._img);
            this._img.style.top = this._img.style.left = '-9999px';
            // if creating from drag source, apply offset and opacity
            if (!this._imgCustom) {
                var rc = src.getBoundingClientRect(), pt = this._getPoint(e);
                this._imgOffset = { x: pt.x - rc.left, y: pt.y - rc.top };
                this._img.style.opacity = DragDropTouch._OPACITY.toString();
            }
            // add image to document
            this._moveImage(e);
            document.body.appendChild(this._img);
        };
        // dispose of drag image element
        DragDropTouch.prototype._destroyImage = function () {
            if (this._img && this._img.parentElement) {
                this._img.parentElement.removeChild(this._img);
            }
            this._img = null;
            this._imgCustom = null;
        };
        // move the drag image element
        DragDropTouch.prototype._moveImage = function (e) {
            var _this = this;
            if (this._img) {
                requestAnimationFrame(function () {
                    var pt = _this._getPoint(e, true), s = _this._img.style;
                    s.position = 'absolute';
                    s.pointerEvents = 'none';
                    s.zIndex = '999999';
                    s.left = Math.round(pt.x - _this._imgOffset.x) + 'px';
                    s.top = Math.round(pt.y - _this._imgOffset.y) + 'px';
                });
            }
        };
        // copy properties from an object to another
        DragDropTouch.prototype._copyProps = function (dst, src, props) {
            for (var i = 0; i < props.length; i++) {
                var p = props[i];
                dst[p] = src[p];
            }
        };
        DragDropTouch.prototype._copyStyle = function (src, dst) {
            // remove potentially troublesome attributes
            DragDropTouch._rmvAtts.forEach(function (att) {
                dst.removeAttribute(att);
            });
            // copy canvas content
            if (src instanceof HTMLCanvasElement) {
                var cSrc = src, cDst = dst;
                cDst.width = cSrc.width;
                cDst.height = cSrc.height;
                cDst.getContext('2d').drawImage(cSrc, 0, 0);
            }
            // copy style
            var cs = getComputedStyle(src);
            for (var i = 0; i < cs.length; i++) {
                var key = cs[i];
                dst.style[key] = cs[key];
            }
            dst.style.pointerEvents = 'none';
            // and repeat for all children
            for (var i = 0; i < src.children.length; i++) {
                this._copyStyle(src.children[i], dst.children[i]);
            }
        };
        DragDropTouch.prototype._dispatchEvent = function (e, type, target) {
            if (e && target) {
                var evt = document.createEvent('Event'), t = e.touches ? e.touches[0] : e;
                evt.initEvent(type, true, true);
                evt.button = 0;
                evt.which = evt.buttons = 1;
                this._copyProps(evt, e, DragDropTouch._kbdProps);
                this._copyProps(evt, t, DragDropTouch._ptProps);
                evt.dataTransfer = this._dataTransfer;
                target.dispatchEvent(evt);
                return evt.defaultPrevented;
            }
            return false;
        };
        // gets an element's closest draggable ancestor
        DragDropTouch.prototype._closestDraggable = function (e) {
            for (; e; e = e.parentElement) {
                if (e.hasAttribute('draggable') && e.draggable) {
                    return e;
                }
            }
            return null;
        };
        /*private*/ DragDropTouch._instance = new DragDropTouch(); // singleton
        // constants
        DragDropTouch._THRESHOLD = 5; // pixels to move before drag starts
        DragDropTouch._OPACITY = 0.5; // drag image opacity
        DragDropTouch._DBLCLICK = 500; // max ms between clicks in a double click
        DragDropTouch._CTXMENU = 900; // ms to hold before raising 'contextmenu' event
        // copy styles/attributes from drag source to drag image element
        DragDropTouch._rmvAtts = 'id,class,style,draggable'.split(',');
        // synthesize and dispatch an event
        // returns true if the event has been handled (e.preventDefault == true)
        DragDropTouch._kbdProps = 'altKey,ctrlKey,metaKey,shiftKey'.split(',');
        DragDropTouch._ptProps = 'pageX,pageY,clientX,clientY,screenX,screenY'.split(',');
        return DragDropTouch;
    }());
    DragDropTouch_1.DragDropTouch = DragDropTouch;
})(DragDropTouch || (DragDropTouch = {}));
//# sourceMappingURL=DragDropTouchNoWijmo.js.map;
define("DragDropTouch", function(){});

define('viewmodels/inventory/menuBuilder',["knockout","jquery","plugins/router","repositories/itemsRepository","repositories/categoriesRepository","repositories/presentationApi/productsRepository","data/config","data/common","DragDropTouch"],function(e,t,n,r,a,i,o,s){function u(e){return-1!==_().indexOf(e)}function l(t,n){function r(t,n){var r=this;r.number=e.observable(t),r.parent=e.observable(n),r.parent=n,r.activate=function(){r.parent.turnPage(r.number())},r.isActive=function(){return r.parent.current()==r.number()}}function a(e){var t=[];if(1>=e)return t;for(var n=1;e>=n;n++)t.push(new r(n-1,i));return t}var i=this;i.size=e.observable(Math.ceil(t)),i.height=n,i.current=e.observable(0),i.pages=e.observableArray(a(t)),i.pages().length>0&&i.pages()[0].activate(),i.displacement=e.computed(function(){return-i.current()*i.height+"px"},this),i.hasNext=function(){return i.current()+1<i.pages().length},i.clickNext=function(){i.hasNext&&i.turnPage(i.current()+1)},i.hasPrev=function(){return i.current()>0},i.clickPrev=function(){i.hasPrev&&i.turnPage(i.current()-1)},i.resize=function(e){var t=Math.ceil(e);t!==i.pages().length&&i.pages(a(t))},i.turnPage=function(e){i.current(e)}}function c(e,t){if(!k){var n=t.target;k=setTimeout(function(){k=void 0,n.click()},700)}}function d(){k&&(clearTimeout(k),k=void 0)}function p(){$.resize((_().length+1)/12)}function m(e){return!!e.categoryId}function f(e){return!(!e.id||!e.name||e.categoryId)}function v(){var e=0;_().forEach(function(t){t.sortOrder=++e})}function g(e){return q(e),t(event.target).addClass("source"),L(e.sortOrder&&m(e)&&t(event.target).parent().hasClass("wrapper")),!0}function b(e,t){var n=!1;return e===t?n:n=!(m(e)&&f(t)||f(e)&&m(t)||f(e)&&t.__moduleId__)}function y(e,n){return b(q(),e)?(t(n.target).closest(".item, .remove-basket").addClass("validtarget"),!1):!0}function h(e,n){var r=t(n.target);return r.closest(".wrapper, .pane-left").children(".validtarget").removeClass("validtarget"),!1}function T(e,n){if(L(!1),b(e,q())){var r=_.indexOf(e);t(n.currentTarget).closest(".wrapper").children(".validtarget").removeClass("validtarget"),_.remove(q()),-1===r?_.push(q()):_.splice(r,0,q()),v(),p()}}function I(e,n){if(b(e,q())){var r=F.indexOf(e);t(n.currentTarget).removeClass("validtarget"),F.remove(q()),F.splice(r,0,q())}}function x(e,n){t(n.target).removeClass("source"),L(!1)}function S(){M(!0),V(o.productSortOrder||0),t.when(a.loadListForMenuBuilder(),i.loadListForMenuBuilder()).then(function(e,t){var n=e[0]||[],r=t[0]||[];n.forEach(function(e){e.products=r.filter(function(t){return t.categoryId===e.id}),e.products.forEach(function(t){t.color?t.color="rgba("+t.color+", 0.2)":e.color&&(t.color="rgba("+e.color+", 0.2)")}),e.color&&(e.color="rgb("+e.color+")")});for(var a=n.length-1;a>=0;--a)0===n[a].products.length&&n.splice(a,1);F(n),F().length>0&&(activateCategory.call(F()[0]),R.resize(F().length/8),R.pages().length>0&&R.pages()[0].activate()),M(!1)},function(){M(!1)})}function E(e,n){q().categoryId&&(q().sortOrder=null,_.remove(q()),v(),p()),L(!1),t(n.currentTarget).removeClass("validtarget")}function A(){var t=0,n=F().map(function(e){return{id:e.id,sortOrder:++t}}),r=F().map(function(e){return e.products.filter(function(e){return e.sortOrder}).map(function(e){return{id:e.id,sortOrder:e.sortOrder}})}).reduce(function(e,t){return e.concat(t)}),a={categorySort:n,productSort:r,productSortOrder:V()};M(!0),i.saveMenuBuilder(a).then(function(){o.productSortOrder=V(),M(!1)},function(){M(!1),s.showError(e.local("storeTransfer.unexpectedError"),"#menuBuilderMessage",5e3)})}function w(){n.navigateBack()}var k,M=e.observable(!0),F=e.observableArray(),P=e.observable(),C=e.observable("Search this CATEGORY"),O=e.observableArray(),_=e.observableArray(),L=e.observable(!1),j=e.observable(""),N=e.computed(function(){var e=O().filter(function(e){return e.name.toLowerCase().includes(j().toLowerCase())});return e},this),D=[{name:e.local("apps/menuBuilder.sortName"),value:0},{name:e.local("apps/menuBuilder.sortNameDesc"),value:1},{name:e.local("apps/menuBuilder.sortPrice"),value:2},{name:e.local("apps/menuBuilder.sortPriceDesc"),value:3},{name:e.local("apps/menuBuilder.sortCreationDate"),value:4},{name:e.local("apps/menuBuilder.sortCreationDateDesc"),value:5}],V=e.observable(),U=e.computed(function(){if(!P())return 0;var e=F().filter(function(e){return e.id===P()});return e.length?e[0].products.length-_().length:0}),R=new l(0,176),$=new l(0,414);this.activateCategory=function(){P(this.id),C("Search "+this.name),j(""),O(this.products),_(O().filter(function(e){return e.sortOrder}).sort(function(e,t){return e.sortOrder-t.sortOrder})),p(),$.turnPage(0)};var q=e.observable();return{activate:S,products:O,sortedProducts:_,productsFilter:j,filteredProducts:N,allCategories:F,currentCategoryId:P,currentCategoryName:C,categoriesPager:R,productsPager:$,isProductUsed:u,isDraggingProduct:L,activateCategory:activateCategory,dragStart:g,dragOver:y,dragLeave:h,dropProduct:T,dropCategory:I,dragEnd:x,isLoading:M,delayedClick:c,cancelClick:d,removeProduct:E,productSortOrder:V,productSortOrderOptions:D,otherItems:U,save:A,close:w}});
define('viewmodels/login',["knockout","durandal/app","plugins/router","data/session","data/config","data/permissions","services/jivoChat","services/timers/upgradeTimer","services/userAgent","common/utils"],function(e,t,n,r,a,i,o,s,u,l){function c(e){$(".form-signin .numpad").removeClass("loading"),A(e)}function d(){A("")}function p(){_.email(""),_.password(""),F(!1);var n='<a href="#unblock-account"  >'+V+"</a>",o=e.T("account.unblock_account",null,n);L(o);var u='<a href="'+window.App.signInUrl+'" target="_blank" click="signUpClick1">'+U+"</a>",c=e.T("account.not_registered",null,u);j(c);var d='<a href="#reset-password" click="resetPassword1">'+V+"</a>",p=e.T("account.forgot-password",null,d);N(p);var m='<a href="#pin-login" >'+V+"</a>",f=e.T("account.set_password",null,m);return D(f),s.checkUpgradeByCode(l.getIdFromCookie()).then(function(){t.trigger("nav:hide"),a.clearConfig(),i.clearPermissions(),r.authorized(!1)})}function m(){f()}function f(){$(".version").text(e.T("login.version_")+a.version)}function v(){r.authorized(!0),g(),o.init()}function g(){var e=l.getParameterByName("navigateUrl"),t="";if(e){if(e.toLowerCase().startsWith("http"))t=e;else{var r=window.location;t=r.protocol+"//"+r.host+"/"+r.pathname.split("/")[1],t.endsWith("/")||(t+="/"),t+="#"+e}window.location.replace(t)}else n.navigate("")}function b(){var e="api/account/login/",t={accountId:l.getIdFromCookie(),email:_.email(),password:_.password()};return $(".form-signin .numpad").addClass("loading"),d(),$.post(e+l.getIdFromCookie(),t).then(function(e){return window.localStorage.setItem("isTempPass",!1),0!==e.resultCode&&8!=e.resultCode?(2!==e.resultCode?(c(w[e.resultCode]||k),5===e.resultCode&&F(!0)):c(M),void 0):(8==e.resultCode&&window.localStorage.setItem("isTempPass",!0),a.fetchConfig(!0).then(function(e){i.setPermissions().then(function(){S=e.employeeId,T()?v():C(!1)},function(e){c(e.statusText)})}).fail(function(e){var t=401===e.status?M:e.statusText;c(t)}),void 0)},function(e){c(e.statusText)}),!1}function y(){return C(!0),$(".form-signin .numpad").removeClass("loading"),d(),pin="",$(".pin-display span").removeClass("active"),!1}function h(){return P()&&(C(!0),I(),v()),!1}function T(){var e=window.localStorage.getItem("users");return e&&(e=JSON.parse(e)),e&&e[S]||!1}function I(){var e=window.localStorage.getItem("users");e=e?JSON.parse(e):{},e[S]=!0,window.localStorage.setItem("users",JSON.stringify(e))}function x(e,t){if("A"==t.target.nodeName.toUpperCase()){var n=$(t.target),r=n.attr("click");r&&R[r]&&R[r]()}}var S,E=e.T("login.back_office"),A=e.observable(""),w={5:e.T("login.you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked"),7:e.T("account.many_emails_set_password_flow")},k=e.T("login.invalid_login_or_password"),M=e.T("login.you_are_not_authorized_to_login"),F=e.observable(!1),P=e.observable(!1),C=e.observable(!0),O=e.observable("EN"),_={email:e.observable(),password:e.observable()},L=e.observable(),j=e.observable(),N=e.observable(),D=e.observable(),V=e.T("account.here"),U=e.T("account.signup"),R={};return{title:E,activate:p,attached:m,errorMessage:A,loginData:_,signIn:b,labelLinkClick:x,showUnblockMessage:F,unblockAccountMessage:L,notRegisteredMessage:j,forgotPasswordMessage:N,setupPasswordMessage:D,checkedValue:P,getCurrentLanguage:O,checkedAgreement:C,closeAgreement:y,submitAgreement:h}});
define('viewmodels/logout',["knockout","durandal/app","plugins/router","data/session","data/config","data/permissions","services/ssoLoginService"],function(e,t,n,r,a,i,o){function s(){$.post("api/account/logoff").always(function(){o.endSession(),location.href=location.pathname+location.search})}var u={activate:s};return u});
define('viewmodels/modifiers/modifier-type/addOnModifier',["knockout","viewmodels/modifiers/modifierManage"],function(e,t){function n(){i(t.model()),i().addOnModifiers.subscribe(function(){i().addOnModifiers().forEach(function(e){e.names().forEach(function(e){e.name.subscribe(function(){i().addOnModifiers().forEach(function(t){t.itemModifierValues().forEach(function(t){t.names().forEach(function(t){t.name(e.name())})})})})})})})}function r(e){$(".checkbox",e).checkbox()}function a(e){i().addAddOnModifier(e)}var i=e.observable();return{activate:n,attached:r,model:i,editMode:t.editMode,getId:t.getId,addAddOnModifier:a,langs:t.langs}});
define('viewmodels/modifiers/modifier-type/exceptionModifier',["knockout","viewmodels/modifiers/modifierManage"],function(e,t){function n(){i(t.model()),i().exceptionModifiers.subscribe(function(){i().exceptionModifiers().forEach(function(e){e.names().forEach(function(e){e.name.subscribe(function(){i().exceptionModifiers().forEach(function(t){t.itemModifierValues().forEach(function(t){t.names().forEach(function(t){t.name(e.name())})})})})})})})}function r(e){$(".checkbox",e).checkbox()}function a(e){i().addExceptionModifier(e)}var i=e.observable();return{activate:n,attached:r,model:i,editMode:t.editMode,getId:t.getId,addExceptionModifier:a,langs:t.langs}});
define('viewmodels/modifiers/modifier-type/groupModifier',["knockout","viewmodels/modifiers/modifierManage"],function(e,t){function n(){o(t.model())}function r(e){$(".checkbox",e).checkbox()}function a(e){e.addModifierValue(e)}function i(e){o().addGroupModifier(e)}var o=e.observable();return{activate:n,attached:r,model:o,editMode:t.editMode,getId:t.getId,addModifierValue:a,addGroupModifier:i,langs:t.langs}});
define('viewmodels/modifiers/modifiersList',["knockout","plugins/router","repositories/presentationApi/modifiersRepository","repositories/modifiersRepository","viewmodels/modifiers/modifierManage","data/common","services/dataTableText"],function(e,t,n,r,a,i,o){function s(t){var n=this;n.modifier=e.observable(t),n.rowNum=e.observable(),n.edit=function(){a.show(n.modifier().id())},n.deleteRow=function(t,a){a.stopPropagation(),i.showConfirmation(void 0,e.T("modifiers/modifiersList.are_you_sure_you_want_to_delete_selected_modifier"),function(){var t=r.remove(n.modifier());t?p.row("#"+n.modifier().id()).remove().draw(!1):i.showError(e.T("modifiers/modifiersList.the_modifier_was_not_deleted"),"#messages")})}}function u(e){d=e,i.showLoader(f),c()}function l(){a.show()}function c(){n.loadAllAsync().done(function(t){m=Enumerable.From(t).Select(function(e){return new s(e)}).ToArray(),p=$("#modifiersTable",d).DataTable({language:o.getLanguage(),processing:!0,info:!1,paging:!0,lengthChange:!1,autoWidth:!1,data:m,columns:[{data:"modifier().name()"},{data:"modifier().itemModifierTypeCode",render:function(t){return 0==t()?e.T("modifiers/modifiersList.group"):1==t()?e.T("modifiers/modifiersList.add-on"):2==t()?e.T("modifiers/modifiersList.exception"):""},bSearchable:!1},{data:"modifier().isActive",render:function(t){return 1==t()?e.T("modifiers/modifiersList.active"):e.T("modifiers/modifiersList.inactive")},bSearchable:!1},{data:null,render:function(){return'<input type="button" class="delete-row-button" data-bind="click: deleteRow" />'},sWidth:"50px",sClass:"center no-padding",bSortable:!1,bSearchable:!1}],order:g,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:n.modifier().id()}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),0!==v&&p.page(v).draw(!1),new $.fn.DataTable.SearchFilter(p),p.on("page",function(){v=p.page.info().page}),p.on("order",function(e,t){g[0][0]=p.order()[0][0],g[0][1]=p.order()[0][1],t.oApi._fnPageChange(t,v,!0)})}).always(function(){i.showRightPanelContent(f)})}var d,p,m=[],f="div.pane-right > div.modifiers",v=0,g=[[0,"asc"]],b={attached:u,showNewModifier:l};return b});
define('viewmodels/navigationpanel',["knockout","jquery","plugins/router","durandal/app","data/config","services/demo","services/zendesk"],function(e,t,n,r,a,i,o){function s(e){L=e,T(),C.toggleEv=r.on("nav:toggle").then(c),C.showEv=r.on("nav:show").then(d),C.shohideEv=r.on("nav:hide").then(T)}function u(){C.toggleEv.off(),C.showEv.off(),C.shohideEv.off()}function l(){T()}function c(){O=(new Date).getTime(),100>O-_||(_=O,t(A).is(":visible")?T():d())}function d(){t(w).removeClass("hide-content"),t(w).addClass("show-content"),t(A).show(),t(document).trigger("navPanelOpened"),m(),f(),v(),g(),b(),p()}function p(){"true"==window.localStorage.getItem("isTempPass")?t('a[href="#support-access"]',L).parent().hide():t('a[href="#support-access"]',L).parent().show()}function m(){a.isClockInApp?t('a[href="#clockIn"]',L).parent().show():t('a[href="#clockIn"]',L).parent().hide()}function f(){a.isPoReceivingApp?(t('a[href="#adjustment"]',L).parent().show(),t('a[href="#po-receiving"]',L).parent().show(),t('a[href="#po-receiving-report"]',L).parent().show()):(t('a[href="#adjustment"]',L).parent().hide(),t('a[href="#po-receiving"]',L).parent().hide(),t('a[href="#po-receiving-report"]',L).parent().hide())}function v(){a.isStoreTransferApp?(t('a[href="#store-transfer"]',L).parent().show(),t('a[href="#store-transfers-report"]',L).parent().show()):(t('a[href="#store-transfer"]',L).parent().hide(),t('a[href="#store-transfers-report"]',L).parent().hide())}function g(){a.isQuickbooksApp?t('a[href="#quickbooks"]',L).parent().show():t('a[href="#quickbooks"]',L).parent().hide()}function b(){a.isMenuBuilderApp?t('a[href="#menuBuilder"]',L).parent().show():t('a[href="#menuBuilder"]',L).parent().hide()}function y(){F(a.isDemo),P(a.demoName)}function h(e){var n=t('a[href="#app-'+e.key+"-settings/"+e.id+'"]',L).parent();e.installed()?n.show():n.hide()}function T(){return t(w).removeClass("show-content"),t(w).addClass("hide-content"),t(A).hide(),t(document).trigger("navPanelClosed"),!0}function I(e,n){return"community"===e.route?o.checkNickname():e.childRoutes&&e.moduleId===M?(t(n.target).parent().toggleClass("open"),!1):!0}function x(t){if(t.isAppRoute===!0)return t.name;var n=t.bindTo?e.unwrap(this[t.bindTo]):t.title;return e.T(n)}function S(){a.fetchConfig().then(y)}var E,A=".navigation-panel",w="#content",M="viewmodels/",k=a.enterpriseName,F=e.observable(),P=e.observable(),C={},O=0,_=0,L=null;return r.on("app:clockInChanged",m),r.on("app:poReceivingChanged",f),r.on("app:storeTransferChanged",v),r.on("app:quickbooksChanged",g),r.on("app:menuBuilderChanged",b),r.on("app:config:changed",y),r.on("app:3rd:changed",h),E={router:n,activate:S,attached:s,detached:u,title:k,isDemo:F,demoName:P,close:T,show:d,compositionComplete:l,selectMenu:I,itemLabel:x,cleanup:i.cleanup}});
define('viewmodels/orders/orderDetails',["knockout","moment","plugins/router","durandal/system","data/common","data/config","data/baseCommon","common/dateUtils","viewmodels/base/baseManageViewModel","models/transactionModel","repositories/base/baseRepository"],function(e,t,n,r,a,i,o,s,u,l){function c(){c.superclass.constructor.apply(this,arguments)}return o.extend(c,u),$.extend(c.prototype,{name:"TransactionDetails",moduleId:"viewmodels/orders/orderDetails",modelType:l,title:e.observable(e.T("orders/orderDetails.order_details")),isControlNumberEnabled:e.observable(!1),updateTitle:!1,initialize:function(){c.superclass.initialize.apply(this,arguments),this.repo.options.routeType=this.repo.routeType.routeTypeByEntityName},activate:function(){var e=c.superclass.activate.apply(this,arguments);r.log(this.name+" activating");var t=this;return i.fetchConfig().then(function(){t.isControlNumberEnabled("PR"===i.countryId&&i.isControlNumberApp)}),e},attached:function(){c.superclass.attached.apply(this,arguments),r.log(this.name+" attached"),this.title(e.T("orders/orderDetails.order_details_-_register_#_",null,[this.dataContext().registerNumber(),this.dataContext().status()]))},deactivate:function(){c.superclass.deactivate.apply(this,arguments),r.log(this.name+" deactivating")},detached:function(){c.superclass.detached.apply(this,arguments),r.log(this.name+" detached")},initModel:function(){this.dataContext().date=s.formatDateTime(this.dataContext().beginDateTime())},resolveComputedFields:function(e){e.resolve()},tranTypeToText:function(e){return"ManualRefund"===e?"Manual Refund":e},createModel:function(){var t=this;return c.superclass.createModel.apply(this,arguments).then(function(){t.dataContext().localTranStatus=t.dataContext().voided()?e.local("orders/orderDetails.Voided"):e.local("orders/orderDetails."+t.dataContext().transactionStatus()),t.dataContext().customerId()===i.enterpriseId&&t.dataContext().customerName(e.T("orders/ordersList.walkIn")),t.dataContext().customerPhone&&t.dataContext().customerPhone.extend({phone:!0}),1!==t.dataContext().transactionItems().length||t.dataContext().transactionItems()[0].name()||t.dataContext().transactionItems()[0].name(t.dataContext().tenderType())})},showOrderType:e.observable(),getOrderAuthCode:function(t){var n=e.unwrap(t),r=e.unwrap(n.paymentInfos);return r&&r.length>0?r.map(function(e){if(e&&"False"!==e){var t=JSON.parse(e);return t}return{}}).filter(function(e){return!!e.authCode}).map(function(e){return e.authCode}).join(", "):""},getOrderTenderType:function(t){if(7==t.tenderType()||"EbtCard"==t.tenderType()){var n=e.unwrap(t.paymentInfos);if(n){var r=n;if(r&&r.length>0){n=r[0];var a;if(n)return a=JSON.parse(n),"F"==a.ebtType?e.T("orders/ordersList.ebtFood"):e.T("orders/ordersList.ebtCach")}}}return t.tenderType()},getOrderFiscalText:function(t){var n=e.unwrap(t),r=e.unwrap(n.paymentInf);if(!r){var a=e.unwrap(n.paymentInfos);a&&a.length>0&&(r=a[0])}var i;return r&&"False"!==r&&(i=JSON.parse(r)),i&&i.parameters?i.parameters["pr-fiscal_controlNumber"]:""}}),new c});
define('viewmodels/orders/orderDetailsItems',["knockout","plugins/router","durandal/system","data/baseCommon","data/common","data/config","common/numericUtils","common/utils","viewmodels/base/baseListViewModel","models/base/entityTableRow","repositories/base/baseRepository"],function(e,t,n,r,a,i,o,s,u,l){function c(){c.superclass.constructor.apply(this,arguments)}return r.extend(c,u),$.extend(c.prototype,{name:"TransactionDetailsItems",moduleId:"viewmodels/orders/orderDetailsItems",listContainer:"#transactionItemsTable",title:e.observable(""),transactionItems:e.observable(),transaction:e.observable(),defaults:{tableDefinition:{sAjaxDataProp:"",columns:[{data:"entity.name",render:function(t,n,r){return"Cash"===t?e.local("reports/productMixReport.terminal0"):"CreditCard"===t?e.local("reports/productMixReport.terminal2"):r.entity.variantNames?"<span>"+s.escapeHtml(t)+'</span> <p class="order-details-serial">'+s.escapeHtml(r.entity.variantNames)+"</p>":r.entity.serial?"<span>"+s.escapeHtml(t)+'</span> <p class="order-details-serial">'+s.escapeHtml(r.entity.serial)+"</p>":s.escapeHtml(t)}},{data:"entity.quantity"},{data:"entity.unitPrice"},{data:"entity.discount"},{data:"entity.totalPrice"}]}},initialize:function(){c.superclass.initialize.apply(this,arguments)},activate:function(e){c.superclass.activate.apply(this,arguments),n.log(this.name+" activating");var t=this;t.transaction(e.data),t.transactionItems(t.transaction().transactionItems())},onAjaxLoad:function(e,t,n){var r=this,a=Enumerable.From(r.transactionItems()).Select(function(e){return new l({id:e.id(),description:e.description(),variantNames:e.variantNames(),serial:e.serial(),refunded:e.refunded(),name:e.name(),quantity:e.quantity(),unitPrice:o.formatCurrency(e.unitPrice()),discount:o.formatCurrency(e.discount()),totalPrice:o.formatCurrency(e.totalPrice())},"TransactionLineItem")}).ToArray();return n&&n(a),a},onAttached:function(){},onCreatedRow:function(e,t){var n=this;if(t.entity.refunded||n.transaction().voided()||n.transaction().refunded()){var r=$(e);r.addClass("alreadyRefunded")}}}),c});
define('viewmodels/orders/ordersList',["knockout","moment","plugins/router","durandal/system","data/baseCommon","data/common","data/config","common/numericUtils","common/dateUtils","viewmodels/base/baseListViewModel","viewmodels/orders/orderDetails","models/base/entityTableRow","repositories/base/baseRepository","repositories/presentationApi/ordersRepository","viewmodels/controls/storesFilter"],function(e,t,n,r,a,i,o,s,u,l,c,d,p,m,f){function v(){function t(){return m.loadOrderTypes().then(function(e){a.orderTypes(Enumerable.From(e).Where(function(e){return"Refund"!=e.name}).ToArray())})}function n(){return m.loadPaymentStatuses().then(function(e){a.paymentStatuses(Enumerable.From(e).Where(function(e){return"Cancelled"!=e.name}).ToArray())})}function r(){return m.loadFulfillments().then(function(e){a.fulfillments(e)})}var a=this;a.orderType=e.observable("0"),a.orderTypes=e.observableArray(),a.paymentStatus=e.observable(0),a.paymentStatuses=e.observableArray(),a.fulfillment=e.observable(0),a.fulfillments=e.observableArray(),a.stores=e.observableArray(),a.initialize=function(){return $.when([t(),n(),r()])}}function g(){g.superclass.constructor.apply(this,arguments);var e=this;this.storesFilter=new f(this.ordersFilter.stores),this.storesFilter.initialize().then(function(){e.storesFilter.storeChanged.subscribe(function(){e.applyFilters()})}),this.exportTableData=function(){return h=!0,e.table.ajax.reload(),!1}}function b(e){switch(e){case 1:return"fa fa-check-circle fa-lg status-not-paid";case 2:return"";case 3:return"fa fa-check-circle-o fa-lg status-partially-paid";case 4:return"fa fa-check fa-lg status-paid";case 5:return"fa fa-arrow-circle-o-left fa-lg status-partially-refunded";case 6:return"fa fa-arrow-left fa-lg status-refunded";case 7:return"fa fa-ban fa-lg status-voided";case 8:return"";default:return""}}function y(e){switch(e){case 1:return"fa fa-plus-square-o fa-lg fulfilment-color";case 2:return"fa fa-spinner fa-lg fulfilment-color";case 3:return"fa fa-bell-o fa-lg fulfilment-color";case 4:return"fa fa-truck fa-lg fulfilment-color";case 5:return"fa fa-thumbs-up fa-lg fulfilment-color";default:return""}}var h=!1,T=e.observable(),I=[[6,"desc"]];return a.extend(g,l),$.extend(g.prototype,{name:"TransactionsList",moduleId:"viewmodels/orders/ordersList",listContainer:"#transactionsTable",containerSelector:"div.pane-right > div.item-list",title:e.observable(e.T("orders/ordersList.orders")),dateRange:e.observable(),showOrderType:T,pageNo:0,sortOrder:I,ordersFilter:new v,stores:null,defaults:{tableDefinition:{serverSide:!0,ajax:this.ajaxLoad,columns:[{data:"entity.upc","class":"center",width:"140px"},{data:"entity.name"},{data:"entity.typeText",width:"100px"},{data:"entity.fulfilmentCode",sortable:!0,width:"150px","class":"center",render:function(e){return"<i class='"+y(e)+"' ></i>"}},{data:"entity.statusCode","class":"center",render:function(e){return"<i class='"+b(e)+"' ></i>"}},{data:"entity.total"},{data:"entity.date"},{data:"entity.store"},{data:"entity.employee"},{data:"entity.customer"}],order:I}},initialize:function(){g.superclass.initialize.apply(this,arguments);var e=this;e.repo=new p({routeType:"ByEntityName",modelDesc:{entityName:"Transaction"}}),e.employeeRepo=new p({modelDesc:{entityType:"Business",entityName:"EmployeeByEnterprise"}}),e.dateRange.subscribe(function(t){e.pageNo=0,e.applyPeriodFilter(t)})},activate:function(){g.superclass.activate.apply(this,arguments),r.log(this.name+" activating");var e=this;return o.isLoaded?e.ordersFilter.initialize():o.fetchConfig().then(function(){return e.ordersFilter.initialize()})},afterLoadTableData:function(t){var n=this,r=[e.T("orders/ordersList.upc"),e.T("orders/ordersList.name"),e.T("orders/ordersList.typeColumn"),e.T("orders/ordersList.tenderType"),e.T("orders/ordersList.fulfilmentColumn"),e.T("orders/ordersList.status"),e.T("orders/ordersList.businessDate"),e.T("orders/ordersList.store"),e.T("orders/ordersList.employee"),e.T("orders/ordersList.customer"),e.T("orders/ordersList.subtotal"),e.T("orders/ordersList.discount"),e.T("orders/ordersList.tax"),e.T("orders/ordersList.tips"),e.T("orders/ordersList.totalAmount"),e.T("orders/ordersList.controlNumber")],a={},i=["upc","name","typeText","tenderType","fulfilment","status","date","store","employee","customer","subtotal","discount","tax","tips","total","controlNumber"];r.forEach(function(e,t){a[e]=i[t]}),t.data=t.data.map(function(e){return e.entity.total=e.entity.total.replace("$",""),e.entity.name=e.entity.name||"",e.entity.date=e.entity.date?u.formatDateTime(e.entity.date):"",e.entity}),n.table.exportData({data:t.data,columnsCount:i.length,columns:a,fileNamePrefix:"orders-"})},getOrderFiscalText:function(t){var n=e.unwrap(t),r=e.unwrap(n.paymentInf);if(!r){var a=e.unwrap(n.paymentInfos);a&&a.length>0&&(r=a[0])}var i;return r&&"False"!==r&&(i=JSON.parse(r)),i&&i.parameters?i.parameters["pr-fiscal_controlNumber"]:""},onAjaxLoad:function(t,n,r){var a,i=this;e.computed(function(){a=i.dateRange()}).dispose(),h&&(t.start=0,t.length=0),null!=a&&this.repo.load(this.getLoadListParams(t),function(t){i.showOrderType(t.showOrderType),i.table.column(2).visible(t.showOrderType),t.data=Enumerable.From(t.data).Select(function(t){return new d({id:t.id,upc:t.upc,type:t.type,typeText:t.typeText,statusCode:t.statusCode,status:t.status,fulfilmentCode:t.fulfilment,fulfilment:t.fulfilmentText,total:s.formatCurrency(t.totalAmount),date:u.formatDateTime(t.businessDate),employee:t.employee,store:t.store,name:t.name,customer:t.customerId===o.enterpriseId?e.T("orders/ordersList.walkIn"):t.customer,tenderType:t.tenderType,discount:t.discount,tax:t.tax,tips:t.tips,subtotal:t.subtotal,controlNumber:i.getOrderFiscalText(t)},"Transaction",i.editCallback,i.deleteCallback)}).ToArray(),h?(i.afterLoadTableData(t),i.loadData()):r&&r(t),h=!1},null,!1,!0)},editCallback:function(e){c.showOrderType(T()),n.navigate("order-details/"+e.entity.id)},deleteCallback:function(){alert("delete")},formatDate:function(e){var n=t(e);return n.toISOString()},getLoadListParams:function(t){var n,r,a,i,o=function(e){return 0!=e?e:null},s=this;e.computed(function(){n=s.ordersFilter.orderType(),r=s.ordersFilter.paymentStatus(),a=s.ordersFilter.fulfillment(),i=s.dateRange(),stores=s.ordersFilter.stores()}).dispose();var u={startDate:i&&i.dateFrom&&i.dateFrom.isAfter("2010-01-01")?i.dateFromString():null,endDate:i&&i.dateTo&&!i.dateTo.isAfter()?i.dateToString():null,orderType:o(n),paymentStatus:o(r),fulfillment:o(a),stores:s.ordersFilter.stores()};return $.extend({},t,u)},applyPeriodFilter:function(){this.pageNo=0,this.loadData()},applyFilters:function(){this.pageNo=0,this.loadData()}}),new g});
define('viewmodels/setPassword',["knockout","durandal/app","plugins/router","data/session","data/config","data/permissions","services/timers/upgradeTimer","services/userAgent","common/utils"],function(e,t,n,r,a,o,i,s,l){function u(e){g(),E(e)}function c(){E("")}function d(){var e=l.getIdFromQuery();if(""===l.getIdFromCookie()){if(""===e)return setTimeout(function(){n.navigate("account")},1),!1;l.setEnterpriseCodeCookie(e)}return new Promise(function(e){e(!0)})}function p(){F.email(""),F.password(""),F.confirmPassword(""),F.pin(null),F.token="",F.password.isModified(!1),F.confirmPassword.isModified(!1)}function m(){p()}function f(){$(".form-signin .numpad").addClass("loading")}function g(){$(".form-signin .numpad").removeClass("loading")}function v(t){var n="api/account/GetUserDataResult",r={token:t};return f(),c(),$.post(n,r).then(function(t){t.success?F.email(t.userEmail):u(e.T(t.message))},function(e){var t=e.statusText+(e.responseText?": "+e.responseText:"");u(t)}).always(function(){g()})}function b(e){var n;e?(F.token=e,n=v(e)):n=$.Deferred().resolve().promise();var s=i.checkUpgradeByCode(l.getIdFromCookie()).then(function(){t.trigger("nav:hide"),a.clearConfig(),o.clearPermissions(),r.authorized(!1)});return $.when(s,n)}function y(){h()}function h(){$(".version").text(e.T("login.version_")+a.version)}function T(){I()}function I(){n.navigate("#login"),location.reload(!0)}function x(){var t=e.validation.group([F.password,F.confirmPassword],{deep:!0});if(t().length>0)return t.showAllMessages(),void 0;var n="api/account/setPassword",r={accountId:l.getIdFromCookie(),email:F.email(),password:F.password(),pin:F.pin(),token:F.token};f(),c(),$.post(n,r).then(function(t){0===t.resultCode?T():2!==t.resultCode?t.message?u(e.T(t.message)||C):u(k[t.resultCode]||C):u(M)},function(e){var t=e.statusText+(e.responseText?": "+e.responseText:"");u(t)}).always(function(){g()})}function S(e){F.pin(e)}function w(e){F.email(e)}var A=e.T("login.back_office"),E=e.observable(""),k={5:e.T("login.you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked")},C=e.T("login.invalid_login_or_password"),M=e.T("login.you_are_not_authorized_to_login"),F={token:null,pin:e.observable(null),email:e.observable(),password:e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")},pattern:{message:e.T("account.invalid_password"),params:/^(?=.*[a-z])(?=.*[A-Z])(?=.*\d)(?=.*[^\da-zA-Z]).{9,15}$/}}),confirmPassword:e.observable().extend({required:{message:e.T("common.thisFieldIsRequired")}})};return F.emailEditable=e.computed(function(){return F.pin()}),F.confirmPassword.extend({areSame:{params:{target:F.password},message:e.T("account.should_be_equal_to_password")}}),{title:A,canActivate:d,activate:b,deactivate:m,attached:y,errorMessage:E,loginData:F,setPassword:x,setPin:S,setEmail:w}});
define('viewmodels/pinLogin',["knockout","durandal/app","plugins/router","data/session","data/config","data/permissions","services/timers/upgradeTimer","services/userAgent","common/utils","viewmodels/setPassword"],function(e,t,n,r,a,i,o,s,u,l){function c(e){$(".form-signin .numpad").removeClass("loading"),E(e)}function d(){E("")}function p(){$(".form-signin .numpad").removeClass("loading"),S="",$(".pin-display span").removeClass("active")}function m(){0!=S.length&&($(".pin-display span:nth-child("+S.length+")").removeClass("active"),S=S.substr(0,S.length-1))}function f(){var e=u.getIdFromQuery();if(""===u.getIdFromCookie()){if(""===e)return setTimeout(function(){n.navigate("account")},1),!1;u.setEnterpriseCodeCookie(e)}return new Promise(function(e){e(!0)})}function v(){p(),t.trigger("nav:hide"),a.clearConfig(),i.clearPermissions(),r.authorized(!1)}function g(){p(),b()}function b(){$(".version").text(e.T("login.version_")+a.version)}function y(e){l.setEmail(e.userEmail),l.setPin(S),h()}function h(){n.navigate("set-password")}function T(){var e="api/account/ValidatePin",t={accountId:u.getIdFromCookie(),pin:S};$(".form-signin .numpad").addClass("loading"),d(),$.post(e,t).then(function(e){if(e){if(0!==e.resultCode)return p(),2!==e.resultCode?c(w[e.resultCode]||A):c(M),void 0;y(e)}else p(),c("Error occured")},function(e){p(),c(e.statusText+": "+e.responseText)})}function I(e,t){if(!(S.length>=k)){var n=t.target.textContent;S+=n,$(".pin-display span:nth-child("+S.length+")").addClass("active"),S.length>=k&&T()}}var x=e.T("login.back_office"),S="",E=e.observable(""),w={5:e.T("login.you_exeeded_the_number_of_login_attempts_back_office_of_your_account_is_blocked")},A=e.T("login.invalid_pin"),M=e.T("login.you_are_not_authorized_to_login"),k=6;return{title:x,canActivate:f,activate:v,attached:g,inputChar:I,clear:p,back:m,errorMessage:E}});
define('viewmodels/poReceiving/adjustment',["knockout","plugins/router","plugins/dialog","data/common","repositories/businessUnitRepository","repositories/presentationApi/productsRepository","repositories/vendorsRepository","models/inventoryType"],function(e,t,n,r,a,i,o,s){function u(t){F.removeAll(),t&&(_(!0),i.search(t).then(function(e){e&&F(e)},function(){r.showError(e.local("storeTransfer.unexpectedError"),"#inventoryAdjustmentMessage",5e3)}))}function l(){_(!1),k(""),F.removeAll()}function c(){window.setTimeout(l,500)}function d(){P.removeAll(),S.removeAll(),A(null),M(null),k(""),_(!1),O(!0);var t=o.loadAllActiveAsync(),n=a.loadAllBusinessUnitsByEmployeeAsync();t.then(function(e){E(e)}),n.then(function(e){S(e)}),$.when(t,n).always(function(){O(!1)}).fail(function(){r.showError(e.local("storeTransfer.unexpectedError"),"#inventoryAdjustmentMessage",5e3)})}function p(t,n){t.sku=e.computed(function(){var e=n.vendorSkus.filter(function(e){return e.vendorId===w()});return e&&e[0]?e[0].sku:null}),t.cost=e.computed(function(){var e=n.vendorSkus.filter(function(e){return e.vendorId===w()});return e&&e[0]?e[0].cost:null});var r,a;0===t.quantityDecimalPlaces?(r=e.T("inventoryAdjustment.adjustedIntegerQuantityError",null,[-1e8,1e8]),a=!0):(r=e.T("inventoryAdjustment.adjustedQuantityError",null,[-1e8,1e8]),a=!1),t.inventoryType!==s.serialized&&(t.transferQuantity=e.observable(1).extend({number:!0,range:{message:r,params:{minValue:-1e8,maxValue:1e8,onlyInteger:a}}}),t.newSerialNo=""),t.reasonId=e.observable(null),t.inventoryType===s.serialized&&(t.serials=e.observableArray(),t.newSerialNo=e.observable(),t.transferQuantity=e.computed(function(){return t.serials().length})),P.push(t)}function m(t){O(!0);var n=this;i.getInventoryTransferLine(t.id,w()).then(function(e){if(O(!1),e&&(n.extendLine(e,e),e.child))for(var t=0;t<e.child.length;t++)n.extendLine(e.child[t],e)},function(){O(!1),r.showError(e.local("storeTransfer.unexpectedError"),"#inventoryAdjustmentMessage",5e3)})}function f(e){var t=null;if(null!=e.variantKey){for(var n=0;n<P().length;n++){var r=P()[n];r.itemId==e.itemId&&null!=r.child&&(r.child.splice(e,1),0==r.child.length&&(t=r))}t&&P.remove(t)}P.remove(e)}function v(){var t={vendorId:w(),storeInId:A(),refNum:M(),inventoryTransferLines:e.toJS(P),isAdjust:!0};O(!0),i.poReceiving(t).then(function(t){O(!1),t?(r.showMessage(e.local("inventoryAdjustment.inventoryAdjustmentSuccess")+' <a href="#adjustment-report-drilldown/'+t+'">'+e.local("storeTransfer.details")+"</a>","#inventoryAdjustmentMessage",1e4),P.removeAll(),M(null)):r.showError(e.local("storeTransfer.unexpectedError"),"#inventoryAdjustmentMessage",5e3)},function(t){O(!1),r.showError(e.local(t.responseText||"storeTransfer.unexpectedError"),"#inventoryAdjustmentMessage",5e3)})}function g(){var t=!0;P().forEach(function(e){t=t&&(e.inventoryType===s.serialized?0!==e.transferQuantity():e.transferQuantity.isValid())}),t&&r.showConfirmation(e.local("inventoryAdjustment.inventoryAdjustmentConfirmationTitle"),e.local("inventoryAdjustment.inventoryAdjustmentConfirmationMessage"),v)}function b(e){var t=e.filter(function(e){return e.businessUnitId===A()});return t&&t[0]?t[0].quantity:0}function y(e,t){return t.keyCode>=48&&t.keyCode<=57||t.keyCode>=45?!0:46===t.keyCode?e.quantityDecimalPlaces>0&&-1===t.target.value.indexOf("."):!1}function h(e){e.newSerialNo()&&(e.serials.push(e.newSerialNo()),e.newSerialNo(""))}function T(e){this.serials.remove(e)}function I(e,t){return 13===t.keyCode&&($textBox=$(t.delegateTarget),$textBox.next().focus().click(),$textBox.focus()),!0}function x(){var t=new Array;return t.push({id:0,name:e.local("inventoryAdjustment.na")}),t.push({id:1,name:e.local("inventoryAdjustment.found")}),t.push({id:2,name:e.local("inventoryAdjustment.lost")}),t.push({id:3,name:e.local("inventoryAdjustment.stolen")}),t.push({id:4,name:e.local("inventoryAdjustment.broken")}),t.push({id:5,name:e.local("inventoryAdjustment.gift")}),t.push({id:6,name:e.local("inventoryAdjustment.reason")}),t.push({id:7,name:e.local("inventoryAdjustment.reset")}),t.push({id:8,name:e.local("inventoryAdjustment.other")}),t}var S=e.observableArray(),E=e.observableArray(),w=e.observable(),A=e.observable(),M=e.observable(),k=e.observable(),C=!1,F=e.observableArray(),P=e.observableArray(),O=e.observable(!1),_=e.observable(!1);return k.subscribe(function(e){window.clearTimeout(C),e?C=window.setTimeout(u,1e3,e):F.removeAll()}),{activate:d,addLine:m,deleteRow:f,receive:g,cancelSearch:c,vendors:E,vendorId:w,stores:S,storeInId:A,refNum:M,searchString:k,foundProducts:F,inventoryTransferLines:P,isLoading:O,isSearchOpened:_,getStoreInQuantity:b,qtyKeyPress:y,extendLine:p,addSerial:h,removeSerial:T,onKeyPress:I,anjasments:x}});
define('viewmodels/poReceiving/poReceiving',["knockout","plugins/router","plugins/dialog","data/common","repositories/businessUnitRepository","repositories/presentationApi/productsRepository","repositories/vendorsRepository","models/inventoryType","data/config"],function(e,t,n,r,a,i,o,s,u){function l(){for(var e,t=D().length,n=t-1;n>=0;--n)e=D()[n],0!=e.transferQuantity()&&null!==e.transferQuantity()&&!isNaN(e.transferQuantity())||1===e.productType&&0!==D().filter(function(t){return t.parent===e}).length||D.remove(e)}function c(e,t){e.pageNo&&(q(e.pageNo-1),p());var n=t.delegateTarget.getAttribute("data-dir");"previous"===n&&0!=q()?(q(q()-1),p()):"next"===n&&q()!=Math.ceil(G()/B)-1&&(q(q()+1),p())}function d(){z.removeAll();var e,t=Math.ceil(G()/B);if(!(2>t))if(6>=t)for(var n=1;t>=n;++n)e={pageNo:n},n===q()+1&&(e.current=!0),z.push(e);else{var r=[1,t];q()<=2?r.splice(1,0,2,3,4,5):q()>=t-3?r.splice(1,0,t-4,t-3,t-2,t-1):r.splice(1,0,q(),q()+1,q()+2);for(var n=0;n<r.length;++n)e={pageNo:r[n]},r[n]===q()+1&&(e.current=!0),0===n&&2!==r[1]&&(e.beforeGap=!0),n===r.length-1&&r[n]-r[n-1]>1&&(e.afterGap=!0),z.push(e)}}function p(){if(N.removeAll(),U())l(),V(!0),i.getInventoryTransferLines(L(),P(),!0,q(),B).then(function(e){e||(e={totalHits:0,lines:[]}),G(e.totalHits),J(e.lines.map(function(e){return e.itemId})),e.lines.forEach(function(e){b(e,!1)}),d(),V(!1)},function(){V(!1),r.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)});else{if(!L())return;R(!0),i.search(L()).then(function(e){e&&N(e)},function(){r.showError(e.local("storeTransfer.unexpectedError"),"#poReceivingMessage",5e3)})}}function m(){R(!1),U()||L(null),N.removeAll()}function f(){window.setTimeout(m,500)}function v(){q(0),D.removeAll(),C.removeAll(),O(null),_(null),R(!1),V(!0);var t=o.loadAllActiveAsync(),n=a.loadAllBusinessUnitsByEmployeeAsync();t.then(function(e){F(e)}),n.then(function(e){C(e)}),$.when(t,n).always(function(){V(!1),L()?L(null):U()&&p()}).fail(function(){r.showError(e.local("storeTransfer.unexpectedError"),"#poReceivingMessage",5e3)})}function g(t,n){t.sku=t.sku||e.computed(function(){var e=n.vendorSkus.filter(function(e){return e.vendorId===P()});return e&&e[0]?e[0].sku:null}),t.cost=t.cost||e.computed(function(){var e=n.vendorSkus.filter(function(e){return e.vendorId===P()});return e&&e[0]?e[0].cost:null});var r,a;0===t.quantityDecimalPlaces?(r=e.T("poReceiving.receivedIntegerQuantityError",null,[0,1e8]),a=!0):(r=e.T("poReceiving.receivedQuantityError",null,[0,1e8]),a=!1);var i=U()?0:1;t.inventoryType!==s.serialized&&(t.transferQuantity=t.child&&t.child.length>0?e.observable(0):e.observable(i).extend({number:!0,range:{message:r,params:{minValue:0,includeMinValue:!0,maxValue:1e8,onlyInteger:a}}}),t.newSerialNo=""),t.inventoryType===s.serialized&&(t.serials=e.observableArray(),t.newSerialNo=e.observable(),t.transferQuantity=e.computed(function(){return t.serials().length})),t.expanded=e.observable(!1),t.parent=n&&1===n.productType&&0===t.productType?n:null}function b(e){if(e){g(e,e);var t=D().map(function(e){return e.itemId}),t=D().map(function(e){return e.itemId}),n=t.indexOf(e.itemId);if(-1===n){if(D.push(e),e.child)for(var r=0,a=e.child.length;a>r;r++)g(e.child[r],e),D.push(e.child[r])}else{var i=D()[n];if(D.remove(i),D.push(i),e.child)for(var o,r=0,a=e.child.length;a>r;r++)o=D().filter(function(t){return t.itemId===e.child[r].itemId&&t.variantKey===e.child[r].variantKey})[0],o?(D.remove(o),D.push(o)):(g(e.child[r],i),D.push(e.child[r]))}}}function y(t){V(!0),i.getInventoryTransferLine(t.id,P(),!0).then(function(e){V(!1),b(e)},function(){V(!1),r.showError(e.local("storeTransfer.unexpectedError"),"#poReceivingMessage",5e3)})}function h(e){var t=null;if(null!=e.variantKey){for(var n=0;n<D().length;n++){var r=D()[n];r.itemId==e.itemId&&null!=r.child&&(r.child.splice(e,1),0==r.child.length&&(t=r))}t&&D.remove(t)}D.remove(e)}function T(){var t=e.toJS(D).filter(function(e){return"string"==typeof e.transferQuantity&&(e.transferQuantity=0===e.quantityDecimalPlaces?parseInt(e.transferQuantity):parseFloat(e.transferQuantity)),e.transferQuantity>0});if(t.forEach(function(e){e.parent=null,e.serials&&e.serials.length&&(e.serials=e.serials.map(function(e){return e.serialNo}))}),0===t.length)return r.showError(e.local("poReceiving.no_product_to_receive"),"#poReceivingMessage",5e3),void 0;var n={vendorId:P(),storeInId:O(),refNum:_(),inventoryTransferLines:t};V(!0),i.poReceiving(n).then(function(t){V(!1),t?(r.showMessage(e.local("poReceiving.poReceivingSuccess")+' <a href="#store-transfer-details/'+t+'">'+e.local("storeTransfer.details")+"</a>","#poReceivingMessage",1e4),U()?D().forEach(function(e){e.inventoryType===s.serialized?e.serials.removeAll():e.transferQuantity(0)}):D.removeAll(),_(null)):r.showError(e.local("storeTransfer.unexpectedError"),"#poReceivingMessage",5e3)},function(t){V(!1),r.showError(e.local(t.responseText||"storeTransfer.unexpectedError"),"#poReceivingMessage",5e3)})}function I(){var t=!0;D().forEach(function(e){t=t&&(e.inventoryType===s.serialized||!e.transferQuantity.isValid||e.transferQuantity.isValid())}),t&&r.showConfirmation(e.local("poReceiving.poReceivingConfirmationTitle"),e.local("poReceiving.poReceivingConfirmationMessage"),T)}function x(e){var t=e.filter(function(e){return e.businessUnitId===O()});return t&&t[0]?t[0].quantity:0}function S(e,t){return t.keyCode>=48&&t.keyCode<=57?!0:46===t.keyCode?e.quantityDecimalPlaces>0&&-1===t.target.value.indexOf("."):!1}function E(t){t.newSerialNo()&&(t.serials.push({serialNo:e.observable(t.newSerialNo())}),t.newSerialNo(""))}function w(e){this.serials.remove(e)}function A(e,t){return 13===t.keyCode&&($textBox=$(t.delegateTarget),$textBox.next().focus().click(),$textBox.focus()),!0}function M(e){return-1!==J().indexOf(e.itemId)}function k(e){e.expanded(!e.expanded())}var C=e.observableArray(),F=e.observableArray(),P=e.observable(),O=e.observable(),_=e.observable(),L=e.observable(null),j=!1,N=e.observableArray(),D=e.observableArray(),V=e.observable(!1),R=e.observable(!1),U=e.observable(u.poReceivingFullList).extend({rateLimit:500}),q=e.observable(0),B=200,G=e.observable(0),z=e.observableArray(),J=e.observableArray();return L.subscribe(function(e){window.clearTimeout(j),q(0),e?j=window.setTimeout(p,1e3):(N.removeAll(),U()&&(j=window.setTimeout(p,1e3)))}),U.subscribe(function(e){u.poReceivingFullList=e,u.saveFullList(),q(0),l(),e?p(L()):L(null)}),{activate:v,addLine:y,deleteRow:h,receive:I,cancelSearch:f,vendors:F,vendorId:P,stores:C,storeInId:O,refNum:_,searchString:L,foundProducts:N,inventoryTransferLines:D,isLoading:V,isSearchOpened:R,getStoreInQuantity:x,qtyKeyPress:S,extendLine:g,addSerial:E,removeSerial:w,onKeyPress:A,fullList:U,pagination:z,gotoPage:c,lineVisible:M,expandLine:k}});
define('viewmodels/popups/helpPopup',["knockout"],function(e){var t=e.observable(!0),n=e.observable(!1),r=function(e,t){n(!0),t.stopPropagation()},a=function(e,t){n(!1),t.stopPropagation()};return{showHelpPopupButton:t,helpPopupVisible:n,showHelpPopup:r,hideHelpPopup:a}});
define('viewmodels/popups/variantsHelpPopup',["knockout"],function(e){var t=e.observable(!1),n=e.observable(!1),r=function(e,t){n(!0),t.stopPropagation()},a=function(e,t){n(!1),t.stopPropagation()};return{activate:function(){var e=window.localStorage.getItem("prodType")||0;t(1==e)},showHelpPopupButton:t,helpPopupVisible:n,showHelpPopup:r,hideHelpPopup:a}});
define('viewmodels/quickbooks/quickbooksDisconnect',["knockout","moment","durandal/app","plugins/router","durandal/system","data/common","data/config","data/baseCommon","repositories/base/baseRepository","common/utils","services/userAgent"],function(e,t,n,r,a,i,o,s,u,l,c){function d(){}return $.extend(d.prototype,{name:"QuickbooksDisconnect",moduleId:"viewmodels/quickbooks/QuickbooksDisconnect",title:e.observable(e.T("shell.quickbooks-disconnect")),errorMessage:e.observable(!1),showError:function(e){this.errorMessage(e)},canActivate:function(){a.log(this.name+" canActivating");var e=new $.Deferred;return o.fetchConfig().then(function(){o.isQuickbooksApp?e.resolve(!0):(e.reject(""),setTimeout(function(){r.navigate("app-directory/quickbooks")},100))}),e.promise()},activate:function(t){a.log(this.name+" activating");var r=$.Deferred();return o.fetchConfig().then(function(){t||(t=o.enterpriseId);var a=$.ajax({type:"POST",url:"QB/Disconnect",async:!0});a.then(function(e){e.isSuccessful?o.reload().done(function(){n.trigger("app:quickbooksChanged"),r.resolve()}):(i.showError(e.errorMessage,"#quickbooksDisconnectMessage",5e3),r.resolve())},function(){r.resolve(),i.showError(e.T("quickbooks.error_occured"),"#quickbooksDisconnectMessage",5e3)})}),r.promise()},attached:function(){},deactivate:function(){a.log(this.name+" deactivating")},detached:function(){a.log(this.name+" detached")},close:function(){r.navigate("")},supportedBrowser:function(){return c.checkBrowserCompatibility()},yourBrowser:function(){return e.T("unsupported.qb_yourVersion",null,[c.browser,c.browserMajorVersion,c.os,c.osVersion])},binding:function(){return{cacheViews:!1,applyBindings:!0}}}),new d});
define('viewmodels/quickbooks/quickbooksLauncher',["knockout","plugins/router","data/config"],function(e,t,n){function r(){n.fetchConfig().then(function(){t.navigate("quickbooks")},function(){})}return{activate:r}});
define('models/QuickbooksSettingsModel',["knockout","durandal/system","data/baseCommon","models/base/baseModel"],function(e,t,n,o){var i=function(){i.superclass.constructor.apply(this,arguments)};return n.extend(i,o),$.extend(i.prototype,{name:"QuickbooksSettingsModel",options:{modelDesc:{entityType:"",entityName:"QuickbooksSettings"},properties:{id:null,isSyncPayinPayout:null,isSyncData:null,syncTime:null,bankDepositAccountId:null,assetAccountId:null,incomeAccountId:null,expenseAccountId:null,payinsAccountId:null,payoutsAccountId:null,accounts:[],bankAccounts:[],assetAccounts:[],incomeAccounts:[],expenseAccounts:[],times:[],isTokenExpired:null},validators:{payinsAccountId:{required:{message:e.T("quickbooks.field_is_required"),validateIf:function(){return this.isSyncPayinPayout()}}},payoutsAccountId:{required:{message:e.T("quickbooks.field_is_required"),validateIf:function(){return this.isSyncPayinPayout()}}},bankDepositAccountId:{required:{message:e.T("quickbooks.field_is_required")}},assetAccountId:{required:{message:e.T("quickbooks.field_is_required")}},incomeAccountId:{required:{message:e.T("quickbooks.field_is_required")}},expenseAccountId:{required:{message:e.T("quickbooks.field_is_required")}}},excludeFromSave:["accounts","bankAccounts","assetAccounts","incomeAccounts","expenseAccounts","times","isTokenExpired"]},initialize:function(e){i.superclass.initialize.call(this,e)}}),i});
define('viewmodels/quickbooks/quickbooksSettings',["knockout","moment","durandal/app","plugins/router","durandal/system","data/common","data/config","data/baseCommon","common/dateUtils","viewmodels/base/baseManageViewModel","models/QuickbooksSettingsModel","repositories/base/baseRepository","common/utils","services/userAgent"],function(e,t,n,r,a,i,o,s,u,l,c,d,p,m){function f(){f.superclass.constructor.apply(this,arguments),this.timestamp=(new Date).getTime()}return s.extend(f,l),$.extend(f.prototype,{name:"QuickbooksSettings",moduleId:"viewmodels/quickbooks/QuickbooksSettings",modelType:c,loading:e.observable(!1),title:e.observable(e.T("quickbooks.quickbooks")),updateTitle:!1,isSyncEnabled:e.observable(!0),errorMessage:e.observable(!1),showError:function(e){this.errorMessage(e)},showSettings:e.observable(!0),expandSettings:function(){this.showSettings(!this.showSettings())},initialize:function(){f.superclass.initialize.apply(this,arguments),this.repo.options.routeType=this.repo.routeType.routeTypeByEntityName,this.accounts=[],this.accountsRepo=new d({routeType:"ByEntityName",modelDesc:{entityName:"QuickbooksAccount"}}),this.setErrorsObservable()},activateAccounts:function(){var e=this;return e.accountsRepo.load({id:o.enterpriseId},function(t){return e.accounts=[],t&&(e.accounts=t.map(function(e){return{name:e.fullyQualifiedName,id:e.qbId,classification:e.classification,accountSubType:e.accountSubType,accountType:e.accountType}})),e.setAccountsToModel(),e.accounts},function(){setTimeout(function(){r.navigate("app-directory/quickbooks")},100)})},loadModelFailed:function(){setTimeout(function(){r.navigate("app-directory/quickbooks")},100)},canActivate:function(){a.log(this.name+" canActivating");var e=new $.Deferred;return o.fetchConfig().then(function(){o.isQuickbooksApp?e.resolve(!0):(e.reject(""),setTimeout(function(){r.navigate("app-directory/quickbooks")},100))}),e.promise()},activate:function(e){a.log(this.name+" activating");var t=this;return o.fetchConfig().then(function(){e||(e=o.enterpriseId);var n=f.superclass.activate.apply(t,[e]);return n.then(function(){return t.activateAccounts()})})},attached:function(){var t=this;if(f.superclass.attached.apply(this,arguments),a.log(this.name+" attached"),e.computed(function(){t.dataContext.resetValidationMessages()}).dispose(),t.dataContext().isTokenExpired()){var n=e.T("quickbooks.token_is_expired");this.showError(n)}t.makeSnaphsot()},setErrorsObservable:function(){var t=this;t.errorsObservable||(t.errorsObservable=e.computed(function(){var e=t.errors();if(e.length>0){var n=e.join("<br />");i.showError(n,"#quickbooksSettingsMessage",3e3)}return""}))},deactivate:function(){f.superclass.deactivate.apply(this,arguments),a.log(this.name+" deactivating"),this.clearSnaphsot()},detached:function(){f.superclass.detached.apply(this,arguments),a.log(this.name+" detached")},modelLoaded:function(){f.superclass.modelLoaded.apply(this,arguments)},isChanged:e.observable(!1),snapshot:{},watchData:["isSyncPayinPayout","isSyncData","syncTime","bankDepositAccountId","assetAccountId","incomeAccountId","expenseAccountId","payinsAccountId","payoutsAccountId"],makeSnaphsot:function(){var e=this;this.snapshot.data=this.snapshot.data||{},this.snapshot.subs=this.snapshot.subs||[];var t=function(){e.isChanged(!0)};this.snapshot.subs.forEach(function(e){e.dispose()}),this.snapshot.subs.length=0;var n=e.model.properties;this.watchData.forEach(function(r){e.snapshot.data[r]=n[r]();var a=n[r].subscribe(t);e.snapshot.subs.push(a)}),e.isChanged(!1)},restoreSnaphsot:function(){var t=this,n=t.model.properties;this.watchData.forEach(function(e){n[e](t.snapshot.data[e])}),e.computed(function(){t.dataContext.resetValidationMessages()}).dispose(),t.isChanged(!1)},clearSnaphsot:function(){var e=this;this.snapshot.subs=this.snapshot.subs||[],this.snapshot.subs.forEach(function(e){e.dispose()}),e.isChanged(!1)},cancelEdit:function(){this.restoreSnaphsot()},initModel:function(){},resolveComputedFields:function(e){e.resolve()},afterSave:function(){i.showMessage(e.T("quickbooks.settings_saved"),"#quickbooksSettingsMessage",3e3),this.makeSnaphsot()},refresh:function(){n.trigger("qb:journal:refresh")},disableSyncButton:function(){this.isSyncEnabled(!1)},enableSyncButton:function(){this.isSyncEnabled(!0)},startAutoRefresher:function(){var e,t=this,r=3e3,a=3e5,i=new Date,s=function(){var u=new Date;u-i>a?(clearTimeout(e),t.loading(!1),t.enableSyncButton(),t.activateAccounts(),n.trigger("qb:journal:refresh",{delay:0})):$.get("api/QuickbooksSync/GetSyncStatus/"+o.enterpriseId).then(function(n){"Completed"===n.status||"Failed"===n.status||"Cancelled"===n.status?(clearTimeout(e),t.activateAccounts(),t.loading(!1),t.enableSyncButton()):e=setTimeout(s,r)}).always(function(){n.trigger("qb:journal:refresh",{delay:0})})};e=setTimeout(s,r)},loadSettings:function(){var e=this;return e.fetchModel(o.enterpriseId)},reconnect:function(){var e=this,t=p.popupWindow("QB/DoConnect?tokenonly=1","QbToEhopper",800,600),n=setInterval(function(){return t.closed?(clearInterval(n),e.loadSettings()):void 0},300)},initialSync:function(){var t=this;return $.post("api/QuickbooksSync/InitialSync/"+o.enterpriseId).then(function(n){var r=n||"quickbooks.sync_finished";return i.showMessage(e.T(r),"#quickbooksSettingsMessage",3e3),t.loadSettings()},function(t){var n=t.responseJSON,r="";r=n&&n.message?e.T(n.message):e.T("quickbooks.error_occured"),i.showError(r,"#quickbooksSettingsMessage",2e4)})},syncAccounts:function(){var t=this;return $.post("api/QuickbooksSync/SyncAccounts/"+o.enterpriseId).then(function(n){var r=n||"quickbooks.sync_finished";return i.showMessage(e.T(r),"#quickbooksSettingsMessage",3e3),t.activateAccounts()},function(t){var n=t.responseJSON,r="";r=n&&n.message?e.T(n.message):e.T("quickbooks.error_occured"),i.showError(r,"#quickbooksSettingsMessage",2e4)})},restoreSync:function(){this.disableSyncButton(),$(".pane-body-wrapper").scrollTop(0),this.loading(!0),this.errors.removeAll(),this.startAutoRefresher()},sync:function(){var t=this;return t.disableSyncButton(),$(".pane-body-wrapper").scrollTop(0),t.loading(!0),t.errors([]),$.post("api/QuickbooksSync/Sync/"+o.enterpriseId).then(function(){t.startAutoRefresher()}).fail(function(n,r){t.loading(!1),t.enableSyncButton();var i=n.responseJSON,o="";if(i&&i.message){if(o=e.T(i.message),t.errors.push(o),i.modelState)for(var s in i.modelState)for(var u=i.modelState[s],l=0;l<u.length;l++)t.errors.push(u[l]),o+="; "+u[l];a.error(o)}else a.error(r)})},setAccountsToModel:function(){var t=this;t.accounts.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});var n=t.accounts.filter(function(e){return"Asset"===e.classification}),r=t.accounts.filter(function(e){return"Expense"===e.classification}),a=t.accounts.filter(function(e){return"Revenue"===e.classification}),i=t.accounts.filter(function(e){return"Bank"===e.accountType});n.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),r.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),a.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0}),i.sort(function(e,t){return e.name<t.name?-1:e.name>t.name?1:0});var o=t.accounts.slice(0);o.unshift({name:e.T("quickbooks.select_account"),id:""}),n.unshift({name:e.T("quickbooks.select_account"),id:""}),r.unshift({name:e.T("quickbooks.select_account"),id:""}),a.unshift({name:e.T("quickbooks.select_account"),id:""}),i.unshift({name:e.T("quickbooks.select_account"),id:""}),t.dataContext().accounts(o),t.dataContext().assetAccounts(n),t.dataContext().incomeAccounts(a),t.dataContext().expenseAccounts(r),t.dataContext().bankAccounts(i)},createModel:function(){var e=this;return f.superclass.createModel.apply(this,arguments).then(function(){for(var n=[],r=t.duration(0),a=0;48>a;){var i=t({hour:r.hours(),minute:r.minutes()});n.push({name:i.format("LT"),id:i.format("HH:mm:ss")}),r.add(30,"minutes"),a++}e.dataContext().times(n)})},supportedBrowser:function(){return m.checkBrowserCompatibility()},yourBrowser:function(){return e.T("unsupported.qb_yourVersion",null,[m.browser,m.browserMajorVersion,m.os,m.osVersion])},binding:function(){return{cacheViews:!1,applyBindings:!0}}}),new f});
define('viewmodels/quickbooks/syncJournalList',["jquery","knockout","durandal/app","plugins/router","durandal/system","plugins/dialog","data/baseCommon","data/common","data/config","common/numericUtils","common/dateUtils","viewmodels/base/baseListViewModel","models/base/entityTableRow","repositories/base/baseRepository","common/utils","viewmodels/quickbooks/quickbooksSettings"],function(e,t,n,r,a,i,o,s,u,l,c,d,p,m,f,v){function g(e){switch(e.entityType){case"Store":return"#store-settings/"+e.entityId;case"Department":return"#department/"+e.entityId;case"Category":return"#category/"+e.entityId;case"Vendor":return"#vendor/"+e.entityId;case"TaxAgency":return"#tax-agencies/tax-agency/"+e.entityId;case"Tax":return"#taxes/tax/"+e.entityId;case"Product":return"#product/"+e.entityId;case"Customer":return"#customer/"+e.entityId;case"Employee":return"#employee/"+e.entityId;default:return""}}function b(){this.sortOrder=[[0,"desc"]],b.superclass.constructor.apply(this,arguments)}var y={Started:0,Completed:1,Failed:2,Cancelled:3},h={"margin-left":(e(window).width()-400)/2+"px","margin-top":(e(window).height()-205)/2+"px","background-color":"#FFFFFF;",width:"750px"},T=function(t,n,r,a){this.options=t,this.autoclose=!0,this.settings=e.extend({},n),this.model=a,this.viewUrl=r,this.closeDialog=function(){i.close(this)},T.superclass.constructor.apply(this,arguments)};return f.extend(T,i.MessageBox),T.prototype.getView=void 0,o.extend(b,d),e.extend(b.prototype,{name:"syncJournalList",moduleId:"viewmodels/quickbooks/syncJournalList",listContainer:"#qbSyncJournal",title:t.observable(""),syncJournalList:t.observable(),defaults:{tableDefinition:{sAjaxDataProp:"",columns:[{data:"entity.syncTime"},{data:"entity.syncedEntities",render:function(e){return e>0?"<span>"+e+"</span>"+" - "+'<a class="" data-bind="click: actions.showDetails" >'+t.T("quickbooks.details")+"</a>":""}},{data:"entity.status",render:function(e){return e===y.Started?t.T("quickbooks.In Progress"):e===y.Completed?t.T("quickbooks.Completed"):e===y.Failed?t.T("quickbooks.Failed"):e===y.Cancelled?t.T("quickbooks.Cancelled"):t.T("quickbooks.Unknown")}},{data:"entity.errors",render:function(e){return e&&e.length>0?'<a class="fieldError" data-bind="click: actions.showErrors" >'+t.T("quickbooks.errors")+"</a>":""}}]}},initialize:function(){b.superclass.initialize.apply(this,arguments);var e=this;e.sortOrder=[[0,"desc"]],e.options.tableDefinition.order=e.sortOrder,e.repo=new m({routeType:"ByEntityName",modelDesc:{entityName:"QuickbooksSync"}})},deactivate:function(){b.superclass.deactivate.apply(this,arguments),a.log(this.name+" deactivate");var e=this;e.refreshSubscription&&(e.refreshSubscription.off(),e.refreshSubscription=null)},detached:function(){b.superclass.detached.apply(this,arguments),a.log(this.name+" detached");var e=this;e.refreshSubscription&&(e.refreshSubscription.off(),e.refreshSubscription=null)},activate:function(){b.superclass.activate.apply(this,arguments),a.log(this.name+" activating");var e=this;e.refreshSubscription=n.on("qb:journal:refresh").then(function(t){var n=t&&t.delay?t.delay:0;setTimeout(function(){e.refresh()},n)})},onAjaxLoad:function(n,r,a){var o=this;o.repo.load().then(function(n){if(!v.loading()&&e.isArray(n)&&0!==n.length){var r=n.filter(function(e){return 0===e.status});0!==r.length&&v.restoreSync()}var o=n.map(function(n){return new p({id:n.id,syncTime:c.formatDateTime(n.syncTime),syncedEntities:n.syncedStores+n.syncedTaxes+n.syncedVendors+n.syncedTaxAgencies+n.syncedLobs+n.syncedCategories+n.syncedItems+n.syncedAccounts+n.syncedSales+n.syncedRefunds+n.syncedPayins+n.syncedPayouts+n.syncedVoids,syncDetails:[{name:t.T("quickbooks.syncedStores"),count:n.syncedStores},{name:t.T("quickbooks.syncedTaxes"),count:n.syncedTaxes},{name:t.T("quickbooks.syncedTaxAgencies"),count:n.syncedTaxAgencies},{name:t.T("quickbooks.syncedLobs"),count:n.syncedLobs},{name:t.T("quickbooks.syncedCategories"),count:n.syncedCategories},{name:t.T("quickbooks.syncedItems"),count:n.syncedItems},{name:t.T("quickbooks.syncedVendors"),count:n.syncedVendors},{name:t.T("quickbooks.syncedAccounts"),count:n.syncedAccounts},{name:t.T("quickbooks.syncedSales"),count:n.syncedSales},{name:t.T("quickbooks.syncedRefunds"),count:n.syncedRefunds},{name:t.T("quickbooks.syncedPayins"),count:n.syncedPayins},{name:t.T("quickbooks.syncedPayouts"),count:n.syncedPayouts},{name:t.T("quickbooks.syncedVoids"),count:n.syncedVoids}],syncedStores:n.syncedStores,syncedTaxes:n.syncedTaxes,syncedTaxAgencies:n.syncedTaxAgencies,syncedVendors:n.syncedVendors,syncedLobs:n.syncedLobs,syncedCategories:n.syncedCategories,syncedItems:n.syncedItems,syncedAccounts:n.syncedAccounts,syncedSales:n.syncedSales,syncedRefunds:n.syncedRefunds,syncedPayins:n.syncedPayins,syncedPayouts:n.syncedPayouts,syncedVoids:n.syncedVoids,status:n.status,errors:n.errors},"QbSyncJournal",null,null,{showErrors:function(t,n){n.stopPropagation();var r=t.entity,a=r.errors.map(function(t){var n="";t.entityType&&(n+='Entity Type: "'+t.entityType+'"; '),t.entityName&&(n+="Entity Name: "+t.entityName+". ");var r=t.message?"."===t.message[t.message.length-1]?t.message:t.message+".":"";return r&&(n+=r),e.extend({},t,{message:n,entityLink:g(t)})}),o={errors:a,entityClick:function(){return i.close(this),!0}},s=new T([],{style:h},"views/quickbooks/errorsDialog.html",o);i.show(s)},showDetails:function(e,t){t.stopPropagation();var n=e.entity,r=new T([],{style:h},"views/quickbooks/syncedDetails.html",n);i.show(r)}})});return a&&a(o),o})},onAttached:function(){},onCreatedRow:function(){},refresh:function(){this.loadData()},binding:function(){return{cacheViews:!1,applyBindings:!0}}}),b});
define('viewmodels/registerSettings/newRegister',["knockout","plugins/router","plugins/dialog","repositories/businessUnitRepository","repositories/registerRepository","data/config"],function(e,t,n,r,a,i){function o(){i.fetchConfig().then(function(e){2!==e.planCode&&t.navigate("registerSettings"),p(1==e.planCode),p(!(2===e.planCode||3===e.planCode))}),l(e.local("registerSettings/newRegister.defaultRegisterName")),d.removeAll(),m(""),f(!0),r.loadStores().then(function(e){f(!1),d(e)},function(){f(!1),m(e.local("registerSettings/newRegister.unexpectedError"))})}function s(){m(""),l()&&c()&&(f(!0),a.newRegister(l(),c()).then(function(){f(!1),n.show(new n.MessageBox(e.local("registerSettings/newRegister.receiveNotification"),e.local("registerSettings/newRegister.requestSubmited"),[{text:"OK",value:!0}],!0,{"class":"new-register-popup"})).then(function(){f(!0),u()})},function(t){f(!1),t&&t.responseJSON&&t.responseJSON.message&&m(e.local(t.responseJSON.message)),t&&t.responseText?m(e.local(t.responseText)):m(e.local("registerSettings/newRegister.unexpectedError"))}))}function u(){t.navigate("registerSettings")}var l=e.observable().extend({required:!0}),c=e.observable().extend({required:!0}),d=e.observableArray(),p=e.observable(!1),m=e.observable(),f=e.observable(!1);return{activate:o,registerName:l,businessUnitId:c,stores:d,isLoading:f,done:s,cancel:u,errorMessage:m,isEssentialPlan:p}});
define('viewmodels/registerSettings/register-settings-tabs/general',["knockout","plugins/dialog","data/common","data/config","repositories/employeeRepository","repositories/presentationApi/registersRepository","data/permissions"],function(e,t,n,r,a,i,o){function s(t){var n=this;n.adminPermissionGranted=e.observable(o.hasPermission("ADM")),n.id=t.id(),n.businessUnitId=t.businessUnitId(),n.businessUnitCountryId=t.businessUnitCountryId(),l(r.isControlNumberApp&&"PR"==n.businessUnitCountryId),n.allRegister=t.allRegisters(),n.name=e.observable(t.name()).extend({required:!0,uniqueName:{params:{array:Enumerable.From(n.allRegister).Select(function(e){return e.id()!=n.id&&e.businessUnitId()===n.businessUnitId?e.name():""}).ToArray()},message:e.T("registerSettings/registerSettingsManage.register_with_this_name_already_exists_please_select_another_name_for_the_register")}}),n.isActive=e.observable(t.isActive()),n.isBlocked=e.observable(t.isBlocked()),n.registerNumber=e.observable(t.registerNumber()).extend({number:!0,min:0,max:255,uniqueName:{params:{array:Enumerable.From(n.allRegister).Select(function(e){return e.id()!=n.id&&e.businessUnitId()===n.businessUnitId?e.registerNumber():""}).ToArray()},message:e.T("registerSettings/registerSettingsManage.register_number_must_be_unique")}}),n.storeName=t.stores().filter(function(e){return e.id===n.businessUnitId})[0].name,n.allEmployees=t.allEmployees(),n.assignedOnlyEmployees=t.employees().slice(),n.employeesList=e.observableArray(n.allEmployees),n.selectedEmployees=e.observableArray(t.employees().slice()),n.showAssignedOnlyEmployees=e.observable(!1),n.showAssignedOnlyEmployees.subscribe(function(e){e?$(".ms-drop").addClass("show-checked-only"):$(".ms-drop").removeClass("show-checked-only")}),n.allDevices=t.allDevices(),n.devicesList=e.observableArray(n.allDevices),n.assignedOnlyDevices=t.devices().slice(),n.selectedDevices=e.observableArray(t.devices().slice()),n.properties=t.properties,r.isControlNumberApp&&!n.properties.controlNumberToken&&(n.properties.controlNumberToken=e.observable(""),n.properties=e.mapping.fromJS(n.properties)),n.deviceSerialNumber=e.computed(function(){return n.selectedDevices().length>0?n.selectedDevices()[0].deviceAddress():""}),n.showAssignedOnlyDevices=e.observable(!1),n.showAssignedOnlyDevices.subscribe(function(e){if(e){var t=Enumerable.From(n.selectedDevices()).Where(function(e){return Enumerable.From(n.assignedOnlyDevices).All(function(t){return t.id()!=e.id()})}).ToArray();t.forEach(function(e){n.selectedDevices.remove(e)}),n.devicesList(n.assignedOnlyDevices)}else n.devicesList(n.allDevices)}),n.generalTabErrors=e.validation.group(n),n.fillRegisterModel=function(e){e.id(n.id),e.name(n.name()),e.registerNumber(n.registerNumber()),e.businessUnitId(n.businessUnitId),e.isActive(n.isActive()),e.isBlocked(n.isBlocked());var t=Enumerable.From(n.selectedEmployees()).Select(function(e){return Enumerable.From(n.allEmployees).SingleOrDefault(null,function(t){return t.id()==e.id()})});e.employees(t);var r=Enumerable.From(n.selectedDevices()).Select(function(e){return Enumerable.From(n.allDevices).SingleOrDefault(null,function(t){return t.id()==e.id()})});return e.devices(r),e.properties=n.properties,e}}var u=e.observable(),l=e.observable(!1),c=e.observable(!1),d={loading:c,model:u,fill:function(e){this.model(new s(e))},isControlNumberEnabled:l,unblock:function(){this.model().isBlocked()&&this.model().isBlocked(!1)},activate:function(){return r.fetchConfig()},deactivate:function(r){t.showMessage(e.T("registerSettings/registerSettingsManage.deactivateConfirmText"),e.T("registerSettings/registerSettingsManage.deactivateConfirmTitle"),[{text:e.T("common.ok"),value:1},{text:e.T("common.cancel"),value:0}],!0,{primaryButtonClass:"btn-red",secondaryButtonClass:"autofocus"}).then(function(t){1===t&&(c(!0),i.deactivate(r.id).then(function(t){t===!0?(n.showMessage(e.T("registerSettings/registerSettingsManage.deactivateSuccess"),"#registerGeneralMessage",5e3),r.selectedDevices()[0].deviceAddress(null)):n.showError(e.T("registerSettings/registerSettingsManage.deactivateError"),"#registerGeneralMessage",5e3),c(!1)},function(){n.showError(e.T("registerSettings/registerSettingsManage.deactivateError"),"#registerGeneralMessage",5e3),c(!1)}))})},employeesMultipleSelectOptions:{vendorPlaceholder:e.T("registerSettings/registerSettingsManage.search_or_choose_employee(s)"),itemId:"id",createNewArrItem:a.createNew}};return d});
define('viewmodels/registerSettings/register-settings-tabs/localization',["knockout","data/permissions"],function(e,t){function n(n){var r=this;r.enabled=t.hasPermission("ADM"),r.posLanguageId=e.observable(n.posLanguageId()),r.kitchenReceiptLanguageId=e.observable(n.kitchenReceiptLanguageId()),r.languages=e.observableArray(n.languages()),r.dateFormatId=e.observable(n.dateFormatId()),r.dateFormats=e.observableArray(n.dateFormats()),r.timeFormatId=e.observable(n.timeFormatId()),r.timeFormats=e.observableArray(n.timeFormats()),r.errors=e.validation.group(r),r.fillRegisterModel=function(e){return e.posLanguageId(r.posLanguageId()),e.kitchenReceiptLanguageId(r.kitchenReceiptLanguageId()),e.dateFormatId(r.dateFormatId()),e.timeFormatId(r.timeFormatId()),e}}var r=e.observable();return{model:r,fill:function(e){r(new n(e))}}});
define('viewmodels/registerSettings/register-settings-tabs/paymentGateway',["knockout","data/permissions","data/config"],function(e,t,n){function r(e){4===n.config.planCode&&(e.paymentGatewayTypeCode(2),e.enabled=!1)}function a(a){var i=this;i.enabled=t.hasPermission("ADM"),i.paymentGatewayTypeCode=e.observable(a.paymentGatewayTypeCode()),i.paymentGatewaySourceKey=e.observable(a.paymentGatewaySourceKey()),i.paymentGatewayPin=e.observable(a.paymentGatewayPin()),i.debitCardEnabled=e.observable(a.debitCardEnabled()),i.ebtCardEnabled=e.observable(a.ebtCardEnabled()),i.allPaymentGatewayTypes=a.allPaymentGatewayTypes(),r(i),i.ebtVisible=e.computed(function(){return 2==i.paymentGatewayTypeCode()&&n.ebtCardApp}),i.errors=e.validation.group(i),i.fillRegisterModel=function(e){return e.paymentGatewayTypeCode(i.paymentGatewayTypeCode()),e.paymentGatewaySourceKey(i.paymentGatewaySourceKey()),e.paymentGatewayPin(i.paymentGatewayPin()),e.debitCardEnabled(i.debitCardEnabled()),e.ebtCardEnabled(i.ebtCardEnabled()),r(e),e}}var i=e.observable();return{model:i,fill:function(e){i(new a(e))}}});
define('viewmodels/registerSettings/registerSettingsManage',["knockout","plugins/router","durandal/system","data/baseCommon","viewmodels/base/baseManageViewModel","repositories/presentationApi/registersRepository","repositories/deviceRepository","data/common","data/config","viewmodels/registerSettings/register-settings-tabs/general","viewmodels/registerSettings/register-settings-tabs/localization","viewmodels/registerSettings/register-settings-tabs/paymentGateway"],function(e,t,n,r,a,i,o,s,u,l,c,d){function p(){p.superclass.constructor.apply(this,arguments)}var m,f="registerSettings";return require(["viewmodels/stores/storeSettings"],function(e){m=e}),r.extend(p,a),$.extend(p.prototype,{name:"RegisterManage",moduleId:"viewmodels/registerSettings/registerSettingsManage",title:e.observable(e.T("registerSettings/registerSettingsManage.new_register_setting")),departmentsList:e.observableArray(),tabControl:null,containerSelector:"div.pane-right div.register-settings-form",cardPaymentInstalled:e.observable(),initialize:function(){p.superclass.initialize.apply(this,arguments)},activate:function(e){e=e||"",p.superclass.activate.apply(this,arguments),n.log(this.name+" activating");var t=this;return u.fetchConfig().then(function(e){t.cardPaymentInstalled(e.isCardPaymentApp)})},attached:function(){s.showLoader(this.containerSelector),p.superclass.attached.apply(this,arguments),n.log(this.name+" attached"),this.setupTabs()},deactivate:function(){p.superclass.deactivate.apply(this,arguments),n.log(this.name+" deactivating")},detached:function(){p.superclass.detached.apply(this,arguments),n.log(this.name+" detached")},show:function(e){f=location.hash,e?t.navigate("registerSetting/"+e):t.navigate("registerSetting")},close:function(){"#store"===f.substr(0,6)&&m&&m.setDefaultTabIdx(this.cardPaymentInstalled()?7:6),t.navigate(f)},validate:function(){var e=!0,t=[l,c,d];this.cardPaymentInstalled()||t.splice(2,1);for(var n=0;n<t.length;n++){var r=t[n],a=r.model();0!=a.errors().length||a.validationModel&&!a.validationModel.isValid()?(this.tabControl.setTabErrors(n),a.errors.showAllMessages(),e=!1):this.tabControl.clearTabErrors(n)}return e},save:function(){var e=this;e.validate()&&i.createNew().then(function(t){l.model().fillRegisterModel(t),c.model().fillRegisterModel(t),d.model().fillRegisterModel(t),i.save(t).then(function(t){t&&e.close()})})},cancel:function(){this.close()},createNewModel:function(){this.model=e.observable(i.createNew())},createModel:function(t){var n,r=this;t?(r.title(e.T("registerSettings/registerSettingsManage.edit_register_setting")),n=i.loadById(t)):(r.title("New Register Setting"),n=i.loadById("")),n.then(function(e){l.fill(e),c.fill(e),d.fill(e),s.showRightPanelContent(r.containerSelector)})},devicesMultipleSelectOptions:{vendorPlaceholder:e.T("registerSettings/registerSettingsManage.search_or_choose_device(s)"),itemId:"id",createNewArrItem:o.createNew,single:!0},setupTabs:function(){var t=[{name:e.T("registerSettings/registerSettingsManage.general"),containerSelector:"#generalTab"},{name:e.T("registerSettings/registerSettingsManage.localization"),containerSelector:"#localizationTab"},{name:e.T("registerSettings/registerSettingsManage.payment_gateway"),containerSelector:"#paymentGatewayTab"}];this.cardPaymentInstalled()||t.splice(2,1),this.tabControl=$(".register-settings-tabs").tabControl({tabs:t})}}),new p});
define('viewmodels/registerSettings/registerSettingsList',["knockout","plugins/router","plugins/dialog","repositories/registerRepository","repositories/presentationApi/registersRepository","data/common","data/config","viewmodels/registerSettings/registerSettingsManage","services/dataTableText","viewmodels/controls/storesFilter","services/demo"],function(e,t,n,r,a,i,o,s,u,l,c){function d(t){var n=this;n.registerSetting=e.observable(t),n.rowNum=e.observable(),n.edit=function(){s.show(n.registerSetting().id)}}function p(e){b=e,i.showLoader(h),v()}function m(){return w.initialize()}function f(){null!=y&&y.ajax.reload()}function v(){o.getEnterpriseId().then(function(t){y=$("#registerSettingsTable",b).DataTable({processing:!0,serverSide:!0,info:!1,paging:!0,lengthChange:!1,language:u.getLanguage(),autoWidth:!1,ajax:function(n,r){e.computed(function(){n.stores=S(),E=S().map(function(e){return e.id()}).join(",")}).dispose(),I(!0),$("#registerSettingsTable_processing").hide(),a.loadAll("POST",{enterpriseId:t,pagingRequest:n},!0).then(function(e){var t=Enumerable.From(e.data).Select(function(e){return new d(e)}).ToArray();e.data=t,r(e)}).always(function(){I(!1)})},columns:[{data:"registerSetting()",render:function(t){var n=Enumerable.From(t.employees).Select(function(e){return e.fullName}).ToArray().join(", ");return $("<b>").text(t.name).prop("outerHTML")+$("<p>").addClass("register-settings-employees-list").text(e.T("registerSettings/registerSettingsList.employees_")+n).prop("outerHTML")}},{data:"registerSetting().businessUnitName"},{data:"registerSetting().isActive",render:function(t){return 1==t?e.T("registerSettings/registerSettingsList.active"):e.T("registerSettings/registerSettingsList.inactive")},sWidth:"150px",bSearchable:!1,bSortable:!1}],order:x,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:n.registerSetting().id}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]},initComplete:function(){i.showRightPanelContent(h)}}),0!==T&&y.page(T).draw(!1),y.on("page",function(){T=y.page.info().page}),y.on("order",function(){x[0][0]=y.order()[0][0],x[0][1]=y.order()[0][1]}),new $.fn.DataTable.SearchFilter(y)})}function g(){o.fetchConfig().then(function(r){if(2===r.planCode)t.navigate("new-register");else{var a="";o.isDemo&&(window.goFreedom=c.goFreedom,a='onclick="return goFreedom();" '),n.show(new n.MessageBox(e.local("messages.pleaseContactUs")+"<br />"+"<a href='https://ehopper.com/freedom/' "+a+" class='btn btn-lg btn-success btn-upgrade-inline' target='_blank'>"+e.local("upgrade.dialogTitle")+"</a>",e.local("messages.mustFreedomPlan"),[{text:"OK",value:!0}],!0,{"class":"plan-warning-popup"}))}})}var b,y,h="div.pane-right > div.resiter-settings",T=0,I=e.observable(!1),x=[[0,"asc"]],S=e.observableArray([]),w=new l(S),E="";S.subscribe(function(e){var t=e.map(function(e){return e.id()}).join(",");t!==E&&(E=t,f())});var A={attached:p,activate:m,loading:I,newRegister:g,storesFilter:w,RegisterSettingsTableRow:d};return A});
define('viewmodels/reports/agingReport',["knockout","jquery","data/common","repositories/departmentsRepository","repositories/categoriesRepository","viewmodels/controls/storesFilter","services/text","services/dataTableText","common/numericUtils","common/dateUtils"],function(e,t,n,r,a,i,o,s,u,l){function c(){b&&(window.clearTimeout(k),k=window.setTimeout(b.ajax.reload,1e3))}function d(){A(""),T(null),x(null),y(!1)}function p(e,n){var r=t.post("api/Products/GetAgingReport",{lang:o.getLang().toUpperCase(),defaultLang:o.getDefaultLang().toUpperCase(),search:A(),stores:w().map(function(e){return e.id()}),lobId:T(),categoryId:x(),orderColumn:e.order[0].column,orderDir:"desc"===e.order[0].dir?1:0,start:e.start,length:e.length});return r.then(function(e){"function"==typeof n&&n(e)}),r}function m(){b=t("#agingReportTable").DataTable({processing:!0,serverSide:!0,ajax:p,info:!1,paging:!0,lengthChange:!1,language:s.getLanguage(),autoWidth:!1,columns:[{data:"productCode",sWidth:"80px"},{data:"itemName"},{data:"lobName"},{data:"categoryName"},{data:"businessUnitName"},{data:"serialNo"},{data:"cost",render:function(e){return null===e||void 0===e?"":u.formatCurrency(e)}},{data:"price",render:function(e){return u.formatCurrency(e)}},{data:"creationDate",render:function(e){return l.formatDateTime(e)}},{data:"age"}],order:C}),b.on("page",function(){M=b.page.info().page}),b.on("order",function(){C[0][0]=b.order()[0][0],C[0][1]=b.order()[0][1]})}function f(){h.removeAll(),I.removeAll(),t.when(r.loadAllAsync(),a.loadAllAsync()).then(function(e,t){h(e.filter(function(e){return e.isActive()}).map(function(e){return{id:e.id(),name:e.name()}})),I(t.filter(function(e){return e.isActive()}).map(function(e){return{id:e.id(),name:e.name(),lobId:e.lobId()}})),d()},function(){n.showError(e.local("agingReport.unexpectedError"),"#agingReportMessages",5e3),d()})}function g(){m()}function v(){var t="﻿";t+="ID,Item,Department,Category,Store,Serial #,Cost,Price,Received,Age(Days)";var r={order:[{column:C[0][0],dir:C[0][1]}],start:0,length:999999};y(!0);var a=p(r);a.then(function(e){e.data.forEach(function(e){t+="\r\n"+e.productCode+","+o.csvEscape(e.itemName)+","+o.csvEscape(e.lobName)+","+o.csvEscape(e.categoryName)+","+o.csvEscape(e.businessUnitName)+","+o.csvEscape(e.serialNo)+',"'+u.formatCurrency(e.cost)+'","'+u.formatCurrency(e.price)+'",'+l.formatDateTime(e.creationDate)+","+e.age});var n="InventoryAgingReport.csv",r=document.getElementById("agingReportLink"),a=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(a);y(!1),t=null,r.href=i,r.download=n,r.click(),window.URL.revokeObjectURL(i)},function(){y(!1),n.showError(e.local("storeTransfer.unexpectedError"),"#agingReportMessages",5e3)})}var b,y=e.observable(!0),h=e.observableArray(),T=e.observable(),I=e.observableArray(),S=e.computed(function(){return T()?I().filter(function(e){return e.lobId===T()}):I()}),x=e.observable(),w=e.observableArray().extend({rateLimit:500}),E=new i(w),A=e.observable().extend({rateLimit:500}),k=!1,M=0,C=[[0,"asc"]];return E.initialize().fail(function(){n.showError(e.local("agingReport.unexpectedError"),"#agingReportMessages",5e3)}),A.subscribe(c),w.subscribe(c),T.subscribe(c),x.subscribe(c),{loading:y,storesFilter:E,activate:f,attached:g,departments:h,categories:S,lobId:T,categoryId:x,searchString:A,exportTableData:v}});
define('viewmodels/reports/clockIn',["knockout","plugins/router","data/common","repositories/clockInRepository","data/config","common/numericUtils","repositories/base/baseRepository","services/text","moment","models/dateSpan","services/dataTableText","common/dateUtils","viewmodels/controls/storesFilter"],function(e,t,n,r,a,i,o,s,u,l,c,d,p){function m(e){var t=this;a.getEnterpriseId().then(function(){n.showLoader(x),t.filter.initialize().then(function(t){t[0].then(function(e){allRegisters=e}),y(e)}),$(".button-dropdown",e).buttonDropDown()})}function f(){function t(e,t,n){var r=new o({modelDesc:{entityType:"Business",entityName:e}});return r.load({id:a.enterpriseId}).then(function(e){return n&&n(e),t(e),e})}var r=this;r.employeeId=e.observable(""),r.employees=e.observableArray(),r.registerId=e.observable(""),r.registers=e.observableArray(),r.stores=e.observableArray(),r.storeLoaded=!1,r.storesFilter=new p(r.stores,!0,!0),r.dateRange=e.observable(new l(u().startOf("day"),u().endOf("day"),e.T("date-filter/date-filter.today"))),r.dateRange.subscribe(function(){r.apply()}),r.apply=function(){r.storeLoaded&&k&&k.ajax.reload(function(){n.showRightPanelContent(x)})},r.initialize=function(){return $.when([t("RegisterByEnterprise",r.registers),t("EmployeeByEnterprise",r.employees,r.cutValue)])},r.cutValue=function(e){for(var t=0;t<e.length;t++)e[t].firstName&&(e[t].nameForShow=e[t].firstName+" "+e[t].lastName,e[t].nameForShow.length>11&&(e[t].nameForShow=e[t].nameForShow.substring(0,11)+"..."))},r.exportTableData=function(){return loadDataForReport=!0,k.ajax.reload(),!1},r.loading=w}function g(t){var n,r,a,i;e.computed(function(){n=E.registerId(),r=E.employeeId(),a=E.dateRange(),i=E.stores()}).dispose();var o={startDate:a&&a.dateFrom&&a.dateFrom.isAfter("2010-01-01")?a.dateFromString():null,endDate:a&&a.dateTo&&!a.dateTo.isAfter()?a.dateToString():null,registerId:n,employeeId:r,stores:i};return $.extend({},t,o)}function v(){var t=this;t.clockInId=e.observable(),t.employee=e.observable(),t.clockInTime=e.observable(),t.clockInRegister=e.observable(""),t.clockOutId=e.observable(),t.clockOutTime=e.observable(),t.clockOutRegister=e.observable(),t.hours=e.computed(function(){if(!t.clockInTime()||!t.clockOutTime())return"0:00";var e=parseInt(Math.abs(new Date(t.clockInTime())-new Date(t.clockOutTime()))/6e4),n=parseInt(e/60),r=parseInt(e%60);return 10>r&&(r="0"+r),n+":"+r}),t.trackChanges=e.observable(!0),t.employyeError=e.observable(""),t.registerInError=e.observable(""),t.registerOutError=e.observable(""),t.clockInTimeError=e.observable(""),t.clockOutTimeError=e.observable(""),t.skipOne=e.observable(!1);var a=function(){if(t.trackChanges()){if(t.skipOne())return t.skipOne(!1),void 0;var a=!0;if(t.employee()?t.employyeError(""):(t.employyeError(e.T("reports/productMixReport.employeeError")),a=!1),t.clockInRegister()&&!t.clockInTime()?(t.registerInError(e.T("reports/productMixReport.registerInError")),t.skipOne(!0),t.clockInRegister(null),a=!1):t.registerInError(""),t.clockOutRegister()&&!t.clockOutTime()?(t.registerOutError(e.T("reports/productMixReport.registerOutError")),t.skipOne(!0),t.clockOutRegister(null),a=!1):t.registerOutError(""),!a)return;r.save(t,E).then(function(){t.employee()&&(t.clockInTime()||t.clockOutTime())&&k.ajax.reload(function(){n.showRightPanelContent(x)})})}};t.employee.subscribe(a),t.clockInTime.subscribe(a),t.clockInRegister.subscribe(a),t.clockOutTime.subscribe(a),t.clockOutRegister.subscribe(a),t.deleteRow=function(){n.showConfirmation(void 0,e.T("reports/productMixReport.confirmDelete"),function(){r.deleteItem(t).then(function(){k.ajax.reload(function(){n.showRightPanelContent(x)})})})},t.toPlainObject=function(){var n=["clockInId","employee","clockInTime","clockInRegister","clockOutId","clockOutTime","clockOutRegister","hours"];return JSON.parse(e.toJSON(t,n))}}function b(t){loadDataForReport=!1;var n={},r=["employeeName","clockInTime","clockOutTime","clockInRegisterName","clockOutRegisterName","hours"],a=[];$("#productMixReportTable > thead > tr > th").each(function(e,t){var a=$(t).text().trim();a&&(n[a]=r[e])}),$("#productMixReportTable > tfoot > tr > th").each(function(e,t){var n=$(t).text().replace("&nbsp;","").trim();n&&a.push($(t).text())}),t.data=t.data.map(function(t){return t.employeeName=t.employee?e.utils.arrayFirst(E.employees(),function(e){return t.employee===e.id}).fullName:"",t.clockInTime=t.clockInTime?d.formatDateTime(t.clockInTime):"",t.clockInRegisterName=t.clockInRegister?e.utils.arrayFirst(E.registers(),function(e){return t.clockInRegister===e.id}).name:"",t.clockOutTime=t.clockOutTime?d.formatDateTime(t.clockOutTime):"",t.clockOutRegisterName=t.clockOutRegister?e.utils.arrayFirst(E.registers(),function(e){return t.clockOutRegister===e.id}).name:"",t.hours=(t.hours/60).toFixed(2),t}),k.exportData({data:t.data,columnsCount:r.length,columns:n,totalRow:a,fileNamePrefix:"time-clock-report-"})}function y(e){var t;k=$("#productMixReportTable",e).DataTable({language:c.getLanguage(),processing:!0,serverSide:!0,iDisplayLength:20,ajax:function(e,n){M++,loadDataForReport&&(e.start=0,e.length=0),w(!0),$("#productMixReportTable_processing").hide(),r.loadAllAsync(g(e),M).then(function(e){if(M==e.searchNum){if(loadDataForReport)b(e);else{if(t=e.total,A([]),e.data){for(var r=[],a=0;a<e.data.length;a++){var i=e.data[a],o=v.createFromItem(i);A.push(o)}e.data=r}n({data:new Array,recordsTotal:t.recordsTotal,recordsFiltered:t.recordsTotal})}w(!1)}})},footerCallback:function(){var e=this.api(),n=parseInt(Math.round(60*t.total/100)),r=parseInt(n/60),a=parseInt(n%60);10>a&&(a="0"+a);var i=r+":"+a;$(e.column(5).footer()).text(i)},info:!1,paging:!0,lengthChange:!1,autoWidth:!1,columns:[{data:"employee",sWidth:"40px"},{data:"productCode",sWidth:"40px"},{data:"productCode",sWidth:"40px"},{data:"productCode",sWidth:"40px"},{data:"productCode",sWidth:"40px"},{data:"productCode",sWidth:"20px"},{data:null,sWidth:"10px",sClass:"center no-padding",bSortable:!1,bSearchable:!1}],order:sortOrder,initComplete:function(){n.showRightPanelContent(x)}}),0!==S&&k.page(S).draw(!1),new $.fn.DataTable.SearchFilter(k),k.on("page",function(){S=k.page.info().page}),k.on("order",function(){sortOrder[0][0]=k.order()[0][0],sortOrder[0][1]=k.order()[0][1]})}function h(){A.push(new v)}function T(){var e=E.stores().map(function(e){return e.id()}),t=allRegisters.filter(function(t){return-1!==e.indexOf(t.businessUnitId)});E.registers(t),E.registerId("")}function I(){maxDate(new Date);var e=this;e.filter.stores([]),e.filter.storesFilter.initialize().then(function(){e.filter.storeLoaded=!0,e.filter.apply(),e.filter.storesFilter.storeChanged.subscribe(function(){T(),e.filter.apply()})})}var x="div.pane-right > div.inventory",S=0,w=e.observable(!1),E=new f,A=e.observableArray(),k=null,M=0;return sortOrder=[[1,"asc"]],loadDataForReport=!1,allRegisters=[],maxDate=e.observable(!1),v.createFromItem=function(e){var t=new v;return t.trackChanges(!1),t.clockInId(e.clockInId),t.employee(e.employee),t.clockInTime(e.clockInTime),t.clockInRegister(e.clockInRegister),t.clockOutId(e.clockOutId),t.clockOutTime(e.clockOutTime),t.clockOutRegister(e.clockOutRegister),t.trackChanges(!0),t},{filter:E,applyFilters:E.apply,attached:m,router:t,rows:A,addRecord:h,loading:w,activate:I,maxDate:maxDate}});
define('viewmodels/reports/productMixReport',["jquery","knockout","plugins/router","data/common","repositories/productMixReportRepository","data/config","common/numericUtils","repositories/categoriesRepository","repositories/departmentsRepository","repositories/base/baseRepository","services/text","moment","models/dateSpan","services/dataTableText","viewmodels/controls/storesFilter"],function(e,t,n,r,a,i,o,s,u,l,c,d,p,m,f){function g(t){var n=this;i.getEnterpriseId().then(function(){r.showLoader(w),I(t,n),n.filter.initialize(),e(".button-dropdown",t).buttonDropDown()})}function v(){M.ajax.reload(function(){r.showRightPanelContent(w)})}function b(){function n(){return u.loadAllAsync().then(function(e){a.departments(window.Enumerable.From(e).Where(function(e){return e.isActive()}).ToArray())})}function r(e,t){var n=new l({modelDesc:{entityType:"Business",entityName:e}});return n.load({id:i.enterpriseId}).then(function(e){t(e)})}var a=this;a.departmentId=t.observable(""),a.departments=t.observableArray(),a.categoryId=t.observable(""),a.categories=t.observableArray(),a.employeeId=t.observable(""),a.employees=t.observableArray(),a.registerId=t.observable(""),a.registers=t.observableArray(),a.stores=t.observableArray(),a.storeLoaded=!1,a.storesFilter=new f(a.stores),a.dateRange=t.observable(new p(d().startOf("day"),d().endOf("day"),t.T("date-filter/date-filter.today"))),a.dateRange.subscribe(function(){a.apply()}),a.apply=function(){a.storeLoaded&&null!=M&&(clearTimeout(L),L=window.setTimeout(v,200))},a.initialize=function(){return e.when([n(),a.loadCategories(),r("RegisterByEnterprise",a.registers),r("EmployeeByEnterprise",a.employees)])},a.loadCategories=function(){return s.loadAllAsync().then(function(e){a.categories(window.Enumerable.From(e).Where(function(e){return e.isActive()&&(e.lobId()==a.departmentId()||""==a.departmentId())}).ToArray())})},a.exportTableData=function(){return P=!0,M.ajax.reload(),!1},a.loading=A}function y(n,r){var a,i,o,s,u,l;t.computed(function(){i=k.categoryId(),a=k.departmentId(),o=k.registerId(),s=k.employeeId(),u=k.dateRange(),l=k.stores()}).dispose();var c={startDate:u&&u.dateFrom&&u.dateFrom.isAfter("2010-01-01")?u.dateFromString():null,endDate:u&&u.dateTo&&!u.dateTo.isAfter()?u.dateToString():null,categoryId:i,departmentId:a,registerId:o,employeeId:s,stores:l};return r&&(c.start=0,c.length=0),e.extend({},n,c)}function h(t){P=!1,A(!1);var n={},r=[];e("#productMixReportTable > thead > tr > th").each(function(t,r){n[e(r).text()]=O[t]}),e("#productMixReportTable > tfoot > tr > th").each(function(t,n){r.push(e(n).text())}),r[1]=t.total.minQuantity,r[2]=t.total.quantity,r[3]=t.total.quantitySold,r[4]=t.total.sold,r[5]=t.total.netSales,r[6]=t.total.salesTax,M.exportData({data:t.data,columnsCount:O.length,columns:n,totalRow:r,fileNamePrefix:"product-mix-report-"})}function T(t,n){if(1===t.productType||1===t.inventoryType){var r=M.row(n.currentTarget);if(1===t.productType)if(t.isOpen)e(r.node()).removeClass("open"),r.child(a).hide(),t.isOpen=!1;else{e(r.node()).addClass("open");for(var a='<table id="child'+t.productCode+'" class="datatable mix-report-variants">',i=0;i<t.child.length;i++){var s=t.child[i];a+="<tr>";for(var u=0;u<O.length;u++){var l="",c=u>=O.length-3?o.formatCurrency(s[O[u]]):s[O[u]],l=u>=O.length-6?' class="numeric-data" ':"";0==u?(c='<div class="variant-child">&nbsp;</div>',l+=' style="width:120px;vertical-align:top" '):l+=' style="width:'+n.currentTarget.cells[u].offsetWidth+'px;" ',1==u&&(l=' style="width:300px;" '),a+="<td"+l+">"+c+"</td>"}a+="</tr>"}a+="</table>",r.child(a).show();var d=e("#child"+t.productCode).parent();d.addClass("nomargin"),t.isOpen=!0}if(1===t.inventoryType){var p=e(n.delegateTarget);t.isOpen?(p.removeClass("open"),t.isOpen=!1):(p.next().hasClass("serial-row")||t.serialNo.forEach(function(t){p.after(e('<tr class="serial-row"><td></td></tr>').append(e('<td colspan="12"></td>').html(t)))}),p.addClass("open"),t.isOpen=!0)}}}function I(n,i){var s,u=i;M=e("#productMixReportTable",n).DataTable({language:m.getLanguage(),processing:!0,serverSide:!0,ajax:function(t,n){C++,A(!0),e("#productMixReportTable_processing").hide(),P?a.loadAllAsync(y(t,!0),C).then(h):a.loadAllAsync(y(t),C).then(function(e){if(e.data)for(var t=0;t<e.data.length;t++)e.data[t].selectItem=u.openRow;C==e.searchNum&&(s=e.total,n(e)),A(!1)})},footerCallback:function(){var t=this.api();e(t.column(7).footer()).html(s.minQuantity),e(t.column(8).footer()).html(s.quantity),e(t.column(9).footer()).html(s.quantitySold),e(t.column(10).footer()).html(o.formatCurrency(s.sold)),e(t.column(11).footer()).html(o.formatCurrency(s.netSales)),e(t.column(12).footer()).html(o.formatCurrency(s.salesTax))},info:!1,paging:!0,lengthChange:!1,autoWidth:!1,responsive:{details:!0},columns:[{data:"productCode",sClass:"row-expandable",render:function(e,t,n){return n.child||n.serialNo?'<span class="expand-icon"></span>'+e:e}},{data:"name"},{data:"department"},{data:"category"},{data:"register"},{data:"store"},{data:"employee"},{data:"minQuantity",render:function(e){return null==e?"0":e},sClass:"numeric-data",bSearchable:!1},{data:"quantity",render:function(e){return null==e?"":e},sClass:"numeric-data",bSearchable:!1},{data:"quantitySold",render:function(e){return null==e?"0":e},sClass:"numeric-data",bSearchable:!1},{data:"grossSales",render:function(e){return null==e||""==e?o.formatCurrency(0):o.formatCurrency(e)},sClass:"numeric-data",bSearchable:!1},{data:"netSales",render:function(e){return null==e||""==e?o.formatCurrency(0):o.formatCurrency(e)},sClass:"numeric-data",bSearchable:!1},{data:"salesTax",render:function(e){return null==e||""==e?o.formatCurrency(0):o.formatCurrency(e)},sClass:"numeric-data",bSearchable:!1},{data:"upc",bVisible:!1,bSearchable:!0}],order:F,initComplete:function(){r.showRightPanelContent(w)},createdRow:function(n,r){var a=e(n);return a.addClass("editable"),a.attr("data-bind","click: selectItem"),t.applyBindings(r,a[0]),a[0]}}),0!==E&&M.page(E).draw(!1),new e.fn.DataTable.SearchFilter(M),M.on("page",function(){E=M.page.info().page}),M.on("order",function(){F[0][0]=M.order()[0][0],F[0][1]=M.order()[0][1]})}function x(){k.loadCategories(),k.categoryId(""),k.apply()}function S(){var e=this;e.filter.stores([]),e.filter.storesFilter.initialize().then(function(){e.filter.storeLoaded=!0,e.filter.apply(),e.filter.storesFilter.storeChanged.subscribe(function(){e.filter.apply()})})}var w="div.pane-right > div.inventory",E=0,A=t.observable(!1),k=new b,M=null,C=0,F=[[1,"asc"]],P=!1,O=["productCode","name","department","category","register","store","employee","minQuantity","quantity","quantitySold","grossSales","netSales","salesTax"],L=0;return{attached:g,router:n,filter:k,applyFilters:k.apply,departmentChanged:x,activate:S,openRow:T}});
define('viewmodels/reports/serialItemTracking',["knockout","jquery","data/common","common/numericUtils","common/dateUtils","services/text"],function(e,t,n,r,a,i){function o(){c(""),d.removeAll(),p(""),m(""),f(""),g(""),v.removeAll(),b(!1)}function s(r,a){v.removeAll(),t.ajax({type:"POST",url:"api/Products/SerialItemTrackingReport",data:{itemId:r,serialNo:a}}).then(function(e){b(!1),v(e)},function(){b(!1),n.showError(e.local("serialItemTracking.unexpectedError"),"#serialItemTrackingMessages",5e3)})}function u(){b(!0),t.ajax({type:"POST",url:"api/Products/SearchBySn",data:{searchString:c(),lang:i.getLang().toUpperCase(),defaultLang:i.getDefaultLang().toUpperCase()}}).then(function(t){t&&t.length?t.length>1?(b(!1),d(t)):(p(t[0].id),m(t[0].productCode),f(t[0].name),g(c())):(b(!1),n.showError(e.local("serialItemTracking.notFound"),"#serialItemTrackingMessages",5e3))},function(){n.showError(e.local("serialItemTracking.unexpectedError"),"#serialItemTrackingMessages",5e3)})}function l(){d().length&&d.removeAll()}var c=e.observable(),d=e.observableArray(),p=e.observable(),m=e.observable(),f=e.observable(),g=e.observable(),v=e.observableArray(),b=e.observable(!1);return p.subscribe(function(e){if(e){s(e,c());var t=d().filter(function(t){return t.id===e})[0];t&&(m(t.productCode),f(t.name),g(c()))}d.removeAll()}),{serialNo:c,productCode:m,productName:f,productSerialNo:g,multipleResult:d,selectedResult:p,loading:b,activate:o,search:u,trackingData:v,formatCurrency:r.formatCurrency,formatDateTime:a.formatDateTime,hideMultipleResult:l}});
define('viewmodels/reports/taxReport',["knockout","data/common","services/text","repositories/presentationApi/ordersRepository","viewmodels/controls/storesFilter","repositories/presentationApi/taxAgenciesRepository"],function(e,t,n,r,a,i){function o(e){null===e?(I.totalSales(0),I.nonTaxableAmount(0),I.taxableAmount(0),I.taxCollected(0),I.lines.removeAll()):(I.totalSales(e.totalSales),I.nonTaxableAmount(e.nonTaxableAmount),I.taxableAmount(e.taxableAmount),I.taxCollected(e.taxCollected),I.lines.removeAll(),e.lines&&e.lines.length&&I.lines(e.lines)),m(!1)}function s(e,n){e||(e=p()),e&&y&&(d||(d=f().map(function(e){return e.id()}).join(",")),n||(n=b()),m(!0),r.loadTaxReport(e.dateFromString(),e.dateToString(),f(),n,h,T).then(function(e){o(e)},function(){t.showError("An error occured","#taxReportMessages",5e3)}))}function l(){i.get().done(function(e){v(e)}),g.initialize().then(function(){y=!0,g.storeChanged.subscribe(function(e){var t=e.map(function(e){return e.id()}).join(",");t!==d&&(d=t,s())}),s()})}function u(e,t){var n=t.currentTarget.className;$(t.currentTarget.parentElement).find("th").removeClass(),"sorting_asc"==n?($(t.currentTarget).toggleClass("sorting_desc"),T=!1):($(t.currentTarget).toggleClass("sorting_asc"),T=!0),h=$(t.currentTarget).data("index"),s(p(),b())}function c(){var e="Total Sales:,"+I.totalSales()+"\nNon-Taxable Amount:,"+I.nonTaxableAmount()+"\nTax Name,Tax Rate,Taxable Amount,Tax Collected";I.lines().forEach(function(t){e+="\n"+n.csvEscape(t.taxName)+","+t.taxRate+","+t.taxableAmount+","+t.taxCollected}),e+="\n,,Total:,"+I.taxCollected();var t="TaxReport.csv",r=document.getElementById("taxReportLink"),a=new Blob([e],{type:"text/csv"}),i=window.URL.createObjectURL(a);e=null,r.href=i,r.download=t,r.click(),window.URL.revokeObjectURL(i)}var d,p=e.observable(),m=e.observable(!0),f=e.observableArray(),g=new a(f),v=e.observableArray(),b=e.observable(),y=!1,h=0,T=!0,I={dateRange:p,loading:m,totalSales:e.observable(0),nonTaxableAmount:e.observable(0),taxableAmount:e.observable(0),taxCollected:e.observable(0),lines:e.observableArray(),exportTableData:c,storesFilter:g,stores:f,activate:l,agancies:v,agancyId:b,sortClick:u};return p.subscribe(function(e){s(e,b())}),b.subscribe(function(e){s(p(),e)}),I});
define('viewmodels/reports/transactionsReport',["knockout","data/config","data/common","repositories/presentationApi/transactionsReportRepository","viewmodels/controls/storesFilter"],function(e,t,n,r,a){function o(){p(t.enterpriseId),m(-(new Date).getTimezoneOffset()),v.removeAll(),b(null),y.removeAll(),h(null),T.removeAll(),I(null),S(null),w(null),A(null),E(null),k(null)}function i(e,t){return t=t||"name",e.forEach(function(e){var n=21,r=e[t]||"";e.displayName=r.length>n?r.substring(0,n)+"...":r}),e}function s(n){for(var r=0;r<n.length;++r)if(n[r].id===t.enterpriseId){n[r].name=e.local("orders/ordersList.walkIn");break}}function l(){_(!0),o(),F.initialize().then(function(){selfstoreLoaded=!0}),r.loadFilterData().then(function(e){e.customers&&e.customers.length&&s(e.customers),v(i(e.customers)),y(i(e.employees)),T(e.registers),_(!1)},function(){_(!1),k("Error occured while filters loading")})}function u(){k(null);var e,t;if(A()&&"string"==typeof A()?(A(A().replace(/,/g,".")),e=parseFloat(A())):e=A()||"",E()&&"string"==typeof E()?(E(E().replace(/,/g,".")),t=parseFloat(E())):t=E()||"",""!=t){if(t+""!=parseFloat(t)+"")return k("Amount in 'To' is not valid"),!1;if(-999999.99>t)return k("Amount in 'To' should be greater than -999999.99."),!1;if(t>999999.99)return k("Amount in 'To' should be lower than 999999.99."),!1}if(""!=e){if(e+""!=parseFloat(e)+"")return k("Amount in 'From' is not valid"),!1;if(-999999.99>e)return k("Amount in 'From' should be greater than -999999.99."),!1;if(e>999999.99)return k("Amount in 'From' should be lower than 999999.99."),!1}return""!=t&&""!=e&&e>t?(k("Amount in 'To' should be greater or equal than Amount in 'From'"),!1):!0}function c(){if(!u())return!1;p(t.enterpriseId),S(x().dateFrom.toJSON()),w(x().dateTo.toJSON());for(var e="",n=0;n<this.stores().length;n++)e+=this.stores()[n].id(),n!=this.stores().length-1&&(e+=",");return C(e),L||_(!0),!0}function d(e){var t=/^([0-9]+|\.|\-|ArrowLeft|ArrowRight|Delete|Backspace|Home|End)$/g;return t.test(e.key)?!0:(e.preventDefault(),!1)}var p=e.observable(),m=e.observable(0),f=e.observableArray([{value:0,name:"CSV"},{value:1,name:"Excel"}]),g=e.observable(),v=e.observableArray(),b=e.observable(),y=e.observableArray(),h=e.observable(),T=e.observableArray(),I=e.observable(),x=e.observable(),S=e.observable(),w=e.observable(),A=e.observable(),E=e.observable(),k=e.observable(),M=e.observableArray(),C=e.observable(),F=new a(M,!0,!0,"tr_report","tr_filter_control_cont"),P=[e.T("reports/transactionReportHeaders.accountId"),e.T("reports/transactionReportHeaders.companyName"),e.T("reports/transactionReportHeaders.storeName"),e.T("reports/transactionReportHeaders.registerName"),e.T("reports/transactionReportHeaders.transactionType"),e.T("reports/transactionReportHeaders.transactionId"),e.T("reports/transactionReportHeaders.orderId"),e.T("reports/transactionReportHeaders.paymentMethod"),e.T("reports/transactionReportHeaders.paymentStatus"),e.T("reports/transactionReportHeaders.cardNumber"),e.T("reports/transactionReportHeaders.authCode"),e.T("reports/transactionReportHeaders.refNum"),e.T("reports/transactionReportHeaders.total"),e.T("reports/transactionReportHeaders.tips"),e.T("reports/transactionReportHeaders.authorized"),e.T("reports/transactionReportHeaders.captured"),e.T("reports/transactionReportHeaders.paymentDate"),e.T("reports/transactionReportHeaders.employee"),e.T("reports/transactionReportHeaders.customer"),e.T("reports/transactionReportHeaders.customerAddressLine1"),e.T("reports/transactionReportHeaders.customerAddressLine2"),e.T("reports/transactionReportHeaders.customerCity"),e.T("reports/transactionReportHeaders.customerState"),e.T("reports/transactionReportHeaders.customerZip"),e.T("reports/transactionReportHeaders.customerPhone")],O={Sale:e.T("reports/transactionReport.sale"),Refund:e.T("reports/transactionReport.refund"),EbtTypes:[e.T("payment/types.ebtCach"),e.T("payment/types.ebtFood")],PayTypes:[e.T("payment/types.cash"),e.T("payment/types.check"),e.T("payment/types.creditCard"),e.T("payment/types.giftCertificate"),e.T("payment/types.externalPayment"),e.T("payment/types.debitCard"),e.T("payment/types.custom"),e.T("payment/types.ebtCard")],YesNo:[e.T("common.no"),e.T("common.yes")],Statuses:[e.T("payment/statuses.pending"),e.T("payment/statuses.completed"),e.T("payment/statuses.failed"),e.T("payment/statuses.voided"),e.T("payment/statuses.completed"),e.T("payment/statuses.pending"),e.T("payment/statuses.failed"),e.T("payment/statuses.completed"),e.T("payment/statuses.failed"),e.T("payment/statuses.completed")]},L="iPad"===window.navigator.platform,_=e.observable(!L);return window.addEventListener("blur",function(){_(!1)}),{activate:l,beforeSubmit:c,enterpriseId:p,utcOffset:m,reportFormats:f,reportFormat:g,customers:v,customerId:b,employees:y,employeeId:h,registers:T,registerId:I,dateRange:x,dateFrom:S,dateTo:w,amountFrom:A,amountTo:E,csvHeaders:P,csvLocalization:O,errorMessage:k,loading:_,checkInputValue:d,storesFilter:F,storesJSON:C,stores:M,isIOS:L}});
define('viewmodels/resetPassword',["knockout","durandal/app","plugins/router","plugins/dialog","data/config","services/userAgent","common/utils"],function(e,t,n,r,a,o,i){function s(){var e=i.getIdFromQuery();if(""===i.getIdFromCookie()){if(""===e)return setTimeout(function(){n.navigate("account")},1),!1;i.setEnterpriseCodeCookie(e)}return new Promise(function(e){e(!0)})}function l(){f(null),p(null),g(!1)}function u(){$(".version").text(e.T("login.version_")+a.version)}function c(){if(p(null),!f())return p(e.T("resetPassword.emailRequired")),void 0;g(!0);var t={enterpriseCode:i.getIdFromCookie(),email:f()};$.post("api/Account/ResetPassword",t).then(function(t){g(!1),0===t.resultCode?r.show(new r.MessageBox(e.local("resetPassword.emailSent"),e.local("resetPassword.title"),["OK"],!0)).then(function(){n.navigate("smartLogin"),location.reload(!0)}):p(e.T(t.message)||m)},function(e){g(!1),p(e.statusText)})}var d=e.T("login.back_office"),p=e.observable(),m=([null,e.T("resetPassword.wrongEmail")],e.T("resetPassword.unexpectedError")),f=e.observable(),g=e.observable();return{title:d,canActivate:s,activate:l,attached:u,email:f,errorMessage:p,resetPassword:c,isLoading:g}});
define('viewmodels/shell',["knockout","durandal/app","plugins/router","data/session","viewmodels/navigationpanel","data/viewsBroker","data/permissions","services/dataTableText","data/config","common/utils","services/scannerListener","common/constants","services/userAgent","services/demo","data/config","repositories/appDirectoryRepository","services/ssoLoginService"],function(e,t,n,r,a,o,i,s,l,u,c,d,p,m,l,f,g){function v(){window.addEventListener?window.addEventListener("beforeunload",g.endSession):window.attachEvent("onbeforeunload",g.endSession)}function b(){h(),v()}function y(e,t){return t||(t=e),$.each(t,function(t,n){void 0!==n.childRoutes&&void 0!==n.childRoutes.routes&&($.each(n.childRoutes.routes,function(e,t){n.childRoutes.buildChildRoute&&(t.route=n.route+"/"+t.route,t.moduleId=n.moduleRootId+"/"+t.moduleId,t.title=n.title+"/"+t.title,t.hash=n.hash+"/"+t.hash),t.parent=n.moduleRootId||n.moduleId||n.route}),e=e.concat(n.childRoutes.routes),e=y(e,n.childRoutes.routes))}),e}function h(){e.validation.init({decorateElement:!0,errorElementClass:"hasError",errorClass:"fieldError",grouping:{observable:!0,deep:!0},registerExtenders:!0,messagesOnModified:!0,insertMessages:!0,parseInputAttributes:!0,messageTemplate:null},!0);var a;a=p.checkBrowserCompatibility()?[{route:"smartLogin",moduleId:"smartLogin",title:"shell.smartLogin",nav:!1},{route:"login",moduleId:"login",title:"shell.login",nav:!1},{route:"ssoLogin",moduleId:"ssoLogin",title:"shell.ssoLogin",nav:!1},{route:"reset-password",moduleId:"resetPassword",title:"shell.reset-password",nav:!1},{route:"unblock-account",moduleId:"unblockAccount",title:"shell.unblock-account",nav:!1},{route:"do-unblock-account/:enterprise/:token",moduleId:"doUnblockAccount",title:"shell.unblock-account",nav:!1},{route:"set-password(/:token)",moduleId:"setPassword",title:"shell.set-password",nav:!1},{route:"pin-login",moduleId:"pinLogin",title:"shell.pin-login",nav:!1},{route:"account",moduleId:"account",title:"shell.account",nav:!1},{route:"unsupportedBrowser",moduleId:"unsupportedBrowser",title:"shell.unsupportedBrowser",nav:!1},{route:"",moduleId:"dashboard/dashboard",title:"shell.dashboard",nav:10,requireAuthorization:!0,iconClass:"dashboard-icon"},{route:"orders",moduleId:"orders/ordersList",title:"shell.orders",nav:20,noSubItems:!0,requireAuthorization:!0,iconClass:"transactions-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"order-details/:id",moduleId:"orders/orderDetails",title:"shell.order_details",nav:!1,requireAuthorization:!0}]}},{route:"",moduleId:"",permission:"Inventory",title:"shell.inventory",nav:30,requireAuthorization:!0,moduleRootId:"inventory",iconClass:"inventory-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"items",moduleId:"inventory/inventoryList",permission:"Inventory",title:"shell.products",nav:31,requireAuthorization:!0,childRoutes:{buildChildRoute:!1,routes:[{route:"product(/:id)(/:tab)",moduleId:"inventory/inventoryManage",permission:"Inventory",title:"shell.product",nav:!1,requireAuthorization:!0},{route:"importInventory",moduleId:"inventory/importInventory",permission:"Inventory",title:"shell.import_inventory",nav:!1,requireAuthorization:!0}]}},{route:"departments",moduleId:"departments/departmentsList",permission:"Inventory",title:"shell.departments",nav:33,requireAuthorization:!0,childRoutes:{buildChildRoute:!1,routes:[{route:"department(/:id)",moduleId:"departments/departmentManage",permission:"Inventory",title:"shell.department",nav:!1,requireAuthorization:!0}]}},{route:"categories",moduleId:"categories/categoriesList",permission:"Inventory",title:"shell.categories",nav:35,requireAuthorization:!0,childRoutes:{buildChildRoute:!1,routes:[{route:"category(/:id)",moduleId:"categories/categoryManage",permission:"Inventory",title:"shell.category",nav:!1,requireAuthorization:!0}]}},{route:"modifiers",moduleId:"modifiers/modifiersList",permission:"Inventory",title:"shell.modifiers",nav:37,requireAuthorization:!0,childRoutes:{buildChildRoute:!1,routes:[{route:"modifier(/:id)",moduleId:"modifiers/modifierManage",permission:"Inventory",title:"shell.modifier",nav:!1,requireAuthorization:!1}]}},{route:"store-transfer",moduleId:"storeTransfer/storeTransfer",permission:"Inventory",title:"shell.storeTransfer",nav:!0,requireAuthorization:!0},{route:"po-receiving",moduleId:"poReceiving/poReceiving",permission:"Inventory",title:"shell.poReceiving",nav:!0,requireAuthorization:!0},{route:"adjustment",moduleId:"poReceiving/adjustment",permission:"Inventory",title:"shell.adjustment",nav:!0,requireAuthorization:!0},{route:"menuBuilder",moduleId:"inventory/menuBuilder",title:"shell.menuBuilder",nav:73,noSubItems:!0,requireAuthorization:!0,iconClass:"app-store-icon"}]}},{route:"",moduleId:"",title:"shell.customers",nav:40,requireAuthorization:!0,moduleRootId:"customers",iconClass:"customers-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"importCustomers",moduleId:"customers/importCustomers",title:"shell.import_customers",nav:41,requireAuthorization:!0,iconClass:"customers-icon"}]}},{route:"",moduleId:"",title:"shell.vendors",nav:50,requireAuthorization:!0,moduleRootId:"vendors",iconClass:"vendors-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"vendorsList",moduleId:"vendors/vendorsList",title:"shell.vendor_list",nav:51,requireAuthorization:!0,iconClass:"vendors-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"vendor(/:id)",moduleId:"vendors/vendorManage",title:"shell.manage_vendor",nav:!1,requireAuthorization:!0}]}}]}},{route:"",moduleId:"",title:"shell.employees",nav:60,requireAuthorization:!0,moduleRootId:"employees",iconClass:"employees-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"employees",moduleId:"employees/employeesList",title:"shell.employee_list",nav:61,requireAuthorization:!0,iconClass:"employees-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"employee(/:id)",moduleId:"employees/employeeManage",title:"shell.manage_employee",nav:!1,requireAuthorization:!0}]}},{route:"clockIn",moduleId:"reports/clockIn",permission:"BackOfficeReporting",title:"shell.clockIn",nav:69,requireAuthorization:!0,iconClass:""}]}},{route:"",moduleId:"",title:"shell.reporting",nav:65,requireAuthorization:!0,moduleRootId:"reports",permission:"BackOfficeReporting",iconClass:"reports-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"tips-report",moduleId:"tips/tipsList",permission:"BackOfficeReporting",title:"shell.tips_report",nav:66,requireAuthorization:!0,iconClass:""},{route:"shifts",moduleId:"shifts/shiftsList",permission:"BackOfficeReporting",title:"shell.z_report",nav:66,requireAuthorization:!0,iconClass:"",childRoutes:{buildChildRoute:!1,routes:[{route:"shift(/:id)",moduleId:"shifts/shift",title:"shell.z_report_details",nav:!1,requireAuthorization:!0}]}},{route:"product-mix-report",moduleId:"reports/productMixReport",permission:"BackOfficeReporting",title:"shell.product_mix_report",nav:67,requireAuthorization:!0,iconClass:""},{route:"tax-report",moduleId:"reports/taxReport",permission:"BackOfficeReporting",title:"shell.taxReport",nav:68,requireAuthorization:!0,iconClass:""},{route:"transactions-report",moduleId:"reports/transactionsReport",permission:"BackOfficeReporting",title:"shell.transactionsReport",nav:69,requireAuthorization:!0,iconClass:""},{route:"aging-report",moduleId:"reports/agingReport",permission:"BackOfficeReporting",title:"shell.agingReport",nav:70,requireAuthorization:!0,iconClass:""},{route:"serial-item-tracking",moduleId:"reports/serialItemTracking",permission:"BackOfficeReporting",title:"shell.serialItemTracking",nav:71,requireAuthorization:!0,iconClass:""},{route:"store-transfers-report",moduleId:"storeTransfer/storeTransfersReport",permission:"BackOfficeReporting",title:"shell.storeTransfersReport",nav:!0,requireAuthorization:!0,iconClass:"",childRoutes:{buildChildRoute:!1,routes:[{route:"store-transfer-details/:id",moduleId:"storeTransfer/storeTransferDetails",title:"shell.storeTransfersDetails",nav:!1,requireAuthorization:!0}]}},{route:"po-receiving-report",moduleId:"storeTransfer/storeTransfersReport",permission:"BackOfficeReporting",title:"shell.poReceivingReport",nav:!0,requireAuthorization:!0,iconClass:"",childRoutes:{buildChildRoute:!1,routes:[{route:"po-receiving-details/:id",moduleId:"storeTransfer/storeTransferDetails",title:"shell.poReceivingDetails",nav:!1,requireAuthorization:!0}]}},{route:"adjustment-report",moduleId:"adjustment-report/adjustments",permission:"BackOfficeReporting",title:"shell.adjustmentReport",nav:!0,requireAuthorization:!0,iconClass:"",childRoutes:{buildChildRoute:!1,routes:[{route:"adjustment-report-drilldown/:id",moduleId:"adjustment-report/drilldown",title:"shell.adjustmentDetails",nav:!1,requireAuthorization:!0}]}}]}},{route:"",moduleId:"",title:"shell.settings",nav:80,requireAuthorization:!0,moduleRootId:"settings",iconClass:"manage-app-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"enterpriseSettings",moduleId:"enterprise/enterpriseSettings",title:"shell.enterprise_settings",nav:81,requireAuthorization:!0,iconClass:"manage-app-icon"},{route:"stores",moduleId:"stores/storesList",title:"shell.store_settings",nav:82,noSubItems:!0,requireAuthorization:!0,iconClass:"manage-app-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"store-settings(/:id)",moduleId:"stores/storeSettings",title:"shell.store_settings",nav:!1,requireAuthorization:!0},{route:"new-store",moduleId:"stores/newStore",title:"stores/storesList.new_store",nav:!1,requireAuthorization:!0}]}},{route:"registerSettings",moduleId:"registerSettings/registerSettingsList",title:"shell.register_settings",nav:83,requireAuthorization:!0,iconClass:"manage-app-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"registerSetting(/:id)",moduleId:"registerSettings/registerSettingsManage",title:"shell.manage_register_settings",nav:!1,requireAuthorization:!0},{route:"new-register",moduleId:"registerSettings/newRegister",title:"shell.new_register",nav:!1,requireAuthorization:!0}]}},{route:"taxes",moduleId:"taxes/taxesList",title:"shell.tax_manager",nav:83,requireAuthorization:!0,iconClass:"manage-app-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"taxes/tax(/:id)",moduleId:"taxes/taxManage",title:"shell.manage_taxes",nav:!1,requireAuthorization:!0}]}},{route:"tax-agencies",moduleId:"taxAgencies/taxAgenciesList",title:"shell.taxAgenciesList",nav:86,requireAuthorization:!0,iconClass:"manage-app-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"tax-agencies/tax-agency(/:id)",moduleId:"taxAgencies/taxAgencyManage",title:"shell.manage_taxAgencies",nav:!1,requireAuthorization:!0}]}},{route:"",moduleId:"",title:"shell.tender_settings",nav:!1,requireAuthorization:!0,iconClass:"store-settings-icon"},{route:"support-access",moduleId:"supportAccess/supportAccess",title:"shell.supportAccess",nav:86,requireAuthorization:!0,iconClass:""}]}},{route:"",moduleId:"",title:"shell.help",nav:!1,requireAuthorization:!0,moduleRootId:"help",iconClass:"manage-app-icon"},{route:"community",link:"Zendesk/Login",title:"shell.community",nav:!0,requireAuthorization:!0,iconClass:"customers-icon"},{route:"logout",moduleId:"logout",title:"shell.logout",nav:200,requireAuthorization:!0,iconClass:"logout-icon"}]:[{route:"smartLogin",moduleId:"smartLogin",title:"shell.smartLogin",nav:!1},{route:"login",moduleId:"login",title:"shell.login",nav:!1},{route:"ssoLogin",moduleId:"ssoLogin",title:"shell.ssoLogin",nav:!1},{route:"account",moduleId:"account",title:"shell.account",nav:!1},{route:"unsupportedBrowser",moduleId:"unsupportedBrowser",title:"shell.unsupportedBrowser",nav:!1},{route:"",moduleId:"quickbooks/quickbooksLauncher",title:"shell.quickbooks",nav:!1,requireAuthorization:!0},{route:"",moduleId:"",title:"shell.help",nav:!1,requireAuthorization:!0,moduleRootId:"help",iconClass:"manage-app-icon"},{route:"logout",moduleId:"logout",title:"shell.logout",nav:200,requireAuthorization:!0,iconClass:"logout-icon"}],n.guardRoute=function(e,t){var a=!0;if("undefined"!=typeof t.config.requireAuthorization&&t.config.requireAuthorization===!0){a=r.authorized();var o=window.localStorage.getItem(g.ssoEnabledKey);if("true"===o){var i=g.storage.getItemObject(g.authCodeStorageKey);i||(a=!1)}}return a?!0:n.routes[0].hash};var o=n.activeItem.settings.areSameItem;n.activeItem.settings.areSameItem=function(e,t){if(t&&"viewmodels/storeTransfer/storeTransfersReport"===t.__moduleId__)return!1;var n=Array.prototype.slice.call(arguments);return o.apply(this,n)},n.on("router:route:after-config").then(function(e){e.parent&&(e.parent="viewmodels/"+e.parent)}),n.on("router:navigation:complete",function(e,t){$(".main-menu a").removeClass("active"),t&&$('.main-menu a[href="#'+t.fragment+'"]:first').addClass("active")}),n.on("router:navigation:processing",function(e,t){var n=u.getIdFromQuery(),a=u.getIdFromCookie();""===a&&""!==n&&u.setEnterpriseCodeCookie(n);var o="";if(""===u.getIdFromCookie())setTimeout(function(){t.navigate("account")},1);else if(r.authorized()){u.getIdFromCookie();var i=u.getParameterByName("navigateUrl");if(i){if(i.toLowerCase().startsWith("http"))o=i;else{var s=window.location;o=s.protocol+"//"+s.host+"/"+s.pathname.split("/")[1],o.endsWith("/")||(o+="/"),o+="#"+i}window.location.replace(o)}}}),n.updateDocumentTitle=function(n,r){r.config.title?document.title=t.title?e.T(r.config.title)+" | "+e.T(t.title):e.T(r.config.title):t.title&&(document.title=e.T(t.title))},t.on("app:reload",function(){window.location.reload(!0)}),t.on("app:authorized",function(){x(a)}),r.authorized()&&x(a),a=y(a),n.makeRelative({moduleId:"viewmodels"}).map(a).buildNavigationModel().activate()}function T(e,t,n){var r={nav:e.isInstalled,route:"app-"+e.key+"-settings(/:id)",moduleId:"appstore/appSettings",isAppRoute:!0,name:I(e.names,t,n),parent:"appstore",noSubItems:!0,requireAuthorization:!0,iconClass:"",hash:"#app-"+e.key+"-settings/"+e.id};return r}function I(e,t,n){if(null==e||0==e.length)return"";for(var r=null,a=0;a<e.length;a++){var o=e[a];if(o.languageId.toUpperCase()==t.toUpperCase())return o.name;o.languageId.toUpperCase()==n.toUpperCase()&&(r=e[a])}return r?r.name:""}function x(){var e={route:"",moduleId:"",title:"shell.apps",nav:70,requireAuthorization:!0,moduleRootId:"appstore",iconClass:"app-store-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"app-directory(/:id)",moduleId:"appstore/appDirectory",title:"shell.appDirectory",nav:71,requireAuthorization:!0,iconClass:"",hash:"#app-directory"},{route:"appdepartments/:isAppMode",moduleId:"departments/departmentsList",permission:"Inventory",title:"shell.appdepartments",nav:72,requireAuthorization:!0,childRoutes:{buildChildRoute:!1,routes:[{route:"appdepartment(/:id)/:isAppMode",moduleId:"departments/departmentManage",permission:"Inventory",title:"shell.appdepartment",nav:!1,requireAuthorization:!0}]}},{route:"appcategories/:isAppMode",moduleId:"categories/categoriesList",permission:"Inventory",title:"shell.appcategories",nav:73,requireAuthorization:!0,childRoutes:{buildChildRoute:!1,routes:[{route:"appcategory(/:id)/:isAppMode",moduleId:"categories/categoryManage",permission:"Inventory",title:"shell.appcategory",nav:!1,requireAuthorization:!0}]}},{route:"quickbooks",moduleId:"quickbooks/quickbooksSettings",title:"shell.quickbooks",nav:74,noSubItems:!0,requireAuthorization:!0,iconClass:"quickbooks-icon",childRoutes:{buildChildRoute:!1,routes:[{route:"quickbooks-disconnect",moduleId:"quickbooks/quickbooksDisconnect",title:"shell.quickbooks-disconnect",nav:!1,noSubItems:!0,requireAuthorization:!0,iconClass:"quickbooks-icon"}]}}]}};$.when(l.fetchConfig(),f.loadAppDirectory()).then(function(t,r){var a=t[0].language,o=t[0].defaultLanguage,i=r[0].externalApps;i.forEach(function(t){1!==t.type&&e.childRoutes.routes.push(T(t,a,o))});var s=y([e]);n.deactivate(),n.map(s).buildNavigationModel().activate({silent:!0})})}var w={importCustomers:!0,importInventory:!0};t.on(d.scannerReadEvent).then(function(e){var r=n.activeInstruction();r&&t.trigger(d.scannerReadEvent+":"+r.config.route,e)});var S={activate:b,router:n,authorized:r.authorized,cachableFragments:w,isCachable:e.computed(function(){return n.activeInstruction()?w[n.activeInstruction().fragment]===!0:!1}),isLoading:m.isLoading};return S});
define('viewmodels/shifts/shift',["knockout","plugins/router","repositories/presentationApi/shiftsRepository","repositories/presentationApi/storesRepository","data/config","common/dateUtils","common/paymentGatewayType"],function(e,t,n,r,a,o,i){function s(e){c(null),n.loadById(e).then(function(e){e.externalPaymentVisible=e.external>0||e.externalPayment,e.debitCardVisible=e.tenderBreakdownDebitCard>0||i.Pax.equals(e.paymentGatewayType),e.ebtCardVisible=e.tenderBreakdownEbtCard>0||i.Pax.equals(e.paymentGatewayType),c(e)})}function l(e){return o.formatDateTime(e)}function u(){t.navigate("shifts")}var c=e.observable();return{activate:s,shift:c,formatDate:l,back:u}});
define('viewmodels/shifts/shiftsList',["knockout","moment","plugins/router","data/common","data/config","repositories/presentationApi/shiftsRepository","common/dateUtils","common/numericUtils","services/dataTableText","common/dateUtils","viewmodels/controls/storesFilter"],function(e,t,n,r,a,o,i,s,l,i,u){function c(t){var r=this;r.rowNum=e.observable(),r.shift=t,r.edit=function(){n.navigate("shift/"+r.shift.id)}}function d(){S=!1,A.initialize().then(function(){S=!0})}function p(e){r.showLoader(y),m(e)}function m(t){a.getEnterpriseId().then(function(n){v=$("#shiftsTable",t).DataTable({language:l.getLanguage(),processing:!0,serverSide:!0,ajax:function(t,r){var a;e.computed(function(){a=x(),t.stores=w(),b=w().map(function(e){return e.id()}).join(",")}).dispose(),null!=a&&(t.dateFrom=a&&a.dateFrom&&a.dateFrom.isAfter("2010-01-01")?a.dateFromString():null,t.dateTo=a&&a.dateTo&&!a.dateTo.isAfter()?a.dateToString():null,E?(t.start=0,t.length=0):t.start=h*t.length,k(!0),$("#shiftsTable_paginate").hide(),$("#shiftsTable_processing").hide(),$.post(I,{id:n,pagingRequest:t}).then(function(e){if(E)g(e);else{var t=Enumerable.From(e.data).Select(function(e){return new c(e)}).ToArray();e.data=t,r(e)}k(!1),$("#shiftsTable_paginate").show()}))},info:!1,paging:!0,lengthChange:!1,autoWidth:!1,columns:[{data:"shift.register"},{data:"shift.store"},{data:"shift.opened",sWidth:"200px",sClass:"center",render:function(e){return i.formatDateTime(e)}},{data:"shift.closed",sWidth:"200px",sClass:"center",render:function(e){return i.formatDateTime(e)}},{data:"shift.transactions"},{data:"shift.totalTendered",render:function(e){return s.formatCurrency(e)},sClass:"center"},{data:"shift.variance",render:function(e){return s.formatCurrency(e)},sClass:"center"}],order:T,initComplete:function(){r.showRightPanelContent(y)},createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),v.on("init",function(){0!==h&&v.page(h).draw(!1)}),v.on("page",function(){h=v.page.info().page}),v.on("order",function(){T[0][0]=v.order()[0][0],T[0][1]=v.order()[0][1]}),r.showRightPanelContent(y)})}function f(){return E=!0,v.ajax.reload(),!1}function g(t){E=!1;var n=[e.T("shifts/shiftsList.register"),e.T("shifts/shiftsList.store"),e.T("shifts/shiftsList.opened"),e.T("shifts/shiftsList.openedBy"),e.T("shifts/shiftsList.closed"),e.T("shifts/shiftsList.closedBy"),e.T("shifts/shiftsList.transactions"),e.T("shifts/shiftsList.openingAmount"),e.T("shifts/shiftsList.cashSales"),e.T("shifts/shiftsList.cashRefunds"),e.T("shifts/shiftsList.payins"),e.T("shifts/shiftsList.payouts"),e.T("shifts/shiftsList.closingAmount"),e.T("shifts/shiftsList.variance"),e.T("shifts/shiftsList.sales"),e.T("shifts/shiftsList.discounts"),e.T("shifts/shiftsList.refunds"),e.T("shifts/shiftsList.netSales"),e.T("shifts/shiftsList.tips"),e.T("shifts/shiftsList.tax"),e.T("shifts/shiftsList.total_tendered"),e.T("shifts/shiftsList.cash"),e.T("shifts/shiftsList.creditCard"),e.T("shifts/shiftsList.debitCard"),e.T("shifts/shiftsList.ebtCard"),e.T("shifts/shiftsList.externalPayment")],r={},a=["register","store","opened","openedBy","closed","closedBy","transactions","openingAmount","cashSales","cashRefunds","payins","payouts","closingAmount","variance","sales","discounts","refunds","netSales","tips","tax","totalTendered","cash","creditCard","debitCard","ebtCard","external"];n.forEach(function(e,t){r[e]=a[t]}),t.data=t.data.map(function(e){return e.debitCard=e.debitCard||0,e.ebtCard=e.ebtCard||0,e.ebtCardFood=e.ebtCardFood||0,e.opened=i.formatDateTime(e.opened),e.closed=i.formatDateTime(e.closed),e}),$("#shiftsTable").DataTable().exportData({data:t.data,columnsCount:a.length,columns:r,fileNamePrefix:"z-report-"})}var v,b,y="div.pane-right > div",h=0,T=[[0,"asc"]],I=o.getAllShiftsUrl,x=e.observable(),w=e.observableArray(),S=!1,A=new u(w),E=!1,k=e.observable(!1);return w.subscribe(function(e){var t=e.map(function(e){return e.id()}).join(",");t!==b&&null!=v&&(b=t,h=0,v.ajax.reload())}),x.subscribe(function(){null!=v&&S&&(h=0,v.ajax.reload())}),{activate:d,attached:p,dateRange:x,exportTableData:f,loading:k,storesFilter:A}});
define('viewmodels/smartLogin',["knockout","durandal/app","plugins/router","data/session","data/config","services/userAgent","common/utils","services/ssoLoginService"],function(e,t,n,r,a,o,i,s){function l(){var e=$.Deferred(),t=i.getIdFromQuery();return""===i.getIdFromCookie()&&(""!==t?i.setEnterpriseCodeCookie(t):e.resolve(n.navigate("account"))),i.getIdFromCookie()&&s.getSsoSettings().then(function(t){t.isEnabled?e.resolve(n.navigate("ssoLogin")):e.resolve(n.navigate("login"))}),e.promise()}function u(){c()}function c(){$(".version").text(e.T("smartLogin.version_")+a.version)}var d=e.observable(!0);return{canActivate:l,attached:u,loading:d}});
define('viewmodels/ssoLogin',["knockout","durandal/app","plugins/router","data/session","data/config","data/permissions","services/timers/upgradeTimer","services/userAgent","common/utils","services/LogManager","services/ssoLoginService"],function(e,t,n,r,a,o,i,s,l,u,c){function d(){v.logDebug("attached","ssoLgin",!1,!1);var e=c.storage.getItemObject(c.authCodeStorageKey);if(v.logDebug("Current saved code.","ssoLgin",!1,!1,e),!e){if(e=c.readCodeFromUrl(),v.logDebug("Code From Url in method attached.","ssoLgin",!1,!1,e),!e)return c.reguestToIdentityServer(),void 0;c.storage.setItemObject(c.authCodeStorageKey,e)}c.loginSso().then(function(e){v.logDebug("SignIn","ssoLgin",!1,!1,e),f(),a.fetchConfig(!0).then(function(e){o.setPermissions().then(function(){g=e.employeeId,p()},function(e){v.logDebug("ReguestToIdentityServer if error in set setPermissions","ssoLgin",!1,!1,e),c.clearStoredToken(),c.reguestToIdentityServer()})})},function(e){v.logDebug("ReguestToIdentityServer if error to login with SSO","ssoLgin",!1,!1,e),c.clearStoredToken(),c.reguestToIdentityServer()})}function p(){r.authorized(!0),m()}function m(){var e=l.getParameterByName("navigateUrl"),t="";if(e){if(e.toLowerCase().startsWith("http"))t=e;else{var r=window.location;t=r.protocol+"//"+r.host+"/"+r.pathname.split("/")[1],t.endsWith("/")||(t+="/"),t+="#"+e}window.location.replace(t)}else n.navigate("")}function f(){var e=window.localStorage.getItem("users");e=e?JSON.parse(e):{},e[g]=!0,window.localStorage.setItem("users",JSON.stringify(e))}var g,v=u.getLogger(),b=e.observable("EN");return{attached:d,getCurrentLanguage:b}});
define('viewmodels/storeTransfer/storeTransfer',["knockout","durandal/app","plugins/router","plugins/dialog","data/common","repositories/businessUnitRepository","repositories/presentationApi/productsRepository","common/constants","data/config"],function(e,t,n,r,a,o,i,s,l){function u(){for(var e,t=U().length,n=t-1;n>=0;--n)e=U()[n],0!=e.transferQuantity()&&null!==e.transferQuantity()&&!isNaN(e.transferQuantity())||1===e.productType&&0!==U().filter(function(t){return t.parent===e}).length||U.remove(e)}function c(e,t){e.pageNo&&(J(e.pageNo-1),p());var n=t.delegateTarget.getAttribute("data-dir");"previous"===n&&0!=J()?(J(J()-1),p()):"next"===n&&J()!=Math.ceil(K()/W)-1&&(J(J()+1),p())}function d(){H.removeAll();var e,t=Math.ceil(K()/W);if(!(2>t))if(6>=t)for(var n=1;t>=n;++n)e={pageNo:n},n===J()+1&&(e.current=!0),H.push(e);else{var r=[1,t];J()<=2?r.splice(1,0,2,3,4,5):J()>=t-3?r.splice(1,0,t-4,t-3,t-2,t-1):r.splice(1,0,J(),J()+1,J()+2);for(var n=0;n<r.length;++n)e={pageNo:r[n]},r[n]===J()+1&&(e.current=!0),0===n&&2!==r[1]&&(e.beforeGap=!0),n===r.length-1&&r[n]-r[n-1]>1&&(e.afterGap=!0),H.push(e)}}function p(){if(V.removeAll(),Q())u(),B(!0),i.getInventoryTransferLines(D(),null,!1,J(),W).then(function(e){e||(e={totalHits:0,lines:[]}),K(e.totalHits),Y(e.lines.map(function(e){return e.itemId})),e.lines.forEach(function(e){k(e,!1)}),d(),B(!1)},function(){B(!1),a.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)});else{if(!D())return;G(!0),i.search(D(),N()).then(function(t){t&&(t.length>0?V(t):(G(!1),a.showMessage(e.local("storeTransfer.no_items_found_to_transfer"),"#storeTransferMessage",5e3)))},function(){G(!1),a.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)})}}function m(){G(!1),Q()||D(null),V.removeAll()}function f(){window.setTimeout(m,500)}function g(){return z(l.stores&&l.stores.length>1),J(0),z()?(U.removeAll(),_.removeAll(),N(null),R(null),j(null),G(!1),B(!0),o.loadAllBusinessUnitsByEmployeeAsync().then(function(e){_(e),D()?(B(!1),D(null)):Q()?p():B(!1)},function(){B(!1),a.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)})):void 0}function v(t,n){var r,a;0===t.quantityDecimalPlaces?(r=e.T("storeTransfer.transferIntegerQuantityError",null,[0,1e8]),a=!0):(r=e.T("storeTransfer.transferQuantityError",null,[0,1e8]),a=!1);var o=Q()?0:1;t.transferQuantity=e.observable(o).extend({number:!0,range:{message:r,params:{minValue:0,includeMinValue:!0,maxValue:1e8,onlyInteger:a}}}),t.parent=n,t.showQuantities=e.observable(Number(t.productType)===ProductTypes.Regular),t.showProductCode=e.observable(!1),t.showCost=e.observable(0===Number(t.productType)),t.quantityEditable=e.observable(InventoryType.Serialized!=t.inventoryType),t.showQuantity=e.observable(t.showCost()&&(n?InventoryType.Serialized!=n.inventoryType:!0)),InventoryType.Serialized===t.inventoryType&&b(t),t.storeOutQuantity=e.computed(function(){if(InventoryType.Serialized===t.inventoryType)return t.filteredSerials().length;var e=t.storeQuantities,n=e.filter(function(e){return e.businessUnitId===N()});return n&&n[0]?n[0].quantity:0}),t.storeInQuantity=e.computed(function(){if(InventoryType.Serialized===t.inventoryType)return t.storeInSerials().length;var e=t.storeQuantities,n=e.filter(function(e){return e.businessUnitId===R()});return n&&n[0]?n[0].quantity:0}),t.visible=e.computed(function(){return n&&InventoryType.Serialized===n.inventoryType?t.storeOutQuantity()>0:!0}),t.expanded=e.observable(!1)}function b(t){if(InventoryType.Serialized===t.inventoryType){var n={},r=t.storeQuantities;if(r.forEach(function(e){n[e.businessUnitItemId]=e}),t.selectedSerials=e.observableArray(),t.transferQuantity=e.computed(function(){return t.selectedSerials().length}),null==t.serialNumbers&&(t.serialNumbers=[]),t.serialNumbers.forEach(function(t){t.serialNo=e.observable(t.serialNo),t.businessUnitId=n[t.businessUnitItemId].businessUnitId}),t.filteredSerials=e.computed(function(){return t.serialNumbers.filter(function(e){return e.businessUnitId===N()})}),t.storeInSerials=e.computed(function(){return t.serialNumbers.filter(function(e){return e.businessUnitId===R()})}),null!=t.serials&&t.serials.length>0&&null!=t.serialNumbers&&t.serialNumbers.length>0){var a=t.serials[0];I(t,a)}}}function y(){return{vendorPlaceholder:e.T("storeTransfer.search_serials"),itemId:"serialNo",createNewArrItem:function(){return null},filter:!0,selectAll:!0,inputClasses:"scannerInput",placeholder:e.T("storeTransfer.search_or_select_serials"),onCheckAll:function(){},onUncheckAll:function(){},afterInit:function(){}}}function h(e){$("select[dataid='"+e+"']").multipleSelect("refresh")}function T(e){this.selectedSerials.remove(e)}function I(t,n){var r=t.serialNumbers.filter(function(t){return e.unwrap(t.serialNo)===n});if(r=r.length>0?r[0]:null,r&&N()===r.businessUnitId){var a=t.selectedSerials().filter(function(t){return e.unwrap(t.serialNo)===n});0===a.length&&t.selectedSerials.push(r)}}function x(e,t){var n=U().filter(function(t){return t.itemId===e});0!==n.length&&(n=n[0],I(n,t))}function w(t,n){return n?(B(!0),i.findAndGetInventoryTransferLine(t,n,N()).then(function(t){B(!1),1==t.length?k(t[0],!0):0==t.length?a.showMessage(e.local("storeTransfer.no_items_found_to_transfer"),"#storeTransferMessage",5e3):(G(!0),X(t),V(t))},function(){B(!1),a.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)})):(a.showError(e.local("storeTransfer.no_search_criteria_provided"),"#storeTransferMessage",5e3),!1)}function S(t){X().length>0?(k(t,!0),X([]),m()):(B(!0),i.getInventoryTransferLine(t.id).then(function(e){B(!1),k(e,!1)},function(){B(!1),a.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)}))}function A(t){return InventoryType.Serialized===t.inventoryType&&0==t.selectedSerials().length?(a.showError(e.local("storeTransfer.no_items_with_such_serial_in_out_store"),"#storeTransferMessage",5e3),!1):!0}function E(t){if(InventoryType.Serialized!==t.inventoryType)return!1;var n=U().filter(function(e){return e.itemId===t.itemId});return 0===n.length?!1:(n=n[0],t.selectedSerials().forEach(function(t){I(n,e.unwrap(t.serialNo))}),!0)}function k(e,t){if(e){if(v(e),e.showProductCode(!0),t&&!A(e))return;if(E(e))return;var n=U().map(function(e){return e.itemId}),r=n.indexOf(e.itemId);if(-1===r){if(U.push(e),e.child)for(var a=0,o=e.child.length;o>a;a++)v(e.child[a],e),U.push(e.child[a])}else{var i=U()[r];if(U.remove(i),U.push(i),e.child)for(var s,a=0,o=e.child.length;o>a;a++)s=U().filter(function(t){return t.itemId===e.child[a].itemId&&t.variantKey===e.child[a].variantKey})[0],s?(U.remove(s),U.push(s)):(v(e.child[a],i),U.push(e.child[a]))}}}function C(e){var t=null;if(null!=e.variantKey){for(var n=0;n<U().length;n++){var r=U()[n];r.itemId==e.itemId&&null!=r.child&&(r.child.splice(e,1),0==r.child.length&&(t=r))}t&&U.remove(t)}U.remove(e),e.child&&e.child.forEach(function(e){U.remove(e)})}function M(){var t=e.toJS(U()),n=t.filter(function(e){return"string"==typeof e.transferQuantity&&(e.transferQuantity=0===e.quantityDecimalPlaces?parseInt(e.transferQuantity):parseFloat(e.transferQuantity)),e.transferQuantity>0&&e.visible}).filter(function(e){return e.inventoryType!==InventoryType.Serialized&&(null==e.parent||e.parent.inventoryType!==InventoryType.Serialized)}).map(function(e){return e.parent=null,e}),r=t.filter(function(e){return e.inventoryType===InventoryType.Serialized}).map(function(e){return e.serials=e.selectedSerials.map(function(e){return e.serialNo}),e.child=null,e}).filter(function(e){return e.serials.length>0});if(n=n.concat(r),0===n.length)return a.showError(e.local("storeTransfer.no_product_to_transfer"),"#storeTransferMessage",5e3),void 0;var o={storeOutId:N(),storeInId:R(),refNum:j(),inventoryTransferLines:e.toJS(n)};o.inventoryTransferLines.forEach(function(e){e.parent=null,e.child&&e.child.forEach(function(e){e.parent=null})}),B(!0),i.storeTransfer(o).then(function(t){B(!1),t?(a.showMessage(e.local("storeTransfer.storeTransferSuccess")+' <a href="#store-transfer-details/'+t+'">'+e.local("storeTransfer.details")+"</a>","#storeTransferMessage",1e4),Q()?U().forEach(function(e){e.inventoryType===InventoryType.Serialized?e.selectedSerials([]):e.transferQuantity(0)}):U.removeAll(),j(null)):a.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)},function(){B(!1),a.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)})}function F(){if(R()==N())return a.showError(e.local("storeTransfer.storesAreEqualError"),"#storeTransferMessage",5e3),void 0;var t=!0,n=[];if(U().forEach(function(r){var a=e.isComputed(r.transferQuantity)||r.transferQuantity.isValid();t=t&&a,a||n.push(e.local("storeTransfer.invalid_transfer_quantity_for_item",null,[r.name]))}),!t){var r=n.join("<br />");return a.showError(r,"#storeTransferMessage",5e3),void 0}a.showConfirmation(e.local("storeTransfer.storeTransferConfirmationTitle"),e.local("storeTransfer.storeTransferConfirmationMessage"),M)}function P(e,t){return t.keyCode>=48&&t.keyCode<=57?!0:46===t.keyCode?e.quantityDecimalPlaces>0&&-1===t.target.value.indexOf("."):!1}function O(e){return-1!==Y().indexOf(e.itemId)}function L(e){e.expanded(!e.expanded())}var _=e.observableArray([]),N=e.observable(),R=e.observable(),j=e.observable(),D=e.observable(null),q=!1,V=e.observableArray(),U=e.observableArray(),B=e.observable(!1),G=e.observable(!1),z=e.observable(),Q=e.observable(l.storeTransferFullList).extend({rateLimit:500}),J=e.observable(0),W=200,K=e.observable(0),H=e.observableArray(),Y=e.observableArray(),X=e.observable([]);t.on(s.scannerReadEvent+":store-transfer").then(function(e){var t=e.e;if(t&&"INPUT"==t.target.tagName){var n=t.target.getAttribute("dataid");n?(x(n,e.data),t.target.value="",h(n)):w(null,e.data)}else w(null,e.data)}),Q.subscribe(function(e){l.storeTransferFullList=e,l.saveFullList(),J(0),u(),e?p(D()):D(null)});var Z=e.computed(function(){return _().filter(function(t){return e.unwrap(t.id)!=N()})});return D.subscribe(function(e){window.clearTimeout(q),J(0),e?q=window.setTimeout(p,1e3):(V.removeAll(),Q()&&(q=window.setTimeout(p,1e3)))}),ProductTypes={Regular:0,Variant:1},InventoryType={Standard:0,Serialized:1,NonInventory:2},N.subscribe(function(){var e=U().filter(function(e){return e.inventoryType===InventoryType.Serialized});0!==e.length&&(e.forEach(function(e){e.selectedSerials([])}),Q()&&p())}),{activate:g,addLine:S,deleteRow:C,transfer:F,cancelSearch:f,stores:_,storesIn:Z,storeOutId:N,storeInId:R,refNum:j,searchString:D,foundProducts:V,inventoryTransferLines:U,isLoading:B,isSearchOpened:G,qtyKeyPress:P,removeSerial:T,setupSerialsMultiSelect:y,isStoreTransferEnabled:z,fullList:Q,pagination:H,gotoPage:c,lineVisible:O,expandLine:L}});
define('viewmodels/storeTransfer/storeTransferDetails',["knockout","plugins/router","common/dateUtils","services/text","repositories/businessUnitRepository","repositories/presentationApi/productsRepository","viewmodels/header"],function(e,t,n,r,o,a,i){function s(t){a.storeTransferDetails(t).then(function(t){t?(u.code(t.code),u.refNum(t.refNum),u.vendor(t.vendor),u.storeOut(t.storeOut),u.storeIn(t.storeIn),u.date(n.formatDateTime(t.date)),u.employee(t.employee),u.inventoryTransferLines(t.inventoryTransferLines),t.vendor?i.navigationPath(e.local("shell.poReceivingDetails")):i.navigationPath(e.local("shell.storeTransfersDetails")),document.title=i.navigationPath()):(u.code(null),u.refNum(null),u.vendor(null),u.storeOut(null),u.storeIn(null),u.date(null),u.employee(null),u.inventoryTransferLines.removeAll())},function(){common.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferDetailsMessage",5e3)})}function l(){var e="﻿";e+=u.storeOut()?"Store Transfer ID: "+u.code()+",Ref Num: "+(u.refNum()||"")+",Store Out: "+u.storeOut():"PO Receiving ID: "+u.code()+",Ref Num: "+(u.refNum()||"")+",Vendor: "+u.vendor(),e+=",Store In: "+u.storeIn()+",Date: "+u.date()+",Employee: "+u.employee()+"\r\n"+"ID,Name,UPC,SKU,Cost,"+(u.storeOut()?"Transfer Qty":"Received Qty"),u.inventoryTransferLines().forEach(function(t){e+="\r\n"+t.productCode+","+r.csvEscape(t.name)+","+r.csvEscape(t.upc)+","+r.csvEscape(t.sku)+","+t.cost+","+t.transferQuantity});var t=u.storeOut()?"StoreTransferDetails.csv":"POReceivingDetails.csv",n=document.getElementById("storeTransferDetailsLink"),o=new Blob([e],{type:"text/csv"}),a=window.URL.createObjectURL(o);e=null,n.href=a,n.download=t,n.click(),window.URL.revokeObjectURL(a)}var u={code:e.observable(),refNum:e.observable(),vendor:e.observable(),storeOut:e.observable(),storeIn:e.observable(),date:e.observable(),employee:e.observable(),inventoryTransferLines:e.observableArray(),back:function(){window.history.back()}};return{activate:s,model:u,exportTableData:l}});
define('viewmodels/storeTransfer/storeTransfersReport',["knockout","moment","plugins/router","data/common","common/numericUtils","common/dateUtils","models/dateSpan","services/text","services/dataTableText","repositories/businessUnitRepository","repositories/presentationApi/productsRepository","repositories/vendorsRepository","viewmodels/header"],function(e,t,r,n,o,a,i,s,l,u,c,d,p){function m(){S&&(window.clearTimeout(L),N=0,L=window.setTimeout(S.ajax.reload,200))}function f(){"#po-receiving-report"===location.hash?(q("POReceiving"),M(null),p.navigationPath(e.local("shell.poReceivingReport"))):(q("StoreTransfer"),k(null),p.navigationPath(e.local("shell.storeTransfersReport")))}function g(){n.showLoader(R),y()}function v(e){r.navigate("store-transfer-details/"+e)}function b(t,r){t.start=N*t.length;var n={};e.computed(function(){n={reportMode:q(),lang:s.getLang().toUpperCase(),defaultLang:s.getDefaultLang().toUpperCase(),startDate:j().dateFrom.toISOString(),endDate:j().dateTo.toISOString(),vendorId:k(),storeOutId:M(),storeInId:F(),employeeId:O(),searchString:A(),orderColumn:t.order[0].column,orderDir:"desc"===t.order[0].dir?1:0,start:t.start,length:t.length,details:t.details}}).dispose();var o=$.post("api/Products/GetStoreTransfersReport",n);return o.then(function(e){"function"==typeof r&&(e&&e.data&&(e.data=e.data.map(function(e){return e.thirdField="#po-receiving-report"===location.hash?e.vendor:e.storeOut,e})),r(e))}),o}function y(){S=$("#storeTransfersReportTable").DataTable({processing:!0,serverSide:!0,ajax:b,info:!1,paging:!0,lengthChange:!1,language:l.getLanguage(),autoWidth:!1,language:l.getLanguage(),columns:[{data:"code",sWidth:"60px"},{data:"refNum"},{data:"thirdField"},{data:"storeIn"},{data:"totalQuantity"},{data:"totalCost",render:function(e){return o.formatCurrency(e)}},{data:"date",render:function(e){return a.formatDateTime(e)}},{data:"employee"}],order:D,createdRow:function(e,t){e&&t&&t.id&&e.addEventListener("click",function(){v(t.id)})}}),S.on("init",function(){0!==N&&S.page(N).draw(!1)}),S.on("page",function(){N=S.page.info().page}),S.on("order",function(){D[0][0]=S.order()[0][0],D[0][1]=S.order()[0][1]})}function h(){A(""),f(),V("#po-receiving-report"===location.hash?e.local("poReceiving.vendor"):e.local("storeTransfer.storeOut")),C.removeAll(),P.removeAll(),_(!0);var t=u.loadAllBusinessUnitsByEmployeeAsync(),r=u.getStoreTransferEmployees();return $.when(t,r).always(function(){_(!1)}).fail(function(){n.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)}),t.then(function(t){t.splice(0,0,{id:null,storeName:e.local("storeTransfer.all")}),C(t)}),r.then(function(t){t.splice(0,0,{id:null,name:e.local("storeTransfer.all")}),P(t)}),f(),d.loadAllAsync().then(function(t){t.splice(0,0,{id:null,name:e.local("storeTransfer.all")}),E(t)},function(){n.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)}).always(function(){_(!1)})}function T(e){B+="\r\n"+e.code+(U?","+s.csvEscape(e.name)+",":",")+s.csvEscape(e.storeOut)+","+s.csvEscape(e.storeIn)+","+e.totalQuantity+","+e.totalCost+(e.storeIn?","+a.formatDateTime(e.date)+",":",,")+s.csvEscape(e.employee)+","+s.csvEscape(e.refNum)+","+s.csvEscape(e.serials)}function I(e){B+="\r\n"+e.code+","+s.csvEscape(e.refNum)+","+s.csvEscape(e.vendor)+","+s.csvEscape(e.storeIn)+","+e.totalQuantity+","+e.totalCost+","+a.formatDateTime(e.date)+","+s.csvEscape(e.employee)}function w(t,r){U="StoreTransfer"===q()&&r.delegateTarget.hasAttribute("data-details"),B="﻿",B+="StoreTransfer"===q()?"ID"+(U?",Product,":",")+"Store Out,Store In,Total Qty,Total Cost,Date,Employee,Ref Num,Serial Numbers":"ID,Ref Num,Vendor,Store In,Total Qty,Total Cost,Date,Employee";var o={order:[{column:D[0][0],dir:D[0][1]}],start:0,length:999999,details:U};_(!0);var a="StoreTransfer"===q()?T:I,i=b(o);i.then(function(e){e.data.forEach(a);var t="StoreTransfer"===q()?"StoreTransfersReport.csv":"POReceivingsReport.csv",r=document.getElementById("storeTransferReportLink"),n=new Blob([B],{type:"text/csv"}),o=window.URL.createObjectURL(n);_(!1),B=null,r.href=o,r.download=t,r.click(),window.URL.revokeObjectURL(o)},function(){_(!1),n.showError(e.local("storeTransfer.unexpectedError"),"#storeTransferMessage",5e3)})}function x(){return{cacheViews:!1,applyBindings:!0}}var S,A=e.observable().extend({rateLimit:1e3}),E=e.observableArray(),k=e.observable(),C=e.observableArray(),M=e.observable(),F=e.observable(),P=e.observableArray(),O=e.observable(),L=!1,_=(e.observableArray(),e.observable(!1)),R="#storeTransferReport",N=0,D=[[0,"asc"]],j=e.observable(new i(t().startOf("day"),t().endOf("day"),e.T("date-filter/date-filter.today"))),q=e.observable(),V=e.observable("");q.subscribe(m),A.subscribe(m),j.subscribe(m),k.subscribe(m),M.subscribe(m),F.subscribe(m),O.subscribe(m);var U,B;return{activate:h,attached:g,searchString:A,dateRange:j,vendors:E,vendorId:k,stores:C,storeOutId:M,storeInId:F,employees:P,employeeId:O,isLoading:_,reportMode:q,binding:x,exportTableData:w,poReceivingThirdField:V}});
define('viewmodels/stores/newStore',["knockout","plugins/router","plugins/dialog","repositories/businessUnitRepository","data/config"],function(e,t,r,n,o){function a(){o.fetchConfig().then(function(e){2!==e.planCode&&t.navigate("stores"),c(!(2===e.planCode||3===e.planCode))}),l(e.local("storeSettings/newStore.defaultStoreName")),u(""),d(""),p(!1)}function i(){d(""),l()&&(p(!0),n.newStore(l(),u()).then(function(t){p(!1),t===!1?d(e.local("storeSettings/newStore.alreadyExists")):r.show(new r.MessageBox(e.local("storeSettings/newStore.receiveNotification"),e.local("storeSettings/newStore.requestSubmited"),[{text:"OK",value:!0}],!0,{"class":"new-register-popup"})).then(function(){p(!0),s()})},function(t){p(!1),t&&t.responseJSON&&t.responseJSON.message?d(t.responseJSON.message):d(e.local("registerSettings/newRegister.unexpectedError"))}))}function s(){t.navigate("stores")}var l=e.observable().extend({required:!0}),u=e.observable().extend({maxlength:1e3}),c=e.observable(!1),d=e.observable(),p=e.observable(!1);return{activate:a,storeName:l,description:u,isLoading:p,done:i,cancel:s,errorMessage:d,isEssentialPlan:c}});
define('viewmodels/stores/store-settings-tabs/billing',["knockout","repositories/businessUnitRepository","data/common"],function(e,t,r){function n(e){s=e}function o(){r.hideDataPicker($(".datePicker",s))}function a(){r.addDatePicker($(".datePicker",s),{minDate:0})}function i(e){l(e),a()}var s,l=e.observable();return{attached:n,model:l,fill:i,detached:o}});
define('viewmodels/stores/store-settings-tabs/contacts',["knockout"],function(e){function t(e){r(e)}var r=e.observable();return{model:r,fill:t}});
define('viewmodels/stores/store-settings-tabs/general',["knockout","data/config"],function(e,t){function n(n){r(n),r().orderFulfilmentInstalled=e.observable(t.config.isOrderFulfilmentApp),r().isCompanySettings=!1}var r=e.observable();return{model:r,fill:n}});
define('viewmodels/stores/store-settings-tabs/localization',["knockout"],function(e){function t(e){n(e)}var n=e.observable();return{model:n,fill:t}});
define('viewmodels/stores/store-settings-tabs/payment',["knockout","data/config"],function(e,t){function n(n){r(n),4===t.config.planCode&&(r().paymentGatewayType(2),o(!0)),r().ebtVisible=e.computed(function(){return 2==r().paymentGatewayType()&&t.ebtCardApp})}var r=e.observable(),o=e.observable();return{model:r,readOnly:o,fill:n}});
define('viewmodels/stores/store-settings-tabs/receipt',["knockout","repositories/receiptRepository","data/common","viewmodels/languageSelector"],function(e,t,n,r){function o(e){c=e}function a(){u=$("#templateUpload",c).fileDialog({onloadCallback:l})}function i(e){d(e),a()}function s(){u.show()}function l(){}var u,c,d=e.observable();return{attached:o,model:d,fill:i,showFileUpload:s,langs:r}});
define('viewmodels/stores/store-settings-tabs/registerList',["knockout","plugins/router","data/common","services/dataTableText","repositories/presentationApi/registersRepository","viewmodels/registerSettings/registerSettingsList"],function(e,t,n,r,o,a){function i(){c=$("#registerListTable").DataTable({processing:!0,serverSide:!0,info:!1,paging:!0,lengthChange:!1,language:r.getLanguage(),autoWidth:!1,ajax:function(e,t){e.stores=[{id:d}],p(!0),$("#registerListTable_processing").hide(),o.loadAll("POST",{enterpriseId:u,pagingRequest:e},!0).then(function(e){var n=Enumerable.From(e.data).Select(function(e){return new a.RegisterSettingsTableRow(e)}).ToArray();e.data=n,t(e)}).always(function(){p(!1)})},columns:[{data:"registerSetting()",render:function(t){var n=Enumerable.From(t.employees).Select(function(e){return e.fullName}).ToArray().join(", ");return $("<b>").text(t.name).prop("outerHTML")+$("<p>").addClass("register-settings-employees-list").text(e.T("registerSettings/registerSettingsList.employees_")+n).prop("outerHTML")}},{data:"registerSetting().businessUnitName"},{data:"registerSetting().isActive",render:function(t){return 1==t?e.T("registerSettings/registerSettingsList.active"):e.T("registerSettings/registerSettingsList.inactive")},sWidth:"150px",bSearchable:!1,bSortable:!1}],order:m,createdRow:function(t,n,r){n.rowNum(r);var o=$(t);return o.addClass("editable"),o.attr({id:n.registerSetting().id}),o.attr("data-bind","click: edit"),e.applyBindings(n,o[0]),o[0]}})}function s(t){t?(u=e.unwrap(t.enterpriseId),d(t.storeId)):(u=null,d(null))}function l(){i()}var u,c,d=e.observable(),p=e.observable(!1),m=[[0,"asc"]];return{loading:p,attached:l,fill:s}});
define('viewmodels/stores/store-settings-tabs/registers',["knockout","plugins/router","repositories/businessUnitRepository","data/common"],function(e,t){function n(e){o(e)}function r(){t.navigate("registerSettings")}var o=e.observable();return{model:o,fill:n,showRegisterSettings:r}});
define('viewmodels/stores/store-settings-tabs/taxes',["knockout","data/common"],function(e,t){function n(e){i(e)}function r(n,r){r.preventDefault(),i().taxesTabErrors().length=0;var o=e.unwrap(i());o.addTax(n)||t.showError(e.local("storeSettings/store-settings-tabs/taxes.no_taxes_defined"),"#storeTaxesMessages",5e3)}function o(t){i().taxesTabErrors().length=0;var n=e.unwrap(i());n.removeTax(t)}function a(t){return{filter_placeholder:e.T("taxes.select_tax-tax"),width:"80%",optionText:"locName",optionId:"id",data:i().taxes,editable:!1,single:!0,filter:!0,selectAll:!1,selectedItem:t.id,valueText:e.observable(t.locName||(t.tax&&t.tax()?t.tax().locName:"")),noRadio:!0,autohide:!0,multiple:!1}}var i=e.observable();return{model:i,fill:n,setupTaxesSelect:a,removeTax:o,addTax:r}});
define('viewmodels/stores/store-settings-tabs/tips',["knockout"],function(e){function t(e){n(e),n().isCompanySettings=!1}var n=e.observable();return{model:n,fill:t}});
define('viewmodels/stores/storeSettings',["jquery","knockout","plugins/router","data/config","viewmodels/stores/store-settings-tabs/general","viewmodels/stores/store-settings-tabs/contacts","viewmodels/stores/store-settings-tabs/registers","viewmodels/stores/store-settings-tabs/receipt","viewmodels/stores/store-settings-tabs/tips","viewmodels/stores/store-settings-tabs/taxes","viewmodels/stores/store-settings-tabs/payment","viewmodels/stores/store-settings-tabs/localization","viewmodels/stores/store-settings-tabs/registerList","data/common","repositories/presentationApi/storesRepository","data/permissions","common/paymentGatewayType"],function(e,t,n,r,o,a,i,s,l,u,c,d,p,m,f,g,v){function b(e){k=e}function y(t){return t=t||"",e.when(r.fetchConfig(),f.get(t)).then(function(e,t){M(e[0].isCardPaymentApp),C(e[0].ebtCardApp),F(e[0].isCardPaymentApp||t.externalPayment()),t.isAdmin=g.hasPermission("ADM"),t.paymentGatewayTypeEnum=v,t.ebtInstalled=C,A(t),o.fill(t),a.fill(t),i.fill(t),s.fill(t),c.fill(t),l.fill(t),u.fill(t),d.fill(t),p.fill(t)},function(){})}function h(){m.showLoader(E),m.showRightPanelContent(E),S()}function T(e){e?n.navigate("store-settings/"+e):n.navigate("store-settings")}function I(){if(!P){P=!0;var r=!0,i=[o,a,s,l,u,c,d],p=["generalTabErrors","contactsTabErrors","receiptTabErrors","tipsTabErrors","taxesTabErrors","paymentTabErrors","localizationTabErrors"];M()||(i.splice(5,1),p.splice(5,1)),A().storeTaxes().length>A().maxTaxNumber&&A().taxesTabErrors().push("Limit number of taxes is "+A().maxTaxNumber);for(var g=0;g<i.length;g++){var v=i[g],b=v.model();0!=b[p[g]]().length||b.validationModel&&!b.validationModel.isValid()?(x.setTabErrors(g),b[p[g]].showAllMessages(),r=!1):x.clearTabErrors(g)}r?f.save(A()).then(function(r){0===r.length?(e("#saveMessages").empty(),m.showMessage(t.T("storeSettings/storeSettings.saved_successfully"),"#saveMessages"),n.navigate("stores"),window.location.reload(!0)):r.forEach(function(e){m.showError(e,"#saveMessages",5e3)}),P=!1}):P=!1}}function S(){var n=[{name:t.T("storeSettings/storeSettings.general"),containerSelector:"#generalTab"},{name:t.T("storeSettings/storeSettings.contacts"),containerSelector:"#contactsTab"},{name:t.T("storeSettings/storeSettings.receipt"),containerSelector:"#receiptTab"},{name:t.T("storeSettings/storeSettings.tips"),containerSelector:"#tipsTab",visibleObservableVariable:F},{name:t.T("storeSettings/storeSettings.taxes"),containerSelector:"#taxesTab"},{name:t.T("storeSettings/storeSettings.payment_gateway"),containerSelector:"#paymentTab"},{name:t.T("storeSettings/storeSettings.localization"),containerSelector:"#localizationTab"},{name:t.T("storeSettings/storeSettings.registers"),containerSelector:"#registerListTab"}];M()||n.splice(5,1),x=e(".store-settings-tabs").tabControl({tabs:n}),k&&x.goToTab(k),k=0}function w(){n.navigate("stores")}var x,A=t.observable(),E="div.pane-right div.store-settings",k=0,C=t.observable(),M=t.observable(),F=t.observable(),P=!1;return{show:T,activate:y,attached:h,save:I,cancel:w,setDefaultTabIdx:b,cardPaymentInstalled:M,showTipsTab:F,ebtInstalled:C}});
define('viewmodels/stores/storesList',["knockout","moment","plugins/router","plugins/dialog","durandal/system","data/baseCommon","data/common","data/config","common/utils","common/numericUtils","common/dateUtils","viewmodels/base/baseListViewModel","viewmodels/stores/storeSettings","models/base/entityTableRow","repositories/base/baseRepository","repositories/presentationApi/storesRepository","services/demo"],function(e,t,n,r,o,a,i,s,l,u,c,d,p,m,f,g,v){function b(){b.superclass.constructor.apply(this,arguments)}var y=[[0,"asc"]];a.extend(b,d),$.extend(b.prototype,{name:"StoresList",moduleId:"viewmodels/stores/storesList",listContainer:"#storesTable",containerSelector:"div.pane-right > div.item-list",title:e.observable(e.T("stores/storesList.stores")),pageNo:0,sortOrder:y,defaults:{tableDefinition:{serverSide:!0,ajax:this.ajaxLoad,columns:[{data:"entity",render:function(t){var n=Enumerable.From(t.employees).Select(function(e){return e.fullName}).ToArray().join(", ");return $("<b>").text(t.name).prop("outerHTML")+$("<p>").addClass("store-settings-employees-list").html(e.T("stores/storesList.employees_")+"&nbsp;"+l.escapeHtml(n)).prop("outerHTML")}},{data:"entity.isActive",render:function(t){return 1==t?e.T("stores/storesList.active"):e.T("stores/storesList.inactive")},sWidth:"150px",bSearchable:!1}],order:y}},initialize:function(){b.superclass.initialize.apply(this,arguments);var e=this;e.repo=new f({routeType:"ByEntityName",modelDesc:{entityName:"Stores"}})},activate:function(){return b.superclass.activate.apply(this,arguments),o.log(this.name+" activating"),s.isLoaded?void 0:s.fetchConfig()},onAjaxLoad:function(e,t,n){var r=this;this.repo.load(this.getLoadListParams(e),function(e){var t=Enumerable.From(e.data).Select(function(e){return new m({id:e.id,name:e.name,employees:e.employees,isActive:e.isActive},"Store",r.editCallback,r.deleteCallback)}).ToArray();e.data=t,n&&n(e)},null,!1,!0)},newStore:function(){if(2===s.config.planCode)n.navigate("new-store");else{var t="";s.isDemo&&(window.goFreedom=v.goFreedom,t='onclick="return goFreedom();" '),r.show(new r.MessageBox(e.local("messages.pleaseContactUs")+"<br />"+"<a href='https://ehopper.com/freedom/' "+t+"class='btn btn-lg btn-success btn-upgrade-inline' target='_blank'>"+e.local("upgrade.dialogTitle")+"</a>",e.local("messages.mustFreedomPlan"),[{text:"OK",value:!0}],!0,{"class":"plan-warning-popup"}))}},editCallback:function(e){n.navigate("store-settings/"+e.entity.id)},deleteCallback:function(){alert("delete")},getLoadListParams:function(e){var t={};return $.extend({},e,t)},applyFilters:function(){this.loadData()}});var h=new b;return h});
define('viewmodels/supportAccess/supportAccess',["knockout","jquery","data/common","data/config"],function(e,t,n,r){function o(){s(!1);var t=window.localStorage.getItem("supportAccess");if(t){t=JSON.parse(t);var n=Math.round((new Date-new Date(t.date))%864e5%36e5/6e4);60>n&&(s(!0),d(e.T("supportAccess.loginTime")+(60-n)+e.T("supportAccess.minutes")),a(t))}}function a(e){l(e.enterpriseCode),u(e.email),c(e.tempPass)}function i(){var n=this;t.ajax({type:"GET",url:"api/Account/GetTempPassword",contentType:"application/json; charset=utf-8",dataType:"json"}).then(function(t){var o={enterpriseCode:e.T("supportAccess.accId")+r.config.enterpriseCode,email:e.T("supportAccess.email")+t.email,tempPass:e.T("supportAccess.tempPass")+t.password,date:new Date};n.loadDate(o),s(!0),d(e.T("supportAccess.loginTime")+60+e.T("supportAccess.minutes")),window.localStorage.setItem("supportAccess",JSON.stringify(o))},function(){})}var s=e.observable(!1),l=e.observable(),u=e.observable(),c=e.observable(),d=e.observable();return{generatePassword:i,activate:o,isPassGenerated:s,accountId:l,email:u,tempPass:c,loadDate:a,loginTimeText:d}});
define('viewmodels/taxAgencies/models/taxAgencyModel',["knockout"],function(e){function t(t){var n=this;n.id=t.id,n.name=e.observable(t.name).extend({required:{message:e.T("common.thisFieldIsRequired")}}),n.isActive=e.observable(t.isActive),n.enterpriseId=e.observable(t.enterpriseId),n.readonly=e.observable(!!n.id),n.errors=e.validation.group(n,{deep:!0}),n.setupUniqueNameConstraint(t.otherNames,e.T("taxAgenies/taxAgencyManage.tax_agency_name_should_be_unique")),n.toFlatModel=function(){return{id:n.id,isActive:n.isActive(),name:n.name(),enterpriseId:n.enterpriseId()}}}return t.prototype.setupUniqueNameConstraint=function(e,t){null!=e&&e.length>0&&this.name.extend({uniqueName:{params:{array:e,ignore:[]},message:t}})},t});
define('viewmodels/taxAgencies/taxAgencyManage',["knockout","plugins/router","repositories/presentationApi/taxAgenciesRepository","data/common","viewmodels/taxAgencies/models/taxAgencyModel"],function(e,t,n,r,a){function o(t){var r;return t?(r=n.getById(t),d(e.T("taxAgenies/taxAgencyManage.edit_tax_agency"))):(r=n.create(),d(e.T("taxAgenies/taxAgencyManage.new_tax_agency"))),r.then(function(e){p(new a(e))})}function i(e){$(".checkbox",e).checkbox()}function s(e){e?t.navigate("tax-agencies/tax-agency/"+e):t.navigate("tax-agencies/tax-agency")}function l(){0===p().errors().length?n.save(p().toFlatModel()).then(function(t){0===t.length?c():t.forEach(function(t){r.showError(e.T(t),m,5e3)})}):p().errors.showAllMessages()}function u(){c()}function c(){t.navigate("tax-agencies")}var d=e.observable(e.T("taxAgenies/taxAgencyManage.new_tax_agency")),p=e.observable(),m="#taxAgencySaveMessages";return{activate:o,attached:i,save:l,cancel:u,show:s,title:d,model:p}});
define('viewmodels/taxAgencies/taxAgenciesList',["knockout","plugins/router","repositories/presentationApi/taxAgenciesRepository","viewmodels/taxAgencies/taxAgencyManage","data/common","services/text","services/dataTableText"],function(e,t,n,r,a,o,i){function s(e){h=e,a.showLoader(I),v()}function l(t){var o=this;o.entity=e.observable(t),o.rowNum=e.observable(),o.edit=function(){r.show(o.entity().id)},o.selected=e.observable(!1),o.selectItem=function(e,t){t.stopPropagation(),e.selected(!e.selected()),u()},o.deleteRow=function(t,r){r.stopPropagation(),a.showConfirmation(void 0,e.T("taxAgenies/taxAgeniesList.are_you_sure_you_want_to_delete_selected_tax_agency"),function(){n.remove(o.entity().id).then(function(t){t?table.row("#row"+o.entity().id).remove().draw(!1):a.showError(e.T("taxAgenies/taxAgeniesList.the_tax_agency_has_taxes_assigned_please_delete_those_taxes_first",null,o.entity().name),"#messages")})})}}function u(){E(c().length>0)}function c(){if(x){var e=x.filter(function(e){return e.selected()}).map(function(e){return e.entity().id});return e}return[]}function d(e){if(x){var t=x.filter(function(t){return t.entity().id===e});if(t&&t.length>0)return t[0].entity().name}return""}function p(e){a.showError(e.join("<br />"),"#messages",5e3)}function m(e){for(var t=0;t<x.length;t++)if(x[t].entity().id==e){x.splice(t,1);break}}function f(e){table.row("#row"+e).remove().draw(!1),m(e)}function g(){var t=c();t.length>0&&a.showConfirmation(void 0,e.T("taxAgenies/taxAgeniesList.are_you_sure_you_want_to_delete_selected_tax_agencies"),function(){n.removeMany(t).then(function(t){if(t.removed&&t.removed.forEach(function(e){f(e)}),t.errors){var n=[];t.errors.forEach(function(t){var r=t.data;n.push(e.T("taxAgenies/taxAgeniesList.the_tax_agency_has_taxes_assigned_please_delete_those_taxes_first",null,d(r)))}),n.length>0&&p(n)}})})}function v(){n.get().done(function(t){x=Enumerable.From(t).Select(function(e){return new l(e)}).ToArray(),table=$("#taxAgeniesTable",h).DataTable({language:i.getLanguage(),processing:!0,info:!1,paging:!0,lengthChange:!1,autoWidth:!1,data:x,columns:[{bSortable:!1,bSearchable:!1,data:null,render:function(e){return'<div class="checkbox"><input type="checkbox" id="chk'+e.entity().id+'" data-bind="checked: selected"><label for="chk'+e.entity().id+'" data-bind="click: selectItem"></label></div>'}},{data:"entity().name"},{data:"entity().isActive",render:function(t){return t===!0?e.T("taxAgenies/taxAgeniesList.active"):e.T("taxAgenies/taxAgeniesList.inactive")},sWidth:"150px",bSearchable:!1},{data:null,render:function(){return'<input type="button" class="delete-row-button" data-bind="click: deleteRow" />'},width:"50px",className:"center no-padding",bSortable:!1,bSearchable:!1}],order:A,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:"row"+n.entity().id}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),0!==w&&table.page(w).draw(!1),new $.fn.DataTable.SearchFilter(table),table.on("page",function(){S(!1),w=table.page.info().page}),table.on("order",function(e,t){S(!1),A[0][0]=table.order()[0][0],A[0][1]=table.order()[0][1],t.oApi._fnPageChange(t,w,!0)})}).always(function(){a.showRightPanelContent(I)})}function b(){r.show()}function y(){S(!1)}var h,T=e.observable(),I="div.pane-right > div.taxes-list",w=0,x=[],S=e.observable(),A=[[0,"asc"]],E=e.observable(!1);return S.subscribe(function(e){x&&(x.forEach(function(t){$("#chk"+t.entity().id+" + label").is(":visible")&&t.selected(e)}),u())}),{activate:y,attached:s,newTaxAgency:b,model:T,header:e.T("taxAgenies/taxAgeniesList.tax_agencies_list"),selectAll:S,deleteSelected:g,hasSelected:E}});
define('viewmodels/taxes/models/taxNameModel',["knockout","models/businessObjectNameModel","data/config","common/utils"],function(e,t,n,r){function a(t,r){a.superclass.constructor.apply(this,arguments),this.shortName=e.observable(t.shortName),r&&this.setupUniqueNameConstraint(t,r,e.T("taxes/taxManage.tax_name_must_be_unique")),this.name.extend({required:{message:e.T("taxes/taxManage.tax_name_is_required"),onlyIf:function(){return t.languageId===n.defaultLanguage}}})}return r.extend(a,t),a.prototype.toFlatModel=function(){var e=a.superclass.toFlatModel.apply(this,arguments);return e.taxId=this.taxId,e},a});
define('viewmodels/taxes/models/taxModel',["knockout","common/utils","services/text","data/config","viewmodels/taxes/models/taxNameModel"],function(e,t,n,r,a){function o(r,l){var u=this;u.parent=l;var c=n.getDefaultLang().toUpperCase();u.id=r.id;var d=r.names.map(function(e){return new a(e,r.otherNames)}),p=d.filter(function(t){return e.unwrap(t.languageId)===c});p.length>0?p=p[0]:(p=new a({name:"",shortName:"",description:"",languageId:c}),d.push(p)),d.forEach(function(e){e.name.subscribe(function(){})}),u.tempId=u.id?u.id:t.generateId(),u.isNew=u.id?!1:!0;var m=[];r.singleTaxes&&r.singleTaxes.forEach(function(e){var t=new o($.extend({},e,{taxTypes:r.taxTypes}));m.push(t)}),u.allSingleTaxes=e.observableArray(m);var f=m,g=f.filter(function(e){return e.isActive()});u.singleTaxes=e.observableArray(g),u.currentLocalizedName=e.observable(p),u.name=e.observable(""),u.displayName=e.observable(""),u.currentLanguageId=e.observable(""),u.nameValidation=p.name,u.names=e.observableArray(d),u.isActive=e.observable(r.isActive),u.isCascade=e.observable(r.isCascade),u.enterpriseId=e.observable(r.enterpriseId),u.taxCode=e.observable(r.taxCode),u.isGroup=e.observable(r.isGroup),u.taxAgencyId=e.observable(r.taxAgencyId),u.taxAgency=e.observable(r.taxAgency),u.taxAgency.extend({required:{message:e.T("taxes/taxManage.tax_Agency_is_required"),onlyIf:function(){return!u.isGroup()&&!u.taxAgencyId()}}}),u.isGroupChecker=e.observable(u.isGroup()?"1":"0"),u.isGroupChecker.subscribe(function(e){u.isGroup("0"===e?!1:!0)}),u.taxAgencies=e.observable(r.taxAgencies);var v=[];if(r.taxAgencyId&&v.push({id:e.observable(r.taxAgencyId),name:e.observable(r.taxAgency)}),u.selectedTaxAgencies=e.observableArray(v),u.selectedTaxAgencies.subscribe(function(){u.selectedTaxAgencies().length>0?(u.taxAgencyId(e.unwrap(u.selectedTaxAgencies()[0].id)),u.taxAgency(e.unwrap(u.selectedTaxAgencies()[0].name))):u.taxAgencyId("")}),u.taxTypeId=e.observable(r.taxTypeId),u.taxTypes=e.observableArray(r.taxTypes),u.taxTypes().forEach(function(t){t.locName=t.locName||e.T("taxes/taxTypes."+t.name)}),!r.taxTypeId&&r.taxTypes.length>0){var b=r.taxTypes.filter(function(e){return"standart"===e.name});b.length>0&&u.taxTypeId(b[0].id)}u.selectedChildTaxes=e.observableArray([]);var y=[];u.childTaxes=e.observableArray(y),u.properties=e.observable({}),u.appsData={},u.appsData&&Object.keys(r.appsData).forEach(function(t){u.appsData[t]=e.observable();var n=r.appsData[t],a={};Object.keys(n).forEach(function(t){a[t]=e.observable(n[t])}),u.appsData[t](a)}),u.recalcProperties=function(){var e=0;u.childTaxes().forEach(function(t){e+=Number(t.properties().rate())||0}),u.properties().rate(e)},u.recalcParentProperties=function(){var e=0;if(u.parent){var t=u.parent;t.childTaxes().forEach(function(t){e+=Number(t.properties().rate())||0}),t.properties().rate(e)}},u.selectedTaxType=e.computed(function(){var t=u.taxTypes().filter(function(t){return e.unwrap(u.taxTypeId)===t.id});return t=t.length>0?t[0]:null,s(u,r,t),t}),u.parent||(u.isGroup.subscribe(function(e){e?(u.childTaxes.push(u.getChildTemplate()),u.childTaxes.push(u.getChildTemplate())):u.childTaxes([])}),u.childTaxes.subscribe(function(){u.recalcProperties()})),u.selectedChildTaxes.subscribe(function(){var t=u.selectedChildTaxes();if(t.length>0){t=t[0],u.id=t.id,u.taxTypeId(t.taxTypeId()),u.properties().rate(t.properties().rate()),u.taxAgencyId(t.taxAgencyId()),u.taxAgency(t.taxAgency());var n=[];t.taxAgencyId()&&n.push({id:e.observable(t.taxAgencyId()),name:e.observable(t.taxAgency())}),u.selectedTaxAgencies(n),t.names().forEach(function(e){var t=u.names().filter(function(t){return t.languageId===e.languageId});t=t.length>0?t[0]:null,t||(t=new a({name:"",shortName:"",description:"",languageId:e.languageId}),u.names().push(t)),t.name(e.name()),t.shortName(e.shortName())}),u.name(t.name()),u.displayName(t.displayName()),u.parent&&u.parent.recalcProperties()}else u.id="",u.properties().rate(0)}),u.disabled=e.computed(function(){return u.selectedChildTaxes().length>0}),u.currentLanguageId.subscribe(function(t){if(!t)return u.currentLanguageId(c),void 0;var n=u.names().filter(function(n){return e.unwrap(n.languageId)===t});n=n.length>0?n[0]:null;var r="",o="";n?(r=n?e.unwrap(n.name):"",o=r,o||(o=p?e.unwrap(p.name):"")):(o=p?e.unwrap(p.name):"",r=""),n||(n=new a({name:"",shortName:"",description:"",languageId:t}),u.names().push(n)),u.currentLocalizedName(n),u.name(r),u.displayName(o),u.childTaxes().forEach(function(e){e.currentLanguageId(t)}),u.singleTaxes().forEach(function(e){e.currentLanguageId(t)})}),u.name.subscribe(function(e){var t=u.currentLocalizedName();t&&t.name(e)}),u.getErrors=function(){var t=[u.nameValidation,u.childTaxes,u.taxAgency];u.names().forEach(function(e){t.push(e.name)}),Object.keys(u.properties()).forEach(function(e){t.push(u.properties()[e])});var n=e.validation.group(t,{deep:!1});return n},r.childTaxes&&r.childTaxes.forEach(function(e){var t=new o($.extend({},e,{taxTypes:r.taxTypes}),u),n=f.filter(function(e){return e.id===t.id});n.length>0?(n=n[0],t.selectedChildTaxes.push(n)):n=null,y.push(t)}),u.getChildTemplate=function(){p=new a({name:"",shortName:"",description:"",languageId:c});var e=r.names.map(function(e){return e});return new o({taxTypes:r.taxTypes,isActive:!0,isGroup:!1,names:e,appsData:{}},u)},u.addChildTax=function(){var e=u.getChildTemplate();e.currentLanguageId(u.currentLanguageId()),u.childTaxes.push(e)},u.removeChildTax=function(e){u.childTaxes.remove(e)},u.canDeleteChildTaxes=e.computed(function(){return u.childTaxes().length>2}),u.toFlatModel=function(){var t={id:u.id,isActive:u.isActive(),isCascade:u.isCascade(),enterpriseId:u.enterpriseId(),taxCode:u.taxCode(),taxTypeId:u.taxTypeId(),properties:i(u),names:u.names().filter(function(e){return e.name().length>0}).map(function(e){return e.toFlatModel()}),taxAgency:u.taxAgency(),taxAgencyId:u.taxAgencyId(),childTaxes:u.childTaxes().map(function(e){return e.toFlatModel()})};if(u.appsData){var n={};Object.keys(u.appsData).forEach(function(t){n[t]={};var r=e.unwrap(u.appsData[t]);Object.keys(r).forEach(function(a){n[t][a]=e.unwrap(r[a])})}),t.appsData=n}return t}}function i(t){var n={},r=t.selectedTaxType();return r.propertiesArray().forEach(function(a){"number"===r.definition[a].type?n[a]=Number(e.unwrap(t.properties()[a])):"range"===r.definition[a].type}),n}function s(t,n,r){if(r){var a=!1;r.propertiesArray||(a=!0,r.propertiesArray=e.observableArray([]));var o=t.properties(),i=[];Object.keys(r.definition).forEach(function(s){if(o[s])o[s](n.properties?n.properties[s]:null);else{o[s]=e.observable(n.properties?n.properties[s]:null),i.push(o[s]),a&&r.propertiesArray().push(s);var l=o[s];l.extend({required:{message:e.T("taxes/taxManage.rate_is_required",null,s)}}),r.definition[s].mult,"number"===r.definition[s].type&&l.extend({number:!0}),(r.definition[s].min||0===r.definition[s].min)&&l.extend({min:r.definition[s].min}),(r.definition[s].max||0===r.definition[s].max)&&l.extend({max:r.definition[s].max}),l.subscribe(function(){t.recalcParentProperties()})}}),t.properties(o)}}return o});
define('viewmodels/taxes/taxManage',["knockout","plugins/router","repositories/presentationApi/taxesRepository","data/common","services/text","viewmodels/taxes/models/taxModel","viewmodels/languageSelector"],function(e,t,n,r,a,o,i){function s(t){I(!0);var r,i=!1;return t?(i=!1,r=n.getById(t),b(e.T("taxes/taxManage.edit_tax"))):(i=!0,r=n.create(),b(e.T("taxes/taxManage.new_tax"))),r.then(function(e){var t=new o(e);t.currentLanguageId(a.getDefaultLang().toUpperCase()),i&&t.isGroup(h()),y(t)})}function l(e){$(".checkbox",e).checkbox()}function u(e,n){h("combined"===n),e?t.navigate("taxes/tax/"+e):t.navigate("taxes/tax")}function c(){I(!1);var t=!0,a=y().getErrors(),o=[].concat(a());t=t&&0===a().length;var i=0;y().isGroup()&&y().childTaxes().forEach(function(e){var n=e.getErrors();t=t&&0===n().length,e.properties&&e.properties()&&e.properties().rate&&(i+=new Number(e.properties().rate())),n().length>0&&(o=o.concat(n()),n.showAllMessages())}),i>100&&r.showError(e.T("taxes/taxManage.rate_should_be_less_100"),"#taxSaveMessages",5e3),t?n.save(y().toFlatModel()).then(function(t){0===t.length?p():t.forEach(function(t){r.showError(e.T(t),"#taxSaveMessages",5e3)})}).always(function(){I(!0)}):(I(!0),a.showAllMessages())}function d(){p()}function p(){t.navigate("taxes")}function m(t){return{filter_placeholder:e.T("taxes/taxManage.tax_Agency_placeholder"),optionText:"name",optionId:"id",data:t.parent?t.parent.taxAgencies:t.taxAgencies,editable:!0,single:!0,filter:!0,selectAll:!1,selectedItems:t.selectedTaxAgencies,valueText:t.taxAgency,autohide:!0,disabled:t.disabled,validationElement:t.taxAgency,uniqeValidation:!0,uniqeValidationMessage:e.T("taxAgenies/taxAgencyManage.tax_agency_name_should_be_unique"),multiple:!1}}function f(t){return{filter_placeholder:e.T("taxes/taxManage.tax_component_name"),optionText:"name",optionDisplayText:"displayName",optionId:"id",data:t.parent.singleTaxes,editable:!0,single:!0,filter:!0,selectAll:!1,selectedItems:t.selectedChildTaxes,localizedValueText:t.currentLocalizedName,validationElement:t.nameValidation,uniqeValidation:!0,uniqeValidationMessage:e.T("taxes/taxManage.tax_name_must_be_unique"),autohide:!0,multiple:!1}}function g(e){var t=y();t&&t.removeChildTax(e)}function v(){var e=y();e&&e.addChildTax()}var b=e.observable(e.T("taxes/taxManage.new_tax")),y=e.observable(),h=e.observable(!1),T=e.observable(!1),I=e.observable(!0);i.selectedLanguage.subscribe(function(e){var t=y();t&&t.currentLanguageId(e)});var x=5;return{setupTaxAgencyMultiSelect:m,setupSingeTaxMultiSelect:f,removeTaxFromGroup:g,addTaxToGroup:v,canBeSaved:I,activate:s,attached:l,save:c,cancel:d,show:u,title:b,model:y,langs:i,isShowGroupSelector:T,addTaxAllowed:e.computed(function(){return y()?y().childTaxes().length<x:!0})}});
define('viewmodels/taxes/taxesList',["knockout","plugins/router","repositories/presentationApi/taxesRepository","viewmodels/taxes/taxManage","data/common","services/text","plugins/dialog","common/utils","services/dataTableText"],function(e,t,n,r,a,o,i,s,l){function u(e){g=e,a.showLoader(b),m()}function c(t){var n=this;n.tax=e.observable(t),n.rowNum=e.observable(),n.edit=function(){r.show(n.tax().id)}}function d(){y=0,table&&(table.clear(),table.rows.add(w()),table.draw())}function p(){return n.get().then(function(e){if(e){var t=e.map(function(e){return new c(e)});x(t)}else x([])},function(){})}function m(){table=$("#taxesTable",g).DataTable({language:l.getLanguage(),processing:!0,info:!1,paging:!0,lengthChange:!1,autoWidth:!1,data:w(),columns:[{data:"tax().name"},{data:"tax().rate",render:function(e){return e+"%"}},{data:"tax().taxAgency"},{data:"tax().isGroup",render:function(t){return t===!0?e.T("taxes/taxesList.yes"):e.T("taxes/taxesList.no")},sWidth:"150px",bSearchable:!1},{data:"tax().isActive",render:function(t){return t===!0?e.T("taxes/taxesList.active"):e.T("taxes/taxesList.inactive")},sWidth:"150px",bSearchable:!1}],order:h,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:n.tax().id}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),0!==y&&table.page(y).draw(!1),new $.fn.DataTable.SearchFilter(table),table.on("page",function(){y=table.page.info().page}),table.on("order",function(e,t){h[0][0]=table.order()[0][0],h[0][1]=table.order()[0][1],t.oApi._fnPageChange(t,y,!0)})}function f(){var e={"margin-left":($(window).width()-400)/2+"px","margin-top":($(window).height()-205)/2+"px",width:"750px"};dialogModel=new T({style:e}),dialogModel.autoclose=!0,i.show(dialogModel)}var g,v=e.observable(),b="div.pane-right > div.taxes-list",y=0,h=[[0,"asc"]],T=function(e){this.options=e,this.autoclose=!0,this.selectSimpleTax=function(){var e=this;i.close(e),r.show(null,"simple")},this.selectCombinedTax=function(){var e=this;i.close(e),r.show(null,"combined")},this.closeDialog=function(){i.close(this)},this.viewUrl="views/dialogs/taxCombinedDialog.html",T.superclass.constructor.apply(this,arguments)};s.extend(T,i.MessageBox),T.prototype.getView=void 0;var I=e.observable(!1),x=e.observableArray([]),w=e.computed(function(){return I()?x():x().filter(function(e){return e.tax().isActive})});return I.subscribe(function(){d()}),{activate:p,attached:u,isShowInactive:I,newTax:f,model:v,header:e.T("taxes/taxesList.taxes_list")}});
define('viewmodels/tips/tipsList',["knockout","moment","plugins/router","durandal/system","data/baseCommon","data/common","data/config","common/dateUtils","common/numericUtils","viewmodels/base/baseListViewModel","models/base/entityTableRow","repositories/base/baseRepository","repositories/presentationApi/ordersRepository","common/dateUtils","viewmodels/controls/storesFilter"],function(e,t,n,r,a,o,i,s,l,u,c,d,p,s,m){function f(t){function n(e){return r.employeeRepo.load({id:e}).then(function(e){r.employees(e)})}var r=this;r.callback=t,r.employee=e.observable(""),r.employees=e.observableArray(),r.dateRange=e.observable(),r.dateRange.subscribe(function(){r.apply()}),r.initialize=function(){return $.when([n(i.enterpriseId)])},r.stores=e.observableArray(),r.isInitialized=function(){return r.dateRange()?!0:!1},r.employeeRepo=new d({modelDesc:{entityType:"Business",entityName:"EmployeeByEnterprise"}}),r.apply=function(){r.callback&&r.callback()}}function g(){g.superclass.constructor.apply(this,arguments);var e=this;this.storesFilter=new m(this.filter.stores),this.storesFilter.initialize().then(function(){e.storesFilter.storeChanged.subscribe(function(){e.applyFilters()})})}function v(e){I=!1;var t={},n=["transactionUpc","tenderData","orderTypeName","orderStatusCode","total","tenderDate","store","employeeName","tips"],r=[];$("#tipsTable > thead > tr > th").each(function(e,r){t[$(r).text()]=n[e]}),$("#tipsTable > tfoot > tr > th").each(function(e,t){r.push($(t).text())}),e.data=e.data.map(function(e){return e.tenderData=h(e.tenderData),e.orderStatusCode=b(e.orderStatusCode),e.tenderDate=e.tenderDate?s.formatDateTime(e.tenderDate):"",e}),$("#tipsTable").DataTable().exportData({data:e.data,columnsCount:n.length,columns:t,totalRow:r,fileNamePrefix:"tips-report-"})}function b(t){switch(t){case 1:return e.T("tips/tipsList.statusNotPaid");case 3:return e.T("tips/tipsList.statusPartiallyPaid");case 4:return e.T("tips/tipsList.statusPaid");case 5:return e.T("tips/tipsList.statusPartiallyRefunded");case 6:return e.T("tips/tipsList.statusRefunded");case 7:return e.T("tips/tipsList.statusVoided");default:return""}}function y(e){switch(e){case 1:return"fa fa-check-circle fa-lg status-not-paid";case 2:return"";case 3:return"fa fa-check-circle-o fa-lg status-partially-paid";case 4:return"fa fa-check fa-lg status-paid";case 5:return"fa fa-arrow-circle-o-left fa-lg status-partially-refunded";case 6:return"fa fa-arrow-left fa-lg status-refunded";case 7:return"fa fa-ban fa-lg status-voided";case 8:return"";default:return""}}function h(e){return/^[0-9]+$/.test(e)?e:""}var T=[[4,"desc"]],I=!1,x=e.observable(!1);a.extend(g,u),$.extend(g.prototype,{name:"TipsList",moduleId:"viewmodels/tips/tipsList",listContainer:"#tipsTable",containerSelector:"div.pane-right > div.item-list",title:e.observable(e.T("tips/tipsList.tips_report")),pageNo:0,sortOrder:T,filter:new f,defaults:{tableDefinition:{serverSide:!0,ajax:this.ajaxLoad,footerCallback:function(e,t){var n=this.api();if(t.length>0){var r=t[0].entity.tipsSum;$(n.column(7).footer()).html(l.formatCurrency(r))}else $(n.column(7).footer()).html(l.formatCurrency(0))},columns:[{data:"entity.transactionUpc","class":"center",width:"140px"},{data:"entity.tenderData",render:function(e){return h(e)}},{data:"entity.orderTypeName",width:"100px"},{data:"entity.orderStatusCode","class":"center",render:function(e){return"<i class='"+y(e)+"' ></i>"}},{data:"entity.total"},{data:"entity.tenderDate"},{data:"entity.store"},{data:"entity.employeeName"},{data:"entity.tips"}],order:T}},initialize:function(){g.superclass.initialize.apply(this,arguments),this.repo=new d({routeType:"ByEntityName",modelDesc:{entityName:"Payment"}}),this.employeeRepo=new d({modelDesc:{entityType:"Business",entityName:"EmployeeByEnterprise"}}),this.filter.callback=this.applyFilters.bind(this)},activate:function(){g.superclass.activate.apply(this,arguments),r.log(this.name+" activating");var e=this;return e.filter.employee(""),i.isLoaded?e.filter.initialize():i.fetchConfig().then(function(){return e.filter.initialize()})},onAjaxLoad:function(e,t,n){var r=this;r.filter.isInitialized()&&(x(!0),$("#tipsTable_processing").hide(),$("#tipsTable_paginate").hide(),I&&(e.start=0,e.length=0),this.repo.load(this.getLoadListParams(e),function(e){if(I)v(e);else{var t=Enumerable.From(e.data).Select(function(t){return new c({id:t.id,transactionId:t.transactionId,tenderDate:s.formatDateTime(t.tenderDate),isoCurrencyId:t.isoCurrencyId,transactionUpc:t.transactionUpc,transactionStatusCode:t.transactionStatusCode,orderDate:t.orderDate,orderType:t.orderType,orderTypeName:t.orderTypeName,orderTypeCode:t.orderTypeCode,orderStatusCode:t.orderStatusCode,orderName:t.orderName,fulfilmentStatusCode:t.fulfilmentStatusCode,amountDue:t.amountDue,isAuthOnly:t.fulfilmentStatusCode,tenderTypeCode:t.tenderTypeCode,tenderData:t.tenderData,statusCode:t.statusCode,subtotalAmount:l.formatCurrency(t.subtotalAmount),total:l.formatCurrency(t.total),tips:l.formatCurrency(t.tips),employeeId:t.employeeId,employeeName:t.employeeName,tipsSum:e.tipsSum,store:t.store},"Payment")}).ToArray();e.data=t,n&&n(e)}x(!1),$("#tipsTable_paginate").show()},null,!1,!0))},editCallback:function(){alert("edit")},deleteCallback:function(){alert("delete")},formatDate:function(e){var n=t(e);return n.toISOString()},getLoadListParams:function(e){var t=this,n=t.filter.employee(),r=t.filter.dateRange(),a={startDate:r&&r.dateFrom&&r.dateFrom.isAfter("2010-01-01")?r.dateFromString():null,endDate:r&&r.dateTo&&!r.dateTo.isAfter()?r.dateToString():null,employeeId:n,stores:t.storesFilter.stores()};return $.extend({},e,a)},onAttached:function(){},exportTableData:function(){return I=!0,$("#tipsTable").DataTable().ajax.reload(),!1},loading:x});var w=new g;return w});
define('viewmodels/unblockAccount',["knockout","durandal/app","plugins/router","plugins/dialog","data/config","services/userAgent","common/utils"],function(e,t,n,r,a,o,i){function s(){var e=i.getIdFromQuery();if(""===i.getIdFromCookie()){if(""===e)return setTimeout(function(){n.navigate("account")},1),!1;i.setEnterpriseCodeCookie(e)}return new Promise(function(e){e(!0)})}function l(){f(null),p(null),g(!1)}function u(){$(".version").text(e.T("login.version_")+a.version)}function c(){if(p(null),!f())return p(e.T("resetPassword.emailRequired")),void 0;g(!0);var t={enterpriseCode:i.getIdFromCookie(),email:f()};$.post("api/Account/UnblockAccount",t).then(function(t){g(!1),0===t.resultCode?r.show(new r.MessageBox(e.local("resetPassword.unblock_check_email"),e.local("resetPassword.title-unblock"),["OK"],!0)).then(function(){n.navigate("smartLogin")}):p(e.T(t.message)||m)},function(e){g(!1),p(e.statusText)})}var d=e.T("login.back_office"),p=e.observable(),m=([null,e.T("resetPassword.wrongEmail")],e.T("resetPassword.unexpectedError")),f=e.observable(),g=e.observable();return{title:d,canActivate:s,activate:l,attached:u,email:f,errorMessage:p,unblockAccount:c,isLoading:g}});
define('viewmodels/unsupportedBrowser',["knockout","services/LogManager","services/userAgent"],function(e,t,n){var r="unsupportedBrowser",a=t.getLogger();return a.logDebug("loading module.",r),{yourBrowser:function(){return e.T("unsupported.yourVersion",null,[n.browser,n.browserMajorVersion,n.os,n.osVersion])}}});
define('viewmodels/vendors/manage-tabs/contactInfo',["knockout","plugins/router","durandal/system","data/common","data/baseCommon","viewmodels/base/baseManageViewModel","models/vendorModel","repositories/base/baseRepository","linq"],function(e,t,n,r,a,o,i,s){function l(){l.superclass.constructor.apply(this,arguments)}return a.extend(l,o),$.extend(l.prototype,{name:"VendorContactInfoManage",moduleId:"viewmodels/vendors/manage-tabs/contactInfo",modelType:i,resetOnActivate:!1,title:e.observable(e.T("vendors/manage-tabs/contactInfo.contact_info")),initialize:function(){l.superclass.initialize.apply(this,arguments);var t=this;this.modelReady(!0),this.countries=e.observableArray(),this.territory=e.observable(),this.isStateVisible=e.observable(!1),this.countriesRepo=new s({modelDesc:{entityType:"Business",entityName:"IsoCountry"}}),this.statesRepo=new s({modelDesc:{entityType:"Business",entityName:"TerritoriesByCountryId"}}),t.states=e.computed(function(){return t.dataContext&&t.dataContext().isoCountryId()?t.statesRepo.loadSync({id:t.dataContext().isoCountryId()}):[]},this)},loadCountries:function(){var e=$.Deferred(),t=e.promise(),n=this;return n.countries().length?e.resolve(n.countries()):this.countriesRepo.load({},function(t){n.countries(Enumerable.From(t.slice()).OrderBy(function(e){return e.name}).ToArray()),e.resolve(n.countries())},null,!1),t},loadStates:function(e){var t=$.Deferred(),n=t.promise(),r=this;return e.id&&this.previousLoadedCountry!=e.id?(this.previousLoadedCountry=e.id,this.statesRepo.load(e,function(e){r.states(e.slice()),t.resolve(r.states())})):(e.id||(r.states.length=0,this.previousLoadedCountry=e.id),t.resolve(r.states())),n},activate:function(){l.superclass.activate.apply(this,arguments),n.log(this.name+" activating");var e=this,t=this.loadCountries();return this.completeJobs.push(t),$.when.apply($,e.completeJobs)},subscribeToTerritoryChange:function(){var e=this;e.territorySubsc&&e.territorySubsc.dispose(),e.territorySubsc=e.territory.subscribe(function(t){t&&t!=e.dataContext().territory.peek()?e.dataContext().territory(t):!t&&e.states.length>0?e.dataContext().territory(t):t||t==e.dataContext().territory.peek()||e.territory(e.dataContext().territory.peek())})},modelLoaded:function(){var e=this;e.modelLoadedProcessed||(e.dataContext().territory(),e.modelLoadedProcessed=!0)},attached:function(){l.superclass.attached.apply(this,arguments),n.log(this.name+" attached")},deactivate:function(){l.superclass.deactivate.apply(this,arguments),n.log(this.name+" deactivating")},detached:function(){l.superclass.detached.apply(this,arguments),n.log(this.name+" detached")}}),l});
define('viewmodels/vendors/manage-tabs/general',["knockout","plugins/router","durandal/system","data/common","data/baseCommon","viewmodels/base/baseManageViewModel","models/vendorModel","repositories/base/baseRepository"],function(e,t,n,r,a,o,i,s){function l(){l.superclass.constructor.apply(this,arguments)}return a.extend(l,o),$.extend(l.prototype,{name:"VendorGeneralManage",moduleId:"viewmodels/vendors/manage-tabs/general",modelType:i,resetOnActivate:!1,title:e.observable(e.T("vendors/manage-tabs/general.general")),vendorTypes:e.observableArray(),initialize:function(){l.superclass.initialize.apply(this,arguments),this.vendorTypesRepo=new s({modelDesc:{entityType:"Business",entityName:"VendorTypes"}})},loadVendorTypes:function(){var e=$.Deferred(),t=e.promise(),n=this;return n.vendorTypes().length?e.resolve(n.vendorTypes()):this.vendorTypesRepo.load({},function(t){n.vendorTypes(t.slice()),e.resolve(n.vendorTypes())}),t},activate:function(){l.superclass.activate.apply(this,arguments),n.log(this.name+" activating");var e=this.loadVendorTypes();return this.completeJobs.push(e),e},attached:function(){l.superclass.attached.apply(this,arguments),n.log(this.name+" attached")},deactivate:function(){l.superclass.deactivate.apply(this,arguments),n.log(this.name+" deactivating")},detached:function(){l.superclass.detached.apply(this,arguments),n.log(this.name+" detached")}}),l});
define('viewmodels/vendors/vendorsList',["knockout","plugins/router","repositories/vendorsRepository","repositories/vendorItemsRepository","data/common","services/dataTableText"],function(e,t,n,r,a,o){function i(e){d=e,a.showLoader(m),l()}function s(r){var o=this;o.id=e.observable(r.id()),o.name=e.observable(r.name()),o.isActive=e.observable(r.isActive()),o.rowNum=e.observable(),o.typeName=e.observable(r.typeName()),o.vendor=e.observable(r),o.edit=function(){t.navigate("vendor/"+o.id())},o.deleteRow=function(t,r){r.stopPropagation(),a.showConfirmation(void 0,e.T("vendors/vendorsList.are_you_sure_you_want_to_delete_selected_vendor"),function(){var t=n.remove(o.vendor());t?table.row("#"+o.id()).remove().draw(!1):a.showError(e.T("vendors/vendorsList.the_vendor_has_vendoritem_assigned_please_delete_those_vendoritem_first",null,o.name()),"#messages")})}}function l(){n.loadAllAsync().done(function(t){rows=Enumerable.From(t).Select(function(e){return new s(e)}).ToArray(),table=$("#vendorTable",d).DataTable({language:o.getLanguage(),processing:!0,info:!1,paging:!0,lengthChange:!1,autoWidth:!1,data:rows,columns:[{data:"name()"},{data:"typeName().name",bSearchable:!1},{data:"isActive",render:function(t){return 1==t()?e.T("vendors/vendorsList.active"):e.T("vendors/vendorsList.inactive")},sWidth:"150px",bSearchable:!1},{data:null,render:function(){return'<input type="button" class="delete-row-button" data-bind="click: deleteRow" />'},sWidth:"50px",sClass:"center no-padding",bSortable:!1,bSearchable:!1}],order:g,createdRow:function(t,n,r){n.rowNum(r);var a=$(t);return a.addClass("editable"),a.attr({id:n.id()}),a.attr("data-bind","click: edit"),e.applyBindings(n,a[0]),a[0]}}),0!==f&&table.page(f).draw(!1),new $.fn.DataTable.SearchFilter(table),table.on("page",function(){f=table.page.info().page}),table.on("order",function(){g[0][0]=table.order()[0][0],g[0][1]=table.order()[0][1]})}).always(function(){a.showRightPanelContent(m)})}function u(e){for(var t=p().vendorItemsArray().length-1;t>=0;--t)if(p().vendorItemsArray()[t].id()==e.id())return p().vendorItemsArray.splice(t,1),void 0}function c(){t.navigate("vendor/")}var d,p=e.observable(),m="div.pane-right > div.vendors-list",f=0,g=[[0,"asc"]];return{attached:i,showNewVendor:c,model:p,deleteSelected:u,header:e.T("vendors/vendorsList.vendors_list")}});

define('text!views/account.html',[],function () { return '<form data-bind="event: { submit: continueHandler }">\r\n    <div class="form-signin form-account">\r\n        <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png">\r\n        <h2 style="text-align: center" data-bind="text: title, local: \'account.back_office\' "></h2>\r\n\r\n        <div class="form-group">\r\n            <input id="account" name="account" class="form-control input-lg account-id-input" type="text" autocomplete="off"\r\n                   maxlength="10" data-bind="value: $data.account, valueUpdate: \'input\', local: \'account.account_id\', localAttr: \'placeholder\'">\r\n            <div data-bind="text: accountIdHidden" class="account-id-hidden"></div>\r\n            <p id="accountMessages" class="fieldError" data-bind="text: errorMessage"></p>\r\n        </div>\r\n\r\n        <p>\r\n            Not registered? Click\r\n            <a href="" target="_blank" data-bind="local: \'signup\', attr: { href: window.App.signInUrl }"></a>\r\n            to create an&nbsp;Account.\r\n        </p>\r\n        <br />\r\n        <p>\r\n            Forgot Account Id? Check your welcome email or contact our <a href="mailto:support@ehopper.com">support</a>.\r\n        </p>\r\n\r\n        <br />\r\n\r\n        <div class="form-buttons">\r\n            <input class="btn btn-lg btn-primary" type="submit" data-bind="local: \'account.continue\' ">\r\n        </div>\r\n    </div>\r\n</form>\r\n\r\n<span class="version"></span>';});


define('text!views/adjustment-report/adjustments.html',[],function () { return '<div class="pane pane-right pane-tips adjustment-report-wrapper">\r\n    <!--ko compose: {model: \'viewmodels/header\'}-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <input class="form-control input-lg pull-left datatable-search" \r\n                   type="TEXT"\r\n                   data-bind="value: searchString, valueUpdate: \'keyup\', local: \'storeTransfer.search\', localAttr: \'placeholder\'"/>\r\n\r\n            <date-filter params="value: dateRange"></date-filter>\r\n\r\n            <div class="report-export-wrapper pull-right margin-top">\r\n                <button class="btn-report-export hidden" \r\n                        style="padding-left:15px;">\r\n                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>\r\n                    <span data-bind="local: \'common.export\'"></span>\r\n                </button>\r\n            </div>\r\n\r\n            <div class="clearfix"></div>\r\n            <div class="row filter-block">\r\n                <div class="pull-left col-lg-4">\r\n                    <label data-bind="local: \'inventory/inventoryManage.vendor\'"></label>\r\n                    <select data-bind="options: vendors, optionsText: \'name\', \r\n                            optionsValue: \'id\', value: vendor"></select>\r\n                </div>\r\n                <div class="pull-left col-lg-4">\r\n                    <label data-bind="local: \'reports/transactionReportHeaders.employee\'"></label>\r\n                    <select data-bind="options: employees, optionsText: \'name\',\r\n                            optionsValue: \'id\', value: employee"></select>\r\n                </div>\r\n                <div class="pull-left col-lg-4">\r\n                    <!--ko compose: { view: \'controls/storesFilter.html\',\r\n                        mode: \'templated\' }-->\r\n                    <!--/ko-->\r\n                </div>\r\n            </div>\r\n\r\n            <table class="datatable" id="tbl_adjustment_report" data-bind="">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'inventory/inventoryList.id\'"></th>\r\n                        <th data-bind="local: \'orders/ordersList.date\'"></th>\r\n                        <th data-bind="local: \'orders/ordersList.store\'"></th>\r\n                        <th data-bind="local: \'orders/ordersList.employee\'"></th>\r\n                        <th data-bind="local: \'storeTransfer.totalCost\'"></th>\r\n                        <th data-bind="local: \'storeTransfer.delta\'"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/adjustment-report/drilldown.html',[],function () { return '<div class="pane pane-right pane-tips adjustment-report-wrapper">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="report-export-wrapper pull-right margin-top">\r\n                <button class="btn-report-export hidden"\r\n                        style="padding-left:15px;">\r\n                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>\r\n                    <span>Export</span>\r\n                </button>\r\n            </div>\r\n            <table class="w100">\r\n                <tbody>\r\n                    <tr>\r\n                        <td>\r\n                            <strong>Adjustment ID:</strong>\r\n                            <span data-bind="text: model.code"></span>\r\n                        </td>\r\n                        <td>\r\n                            <strong>Vendor:</strong>\r\n                            <span data-bind="text: model.vendor"></span>\r\n                        </td>\r\n                        <td>\r\n                            <strong>Store:</strong>\r\n                            <span data-bind="text: model.store"></span>\r\n                        </td>\r\n                        <td>\r\n                            <strong>Employee:</strong>\r\n                            <span data-bind="text: model.employee"></span>\r\n                        </td>\r\n                        <td>\r\n                            <strong>Date:</strong>\r\n                            <span data-bind="text: model.date"></span>\r\n                        </td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n            <table class="datatable" id="tbl_adjustment_drilldown">\r\n                <thead>\r\n                    <tr>\r\n                        <th>ID</th>\r\n                        <th>Name</th>\r\n                        <th>UPC</th>\r\n                        <th>SKU</th>\r\n                        <th>Cost</th>\r\n                        <th>Delta</th>\r\n                        <th>Reason</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n            <div class="form-buttons center">\r\n                <input data-bind="click: back, local: \'storeTransfer.back\'" class="btn btn-lg btn-primary" type="button" value="Back">\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/appstore/appDirectory.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div id="app-store" class="app-store">\r\n\r\n            <a href="https://ehopper.com/freedom/" target="_blank" class="btn btn-upgrade"\r\n                data-bind="visible: isEssentialPlan(), click: goFreedom, local: \'apps.upgrade\'">Upgrade</a>\r\n\r\n            <div id="appDirectoryMessage" style="margin-top:10px;"></div>\r\n\r\n            <div class="alert alert-warning" data-bind="visible: !supportedBrowser()">\r\n                <p class="your-version" data-bind="html: yourBrowser()"></p>\r\n                <div data-bind="local: \'unsupported.qb_latestVersion\'"></div>\r\n            </div>\r\n\r\n            <h2 data-bind="local: \'apps.installed_apps\'"></h2>\r\n\r\n            <div class="apps-container" data-bind="foreach: apps">\r\n\r\n                <!-- ko if: $data.installed() && $data.visible -->\r\n                <div class="app-block" data-bind="click: $root.appClick">\r\n                    <div class="app-block_header">\r\n                        <img class="app-block_header_logo" data-bind="attr: { src: \'content/images/appstore/\' + $data.image, alt: $data.name }" />\r\n                    </div>\r\n                    <div class="app-block_content">\r\n                        <div class="app-block_content_header" data-bind="text: $data.name"></div>\r\n                        <div class="block_content_producer" data-bind="text: $data.company"></div>\r\n                        <div class="app-block_content_package">\r\n                            <div class="app-block_content_package_name" data-bind="text: $data.packageName"></div>\r\n                            <div class="app-block_content_package_desc" data-bind="text: $data.packageDescription"></div>\r\n                        </div>\r\n                    </div>\r\n                    <!--\r\n                    <div class="app-modal" data-bind="template: { name: \'views/appstore/apps/\' + $data.template } "></div>\r\n                    -->\r\n                </div>\r\n                <!-- /ko -->\r\n\r\n            </div>\r\n\r\n            <h2 class="recommended" data-bind="local: \'apps.apps\'"></h2>\r\n\r\n            <div class="apps-container" data-bind="foreach: apps">\r\n                <!-- ko if: !$data.installed() && $data.visible -->\r\n                <div class="app-block" data-bind="click: $root.appClick">\r\n                    <div class="app-block_header">\r\n                        <img class="app-block_header_logo" data-bind="attr: { src: \'content/images/appstore/\' + $data.image, alt: $data.name } " />\r\n                    </div>\r\n                    <div class="app-block_content">\r\n                        <div class="app-block_content_header" data-bind="text: $data.name"></div>\r\n                        <div class="block_content_producer" data-bind="text: $data.company"></div>\r\n                        <div class="app-block_content_package">\r\n                            <div class="app-block_content_package_name" data-bind="text: $data.packageName"></div>\r\n                            <div class="app-block_content_package_desc" data-bind="text: $data.packageDescription"></div>\r\n                        </div>\r\n                    </div>\r\n                    <!--\r\n                    <div class="app-modal" data-bind="template: { name: \'views/appstore/apps/\' + $data.template } "></div>\r\n                    -->\r\n                </div>\r\n                <!-- /ko -->\r\n\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n\r\n</div>';});


define('text!views/appstore/appSettings.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div id="app-settings" class="app-settings" data-bind="with: model">\r\n            <iframe data-bind="attr: { src: settingsUrl }" style="width: 100%; height: 100%;" frameborder="0" onload="$(\'#spinnerIframe\').hide();"></iframe>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/appstore/apps/cardPaymentApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/card-payment.png" alt="Card Payment" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/creditDebitCard.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <p data-bind="local: \'apps/creditDebitCard.acceptAnyType\'"></p>\r\n        <p data-bind="local: \'apps/creditDebitCard.keyBenefits\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/creditDebitCard.listItem1\'"></li>\r\n            <li data-bind="local: \'apps/creditDebitCard.listItem2\'"></li>\r\n            <li data-bind="local: \'apps/creditDebitCard.listItem3\'"></li>\r\n            <li data-bind="local: \'apps/creditDebitCard.listItem4\'"></li>\r\n            <li data-bind="local: \'apps/creditDebitCard.listItem5\'"></li>\r\n            <li data-bind="local: \'apps/creditDebitCard.listItem6\'"></li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg"\r\n                data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }">\r\n        </button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/appstore/apps/clockInApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/clock in.png" alt="clock in" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/clickInClockOut.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content">\r\n\r\n        <p data-bind="local: \'apps/clickInClockOut.listItem2\'"></p>\r\n        <p data-bind="local: \'apps/clickInClockOut.listItem3\'"></p>\r\n        <p data-bind="local: \'apps/clickInClockOut.listItem1\'"></p>\r\n\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg" data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>\r\n';});


define('text!views/appstore/apps/controlNumberApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/ControlNum.png" alt="Control # for Puerto Rico" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/controlNumber.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n\r\n        <p data-bind="local: \'apps/controlNumber.theControlNumberApp\'"></p>\r\n\r\n        <p data-bind="local: \'apps/controlNumber.toBeginIntegration\'"></p>\r\n        <ol>\r\n            <li>\r\n                <span data-bind="local: \'apps/controlNumber.setupYourStoreLocation\'"></span>\r\n                <ol type="a">\r\n                    <li data-bind="local: \'apps/controlNumber.setPuertoRico\'"></li>\r\n                </ol>\r\n            </li>\r\n            <li>\r\n                <span data-bind="local: \'apps/controlNumber.setupYourCityAndStateTaxes\'"></span>\r\n                <ol type="a">\r\n                    <li data-bind="local: \'apps/controlNumber.youMustSetupTwoTaxes\'"></li>\r\n                    <li>\r\n                        <strong data-bind="local: \'apps/controlNumber.note\'"></strong>\r\n                        <span data-bind="local: \'apps/controlNumber.youCannotSetup\'"></span>\r\n                    </li>\r\n                </ol>\r\n            </li>\r\n            <li>\r\n                <span data-bind="local: \'apps/controlNumber.setupYourPRFiscalService\'"></span>\r\n                <ol type="a">\r\n                    <li data-bind="local: \'apps/controlNumber.assignTheToken\'"></li>\r\n                    <li data-bind="local: \'apps/controlNumber.toGetAdditionalTokens\'"></li>\r\n                </ol>\r\n            </li>\r\n        </ol>\r\n\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg " data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>\r\n';});


define('text!views/appstore/apps/ebtCardPaymentApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/card-payment.png" alt="Card Payment" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/ebtCart.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <p data-bind="local: \'apps/ebtCart.description\'"></p>    \r\n        <p data-bind="local: \'apps/ebtCart.note\'"></p>    \r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg"\r\n                data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }">\r\n        </button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/appstore/apps/externalAppTemplate.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" data-bind="attr: { src: \'content/images/appstore/\' + $data.image, alt: $data.name }" />\r\n        <h3 class="app-dialog_header_text" data-bind="text: $data.name"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content">\r\n        <div data-bind="html: $data.description"></div>\r\n    </div>\r\n\r\n    <!-- ko if: type == 2 -->\r\n    <div class="app-dialog_topbar">\r\n        <div class="app-dialog_topbar_content">\r\n            <label data-bind="local: \'appsettings.category\'">App Category</label>\r\n            <select class="select" data-bind="options: $root.categories, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'appsettings.select_category\'), value: categoryId, valueAllowUnset: true, event:{ change: changeCategory}"></select>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n\r\n    <div class="app-dialog_bar">\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg" data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>\r\n';});


define('text!views/appstore/apps/marketingAndLoyalty.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/marketing.png" alt="marketing" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/marketingAndLoyalty.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content">\r\n\r\n        <p data-bind="local: \'apps/marketingAndLoyalty.useTheLoyalty\'"></p>\r\n\r\n        <strong data-bind="local: \'apps/marketingAndLoyalty.features\'"></strong>\r\n\r\n        <ul>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem1\'"></li>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem2\'"></li>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem3\'"></li>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem4\'"></li>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem5\'"></li>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem6\'"></li>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem7\'"></li>\r\n            <li data-bind="local: \'apps/marketingAndLoyalty.listItem8\'"></li>\r\n        </ul>\r\n\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n        <input type="radio" name="marketingPackage" value="starter" id="marketingPackageStarter" data-bind="checked: marketingPackage" />\r\n        <label for="marketingPackageStarter" data-bind="local: \'apps/marketingAndLoyalty.marketingPackageStarter\'"></label>\r\n        &nbsp;&nbsp;&nbsp;&nbsp;\r\n        <input type="radio" name="marketingPackage" value="grow" id="marketingPackageGrow" data-bind="checked: marketingPackage" />\r\n        <label for="marketingPackageGrow" data-bind="local: \'apps/marketingAndLoyalty.marketingPackageGrow\'"></label>\r\n        <!-- ko if: enabled -->\r\n        &nbsp;&nbsp;&nbsp;&nbsp;\r\n        <a href="#" target="_blank" class="btn btn-lg btn-success" data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() },\r\n            attr: { href: marketingPackageUrl() }\r\n        "></a>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>\r\n';});


define('text!views/appstore/apps/menuBuilder.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/menu-builder.png" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/menuBuilder.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content">\r\n\r\n        <p data-bind="local: \'apps/menuBuilder.description\'"></p>\r\n\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg" data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>\r\n';});


define('text!views/appstore/apps/multipleRegistersApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/update order.png" alt="update order" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/updateOrderOnAnyRegister.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content">\r\n\r\n        <p data-bind="local: \'apps/updateOrderOnAnyRegister.withTheMulti\'"></p>\r\n        <p data-bind="local: \'apps/updateOrderOnAnyRegister.specifically\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item1\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item2\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item3\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item4\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item5\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item6\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item7\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list1Item8\'"></li>\r\n        </ul>\r\n        <p data-bind="local: \'apps/updateOrderOnAnyRegister.andWhenStore\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list2Item1\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list2Item2\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list2Item3\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list2Item4\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list2Item5\'"></li>\r\n            <li data-bind="local: \'apps/updateOrderOnAnyRegister.list2Item6\'"></li>\r\n        </ul>\r\n        <div style="color:red;">\r\n            <b data-bind="local: \'apps/updateOrderOnAnyRegister.installAndUninstall\'"></b>\r\n            <ul>\r\n                <li data-bind="local: \'apps/updateOrderOnAnyRegister.note1\'"></li>\r\n                <li data-bind="local: \'apps/updateOrderOnAnyRegister.note2\'"></li>\r\n                <li data-bind="local: \'apps/updateOrderOnAnyRegister.note3\'"></li>\r\n            </ul>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg " data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/appstore/apps/orderFulfilment.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/delivery-options.png" alt="order fulfilment" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/orderFulfilment.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content">\r\n\r\n        <p data-bind="local: \'apps/orderFulfilment.description\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/orderFulfilment.feature1\'"></li>\r\n            <li data-bind="local: \'apps/orderFulfilment.feature2\'"></li>\r\n            <li data-bind="local: \'apps/orderFulfilment.feature3\'"></li>\r\n        </ul>\r\n\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg" data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>\r\n';});


define('text!views/appstore/apps/poReceivingApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/purchase-order-receiving.png" alt="Purchase Order Receiving" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/orderReceiving.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <p data-bind="local: \'apps/orderReceiving.intro\'"></p>\r\n        <p data-bind="local: \'apps/orderReceiving.toProcess\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/orderReceiving.toDo1\'"></li>\r\n            <li data-bind="local: \'apps/orderReceiving.toDo2\'"></li>\r\n            <li data-bind="local: \'apps/orderReceiving.toDo3\'"></li>\r\n        </ul>\r\n        <p data-bind="local: \'apps/orderReceiving.logInfo\'"></p>\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg" data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/appstore/apps/productTaxApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/product-tax.png"  />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/productTax.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <p data-bind="local: \'apps/productTax.description\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/productTax.feature1\'"></li>\r\n            <li data-bind="local: \'apps/productTax.feature2\'"></li>\r\n            <li data-bind="local: \'apps/productTax.feature3\'"></li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg " data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/appstore/apps/quickbooksApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/logo-qbo.png" alt="Quickbooks" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/quickbooks.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <p data-bind="local: \'apps/quickbooks.description\'"></p>\r\n        <p data-bind="local: \'apps/quickbooks.features\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/quickbooks.feature1\'"></li>\r\n            <li data-bind="local: \'apps/quickbooks.feature2\'"></li>\r\n            <li data-bind="local: \'apps/quickbooks.feature3\'"></li>\r\n            <li data-bind="local: \'apps/quickbooks.feature4\'"></li>\r\n        </ul>\r\n        <!--<p data-bind="local: \'apps/quickbooks.note1\'" style="color:red"></p>-->\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <!-- ko if: installed() -->\r\n        <button class="btn btn-lg " data-bind="local: \'apps.disconnect\', click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n        <!-- ko if: !installed() -->\r\n        <img class="quickbook-connect-button" src="content/images/c2qb_green_btn_lg_default.png"\r\n             onmouseover="this.src=\'content/images/C2QB_green_btn_lg_hover.png\'"\r\n             onmouseout="this.src=\'content/images/C2QB_green_btn_lg_default.png\'"\r\n             data-bind="click: $root.changeAppStatus" />\r\n        <!-- /ko -->\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/appstore/apps/storeTransferApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/store-transfer.png" alt="Store Transfer" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/storeTransfer.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <p data-bind="local: \'apps/storeTransfer.intro\'"></p>\r\n        <p data-bind="local: \'apps/storeTransfer.toProcess\'"></p>\r\n        <ol>\r\n            <li data-bind="local: \'apps/storeTransfer.toDo1\'"></li>\r\n            <li data-bind="local: \'apps/storeTransfer.toDo2\'"></li>\r\n            <li data-bind="local: \'apps/storeTransfer.toDo3\'"></li>\r\n        </ol>\r\n        <p data-bind="local: \'apps/storeTransfer.logInfo\'"></p>\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg " data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/appstore/apps/variantsApp.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/product-variants.png"  />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'apps/variants.name\'"></h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <p data-bind="local: \'apps/variants.description\'"></p>\r\n        <ul>\r\n            <li data-bind="local: \'apps/variants.feature1\'"></li>\r\n            <li data-bind="local: \'apps/variants.feature2\'"></li>\r\n            <li data-bind="local: \'apps/variants.feature3\'"></li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n\r\n        <div class="app-dialog_content_package">\r\n            <div class="app-dialog_content_package_name" data-bind="local: \'apps.freedomPackage\'"></div>\r\n            <div class="app-dialog_content_package_desc">&nbsp;</div>\r\n        </div>\r\n        <!-- ko if: enabled -->\r\n        <button class="btn btn-lg " data-bind="text: $root.appAction[installed()], click: $root.changeAppStatus, css: { \'btn-danger\': installed(), \'btn-success\': !installed() }"></button>\r\n        <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/categories/categoriesList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body categories">\r\n            <div id="messages"></div>\r\n\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search For Category" data-bind="local: getKeyPrefix() + \'categories/categoriesList.search_for_category\', localAttr: \'placeholder\'">\r\n            <div class="btn-group btn-group-lg pull-right">\r\n                <a class="btn btn-primary" data-bind="attr: { href: \'#\' + getRoute(\'category\') }, local: getKeyPrefix() + \'categories/categoriesList.new_category\'">New Category</a>\r\n                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only" data-bind="local: getKeyPrefix() + \'categories/categoriesList.toggle_dropdown\'">Toggle Dropdown</span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li><a data-bind="attr: { href: \'#\' + getRoute(\'department\') }, local: getKeyPrefix() + \'categories/categoriesList.new_department\'">New Department</a></li>\r\n                    <!-- ko if: !isAppMode() -->\r\n                    <li><a href="#product" data-bind="local: \'categories/categoriesList.new_item\'">New Item</a></li>\r\n                    <li><a href="#modifier" data-bind="local: \'categories/categoriesList.new_modifier\'">New Modifier</a></li>\r\n                    <!-- /ko -->\r\n                </ul>\r\n            </div>\r\n\r\n            <button class="btn btn-lg pull-right btn-red delete-button-mark" type="button" data-bind="click: deleteSelected , enable: hasSelected">\r\n                <span class="" data-bind="local: \'common.delete_selected\'">Delete</span>\r\n            </button>\r\n\r\n\r\n            <br class="clear">\r\n\r\n            <table class="datatable selectablelist" id="categoriesTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th>\r\n                            <div class="checkbox">\r\n                                <input type="checkbox" id="catsSelectAll" data-bind="checked: selectAll">\r\n                                <label for="catsSelectAll"></label>\r\n                            </div>\r\n                        </th>\r\n                        <th data-bind="local: getKeyPrefix() + \'categories/categoriesList.category_name\'">Category Name</th>\r\n                        <th data-bind="local: getKeyPrefix() + \'categories/categoriesList.department_name\'">Department Name</th>\r\n                        <th data-bind="local: \'categories/categoriesList.status\'">Status</th>\r\n                        <th>\r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/categories/categoryManage.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="form wide-form categories-form" data-bind="with: model">\r\n                <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n                <div id="saveMessages"></div>\r\n\r\n                <div class="form-group">\r\n                    <label data-bind="local: $root.getKeyPrefix() + \'categories/categoryManage.category_name\'">Category Name</label>\r\n                    <!-- ko foreach: names -->\r\n                    <input class="form-control input-lg" type="text" placeholder="Input Name" maxlength="100"\r\n                           data-bind="value: $data.name, visible: $data.languageId === $root.langs.selectedLanguage(), local: $root.getKeyPrefix() + \'categories/categoryManage.input_name\', localAttr: \'placeholder\'" />\r\n                    <!-- /ko -->\r\n                </div>\r\n\r\n                <div class="row">\r\n                    <div class="col-sm-8">\r\n                        <div class="form-group">\r\n                            <label data-bind="local: $root.getKeyPrefix() + \'categories/categoryManage.category_short_name\'"></label>\r\n                            <!-- ko foreach: names -->\r\n                            <input class="form-control input-lg" style="width:100%; " type="text" placeholder="Input Short Name" maxlength="5"\r\n                                   data-bind="value: $data.shortName, visible: $data.languageId === $root.langs.selectedLanguage(), local: $root.getKeyPrefix() + \'categories/categoryManage.input_short_name\', localAttr: \'placeholder\'" />\r\n                            <!-- /ko -->\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-sm-4">\r\n                        <div class="form-group color-sm">\r\n                            <label for="color1" data-bind="local: $root.getKeyPrefix() + \'categories/categoryManage.color\'">Color</label>\r\n                            <input class="select" readonly="readonly" onkeydown="return false" type="text" id="color1" /> \r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            \r\n                <div class="form-group" >\r\n                    <label style="padding-top:10px;" data-bind="local: $root.getKeyPrefix() + \'categories/categoryManage.category_description\'">Category Description</label>\r\n                    <!-- ko foreach: names -->\r\n                    <textarea class="form-control input-lg" placeholder="Input Description"\r\n                              data-bind="value: $data.description, visible: $data.languageId === $root.langs.selectedLanguage(), local: $root.getKeyPrefix() + \'categories/categoryManage.input_description\', localAttr: \'placeholder\'"></textarea>\r\n                    <!-- /ko -->\r\n                </div>\r\n\r\n                <div class="form-group">          \r\n                    <label data-bind="local: $root.getKeyPrefix() + \'categories/categoryManage.department\'">Department</label>\r\n                    <select class="select" data-bind="options: lobs, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local($root.getKeyPrefix() + \'categories/categoryManage.select_department\'), value: lobId, valueAllowUnset: true"></select>           \r\n                </div>\r\n            \r\n                <div class="checkbox">\r\n                    <input type="checkbox" id="isActiveCategory" data-bind="checked: isActive">\r\n                    <label  for="isActiveCategory" data-bind="local: $root.getKeyPrefix() + \'categories/categoryManage.is_active\'">Is Active</label>\r\n                </div>\r\n           \r\n                <br />\r\n                <!-- ko if: appsData[\'qb\'] -->\r\n                <div class="qb-accounts-container">\r\n                    <qb-accounts params="value: appsData[\'qb\']"></qb-accounts>\r\n                    <br />\r\n                </div>\r\n                <!-- /ko -->\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: $root.save, local: $root.getKeyPrefix() + \'categories/categoryManage.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: $root.cancel, local: $root.getKeyPrefix() + \'categories/categoryManage.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/categories/categoryManageNew.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <!--ko with: model -->\r\n            <!--/ko-->\r\n              <div class="form">\r\n                <div class="form-group">\r\n                    <label data-bind="local: \'categories/categoryManageNew.category_name\'">Category Name</label>\n                    <input class="form-control input-lg" type="text" placeholder="Input Name" maxlength="100" data-bind="value: dataContext().name, local:\'categories/categoryManageNew.input_name\' , localAttr: \'placeholder\'">\n                </div>\r\n                <div class="form-group">\r\n                    <label data-bind="local: \'categories/categoryManageNew.category_description\'">Category Description</label>\n                    <textarea class="form-control input-lg" placeholder="Input Description" data-bind="value: dataContext().description"></textarea>\r\n                </div>\r\n                <div class="form-group">\r\n                    <label data-bind="local: \'categories/categoryManageNew.department\'">Department</label>\n                    <select class="select" data-bind="options: departmentsList, optionsText: \'name\', optionsValue: \'id\', optionsCaption: \'Select Department...\', value: dataContext().lobId"></select>\r\n                </div>\r\n                <div class="checkbox">\r\n                    <input type="checkbox" id="isActiveCategory" data-bind="checked: dataContext().isActive">\n                    <label for="isActiveCategory" data-bind="local: \'categories/categoryManageNew.is_active\'">Is Active</label>\n                </div>\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: save, local:\'categories/categoryManageNew.done\' ">\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: cancel, local:\'categories/categoryManageNew.cancel\' ">\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/controls/storesFilter.html',[],function () { return '<div data-bind="if: $data.storesFilter.storesArr().length > 1">\r\n    <div data-bind="with: $data.storesFilter, css: self.divStyle">\r\n        <div class="stores-filter-label-wrapper" data-bind="visible: !labelNotVisible">\r\n            <label data-bind="local: \'employees/manage-tabs/generalTab.stores\'"></label>\r\n        </div>\r\n        <div data-bind="css: contStyle">\r\n            <select class="form-control input-lg" data-bind="options: storesArr, optionsText: \'storeName\', optionsValue: \'id\',\r\n                multipleSelect: storesArr, selectedElements: stores, multipleSelectOptions: setupMultiSelect(), attr: { id: name }">\r\n            </select>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/customers/importCustomers.html',[],function () { return '<!-- TODO -->\r\n<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="form import-container import-customers" data-bind="with: model">\r\n\r\n                <div class="error-box" data-bind="text: error, visible: error">\r\n                </div>\r\n                <div class="success-box" data-bind="text: message, visible: message">\r\n                </div>\r\n\r\n                <div class="form-group file-box-container">\r\n                    <label data-bind="local: \'customers/importCustomers.file_to_import\'">File to import</label>\r\n                    <div class="file-box float-left">\r\n                        <span class="file-name" data-bind="text: (file() ? file() : ko.local(\'customers/importCustomers.browse_csv_file\'))"></span>\r\n                    </div>\r\n\r\n                    <span class="btn btn-lg btn-default fileinput-button float-left">\r\n                        <span data-bind="local: \'customers/importCustomers.browse\'">Browse</span>\r\n                        <!-- The file input field used as target for the file upload widget -->\r\n                        <input id="importCustomersFile" type="file" name="files[]">\r\n                    </span>\r\n                </div>\r\n\r\n                <div class="progress-bar-wrapper">\r\n\r\n                    <div class="form-group" data-bind="visible: isUploading">\r\n                        <label data-bind="local: \'customers/importCustomers.uploading\'">Uploading</label>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuemin="0" aria-valuemax="100" data-bind="text: uploadProgress() + \'%\', attr: { \'aria-valuenow\': uploadProgress }, style: { width: (uploadProgress() + \'%\') }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: isImporting">\r\n                        <label data-bind="local: \'customers/importCustomers.importing\'">Importing</label>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-warning progress-bar-striped" role="progressbar" aria-valuemin="0" aria-valuemax="100" data-bind="text: importProgress() + \'%\', attr: { \'aria-valuenow\': importProgress }, style: { width: (importProgress() + \'%\') }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group form-buttons form-flex">\r\n                        <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="DONE" data-bind="click: $parent.import.bind($parent), enable: readyForUpload, local: \'customers/importCustomers.done\' ">\r\n                        <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: $parent.cancel.bind($parent), local: \'customers/importCustomers.cancel\' ">\r\n                        <input class="btn btn-lg btn-default" type="button" value="Get Template" data-bind="click: $parent.downloadTemplate.bind($parent), local: \'inventory/importInventory.get_template\' ">\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/dashboard/dashboard.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body dashboard">\r\n            <a href="https://ehopper.com/freedom/" target="_blank" class="btn btn-upgrade"\r\n                data-bind="visible: isEssentialPlan(), click: goFreedom">Upgrade</a>\r\n\r\n            <div class="dashboard-promo" data-bind="css:getPackage().class"><iframe data-bind="attr: {src: getPackage().url}" scrolling="no"></iframe></div>\r\n\r\n            <div class="dashboard-date-filter" style="float:right;">\r\n                <date-filter params="value: dateRange"></date-filter>\r\n            </div>\r\n            <div class="stores-filter-wrapper">\r\n                <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n                <!--/ko-->\r\n            </div>\r\n            <br class="clear" />\r\n\r\n            <!--ko compose: { model: \'viewmodels/dashboard/widgets/stats\', view: \'views/dashboard/widgets/stats.html\' }--><!--/ko-->\r\n\r\n            <div class="dashboard-bottom-part">\r\n                <div class="dashboard-bottom-part-left">\r\n\r\n                    <!--ko compose: { model: \'viewmodels/dashboard/widgets/support\', view: \'views/dashboard/widgets/support.html\' }--><!--/ko-->\r\n\r\n                </div>\r\n\r\n                <div class="dashboard-bottom-part-right">\r\n\r\n                    <!--ko compose: { model: \'viewmodels/dashboard/widgets/tasks\', view: \'views/dashboard/widgets/tasks.html\' }--><!--/ko-->\r\n                \r\n                </div>\r\n            </div>\r\n\r\n            <!--ko compose: { model: \'viewmodels/dashboard/widgets/salesTransactions\', view: \'views/dashboard/widgets/salesTransactions.html\' }--><!--/ko-->\r\n\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/dashboard/widgets/goLive.html',[],function () { return '<div class="goLive">\n    <span class="live-message" data-bind="text: model.liveMessage"></span>\n    <span class="live-date datePicker" type="button"></span>\n</div>';});


define('text!views/dashboard/widgets/salesTransactions.html',[],function () { return '\n<div class="salesBreakdown" data-bind="css : { \'loading\' : loading }">\n    <h2 data-bind="local: \'dashboard/widgets/salesTransactions.total_sales_by_category\'">Total Sales By Category</h2>\n    <span id="salesBreakdownChart" data-bind="visible: model().transactions().length != 0"></span>\n    <span class="legend" data-bind="foreach: model().transactions">\n        <div class="legend-element">\n            <div class="legend-element-title" data-bind="text: categoryName">Statistic</div>\n            <div class="legend-element-value" data-bind="text: chartText"></div>\n            <div class="progressbar">\n                <div data-bind="style: {background: color, width : width}"></div>\n            </div>\n        </div>\n    </span>\n      <!-- ko if:  model().transactions().length == 0 -->\n    <div class="nodata" data-bind="local: \'dashboard/widgets/salesTransactions.no_data_available_for_selected_period\'">No data available for selected period</div>\n    <!--/ko-->\n</div>';});


define('text!views/dashboard/widgets/stats.html',[],function () { return '<div class="stats" data-bind="css : { \'loading1\' : loading }">\n    <span class="stat" id="newCustomers" data-bind="css : { \'loading\' : loading }">\n        <span class="image new-customers"></span>\n        <span class="value" >\n            <span class="name" data-bind="local: \'dashboard/widgets/stats.new_customers\'"></span>\n            <span class="count" data-bind="formatNumber: stats.newCustomers"></span>\n        </span>\n    </span>\n    <span class="stat" id="repeatCustomers" data-bind="css : { \'loading\' : loading }">\n        <span class="image repeat-customers"></span>\n        <span class="value" ">\n            <span class="name" data-bind="local: \'dashboard/widgets/stats.repeat_customers\'"></span>\n            <span class="count" data-bind="formatNumber: stats.repeatCustomers"></span>\n        </span>\n    </span>\n    <span class="stat" id="totalSales" data-bind="css : { \'loading\' : loading }">\n        <span class="image total-sales"></span>\n        <span class="value" >\n            <span class="name" data-bind="local: \'dashboard/widgets/stats.total_sales\'"></span>\n            <span class="count" data-bind="currency: stats.totalSales"></span>\n        </span>\n    </span>\n    <span class="stat" id="totalTransactions" data-bind="css : { \'loading\' : loading }">\n        <span class="image total-transaction"></span>\n        <span class="value" >\n            <span class="name" data-bind="local: \'dashboard/widgets/stats.total_transactions\'"></span>\n            <span class="count" data-bind="formatNumber: stats.totalTransactions"></span>\n        </span>\n    </span>\n    <span class="stat" id="refunds" data-bind="css : { \'loading\' : loading }">\r\n        <span class="image refunds"></span>\r\n        <span class="value" >\r\n            <span class="name" data-bind="local: \'dashboard/widgets/stats.refunds\'"></span>\r\n            <span class="count" data-bind="currency: stats.refunds"></span>\r\n        </span>\r\n    </span>\n</div>';});


define('text!views/dashboard/widgets/support.html',[],function () { return '<div class="support bo-widget">\n    <div class="support-header">\n        <span class="support-header-title" data-bind="local: \'dashboard/widgets/support.support_team\'">Support</span>\n    </div>\n    <div class="support-body">\n        <p><strong data-bind="local: \'dashboard/widgets/support.accountId\'"></strong> <span data-bind="text: enterpriseCode"></span></p>\n        <p><strong data-bind="local: \'dashboard/widgets/support.webPosUrl\'"></strong> <a href="https://pos.ehopper.com/" target="_blank">https://pos.ehopper.com/</a></p>\n        <p>\n            <strong data-bind="local: \'dashboard/widgets/support.onlineHelp\'"></strong>\n            <a href="Zendesk/Login?goto=1" target="_blank" data-bind="click: checkNickname, local: \'dashboard/widgets/support.knowledgeBase\'"></a>\n        </p>\n        <p>\r\n            <strong data-bind="local: \'dashboard/widgets/support.communityLabel\'"></strong>\r\n            <a href="Zendesk/Login" target="_blank" data-bind="click: checkNickname, local: \'dashboard/widgets/support.community\'"></a>\r\n        </p>\n    </div>\n    <div class="support-separator"></div>\n    <div class="support-notes">\n        <p>\n            <span class="green" data-bind="local: \'dashboard/widgets/support.note\'"></span>\n            <span data-bind="text: noteMessage"></span>\n        </p>\n    </div>\n</div>';});


define('text!views/dashboard/widgets/tasks.html',[],function () { return '<div class="tasks bo-widget" data-bind="with: model, css: { \'loading\' : loading }">\r\n    <div class="tasks-header">\r\n        <span class="tasks-header-title" data-bind="local: \'dashboard/widgets/tasks.getting_started\'">Getting Started</span>\r\n        <div class="header-collapse" data-bind="click: triggerCollapse, text: collapseText"></div>\r\n    </div>\r\n    <div class="tasks-body" data-bind="visible: !collapsedWidget()">\r\n        <table class="tasks-table" >\r\n            <tbody data-bind="foreach: tasks">\r\n                <tr>\r\n                    <td class="tasks-column-checkbox" data-bind="click: doneTask">\r\n                        <input class="checkbox" type="checkbox" data-bind="checked: isDone()"><label></label>\r\n                    </td>\r\n                    <td class="task-title" data-bind="text: name, click: itemClick, visible: !isEdit(), css : { checked: isDone() }"></td>\r\n                    <td class="task-title" data-bind="visible: isEdit()">\r\n                        <input class="textbox task-edit" type="text" data-bind="value: name, hasFocus: isEdit, local:\'dashboard/widgets/tasks.my_custom_task\' , localAttr: \'placeholder\'" placeholder="My custom task">\r\n                    </td>\r\n                    <td class="tasks-column-nav" data-bind="visible: isDefault, click: itemClick"></td>\r\n                    <td class="tasks-column-remove" data-bind="visible: !isDefault()">\r\n                        <input class="delete-button" type="button" data-bind="click: deleteSelected">\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n    <div class="tasks-footer">\r\n        <div class="nav-buttons">\r\n            <input class="nav-button nav-button-add" type="button" data-bind="click: createNew">\r\n        </div>\r\n        <div class="nav-buttons nav-task" style="float:right;">\r\n            <input class="nav-button nav-button-previous" type="button" id="prevTasks">\r\n            <input class="nav-button nav-button-next" type="button" id="nextTasks">\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/departments/departmentManage.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }--><!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="form long" data-bind="with: department">\r\n                <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n                <div id="saveMessages"></div>\r\n\r\n                <div class="form-group">\r\n                    <label data-bind="local: $root.getKeyPrefix() + \'departments/departmentManage.department_name\'"></label>\r\n                    <!-- ko foreach: names -->\r\n                    <input class="form-control input-lg" type="text" placeholder="Input Name" maxlength="100"\r\n                           data-bind="value: $data.name, visible: $data.languageId === $root.langs.selectedLanguage(), local: $root.getKeyPrefix() + \'departments/departmentManage.input_name\', localAttr: \'placeholder\'">\r\n                    <!-- /ko -->\r\n                </div>\r\n                <div class="form-group">\r\n                    <label data-bind="local: $root.getKeyPrefix() + \'departments/departmentManage.department_description\'"></label>\r\n                    <!-- ko foreach: names -->\r\n                    <textarea class="form-control input-lg" placeholder="Input Description"\r\n                              data-bind="value: $data.description, visible: $data.languageId === $root.langs.selectedLanguage(), local: $root.getKeyPrefix() + \'departments/departmentManage.input_description\', localAttr: \'placeholder\'"></textarea>\r\n                    <!-- /ko -->\r\n                </div>\r\n\r\n                <div class="checkbox">\r\n                    <input type="checkbox" id="isActiveDepartment" data-bind="checked: isActive">\r\n                    <label for="isActiveDepartment" data-bind="local: $root.getKeyPrefix() + \'departments/departmentManage.is_active\'">Is Active</label>\r\n                </div>\r\n\r\n                <br />\r\n                <!-- ko if: appsData[\'qb\'] -->\r\n                <div class="qb-accounts-container" >\r\n                    <qb-accounts params="value: appsData[\'qb\']"></qb-accounts>\r\n                    <br />\r\n                </div>\r\n                <!-- /ko -->\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: $root.save, local: $root.getKeyPrefix() + \'departments/departmentManage.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: $root.cancel, local: $root.getKeyPrefix() + \'departments/departmentManage.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/departments/departmentsList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body departments">\r\n            <div id="messages"></div>\r\n\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search For Department" data-bind="local: getKeyPrefix() + \'departments/departmentsList.search_for_department\', localAttr: \'placeholder\'">\r\n\r\n            <div class="btn-group btn-group-lg pull-right">\r\n                <a class="btn btn-primary" data-bind="attr: { href: \'#\' + getRoute(\'department\') }, local: getKeyPrefix() + \'departments/departmentsList.new_department\'">New Department</a>\r\n                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only" data-bind="local: getKeyPrefix() + \'departments/departmentsList.toggle_dropdown\'">Toggle Dropdown</span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li><a data-bind="attr: { href: \'#\' + getRoute(\'category\') }, local: getKeyPrefix() + \'departments/departmentsList.new_category\'">New Category</a></li>\r\n                    <!-- ko if: !isAppMode() -->\r\n                    <li><a href="#product" data-bind="local: \'departments/departmentsList.new_item\'">New Item</a></li>\r\n                    <li><a href="#modifier" data-bind="local: \'departments/departmentsList.new_modifier\'">New Modifier</a></li>\r\n                    <!-- /ko -->\r\n                </ul>\r\n            </div>\r\n\r\n            <button class="btn btn-lg pull-right btn-red delete-button-mark" type="button" data-bind="click: deleteSelected, enable: hasSelected ">\r\n                <span class="" data-bind="local: \'common.delete_selected\'">Delete</span>\r\n            </button>\r\n\r\n            <br class="clear">\r\n\r\n            <table class="datatable selectablelist" id="departmentsTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th>\r\n                            <div class="checkbox">\r\n                                <input type="checkbox" id="lobSelectAll" data-bind="checked: selectAll">\r\n                                <label for="lobSelectAll"></label>\r\n                            </div>\r\n                        </th>\r\n                        <th data-bind="local: getKeyPrefix() + \'departments/departmentsList.department_name\'">Department Name</th>\r\n                        <th data-bind="local: getKeyPrefix() + \'departments/departmentsList.status\'">Status</th>\r\n                        <th>\r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/dialogs/taxCombinedDialog.html',[],function () { return '\r\n<div class="messageBox taxCombinedDialog">\r\n\r\n    <div class="modal-body clearfix">\r\n        <button type="button" class="close" data-bind="click: closeDialog">&times;</button>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-6 text-center delimiter">\r\n                <p><img src="content/images/simple-tax.png" class="app-icon"></p>\r\n                <h4 style="font-weight:bold;" data-bind="local: \'taxCombinedDialog.simple\'"></h4>\r\n                <p data-bind="local: \'taxCombinedDialog.simple_tax_desc\'"></p>\r\n                <button class="btn btn-lg btn-primary" type="button" data-bind="click: selectSimpleTax, local: \'taxCombinedDialog.create\'"></button>\r\n            </div>\r\n            <div class="col-xs-6 text-center">\r\n                <p><img src="content/images/combined-tax.png" class="app-icon"></p>\r\n                <h4 style="font-weight:bold;" data-bind="local: \'taxCombinedDialog.combined\'"></h4>\r\n                <p data-bind="local: \'taxCombinedDialog.combined_tax_desc\'"></p>\r\n                <button class="btn btn-lg btn-primary" type="button" data-bind="click: selectCombinedTax, local: \'taxCombinedDialog.create\'"></button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="or-delimiter" data-bind="local: \'taxCombinedDialog.or\'"></div>\r\n\r\n    </div> \r\n     \r\n</div>\r\n';});


define('text!views/dialogs/variantDialog.html',[],function () { return '\r\n<div class="messageBox variantDialog">\r\n\r\n    <div class="modal-body clearfix">\r\n        <button type="button" class="close" data-bind="click: closeDialog">&times;</button>\r\n\r\n        <div class="row">\r\n            <div class="col-xs-6 text-center delimiter">\r\n                <p><img src="content/images/appstore/product-basic.png" class="app-icon"></p>\r\n                <h4 style="font-weight:bold;" data-bind="local: \'inventory/inventoryManage.basic_item\'"></h4>\r\n                <p data-bind="local: \'inventory/inventoryManage.sell_basic\'"></p>\r\n                <button class="btn btn-lg btn-primary" type="button" data-bind="click: selectSimple, local: \'inventory/inventoryManage.create\'"></button>\r\n            </div>\r\n            <div class="col-xs-6 text-center">\r\n                <p><img src="content/images/appstore/product-variants.png" class="app-icon"></p>\r\n                <h4 style="font-weight:bold;" data-bind="local: \'inventory/inventoryManage.variant_item\'"></h4>\r\n                <p data-bind="local: \'inventory/inventoryManage.sell_variant\'"></p>\r\n                <button class="btn btn-lg btn-primary" type="button" data-bind="click: selectVariant, local: \'inventory/inventoryManage.create\'"></button>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="or-delimiter" data-bind="local: \'inventory/inventoryManage.or\'"></div>\r\n\r\n    </div> \r\n     \r\n</div>\r\n';});


define('text!views/doUnblockAccount.html',[],function () { return '<div class="form-signin">\r\n    <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png">\r\n    <h2 style="text-align: center" data-bind="text: title, local: \'resetPassword.title-unblock\' "></h2>\r\n\r\n    <div id="doUnblockAccountMessage"></div>\r\n    <p class="error-message" data-bind="html: errorMessage"></p>\r\n\r\n    \r\n</div>\r\n\r\n<span class="version"></span>';});


define('text!views/employees/employeeManage.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="loader-container" data-bind="visible: loading"></div>\r\n        <div class="pane-body item-list">\r\n            <div class="form employee-manage-form" id="employeeManage">\r\n                <div class="employees-tabs"></div>\r\n                <div id="saveMessages"></div>\r\n\r\n                <div class="tab-content" id="generalTab" data-bind="compose: {\r\n                    model: \'viewmodels/employees/manage-tabs/generalTab\',\r\n                    view: \'views/employees/manage-tabs/generalTab.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="contactsTab" data-bind="compose: {\r\n                    model: \'viewmodels/employees/manage-tabs/contactTab\',\r\n                    view: \'views/employees/manage-tabs/contactTab.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="localizationTab" data-bind="compose: {\r\n                    model: \'viewmodels/employees/manage-tabs/localizationTab\',\r\n                    view: \'views/employees/manage-tabs/localizationTab.html\'\r\n                }"></div>\r\n            \r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: save, local:\'employees/employeeManage.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: cancel, local:\'employees/employeeManage.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/employees/employeesList.html',[],function () { return '<div class="pane pane-right">\n\n    <!--ko compose: { model: \'viewmodels/header\' }-->\n    <!--/ko-->\n    <div class="pane-body-wrapper">\n        <div class="pane-body employees">\n            <div id="messages"></div>\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search For Employee" data-bind="local: \'employees/employeesList.search_for_employee\', localAttr: \'placeholder\'">\n            <div style="float:left;">\r\n                <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n                <!--/ko-->\r\n            </div>\r\n\n            <div class="btn-group btn-group-lg pull-right" data-bind="permission: \'ManageEmployeeLogin\'">\n                <input class="btn btn-lg btn-primary pull-right" type="button" value="New Employee" data-bind="click: showNewEmployee, local:\'employees/employeesList.new_employee\' ">\n            </div>\n\n            <br class="clear">\n\n            <table class="datatable" id="employeesTable">\n                <thead>\n                    <tr>\n                        <th data-bind="local: \'employees/employeesList.first_name\'">First Name</th>\n                        <th data-bind="local: \'employees/employeesList.last_name\'">Last Name</th>\n                        <th data-bind="local: \'employees/employeesList.nickname\'">Nickname</th>\n                        <th data-bind="local: \'employees/employeesList.email\'">Email</th>\n                        <th data-bind="local: \'employees/employeesList.phone\'">Phone</th>\n                        <th data-bind="local: \'employees/employeesList.store\'">Store</th>\n                        <th data-bind="local: \'employees/employeesList.role\'">Role</th>\n                        <th data-bind="local: \'employees/employeesList.status\'">Status</th>\n                    </tr>\n                </thead>\n                <tbody></tbody>\n            </table>\n        </div>\n    </div>\n</div>\n';});


define('text!views/employees/manage-tabs/contactTab.html',[],function () { return '<div data-bind="with: model">\n    <div class="form-group">\n        <label data-bind="local: \'employees/manage-tabs/contactTab.phone\'">Phone</label>\n        <input class="form-control input-lg" type="text" placeholder="Phone" data-bind="value: phone.phone, valueUpdate: \'afterkeydown\', phoneFilter: true, local:\'employees/manage-tabs/contactTab.phone\' , localAttr: \'placeholder\'">\n    </div>\n\n    <div class="form-group">\n        <label data-bind="local: \'employees/manage-tabs/contactTab.address\'">Address</label>\n        <input class="form-control input-lg" type="text" placeholder="Address" maxlength="255" data-bind="value: address, local:\'employees/manage-tabs/contactTab.address\' , localAttr: \'placeholder\'">\n    </div>\n\n    <div class="form-group row">\n        <div class="col-xs-6">\n            <label data-bind="local: \'employees/manage-tabs/contactTab.country\'">Country</label>\n            <select class="input-lg" data-bind="options: countries(), optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'employees/manage-tabs/contactTab.choose_country\'), value: countryId, event: { change: countryChange }"></select>\n        </div>\n        <div class="col-xs-6" data-bind="visible: stateVisible">\n            <label data-bind="local: \'employees/manage-tabs/contactTab.state\'">State</label>\n            <select class="input-lg" data-bind="options: states(), optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'employees/manage-tabs/contactTab.choose_state\'), value: stateId"></select>\n        </div>\n    </div>\n\n    <div class="form-group row">\n        <div class="col-xs-6">\n            <label data-bind="local: \'employees/manage-tabs/contactTab.city\'">City</label>\n            <input class="form-control input-lg" type="text" placeholder="City" maxlength="100" data-bind="value: city, local:\'employees/manage-tabs/contactTab.city\' , localAttr: \'placeholder\'">\n        </div>\n        <div class="col-xs-6">\n            <label data-bind="local: \'employees/manage-tabs/contactTab.zip\'">Zip</label>\n            <input class="form-control input-lg" type="text" placeholder="Zip" maxlength="10" data-bind="value: zip, local:\'employees/manage-tabs/contactTab.zip\' , localAttr: \'placeholder\'">\n        </div>\n    </div>\n\n    <span data-bind="text: $root.setUnmodified()"></span>\n</div>\n';});


define('text!views/employees/manage-tabs/generalTab.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="generalMessages"></div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'employees/manage-tabs/generalTab.first_name\'">First Name</label>\r\n        <input class="form-control input-lg" type="text" placeholder="First Name" maxlength="100" data-bind="value: firstName, local:\'employees/manage-tabs/generalTab.first_name\' , localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'employees/manage-tabs/generalTab.last_name\'">Last Name</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Last Name" maxlength="100" data-bind="value: lastName, local:\'employees/manage-tabs/generalTab.last_name\' , localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'employees/manage-tabs/generalTab.nickname\'"></label>\r\n        <input class="form-control input-lg" type="text" maxlength="100"\r\n               data-bind="value: nickname, local:\'employees/manage-tabs/generalTab.nickname\', localAttr: \'placeholder\'" />\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'employees/manage-tabs/contactTab.email\'">Email</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Email" data-bind="enable: adminPermissionGranted, value: email, local:\'employees/manage-tabs/contactTab.email\' , localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <!-- ko if: adminPermissionGranted  -->\r\n    <div class="form-group row">\r\n        <div class="col-sm-6 col-md-6 ">\r\n            <label data-bind="local: \'employees/manage-tabs/generalTab.pin\'">PIN</label>\r\n            <input class="form-control input-lg" type="password" placeholder="PIN" maxlength="6" data-bind="value: pin, digitFilter: true, local:\'employees/manage-tabs/generalTab.pin\' , localAttr: \'placeholder\'">\r\n        </div>\r\n        <div class="col-sm-6 col-md-6">\r\n            <label data-bind="local: \'employees/manage-tabs/generalTab.confirm_pin\'">Confirm PIN</label>\r\n            <input class="form-control input-lg" type="password" placeholder="PIN" maxlength="6" data-bind="value: confirmPin, digitFilter: true, local:\'employees/manage-tabs/generalTab.confirm_pin\' , localAttr: \'placeholder\'">\r\n        </div>\r\n    </div>    \r\n\r\n    <div class="form-group row">\r\n        <div class="col-sm-6 col-md-6 ">\r\n            <label data-bind="local: \'employees/manage-tabs/generalTab.password\'">Password</label>\r\n            <input class="form-control input-lg" type="password" placeholder="Password" maxlength="100" data-bind="value: password, local:\'employees/manage-tabs/generalTab.password\' , localAttr: \'placeholder\'">\r\n        </div>\r\n        <div class="col-sm-6 col-md-6">\r\n            <label data-bind="local: \'employees/manage-tabs/generalTab.confirm_password\'">Confirm Password</label>\r\n            <input class="form-control input-lg" type="password" placeholder="Password" maxlength="100" data-bind="value: confirmPassword, local:\'employees/manage-tabs/generalTab.confirm_password\' , localAttr: \'placeholder\'">\r\n        </div>\r\n    </div>    \r\n\r\n    <div class="form-group row">\r\n        <div class="col-sm-12 col-md-12 ">\r\n            <label data-bind="local: \'employees/manage-tabs/generalTab.role\'">Role</label>\r\n            <select data-bind="options: roles, optionsText: \'roleName\', optionsValue: \'roleName\', optionsCaption: ko.T(\'employees/manage-tabs/generalTab.select_role\'), value: roleId"></select>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group employee-form" data-bind="visible: roleId() !== \'Administrator\'">\r\n        <div style="float:left;"><label data-bind="local: \'employees/manage-tabs/generalTab.stores\'">Stores:</label></div>\r\n        <div style="float:right;">\r\n            <input type="checkbox" id="chAssignOnly" data-bind="checked: $root.isAssignOnly, attr: { disabled: !isAssignShopEditeble() }">\r\n            <label for="chAssignOnly" data-bind="local: \'employees/manage-tabs/generalTab.assignedOnly\'"></label>\r\n        </div>        \r\n         <select class="form-control input-lg" id="ddlBU"\r\n             data-bind="options: $root.bussinesUnitsToShow, optionsText: \'storeName\', optionsValue: \'id\',\r\n                multipleSelect: $root.bussinesUnitsToShow, selectedElements: businessUnitsSelected,\r\n                multipleSelectOptions: $root.setupMultiSelect()">\r\n         </select>\r\n    </div>   \r\n    <!-- /ko -->\r\n\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="isActiveDepartment" data-bind="checked: isActive">\r\n        <label for="isActiveDepartment" data-bind="local: \'employees/manage-tabs/generalTab.is_active\'">Is Active</label>\r\n    </div>\r\n\r\n    <span data-bind="text: $root.setUnmodified()"></span>\r\n</div>\r\n';});


define('text!views/employees/manage-tabs/localizationTab.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="localizationMessages"></div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'employees/manage-tabs/localizationTab.pos_language\'">POS Language</label>\r\n        <select data-bind="options: languagesWithoutCustom, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'employees/manage-tabs/localizationTab.select_pos_language\'),\r\n                           value: isoLanguageId, enable: adminPermissionGranted">\r\n        </select>\r\n        <span class="validationMessage" data-bind="validationMessage: isoLanguageId"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'employees/manage-tabs/localizationTab.bo_language\'">BO Language</label>\r\n        <input class="form-control input-lg bo-language-input" type="text" disabled="disabled" data-bind="value: boLanguage">\r\n    </div>\r\n\r\n</div>\r\n';});


define('text!views/enterprise/enterprise-settings-tabs/contacts.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="contactsMessages"></div>\r\n\r\n    <div class="form-group" data-bind="permission: \'ADM\'">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.enterprise_code\'"></label>\r\n        <div class="inline" data-bind="text: enterpriseCode"></div>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.enterprise_name\'">Enterpise Name</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Enterpise Name" maxlength="100" data-bind="value: name, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.enterprise_name\' , localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.address_1\'">Address 1</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Address 1" maxlength="255" data-bind="value: address1, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.address_1\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.address_2\'">Address 2</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Address 2" maxlength="255" data-bind="value: address2, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.address_2\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.city\'">City</label>\r\n        <input class="form-control input-lg" type="text" placeholder="City" maxlength="255" data-bind="value: city, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.city\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.state\'">State</label>\r\n        <input class="form-control input-lg" type="text" placeholder="State" maxlength="3" data-bind="value: state, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.state\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.zip\'">Zip</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Zip" maxlength="10" data-bind="value: zip, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.zip\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.country\'">Country</label>\r\n        <select class="select" data-bind="options: countries, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'enterpriseSettings/enterprise-settings-tabs/contacts.choose_country\'), value: countryId, event: { change: countryChange }"></select>\r\n    </div>\r\n    <div class="form-group short-input">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.phone\'">Phone</label>\r\n        <input class="form-control input-lg" type="tel" placeholder="Phone" maxlength="40" data-bind="value: phone.phone, valueUpdate: \'afterkeydown\', phoneFilter: true, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.phone\', localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group short-input">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.email\'">Email</label>\r\n        <input class="form-control input-lg" type="email" placeholder="Email" data-bind="value: email, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.email\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group short-input">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/contacts.web\'">Web</label>\r\n        <input class="form-control input-lg" type="url" placeholder="Web" maxlength="255" data-bind="value: web, local:\'enterpriseSettings/enterprise-settings-tabs/contacts.web\' , localAttr: \'placeholder\'">\r\n    </div>\r\n</div>\r\n';});


define('text!views/enterprise/enterprise-settings-tabs/localization.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="localizationMessages"></div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.account_languages\'">Account languages</label>\r\n        <!-- ko if: enabled() -->\r\n        <select class="select" data-bind="options: languages,\r\n                                          optionsText: \'name\',\r\n                                          optionsValue: \'id\',\r\n                                          multipleSelect: languages,\r\n                                          selectedElements: enterpriseLanguages,\r\n                                          multipleSelectOptions: $root.languagesMultipleSelectOptions">\r\n        </select>\r\n        <!-- /ko -->\r\n        \r\n        <!-- ko if: !enabled() -->\r\n        <select data-bind="options: allSelectedAccountLanguagesOption, optionsText: \'name\', optionsValue: \'id\', value: 0" disabled="disabled" ></select>\r\n        <!-- /ko -->\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.default_language\'">Default Language</label>\r\n        <select data-bind="options: accountLanguagesWithoutCustom, optionsText: \'name\', optionsValue: \'id\', value: defaultLanguageId, enable: enabled"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.pos_language\'">POS Language</label>\r\n        <select data-bind="options: accountLanguagesWithoutCustom, optionsText: \'name\', optionsValue: \'id\', value: posLanguageId, enable: enabled"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.kitchen_receipt_language\'">Kitchen Receipt Language</label>\r\n        <select data-bind="options: accountLanguages, optionsText: \'name\', optionsValue: \'id\', value: kitchenReceiptLanguageId, enable: enabled"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.bo_language\'">BO Language</label>\r\n        <select data-bind="options: accountLanguagesWithoutCustom, optionsText: \'name\', optionsValue: \'id\', value: boLanguageId, enable: enabled"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.date_format\'">Date format</label>\r\n        <select data-bind="options: dateFormats, optionsText: \'textFormat\', optionsValue: \'id\', value: dateFormatId, enable: enabled"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.time_format\'">Time format</label>\r\n        <select data-bind="options: timeFormats, optionsText: \'textFormat\', optionsValue: \'id\', value: timeFormatId, enable: enabled"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'enterpriseSettings/enterprise-settings-tabs/localization.currency\'">Currency</label>\r\n        <select data-bind="options: currencies, optionsText: \'name\', optionsValue: \'id\', value: currencyId, enable: enabled"></select>\r\n    </div>\r\n\r\n</div>';});


define('text!views/enterprise/enterprise-settings-tabs/marketing.html',[],function () { return '<div>\r\n    <div class="form wide-form bo-marketing-form" data-bind="">\r\n\r\n        <div class="form-group">\r\n            <label data-bind="local: \'enterpriseSettings/enterpriseSettings.optInCheckIn\'"></label>\r\n            <input class="form-control input-lg" type="text" placeholder="{00000000-0000-0000-0000-000000000000}" maxlength="40" data-bind="value: optInCheckInKey" />\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <label data-bind="local: \'enterpriseSettings/enterpriseSettings.loyaltyRedemptionKey\'"></label>\r\n            <input class="form-control input-lg" type="text" placeholder="{00000000-0000-0000-0000-000000000000}" maxlength="40" data-bind="value: loyaltyRedemptionKey" />\r\n        </div>\r\n\r\n    </div>\r\n</div>';});


define('text!views/enterprise/enterpriseSettings.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <div class="loader-wrapper" data-bind="visible: progress">\r\n        <div class="loader-container global-center"></div>\r\n    </div>\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/enterpriseHelpPopup.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body item-list">\r\n            <div class="form wide-form enterprise-settings js-enterprise">\r\n                <div class="enterprise-settings-tabs" data-bind="css: { \'no-marketing\': !isMarketingAndLoyalty() }"></div>\r\n                <div id="saveMessages"></div>\r\n\r\n                <div class="tab-content" id="enterpriseGeneralTab" data-bind="compose: {\r\n                    model: \'viewmodels/enterprise/enterprise-settings-tabs/general\',\r\n                    view: \'views/stores/store-settings-tabs/general.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="enterpriseContactsTab" data-bind="compose: {\r\n                    model: \'viewmodels/enterprise/enterprise-settings-tabs/contacts\',\r\n                    view: \'views/enterprise/enterprise-settings-tabs/contacts.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="enterpriseReceiptTab" data-bind="compose: {\r\n                    model: \'viewmodels/enterprise/enterprise-settings-tabs/receipt\',\r\n                    view: \'views/stores/store-settings-tabs/receipt.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="enterpriseTipsTab" data-bind="compose: {\r\n                    model: \'viewmodels/enterprise/enterprise-settings-tabs/tips\',\r\n                    view: \'views/stores/store-settings-tabs/tips.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="enterpriseTaxesTab" data-bind="compose: {\r\n                    model: \'viewmodels/enterprise/enterprise-settings-tabs/taxes\',\r\n                    view: \'views/stores/store-settings-tabs/taxes.html\'\r\n                }"></div>\r\n\r\n                <div id="localizationTab" class="tab-content" data-bind="compose: {\r\n                    model: \'viewmodels/enterprise/enterprise-settings-tabs/localization\',\r\n                    view: \'views/enterprise/enterprise-settings-tabs/localization.html\'\r\n                }"></div>\r\n\r\n            <!-- ko if: isMarketingAndLoyalty -->\r\n                <div id="marketingTab" class="tab-content" data-bind="compose: {\r\n                    model: \'viewmodels/enterprise/enterprise-settings-tabs/marketing\',\r\n                    view: \'views/enterprise/enterprise-settings-tabs/marketing.html\'\r\n                }"></div>\r\n            <!-- /ko -->\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary uppercase" type="button" value="Done"\r\n                        data-bind="click: save, local: \'enterpriseSettings/enterpriseSettings.done\', visible: isAdmin">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel"\r\n                        data-bind="click: cancel, local: \'enterpriseSettings/enterpriseSettings.cancel\'">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/header.html',[],function () { return '<div class="pane-header">\n    <div class="toggle-options-panel-button" data-bind="click: clickButton">&nbsp;</div>\n    <b><span data-part="navPath" data-bind="text: navigationPath"></span></b>\n</div>\n    \n';});


define('text!views/inventory/importInventory.html',[],function () { return '<!-- TODO -->\r\n<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }--><!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/importInventoryHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body item-list">\r\n            <div class="form import-container import-inventory" data-bind="with: model">\r\n\r\n                <div class="error-box" data-bind="text: error, visible: error">\r\n                </div>\r\n                <div class="success-box" data-bind="text: message, visible: message">\r\n                </div>\r\n            \r\n                <div class="form-group file-box-container">\r\n                    <label data-bind="local: \'inventory/importInventory.file_to_import\'">File to import</label>\r\n                    <div class="file-box float-left">\r\n                        <span class="file-name" data-bind="text: (file() ? file() : ko.local(\'inventory/importInventory.browse_csv_file\'))"></span>\r\n                    </div>\r\n\r\n                    <span class="btn btn-lg btn-default fileinput-button float-left">\r\n                        <span data-bind="local: \'inventory/importInventory.browse\'">Browse</span>\r\n                        <!-- The file input field used as target for the file upload widget -->\r\n                        <input id="importInventoryFile" type="file" name="files[]">\r\n                    </span>\r\n\r\n                </div>\r\n\r\n                <div class="progress-bar-wrapper">\r\n                    <div class="form-group" data-bind="visible: isUploading">\r\n                        <label data-bind="local: \'inventory/importInventory.uploading\'">Uploading</label>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-info progress-bar-striped" role="progressbar" aria-valuemin="0" aria-valuemax="100" data-bind="text: uploadProgress() + \'%\', attr : {\'aria-valuenow\': uploadProgress} , style: {width : (uploadProgress() + \'%\') }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group" data-bind="visible: isImporting">\r\n                        <label data-bind="local: \'inventory/importInventory.importing\'">Importing</label>\r\n                        <div class="progress">\r\n                            <div class="progress-bar progress-bar-warning progress-bar-striped" role="progressbar" aria-valuemin="0" aria-valuemax="100" data-bind="text: importProgress() + \'%\', attr : {\'aria-valuenow\': importProgress} , style: {width : (importProgress() + \'%\') }">\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group form-buttons form-flex">\r\n                        <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="DONE" data-bind="click: $parent.import.bind($parent), enable: readyForUpload, local:\'inventory/importInventory.done\' ">\r\n                        <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: $parent.cancel.bind($parent), attr: { disabled: (!isUploading() && !isImporting()) ? \'disabled\' : undefined }, local: \'inventory/importInventory.cancel\' ">\r\n                        <input class="btn btn-lg btn-default" type="button" value="Get Template" data-bind="click: $parent.downloadTemplate.bind($parent), local:\'inventory/importInventory.get_template\' ">\r\n                    </div>\r\n\r\n                    <div class="form-text">\r\n                        <p>Find Inventory Import Instructions <a target="_blank" href="https://ehoppersupport.zendesk.com/hc/en-us/articles/219568148-Import-of-Inventory">here</a></p>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/inventory/inventory-manage-tabs/general.html',[],function () { return '<div data-bind="with: model">\r\n    <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n    <div id="saveMessages"></div>\r\n    \r\n    <div class="form-group radio-button-group" style="margin-left: 0"  data-bind="visible: productType() == 0">\r\n        <input type="radio" id="inventoryTypeStandard" name="inventoryType" data-bind="checked: inventoryType, value: 0" />\r\n        <label for="inventoryTypeStandard" data-bind="local: \'inventory/inventory-manage-tabs/general.inventoryTypeStandard\'"></label>\r\n\r\n        <input type="radio" id="inventoryTypeNonInventory" name="inventoryType" data-bind="checked: inventoryType, value: 2" />\r\n        <label for="inventoryTypeNonInventory" data-bind="local: \'inventory/inventory-manage-tabs/general.inventoryTypeNonInventory\'"></label>\r\n\r\n        <input type="radio" id="inventoryTypeSerialized" name="inventoryType" data-bind="checked: inventoryType, value: 1" />\r\n        <label for="inventoryTypeSerialized" data-bind="local: \'inventory/inventory-manage-tabs/general.inventoryTypeSerialized\'"></label>\r\n    </div>\r\n            \r\n    <div class="form-group">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/general.product_name\'">Product Name</label>\r\n        <!-- ko foreach: names -->\r\n        <input class="form-control input-lg" type="text" placeholder="Product Name" maxlength="100"\r\n               data-bind="value: $data.name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/general.product_name\', localAttr: \'placeholder\'">\r\n        <!-- /ko -->\r\n    </div>\r\n\r\n    <div class="row">\r\n        <div class="col-sm-7">\r\n            <div class="form-group">\r\n                <label data-bind="local: \'inventory/inventory-manage-tabs/general.product_short_name\'"></label>\r\n                <!-- ko foreach: names -->\r\n                <input style="width:100%; " class="form-control input-lg" type="text" placeholder="Product Short Name" maxlength="5"\r\n                       data-bind="value: $data.shortName, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/general.product_short_name\', localAttr: \'placeholder\'">\r\n                <!-- /ko -->\r\n            </div>\r\n        </div>\r\n        <div class="col-xs-5">\r\n            <div class="form-group color-sm">\r\n                <label for="color2" data-bind="local: \'inventory/inventory-manage-tabs/general.color\'">Color</label>\r\n                <input class="select" readonly="readonly" style="color:#A5C2EB;" onkeydown="return false" type="text" id="color2" />\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="form-group">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/general.product_description\'">Product Description</label>\r\n        <!-- ko foreach: names -->\r\n        <textarea class="form-control input-lg" placeholder="Product Description"\r\n                  data-bind="value: $data.description, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/general.product_description\', localAttr: \'placeholder\'"></textarea>\r\n        <!-- /ko -->\r\n    </div>\r\n\r\n    <div class="row">\r\n        <div class="col-sm-6">\r\n            <div class="form-group">\r\n                <label data-bind="local: \'inventory/inventory-manage-tabs/general.department\'">Department</label>\r\n                <select class="w100" data-bind="options: departments, optionsText: \'nameAndStatus\', optionsValue: \'id\', optionsCaption: ko.local(\'inventory/inventory-manage-tabs/general.choose_department\'), value: departmentId"></select>\r\n            </div>\r\n        </div>\r\n        <div class="col-sm-6">\r\n            <div class="form-group">\r\n                <label data-bind="local: \'inventory/inventory-manage-tabs/general.category\'">Category</label>\r\n                <select class="w100" data-bind="options: categories, optionsText: \'nameAndStatus\', optionsValue: \'id\', optionsCaption: ko.local(\'inventory/inventory-manage-tabs/general.choose_category\'), value: categoryId"></select>\r\n            </div>\r\n        </div>\r\n    </div>\r\n    \r\n    <div class="form-group">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/general.upc\'">UPC</label>\r\n        <input maxlength="20" class="form-control input-lg" type="text" placeholder="UPC" data-bind="value: upc, local:\'inventory/inventory-manage-tabs/general.upc\' , localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="isActiveItem" data-bind="checked: isActive">\r\n        <label for="isActiveItem" data-bind="local: \'inventory/inventory-manage-tabs/general.is_active\'">Is Active</label>\r\n    </div>\r\n    <div class="form-group">\r\n        \r\n        <!-- ko if: chromeBrowserCheck() -->\r\n            <div id="slim-image" class="slim">\r\n                <!-- ko if: !!(picture() && picture().content && picture().content()) -->\r\n                    <img id="picturePreview" alt="" data-bind="attr: { src: picture().content.image }" />\r\n                <!-- /ko -->\r\n                <input id="resultPicture" type="file" name="slim[]" />\r\n            </div>\r\n        <!-- /ko -->\r\n        \r\n        <!-- ko if: !chromeBrowserCheck() -->\r\n            <div class="no-browser-check">\r\n                <span data-bind="local: \'inventory/inventory-manage-tabs/general.browse_images\'"></span>\r\n                <!-- ko if: !!(picture() && picture().content && picture().content()) -->\r\n                    <img id="picturePreview" alt="" data-bind="attr: { src: picture().content.image }" />\r\n                <!-- /ko -->\r\n            </div>\r\n            <!-- ko if: !!(picture() && picture().content && picture().content()) -->\r\n                <p class="validationMessage margin-top" data-bind="local: \'inventory/inventory-manage-tabs/general.chrome_invalid_version_pic\'"></p>\r\n            <!-- /ko -->\r\n            <!-- ko if: !(picture() && picture().content && picture().content()) -->\r\n                <p class="validationMessage margin-top" data-bind="local: \'inventory/inventory-manage-tabs/general.chrome_invalid_version_no_pic\'"></p>\r\n            <!-- /ko -->\r\n        <!-- /ko -->\r\n\r\n        <p class="validationMessage"\r\n            data-bind="visible: $root.imageSizeExceeded(), text: ko.local(\'inventory/inventory-manage-tabs/general.the_image_is_too_big_max_allowed_size_of_image_is_kb\', null, $root.productPictureMaxSize / 1024) ">\r\n        </p>\r\n        <p class="validationMessage" data-bind="visible: $root.error(), text: $root.error() ">\r\n        </p>\r\n    </div>\r\n</div>\r\n';});


define('text!views/inventory/inventory-manage-tabs/modifiers/addOnModifiers.html',[],function () { return '<div class="add-on-exception-modifiers" data-bind="with: model">\r\n    <h2 class="modifiers-header" data-bind="local: \'inventory/inventory-manage-tabs/modifiers/addOnModifiers.add-ons\'">Add-Ons</h2>\r\n    <!-- ko if: addOnModifiers().length > 0 -->\r\n    <table class="modifier-values-table">\r\n        <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th data-bind="local: \'inventory/inventory-manage-tabs/modifiers/addOnModifiers.modifier_name\'"></th>\r\n                <th data-bind="local: \'inventory/inventory-manage-tabs/modifiers/addOnModifiers.price\'"></th>\r\n                <th></th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-bind="foreach: addOnModifiers, sortableList: addOnModifiers">\r\n            <tr>\r\n                <td data-bind="visible: $root.model().isEnterprise" class="drag-modifier"></td>\r\n                <td style="width: 30px;" data-bind="visible: !$root.model().isEnterprise()" >&nbsp;</td>\r\n                <td data-bind="foreach: names">\r\n                    <input class="form-control input-lg" type="text" maxlength="100"\r\n                           data-bind="enable: $root.model().isEnterprise, value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/modifiers/addOnModifiers.add_option\', localAttr: \'placeholder\', attr: { \'data-lang\': $data.languageId }, valueUpdate: \'keyup\'">\r\n                </td>\r\n                <td>                  \r\n                    <input class="form-control input-lg" type="text" data-bind="value: itemModifierValues()[0].modPrice">\r\n                    <!--<span class="validationMessage" data-bind="validationMessage: itemModifierValues()[0].modPrice"></span>-->\r\n                </td>\r\n                <td>\r\n                    <div class="checkbox">\r\n                        <input type="checkbox" data-bind="enable: $root.model().isEnterprise,checked: isActive, attr: { id: $root.getId(\'add-on\', $index()) }">\r\n                        <label data-bind="attr: { for: $root.getId(\'add-on\', $index()) }, local:\'inventory/inventory-manage-tabs/modifiers/addOnModifiers.is_active\'"></label>\r\n                    </div>\r\n                </td>\r\n                <td class="valign-middle">\r\n                    <input class="delete-row-button" type="button" data-bind="click: $parent.deleteAddOnModifier, visible: $root.model().isEnterprise">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="5">\r\n                    <span class="validationMessage" data-bind="validationMessage: name"></span>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: addOnModifiers().length > 0 -->\r\n    <p class="empty-modifiers-group" data-bind="local: \'inventory/inventory-manage-tabs/modifiers/addOnModifiers.you_did_not_add_add-ons\'"></p>\r\n    <!-- /ko -->\r\n    <input class="modifier-add-button" type="button" data-bind="click: $root.addModifier, visible: $root.model().isEnterprise" />\r\n</div>';});


define('text!views/inventory/inventory-manage-tabs/modifiers/exceptionModifiers.html',[],function () { return '<div class="add-on-exception-modifiers" data-bind="with: model">\r\n    <h2 class="modifiers-header" data-bind="local: \'inventory/inventory-manage-tabs/modifiers/exceptionModifiers.exceptions\'">Exceptions</h2>\r\n    <!-- ko if: exceptionModifiers().length > 0 -->\r\n    <table class="modifier-values-table">\r\n        <thead>\r\n            <tr>\r\n                <th></th>\r\n                <th data-bind="local: \'inventory/inventory-manage-tabs/modifiers/exceptionModifiers.modifier_name\'">Modifier Name:</th>\r\n                <th data-bind="local: \'inventory/inventory-manage-tabs/modifiers/exceptionModifiers.price\'">Price:</th>\r\n                <th></th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-bind="foreach: exceptionModifiers, sortableList: exceptionModifiers">\r\n            <tr>\r\n                <td data-bind="visible: $root.model().isEnterprise" class="drag-modifier"></td>\r\n                <td style="width: 30px;" data-bind="visible: !$root.model().isEnterprise()" >&nbsp;</td>\r\n                <td data-bind="foreach: names">\r\n                    <input class="form-control input-lg" type="text" maxlength="100"\r\n                           data-bind="enable: $root.model().isEnterprise, value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/modifiers/exceptionModifiers.add_option\', localAttr: \'placeholder\', attr: { \'data-lang\': $data.languageId }, valueUpdate: \'keyup\'">\r\n                </td>\r\n                <td>\r\n                     <input class="form-control input-lg" type="text" data-bind="value: itemModifierValues()[0].modPrice">\r\n                    <!--<span class="validationMessage" data-bind="validationMessage: itemModifierValues()[0].modPrice"></span>-->\r\n                </td>\r\n                <td>\r\n                    <div class="checkbox">\r\n                        <input type="checkbox" data-bind="enable: $root.model().isEnterprise, checked: isActive, attr: { id: $root.getId(\'exception\', $index()) }">\r\n                        <label data-bind="attr: { for: $root.getId(\'exception\', $index()) }, local:\'inventory/inventory-manage-tabs/modifiers/exceptionModifiers.is_active\' ">Is Active</label>\r\n                    </div>\r\n                </td>\r\n                <td class="valign-middle">\r\n                    <input class="delete-row-button" type="button" data-bind="click: $parent.deleteExceptionModifier, visible: $root.model().isEnterprise">\r\n                </td>\r\n            </tr>\r\n            <tr>\r\n                <td colspan="5">\r\n                    <span class="validationMessage" data-bind="validationMessage: name"></span>\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n    <!-- /ko -->\r\n    <!-- ko ifnot: exceptionModifiers().length > 0 -->\r\n    <p class="empty-modifiers-group" data-bind="local: \'inventory/inventory-manage-tabs/modifiers/exceptionModifiers.you_did_not_add_exceptions\'">You did not add exceptions.</p>\r\n    <!-- /ko -->\r\n    <input class="modifier-add-button" type="button" data-bind="click: $root.addModifier, visible: $root.model().isEnterprise" />\r\n</div>';});


define('text!views/inventory/inventory-manage-tabs/modifiers/groupModifiers.html',[],function () { return '\r\n<div class="group-modifiers">\r\n    <h2 class="modifiers-header" data-bind="local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.groups\'">Groups</h2>\r\n    \r\n    <!-- ko if: model().groupModifiers().length > 0 -->\r\n        <div data-bind="foreach: model().groupModifiers, sortableList: model().groupModifiers, sortableOptions: sortableOptions">\r\n            <div class="modifier-group">\r\n                <table class="modifier-table" data-bind="validationOptions: { insertMessages: false }">\r\n                    <thead>\r\n                        <tr>\r\n                            <th></th>\r\n                            <th data-bind="local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.group_name\'"></th>\r\n                            <th></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td data-bind="visible: $root.model().isEnterprise" class="drag-modifier"></td>\r\n                            <td style="width: 30px;" data-bind="visible: !$root.model().isEnterprise()" >&nbsp;</td>\r\n                            <td data-bind="foreach: names">\r\n                                <input class="form-control input-lg textbox" type="text" maxlength="100"\r\n                                       data-bind="value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.enter_name\', localAttr: \'placeholder\',\r\n                                     attr: { \'data-lang\': $data.languageId }, enable: $root.model().isEnterprise,\r\n                                     valueUpdate: \'keyup\'">\r\n                            </td>\r\n                            <td class="valign-middle">\r\n                                <input class="delete-row-button" type="button" data-bind="click: $root.model().deleteGroupModifier, visible: $root.model().isEnterprise">\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n                <p class="validationMessage" data-bind="validationMessage: name"></p>\r\n            \r\n                <table class="modifier-values-table">\r\n                    <thead>\r\n                        <tr>\r\n                            <th></th>\r\n                            <th data-bind="local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.option\'"></th>\r\n                            <th data-bind="local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.price\'"></th>\r\n                            <th></th>\r\n                            <th></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody data-bind="foreach: itemModifierValues, sortableList: itemModifierValues">\r\n                        <tr data-bind="attr: { id: $root.getId(\'row\', $parentContext.$index(), $index()) }">\r\n                            <td data-bind="visible: $root.model().isEnterprise" class="drag-modifier"></td>\r\n                            <td style="width: 30px;" data-bind="visible: !$root.model().isEnterprise()" >&nbsp;</td>\r\n                            \r\n                            <td data-bind="foreach: names">\r\n                                <input class="form-control input-lg" type="text" placeholder="Add option" maxlength="100"\r\n                                       data-bind="value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.add_option\', localAttr: \'placeholder\', attr: { \'data-lang\': $data.languageId }, enable: $root.model().isEnterprise, valueUpdate: \'keyup\'">\r\n                            </td>\r\n                            <td>\r\n                                <input class="form-control input-lg" type="text" data-bind="value: $data.modPrice">\r\n                                <!--<span class="validationMessage" data-bind="validationMessage: $data.modPrice"></span>-->\r\n                            </td>\r\n                            <td data-bind="validationOptions: { insertMessages: false }">\r\n                                <div class="radio">\r\n                                    <input type="radio" data-bind="disable: !$root.model().isEnterprise(), checked: $parent.defaultOption, value: optionOrder().toString(), attr: { id: $root.getId(\'default\', $parentContext.$index(), optionOrder()) }">\r\n                                    <label data-bind="disable: !$root.model().isEnterprise(), attr: { \'for\': $root.getId(\'default\', $parentContext.$index(), optionOrder()) }"></label>\r\n                                    <label data-bind="disable: !$root.model().isEnterprise(), attr: { \'for\': $root.getId(\'default\', $parentContext.$index(), optionOrder()) }, local:\'inventory/inventory-manage-tabs/modifiers/groupModifiers.default\' ">Default</label>\r\n                                </div>\r\n                            </td>\r\n                            <td class="valign-middle">\r\n                                 <input class="delete-row-button" type="button" data-bind="click: $parent.deleteModifierValue, visible: $parent.itemModifierValues().length > 1 && $root.model().isEnterprise()">\r\n                               \r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            \r\n                <input class="modifier-add-button" type="button" data-bind="click: addModifierValue, visible: $root.model().isEnterprise">\r\n\r\n                <div class="checkbox">\r\n                    <input type="checkbox" data-bind="enable: $root.model().isEnterprise, checked: isActive, attr: { id: $root.getId(\'isActive\', $index()) }">\r\n                    <label data-bind="attr: { for: $root.getId(\'isActive\', $index()) }, local:\'inventory/inventory-manage-tabs/modifiers/groupModifiers.is_active\' ">Is Active</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n    <!-- /ko -->\r\n    \r\n    <!-- ko ifnot: model().groupModifiers().length > 0 -->\r\n    \r\n        <p class="empty-modifiers-group" data-bind="local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.you_did_not_add_group_modifier\'">You did not add group modifier.</p>\r\n\r\n    <!-- /ko -->\r\n    <input class="modifier-add-button" type="button" data-bind="click: $root.addModifier, visible: $root.model().isEnterprise" />\r\n</div>\r\n';});


define('text!views/inventory/inventory-manage-tabs/modifiers/modifiers.html',[],function () { return '<div class="pane item-modifiers" data-bind="with: model">\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body" id="modifiersPane">\r\n\r\n            <div class="modifier-type-section">\r\n                <select id="store_select" data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: selectedStore"></select>\r\n            </div>\r\n\r\n            <div class="modifier-type-section" data-bind="visible: isEnterprise">\r\n                <div class="pull-left">\r\n                    <select data-bind="options: modifierTypes, optionsText: function (o) { return ko.T(\'modifierTypes.\' + o.code); }, optionsValue: \'code\', optionsCaption: ko.T(\'inventory/inventory-manage-tabs/modifiers/modifiers.selectModifierType\'), value: modifierType"></select>\r\n                </div>\r\n                <div class="pull-right">\r\n                    <input class="btn btn-lg btn-primary" type="button" value="New Global Modifier" data-bind="click: $root.showNewModifier, local:\'inventory/inventory-manage-tabs/modifiers/modifiers.new_modifier\' ">\r\n                </div>\r\n            </div>\r\n\r\n            <div class="modifier-templates" data-bind="visible: modifierType() != null &&  isEnterprise">\r\n                <select id="modifierTemplates" data-bind="options: templates, optionsText: \'name\', optionsValue: \'name\', afterRender: { data: templates, callback: setupMultiSelect }"></select>\r\n            </div>\r\n            <div data-bind="visible: isEnterprise">\r\n            <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n            </div>\r\n            <div class="fieldError" data-bind="text: $root.validationMessage(), visible: $root.validationMessage()"></div>\r\n\r\n            <div class="modifiers-block" id="groupModifiers">\r\n                <!-- ko compose: { model: \'viewmodels/inventory/inventory-manage-tabs/modifiers/groupModifiers\' }--><!--/ko-->\r\n            </div>\r\n\r\n            <div class="modifiers-block" id="addOnModifiers">\r\n                <!-- ko compose: { model: \'viewmodels/inventory/inventory-manage-tabs/modifiers/addOnModifiers\' }--><!--/ko-->\r\n            </div>\r\n\r\n            <div class="modifiers-block" id="exceptionModifiers">\r\n                <!-- ko compose: { model: \'viewmodels/inventory/inventory-manage-tabs/modifiers/exceptionModifiers\' }--><!--/ko-->\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/inventory/inventory-manage-tabs/ordering.html',[],function () { return '<div class="form tab-element-padding" data-bind="with: model">\r\n      <div class="tab-elemtn">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/ordering.recommended_quantity\'">Recommended Quantity</label>\r\n         <input class="form-control input-lg" type="text" placeholder="Input Quantity" data-bind="\r\n            value: recommendedQuantity.decimal,\r\n            valueUpdate: \'input\',\r\n            css: { hasError: recommendedQuantity.isModified() && !recommendedQuantity.isValid() }, local:\'inventory/inventory-manage-tabs/ordering.input_quantity\' , localAttr: \'placeholder\'">\r\n        <span class="fieldError" data-bind="validationMessage: recommendedQuantity"></span>\r\n    </div> \r\n     <div class="tab-elemtn">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/ordering.minimum_quantity\'">Minimum Quantity</label>\r\n         <input class="form-control input-lg" type="text" placeholder="Input Quantity" data-bind="\r\n            value: minimumQuantity.decimal,\r\n            valueUpdate: \'input\',\r\n            css: { hasError: minimumQuantity.isModified() && !minimumQuantity.isValid() }, local:\'inventory/inventory-manage-tabs/ordering.input_quantity\' , localAttr: \'placeholder\'">\r\n        <span class="fieldError" data-bind="validationMessage: minimumQuantity"></span>\r\n    </div>  \r\n     <div class="tab-elemtn">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/ordering.total_quantity\'">Quantity</label>\r\n        <input readonly="readonly" class="form-control input-lg" type="text"\r\n            data-bind="value: onHandQuantity.decimal, local:\'inventory/inventory-manage-tabs/ordering.input_quantity\', localAttr: \'placeholder\'" />\r\n    </div>\r\n\r\n     <div style="padding-top:80px;" >\r\n         <table class="datatable time-clock edit-product" id="orderingTable">\r\n            <thead>\r\n                <tr>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/pricing.store\'">Store</th>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/ordering.recommended_quantity\'">Recommended Quantity</th>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/ordering.minimum_quantity\'">Minimum Quantity</th>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/ordering.quantity\'">Quantity</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: buItems">\r\n                <tr data-bind="visible: $root.isStoreIncluded($data)">\r\n                    <td>\r\n                         <label style="padding-top:15px;" data-bind="text: store"></label>\r\n                    </td>\r\n                    <td >\r\n                        <input style="height: 43px;"  class="form-control input-lg" type="text"\r\n                            data-bind="value: $data.recommendedQuantity.decimal, valueUpdate: \'input\', css: { hasError: $data.recommendedQuantity.isModified() && !$data.recommendedQuantity.isValid() }, local: \'inventory/inventory-manage-tabs/ordering.input_quantity\', localAttr: \'placeholder\'" />\r\n                        <span class="fieldError" data-bind="validationMessage: $data.recommendedQuantity"></span>\r\n                    </td>\r\n                    <td>\r\n                        <input style="height: 43px;"  class="form-control input-lg" type="text"\r\n                            data-bind="value: $data.minimumQuantity.decimal, valueUpdate: \'input\', css: { hasError: $data.minimumQuantity.isModified() && !$data.minimumQuantity.isValid() }, local: \'inventory/inventory-manage-tabs/ordering.input_quantity\', localAttr: \'placeholder\'" />\r\n                        <span class="fieldError" data-bind="validationMessage: $data.minimumQuantity"></span>\r\n                    </td>\r\n                  <td>\r\n                      <input style="height: 43px;"  class="form-control input-lg" type="text"\r\n                          data-bind="value: $data.onHandQuantity.decimal, attr: { readonly: $root.poReceivingEnabled() ? \'readonly\' : null }, valueUpdate: \'input\', css: { hasError: $data.onHandQuantity.isModified() && !$data.onHandQuantity.isValid() }, local: \'inventory/inventory-manage-tabs/ordering.input_quantity\', localAttr: \'placeholder\'" /> \r\n                      <span class="fieldError" data-bind="validationMessage: $data.onHandQuantity"></span>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n    </div>\r\n</div>';});


define('text!views/inventory/inventory-manage-tabs/pricing.html',[],function () { return '<div data-bind="with: model" class="no-width tab-element-padding">\r\n    <div class="tab-elemtn">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/pricing.price_type\'">Price Type</label>\r\n        <select style="width:165px;" data-bind="options: pricingTypes, optionsText: \'name\', optionsValue: \'value\', value: isFixedPrice"></select>\r\n    </div>\r\n    <div class="tab-elemtn">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/pricing.unit\'">Unit</label>\r\n        <select style="width:165px"\r\n            data-bind="options: unitTypes, optionsText: \'name\', optionsValue: \'id\', optionsCaption: \'\', value: unitId, enable: $root.unitOfMeasureEditable">\r\n        </select>\r\n    </div>\r\n    <div  class="tab-elemtn" data-bind="visible: isFixedPrice">\r\n        <label data-bind="local: \'inventory/inventory-manage-tabs/pricing.sales_price\'">Sales Price</label>\r\n        <input style="width:165px;"  class="form-control input-lg" type="text" placeholder="Sales Price" data-bind="value: unitPrice, local:\'inventory/inventory-manage-tabs/pricing.sales_price\' , localAttr: \'placeholder\'">\r\n    </div>    \r\n    <div class="tab-elemtn checkBlock">\r\n        <input type="checkbox" id="isDiscountable" data-bind="checked: isDiscountable">\r\n        <label for="isDiscountable" data-bind="local: \'inventory/inventory-manage-tabs/pricing.is_discountable\'">All Discountable</label>\r\n    </div>\r\n\r\n    <div style="padding-top:80px;" >\r\n         <table class="datatable time-clock edit-product" id="pricingTable">\r\n            <thead>\r\n                <tr>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/pricing.store\'">Store</th>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/pricing.salesPrice\', visible: isFixedPrice">Sales Price</th>                   \r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/pricing.discountable\'">Discountable</th>\r\n                    <th>&nbsp;</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: buItems">\r\n                <tr data-bind="visible: $data.priceVisible() && $root.isStoreIncluded($data)">\r\n                    <td>\r\n                        <label style="padding-top: 15px;" data-bind="text: store"></label>\r\n                    </td>\r\n                    <td data-bind="visible: $parent.isFixedPrice">\r\n                        <input placeholder="Sales Price" style="height: 43px;" class="form-control input-lg" type="text" data-bind="value: unitPrice, valueUpdate: \'keyup\'" />\r\n                    </td>                    \r\n                    <td>\r\n                        <div style="margin-top: 9px;">\r\n                            <input type="checkbox" data-bind="checked: isDiscountable, attr: { id: \'chkIsDiscountable\' + businessUnitId }">\r\n                            <label data-bind="attr: { \'for\':\'chkIsDiscountable\' +  businessUnitId }"></label>\r\n                        </div>\r\n                    </td>\r\n                    <td class="valign-middle">\r\n                        <input class="delete-row-button" type="button" data-bind="click: $parent.removeBuItem">\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <div class="store-select-wrapper">\r\n          <div>\r\n            <select id="store_select" data-bind="options: $root.getFilteredStoreList(), optionsText: \'storeName\', optionsValue: \'id\', value: selectedStore"></select>\r\n          </div>\r\n          <div>\r\n            <input class="modifier-add-button" type="button" data-bind="click: addCustomePrice">\r\n          </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n';});


define('text!views/inventory/inventory-manage-tabs/quickbooks.html',[],function () { return '<div class="no-width" data-bind="with: model">\n    <div class="pane-body clearfix">\n        <!-- ko if: appsData[\'qb\'] -->\r\n        <div class="qb-accounts-container">\r\n            <qb-accounts params="value: appsData[\'qb\']"></qb-accounts>\r\n            <br />\r\n        </div>\r\n        <!-- /ko -->\n    </div>\n    \n</div>\n';});


define('text!views/inventory/inventory-manage-tabs/serials.html',[],function () { return '<div class="no-width">  \r\n    <div style="padding-top: 80px">\r\n        <span class="validationMessage" data-bind="text: $root.validationMessage"></span>\r\n        <table class="datatable serial-numbers">\r\n            <thead>\r\n                <tr>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/pricing.store\'"></th>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/ordering.quantity\'"></th>\r\n                </tr>\r\n            </thead>\r\n        <!-- ko foreach: storeSerials -->\r\n            <tbody data-bind="visible: visible">\r\n                <tr class="store-name" data-bind="click: $root.turn">\r\n                    <td>\r\n                        <span data-bind="visible: !expanded()">&#x25BA</span>\r\n                        <span data-bind="visible: expanded()">&#x25BC</span>\r\n                        <span data-bind="text: store"></span>\r\n                    </td>\r\n                    <td data-bind="text: serialNumbers().length"></td>\r\n                </tr>\r\n            <!-- ko foreach: serialNumbers -->\r\n                <tr data-bind="visible: $parent.expanded">\r\n                    <td colspan="2">\r\n                        <input type="text" class="form-control input-lg" maxlength="50"\r\n                               data-bind="value: serialNo, attr: { readonly: $root.poReceivingEnabled() ? \'readonly\' : null }, local: \'inventory/inventory-manage-tabs/serials.serialNo\', localAttr: \'placeholder\'"/>\r\n                        <!-- ko ifnot: $root.poReceivingEnabled() -->\r\n                        <input type="button" class="delete-row-button" data-bind="click: $root.remove">\r\n                        <!-- /ko -->\r\n                    </td>\r\n                </tr>\r\n            <!-- /ko -->\r\n                <tr data-bind="visible: !$root.poReceivingEnabled() && $data.expanded()">\r\n                    <td colspan="2">\r\n                        <input type="text" class="form-control input-lg" maxlength="50"\r\n                               data-bind="value: newSerialNo, event: { keypress: $root.onKeyPress }, local: \'inventory/inventory-manage-tabs/serials.serialNo\', localAttr: \'placeholder\'"/>\r\n                        <input class="modifier-add-button" type="button" data-bind="click: $root.add" />\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        <!-- /ko -->\r\n        </table>\r\n    </div>\r\n</div>\r\n';});


define('text!views/inventory/inventory-manage-tabs/taxes.html',[],function () { return '<div data-bind="with: model" class="no-width">  \r\n\r\n    <div>\r\n        <div class="tab-elemtn checkBlock">\r\n            <input type="checkbox" id="isTaxable" data-bind="checked: isTaxable">\r\n            <label for="isTaxable" data-bind="local: \'inventory/inventory-manage-tabs/pricing.is_taxable\'">All Taxable</label>\r\n        </div>\r\n         <table class="datatable time-clock" id="taxTable">\r\n            <thead>\r\n                <tr>\r\n                    <th style="width:20%;" data-bind="local: \'inventory/inventory-manage-tabs/pricing.store\'">Store</th>\r\n                    <th style="width:20%;" data-bind="local: \'inventory/inventory-manage-tabs/pricing.name\'">Name</th>         \r\n                    <th style="width:10%;" data-bind="local: \'inventory/inventory-manage-tabs/pricing.rate\'">Rate</th>             \r\n                    <th style="width:10%;" data-bind="local: \'inventory/inventory-manage-tabs/pricing.taxable\'">Taxable</th>         \r\n                    <th style="width:10%;">&nbsp;</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: buItems">\r\n                <tr data-bind="visible: isTaxVisible">\r\n                    <td>\r\n                        <label style="padding-top: 15px;" data-bind="text: store"></label>\r\n                    </td>\r\n                    <td >\r\n                        <div data-bind="foreach: taxList">                           \r\n                            <!--<select style="margin-top:5px;" data-bind="options: $root.getTaxList(), optionsText: \'name\', optionsValue: \'id\', value: id"></select>-->                           \r\n                            <multi-selector params="options: $root.setupTaxesSelect($data)"></multi-selector>\r\n                        </div>\r\n                    </td>\r\n                    <td>\r\n                        <div data-bind="foreach: taxList">                           \r\n                                <input type="text" readonly="true" style="margin-top:5px;" class="form-control input-lg" data-bind="value: taxRate" />                     \r\n                        </div>\r\n                    </td>\r\n                    <td class="valign-middle">\r\n                        <div>\r\n                            <input type="checkbox" data-bind="checked: isTaxable, attr: { id: \'chkIsTaxable\'+ businessUnitId }">\r\n                            <label data-bind="attr: { \'for\': \'chkIsTaxable\' + businessUnitId }"></label>\r\n                        </div>\r\n                    </td>                   \r\n                    <td class="valign-middle">\r\n                      <div data-bind="foreach: taxList">\r\n                        <input class="delete-row-button" type="button" data-bind="click: $parent.removeTax.bind($data)">                  \r\n                      </div>                       \r\n                    </td>\r\n                </tr>\r\n                <tr data-bind="visible: isSingleLineTax">\r\n                    <td>\r\n                        &nbsp;\r\n                    </td>\r\n                    <td colspan="4">\r\n                        <div style="float:left;padding-left:10px;">\r\n                            <input class="modifier-add-button" type="button" data-bind="click: addTax">\r\n                        </div>\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <div data-bind="visible: storeAddList().length" style="padding:15px;overflow:hidden;">\r\n          <div style="float:left;">\r\n            <select id="store_select" data-bind="options: $data.storeAddList, optionsText: \'storeName\', optionsValue: \'id\', value: selectedStore"></select>\r\n          </div>\r\n          <div style="float:left;padding-left:10px;">\r\n            <input class="modifier-add-button" type="button" data-bind="click: addCustomePrice">\r\n          </div>\r\n        </div>\r\n    </div>\r\n\r\n</div>\r\n';});


define('text!views/inventory/inventory-manage-tabs/variants.html',[],function () { return '<div class="pane item-modifiers" data-bind="with: model" style="padding-left:10px;width:100%;">\r\n    \r\n        <div id="modifiersPane" >\r\n\r\n            <div class="modifier-type-section">\r\n                <div style="float:left;">\r\n                    <select id="store_select" data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: selectedStore"></select>\r\n                </div>\r\n                <div style="float:left;padding-top:10px; padding-left:15px;" data-bind="visible: $root.model().isEnterprise()">\r\n                    <input type="checkbox" id="isDiscountableVar" data-bind="checked: isDiscountable">\r\n                    <label for="isDiscountableVar" data-bind="local: \'inventory/inventory-manage-tabs/pricing.is_discountable\'">All Discountable</label>\r\n                </div>\r\n            </div>\r\n\r\n            \r\n\r\n            \r\n            <div data-bind="visible: isEnterprise">\r\n            <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n                \r\n\r\n\r\n\r\n            </div>\r\n            <div class="fieldError" data-bind="text: $root.validationMessage(), visible: $root.validationMessage()"></div>\r\n\r\n            <div class="modifiers-block"  id="groupModifiers">\r\n                <table class="datatable time-clock" data-bind="click: $root.model().closePanel">\r\n        <thead>\r\n            <tr>\r\n                <th style="width:20px;" ><div data-bind="css: $root.model().getPanelStyle "></div></th>\r\n                <th style="width:330px;" data-bind="local: \'inventory/inventory-manage-tabs/variants.varinat_name\'"></th>\r\n                <th style="width:100%;" data-bind="local: \'inventory/inventory-manage-tabs/variants.variants\'"></th>\r\n\r\n\r\n            </tr>\r\n        </thead>\r\n     </table>\r\n                <div data-bind="visible: $root.model().colapsed ">\r\n                    <!-- ko if: groupModifiers().length > 0 -->\r\n                    <div class="group-modifiers"  >\r\n                        <div style="margin:0px;" data-bind="foreach: groupModifiers, sortableList: groupModifiers, sortableOptions: sortableOptions">\r\n                            <div class="modifier-group" style="border-bottom:none; padding: 2px 0 10px 0;width:100%;">\r\n                                <table class="modifier-table" style="width: 100%;" data-bind="validationOptions: { insertMessages: false }">\r\n\r\n                                    <tbody>\r\n                                        <tr>\r\n                                            <td style="padding-bottom:0px;" data-bind="visible: $root.model().isEnterprise()" class="drag-modifier"></td>\r\n\r\n                                            <td style="width:210px;padding-bottom:0px;" data-bind="foreach: names">\r\n                                                <input class="form-control input-lg textbox" type="text" maxlength="100"\r\n                                                       data-bind="value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'inventory/inventory-manage-tabs/modifiers/groupModifiers.enter_name\', localAttr: \'placeholder\',\r\n                                     attr: { \'data-lang\': $data.languageId }, enable: $root.model().isEnterprise">\r\n\r\n\r\n\r\n                                            </td>\r\n                                            <td style="width:100%;padding-bottom:0px;">\r\n                                                <div data-bind="css: $root.model().isEnterprise() ? \'\' : \'readOnlyul\'">\r\n                                                    <input type="text" data-bind="attr : { \'data-lang\':  $data.languageId, \'id-modIndex\' :   $index },\r\n                                                            enable: $root.model().isEnterprise, afterRender: { data: $index, callback: $root.model().setupTagInput }" />\r\n                                                </div>\r\n                                            </td>\r\n                                            <td data-bind="visible: $root.isNewProduct" style="width:40px;" class="valign-middle" >\r\n                                                <input class="delete-row-button" type="button" data-bind="click: $root.model().deleteGroupModifier, visible: $root.model().isEnterprise()\r\n                                                       && $data.itemModifierValues().length == 0">\r\n                                            </td>\r\n                                        </tr>\r\n                                    </tbody>\r\n                                </table>\r\n                                <p class="validationMessage" data-bind="validationMessage: name"></p>\r\n\r\n\r\n\r\n\r\n\r\n\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n                    <!-- /ko -->\r\n                    <input class="modifier-add-button" type="button" data-bind="visible: $root.model().isAddModVisible, click: $root.model().addGroupModifier">\r\n                </div>\r\n            </div>\r\n\r\n           <div>\n               <div style="float:right;">\n                   <input type="checkbox" id="hideDisabled" data-bind="checked: $root.model().hideDisabled">\r\n                   <label for="hideDisabled" data-bind="local: \'inventory/inventory-manage-tabs/variants.hide_dis\'"></label>\n               </div>\n\n            <table class="datatable" id="variantTable">\r\n            <thead>\r\n                <tr class="not-sortable">\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/variants.variant\'">Variant</th>\r\n                    <th style="width:100px;" data-bind="local: \'inventory/inventory-manage-tabs/variants.price\'">Price</th>\r\n                    <th style="width:100px;" data-bind="local: \'inventory/inventory-manage-tabs/variants.quantity\'">Quantity</th>\r\n                    <th style="width:100px;" data-bind="local: \'inventory/inventory-manage-tabs/variants.cost\'">Cost</th>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/variants.sku\'">SKU</th>\r\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/variants.upc\'">UPC</th>                    \r\n                    <th style="width:90px; padding-right:15px;" data-bind="local: \'inventory/inventory-manage-tabs/variants.isActive\'">isActive</th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: variants">\r\n                <tr data-bind="visible: !$root.model().hideDisabled() || isActive()">\r\n                    <td class="valign-middle force-wrap" data-bind="text: name"></td> \r\n                    <td class="valign-middle">                         \r\n                        <input placeholder="Price" class="form-control with-copy2all" type="text" data-bind="value: unitPrice, event: { focusin: $root.model().onFocus }">\r\n                        <button class="btn btn-default btn-sm btn-copy2all" data-bind="click: $root.model().copyToAll.bind($data, 0), local:\'inventory/inventory-manage-tabs/variants.copy2all\'"></button>\r\n                    </td> \r\n                    <td class="valign-middle">                      \r\n                        <input placeholder="Quantity" class="form-control with-copy2all" type="text" data-bind="value: onHandQuantity, enable: $root.model().isQuantityEditable, event: { focusin: $root.model().onFocus }">\r\n                        <button class="btn btn-default btn-sm btn-copy2all" data-bind="click:$root.model().copyToAll.bind($data, 1), local:\'inventory/inventory-manage-tabs/variants.copy2all\'"></button>\r\n                    </td> \r\n                     <td class="valign-middle">                         \r\n                        <input placeholder="Cost" class="form-control with-copy2all" type="text" data-bind="value: cost, event: { focusin: $root.model().onFocus }">\r\n                        <button class="btn btn-default btn-sm btn-copy2all" data-bind="click:$root.model().copyToAll.bind($data, 2), local:\'inventory/inventory-manage-tabs/variants.copy2all\'"></button>\r\n                    </td> \r\n                     <td class="valign-middle">                      \r\n                        <input placeholder="SKU" class="form-control" type="text" data-bind="value: sku,enable: $root.model().isEnterprise, event: { focusin: $root.model().onFocus }">\r\n                    </td> \r\n                     <td class="valign-middle">                 \r\n                        <input placeholder="UPC" class="form-control" type="text" data-bind="value: upc,enable: $root.model().isEnterprise, event: { focusin: $root.model().onFocus }">\r\n                    </td>     \r\n                    <td class="valign-middle text-center">\r\n                        <input type="checkbox" data-bind="checked: isActive, attr: { id: \'cbk\' + $index() }">\r\n                        <label data-bind="attr: { \'for\': \'cbk\' + $index() }"></label>\r\n                    </td>                               \r\n                </tr>\r\n            </tbody>\r\n        </table>\n                     \n    </div>\r\n            \r\n  </div>\r\n  \r\n</div>';});


define('text!views/inventory/inventory-manage-tabs/vendorManage.html',[],function () { return '<div class="pane pane-right">\n\n    <!--ko compose: { model: \'viewmodels/header\' }-->\n    <!--/ko-->\n    <div class="pane-body-wrapper">\n        <div class="pane-body newVendor">\n            <div class="form">\n                <div class="form-group">\n                    <label data-bind="local: \'inventory/inventory-manage-tabs/vendorManage.vendor\'">Vendor</label>\n                    <input class="form-control input-lg" type="text" placeholder="Input Name" data-bind="value: vendorItem().vendor().name, local:\'inventory/inventory-manage-tabs/vendorManage.input_name\' , localAttr: \'placeholder\'">\n                </div>\n\n               <div class="form-group">\n                    <label data-bind="local: \'inventory/inventory-manage-tabs/vendorManage.sku\'">SKU</label>\n                    <input class="form-control input-lg" type="text" placeholder="Input Name" data-bind="value: vendorItem().sku, local:\'inventory/inventory-manage-tabs/vendorManage.input_name\' , localAttr: \'placeholder\'">\n                </div>\n\n                <div class="form-group">\n                    <label data-bind="local: \'inventory/inventory-manage-tabs/vendorManage.cost\'">Cost</label>\n                    <input class="form-control input-lg" type="text" placeholder="Input Name" data-bind="value: vendorItem().sku, local:\'inventory/inventory-manage-tabs/vendorManage.input_name\' , localAttr: \'placeholder\'">\n                </div>\n    \n                <div class="form-group">\n                    <label data-bind="local: \'inventory/inventory-manage-tabs/vendorManage.primary\'">Primary</label>\n                    <input class="checkbox" type="checkbox" id="isActive">\n                </div>\n                <div class="form-buttons">\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: save, local:\'inventory/inventory-manage-tabs/vendorManage.done\' ">\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: cancel, local:\'inventory/inventory-manage-tabs/vendorManage.cancel\' ">\n                </div>\n            </div>\n        </div>\n    </div>\n</div>\n\n';});


define('text!views/inventory/inventory-manage-tabs/vendors.html',[],function () { return '<div class="pane" data-bind="with: model">\n    <div class="pane-body">\n        <div>\n            <div class="pull-left">\n                <select id="ddlVendors" data-bind="options: vendors,\n                        optionsText: \'name\',\n                        optionsValue: \'id\',\n                        multipleSelect: vendors,\n                        selectedElements: vendorItemsArray,\n                    multipleSelectOptions: $root.setupMultiSelect()\n                    "></select>\n            </div>\n            <div class="pull-right">\n                <input class="btn btn-lg btn-primary" type="button" value="New Vendor" data-bind="click: showNewVendor, local:\'inventory/inventory-manage-tabs/vendors.new_vendor\' ">\n            </div>\n        </div>\n        <div class="vendor-separator">&nbsp;</div>\n        <table class="vendor-edit">\n            <thead>\n                <tr>\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/vendors.vendor\'">Vendor</th>\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/vendors.sku\'">SKU</th>\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/vendors.cost\'">Cost</th>\n                    <th data-bind="local: \'inventory/inventory-manage-tabs/vendors.primary\'">Primary</th>\n                    <th>&nbsp;</th>\n                </tr>\n            </thead>\n            <tbody data-bind="foreach: vendorItemsArray">\n                <tr>\n                    <td valign="top" class="vendor-item-cell">\n                        <input class="form-control input-lg" data-bind="value: vendor().name" type="text" readonly="readonly">\n                    </td>\n                    <td valign="top" class="vendor-item-cell">\n                        <input class="form-control input-lg" data-bind="value: sku" type="text" maxlength="256">\n                    </td>\n                    <td valign="top" class="vendor-item-cell">\n                        <input class="form-control input-lg" data-bind="value: cost" type="text">\n                    </td>\n                    <td valign="top" class="vendor-item-cell td-padding-top" data-bind="validationOptions: { insertMessages: false }">\n                        <input name="items" type="radio" data-bind="checked: $parent.primaryVendor, value: vendorId, attr: { id: \'vendor\' + $index() }">\n                        <label data-bind="attr: { \'for\': \'vendor\' + $index() }"></label>\n                    </td>\n                    <td valign="top" class="vendor-item-cell td-padding-top">\n                        <input class="delete-row-button" type="button" data-bind="click: $root.deleteSelected">\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n        <span class="validationMessage" data-bind="text: $root.validationMessage"></span>\n\n    </div>\n</div>\n';});


define('text!views/inventory/inventoryList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body inventory">\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" data-bind="local: \'inventory/inventoryList.search_item_by_title_or_code\', localAttr: \'placeholder\'" />\r\n            \r\n            <div class="btn-toolbar pull-right">\r\n                <div class="btn-group">\r\n                    <button class="btn btn-lg btn-red" type="button" data-bind="click: deleteSelected, enable: hasSelected, local: \'common.delete_selected\'"></button>\r\n                </div>\r\n\r\n                <div class="btn-group btn-group-lg">\r\n                    <a class="btn btn-primary" data-bind="local: \'inventory/inventoryList.new_item\', click: navToProduct">New Item</a>\r\n                    <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">\r\n                        <span class="caret"></span>\r\n                        <span class="sr-only" data-bind="local: \'inventory/inventoryList.toggle_dropdown\'">Toggle Dropdown</span>\r\n                    </button>\r\n                    <ul class="dropdown-menu" role="menu">\r\n                        <li><a href="#category" data-bind="local: \'inventory/inventoryList.new_category\'">New Category</a></li>\r\n                        <li><a href="#department" data-bind="local: \'inventory/inventoryList.new_department\'">New Department</a></li>\r\n                        <li><a href="#modifier" data-bind="local: \'inventory/inventoryList.new_modifier\'">New Modifier</a></li>\r\n                        <li><a href="#importInventory" data-bind="local: \'inventory/inventoryList.import_inventory\'">Import Inventory</a></li>\r\n                    </ul>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportProducts, local: \'shell.exportReport\'">Export report</button>\r\n                <i class="fa fa-file-excel-o" aria-hidden="true" data-bind="click: exportProducts"></i>\r\n            </div>\r\n\r\n\r\n            <div class="row list-filters" data-bind="with: productFilter">\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <label data-bind="local: \'inventory/inventoryList.department_filter\'">Department:</label>\r\n                                <select data-bind="value: departmentId, event: { change: $root.depChanged.bind($root) }">\r\n                                    <option value="" data-bind="local: \'inventory/inventoryList.all\'">All</option>\r\n                                    <!-- ko foreach: departments -->\r\n                                    <option data-bind="attr: { value: id }, text: name"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <label data-bind="local: \'inventory/inventoryList.category_filter\'">Category:</label>\r\n                                <select data-bind="value: categoryId, event: { change: $root.applyFilters.bind($root) }">\r\n                                    <option value="" data-bind="local: \'inventory/inventoryList.all\'">All</option>\r\n                                    <!-- ko foreach: categories -->\r\n                                    <option data-bind="attr: { value: id }, text: name"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <label data-bind="local: \'inventory/inventoryList.inventoryTypeFilter\'"></label>\r\n                                <select id="ddlInventoryTypeFilter"\r\n                                        data-bind="options: inventoryTypes, optionsText: \'name\', optionsValue: \'id\', multipleSelect: inventoryTypes, multipleSelectOptions: inventoryTypeFilterOptions, selectedElements: inventorySelected"></select>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <br class="clear">\r\n\r\n            <table class="datatable selectablelist" id="inventoryTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th>\r\n                            <div class="checkbox">\r\n                                <input type="checkbox" id="itemsSelectAll" data-bind="checked: selectAll">\r\n                                <label for="itemsSelectAll"></label>\r\n                            </div>\r\n                        </th>\r\n                        <th data-bind="local: \'inventory/inventoryList.id\'">ID</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.item\'">Item</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.category\'">Category</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.department\'">Department&nbsp;</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.cost\'">Cost</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.price\'">Price</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.margin\'">Margin</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.quantity\'">Quantity</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.value\'">Value</th>\r\n                        <th data-bind="local: \'inventory/inventoryList.status\'">Status</th>\r\n                    </tr>\r\n                </thead>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/inventory/inventoryManage.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body inventory-manage-body">\r\n\r\n            <div id="loading" data-bind="visible: loading()"></div>\r\n\r\n            <div data-bind="compose: {\r\n                model: \'viewmodels/popups/helpPopup\',\r\n                view: \'views/popups/variantsHelpPopup.html\'\r\n            }"></div>\r\n\r\n            <div class="form inventory-item-form" id="inventoryManage">\r\n                <div class="inventory-tabs" data-bind="css: {\'ordering-hidden\': inventoryType() !== 0, \'serials-hidden\': inventoryType() !== 1 }"></div>\r\n                <div class="errorSummary" id="inventoryManageErrorSummary" data-bind="text: errorSummary(), visible: errorSummary().length > 0"></div>\r\n                <div class="tab-content" id="generalTab" data-bind="compose: {\r\n                    model: \'viewmodels/inventory/inventory-manage-tabs/general\',\r\n                    view: \'views/inventory/inventory-manage-tabs/general.html\'}">\r\n\r\n                </div>\r\n\r\n                <div class="tab-content" id="modifiersTab" data-bind="compose: {\r\n                    model: \'viewmodels/inventory/inventory-manage-tabs/modifiers/modifiers\',\r\n                    view: \'views/inventory/inventory-manage-tabs/modifiers/modifiers.html\'}">\r\n\r\n                </div>\r\n\r\n                <div class="tab-content" id="vendorsTab" data-bind="compose: {\r\n                    model: \'viewmodels/inventory/inventory-manage-tabs/vendors\',\r\n                    view: \'views/inventory/inventory-manage-tabs/vendors.html\'}">\r\n\r\n                </div>\r\n\r\n                <!-- ko if: showQuickbooks -->\r\n                <div class="tab-content" id="quickbooksTab" data-bind="compose: {\r\n                    model: \'viewmodels/inventory/inventory-manage-tabs/quickbooks\',\r\n                    view: \'views/inventory/inventory-manage-tabs/quickbooks.html\'}">\r\n\r\n                </div>\r\n                <!-- /ko -->\r\n                \r\n\r\n            </div>\r\n\r\n        <div class="tab-elemtn tab-element-padding store-filter" data-bind="visible: storesFilterVisible">\r\n            <label data-bind="local: \'employees/manage-tabs/generalTab.stores\'">Stores</label>\r\n            <!--ko compose: { view: \'controls/storesFilter.html\', mode: \'templated\' }-->\r\n            <!--/ko-->\r\n        </div>\r\n\r\n        <div style="padding-bottom:30px;" class="tab-content" id="pricingTab" data-bind="compose: {\r\n            model: \'viewmodels/inventory/inventory-manage-tabs/pricing\',\r\n            view: \'views/inventory/inventory-manage-tabs/pricing.html\'}">\r\n\r\n        </div>\r\n\r\n        <div style="padding-bottom:30px;" class="tab-content" id="orderingTab" data-bind="compose: {\r\n            model: \'viewmodels/inventory/inventory-manage-tabs/ordering\',\r\n            view: \'views/inventory/inventory-manage-tabs/ordering.html\'}">\r\n\r\n        </div>\r\n\r\n        <div style="padding-bottom:30px" class="tab-content" id="serialsTab" data-bind="compose: {\r\n                model: \'viewmodels/inventory/inventory-manage-tabs/serials\',\r\n                view: \'views/inventory/inventory-manage-tabs/serials.html\'}">\r\n        </div>\r\n        \r\n        <div style="padding-bottom:30px;" class="tab-content" id="taxesTab" data-bind="compose: {\r\n            model: \'viewmodels/inventory/inventory-manage-tabs/taxes\',\r\n            view: \'views/inventory/inventory-manage-tabs/taxes.html\'}">\r\n\r\n        </div>\r\n\r\n    <!-- ko if: showVariant -->\r\n        <div style="padding-bottom:30px;" class="tab-content" id="variantTab" data-bind="compose: {\r\n                 model: \'viewmodels/inventory/inventory-manage-tabs/variants\',\r\n                    view: \'views/inventory/inventory-manage-tabs/variants.html\'}">\r\n\r\n        </div>\r\n    <!-- /ko -->\r\n\r\n        <div id="inventoryManage2">\r\n            <div class="form-buttons">\r\n                <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: save, local:\'inventory/inventoryManage.done\' ">\r\n                <a class="btn btn-lg btn-default" href="#items" data-bind="local: \'inventory/inventoryManage.cancel\'">Cancel</a>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/inventory/menuBuilder.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper menu-builder">\r\n        <div class="loader-container" data-bind="visible: isLoading"></div>\r\n        <div data-bind="visible: !isLoading()">\r\n        <div class="pane pane-left">\r\n            <input type="search" class="form-control input-lg" plac_eholder="Find in CATEGORY" data-bind="textInput: productsFilter, attr: {placeholder: currentCategoryName}" />\r\n\r\n            <ul class="list" data-bind="foreach: filteredProducts(), visible: !isDraggingProduct()">\r\n                <li class="item" draggable="true"\r\n                    data-bind="css: {used: $root.isProductUsed($data)}, event: {dragstart: $root.dragStart, dragend: $root.dragEnd}">\r\n                    <span data-bind="currency: price" class="item-price"></span>\r\n                    <span data-bind="text: name" class="item-title"></span>\r\n                </li>\r\n            </ul>\r\n\r\n            <div class="remove-basket" data-bind="local: \'apps/menuBuilder.drop_to_remove\', visible: isDraggingProduct, event: {dragover: $root.dragOver, dragleave: $root.dragLeave, drop: $root.removeProduct} "></div>\r\n        </div>\r\n\r\n        <div class="pane pane-right">\r\n            <section class="categories">\r\n                <div id="menuBuilderMessage"></div>\r\n                <div class="pos-categories">\r\n                    <ul class="wrapper" data-bind="foreach: allCategories(), style: {top: $root.categoriesPager.displacement() }">\r\n                        <li class="item" draggable="true"\r\n                            data-bind="css: {active: id === $root.currentCategoryId()}, style: { background: $data.color }, click: activateCategory, event: {dragstart: $root.dragStart, dragover: $root.dragOver, dragleave: $root.dragLeave, dragend: $root.dragEnd, drop: $root.dropCategory}">\r\n                            <div class="item-short" data-bind="text: $data.shortName || \' \'"></div>\r\n                            <div class="item-title" data-bind="text: name"></div>\r\n                        </li>\r\n                    </ul>\r\n                    <div class="pos-pager-prev" data-bind="visible: categoriesPager.hasPrev(), event: {click: categoriesPager.clickPrev, dragover: delayedClick, dragleave: cancelClick}"></div>\r\n                    <div class="pos-pager-next" data-bind="visible: categoriesPager.hasNext(), event: {click: categoriesPager.clickNext, dragover: delayedClick, dragleave: cancelClick}"></div>\r\n                </div>\r\n                <ul class="pos-pager" data-bind="template: { name: \'paginationTemplate\', foreach: categoriesPager.pages }"></ul>\r\n                <script id="paginationTemplate" type="text/html">\r\n                    <li class="item" data-bind="css: $data.isActive() ? \'active\': \'\', click: $data.activate, event: {dragover: $root.delayedClick, dragleave: $root.cancelClick}"></li>\r\n                </script>\r\n\r\n            </section>\r\n \r\n            <section class="products">\r\n                <div class="pos-products">\r\n                    <ul class="wrapper" data-bind="style: {top: $root.productsPager.displacement() }">\r\n                        <!--ko foreach: sortedProducts -->\r\n                        <li class="item" draggable="true"\r\n                            data-bind="style: { \'background-color\': $data.color, \'background-image\': $data.pictureId ? \'url(picture/get/\' + $data.pictureId + \')\' : null }, event: { dragstart: $root.dragStart, dragover: $root.dragOver, dragleave: $root.dragLeave, dragend: $root.dragEnd, drop: $root.dropProduct }">\r\n                            <div class="item-price" data-bind="currency: price"></div>\r\n                            <div class="item-short-name" data-bind="visible: !pictureId && shortName, text: shortName"></div>\r\n                            <div class="item-title" data-bind="text: name"></div>\r\n                        </li>\r\n                        <!--/ko-->\r\n                        <li class="item new" data-bind="event: {dragover: $root.dragOver, dragleave: $root.dragLeave, drop: $root.dropProduct}">\r\n                            <i class="fa fa-arrow-down"></i>\r\n                            <div data-bind="local: \'apps/menuBuilder.drop_item_here\' "></div>\r\n                        </li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                        <li class="item empty"></li>\r\n                    </ul>\r\n                    <div class="pos-pager-prev" data-bind="visible: productsPager.hasPrev(), event: {click: productsPager.clickPrev, dragover: delayedClick, dragleave: cancelClick}"></div>\r\n                    <div class="pos-pager-next" data-bind="visible: productsPager.hasNext(), event: {click: productsPager.clickNext, dragover: delayedClick, dragleave: cancelClick}"></div>\r\n\r\n                </div>\r\n                <ul class="pos-pager"\r\n                    data-bind="template: { name: \'paginationTemplate\', foreach: productsPager.pages }">\r\n                </ul>\r\n\r\n                <label class="sort-order form-inline">\r\n                    <span data-bind="local: \'apps/menuBuilder.other\'"></span>\r\n                    <strong data-bind="text: otherItems"></strong>\r\n                    <span data-bind="local: \'apps/menuBuilder.labelArrange\'"></span>\r\n                    <select class="form-control" data-bind="options: productSortOrderOptions, optionsText: \'name\', optionsValue: \'value\', value: productSortOrder"></select>\r\n                </label>\r\n\r\n                <div class="form-buttons" align="center">\r\n                    <button class="btn btn-default btn-lg" type="reset" data-bind="local: \'apps/menuBuilder.btn_cancel\', click: close"></button>\r\n                    <button class="btn btn-primary btn-lg" type="submit" data-bind="local: \'apps/menuBuilder.btn_save\', click: save"></button>\r\n                </div>\r\n            </section>\r\n\r\n        </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/languageSelector.html',[],function () { return '<div class="language-selector" data-bind="foreach: $root.languages">\r\n    <a data-bind="text: name, css: { selected: id === $root.selectedLanguage() }, click: $root.selectLanguage"></a>\r\n</div>';});


define('text!views/login.html',[],function () { return '<form class="form-signin"  data-bind="event: { submit: signIn }">\r\n    <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png">\r\n    <h2 style="text-align: center" data-bind="text: title, local: \'login.back_office\' "></h2>\r\n    \r\n    <div class="form-group">\r\n        <input id="loginEmail" name="loginEmail" autocomplete="login-email" class="form-control input-lg" type="text" placeholder="Email" maxlength="200"\r\n               data-bind="value: loginData.email, local: \'account.email\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <input id="loginPassword" name="loginPassword" autocomplete="login-password" class="form-control input-lg" type="password" placeholder="Password" maxlength="100"\r\n               data-bind="value: loginData.password, local: \'account.password\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <p class="error-message" data-bind="text: errorMessage"></p>\r\n\r\n    <p data-bind="tap: labelLinkClick, visible: showUnblockMessage">\r\n        <label data-bind="html: unblockAccountMessage"></label>\r\n    </p>\r\n    \r\n    <div class="form-buttons">\r\n        <input class="btn btn-lg btn-primary" type="submit" data-bind="local: \'shell.Login\' ">\r\n    </div>\r\n\r\n    <div class="text-left" style="margin-top: 20px">\r\n        <p data-bind="tap: labelLinkClick">\r\n            <label data-bind="html: setupPasswordMessage"></label>\r\n        </p>\r\n\r\n        <p data-bind="tap: labelLinkClick">\r\n            <label data-bind="html: forgotPasswordMessage"></label>\r\n        </p>\r\n\r\n        <p data-bind="tap: labelLinkClick">\r\n            <label data-bind="html: notRegisteredMessage"></label>\r\n        </p>\r\n    </div>\r\n</form>\r\n\r\n<div id="terms-and-conditions-overlay" data-bind="visible: !checkedAgreement()">\r\n    <div id="terms-and-conditions">\r\n        <header>\r\n            <span data-bind="local: \'termsAndConditionsTitle\'"></span>\r\n            <a href="#" class="fa fa-times" aria-hidden="true" data-bind="click: closeAgreement"></a>\r\n        </header>\r\n        <div class="content" data-bind="compose: { view: \'terms/TermsAndConditions-\' + getCurrentLanguage() + \'.html\' }"></div>\r\n        <div class="functional-buttons">\r\n            <input id="agreementCheck" class="checkbox" type="checkbox" data-bind="checked: checkedValue" />\r\n            <label for="agreementCheck" data-bind="local: \'termsAndConditionsAgree\'"></label>\r\n            <button data-bind="click: submitAgreement, submitTermsOnEnter: submitAgreement, attr: { disabled: !checkedValue() ? \'disabled\' : null }, local: \'termsAndConditionsButton\'" disabled="disabled"></button>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n<span class="version"></span>';});


define('text!views/logout.html',[],function () { return '<div class="form-signin loading"></div>';});


define('text!views/modifiers/modifier-type/addOnModifier.html',[],function () { return '<div class="add-on-exception-modifiers-templates" data-bind="with: model">\r\n    <h2 class="modifiers-header" data-bind="visible: !$root.editMode(), local:\'modifiers/modifier-type/addOnModifier.add-ons\' ">Add-Ons</h2>\r\n\r\n    <table class="modifier-values-table">\r\n        <thead>\r\n            <tr>\r\n                <th data-bind="local: \'modifiers/modifier-type/addOnModifier.modifier_name\'"></th>\r\n                <th data-bind="local: \'modifiers/modifier-type/addOnModifier.price\'"></th>\r\n                <th></th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-bind="foreach: addOnModifiers">\r\n            <tr>\r\n                <td data-bind="foreach: names">\r\n                    <input class="form-control input-lg" type="text" maxlength="100"\r\n                           data-bind="valueUpdate: \'keyup\', value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'modifiers/modifier-type/addOnModifier.add_option\', localAttr: \'placeholder\', attr: { \'data-lang\': $data.languageId }">\r\n                </td>\r\n                <td>\r\n                    <input class="form-control input-lg" type="text" data-bind="value: itemModifierValues()[0].price.amount">\r\n                    <span class="validationMessage" data-bind="validationMessage: itemModifierValues()[0].price"></span>\r\n                </td>\r\n                <td>\r\n                    <div class="checkbox">\r\n                        <input type="checkbox" data-bind="checked: isActive, attr: { id: $root.getId(\'add-on\', $index()) }">\r\n                        <label data-bind="attr: { for: $root.getId(\'add-on\', $index()) }, local:\'modifiers/modifier-type/addOnModifier.is_active\' ">Is Active</label>\r\n                    </div>\r\n                </td>\r\n                <td class="valign-middle">\r\n                    <input class="delete-row-button" type="button" data-bind="click: $parent.deleteAddOnModifier, visible: !$root.editMode()">\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n            \r\n    <input class="modifier-add-button" type="button" data-bind="click: $root.addAddOnModifier, visible: !$root.editMode()">\r\n</div>';});


define('text!views/modifiers/modifier-type/exceptionModifier.html',[],function () { return '<div class="add-on-exception-modifiers-templates" data-bind="with: model">\r\n    <h2 class="modifiers-header" data-bind="visible: !$root.editMode(), local:\'modifiers/modifier-type/exceptionModifier.exceptions\' ">Exceptions</h2>\r\n\r\n    <table class="modifier-values-table">\r\n        <thead>\r\n            <tr>\r\n                <th data-bind="local: \'modifiers/modifier-type/exceptionModifier.modifier_name\'">Modifier Name:</th>\r\n                <th data-bind="local: \'modifiers/modifier-type/exceptionModifier.price\'">Price:</th>\r\n                <th></th>\r\n                <th></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody data-bind="foreach: exceptionModifiers">\r\n            <tr>\r\n                <td data-bind="foreach: names">\r\n                    <input class="form-control input-lg" type="text" maxlength="100"\r\n                           data-bind="value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'modifiers/modifier-type/exceptionModifier.add_option\', localAttr: \'placeholder\', attr: { \'data-lang\': $data.languageId }">\r\n                </td>\r\n                <td>\r\n                    <input class="form-control input-lg" type="text" data-bind="value: itemModifierValues()[0].price.amount">\r\n                     <span class="validationMessage" data-bind="validationMessage: itemModifierValues()[0].price"></span>\r\n                </td>\r\n                <td>\r\n                    <div class="checkbox">\r\n                        <input type="checkbox" data-bind="checked: isActive, attr: { id: $root.getId(\'exception\', $index()) }">\r\n                        <label data-bind="attr: { for: $root.getId(\'exception\', $index()) }, local:\'modifiers/modifier-type/exceptionModifier.is_active\' ">Is Active</label>\r\n                    </div>\r\n                </td>\r\n                <td class="valign-middle">\r\n                    <input class="delete-row-button" type="button" data-bind="click: $parent.deleteExceptionModifier, visible: !$root.editMode()">\r\n                </td>\r\n            </tr>\r\n        </tbody>\r\n    </table>\r\n            \r\n    <input class="modifier-add-button" type="button" data-bind="click: $root.addExceptionModifier, visible: !$root.editMode()">\r\n</div>';});


define('text!views/modifiers/modifier-type/groupModifier.html',[],function () { return '<div class="group-modifiers">\r\n    <h2 class="modifiers-header" data-bind="visible: !$root.editMode(), local:\'modifiers/modifier-type/groupModifier.groups\' ">Groups</h2>\r\n\r\n    <!-- ko foreach: model().groupModifiers -->\r\n    <div class="modifier-group">\r\n        <div class="form-group" data-bind="validationOptions: { insertMessages: false }">\r\n            <label data-bind="local: \'modifiers/modifier-type/groupModifier.group_name\'"></label>\r\n            <span data-bind="foreach: names" class="group-modifier-names">\r\n                <input class="form-control input-lg textbox" type="text" maxlength="100"\r\n                       data-bind="value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'modifiers/modifier-type/groupModifier.enter_name\', localAttr: \'placeholder\', attr: { \'data-lang\': $data.languageId }">\r\n            </span>\r\n            <input class="delete-row-button" type="button" data-bind="click: $root.model().deleteGroupModifier, visible: !$root.editMode()">\r\n            <p class="validationMessage" data-bind="validationMessage: name"></p>\r\n        </div>\r\n            \r\n        <table class="modifier-values-table">\r\n            <thead>\r\n                <tr>\r\n                    <th></th>\r\n                    <th data-bind="local: \'modifiers/modifier-type/groupModifier.option\'"></th>\r\n                    <th data-bind="local: \'modifiers/modifier-type/groupModifier.price\'"></th>\r\n                    <th></th>\r\n                    <th></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: itemModifierValues, sortableList: itemModifierValues">\r\n                <tr>\r\n                    <td class="drag-modifier"></td>\r\n                    <td data-bind="foreach: names">\r\n                        <input class="form-control input-lg" type="text" maxlength="100"\r\n                               data-bind="value: name, visible: $data.languageId === $root.langs.selectedLanguage(), local: \'modifiers/modifier-type/groupModifier.add_option\', localAttr: \'placeholder\', attr: { \'data-lang\': $data.languageId }">\r\n                    </td>\r\n                    <td>\r\n                        <input class="form-control input-lg" type="text" data-bind="value: price.amount">\r\n                        <span class="validationMessage" data-bind="validationMessage: price"></span>\r\n                    </td>\r\n                    <td data-bind="validationOptions: { insertMessages: false }">\r\n                        <div class="radio">\r\n                            <input type="radio" data-bind="checked: $parent.defaultOption, value: optionOrder().toString(), attr: { id: $root.getId(\'default\', $parentContext.$index(), optionOrder()) }">\r\n                            <label data-bind="attr: { \'for\': $root.getId(\'default\', $parentContext.$index(), optionOrder()) }"></label>\r\n                            <label data-bind="attr: { \'for\': $root.getId(\'default\', $parentContext.$index(), optionOrder()) }, local:\'modifiers/modifier-type/groupModifier.default\' ">Default</label>\r\n                        </div>\r\n                    </td>\r\n                    <td class="valign-middle">\r\n                        <input class="delete-row-button" type="button" data-bind="click: $parent.deleteModifierValue">\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n            \r\n        <input class="modifier-add-button" type="button" data-bind="click: $root.addModifierValue">\r\n\r\n        <div class="checkbox">\r\n            <input type="checkbox" data-bind="checked: isActive, attr: { id: $root.getId(\'isActive\', $index()) }">\r\n            <label data-bind="attr: { for: $root.getId(\'isActive\', $index()) }, local:\'modifiers/modifier-type/groupModifier.is_active\' ">Is Active</label>\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n            \r\n    <input class="modifier-add-button" type="button" data-bind="click: $root.addGroupModifier, visible: !$root.editMode()">\r\n</div>\r\n';});


define('text!views/modifiers/modifierManage.html',[],function () { return '<!-- TODO -->\r\n<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }--><!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/modifierHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body item-list">\r\n            <div class="loader-container" data-bind="visible: isLoading()"></div>\r\n            <div class="form wide-form new-modifier" data-bind="visible: !isLoading()">\r\n\r\n                <div class="errorSummary" data-bind="html: errorSummary(), visible: errorSummary().length > 0"></div>\r\n\r\n                <div class="form-group">\r\n                    <label data-bind="local: \'modifiers/modifierManage.modifier_type\'">Modifier Type</label>\r\n                    <select class="select" data-bind="options: model().modifierTypes, optionsText: \'name\', optionsValue: \'code\', optionsCaption: ko.local(\'modifiers/modifierManage.select_modifier_type\'), value: model().modifierType, disable: editMode"></select>\r\n                </div>\r\n\r\n                <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n                <div id="saveMessages"></div>\r\n\r\n                <div class="modifiers-block" id="groupModifiers" data-bind="visible: model().modifierType() == 0 || model().groupModifiers().length != 0">\r\n                    <!-- ko compose: { model: \'viewmodels/modifiers/modifier-type/groupModifier\' }--><!--/ko-->\r\n                </div>\r\n\r\n                <div class="modifiers-block" id="addOnModifiers" data-bind="visible: model().modifierType() == 1 || model().addOnModifiers().length != 0">\r\n                    <!-- ko compose: { model: \'viewmodels/modifiers/modifier-type/addOnModifier\' }--><!--/ko-->\r\n                </div>\r\n\r\n                <div class="modifiers-block" id="exceptionModifiers" data-bind="visible: model().modifierType() == 2 || model().exceptionModifiers().length != 0">\r\n                    <!-- ko compose: { model: \'viewmodels/modifiers/modifier-type/exceptionModifier\' }--><!--/ko-->\r\n                </div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: saveList, enable: model().allModifiers().length > 0, local:\'modifiers/modifierManage.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: cancel, local:\'modifiers/modifierManage.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/modifiers/modifiersList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/globalModifiersHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body modifiers item-list">\r\n            <div id="messages"></div>\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search For Modifier" data-bind="local: \'modifiers/modifiersList.search_for_modifier\', localAttr: \'placeholder\'">\r\n\r\n            <div class="btn-group btn-group-lg pull-right">\r\n                <a class="btn btn-primary" href="#modifier" data-bind="local: \'modifiers/modifiersList.new_modifier\'">New Modifier</a>\r\n                <button class="btn btn-primary dropdown-toggle" type="button" data-toggle="dropdown">\r\n                    <span class="caret"></span>\r\n                    <span class="sr-only" data-bind="local: \'modifiers/modifiersList.toggle_dropdown\'">Toggle Dropdown</span>\r\n                </button>\r\n                <ul class="dropdown-menu" role="menu">\r\n                    <li><a href="#department" data-bind="local: \'modifiers/modifiersList.new_department\'">New Department</a></li>\r\n                    <li><a href="#category" data-bind="local: \'modifiers/modifiersList.new_category\'">New Category</a></li>\r\n                    <li><a href="#product" data-bind="local: \'modifiers/modifiersList.new_item\'">New Item</a></li>\r\n                </ul>\r\n            </div>\r\n\r\n            <br class="clear">\r\n\r\n            <table class="datatable" id="modifiersTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'modifiers/modifiersList.modifier\'">Modifier</th>\r\n                        <th data-bind="local: \'modifiers/modifiersList.type\'">Type</th>\r\n                        <th data-bind="local: \'modifiers/modifiersList.status\'">Status</th>\r\n                        <th>\r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/navigationpanel.html',[],function () { return '<div class="navigation-panel">\n\n    <div class="pane pane-left">\n        <div class="pane-header">\n            <p class="logo" data-bind="click: close">\n                <span class="fa fa-chevron-left"></span>\n                <span class="enterprise-name" data-bind="text: title, attr: { title: title }"></span>\n            </p>\n        </div>\n\n        <div class="pane-body-wrapper">\n            <div class="pane-body">\n                <!-- ko if: isDemo -->\n                <div class="demo-mode-notification">\n                    <h3 data-bind="text: ko.T(\'demo.demoActive\', null, demoName())"></h3>\n                    <div data-bind="text: ko.T(\'demo.demoDescription\')"></div>\n                    <button data-bind="local: \'demo.essentialPlan\', click: cleanup.bind($data, \'essential\')"></button>\n                    <button data-bind="local: \'demo.freedomPlan\', click: cleanup.bind($data, \'freedom\')"></button>\n                </div>\n                <!-- /ko -->\n                <ul class="main-menu" data-bind="foreach: router.navigationModel">\n                    <!-- ko if: $data.parent === undefined  -->\n                    <li data-bind="visible: nav, css: { hasSubitems: $data.childRoutes !== undefined && !$data.noSubItems }, permission: $data.permission">\n                        <a data-bind="attr: { href: $data.link || hash, target: $data.link && \'_blank\' }, text: $root.itemLabel($data), css: iconClass, click: $root.selectMenu"></a>\n                        <!-- ko if: $data.childRoutes !== undefined  -->\n                        <ul data-bind="foreach: $data.childRoutes.routes">\n                            <li data-bind="visible: nav, permission: $data.permission">\n                                <a data-bind="attr: { href: hash }, text: $root.itemLabel($data), click: $root.selectMenu"></a>\n                            </li>\n                        </ul>\n                        <!-- /ko -->\n                    </li>\n                    <!-- /ko -->\n                </ul>\n            </div>\n        </div>\n    </div>\n\n</div>\n';});


define('text!views/orders/orderDetails.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/orderDetailsHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body item-list">\r\n           <div class="transaction-details-from">\r\n\r\n            <div data-bind="with: dataContext">\r\n                <div id="messages"></div>\r\n\r\n                <div class="row">\r\n                    <div class="col-xs-6 col-md-5">\r\n\r\n                        <div class="row nopadding">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.order_id\'">\r\n                                Order ID:&nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: upc"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row nopadding">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.order_name\'">\r\n                                Order Name: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <div class="tenderData" data-bind="text: name"></div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row nopadding">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.customer\'">\r\n                                Customer: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: customerName"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row nopadding">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.customer_phone\'">\r\n                                Customer Phone: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: customerPhone.phone"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row nopadding">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.employee\'">\r\n                                Employee: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: employee"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                         <div class="row nopadding">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.store\'">\r\n                                Store: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: store"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row nopadding">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.order_date\'">\r\n                                Order Date: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: date"></span>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                \r\n\r\n                    <div class="col-xs-6 col-md-5">\r\n                    <!-- ko if: $root.showOrderType() -->\r\n                        <div class="row">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.order_type\'">\r\n                                Order Type:&nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                               <span data-bind="text: typeText"></span>\r\n                            </div>\r\n                        </div>\r\n                    <!-- /ko -->\r\n                        <div class="row">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.status\'">\r\n                                Status: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: status"></span>\r\n                                <span data-bind="local: \'orders/orderDetails./\'">/</span>\r\n                                <span data-bind="text: localTranStatus, css: (\'tran-\' + (voided() ? \'Voided\' : transactionStatus())) "></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.tender_type\'">\r\n                                Tender Type: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: ko.T(\'payment/types.\' + $root.getOrderTenderType($data))"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.fulfillment\'">\r\n                                Fulfillment: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: fulfilmentText()"></span>\r\n                            </div>\r\n                        </div>\r\n                    \r\n                        <div class="row">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.refnum\'">\r\n                                RefNum: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: refNums"></span>\r\n                            </div>\r\n                        </div>\r\n                   \r\n                         <!-- ko if: $root.getOrderAuthCode($data).length > 0 -->\r\n                        <div class="row">\r\n                            <div class="col-xs-3 col-sm-3 nopadding" data-bind="local: \'orders/orderDetails.authCode\'">\r\n                           \r\n                            </div>\r\n                            <div class="col-xs-9 col-sm-9 nopadding">\r\n                                <span data-bind="text: $root.getOrderAuthCode($data)"></span>\r\n                            </div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n\r\n                   \r\n                    </div>\r\n                    <div class="col-xs-6 col-md-2 pull-right">\r\n\r\n                        <div class="row">\r\n                            <div class="col-xs-6 col-sm-6 nopadding" data-bind="local: \'orders/orderDetails.subtotal\'">\r\n                                Subtotal:&nbsp;\r\n                            </div>\r\n                            <div class="col-xs-6 col-sm-6 nopadding">\r\n                                <span data-bind="currency: subtotal"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <div class="col-xs-6 col-sm-6 nopadding" data-bind="local: \'orders/orderDetails.discount\'">\r\n                                Discount: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-6 col-sm-6 nopadding">\r\n                                <span data-bind="currency: discountAmount"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <div class="col-xs-6 col-sm-6 nopadding" data-bind="local: \'orders/orderDetails.tax\'">\r\n                                Tax: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-6 col-sm-6 nopadding">\r\n                                <span data-bind="currency: taxAmount"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <div class="col-xs-6 col-sm-6 nopadding" data-bind="local: \'orders/orderDetails.tips\'">\r\n                                Tips: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-6 col-sm-6 nopadding">\r\n                                <span data-bind="currency: tipsAmount"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row">\r\n                            <div class="col-xs-6 col-sm-6 nopadding" data-bind="local: \'orders/orderDetails.total\'">\r\n                                Total: &nbsp;\r\n                            </div>\r\n                            <div class="col-xs-6 col-sm-6 nopadding">\r\n                                <span data-bind="currency: totalAmount"></span>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- ko if: $root.isControlNumberEnabled -->\r\n                        <div class="row">\r\n                            <div class="col-xs-6 col-sm-6 nopadding" data-bind="local: \'orders/orderDetails.control_number\'">\r\n\r\n                            </div>\r\n                            <div class="col-xs-6 col-sm-6 nopadding">\r\n                                <span data-bind="text: $root.getOrderFiscalText($data)"></span>\r\n                            </div>\r\n                        </div>\r\n                        <!-- /ko -->\r\n\r\n                    </div>\r\n\r\n                   </div>\r\n\r\n\r\n                <br class="clear">\r\n\r\n                <!--ko compose: { model: \'viewmodels/orders/orderDetailsItems\', activationData: { data: $data } }-->\r\n                <!--/ko-->\r\n            </div>\r\n\r\n            <div class="form-buttons center">\r\n                <input class="btn btn-lg btn-primary" type="button" value="Back" data-keypress="Back" data-bind="click: cancel, local:\'orders/orderDetails.back\' ">\r\n            </div>\r\n\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/orders/orderDetailsItems.html',[],function () { return '<div>\n    <table class="datatable" id="transactionItemsTable">\n        <thead>\n            <tr>\n                <th style="width:30%;" data-bind="local: \'orders/orderDetailsItems.description\'">Description</th>\n                <th style="width:10%;" data-bind="local: \'orders/orderDetailsItems.quantity\'">Quantity</th>\n                <th style="width:20%;" data-bind="local: \'orders/orderDetailsItems.item_price\'">Item Price</th>\n                <th style="width:15%;" data-bind="local: \'orders/orderDetailsItems.discount\'">Discount</th>\n                <th style="width:10%;" data-bind="local: \'orders/orderDetailsItems.total_price\'">Total Price</th>\n            </tr>\n        </thead>\n        <tbody></tbody>\n    </table>\n</div>\n';});


define('text!views/orders/ordersList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/ordersListHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body item-list">\r\n            <div id="messages"></div>\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search Order" data-bind="local: \'orders/ordersList.search_order\', localAttr: \'placeholder\'">\r\n            <div style="float:left;">\r\n             <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n             <!--/ko-->\r\n            </div>\r\n            <div class="pull-right">\r\n                <date-filter params="value: dateRange"></date-filter>\r\n            </div>\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportTableData, local: \'shell.exportReport\'">Export report</button>\r\n                <i class="fa fa-file-excel-o" aria-hidden="true" data-bind="click: exportTableData"></i>\r\n            </div>\r\n\r\n            <br class="clear">\r\n        \r\n            <div class="row list-filters" data-bind="with: ordersFilter">\r\n                <table>\r\n                    <tbody><tr>\r\n                    <!-- ko if: $parent.showOrderType -->\r\n                        <td>\r\n                            <label data-bind="local: \'orders/ordersList.order_type\'"></label>\r\n                            <select data-bind="value: orderType, event: { change: $root.applyFilters.bind($root) }">\r\n                                <option value="0" data-bind="local: \'orders/ordersList.all\'">All</option>\r\n                            <!-- ko foreach: orderTypes -->\r\n                                <option data-bind="attr: { value: code }, text: name"></option>\r\n                            <!-- /ko -->\r\n                            </select>\r\n                        </td>\r\n                    <!-- /ko -->\r\n                        <td>\r\n                            <label data-bind="local: \'orders/ordersList.order_status\'">Order Status:</label>\r\n                            <select data-bind="value: paymentStatus, event: { change: $root.applyFilters.bind($root) }">\r\n                                <option value="0" data-bind="local: \'orders/ordersList.all\'">All</option>\r\n                                <!-- ko foreach: paymentStatuses -->\r\n                            \r\n                                <option data-bind="attr: { value: code }, text: name"></option>\r\n\r\n                                <!-- /ko -->\r\n                            </select>\r\n                        </td>\r\n                        <td>\r\n                            <label data-bind="local: \'orders/ordersList.fulfillment\'">Fulfillment:</label>\r\n                            <select data-bind="value: fulfillment, event: { change: $root.applyFilters.bind($root) }">\r\n                                <option value="0" data-bind="local: \'orders/ordersList.all\'">All</option>\r\n                                <!-- ko foreach: fulfillments -->\r\n                            \r\n                                <option data-bind="attr: { value: code }, text: name"></option>\r\n\r\n                                <!-- /ko -->\r\n                            </select>\r\n                        </td>\r\n                    </tr>\r\n                </tbody></table>\r\n            </div>\r\n\r\n            <table class="datatable" id="transactionsTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'orders/ordersList.order_id\'">Order ID</th>\r\n                        <th data-bind="local: \'orders/ordersList.order_name\'">Order Name</th>\r\n                        <th data-bind="local: \'orders/ordersList.type\'">Type</th>\r\n                        <th data-bind="local: \'orders/ordersList.fulfillment\'">Fulfillment</th>\r\n                        <th data-bind="local: \'orders/ordersList.status\'">Status</th>\r\n                        <th data-bind="local: \'orders/ordersList.total\'">Total</th>\r\n                        <th data-bind="local: \'orders/ordersList.date\'">Date</th>\r\n                        <th data-bind="local: \'orders/ordersList.store\'">Store</th>\r\n                        <th data-bind="local: \'orders/ordersList.employee\'">Employee</th>\r\n                        <th data-bind="local: \'orders/ordersList.customer\'">Customer</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/pinLogin.html',[],function () { return '<div class="form-signin numpad">\r\n    <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png">\r\n    <h2 style="text-align: center" data-bind="text: title, local: \'login.back_office\' "></h2>\r\n    \r\n    <div class="pin-display">\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n        <span></span>\r\n    </div>\r\n\r\n    <div class="numpad">\r\n        <button data-keypress="1" data-bind="click: inputChar">1</button>\r\n        <button data-keypress="2" data-bind="click: inputChar">2</button>\r\n        <button data-keypress="3" data-bind="click: inputChar">3</button>\r\n        <button data-keypress="4" data-bind="click: inputChar">4</button>\r\n        <button data-keypress="5" data-bind="click: inputChar">5</button>\r\n        <button data-keypress="6" data-bind="click: inputChar">6</button>\r\n        <button data-keypress="7" data-bind="click: inputChar">7</button>\r\n        <button data-keypress="8" data-bind="click: inputChar">8</button>\r\n        <button data-keypress="9" data-bind="click: inputChar">9</button>\r\n        <button>&nbsp;</button>\r\n        <button data-keypress="0" data-bind="click: inputChar">0</button>\r\n        <button data-keypress="Backspace" data-bind="click: back" class="delete-symbol-button">&nbsp;</button>\r\n    </div>\r\n\r\n    <p class="error-message" data-bind="text: errorMessage"></p>\r\n</div>\r\n\r\n\r\n<span class="version"></span>';});


define('text!views/poReceiving/adjustment.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body inventory" data-bind="css: { loading: isLoading() }">\r\n            <div data-bind="visible: !isLoading()">\r\n\r\n                <table class="inventory-transfer-options po-receiving-options">\r\n                    <tr>\r\n                        <td>\r\n                            <label data-bind="local: \'inventoryAdjustment.vendor\'"></label>\r\n                            <select data-bind="options: vendors, optionsText: \'name\', optionsValue: \'id\', value: vendorId">\r\n                            </select>\r\n                        </td>\r\n                        <td>\r\n                            <label data-bind="local: \'storeTransfer.storeIn\'"></label>\r\n                            <select data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: storeInId">\r\n                            </select>\r\n                        </td>\r\n                        <td>\r\n                            <label data-bind="local: \'inventoryAdjustment.refNum\'"></label>\r\n                            <input data-bind="value: refNum" maxlength="30" class="form-control input-lg" type="text" />\r\n                        </td>\r\n                        <td style="position: relative">\r\n                            <br />\r\n                            <input class="form-control input-lg datatable-search" type="text"\r\n                                data-bind="value: searchString, valueUpdate: \'input\', event: { blur: cancelSearch }, local: \'storeTransfer.search\', localAttr: \'placeholder\'">\r\n                            <div class="panel panel-default" data-bind="visible: isSearchOpened()">\r\n                                <ul class="panel-body" data-bind="foreach: foundProducts">\r\n                                    <li data-bind="text: $data.name, click: $root.addLine.bind($root)"></li>\r\n                                </ul>\r\n                            </div>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n\r\n                <div id="inventoryAdjustmentMessage"></div>\r\n\r\n                <div class="min-table-width-wrapper">\r\n                    <table class="datatable dataTable min-table-width" role="grid">\r\n                        <thead>\r\n                            <tr role="row">\r\n                                <th style="width: 80px" data-bind="local: \'storeTransfer.id\'">ID</th>\r\n                                <th data-bind="local: \'storeTransfer.name\'"></th>\r\n                                <th style="width: 110px" data-bind="local: \'storeTransfer.upc\'"></th>\r\n                                <th style="width: 110px" data-bind="local: \'storeTransfer.sku\'"></th>\r\n                                <th style="width: 110px" data-bind="local: \'storeTransfer.cost\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.storeInQuantity\'"></th>\r\n                                <th data-bind="local: \'inventoryAdjustment.adjustedQuantity\'"></th>\r\n                                <th data-bind="local: \'inventoryAdjustment.reason\'"></th>\r\n                                <th style="width: 50px"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <!-- ko foreach: inventoryTransferLines -->\r\n                        <tbody>\r\n                            <tr>\r\n                                <td data-bind="text: $data.productCode, visible:$data.variantKey == null"></td>\r\n                                <td data-bind="visible:$data.variantKey != null"></td>\r\n                                <td data-bind="text: $data.name"></td>\r\n                                <td data-bind="text: $data.upc"></td>\r\n                                <td data-bind="text: $data.sku"></td>\r\n                                <td data-bind="currency: $data.cost, visible:$data.productType == 0"></td>\r\n                                <td data-bind="visible:$data.productType != 0"></td>\r\n                                <td data-bind="text: $root.getStoreInQuantity($data.storeQuantities), visible:$data.productType == 0"></td>\r\n                                <td data-bind="visible:$data.productType != 0"></td>\r\n                                <td style="white-space: initial">\r\n                                    <input type="number" class="form-control input"\r\n                                        data-bind="value: $data.transferQuantity, valueUpdate: \'input\', event: { keypress: $root.qtyKeyPress }, visible:$data.productType === 0, attr: { readonly: $data.inventoryType === 1 }" />\r\n                                </td>\r\n                                <td>\r\n                                    <select class="form-control input"\r\n                                            data-bind="visible: $data.productType === 0, options: $root.anjasments(), optionsText: \'name\', optionsValue: \'id\', value: reasonId">\r\n                                    </select>\r\n                                </td>\r\n                                <td>\r\n                                    <input type="button" class="delete-row-button" data-bind="click: $root.deleteRow, visible:$data.productType == 0">\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <tbody data-bind="visible: $data.inventoryType === 1" class="po-receiving-serial">\r\n                            <!-- ko foreach: $data.serials -->\r\n                            <tr>\r\n                                <td></td>\r\n                                <td colspan="4">\r\n                                    <input type="text" class="form-control input-lg" maxlength="50"\r\n                                           data-bind="value: $data, local: \'inventory/inventory-manage-tabs/serials.serialNo\', localAttr: \'placeholder\'" />\r\n                                </td>\r\n                                <td>\r\n                                    <input type="button" class="delete-row-button" data-bind="click: $root.removeSerial.bind($parent)">\r\n                                </td>\r\n                                <td colspan="2"></td>\r\n                            </tr>\r\n                            <!-- /ko -->\r\n                            <tr>\r\n                                <td></td>\r\n                                <td colspan="4">\r\n                                    <input type="text" class="form-control input-lg" maxlength="50"\r\n                                           data-bind="value: newSerialNo, event: { keypress: $root.onKeyPress }, local: \'inventory/inventory-manage-tabs/serials.serialNo\', localAttr: \'placeholder\'" />\r\n                                    <input class="modifier-add-button" type="button" data-bind="click: $root.addSerial" />\r\n                                </td>\r\n                                <td colspan="3"></td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <!-- /ko -->\r\n                    </table>\r\n                </div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" data-bind="enable: inventoryTransferLines().length, click: receive, local: \'inventoryAdjustment.done\'"\r\n                        class="btn btn-lg btn-primary" type="button">\r\n                    <input data-bind="click: activate, local: \'storeTransfer.cancel\'"\r\n                        class="btn btn-lg btn-default" type="button">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/poReceiving/poReceiving.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/poReceivingHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body inventory" data-bind="css: { loading: isLoading() }">\r\n            <div data-bind="visible: !isLoading()">\r\n\r\n                <table class="inventory-transfer-options po-receiving-options">\r\n                    <tr>\r\n                        <td class="inventory-transfer-options-label" data-bind="local: \'poReceiving.vendor\'"></td>\r\n                        <td><select data-bind="options: vendors, optionsText: \'name\', optionsValue: \'id\', value: vendorId"></select></td>\r\n                        <td class="inventory-transfer-options-label" data-bind="local: \'storeTransfer.storeIn\'"></td>\r\n                        <td><select data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: storeInId"></select></td>\r\n                        <td class="inventory-transfer-options-label" data-bind="local: \'poReceiving.refNum\'"></td>\r\n                        <td><input data-bind="value: refNum" maxlength="30" class="form-control input-lg store-transfer-refnum" type="text" /></td>\r\n                        <td class="inventory-transfer-search">\r\n                            <input class="form-control input-lg datatable-search" type="text"\r\n                                data-bind="value: searchString, valueUpdate: \'input\', event: { blur: cancelSearch }, local: \'storeTransfer.search\', localAttr: \'placeholder\'">\r\n                            <div class="panel panel-default" data-bind="visible: isSearchOpened()">\r\n                                <ul class="panel-body" data-bind="foreach: foundProducts">\r\n                                    <li data-bind="text: $data.name, click: $root.addLine.bind($root)"></li>\r\n                                </ul>\r\n                            </div>\r\n                        </td>\r\n                        <td class="inventory-transfer-options-label">\r\n                            <input type="checkbox" id="poReceivingFullList" data-bind="checked: fullList" />\r\n                            <label for="poReceivingFullList" data-bind="local: \'storeTransfer.showFullList\'"></label>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n\r\n                <div id="poReceivingMessage"></div>\r\n\r\n                <div class="min-table-width-wrapper">\r\n                    <table class="datatable dataTable min-table-width" role="grid">\r\n                        <thead>\r\n                            <tr role="row">\r\n                                <th data-bind="local: \'storeTransfer.id\'" class="product-id"></th>\r\n                                <th data-bind="local: \'storeTransfer.name\'" class="product-name"></th>\r\n                                <th data-bind="local: \'storeTransfer.upc\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.sku\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.cost\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.storeInQuantity\'"></th>\r\n                                <th data-bind="local: \'poReceiving.receivedQuantity\'"></th>\r\n                                <th data-bind="visible: !$root.fullList()" style="width: 80px"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody data-bind="visible: !fullList() && inventoryTransferLines().length === 0">\r\n                            <tr>\r\n                                <td colspan="8" class="start-search-message" data-bind="local: \'storeTransfer.startSearch\'"></td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <!-- ko foreach: inventoryTransferLines -->\r\n                        <tbody data-bind="visible: !$root.fullList() || ($root.lineVisible($data) && (!$data.parent || $data.parent.expanded()))">\r\n                            <tr data-bind="click: $root.expandLine, css: { open: $data.expanded() }">\r\n                                <td class="product-id">\r\n                                    <!-- ko if: ($data.inventoryType === 1 || $data.child) && $root.fullList() -->\r\n                                    <span class="expand-icon"></span>\r\n                                    <!-- /ko -->\r\n                                    <span data-bind="text: $data.productCode, visible: $data.variantKey == null"></span>\r\n                                </td>\r\n                                <td data-bind="text: $data.name" class="product-name"></td>\r\n                                <td data-bind="text: $data.upc"></td>\r\n                                <td data-bind="text: $data.sku"></td>\r\n                                <td data-bind="currency: $data.cost, visible:$data.productType == 0"></td>\r\n                                <td data-bind="visible:$data.productType != 0"></td>\r\n                                <td data-bind="text: $root.getStoreInQuantity($data.storeQuantities), visible:$data.productType == 0"></td>\r\n                                <td data-bind="visible:$data.productType != 0"></td>\r\n                                <td style="white-space: initial">\r\n                                    <input type="number" class="form-control input"\r\n                                        data-bind="value: $data.transferQuantity, valueUpdate: \'input\', event: { keypress: $root.qtyKeyPress }, visible:$data.productType === 0, attr: { readonly: $data.inventoryType === 1 }" />\r\n                                </td>\r\n                                <td data-bind="visible: !$root.fullList()">\r\n                                    <input type="button" class="delete-row-button" data-bind="click: $root.deleteRow, visible: $data.productType === 0">\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <tbody data-bind="visible: $data.inventoryType === 1 && (!$root.fullList() || ($data.expanded() && $root.lineVisible($data)))" class="po-receiving-serial">\r\n                            <!-- ko foreach: $data.serials -->\r\n                            <tr>\r\n                                <td></td>\r\n                                <td colspan="4">\r\n                                    <input type="text" class="form-control input-lg" maxlength="50"\r\n                                           data-bind="value: serialNo, local: \'inventory/inventory-manage-tabs/serials.serialNo\', localAttr: \'placeholder\'" />\r\n                                </td>\r\n                                <td>\r\n                                    <input type="button" class="delete-row-button" data-bind="click: $root.removeSerial.bind($parent)">\r\n                                </td>\r\n                                <td></td>\r\n                            </tr>\r\n                            <!-- /ko -->\r\n                            <tr>\r\n                                <td></td>\r\n                                <td colspan="4">\r\n                                    <input type="text" class="form-control input-lg" maxlength="50"\r\n                                           data-bind="value: newSerialNo, event: { keypress: $root.onKeyPress }, local: \'inventory/inventory-manage-tabs/serials.serialNo\', localAttr: \'placeholder\'" />\r\n                                    <input class="modifier-add-button" type="button" data-bind="click: $root.addSerial" />\r\n                                </td>\r\n                                <td colspan="2"></td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <!-- /ko -->\r\n                    </table>\r\n\r\n                    <div class="dataTables_wrapper" data-bind="visible: fullList() && pagination().length > 1">\r\n                        <div class="dataTables_paginate paging_simple_numbers">\r\n                            <a class="paginate_button previous" data-dir="previous"\r\n                               data-bind="css: { disabled: pagination()[0] && pagination()[0].current }, click: $root.gotoPage, local: \'storeTransfer.previous\'">\r\n                            </a>\r\n                            <span data-bind="foreach: pagination">\r\n                                <!-- ko if: $data.afterGap -->\r\n                                <span>…</span>\r\n                                <!-- /ko -->\r\n                                <a class="paginate_button" data-bind="text: pageNo, css: { current: $data.current }, click: $root.gotoPage"></a>\r\n                                <!-- ko if: $data.beforeGap -->\r\n                                <span>…</span>\r\n                                <!-- /ko -->\r\n                            </span>\r\n                            <a class="paginate_button next" data-dir="next"\r\n                               data-bind="css: { disabled: pagination().length && pagination()[pagination().length - 1].current }, click: $root.gotoPage, local: \'storeTransfer.next\'">\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n\r\n                </div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-bind="enable: inventoryTransferLines().length, click: receive, local: \'poReceiving.Receive\'"\r\n                        class="btn btn-lg btn-primary" type="button">\r\n                    <input data-bind="click: activate, local: \'storeTransfer.cancel\'"\r\n                        class="btn btn-lg btn-default" type="button">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/popups/enterpriseHelpPopup.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <h3>General Tab</h3>\r\n            <dl>\r\n                <dt>Store’s Business</dt>\r\n                <dd>The type of business the store belongs to.</dd>\r\n\r\n                <dt>External Payment</dt>\r\n                <dd>Allows you to use an external terminal for card payments.</dd>\r\n\r\n                <dt>Item Notes</dt>\r\n                <dd>Select whether to now allow notes on items, make it a mandatory step, or an optional step.</dd>\r\n\r\n                <dt>Auto-Logout After Each Order</dt>\r\n                <dd>Select to log out of the system after an order is placed.</dd>\r\n\r\n                <dt>Synchronization on Login</dt>\r\n                <dd>Automatically synchronize all POS data once you log in to the system.</dd>\r\n\r\n                <dt>Open Cash Drawer on Credit/Debit Card Transaction</dt>\r\n                <dd>Automatically opens the register when you process a transaction using a credit/debit card.</dd>\r\n\r\n                <dt>Show Tax List</dt>\r\n                <dd>Display a list of taxes for items as they are added to the cart.</dd>\r\n            </dl>\r\n\r\n            <h3>Contacts</h3>\r\n            <dl>\r\n                <dt>Enterprise Code</dt>\r\n                <dd>Your eHopper Account ID.</dd>\r\n\r\n                <dt>Enterprise Name</dt>\r\n                <dd>Your business name.</dd>\r\n\r\n                <dt>Address 1/2</dt>\r\n                <dd>Your businesses’ street address.</dd>\r\n\r\n                <dt>City</dt>\r\n                <dd>The city where your business is located.</dd>\r\n\r\n                <dt>State</dt>\r\n                <dd>The state where your business is located within the USA.</dd>\r\n\r\n                <dt>Zip</dt>\r\n                <dd>The zip code of your business when located in the USA.</dd>\r\n\r\n                <dt>Country</dt>\r\n                <dd>The country your business is located in.</dd>\r\n\r\n                <dt>Phone</dt>\r\n                <dd>Your business phone number.</dd>\r\n\r\n                <dt>Email</dt>\r\n                <dd>Your email address linked to the buinsess.</dd>\r\n\r\n                <dt>Web</dt>\r\n                <dd>The web address of your businesses website.</dd>\r\n            </dl>\r\n\r\n            <h3>Receipt Tab</h3>\r\n            <dl>\r\n                <dt>Kitchen Receipt</dt>\r\n                <dd>Select if you have a second printer for your kitchen and wish to send a customized receipt to it.</dd>\r\n\r\n                <dt>Footer</dt>\r\n                <dd>Enter the text what will be printed on the kitchen receipt that will be removed from the customer receipt.</dd>\r\n            </dl>\r\n\r\n            <h3>Tips Tab</h3>\r\n            <dl>\r\n                <dt>Tips</dt>\r\n                <dd>Select to enable the tips function.</dd>\r\n\r\n                <dt>Tips on Credit Card Authorization</dt>\r\n                <dd>Automatically adds a calculated amount for tipping to an order upon authorization.</dd>\r\n\r\n                <dt>Tips & Signature</dt>\r\n                <dd>Select to have tips and signatures taken either on screen, on receipt or on the terminal itself.</dd>\r\n\r\n                <dt>Tips & Signature on POS</dt>\r\n                <dd>Enable or disable taking tips and signatures in eHopper POS.</dd>\r\n\r\n                <dt>Keyboard Shortcut Settings</dt>\r\n                <dd>When using a tablet, set and use keyboard shortcuts for easier input.</dd>\r\n            </dl>\r\n\r\n            <h3>Taxes Tab</h3>\r\n            <p>Set the Tax you wish to use, as well as the rate and order.</p>\r\n\r\n            <h3>Localization</h3>\r\n            <dl>\r\n                <dt>Account Languages</dt>\r\n                <dd>Selects the language you wish to view eHopper in.</dd>\r\n\r\n                <dt>Default Language</dt>\r\n                <dd>Selects the language eHopper will use by default.</dd>\r\n\r\n                <dt>POS Language</dt>\r\n                <dd>Selects the language the Point Of Sale will be displayed in.</dd>\r\n\r\n                <dt>Kitchen Receipt Language</dt>\r\n                <dd>Selects the language that kitchen receipts will be printed in.</dd>\r\n\r\n                <dt>BO Language</dt>\r\n                <dd>Selects the language the Back Office will be displayed in.</dd>\r\n\r\n                <dt>Date Format</dt>\r\n                <dd>Selects in what order the day, month and year is displayed in eHopper.</dd>\r\n\r\n                <dt>Time Format</dt>\r\n                <dd>Selects in what order hours, minutes, seconds and 12-hour marker.</dd>\r\n\r\n                <dt>Currency</dt>\r\n                <dd>Selects the type of currency that is being used to handle cash transactions in eHopper.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/globalModifiersHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Search for Modifier</dt>\r\n                <dd>Search your modifier list for a specific one.</dd>\r\n\r\n                <dt>New Global Modifier</dt>\r\n                <dd>Create a new modifier for use in the POS.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/importInventoryHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>File To Import</dt>\r\n                <dd>Browse your computer for a .csv file which contains your inventory data, and upload it to eHopper.</dd>\r\n            </dl>\r\n            <p>\r\n                The criteria for importing inventory using this method can be found in our Knowledge Base:\r\n                <a target="_blank" href="https://ehoppersupport.zendesk.com/hc/en-us/articles/219568148-Import-of-Inventory">Import of Inventory</a>.\r\n            </p>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/modifierHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Modifier Type</dt>\r\n                <dd>Select the type of modifier for the new entry.</dd>\r\n\r\n            </dl>\r\n\r\n            <h3>Modifier Group</h3>\r\n            <dl>\r\n                <dt>Group Name</dt>\r\n                <dd>Set the name of the modifier group.</dd>\r\n\r\n                <dt>Option</dt>\r\n                <dd>Add a modifier options and set the price of the modifier.</dd>\r\n\r\n                <dt>Is Active</dt>\r\n                <dd>Set if the modifier group is active or inactive in POS.</dd>\r\n            </dl>\r\n\r\n            <h3>Add-ons</h3>\r\n            <dl>\r\n                <dt>Modifier Name</dt>\r\n                <dd>Set the name of the modifier.</dd>\r\n\r\n                <dt>Price</dt>\r\n                <dd>Set the price of the modifier option.</dd>\r\n\r\n                <dt>Is Active</dt>\r\n                <dd>Set if the modifier add-on is active or inactive in POS.</dd>\r\n            </dl>\r\n\r\n            <h3>Exceptions</h3>\r\n            <dl>\r\n                <dt>Modifier Name</dt>\r\n                <dd>Set the name of the modifier exception.</dd>\r\n\r\n                <dt>Price</dt>\r\n                <dd>Set the price of the modifier exception.</dd>\r\n\r\n                <dt>Is Active</dt>\r\n                <dd>Set if the modifier exception is active or inactive in POS.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/orderDetailsHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Order ID</dt>\r\n                <dd>The ID number of the placed order.</dd>\r\n\r\n                <dt>Order Name</dt>\r\n                <dd>Name of the placed order.</dd>\r\n\r\n                <dt>Customer</dt>\r\n                <dd>Type of customer the order was placed by.</dd>\r\n\r\n                <dt>Customer Phone</dt>\r\n                <dd>The customers phone number.</dd>\r\n\r\n                <dt>Employee</dt>\r\n                <dd>Name of employee that entered the order into eHopper.</dd>\r\n\r\n                <dt>Store</dt>\r\n                <dd>Name of the store where the order was placed.</dd>\r\n\r\n                <dt>Order Date</dt>\r\n                <dd>Date of the order.</dd>\r\n\r\n                <dt>Order Type</dt>\r\n                <dd>The type of order that was placed.</dd>\r\n\r\n                <dt>Status</dt>\r\n                <dd>The current order status.</dd>\r\n\r\n                <dt>Tender Type</dt>\r\n                <dd>Type of tender used to process the transaction.</dd>\r\n\r\n                <dt>Fulfillment</dt>\r\n                <dd>Notes if the order has or has not been fulfilled.</dd>\r\n\r\n                <dt>RefNum</dt>\r\n                <dd>The referral number of the order, if one is set.</dd>\r\n\r\n                <dt>Subtotal</dt>\r\n                <dd>Subtotal of the order.</dd>\r\n\r\n                <dt>Discount</dt>\r\n                <dd>Amount of applied discounts.</dd>\r\n\r\n                <dt>Tax</dt>\r\n                <dd>Amount of paid tax.</dd>\r\n\r\n                <dt>Tips</dt>\r\n                <dd>Amount received in tips.</dd>\r\n\r\n                <dt>Total</dt>\r\n                <dd>Total price of the transaction.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/ordersListHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Search Order</dt>\r\n                <dd>Search for a specific order in the full list.</dd>\r\n\r\n                <dt>Order Type</dt>\r\n                <dd>Sort the list by the type of order it was processed as.</dd>\r\n\r\n                <dt>Order Status</dt>\r\n                <dd>Sort the list by the current status of your orders.</dd>\r\n\r\n                <dt>Fulfillment</dt>\r\n                <dd>Sort the list by the level of fulfillment on each other.</dd>\r\n\r\n                <dt>Export</dt>\r\n                <dd>Export your selected order data to an Excel spreadsheet.</dd>\r\n\r\n                <dt>Calendar</dt>\r\n                <dd>Sort the data using date ranges. “All” is the default.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/poReceivingHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Vendor</dt>\r\n                <dd>The vendor that you have ordered stock from.</dd>\r\n\r\n                <dt>Store In</dt>\r\n                <dd>The store that has received the ordered stock from the vendor.</dd>\r\n\r\n                <dt>Ref Num</dt>\r\n                <dd>The referral number set on the transfer transaction for future reference.</dd>\r\n\r\n                <dt>Search</dt>\r\n                <dd>Search for an individual record by title or code.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/quickBooksHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <h3>QuickBooks Help</h3>\r\n            <dl>\r\n                <dt></dt>\r\n                <dd><a href="https://ehoppersupport.zendesk.com/hc/en-us/articles/115006158767-QuickBooks-Integration" target="_blank">QuickBooks Integration</a></dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/registerSettingsHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <h3>General Tab</h3>\r\n            <dl>\r\n                <dt>Store</dt>\r\n                <dd>The name of the store you have chosen to edit.</dd>\r\n\r\n                <dt>Register Name</dt>\r\n                <dd>The name of the register you have selected from the list.</dd>\r\n\r\n                <dt>Register Number</dt>\r\n                <dd>The Designated number of the register you have chosen to edit.</dd>\r\n\r\n                <dt>Register License Key</dt>\r\n                <dd>The license key that is associated with the register you have selected from the previous list.</dd>\r\n\r\n                <dt>Is Enabled</dt>\r\n                <dd>Select if the register is enabled or disabled for usage in eHopper POS.</dd>\r\n            </dl>\r\n\r\n            <h3>Localization Tab</h3>\r\n            <dl>\r\n                <dt>POS Language</dt>\r\n                <dd>Selects the language the Point Of Sale will be displayed in.</dd>\r\n\r\n                <dt>Kitchen Receipt Language</dt>\r\n                <dd>Selects the language that kitchen receipts will be printed in.</dd>\r\n\r\n                <dt>Date Format</dt>\r\n                <dd>Selects in what order the day, month and year is displayed in eHopper.</dd>\r\n\r\n                <dt>Time Format</dt>\r\n                <dd>Selects in what order hours, minutes, seconds and 12-hour marker.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/storeSettingsHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Search Store</dt>\r\n                <dd>Search for a specific store if you have several to choose from.</dd>\r\n\r\n                <dt>New Store</dt>\r\n                <dd>Add a new store to your current list of stores.</dd>\r\n            </dl>\r\n\r\n            <h3>General Tab</h3>\r\n            <dl>\r\n                <dt>Store ID</dt>\r\n                <dd>The ID code associated with your eHopper account.</dd>\r\n\r\n                <dt>Store’s Business</dt>\r\n                <dd>The type of business the store belongs to.</dd>\r\n\r\n                <dt>Show Order Type</dt>\r\n                <dd>Allows you to select an Order Type in the Shopping Cart.</dd>\r\n\r\n                <dt>External Payment</dt>\r\n                <dd>Allows you to use an external terminal for card payments.</dd>\r\n\r\n                <dt>Item Notes</dt>\r\n                <dd>Select whether to now allow notes on items, make it a mandatory step, or an optional step.</dd>\r\n\r\n                <dt>Auto-Logout After Each Order</dt>\r\n                <dd>Select to log out of the system after an order is placed.</dd>\r\n\r\n                <dt>Synchronization on Login</dt>\r\n                <dd>Automatically synchronize all POS data once you log in to the system.</dd>\r\n\r\n                <dt>Open Cash Drawer on Credit/Debit Card Transaction</dt>\r\n                <dd>Automatically opens the register when you process a transaction using a credit/debit card.</dd>\r\n\r\n                <dt>Show Tax List</dt>\r\n                <dd>Display a list of taxes for items as they are added to the cart.</dd>\r\n\r\n                <dt>Is Enabled</dt>\r\n                <dd>Enables and disables the store you are currently setting up.</dd>\r\n            </dl>\r\n\r\n            <h3>Contacts</h3>\r\n            <dl>\r\n                <dt>Store Name</dt>\r\n                <dd>Your business name.</dd>\r\n\r\n                <dt>Address 1/2</dt>\r\n                <dd>Your businesses’ street address.</dd>\r\n\r\n                <dt>City</dt>\r\n                <dd>The city where your business is located.</dd>\r\n\r\n                <dt>State</dt>\r\n                <dd>The state where your business is located within the USA.</dd>\r\n\r\n                <dt>Zip</dt>\r\n                <dd>The zip code of your business when located in the USA.</dd>\r\n\r\n                <dt>Country</dt>\r\n                <dd>The country your business is located in.</dd>\r\n\r\n                <dt>Phone</dt>\r\n                <dd>Your business phone number.</dd>\r\n\r\n                <dt>Email</dt>\r\n                <dd>Your email address linked to the business.</dd>\r\n\r\n                <dt>Web</dt>\r\n                <dd>The web address of your businesses website.</dd>\r\n            </dl>\r\n\r\n            <h3>Receipt Tab</h3>\r\n            <dl>\r\n                <dt>Kitchen Receipt</dt>\r\n                <dd>Select if you have a second printer for your kitchen and wish to send a customized receipt to it.</dd>\r\n\r\n                <dt>Footer</dt>\r\n                <dd>Enter the text what will be printed on the kitchen receipt that will be removed from the customer receipt.</dd>\r\n            </dl>\r\n\r\n            <h3>Tips Tab</h3>\r\n            <dl>\r\n                <dt>Tips</dt>\r\n                <dd>Select to enable the tips function.</dd>\r\n\r\n                <dt>Tips on Credit Card Authorization</dt>\r\n                <dd>Automatically adds a calculated amount for tipping to an order upon authorization.</dd>\r\n\r\n                <dt>Tips & Signature</dt>\r\n                <dd>Select to have tips and signatures taken either on screen, on receipt or on the terminal itself.</dd>\r\n\r\n                <dt>Keyboard Shortcut Settings</dt>\r\n                <dd>When using a tablet, set and use keyboard shortcuts for easier input.</dd>\r\n            </dl>\r\n\r\n            <h3>Taxes Tab</h3>\r\n            <p>Set the Tax you wish to use, as well as the rate and order.</p>\r\n\r\n            <h3>Localization Tab</h3>\r\n            <dl>\r\n\r\n                <dt>POS Language</dt>\r\n                <dd>Selects the language the Point Of Sale will be displayed in.</dd>\r\n\r\n                <dt>Kitchen Receipt Language</dt>\r\n                <dd>Selects the language that kitchen receipts will be printed in.</dd>\r\n\r\n                <dt>Date Format</dt>\r\n                <dd>Selects in what order the day, month and year is displayed in eHopper.</dd>\r\n\r\n                <dt>Time Format</dt>\r\n                <dd>Selects in what order hours, minutes, seconds and 12-hour marker.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/storeTransferHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Store Out</dt>\r\n                <dd>The store where the inventory will be transferred from.</dd>\r\n\r\n                <dt>Store In</dt>\r\n                <dd>The store where the inventory will be transferred to.</dd>\r\n\r\n                <dt>Ref Num</dt>\r\n                <dd>The referral number set on the transfer transaction for future reference.</dd>\r\n\r\n                <dt>Search</dt>\r\n                <dd>Search for an individual transfer record by title or code.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/taxManagerHelp.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <dl>\r\n                <dt>Tax Name</dt>\r\n                <dd>The name of the tax you are setting up for usage in the POS.</dd>\r\n\r\n                <dt>Tax Code</dt>\r\n                <dd>The code associated with the tax you are adding.</dd>\r\n\r\n                <dt>Tax Rate</dt>\r\n                <dd>The percentage that eHopper POS will use for calculating tax.</dd>\r\n\r\n                <dt>Is Active</dt>\r\n                <dd>Sets if the current tax is either active or inactive within eHopper POS.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/popups/variantsHelpPopup.html',[],function () { return '<div class="help-popup">\r\n    <span class="help-popup-icon" data-bind="visible: showHelpPopupButton(), click: showHelpPopup"></span>\r\n\r\n    <div class="help-popup-overlay" data-bind="visible: helpPopupVisible(), click: hideHelpPopup"></div>\r\n\r\n    <div class="help-popup-dialog" data-bind="visible: helpPopupVisible()">\r\n        <h1 class="help-popup-header" data-bind="local: \'shell.help\'"></h1>\r\n        <i class="help-popup-close" data-bind="click: hideHelpPopup"></i>\r\n        <section class="help-popup-content">\r\n\r\n            <h3>General Tab</h3>\r\n            <dl>\r\n                <dt>Product Name</dt>\r\n                <dd>Name of the product you are adding to eHopper.</dd>\r\n\r\n                <dt>Product Short Name</dt>\r\n                <dd>The 4-letter abbreviation for the item you are adding to eHopper.</dd>\r\n\r\n                <dt>Product Description</dt>\r\n                <dd>Description of the item you are adding to eHopper.</dd>\r\n\r\n                <dt>Department</dt>\r\n                <dd>Select the department the new item will belong to.</dd>\r\n\r\n                <dt>Category</dt>\r\n                <dd>Select the category the item will be listed under.</dd>\r\n\r\n                <dt>UPC</dt>\r\n                <dd>Enter in the items UPC bar code.</dd>\r\n\r\n                <dt>Color</dt>\r\n                <dd>Select the color the items background will be in the POS.</dd>\r\n\r\n                <dt>Is Active</dt>\r\n                <dd>Set whether this item will be active or inactive in the POS.</dd>\r\n\r\n                <dt>Browse Images</dt>\r\n                <dd>Choose or upload an image for the item which will be shown in the POS.</dd>\r\n            </dl>\r\n\r\n            <h3>Pricing</h3>\r\n            <dl>\r\n                <dt>Price Type</dt>\r\n                <dd>Set if the item price is fixed or entered manually when added to the shopping cart.</dd>\r\n\r\n                <dt>Unit</dt>\r\n                <dd>Select a unit of measurement for the item.</dd>\r\n\r\n                <dt>Sales Price</dt>\r\n                <dd>Set the default price of the item.</dd>\r\n\r\n                <dt>All Taxable</dt>\r\n                <dd>Select whether this item is taxable or non-taxable.</dd>\r\n\r\n                <dt>All Discountable</dt>\r\n                <dd>Select whether this item is discountable or non-discountable.</dd>\r\n\r\n                <dt>Store</dt>\r\n                <dd>Select the store where the item will be sold from, and view the price, tax and discount status.</dd>\r\n            </dl>\r\n\r\n            <h3>Modifiers</h3>\r\n            <dl>\r\n                <dt>Stores</dt>\r\n                <dd>Select the store where this modifier will be used.</dd>\r\n\r\n                <dt>Select Modifier Type</dt>\r\n                <dd>Select the type of modifier this will be used as.</dd>\r\n\r\n                <dt>Groups</dt>\r\n                <dd>List of modifier groups currently in eHopper.</dd>\r\n\r\n                <dt>Add-Ons</dt>\r\n                <dd>Allows you to set an additional modifier behavior and if it is active or inactive.</dd>\r\n\r\n                <dt>Exceptions</dt>\r\n                <dd>Sets a behavior to turn off a modifier, and if it is active or inactive.</dd>\r\n            </dl>\r\n\r\n            <h3>Vendors</h3>\r\n            <dl>\r\n                <dt>Search Vendors</dt>\r\n                <dd>Select a vendor from your current vendor list.</dd>\r\n\r\n                <dt>New Vendor</dt>\r\n                <dd>Add a new vendor to the vendor list.</dd>\r\n\r\n                <dt>Vendor</dt>\r\n                <dd>Name of the selected vendor.</dd>\r\n\r\n                <dt>SKU</dt>\r\n                <dd>The vendor SKU.</dd>\r\n\r\n                <dt>Cost</dt>\r\n                <dd>Cost of the item to order from the vendor.</dd>\r\n            </dl>\r\n\r\n            <h3>Ordering</h3>\r\n            <dl>\r\n                <dt>Recommended Quantity</dt>\r\n                <dd>Set the recommended amount of stock a location should have on hand before ordering from a vendor.</dd>\r\n\r\n                <dt>Minimum Quantity</dt>\r\n                <dd>Set the minimum amount of stock that a location can have on hand at all times.</dd>\r\n\r\n                <dt>Total Quantity</dt>\r\n                <dd>Set the total quantity of the item in the POS.</dd>\r\n            </dl>\r\n\r\n        </section>\r\n    </div>\r\n</div>';});


define('text!views/quickbooks/errorsDialog.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/logo-qbo.png" alt="Quickbooks" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'quickbooks.errors_title\'">Quickbooks - Sync Errors</h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content">\r\n\r\n        <ul data-bind="foreach: errors">\r\n            <li>\r\n                <span data-bind="text: errorCode" />\r\n                <!-- ko if: errorCode --> :&nbsp; <!-- /ko -->\r\n                <span data-bind="text: message" />&nbsp;\r\n                <span data-bind="text: detail" />&nbsp;\r\n                <!-- ko if: entityLink -->\r\n                    <a data-bind="click: $parent.entityClick.bind($root), attr: {href: entityLink}, text: entityName"></a>\r\n                <!-- /ko -->\r\n            </li>\r\n        </ul>\r\n\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n        <button class="btn btn-lg" data-bind="local: \'quickbooks.close\', click: $root.closeDialog.bind($root), css: \'btn-success\'"></button>\r\n    </div>\r\n</div>\r\n';});


define('text!views/quickbooks/quickbooksDisconnect.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list ">\r\n            <div id="quickbooksDisconnectMessage"></div>\r\n\r\n            <div class="alert alert-warning" data-bind="visible: !supportedBrowser()">\r\n                <p class="your-version" data-bind="html: yourBrowser()"></p>\r\n                <div data-bind="local: \'unsupported.qb_latestVersion\'"></div>\r\n            </div>\r\n\r\n            <div class="media text-center">\r\n                <div class="">\r\n                    <img src="content/images/appstore/logo-qbo.png" class="app-icon" style="margin-right: 10px;" />\r\n                </div>\r\n                <br class="clear">\r\n                <div class="text-center" data-bind="html: ko.T(\'quickbooks.disconnect-text\')" style="font-size: 120%"></div>\r\n            </div>\r\n\r\n            <br class="clear">\r\n            <br />\r\n            <div class="form-buttons text-center">\r\n                <input class="btn btn-lg btn-primary" type="button" data-bind="click: $root.close.bind($root), local: \'quickbooks.close\' ">\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n\r\n';});


define('text!views/quickbooks/quickbooksLauncher.html',[],function () { return '<div class="pane pane-right"></div>\r\n';});


define('text!views/quickbooks/quickbooksSettings.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper" data-bind="css: { loading: loading }">\r\n        <div class="loader-container" data-bind="visible: loading">\r\n            <div class="loader-message" data-bind="local: \'quickbooks.syncInProgress\'"></div>\r\n        </div>\r\n        <div class="pane-body item-list">\r\n\r\n            <div data-bind="compose: {\r\n                model: \'viewmodels/popups/helpPopup\',\r\n                view: \'views/popups/quickBooksHelp.html\'\r\n            }"></div>\r\n\r\n            <div id="quickbooksSettingsMessage"></div>\r\n\r\n            <div class="alert alert-warning" data-bind="visible: !supportedBrowser()">\r\n                <p class="your-version" data-bind="html: yourBrowser()"></p>\r\n                <div data-bind="local: \'unsupported.qb_latestVersion\'"></div>\r\n            </div>\r\n\r\n            <div class="panel panel-default" style="cursor: pointer" data-bind="click: expandSettings, visible: !errorMessage()">\r\n                <div class="panel-body">\r\n                    <div class="media">\r\n                        <div class="media-left">\r\n                            <img src="content/images/appstore/logo-qbo.png" class="app-icon" style="margin-right: 10px;" />\r\n                        </div>\r\n                        <div class="media-body media-middle w100" data-bind="html: ko.T(\'quickbooks.welcome\')" style="font-size: 120%"></div>\r\n                        <div class="media-right media-middle">\r\n                            <span class="fa-blue uppercase" style="white-space: nowrap">\r\n                                <i class="fa fa-1x" data-bind="css: showSettings() ? \'fa-chevron-up\' : \'fa-chevron-down\' "></i>\r\n                                <span data-bind="local: \'quickbooks.settings\' ">Settings</span>\r\n                            </span>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div class="alert alert-danger" data-bind="visible: errorMessage()">\r\n                <div class="media">\r\n                    <div class="media-left">\r\n                        <img src="content/images/appstore/logo-qbo.png" width="50" />\r\n                    </div>\r\n                    <div class="media-body w100">\r\n                        <h4><b data-bind="local: \'quickbooks.token_is_expired_title\' "></b></h4>\r\n                        <div data-bind="html: errorMessage()"></div>\r\n                    </div>\r\n                    <div class="media-right media-middle">\r\n                        <button class="btn btn-lg btn-danger" data-bind="click: $root.reconnect.bind($root), local:\'quickbooks.reconnect\'">Reconnect</button>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            <div data-bind="visible: showSettings() && !errorMessage()">\r\n                <!--<h2 style="margin: 30px 0 20px" data-bind="local: \'quickbooks.settings_header\' "></h2>-->\r\n                <div class="panel panel-default" data-bind="with: dataContext">\r\n\r\n                    <div class="panel-heading">\r\n                        <a class="pull-right" data-bind="local: \'quickbooks.sync_accounts\', click: $root.syncAccounts.bind($root)" href="#"></a>\r\n                        <span data-bind="local: \'quickbooks.financial_settings\'"></span>\r\n                    </div>\r\n                    <div class="panel-body">\r\n                        <div class="row form-group">\r\n                            <div class="col-sm-4">\r\n                                <label data-bind="local: \'quickbooks.bank_deposit_account\'">Bank Deposit Account:</label>\r\n                                <select class="w100" data-bind="options: bankAccounts, optionsText: \'name\', optionsValue: \'id\', value: bankDepositAccountId"></select>\r\n                                <!--<span class="validationMessage" data-bind="validationMessage: bankDepositAccountId"></span>-->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="panel-heading" data-bind="local: \'quickbooks.default_inventory_accounts\'"></div>\r\n                    <div class="panel-body">\r\n                        <div class="row form-group">\r\n                            <div class="col-sm-4">\r\n                                <label data-bind="local: \'quickbooks.asset_account\'"></label>\r\n                                <select class="w100" data-bind="options: assetAccounts, optionsText: \'name\', optionsValue: \'id\', value: assetAccountId"></select>\r\n                                <!--<span class="validationMessage" data-bind="validationMessage: assetAccountId"></span>-->\r\n                            </div>\r\n\r\n                            <div class="col-sm-4">\r\n                                <label data-bind="local: \'quickbooks.income_account\'"></label>\r\n                                <select class="w100" data-bind="options: incomeAccounts, optionsText: \'name\', optionsValue: \'id\', value: incomeAccountId"></select>\r\n                                <!--<span class="validationMessage" data-bind="validationMessage: incomeAccountId"></span>-->\r\n                            </div>\r\n\r\n                            <div class="col-sm-4">\r\n                                <label data-bind="local: \'quickbooks.expense_account\'"></label>\r\n                                <select class="w100" data-bind="options: expenseAccounts, optionsText: \'name\', optionsValue: \'id\', value: expenseAccountId"></select>\r\n                                <!--<span class="validationMessage" data-bind="validationMessage: expenseAccountId"></span>-->\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="panel-heading" data-bind="local: \'quickbooks.cash_settings\'"></div>\r\n                    <div class="panel-body">\r\n                        <div class="form-group">\r\n                            <div class="checkbox">\r\n                                <input type="checkbox" id="qbSyncPayinPayout" data-bind="checked: isSyncPayinPayout">\r\n                                <label for="qbSyncPayinPayout" data-bind="local: \'quickbooks.payin_payout_sync\'"></label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="row form-group" data-bind="visible: isSyncPayinPayout">\r\n                            <div class="col-sm-4">\r\n                                <label data-bind="local: \'quickbooks.payin_credit_account\'"></label>\r\n                                <select class="w100" data-bind="options: accounts, optionsText: \'name\', optionsValue: \'id\', value: payinsAccountId"></select>\r\n                            </div>\r\n\r\n                            <div class="col-sm-4">\r\n                                <label data-bind="local: \'quickbooks.payin_debit_account\'"></label>\r\n                                <select class="w100" data-bind="options: accounts, optionsText: \'name\', optionsValue: \'id\', value: payoutsAccountId"></select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="panel-heading" data-bind="local: \'quickbooks.data_transfer\'"></div>\r\n                    <div class="panel-body">\r\n                        <div class="form-inline">\r\n                            <div class="checkbox" style="line-height: 54px;">\r\n                                <input type="checkbox" id="qbSyncData" data-bind="checked: isSyncData">\r\n                                <label for="qbSyncData" data-bind="local: \'quickbooks.data_sync\'"></label>\r\n                            </div>\r\n                            <div class="form-group" data-bind="if: isSyncData">\r\n                                <select data-bind="options: times, optionsText: \'name\', optionsValue: \'id\', value: syncTime"></select>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="panel-footer form-buttons text-center">\r\n                        <input class="btn btn-lg btn-primary uppercase" type="button" data-bind="click:$root.save.bind($root), local:\'quickbooks.save\' ">\r\n                        <input class="btn btn-lg btn-default" type="button"  data-bind="enable: $root.isChanged, click: $root.cancelEdit.bind($root), local: \'quickbooks.cancel\' ">\r\n                    </div>\r\n                </div>\r\n\r\n            </div>\r\n\r\n            <div class="media">\r\n                <div class="media-body w100">\r\n                    <h2 style="margin-top: 10px;" data-bind="local: \'quickbooks.sync_log\'"></h2>\r\n                </div>\r\n                <div class="media-right form-buttons" data-bind="visible: !errorMessage()" style="white-space: nowrap">\r\n                    <!--<i class="fa fa-refresh fa-baseline fa-1x fa-blue" data-bind="click: $root.refresh.bind($root)"></i>-->\r\n                    <input class="btn btn-lg btn-success uppercase" type="button" value="Sync" data-bind="click: $root.sync.bind($root), local:\'quickbooks.sync\', enable: isSyncEnabled ">\r\n                    <input class="btn btn-lg btn-default uppercase" type="button" value="Initial Sync" data-bind="click: $root.initialSync.bind($root), local:\'quickbooks.initialSync\', visible: dataContext().accounts().length == 1">\r\n                </div>\r\n            </div>\r\n            \r\n\r\n            <!--ko compose: { model: \'viewmodels/quickbooks/syncJournalList\' } -->\r\n            <!--/ko-->\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/quickbooks/syncJournalList.html',[],function () { return '<div>\r\n\r\n    <table class="datatable" id="qbSyncJournal">\r\n        <thead>\r\n            <tr>\r\n                <th style="width:10%;" data-bind="local: \'quickbooks.date\'">Date</th>\r\n                <th style="width:10%;" data-bind="local: \'quickbooks.syncedEntities\'">Synced Entities</th>\r\n                <th style="width:5%;" data-bind="local: \'quickbooks.status\'">Status</th>\r\n                <th style="width:5%;" data-bind="local: \'quickbooks.messages\'">Messages</th>\r\n            </tr>\r\n        </thead>\r\n        <tbody></tbody>\r\n    </table>\r\n</div>\r\n';});


define('text!views/quickbooks/syncedDetails.html',[],function () { return '<div class="app-dialog" data-bind="with: model">\r\n    <div class="app-dialog_header">\r\n        <img class="app-dialog_header_logo" src="content/images/appstore/logo-qbo.png" alt="Quickbooks" />\r\n        <h3 class="app-dialog_header_text" data-bind="local: \'quickbooks.sync_details_title\'">Quickbooks - Sync Details</h3>\r\n    </div>\r\n\r\n    <div class="app-dialog_content control-number-dialog">\r\n        <ul data-bind="foreach: syncDetails">\r\n            <!-- ko if: count > 0 -->\r\n            <li>\r\n                <span data-bind="text: name" />:&nbsp;<span data-bind="text: count" />\r\n            </li>\r\n            <!-- /ko -->\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="app-dialog_bar">\r\n        <button class="btn btn-lg" data-bind="local: \'quickbooks.close\', click: $root.closeDialog.bind($root), css: \'btn-success\'"></button>\r\n    </div>\r\n</div>';});


define('text!views/registerSettings/newRegister.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list" data-bind="css: { loading: isLoading() }">\r\n\r\n            <div class="form" data-bind="visible: !isLoading()">\r\n\r\n                <div class="form-group">\r\n                    <span class="please-fill" data-bind="local: \'storeSettings/store-settings-tabs/contacts.pleaseFillNewRegister\'"></span>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label data-bind="local: \'registerSettings/registerSettingsManage.register_name\'"></label>\r\n                    <input class="form-control input-lg" type="text" placeholder="Input Name"\r\n                        data-bind="value: registerName, local: \'registerSettings/registerSettingsManage.input_name\', localAttr: \'placeholder\'"\r\n                        maxlength="100">\r\n                </div>\r\n    \r\n                <div class="form-group">\r\n                    <label for="new-register-store-name" data-bind="local: \'registerSettings/registerSettingsManage.store\'"></label>\r\n                    <select id="new-register-store-name" data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: businessUnitId"></select>\r\n                </div>\r\n\r\n                <div data-bind="text: errorMessage" class="fieldError"></div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done"\r\n                        data-bind="click: done, local: \'registerSettings/registerSettingsManage.done\'">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel"\r\n                        data-bind="click: cancel, local: \'registerSettings/registerSettingsManage.cancel\'">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/registerSettings/register-settings-tabs/general.html',[],function () { return '<div data-bind="with: model">\r\n    <!-- ko if: adminPermissionGranted  -->\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage.store\'"></label>\r\n        <h4 style="margin-top: 0" data-bind="text: storeName"></h4>\r\n    </div>\r\n    <!-- /ko -->\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage.register_name\'">Register Name</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Input Name" data-bind="value: name, local: \'registerSettings/registerSettingsManage.input_name\', localAttr: \'placeholder\'" maxlength="100">\r\n    </div>\r\n    \r\n    <!-- TODO: Remove all unnecessary code -->\r\n    <div class="form-group" data-bind="visible: false">\r\n        <label>\r\n            <div class="checkbox">\r\n                <input type="checkbox" id="assignedEmployeesOnly" data-bind="checked: showAssignedOnlyEmployees">\r\n                <label for="assignedEmployeesOnly" data-bind="local: \'registerSettings/registerSettingsManage.assigned_only\'">Assigned Only</label>\r\n            </div>\r\n\r\n            <p data-bind="local: \'registerSettings/registerSettingsManage.employees\'">Employees</p>\r\n        </label>\r\n        <select class="select" data-bind="options: employeesList,\r\n                                          optionsText: \'fullName\',\r\n                                          optionsValue: \'id\',\r\n                                          multipleSelect: employeesList,\r\n                                          selectedElements: selectedEmployees,\r\n                                          multipleSelectOptions: $root.employeesMultipleSelectOptions">\r\n        </select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage.register_number\'">Register Number</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Input Number" data-bind="value: registerNumber, local: \'registerSettings/registerSettingsManage.input_number\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group" data-bind="permission: \'ADM\'">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage.register_license_key\'">Register License Key</label>\r\n        <div class="inline" data-bind="text: ($data.selectedDevices() && $data.selectedDevices().length) ? selectedDevices()[0].licenseKey : \'\'"></div>\r\n    </div>\r\n\r\n    <div class="form-group" data-bind="if: $root.isControlNumberEnabled">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage.control_token\'">Control # Token</label>\r\n        <input maxlength="50" class="form-control input-lg" type="text" placeholder="Control # Token" data-bind="value: properties.controlNumberToken, local: \'registerSettings/registerSettingsManage.control_token\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="isActiveRegister" data-bind="checked: isActive">\r\n        <label for="isActiveRegister" data-bind="local: \'registerSettings/registerSettingsManage.is_active\'">Is Active</label>\r\n    </div>\r\n\r\n    <div id="registerGeneralMessage"></div>\r\n\r\n    <div class="form-buttons styled-disabled-buttons" data-bind="permission: \'ADM\'">\r\n        <input class="btn btn-lg" type="button" value="Unblock" data-bind="click: $root.unblock.bind($root), css: (isBlocked() ? \'btn-red\' : \'\'), enable: isBlocked(), local: \'registerSettings/registerSettingsManage.unblock\'">\r\n        <input class="btn btn-lg" type="button" value="Deactivate"\r\n            data-bind="click: $root.deactivate.bind($root), css: { \'btn-red\': deviceSerialNumber(), loading: $root.loading() }, enable: deviceSerialNumber() && !$root.loading(), local: \'registerSettings/registerSettingsManage.deactivate\'">\r\n    </div>\r\n</div>\r\n';});


define('text!views/registerSettings/register-settings-tabs/localization.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="localizationMessages"></div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage/localization.pos_language\'">POS Language</label>\r\n        <select data-bind="options: languages, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'registerSettings/registerSettingsManage/localization.select_pos_language\'),\r\n                          value: posLanguageId, enable: enabled">\r\n        </select>\r\n        <span class="validationMessage" data-bind="validationMessage: posLanguageId"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage/localization.kitchen_receipt_language\'">Kitchen Receipt Language</label>\r\n        <select data-bind="options: languages, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'registerSettings/registerSettingsManage/localization.select_kitchen_receipt_language\'),\r\n                           value: kitchenReceiptLanguageId, enable: enabled"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: kitchenReceiptLanguageId"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage/localization.date_format\'">Date format</label>\r\n        <select data-bind="options: dateFormats, optionsText: \'textFormat\', optionsValue: \'id\', optionsCaption: ko.local(\'registerSettings/registerSettingsManage/localization.select_date_format\'),\r\n                           value: dateFormatId, enable: enabled"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: dateFormatId"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage/localization.time_format\'">Time format</label>\r\n        <select data-bind="options: timeFormats, optionsText: \'textFormat\', optionsValue: \'id\', optionsCaption: ko.local(\'registerSettings/registerSettingsManage/localization.select_time_format\'),\r\n                           value: timeFormatId, enable: enabled"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: timeFormatId"></span>\r\n    </div>\r\n</div>\r\n';});


define('text!views/registerSettings/register-settings-tabs/paymentGateway.html',[],function () { return '<div data-bind="with: model">\r\n    <div class="form-group">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage/paymentGateway.payment_gateway\'">Payment Gateway</label>\r\n        <select data-bind="options: allPaymentGatewayTypes, optionsText: \'name\', optionsValue: \'code\', value: paymentGatewayTypeCode, enable: enabled"></select>\r\n    </div>\r\n    <div class="form-group" data-bind="visible: paymentGatewayTypeCode() == 1">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage/paymentGateway.source_key\'">Source Key</label>\r\n        <input type="text" class="form-control input-lg" placeholder="Source Key" data-bind="value: paymentGatewaySourceKey, enable: enabled" />\r\n    </div>\r\n    <div class="form-group" data-bind="visible: paymentGatewayTypeCode() == 1">\r\n        <label data-bind="local: \'registerSettings/registerSettingsManage/paymentGateway.pin\'">PIN</label>\r\n        <input type="text" class="form-control input-lg" placeholder="PIN" maxlength="255" data-bind="value: paymentGatewayPin, enable: enabled" />\r\n    </div>\r\n    <div class="checkbox" data-bind="visible: paymentGatewayTypeCode() == 2">\r\n        <input type="checkbox" id="debitCardEnabled" data-bind="checked: debitCardEnabled">\r\n        <label for="debitCardEnabled" data-bind="local: \'registerSettings/registerSettingsManage/paymentGateway.debitCardEnabled\'"></label>\r\n    </div>\r\n    <div class="checkbox" data-bind="visible: ebtVisible()">\r\n        <input type="checkbox" id="ebtCardEnabled" data-bind="checked: ebtCardEnabled">\r\n        <label for="ebtCardEnabled" data-bind="local: \'registerSettings/registerSettingsManage/paymentGateway.ebtCardEnabled\'"></label>\r\n    </div>\r\n</div>\r\n';});


define('text!views/registerSettings/registerSettingsList.html',[],function () { return '<div class="pane pane-right">\n\n    <!--ko compose: { model: \'viewmodels/header\' }-->\n    <!--/ko-->\n    <div class="pane-body-wrapper">\n        <div class="pane-body resiter-settings">\n            <div id="messages"></div>\n\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search Register" data-bind="local: \'registerSettings/registerSettingsList.search_register\', localAttr: \'placeholder\'">\r\n\r\n            <input type="button" class="btn btn-lg btn-primary pull-right"\r\n                data-bind="permission: \'ADM\', click: newRegister, local: \'registerSettings/registerSettingsList.new_register\'" />\r\n             <div style="float:left;">\r\n            <div data-bind="compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }"></div>\r\n                 </div>\r\n            <br class="clear" />\r\n\r\n            <div class="table">\n                <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n                <table class="datatable" id="registerSettingsTable">\n                    <thead>\n                        <tr>\n                            <th data-bind="local: \'registerSettings/registerSettingsList.register_name\'"></th>\r\n                            <th data-bind="local: \'registerSettings/registerSettingsList.store\'"></th>\r\n                            <th data-bind="local: \'registerSettings/registerSettingsList.status\'"></th>\r\n                        </tr>\n                    </thead>\n                    <tbody>\n                    </tbody>\n                </table>\n            </div>\n        </div>\n    </div>\n</div>\r\n';});


define('text!views/registerSettings/registerSettingsManage.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/registerSettingsHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body item-list">\r\n            <div class="form wide-form register-settings-form">\r\n                <div class="register-settings-tabs"></div>\r\n                <div id="saveMessages"></div>\r\n\r\n                <div id="generalTab" class="tab-content" data-bind="compose: {\r\n                    model: \'viewmodels/registerSettings/register-settings-tabs/general\',\r\n                    view: \'views/registerSettings/register-settings-tabs/general.html\'\r\n                }"></div>\r\n\r\n                <div id="localizationTab" class="tab-content" data-bind="compose: {\r\n                        model: \'viewmodels/registerSettings/register-settings-tabs/localization\',\r\n                        view: \'views/registerSettings/register-settings-tabs/localization.html\'\r\n                    }"></div>\r\n\r\n                <!-- ko if: cardPaymentInstalled -->\r\n                <div id="paymentGatewayTab" class="tab-content" data-bind="compose: {\r\n                    model: \'viewmodels/registerSettings/register-settings-tabs/paymentGateway\',\r\n                    view: \'views/registerSettings/register-settings-tabs/paymentGateway.html\'\r\n                }"></div>\r\n                <!-- /ko -->\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: $root.save.bind($root), local: \'registerSettings/registerSettingsManage.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: $root.cancel.bind($root), local: \'registerSettings/registerSettingsManage.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/reports/agingReport.html',[],function () { return '<div class="pane pane-right pane-tips">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div id="agingReportMessages"></div>\r\n\r\n            <input class="form-control input-lg pull-left datatable-search" type="text"\r\n                data-bind="value: searchString, valueUpdate: \'input\', local: \'agingReport.searchPlaceholder\', localAttr: \'placeholder\'" />\r\n\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportTableData">\r\n                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>\r\n                    <span data-bind="local: \'shell.exportReport\'"></span>\r\n                </button>\r\n                <a style="display: none" id="agingReportLink"></a>\r\n            </div>\r\n\r\n            <br class="clear">\r\n            \r\n            <div class="aging-stores-filter">\r\n                <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n                <!--/ko-->\r\n            </div>\r\n\r\n            <div class="aging-stores-filter">\r\n                <label data-bind="local: \'inventory/inventoryList.department_filter\'"></label>\r\n                <select data-bind="options: departments, optionsText: \'name\', optionsValue: \'id\', value: lobId, optionsCaption: \'All\'">\r\n                </select>\r\n            </div>\r\n\r\n            <div class="aging-stores-filter">\r\n                <label data-bind="local: \'inventory/inventoryList.category_filter\'"></label>\r\n                <select data-bind="options: categories, optionsText: \'name\', optionsValue: \'id\', value: categoryId, optionsCaption: \'All\'">\r\n                </select>\r\n            </div>\r\n\r\n            <br class="clear">\r\n\r\n            <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n            <table class="datatable" id="agingReportTable" data-bind="visible: !loading()">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'agingReport.id\'"></th>\r\n                        <th data-bind="local: \'agingReport.item\'"></th>\r\n                        <th data-bind="local: \'agingReport.department\'"></th>\r\n                        <th data-bind="local: \'agingReport.category\'"></th>\r\n                        <th data-bind="local: \'agingReport.store\'"></th>\r\n                        <th data-bind="local: \'agingReport.serial\'"></th>\r\n                        <th data-bind="local: \'agingReport.cost\'"></th>\r\n                        <th data-bind="local: \'agingReport.price\'"></th>\r\n                        <th data-bind="local: \'agingReport.received\'"></th>\r\n                        <th data-bind="local: \'agingReport.age\'"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/reports/clockIn.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n\r\n            <div class="row list-filters" data-bind="with: filter">\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <div>\r\n                                <label data-bind="local: \'reports/productMixReport.register_filter\'">Register:</label>\r\n                                </div>\r\n                                <div>\r\n                                <select data-bind="value: registerId, event: { change: $root.filter.apply.bind($root) }">\r\n                                    <option data-bind="attr: { value: \'\' },local: \'reports/productMixReport.all\'">All</option>\r\n                                    <!-- ko foreach: registers -->\r\n                                    <option data-bind="attr: { value: id }, text: name"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                                    </div>\r\n                            </td>\r\n                            <td>\r\n                                 <div>\r\n                                <label data-bind="local: \'reports/productMixReport.employee_filter\'">Employee:</label>\r\n                                     </div>\r\n                                <div>\r\n                                <select data-bind="value: employeeId, event: { change: $root.filter.apply.bind($root) }">\r\n                                    <option data-bind="attr: { value: \'\' }, local: \'reports/productMixReport.all\'">All</option>\r\n                                    <!-- ko foreach: employees -->\r\n                                    <option data-bind="attr: { value: id }, text: nameForShow"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                                </div>\r\n                            </td>\r\n                            <td data-bind="if: storesFilter.storesArr().length > 1">\r\n                                <div>\r\n                                    <label data-bind="local: \'employees/manage-tabs/generalTab.stores\'">Stores:</label>\r\n                                </div>\r\n                                <div style="float:left;">\r\n                                <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n                                <!--/ko-->\r\n                                </div>\r\n                            </td>\r\n                            <td class="padding-top-corrections">\r\n                                <div class="pull-right tips-filter">\r\n                                    <date-filter params="value: dateRange"></date-filter>\r\n                                </div>\r\n                                <div class="report-export-wrapper pull-right">\r\n                                    <button class="btn-report-export" data-bind="click: exportTableData, local: \'shell.exportReport\'">Export report</button>\r\n                                    <i class="fa fa-file-excel-o" aria-hidden="true" data-bind="click: exportTableData"></i>\r\n                                </div>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n       \r\n\r\n            <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n            <div>\r\n            <table class="datatable time-clock" id="productMixReportTable" data-bind="visible: !loading()">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'reports/productMixReport.employee\'">Employee</th>\r\n                        <th data-bind="local: \'reports/productMixReport.timeIn\'">ID</th>\r\n                        <th data-bind="local: \'reports/productMixReport.timeOut\'">ID</th>\r\n                        <th data-bind="local: \'reports/productMixReport.registerIn\'">ID</th>\r\n                        <th data-bind="local: \'reports/productMixReport.register_out\'">ID</th>\r\n                        <th class="th-hours" data-bind="local: \'reports/productMixReport.hours\'">ID</th>\r\n                        <th class="th-empty"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody style="display: none;"></tbody>\r\n                <tbody>\r\n                    <!-- ko foreach: rows -->\r\n                    <tr>\r\n                        <td> \r\n                            <div>\r\n                                <select class="editeble-row" data-bind="options: $root.filter.employees,\r\n                                        optionsText: function (item) { return item.nameForShow; },\r\n                                        optionsValue: function (item) { return item.id; },\r\n                                        value: employee,\r\n                                        valueAllowUnset: true">\r\n                                </select>\r\n                            </div>\r\n                            <div class="fieldError" data-bind="visible: employyeError, text: employyeError"></div>\r\n                        </td>\r\n                        <td>\r\n                            <div>\r\n                                <input readonly="readonly" onkeydown="return false" class="form-control input-lg editeble-row clock-control"\r\n                                    data-bind="datepicker: clockInTime, datepickerOptions: { format: \'MM/DD/YYYY h:mm A\', date: clockInTime(), maxDate: $root.maxDate() }" />\r\n                            </div>\r\n                            <div class="fieldError" data-bind="visible: clockInTimeError, text: clockInTimeError"></div>\r\n                        </td>\r\n                        <td >\r\n                            <div>\r\n                                <input readonly="readonly" onkeydown="return false" class="form-control input-lg editeble-row clock-control"\r\n                                    data-bind="datepicker: clockOutTime, datepickerOptions: { format: \'MM/DD/YYYY h:mm A\', date: clockOutTime() }" />\r\n                            </div>\r\n                            <div class="fieldError" data-bind="visible: clockOutTimeError, text: clockOutTimeError"></div>\r\n                        </td>\r\n                        <td>\r\n                            <div>\r\n                                <select class="editeble-row" data-bind="options: $root.filter.registers,\r\n                                        optionsText: function (item) { return item.name; },\r\n                                        optionsValue: function (item) { return item.id; },\r\n                                        value: clockInRegister,\r\n                                        valueAllowUnset: true">\r\n                                </select>\r\n                             </div>\r\n                            <div class="fieldError" data-bind="visible: registerInError, text: registerInError"></div>\r\n                        </td>\r\n                        <td>\r\n                             <div>\r\n                                <select class="editeble-row" data-bind="options: $root.filter.registers,\r\n                                        optionsText: function (item) { return item.name; },\r\n                                        optionsValue: function (item) { return item.id; },\r\n                                        value: clockOutRegister,\r\n                                        valueAllowUnset: true">\r\n                                </select>\r\n                             </div>\r\n                            <div class="fieldError" data-bind="visible: registerOutError, text: registerOutError"></div>\r\n                        </td>\r\n                        <td class="td-currency">\r\n                            <span data-bind="text: hours"></span>\r\n                        </td>\r\n                        <td class="td-delete-row" data-bind="click: deleteRow">\r\n                            <input type="button" class="delete-row-button" />\r\n                        </td>\r\n                    </tr>\r\n\r\n                    <!-- /ko -->\r\n                </tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <th><input class="modifier-add-button" type="button" data-bind="click: addRecord"></th>\r\n                        <th class="text-right" colspan="4" data-bind="local: \'reports/productMixReport.total\'">Total:</th>\r\n                        <th id="totalCell">&nbsp;</th>\r\n                        <th>&nbsp;</th>\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/reports/productMixReport.html',[],function () { return '<div class="pane pane-right pane-mix-report">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body inventory" data-bind="with: filter">\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" data-bind="local: \'reports/productMixReport.search_item_by_title_or_code\', localAttr: \'placeholder\'">\r\n            <div style="float:left;">\r\n             <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n             <!--/ko-->\r\n            </div>\r\n            <div class="pull-right tips-filter no-margin">\r\n                <date-filter params="value: dateRange"></date-filter>\r\n            </div>\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportTableData, local: \'shell.exportReport\'">Export report</button>\r\n                <i class="fa fa-file-excel-o" aria-hidden="true" data-bind="click: exportTableData"></i>\r\n            </div>\r\n        \r\n            <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n            <div class="row list-filters" data-bind="visible: !loading()">\r\n                <table>\r\n                    <tbody>\r\n                        <tr>\r\n                            <td>\r\n                                <label data-bind="local: \'reports/productMixReport.department_filter\'">Department:</label>\r\n                                <select data-bind="value: departmentId, event: { change: $root.departmentChanged.bind($root) }">\r\n                                    <option value data-bind="local: \'reports/productMixReport.all\'">All</option>\r\n                                    <!-- ko foreach: departments -->\r\n                                    <option data-bind="attr: { value: id }, text: name"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <label data-bind="local: \'reports/productMixReport.category_filter\'">Category:</label>\r\n                                <select data-bind="value: categoryId, event: { change: $root.filter.apply.bind($root) }">\r\n                                    <option value data-bind="local: \'reports/productMixReport.all\'">All</option>\r\n                                    <!-- ko foreach: categories -->\r\n                                    <option data-bind="attr: { value: id }, text: name"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <label data-bind="local: \'reports/productMixReport.register_filter\'">Register:</label>\r\n                                <select data-bind="value: registerId, event: { change: $root.filter.apply.bind($root) }">\r\n                                    <option value data-bind="local: \'reports/productMixReport.all\'">All</option>\r\n                                    <!-- ko foreach: registers -->\r\n                                    <option data-bind="attr: { value: id }, text: name"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                            </td>\r\n                            <td>\r\n                                <label data-bind="local: \'reports/productMixReport.employee_filter\'">Employee:</label>\r\n                                <select data-bind="value: employeeId, event: { change: $root.filter.apply.bind($root) }">\r\n                                    <option value data-bind="local: \'reports/productMixReport.all\'">All</option>\r\n                                    <!-- ko foreach: employees -->\r\n                                    <option data-bind="attr: { value: id }, text: (firstName + \' \' + lastName)"></option>\r\n                                    <!-- /ko -->\r\n                                </select>\r\n                            </td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n            <br class="clear">\r\n\r\n            <table class="datatable" id="productMixReportTable" data-bind="visible: !loading()" style="width:100%">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'reports/productMixReport.id\'" class="w80">ID</th>\r\n                        <th data-bind="local: \'reports/productMixReport.item\'" class="w150">Item</th>\r\n                        <th data-bind="local: \'reports/productMixReport.department\'">Department</th>\r\n                        <th data-bind="local: \'reports/productMixReport.category\'">Category</th>\r\n                        <th data-bind="local: \'reports/productMixReport.register\'">Register</th>\r\n                        <th data-bind="local: \'reports/productMixReport.store\'">Store</th>\r\n                        <th data-bind="local: \'reports/productMixReport.employee\'">Employee</th>\r\n                        <th data-bind="local: \'reports/productMixReport.min_qty\'">Min. Qty</th>\r\n                        <th data-bind="local: \'reports/productMixReport.quantity\'">Quantity</th>\r\n                        <th data-bind="local: \'reports/productMixReport.qty_sold\'">Qty Sold</th>\r\n                        <th data-bind="local: \'reports/productMixReport.gross_sales\'">Gross Sales</th>\r\n                        <th data-bind="local: \'reports/productMixReport.netSales\'">Net Sales</th>\r\n                        <th data-bind="local: \'reports/productMixReport.taxAmount\'">Tax Amount</th>\r\n                   \r\n                    </tr>\r\n                </thead>\r\n                <tfoot>\r\n                    <tr>\r\n                        <th class="text-right" colspan="7" data-bind="local: \'reports/productMixReport.total\'">Total:</th>\r\n                        <th class="text-right"></th>\r\n                        <th class="text-right"></th>\r\n                        <th class="text-right"></th>\r\n                        <th class="text-right"></th>\r\n                        <th class="text-right"></th>\r\n                        <th class="text-right"></th>\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/reports/serialItemTracking.html',[],function () { return '<div class="pane pane-right pane-tips">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper" data-bind="click: hideMultipleResult">\r\n        <div class="pane-body inventory">\r\n            <div id="serialItemTrackingMessages"></div>\r\n            <input class="form-control input-lg datatable-search pull-left" type="text"\r\n                   data-bind="value: serialNo, local: \'serialItemTracking.serialNo\', localAttr: \'placeholder\'" />\r\n            &nbsp;\r\n            <button class="btn btn-lg btn-primary" type="button" data-bind="click: search, disable: loading(), local: \'serialItemTracking.submit\'"></button>\r\n            <select size="2" class="lookup-result"\r\n                    data-bind="visible: multipleResult().length, options: multipleResult, optionsText: \'name\', optionsValue: \'id\', value: selectedResult">\r\n            </select>\r\n\r\n            <div class="loader-container" data-bind="visible: loading()" style="position: absolute; top: 90px"></div>\r\n\r\n            <br class="clear" /><br />\r\n\r\n            <p>\r\n                <strong data-bind="local: \'serialItemTracking.productId\'">Product ID:</strong>\r\n                <span data-bind="text: productCode"></span>\r\n            </p>\r\n\r\n            <p>\r\n                <strong data-bind="local: \'serialItemTracking.productName\'">Product Name:</strong>\r\n                <span data-bind="text: productName"></span>\r\n            </p>\r\n\r\n            <p>\r\n                <strong data-bind="local: \'serialItemTracking.serialItemId\'">Serial Item ID:</strong>\r\n                <span data-bind="text: productCode"></span>\r\n            </p>\r\n\r\n            <table class="datatable dataTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'serialItemTracking.action\'"></th>\r\n                        <th data-bind="local: \'serialItemTracking.date\'"></th>\r\n                        <th data-bind="local: \'serialItemTracking.from\'"></th>\r\n                        <th data-bind="local: \'serialItemTracking.to\'"></th>\r\n                        <th data-bind="local: \'serialItemTracking.amount\'"></th>\r\n                        <th data-bind="local: \'serialItemTracking.employee\'"></th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody data-bind="foreach: trackingData">\r\n                    <tr>\r\n                        <td data-bind="local: \'serialItemTracking.\' + $data.action"></td>\r\n                        <td data-bind="text: $root.formatDateTime($data.date)"></td>\r\n                        <td data-bind="text: from"></td>\r\n                        <td data-bind="text: to"></td>\r\n                        <td data-bind="text: $data.amount === null ? \'\' : $root.formatCurrency($data.amount)"></td>\r\n                        <td data-bind="text: employee"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/reports/taxReport.html',[],function () { return '<div class="pane pane-right pane-tax">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body" style="margin-top:3px;">\r\n            <div id="taxReportMessages"></div>\r\n            <div style="float:left;margin-left:-15px;">\n             <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\n             <!--/ko-->\r\n            </div>\r\n            <div  style="float:left;">\r\n                <div style="float:left;" class="stores-filter-label-wrapper">\r\n                    <label data-bind="local: \'taxReport.taxAgency2\'"></label>\r\n                    </div>\r\n                <div style="float:left;">\r\n                    <select data-bind="options: agancies, optionsText: \'name\', optionsValue: \'id\', value: agancyId, optionsCaption: \'All\'"></select>\r\n                </div>\r\n                </div>\r\n            <date-filter params="value: dateRange"></date-filter>\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportTableData, local: \'shell.exportReport\'">Export report</button>\r\n                <i class="fa fa-file-excel-o" aria-hidden="true" data-bind="click: exportTableData"></i>\r\n                <a style="display: none" id="taxReportLink"></a>\r\n            </div>\r\n\r\n            <br class="clear">\r\n\r\n            <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n            <div data-bind="visible: !loading()" class="mt30">\r\n                <p>\r\n                    <span data-bind="local: \'taxReport.totalSales\'" id="txt-total-sales"></span>:\r\n                    <strong data-bind="currency: totalSales" id="txt-total-sales-value"></strong>\r\n                </p>\r\n                <p>\r\n                    <span data-bind="local: \'taxReport.nonTaxableAmount\'" id="txt-non-taxable"></span>:\r\n                    <strong data-bind="currency: nonTaxableAmount" id="txt-non-taxable-value"></strong>\r\n                </p>\r\n\r\n                <table id="tax-report-table" class="datatable dataTable">\r\n                    <thead>\r\n                        <tr>\r\n                            <th data-index="0" data-bind="local: \'taxReport.taxName\', click : sortClick" class="sorting_asc"></th>\r\n                            <th data-index="1" data-bind="local: \'taxReport.taxRate\', click : sortClick"></th>\r\n                            <th data-index="2" data-bind="local: \'taxReport.taxableAmount\', click : sortClick"></th>\r\n                            <th data-index="3" data-bind="local: \'taxReport.taxCollected\', click : sortClick"></th>\r\n                            <th data-index="4" data-bind="local: \'taxReport.taxAgency\', click : sortClick"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody data-bind="foreach: lines">\r\n                        <tr>\r\n                            <td>\r\n                                <div style="float:left;" class="tax-child" data-bind="visible: parentTaxId != null">&nbsp;</div>\r\n                                <div style="float:left; margin-left: 7px;" data-bind="text: taxName"></div>\r\n\r\n                            </td>\r\n                            <td>\r\n                                <span data-bind="text: taxRate"></span>%\r\n                            </td>\r\n                            <td data-bind="currency: taxableAmount"></td>\r\n                            <td data-bind="currency: taxCollected"></td>\r\n                            <td data-bind="text: taxAgencyName"></td>\r\n                        </tr>\r\n                    </tbody>\r\n                    <tbody>\r\n                        <tr class="report-total">\r\n                            <td colspan="3"><span data-bind="local: \'taxReport.total\'"></span>:</td>\r\n                            <td data-bind="currency: taxCollected"></td>\r\n                            <td >&nbsp;</td>\r\n                        </tr>\r\n                    </tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/reports/transactionsReport.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n            <div class="form tran-report-form" data-bind="visible: !loading()">\r\n                <span data-bind="text: errorMessage" class="fieldError"></span>\r\n                <form method="post" action="csvreport/tranreport" novalidate data-bind="attr: { target: isIOS ? \'_blank\' : null }">\r\n                    <input name="csvHeaders" type="hidden" data-bind="value: csvHeaders" />\r\n                    <input name="csvLocalization" type="hidden" data-bind="value: JSON.stringify(csvLocalization)" />\r\n                    <input name="enterpriseId" type="hidden" data-bind="value: enterpriseId" />\r\n                    <input name="utcOffset" type="hidden" data-bind="value: utcOffset" />\r\n                    <input name="stores" type="hidden" data-bind="value: storesJSON" />\r\n                    <div class="form-group">\r\n                        <label data-bind="local: \'reports/transactionReport.customer\'">Customer</label>\r\n                        <select name="customerId" class="select" data-bind="options: customers, optionsText: \'displayName\', optionsValue: \'id\', optionsCaption: \'All\', value: customerId">\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class="form-group">\r\n                        <label data-bind="local: \'reports/transactionReport.employee\'">Employee</label>\r\n                        <select name="employeeId" class="select" data-bind="options: employees, optionsText: \'displayName\', optionsValue: \'id\', optionsCaption: \'All\', value: employeeId">\r\n                        </select>\r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label data-bind="local: \'reports/transactionReport.stores\'">Stores</label>\r\n                        <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n                        <!--/ko-->                   \r\n                    </div>\r\n                    <div class="form-group">\r\n                        <label data-bind="local: \'reports/transactionReport.register\'">Register</label>\r\n                        <select name="registerId" class="select" data-bind="options: registers, optionsText: \'name\', optionsValue: \'id\', optionsCaption: \'All\', value: registerId">\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class="form-group tran-report-period">\r\n                        <label data-bind="local: \'reports/transactionReport.period\'">Period</label>\r\n                        <date-filter params="value: dateRange"></date-filter>\r\n                        <input name="dateFrom" type="hidden" data-bind="value: dateFrom" />\r\n                        <input name="dateTo" type="hidden" data-bind="value: dateTo" />\r\n                    </div>\r\n\r\n                    <div class="form-group row amount-range">\r\n                        <div class="col-xs-12">\r\n                            <label data-bind="local: \'reports/transactionReport.amountRange\'">Amount range</label>\r\n                        </div>\r\n                        <div class="col-xs-6">\r\n                            <label data-bind="local: \'reports/transactionReport.from\'">From</label>\r\n                            <input name="amountFrom" class="form-control input-lg" type="text" placeholder="From" maxlength="10"\r\n                                data-bind="value: amountFrom, keydown: checkInputValue" />\r\n                        </div>\r\n                        <div class="col-xs-6">\r\n                            <label data-bind="local: \'reports/transactionReport.to\'">To</label>\r\n                            <input name="amountTo" class="form-control input-lg" type="text" placeholder="To" maxlength="10"\r\n                                data-bind="value: amountTo, keydown: checkInputValue" />\r\n                        </div>\r\n                    </div>\r\n\r\n                    <div class="form-group">\r\n                        <label data-bind="local: \'reports/transactionReport.format\'">Format</label>\r\n                        <select name="reportFormat" class="select" data-bind="options: reportFormats, optionsText: \'name\', optionsValue: \'value\', value: reportFormat">\r\n                        </select>\r\n                    </div>\r\n\r\n                    <div class="form-buttons">\r\n                        <button class="btn btn-lg btn-primary export-report-button" type="submit" data-bind="click: beforeSubmit, local: \'reports/transactionReport.export\'">Export</button>\r\n                    </div>\r\n        \r\n                </form>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>';});


define('text!views/resetPassword.html',[],function () { return '<div class="form-signin">\r\n    <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png">\r\n    <h2 style="text-align: center" data-bind="text: title, local: \'resetPassword.title\' "></h2>\r\n\r\n    <div id="resetPasswordMessage"></div>\r\n\r\n    <div class="form-group">\r\n        <input id="trdrtPasswordEmail" class="form-control input-lg" type="text" autocomplete="off" placeholder="Email" maxlength="200"\r\n               data-bind="value: email, local: \'resetPassword.enterEmail\', localAttr: \'placeholder\', disable: isLoading">\r\n    </div>\r\n\r\n    <p class="error-message" data-bind="html: errorMessage"></p>\r\n\r\n    <div class="form-buttons">\r\n        <input class="btn btn-lg btn-primary" type="button" value="Continue"\r\n               data-bind="click: resetPassword, local: \'resetPassword.reset\', disable: isLoading, css: { loading: isLoading }">\r\n    </div>\r\n</div>\r\n\r\n<span class="version"></span>';});


define('text!views/setPassword.html',[],function () { return '<div class="form-signin">\r\n    <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png">\r\n    <h2 style="text-align: center" data-bind="text: title, local: \'setPassword.title\' "></h2>\r\n    \r\n    <div class="form-group">\r\n        <input id="setEmail" class="form-control input-lg" type="text" autocomplete="off" placeholder="Email" maxlength="200" \r\n               data-bind="value: loginData.email, local: \'account.email\', localAttr: \'placeholder\', enable: loginData.emailEditable">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <input id="setPassword" class="form-control input-lg" type="password" autocomplete="off" placeholder="Password" maxlength="100"\r\n               data-bind="value: loginData.password, local: \'setPassword.createPassword\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <input id="setConfirmPassword" class="form-control input-lg" type="password" autocomplete="off" placeholder="Password" maxlength="100"\r\n               data-bind="value: loginData.confirmPassword, local: \'setPassword.confirmPassword\', localAttr: \'placeholder\'">\r\n    </div>\r\n    <p class="error-message" data-bind="text: errorMessage"></p>\r\n\r\n    \r\n    <div class="form-buttons">\r\n        <input class="btn btn-lg btn-primary" type="button" data-bind="click: setPassword, local: \'setPassword.submit\'">\r\n    </div>\r\n\r\n</div>\r\n\r\n<span class="version"></span>';});


define('text!views/shell.html',[],function () { return '<div class="main-container">\n    <div data-bind="visible: isLoading" class="loader-container"></div>\n    <!-- ko if: authorized -->\n    <div data-bind="compose:\'viewmodels/navigationpanel\'"></div>\n    <!-- /ko -->\n    <section id="content" data-bind="router: { cacheViews: isCachable() }" class="hide-content"></section>\n</div>\n';});


define('text!views/shifts/shift.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="form shift-details-from">\r\n\r\n                <div data-bind="with: shift">\r\n                    <div id="messages"></div>\r\n\r\n                    <div class="row shift-header">\r\n                        <div class="col-xs-2 col-md-2">\r\n                            <span data-bind="local: \'shifts/shift.register\'">Register: &nbsp;</span>\r\n\r\n                            <span data-bind="text: register"></span>\r\n                        </div>\r\n                        <div class="col-xs-2 col-md-2 center">\r\n                            <span data-bind="local: \'shifts/shift.opened\'">Opened: &nbsp;</span>\r\n\r\n                            <span data-bind="text: $root.formatDate(opened)"></span>\r\n                        </div>\r\n                        <div class="col-xs-2 col-md-2 center">\r\n                            <span data-bind="local: \'shifts/shift.opened_by\'">Opened by: &nbsp;</span>\r\n\r\n                            <span data-bind="text: openedBy"></span>\r\n                        </div>\r\n                        <div class="col-xs-2 col-md-2 center">\r\n                            <span data-bind="local: \'shifts/shift.closed\'">Closed: &nbsp;</span>\r\n\r\n                            <span data-bind="text: $root.formatDate(closed)"></span>\r\n                        </div>\r\n                        <div class="col-xs-2 col-md-2 center">\r\n                            <span data-bind="local: \'shifts/shift.closed_by\'">Closed by: &nbsp;</span>\r\n\r\n                            <span data-bind="text: closedBy"></span>\r\n                        </div>\r\n                        <div class="col-xs-2 col-md-2 right">\r\n                            <span data-bind="local: \'shifts/shift.transactions\'">Transactions: &nbsp;</span>\r\n\r\n                            <span data-bind="text: transactions"></span>\r\n                        </div>\r\n                    </div>\r\n\r\n\r\n\r\n                    <div class="row">\r\n                        <div class="col-xs-4 col-md-4 shift-column">\r\n                            <div>\r\n                                <div class="row nopadding title" data-bind="local: \'shifts/shift.cash\'">\r\n                                    Cash\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.opening_amount\'">Opening Amount:&nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: openingAmount"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.cash_sales\'">Cash Sales: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: cashSales"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.cash_refunds\'">Cash Refunds: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: cashRefunds"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.payins\'">Payins: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: payins"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.payouts\'">Payouts: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: payouts"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.closing_amount\'">Closing Amount: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: closingAmount"></div>\r\n                                </div>\r\n\r\n                                <hr>\r\n\r\n                                <div class="row nopadding bold">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.variance\'">Variance: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: variance"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <div class="col-xs-4 col-md-4 shift-column">\r\n                            <div>\r\n                                <div class="row nopadding title" data-bind="local: \'shifts/shift.revenue\'">\r\n                                    Revenue\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.sales\'">Sales:&nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: sales"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.discounts\'">Discounts: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: discounts"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.refunds\'">Refunds: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: refunds"></div>\r\n                                </div>\r\n\r\n                                <hr>\r\n\r\n                                <div class="row nopadding bold">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.net_sales\'">Net Sales: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: netSales"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.tips\'">Tips: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: tips"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.tax\'">Tax: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: tax"></div>\r\n                                </div>\r\n\r\n                                <hr>\r\n\r\n                                <div class="row nopadding bold">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.total_tendered\'">Total Tendered: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: totalTendered"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <div class="col-xs-4 col-md-4 pull-right shift-column">\r\n                            <div>\r\n                                <div class="row nopadding title" data-bind="local: \'shifts/shift.tender_breakdown\'">\r\n                                    Tender Breakdown\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.cash\'">Cash: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: tenderBreakdownCash"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.credit_card\'">Credit Card: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: tenderBreakdownCreditCard"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.debit_card\'">Debit Card: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: tenderBreakdownDebitCard"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.ebt_card\'">EBT Card: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: tenderBreakdownEbtCard"></div>\r\n                                </div>\r\n\r\n                                <div class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.ebt_food\'">EBT Food Stamp: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: tenderBreakdownEbtCardFood"></div>\r\n                                </div>\r\n\r\n                                <div data-bind="if: externalPaymentVisible" class="row nopadding">\r\n                                    <p class="shift-item-text" data-bind="local: \'shifts/shift.external_payment\'">External Payment: &nbsp;</p>\r\n                                    <div class="shift-item-value" data-bind="currency: external"></div>\r\n                                </div>\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n\r\n                    <br class="clear">\r\n                </div>\r\n\r\n                <div id="notesAccordion" data-bind="with: shift" class="row">\r\n                  <div role="tablist" aria-multiselectable="true">\r\n                      <div class="card" data-bind="if: payinNotes && payinNotes.notes && payinNotes.notes.length > 0">\r\n                          <a class="card-header" role="tab" id="hdngOne" href="#payinNotes" data-toggle="collapse" aria-expanded="false" data-parent="#notesAccordion">\r\n                              <h5 class="mb-0">\r\n                                  Payin notes\r\n                                  <i class="card-header__arrow"></i>\r\n                              </h5>\r\n                          </a>\r\n                          <div id="payinNotes" class="collapse" role="tabpanel" aria-labelledby="hdngOne">\r\n                              <div class="card-block">\r\n                                  <table class="datatable">\r\n                                      <thead>\r\n                                          <tr>\r\n                                              <th>Date</th>\r\n                                              <th>Employee</th>\r\n                                              <th>Note</th>\r\n                                          </tr>\r\n                                      </thead>\r\n                                      <tbody data-bind="foreach: payinNotes.notes">\r\n                                          <tr>\r\n                                              <td data-bind="text: $root.formatDate(date)"></td>\r\n                                              <td data-bind="text: employee"></td>\r\n                                              <td data-bind="text: text"></td>\r\n                                          </tr>\r\n                                      </tbody>\r\n                                  </table>\r\n                              </div>\r\n                          </div>\r\n                      </div>\r\n                      <div class="card" data-bind="if: payoutNotes && payoutNotes.notes && payoutNotes.notes.length > 0">\r\n                          <a class="card-header" role="tab" id="hdngTwo" href="#payoutNotes" data-toggle="collapse" aria-expanded="false" data-parent="#notesAccordion">\r\n                              <h5 class="mb-0">\r\n                                  Payout notes\r\n                                  <i class="card-header__arrow"></i>\r\n                              </h5>\r\n                          </a>\r\n                          <div id="payoutNotes" class="collapse" role="tabpanel" aria-labelledby="hdngTwo">\r\n                              <div class="card-block">\r\n                                  <table class="datatable">\r\n                                      <thead>\r\n                                          <tr>\r\n                                              <th>Date</th>\r\n                                              <th>Employee</th>\r\n                                              <th>Note</th>\r\n                                          </tr>\r\n                                      </thead>\r\n                                      <tbody data-bind="foreach: payoutNotes.notes">\r\n                                          <tr>\r\n                                              <td data-bind="text: $root.formatDate(date)"></td>\r\n                                              <td data-bind="text: employee"></td>\r\n                                              <td data-bind="text: text"></td>\r\n                                          </tr>\r\n                                      </tbody>\r\n                                  </table>\r\n                              </div>\r\n                          </div>\r\n                      </div>\r\n                  </div>\r\n                </div>\r\n\r\n                <div class="form-buttons center">\r\n                    <input class="btn btn-lg btn-primary uppercase" type="button" value="Back" data-keypress="Back" data-bind="click: back, local: \'shifts/shift.back\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/shifts/shiftsList.html',[],function () { return '<div class="pane pane-right pane-shifts">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body shifts">\r\n            <div id="messages"></div>\r\n            <date-filter params="value: dateRange"></date-filter>\r\n            <div style="margin-left:-40px; float:left;">\r\n             <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n             <!--/ko-->\r\n             </div>\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportTableData, local: \'shell.exportReport\'">Export report</button>\r\n                <i class="fa fa-file-excel-o" aria-hidden="true" data-bind="click: exportTableData"></i>\r\n            </div>\r\n\r\n            <br class="clear">\r\n\r\n            <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n            <table class="datatable" id="shiftsTable" data-bind="visible: !loading()">\r\n                <thead>\r\n                    <tr>\r\n                        <th class="center" data-bind="local: \'shifts/shiftsList.register\'">Register</th>\r\n                          <th class="center" data-bind="local: \'shifts/shiftsList.store\'">Store</th>\r\n                        <th class="center" data-bind="local: \'shifts/shiftsList.opened\'">Opened</th>\r\n                        <th class="center" data-bind="local: \'shifts/shiftsList.closed\'">Closed</th>\r\n                        <th class="center" data-bind="local: \'shifts/shiftsList.transactions\'">Transactions</th>\r\n                        <th class="center" data-bind="local: \'shifts/shiftsList.total_tendered\'">Total Tendered</th>\r\n                        <th class="center" data-bind="local: \'shifts/shiftsList.variance\'">Variance</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/smartLogin.html',[],function () { return '<div class="loading">\r\n    <span class="version"></span>\r\n</div>';});


define('text!views/ssoLogin.html',[],function () { return '<div class="loading">\r\n    <span class="version"></span>\r\n</div>';});


define('text!views/storeTransfer/storeTransfer.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/storeTransferHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body inventory" data-bind="css: { loading: isLoading() }">\r\n        <!-- ko if: isStoreTransferEnabled -->\r\n            <div data-bind="visible: !isLoading()">\r\n                <table class="inventory-transfer-options">\r\n                    <tr>\r\n                        <td class="inventory-transfer-options-label" data-bind="local: \'storeTransfer.storeOut\'"></td>\r\n                        <td><select data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: storeOutId"></select></td>\r\n                        <td class="inventory-transfer-options-label" data-bind="local: \'storeTransfer.storeIn\'"></td>\r\n                        <td><select data-bind="options: storesIn, optionsText: \'storeName\', optionsValue: \'id\', value: storeInId"></select></td>\r\n                        <td class="inventory-transfer-options-label" data-bind="local: \'poReceiving.refNum\'"></td>\r\n                        <td><input data-bind="value: refNum" maxlength="30" class="form-control input-lg store-transfer-refnum" type="text" /></td>\r\n                        <td class="inventory-transfer-search">\r\n                            <input class="form-control input-lg datatable-search scannerInput" type="text"\r\n                                data-bind="value: searchString, valueUpdate: \'input\', event: { blur: cancelSearch }, local: \'storeTransfer.search\', localAttr: \'placeholder\'">\r\n                            <div class="panel panel-default" data-bind="visible: isSearchOpened()">\r\n                                <ul class="panel-body" data-bind="foreach: foundProducts">\r\n                                    <li data-bind="text: $data.name, click: $root.addLine.bind($root)"></li>\r\n                                </ul>\r\n                            </div>\r\n                        </td>\r\n                        <td class="inventory-transfer-options-label">\r\n                            <input type="checkbox" id="storeTransferFullList" data-bind="checked: fullList" />\r\n                            <label for="storeTransferFullList" data-bind="local: \'storeTransfer.showFullList\'"></label>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n\r\n                <div id="storeTransferMessage"></div>\r\n\r\n                <div class="min-table-width-wrapper">\r\n                    <table class="datatable dataTable min-table-width inventory-transfer-list" role="grid">\r\n                        <thead>\r\n                            <tr role="row">\r\n                                <th data-bind="local: \'storeTransfer.id\'" class="product-id"></th>\r\n                                <th data-bind="local: \'storeTransfer.name\'" class="product-name"></th>\r\n                                <th data-bind="local: \'storeTransfer.upc\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.sku\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.cost\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.storeOutQuantity\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.storeInQuantity\'"></th>\r\n                                <th data-bind="local: \'storeTransfer.transferQuantity\'"></th>\r\n                                <th data-bind="visible: !$root.fullList()" style="width: 80px"></th>\r\n                            </tr>\r\n                        </thead>\r\n                        <tbody data-bind="visible: !fullList() && inventoryTransferLines().length === 0">\r\n                            <tr>\r\n                                <td colspan="9" class="start-search-message" data-bind="local: \'storeTransfer.startSearch\'"></td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <!-- ko foreach: inventoryTransferLines -->\r\n                        <tbody data-bind="visible: !$root.fullList() || ($root.lineVisible($data) && (!$data.parent || $data.parent.expanded()))">\r\n                            <tr data-bind="visible: visible, click: $root.expandLine, css: { open: $data.expanded() }">\r\n                                <td class="product-id">\r\n                                    <!-- ko if: ($data.inventoryType === 1 || $data.child) && $root.fullList() -->\r\n                                    <span class="expand-icon"></span>\r\n                                    <!-- /ko -->\r\n                                    <span data-bind="text: $data.productCode, visible: showProductCode"></span>\r\n                                </td>\r\n                                <td data-bind="text: $data.name" class="product-name force-wrap"></td>\r\n                                <td data-bind="text: $data.upc"></td>\r\n                                <td data-bind="text: $data.sku"></td>\r\n                                <td>\r\n                                    <span data-bind="currency: $data.cost, visible: showCost"></span>\r\n                                </td>\r\n                                <td>\r\n                                    <span data-bind="text: $data.storeOutQuantity, visible: showQuantities "></span>\r\n                                </td>\r\n                                <td>\r\n                                    <span data-bind="text: $data.storeInQuantity, visible: showQuantities "></span>\r\n                                </td>\r\n                                <td style="white-space: initial">\r\n                                    <input type="number" class="form-control input"\r\n                                           data-bind="value: $data.transferQuantity, valueUpdate: \'input\', event: { keypress: $root.qtyKeyPress },\r\n                                           visible: showQuantity, enable: quantityEditable " />\r\n                                </td>\r\n                                <td data-bind="visible: !$root.fullList()">\r\n                                    <input type="button" class="delete-row-button" data-bind="click: $root.deleteRow">\r\n                                </td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <!-- ko if: $data.inventoryType === 1 -->\r\n                        <tbody class="po-receiving-serial" data-bind="visible: !$root.fullList() || ($data.expanded() && $root.lineVisible($data))">\r\n                            <!-- ko foreach: $data.selectedSerials -->\r\n                            <tr>\r\n                                <td></td>\r\n                                <td colspan="4">\r\n                                    <input type="text" class="form-control input-lg" maxlength="50" readonly="readonly"\r\n                                           data-bind="value: serialNo, local: \'inventory/inventory-manage-tabs/serials.serialNo\', localAttr: \'placeholder\'" />\r\n                                </td>\r\n                                <td>\r\n                                    <input type="button" class="delete-row-button" data-bind="click: $root.removeSerial.bind($parent)">\r\n                                </td>\r\n                                <td colspan="2"></td>\r\n                            </tr>\r\n                            <!-- /ko -->\r\n                            <tr>\r\n                                <td></td>\r\n                                <td colspan="4">\r\n                                    <select \r\n                                            data-bind="attr: {id: \'ddlSerials_\' + itemId, dataid: itemId}, options: filteredSerials,\r\n                                                optionsText: \'serialNo\',\r\n                                                optionsValue: \'serialNo\',\r\n                                                multipleSelect: filteredSerials,\r\n                                                selectedElements: selectedSerials,\r\n                                                multipleSelectOptions: $root.setupSerialsMultiSelect()\r\n                                    "></select>\r\n                                </td>\r\n                                <td colspan="3"></td>\r\n                            </tr>\r\n                        </tbody>\r\n                        <!-- /ko -->\r\n                        <!-- /ko -->\r\n                    </table>\r\n\r\n                    <div class="dataTables_wrapper" data-bind="visible: fullList() && pagination().length > 1">\r\n                        <div class="dataTables_paginate paging_simple_numbers">\r\n                            <a class="paginate_button previous" data-dir="previous"\r\n                               data-bind="css: { disabled: pagination()[0] && pagination()[0].current }, click: $root.gotoPage, local: \'storeTransfer.previous\'">\r\n                            </a>\r\n                            <span data-bind="foreach: pagination">\r\n                                <!-- ko if: $data.afterGap -->\r\n                                <span>…</span>\r\n                                <!-- /ko -->\r\n                                <a class="paginate_button" data-bind="text: pageNo, css: { current: $data.current }, click: $root.gotoPage"></a>\r\n                                <!-- ko if: $data.beforeGap -->\r\n                                <span>…</span>\r\n                                <!-- /ko -->\r\n                            </span>\r\n                            <a class="paginate_button next" data-dir="next"\r\n                               data-bind="css: { disabled: pagination().length && pagination()[pagination().length - 1].current }, click: $root.gotoPage, local: \'storeTransfer.next\'">\r\n                            </a>\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-bind="enable: inventoryTransferLines().length, click: transfer, local: \'storeTransfer.transfer\'"\r\n                        class="btn btn-lg btn-primary" type="button">\r\n                    <input data-bind="click: activate, local: \'storeTransfer.cancel\'"\r\n                        class="btn btn-lg btn-default" type="button">\r\n\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n        <!-- ko ifnot: isStoreTransferEnabled -->\r\n            <div class="text-center">\r\n                <p class="lead" data-bind="local: \'storeTransfer.storeTransferForbidden\'" style="margin-bottom: 40px; margin-top: 60px"></p>\r\n                <a href="#new-store" class="btn btn-lg btn-primary" data-bind="local:\'stores/storesList.new_store\'"></a>\r\n            </div>\r\n        <!-- /ko -->\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/storeTransfer/storeTransferDetails.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body inventory">\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportTableData" style="padding: 0 15px">\r\n                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>\r\n                    <span data-bind="local: \'shell.exportReport\'"></span>\r\n                </button>\r\n                <a style="display: none" id="storeTransferDetailsLink"></a>\r\n            </div>\r\n            <br class="clear" /><br />\r\n            <div id="storeTransferDetailsMessage"></div>\r\n            <table class="store-transfer-attr">\r\n                <tr>\r\n                    <td data-bind="visible: !model.vendor()">\r\n                        <span data-bind="local: \'storeTransfer.storeTransferId\'"></span>\r\n                        <span data-bind="text: model.code"></span>\r\n                    </td>\r\n                    <td data-bind="visible: model.vendor()">\r\n                        <span data-bind="local: \'poReceiving.poReceivingId\'"></span>\r\n                        <span data-bind="text: model.code"></span>\r\n                    </td>\r\n                    <td>\r\n                        <span data-bind="local: \'poReceiving.refNum\'"></span>\r\n                        <span data-bind="text: model.refNum"></span>\r\n                    </td>\r\n                    <td data-bind="visible: model.vendor()">\r\n                        <span data-bind="local: \'poReceiving.vendor\'"></span>\r\n                        <span data-bind="text: model.vendor"></span>\r\n                    </td>\r\n                    <td data-bind="visible: model.storeOut()">\r\n                        <span data-bind="local: \'storeTransfer.storeOut\'"></span>\r\n                        <span data-bind="text: model.storeOut"></span>\r\n                    </td>\r\n                    <td>\r\n                        <span data-bind="local: \'storeTransfer.storeIn\'"></span>\r\n                        <span data-bind="text: model.storeIn"></span>\r\n                    </td>\r\n                    <td>\r\n                        <span data-bind="local: \'storeTransfer.date\'"></span>\r\n                        <span data-bind="text: model.date"></span>\r\n                    </td>\r\n                    <td>\r\n                        <span data-bind="local: \'storeTransfer.employee\'"></span>\r\n                        <span data-bind="text: model.employee"></span>\r\n                    </td>\r\n                </tr>\r\n            </table>\r\n\r\n            <table class="datatable dataTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'storeTransfer.id\'"></th>\r\n                        <th data-bind="local: \'storeTransfer.name\'"></th>\r\n                        <th data-bind="local: \'storeTransfer.upc\'"></th>\r\n                        <th data-bind="local: \'storeTransfer.sku\'"></th>\r\n                        <th data-bind="local: \'storeTransfer.cost\'"></th>\r\n                        <th>\r\n                            <span data-bind="visible: !model.vendor(), local: \'storeTransfer.transferQuantity\'"></span>\r\n                            <span data-bind="visible: model.vendor(), local: \'poReceiving.receivedQuantity\'"></span>\r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody data-bind="foreach: model.inventoryTransferLines">\r\n                    <tr>\r\n                        <td>\r\n                            <span data-bind="text: $data.productCode, visible: $data.parentLineId == null  "></span>\r\n                        </td>\r\n                        <td data-bind="text: $data.name"></td>\r\n                        <td data-bind="text: $data.upc"></td>\r\n                        <td data-bind="text: $data.sku"></td>\r\n                        <td data-bind="currency: $data.cost, visible:$data.productType == 0"></td>\r\n                        <td data-bind="visible:$data.productType != 0"></td>\r\n                        <td data-bind="text: $data.transferQuantity, visible:$data.productType == 0"></td>\r\n                        <td data-bind="visible:$data.productType != 0"></td>\r\n                    </tr>\r\n                </tbody>\r\n            </table>\r\n\r\n            <div class="form-buttons">\r\n                <input data-bind="click: model.back, local: \'storeTransfer.back\'" class="btn btn-lg btn-primary" type="button" value="Back">\r\n            </div>\r\n\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/storeTransfer/storeTransfersReport.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body inventory" id="storeTransfersReport" data-bind="css: { loading: isLoading() }">\r\n            <input class="form-control input-lg datatable-search pull-left" type="text"\r\n                data-bind="value: searchString, valueUpdate: \'input\', local: \'storeTransfer.search\', localAttr: \'placeholder\'">\r\n        \r\n            <date-filter params="value: dateRange"></date-filter>\r\n\r\n            <div class="report-export-wrapper pull-right" data-bind="visible: reportMode() === \'POReceiving\'">\r\n                <button class="btn-report-export" data-bind="click: exportTableData" style="padding: 0 15px">\r\n                    <i class="fa fa-file-excel-o" aria-hidden="true"></i>\r\n                    <span data-bind="local: \'shell.exportReport\'"></span>\r\n                </button>\r\n                <a style="display: none" id="storeTransferReportLink"></a>\r\n            </div>\r\n\r\n            <div class="report-export-wrapper pull-right" data-bind="visible: reportMode() === \'StoreTransfer\'">\r\n                <div class="btn-group">\r\n                    <button type="button" class="btn dropdown-toggle btn-report-export"\r\n                            data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">\r\n                        <i class="fa fa-file-excel-o" aria-hidden="true"></i>\r\n                        <span data-bind="local: \'shell.exportReport\'"></span>\r\n                        <b class="caret"></b>\r\n                    </button>\r\n                    <ul class="dropdown-menu">\r\n                        <li><a data-bind="local: \'storeTransfer.exportList\', click: exportTableData"></a></li>\r\n                        <li><a data-details="true" data-bind="local: \'storeTransfer.exportListWithDetails\', click: exportTableData"></a></li>\r\n                    </ul>\r\n                </div>\r\n            </div>\r\n\r\n            <br class="clear" />\r\n\r\n            <div data-bind="visible: !isLoading()">\r\n                <table class="inventory-transfer-options po-receiving-options">\r\n                    <tr>\r\n                        <td data-bind="visible: reportMode() === \'POReceiving\'">\r\n                            <label data-bind="local: \'poReceiving.vendor\'"></label>\r\n                            <select data-bind="options: vendors, optionsText: \'name\', optionsValue: \'id\', value: vendorId">\r\n                            </select>\r\n                        </td>\r\n                        <td data-bind="visible: reportMode() === \'StoreTransfer\'">\r\n                            <label data-bind="local: \'storeTransfer.storeOut\'"></label>\r\n                            <select data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: storeOutId">\r\n                            </select>\r\n                        </td>\r\n                        <td>\r\n                            <label data-bind="local: \'storeTransfer.storeIn\'"></label>\r\n                            <select data-bind="options: stores, optionsText: \'storeName\', optionsValue: \'id\', value: storeInId">\r\n                            </select>\r\n                        </td>\r\n                        <td>\r\n                            <label data-bind="local: \'storeTransfer.employee\'"></label>\r\n                            <select data-bind="options: employees, optionsText: \'name\', optionsValue: \'id\', value: employeeId">\r\n                            </select>\r\n                        </td>\r\n                    </tr>\r\n                </table>\r\n\r\n                <div id="storeTransfersReportMessage"></div>\r\n\r\n                <table class="datatable" id="storeTransfersReportTable"\r\n                    data-bind="css: { \'store-transfer-mode\': reportMode() === \'StoreTransfer\', \'po-receiving-mode\': reportMode() === \'POReceiving\' }">\r\n                    <thead>\r\n                        <tr>\r\n                            <th style="width: 80px" data-bind="local: \'storeTransfer.id\'"></th>\r\n                            <th data-bind="local: \'poReceiving.refNum\'"></th>\r\n                            <th data-bind="local: poReceivingThirdField"></th>\r\n                            <th data-bind="local: \'storeTransfer.storeIn\'"></th>\r\n                            <th data-bind="local: \'storeTransfer.totalQuantity\'"></th>\r\n                            <th data-bind="local: \'storeTransfer.totalCost\'"></th>\r\n                            <th data-bind="local: \'storeTransfer.date\'"></th>\r\n                            <th data-bind="local: \'storeTransfer.employee\'"></th>\r\n                        </tr>\r\n                    </thead>\r\n                    <tbody></tbody>\r\n                </table>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/stores/newStore.html',[],function () { return '<div class="pane pane-right">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list" data-bind="css: { loading: isLoading() }">\r\n\r\n            <div class="form" data-bind="visible: !isLoading()">\r\n\r\n                <div class="form-group">\r\n                    <span class="please-fill" data-bind="local: \'storeSettings/store-settings-tabs/contacts.pleaseFillNewStore\'"></span>\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label for="new-store-name" data-bind="local: \'storeSettings/store-settings-tabs/contacts.store_name\'"></label>\r\n                    <input id="new-store-name" class="form-control input-lg" type="text" maxlength="100"\r\n                        data-bind="value: storeName, local: \'registerSettings/registerSettingsManage.input_name\', localAttr: \'placeholder\'">\r\n                </div>\r\n\r\n                <div class="form-group">\r\n                    <label for="new-store-description" data-bind="local: \'storeSettings/newStore.description\'"></label>\r\n                    <textarea id="new-store-description" class="form-control input-lg" maxlength="1000"\r\n                        data-bind="value: description, local: \'storeSettings/newStore.storeDescription\', localAttr: \'placeholder\'">\r\n                    </textarea>\r\n                </div>\r\n    \r\n                <div data-bind="text: errorMessage" class="fieldError"></div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done"\r\n                        data-bind="click: done, local: \'registerSettings/registerSettingsManage.done\'">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel"\r\n                        data-bind="click: cancel, local: \'registerSettings/registerSettingsManage.cancel\'">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/stores/store-settings-tabs/billing.html',[],function () { return '<div data-bind="with: model">\n    <div id="billingMessages"></div>\n    <div class="form-group">\n        <label data-bind="local: \'storeSettings/store-settings-tabs/billing.next_billing_date\'">Next billing date</label>\n        <input class="form-control input-lg datePicker" type="text" data-bind="value: nextBillingDate.date" readonly="readonly">\n    </div>\n    <div class="form-group">\n        <label data-bind="local: \'storeSettings/store-settings-tabs/billing.amount_to_pay\'">Amount to pay</label>\n        <span data-bind="text: \'$\' + amountToPay.amount()"></span>\n    </div>\n\n\n</div>';});


define('text!views/stores/store-settings-tabs/contacts.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="contactsMessages"></div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.store_name\'">Store Name</label>\n        <input class="form-control input-lg" type="text" placeholder="Store Name" maxlength="100" data-bind="value: storeName, local:\'storeSettings/store-settings-tabs/contacts.store_name\' , localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.address_1\'">Address 1</label>\n        <input class="form-control input-lg" type="text" placeholder="Address 1" maxlength="255" data-bind="value: address1, local:\'storeSettings/store-settings-tabs/contacts.address_1\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.address_2\'">Address 2</label>\n        <input class="form-control input-lg" type="text" placeholder="Address 2" maxlength="255" data-bind="value: address2, local:\'storeSettings/store-settings-tabs/contacts.address_2\' , localAttr: \'placeholder\'">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.city\'">City</label>\n        <input class="form-control input-lg" type="text" placeholder="City" maxlength="255" data-bind="value: city, local:\'storeSettings/store-settings-tabs/contacts.city\' , localAttr: \'placeholder\'">\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.state\'">State</label>\n        <input class="form-control input-lg" type="text" placeholder="State" maxlength="3" data-bind="value: state, local:\'storeSettings/store-settings-tabs/contacts.state\' , localAttr: \'placeholder\', attr: { maxlength: stateMaxLength }">\r\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.zip\'">Zip</label>\n        <input class="form-control input-lg" type="text" placeholder="Zip" maxlength="10" data-bind="value: zip, local:\'storeSettings/store-settings-tabs/contacts.zip\' , localAttr: \'placeholder\'">\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.country\'">Country</label>\n        <select class="select" data-bind="options: countries, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'storeSettings/store-settings-tabs/contacts.choose_country\'), value: countryId, event: { change: countryChange }"></select>\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.phone\'">Phone</label>\n        <input class="form-control input-lg" type="tel" placeholder="Phone" maxlength="40" data-bind="value: phone.phone, valueUpdate: \'afterkeydown\', phoneFilter: true, local:\'storeSettings/store-settings-tabs/contacts.phone\' , localAttr: \'placeholder\'">\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.email\'">Email</label>\n        <input class="form-control input-lg" type="email" placeholder="Email" data-bind="value: email, local:\'storeSettings/store-settings-tabs/contacts.email\' , localAttr: \'placeholder\'">\n    </div>\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/contacts.web\'">Web</label>\n        <input class="form-control input-lg" type="url" placeholder="Web" maxlength="255" data-bind="value: web, local:\'storeSettings/store-settings-tabs/contacts.web\' , localAttr: \'placeholder\'">\n    </div>\r\n\r\n  \r\n</div>\r\n';});


define('text!views/stores/store-settings-tabs/general.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="generalMessages"></div>\r\n<!-- ko if: $data.storeId -->\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/general.storeId\'"></label>\r\n        <span data-bind="text: $data.storeId"></span>\r\n    </div>\r\n<!-- /ko -->\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/general.stores_business\'"></label>\r\n        <select data-bind="options: businessUnitTypes, optionsText: \'name\', optionsValue: \'code\', value: businessUnitType"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: businessUnitType"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <!-- ko if: orderFulfilmentInstalled() && !isCompanySettings -->\r\n        <div class="checkbox">\r\n            <input type="checkbox" id="showOrderType" data-bind="checked: showOrderType">\r\n            <label for="showOrderType" data-bind="local: \'storeSettings/store-settings-tabs/general.show_order_type\'"></label>\r\n        </div>\r\n        <!-- /ko -->\r\n\r\n        <div class="checkbox">\r\n            <input type="checkbox" id="externalPayment" data-bind="checked: externalPayment">\r\n            <label for="externalPayment" data-bind="local: \'storeSettings/store-settings-tabs/general.externalPayment\'"></label>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/general.item_notes\'" style="margin: 10px 0 0 0"></label>\r\n\r\n        <div class="radio">\r\n            <input type="radio" id="noNotes" name="notesMode" class="form-control" value="0" data-bind="checked: notesMode" />\r\n            <label for="noNotes" class="no-padding"></label>\r\n            <label for="noNotes" data-bind="local: \'storeSettings/store-settings-tabs/general.no_notes\'"></label>\r\n        </div>\r\n\r\n        <div class="radio">\r\n            <input type="radio" id="notesMandatory" name="notesMode" value="1" data-bind="checked: notesMode" />\r\n            <label for="notesMandatory"></label>\r\n            <label for="notesMandatory" data-bind="local: \'storeSettings/store-settings-tabs/general.mandatory\'"></label>\r\n        </div>\r\n\r\n        <div class="radio">\r\n            <input type="radio" id="notesOptional" name="notesMode" value="2" data-bind="checked: notesMode" />\r\n            <label for="notesOptional"></label>\r\n            <label for="notesOptional" data-bind="local: \'storeSettings/store-settings-tabs/general.optional\'"></label>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="autoLogoutAfterOrder" data-bind="checked: autoLogoutAfterOrder">\r\n        <label for="autoLogoutAfterOrder" data-bind="local: \'storeSettings/store-settings-tabs/general.autoLogoutAfterOrder\'"></label>\r\n    </div>\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="syncOnLogin" data-bind="checked: syncOnLogin">\r\n        <label for="syncOnLogin" data-bind="local: \'storeSettings/store-settings-tabs/general.syncOnLogin\'"></label>\r\n    </div>\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="openCashDrawerCC" data-bind="checked: openCashDrawerCC">\r\n        <label for="openCashDrawerCC" data-bind="local: \'storeSettings/store-settings-tabs/general.openCashDrawerCC\'"></label>\r\n    </div>\r\n    <div class="checkbox receipt-checkbox">\r\n        <input type="checkbox" id="usePrintTaxList" data-bind="checked: printTaxList" />\r\n        <label for="usePrintTaxList" data-bind="local: \'storeSettings/store-settings-tabs/general.show_tax_list\'">Show Tax List</label>\r\n    </div>\r\n\r\n    <!-- ko if: $data.merchantType == \'Wireless\' -->\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="displayProductIdinShoppingCart" data-bind="checked: displayProductIdinShoppingCart">\r\n        <label for="displayProductIdinShoppingCart" data-bind="local: \'storeSettings/store-settings-tabs/general.displayProductIdinShoppingCart\'"></label>\r\n    </div>\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="displayUPCinShoppingCart" data-bind="checked: displayUPCinShoppingCart">\r\n        <label for="displayUPCinShoppingCart" data-bind="local: \'storeSettings/store-settings-tabs/general.displayUPCinShoppingCart\'"></label>\r\n    </div>\r\n    <!-- /ko -->\r\n\r\n\r\n<!-- ko if: $data.isActive !== undefined -->\r\n    <div class="checkbox" data-bind="permission: \'ADM\'" style="margin-top: 1em">\r\n        <input type="checkbox" id="isActiveStore" data-bind="checked: $data.isActive">\r\n        <label for="isActiveStore" data-bind="local: \'storeSettings/store-settings-tabs/general.is_active\'"></label>\r\n    </div>\r\n<!-- /ko -->\r\n\r\n\r\n    <div class="form-group">\r\n        <input class="btn btn-lg btn-danger hidden" type="button" data-bind="local: \'storeSettings/store-settings-tabs/general.cancel_store_account\'">\r\n    </div>\r\n</div>\r\n';});


define('text!views/stores/store-settings-tabs/localization.html',[],function () { return '<div data-bind="with: model">\r\n    <div id="localizationMessages"></div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/localization.pos_language\'">POS Language</label>\r\n        <select data-bind="options: languagesWithoutCustom, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'storeSettings/store-settings-tabs/localization.select_pos_language\'),\r\n                           value: posLanguageId, enable: isAdmin"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: posLanguageId"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/localization.kitchen_receipt_language\'">Kitchen Receipt Language</label>\r\n        <select data-bind="options: languages, optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'storeSettings/store-settings-tabs/localization.select_kitchen_receipt_language\'),\r\n                           value: kitchenReceiptLanguageId, enable: isAdmin"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: kitchenReceiptLanguageId"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/localization.date_format\'">Date format</label>\r\n        <select data-bind="options: dateFormats, optionsText: \'textFormat\', optionsValue: \'id\', optionsCaption: ko.local(\'storeSettings/store-settings-tabs/localization.select_date_format\'),\r\n                           value: dateFormatId, enable: isAdmin"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: dateFormatId"></span>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/localization.time_format\'">Time format</label>\r\n        <select data-bind="options: timeFormats, optionsText: \'textFormat\', optionsValue: \'id\', optionsCaption: ko.local(\'storeSettings/store-settings-tabs/localization.select_time_format\'),\r\n                           value: timeFormatId, enable: isAdmin"></select>\r\n        <span class="validationMessage" data-bind="validationMessage: timeFormatId"></span>\r\n    </div>\r\n</div>\r\n';});


define('text!views/stores/store-settings-tabs/payment.html',[],function () { return '<div data-bind="with: model">\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/payment.payment_gateway\'">Payment Gateway</label>\r\n        <select data-bind="enable: isAdmin && !$parent.readOnly(), options: paymentGatewayTypes, optionsText: \'name\', optionsValue: \'code\', value: paymentGatewayType"></select>\r\n    </div>\r\n    <div class="form-group" data-bind="visible: paymentGatewayTypeEnum.Usa_ePAY.equals(paymentGatewayType())">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/payment.source_key\'">Source Key</label>\r\n        <input type="text" class="form-control input-lg" placeholder="Source Key" data-bind="value: sourceKey, enable: isAdmin,\r\n            local: \'storeSettings/store-settings-tabs/payment.source_key\', localAttr: \'placeholder\'" />\r\n    </div>\r\n    <div class="form-group" data-bind="visible: paymentGatewayTypeEnum.Usa_ePAY.equals(paymentGatewayType())">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/payment.pin\'">PIN</label>\r\n        <input type="text" class="form-control input-lg" placeholder="PIN" maxlength="255" data-bind="value: pin, enable: isAdmin,\r\n            local: \'storeSettings/store-settings-tabs/payment.pin\', localAttr: \'placeholder\'" />\r\n    </div>\r\n    <div class="checkbox" data-bind="visible: paymentGatewayTypeEnum.Pax.equals(paymentGatewayType())">\r\n        <input type="checkbox" id="debitCardEnabled" data-bind="checked: debitCardEnabled">\r\n        <label for="debitCardEnabled" data-bind="local: \'storeSettings/store-settings-tabs/payment.debitCardEnabled\'"></label>\r\n    </div>\r\n    <div class="checkbox" data-bind="visible: ebtVisible()">\r\n        <input type="checkbox" id="ebtCardEnabled" data-bind="checked: ebtCardEnabled">\r\n        <label for="ebtCardEnabled" data-bind="local: \'storeSettings/store-settings-tabs/payment.ebtCardEnabled\'"></label>\r\n    </div>\r\n</div>\r\n';});


define('text!views/stores/store-settings-tabs/receipt.html',[],function () { return '<div data-bind="with: model">\r\n    <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n    <div id="receiptMessages"></div>\r\n\r\n    <div class="checkbox receipt-checkbox" style="margin-top:10px;">\r\n        <input type="checkbox" id="useKitchenPrinter" data-bind="checked: kitchenReceipt" />\r\n        <label for="useKitchenPrinter" data-bind="local: \'storeSettings/store-settings-tabs/receipt.kitchen_receipt\'">Kitchen Receipt</label>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'storeSettings/store-settings-tabs/receipt.footer\'">Receipt template</label>        \r\n         <!-- ko foreach: footers -->\r\n            <div class="editor" data-bind="visible: $data.languageId === $root.langs.selectedLanguage()" >\r\n                <textarea class="form-control input-lg" style="height: 70px; min-height:70px;" data-bind="value: $data.description"></textarea>\r\n            </div>\r\n         <!-- /ko -->\r\n    </div>\r\n</div>';});


define('text!views/stores/store-settings-tabs/registerList.html',[],function () { return '<div class="table">\r\n    <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n    <table class="datatable" id="registerListTable">\r\n        <thead>\r\n            <tr>\r\n                <th data-bind="local: \'registerSettings/registerSettingsList.register_name\'"></th>\r\n                <th data-bind="local: \'registerSettings/registerSettingsList.store\'"></th>\r\n                <th data-bind="local: \'registerSettings/registerSettingsList.status\'"></th>\r\n            </tr>\r\n        </thead>\r\n        <tbody>\r\n        </tbody>\r\n    </table>\r\n</div>';});


define('text!views/stores/store-settings-tabs/registers.html',[],function () { return '<div data-bind="with: model">\n\n    <div class="form-group hidden">\n        <a class="link" data-bind="click: $root.showRegisterSettings, local:\'storeSettings/store-settings-tabs/registers.registers_list\' ">Registers list</a>\n    </div>\n    <div class="form-group">\n        <label data-bind="local: \'storeSettings/store-settings-tabs/registers.select_#_of_stores_registers\'">Select # of Store\'s Registers</label>\n        <input class="form-control input-lg" type="text" data-bind="value: terminalCount">\n    </div>\n    <div class="form-group">\n        <label data-bind="local: \'storeSettings/store-settings-tabs/registers.price_per_register\'">Price per Register</label>\n        <span data-bind="text: \'$\' + pricePerTerminal.amount()"></span>\n    </div>\n</div>\n';});


define('text!views/stores/store-settings-tabs/taxes.html',[],function () { return '<div class="form-horizontal add-taxes-from" data-bind="with: model">\r\n    <span class="fieldError" data-bind="visible: storeTaxes().length > maxTaxNumber">\r\n        <span data-bind="local: \'storeSettings/store-settings-tabs/taxes.max_number_taxes_is\'">Max allowed number of taxes is</span>\r\n        <span data-bind="text: maxTaxNumber"></span>\r\n    </span>\r\n\r\n    <div id="storeTaxesMessages"></div>\r\n\r\n    <!-- ko if: $data.includeTaxesToPrice !== undefined -->\r\n    <div>\r\n        <input type="checkbox" id="chkIncludeTaxesToPrice" data-bind="checked: $data.includeTaxesToPrice" />\r\n        <label for="chkIncludeTaxesToPrice" data-bind="local: \'storeSettings/store-settings-tabs/taxes.includeTaxesToPrice\'"></label>\r\n    </div>\r\n    <!-- /ko -->\r\n    <div data-bind="visible: ebtInstalled">\r\n        <input type="checkbox" id="chkebtTaxExemption" data-bind="checked: $data.ebtTaxExemption" />\r\n        <label for="chkebtTaxExemption" data-bind="local: \'storeSettings/store-settings-tabs/taxes.ebt_tax_exemption\'"></label>\r\n    </div>\r\n        <table class="table taxes-table">\r\n            <thead>\r\n                <tr>\r\n                    <th data-bind="local: \'taxes/taxesList.name\'" style="width:300px"></th>\r\n                    <th data-bind="local: \'taxes/taxesList.rate_fee\'"></th>\r\n                    <th></th>\r\n                </tr>\r\n            </thead>\r\n            <tbody data-bind="foreach: storeTaxes, sortable__List: storeTaxes">\r\n                <tr>\r\n                    <td>\r\n                        <multi-selector params="options: $root.setupTaxesSelect($data)"></multi-selector>\r\n                    </td>\r\n                    <td class="valign-middle"><span data-bind="text: taxRate"></span> %</td>\r\n                    <td class="valign-middle">\r\n                        <input class="delete-row-button" type="button" data-bind="click: $root.removeTax">\r\n                    </td>\r\n                </tr>\r\n            </tbody>\r\n        </table>\r\n\r\n        <input class="tax-add-button" type="button" data-bind="click: $root.addTax, visible: storeTaxes().length < 1">\r\n    </div>\r\n';});


define('text!views/stores/store-settings-tabs/tips.html',[],function () { return '<div class="form-horizontal" data-bind="with: model">\r\n    \r\n        <div class="form-group">\r\n            <div class="col-xs-6 col-sm-3">\r\n                <div class="checkbox" style="min-height: 37px;">\r\n                    <input type="checkbox" id="isOn" data-bind="checked: tips">\r\n                    <label for="isOn" data-bind="local: \'storeSettings/store-settings-tabs/tips.tips\'">Tips</label>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <div class="form-group">\r\n            <div class="col-xs-6 col-md-6">\r\n                <label data-bind="local: \'storeSettings/store-settings-tabs/tips.tips_on_credit_card_authorization\'">Tips on Credit Card Authorization</label>\r\n                <input type="text" class="form-control input-lg" placeholder="0 %" data-bind="percentVal: tipsOnCreditCardAuth.percent, validationElement: tipsOnCreditCardAuth" />\r\n                <span data-bind="validationMessage: tipsOnCreditCardAuth" class="validationMessage"></span>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <div class="col-xs-12">\r\n                <label data-bind="local: \'storeSettings/store-settings-tabs/receipt.tipsNSignature\'"></label>\r\n        \r\n                <span data-bind="foreach: tipsSignatureSettings" class="radio-button-group">\r\n                    <input type="radio" name="tipsAndSignature" data-bind="attr: { id: $data }, value: $index, checked: $parent.signatureOnReceipt" /><label\r\n                        data-bind="attr: { \'for\': $data }, text: ko.T(\'storeSettings/store-settings-tabs/receipt.\' + $data)"></label>\r\n                </span>\r\n            </div>\r\n        </div>\r\n\r\n        <!-- ko if: tipsAndSignatureOnPos !== undefined && isCompanySettings -->\r\n            <div class="form-group more-padding">\r\n                <div class="col-xs-6 col-sm-3">\r\n                    <div class="checkbox receipt-checkbox" style="margin-bottom:10px;">\r\n                        <input type="checkbox" id="tipsAndSignatureOnPos" data-bind="checked: tipsAndSignatureOnPos" />\r\n                        <label for="tipsAndSignatureOnPos" data-bind="local: \'storeSettings/store-settings-tabs/receipt.tipsAndSignatureOnPos\'"></label>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        <!-- /ko -->\r\n\r\n        <div class="form-group">\r\n            <div class="col-xs-6 col-sm-5">\r\n                <label data-bind="local: \'storeSettings/store-settings-tabs/tips.keyboard_shortcut_settings\'">Keyboard Shortcut Settings</label>\r\n            </div>\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <div class="col-xs-6 col-sm-3">\r\n                <label class="control-label" data-bind="text: ko.local(\'storeSettings/store-settings-tabs/tips.for_curr_amount\', null,  ko.numeric.currencyFormat() ? ko.numeric.currencyFormat().symbol : \'\')">For $ Amount</label>\r\n            </div>\r\n\r\n            <div class="col-xs-6 col-sm-3">\r\n                <input class="form-control input-lg" type="text" data-bind="currencyVal: tipsMoneyValue1, attr: { placeholder: ko.numeric.formatCurrency(0) }">\r\n            </div>\r\n\r\n            <div class="col-xs-6 col-sm-3">\r\n                <input class="form-control input-lg" type="text" data-bind="currencyVal: tipsMoneyValue2, attr: { placeholder: ko.numeric.formatCurrency(0) }">\r\n            </div>\r\n\r\n            <div class="col-xs-6 col-sm-3">\r\n                <input class="form-control input-lg" type="text" data-bind="currencyVal: tipsMoneyValue3, attr: { placeholder: ko.numeric.formatCurrency(0) }">\r\n            </div>\r\n\r\n        </div>\r\n\r\n        <div class="form-group">\r\n            <div class="col-xs-6 col-sm-3">\r\n                <label class="control-label" data-bind="local: \'storeSettings/store-settings-tabs/tips.for_%_amount\'">\r\n                    For % Amount\r\n                </label>\r\n            </div>\r\n\r\n            <div class="col-xs-6 col-sm-3">\r\n                <input class="form-control input-lg" type="text" placeholder="0 %" data-bind="percentVal: tipsPercentValue1.percent">\r\n            </div>\r\n\r\n            <div class="col-xs-6 col-sm-3">\r\n                <input class="form-control input-lg" type="text" placeholder="0 %" data-bind="percentVal: tipsPercentValue2.percent">\r\n            </div>\r\n\r\n            <div class="col-xs-6 col-sm-3">\r\n                <input class="form-control input-lg" type="text" placeholder="0 %" data-bind="percentVal: tipsPercentValue3.percent">\r\n            </div>\r\n\r\n        </div>\r\n\r\n    </div>\r\n';});


define('text!views/stores/storeSettings.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n\r\n        <div data-bind="compose: {\r\n            model: \'viewmodels/popups/helpPopup\',\r\n            view: \'views/popups/storeSettingsHelp.html\'\r\n        }"></div>\r\n\r\n        <div class="pane-body item-list">\r\n            <div class="form wide-form store-settings">\r\n                <div class="store-settings-tabs"></div>\r\n                <div id="saveMessages"></div>\r\n\r\n                <div class="tab-content" id="generalTab" data-bind="compose: {\r\n                    model: \'viewmodels/stores/store-settings-tabs/general\',\r\n                    view: \'views/stores/store-settings-tabs/general.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="contactsTab" data-bind="compose: {\r\n                    model: \'viewmodels/stores/store-settings-tabs/contacts\',\r\n                    view: \'views/stores/store-settings-tabs/contacts.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="receiptTab" data-bind="compose: {\r\n                    model: \'viewmodels/stores/store-settings-tabs/receipt\',\r\n                    view: \'views/stores/store-settings-tabs/receipt.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="tipsTab" data-bind="compose: {\r\n                model: \'viewmodels/stores/store-settings-tabs/tips\',\r\n                view: \'views/stores/store-settings-tabs/tips.html\'\r\n                }"></div>\r\n\r\n                <div class="tab-content" id="taxesTab" data-bind="compose: {\r\n                model: \'viewmodels/stores/store-settings-tabs/taxes\',\r\n                view: \'views/stores/store-settings-tabs/taxes.html\'\r\n                }"></div>\r\n\r\n                <!-- ko if: cardPaymentInstalled -->\r\n                <div class="tab-content" id="paymentTab" data-bind="compose: {\r\n                    model: \'viewmodels/stores/store-settings-tabs/payment\',\r\n                    view: \'views/stores/store-settings-tabs/payment.html\'\r\n                }"></div>\r\n                <!-- /ko -->\r\n\r\n                <div id="localizationTab" class="tab-content" data-bind="compose: {\r\n                    model: \'viewmodels/stores/store-settings-tabs/localization\',\r\n                    view: \'views/stores/store-settings-tabs/localization.html\'\r\n                }"></div>\r\n\r\n                <div id="registerListTab" class="tab-content" data-bind="compose: {\r\n                    model: \'viewmodels/stores/store-settings-tabs/registerList\',\r\n                    view: \'views/stores/store-settings-tabs/registerList.html\'\r\n                }"></div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary uppercase" type="button" value="Done" data-bind="click: save, local:\'storeSettings/storeSettings.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: cancel, local: \'storeSettings/storeSettings.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/stores/storesList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div id="messages"></div>\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search Store" data-bind="local: \'stores/storesList.search_store\', localAttr: \'placeholder\'">\r\n\r\n            <div class="table-header">\r\n                <input type="button" class="btn btn-lg btn-primary pull-right" value="New Store" data-bind="click: newStore, local:\'stores/storesList.new_store\'" />\r\n            </div>\r\n        \r\n            <br class="clear">\r\n        \r\n            <table class="datatable" id="storesTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'stores/storesList.store_name\'">Store Name</th>\r\n                        <th data-bind="local: \'stores/storesList.status\'">Status</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/supportAccess/supportAccess.html',[],function () { return '<div class="pane pane-right pane-tips">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="form wide-form store-settings">\r\n                <div data-bind="visible: !isPassGenerated()">\r\n                    <div data-bind="local: \'supportAccess.text\'"></div>\r\n                    <div style="padding:25px;">\r\n                        <input type="button" class="btn btn-lg btn-primary pull-right" data-bind="click: generatePassword, local:\'supportAccess.button\'">\r\n                    </div>\r\n                </div>\r\n                <div data-bind="visible: isPassGenerated()">\r\n                    <b data-bind="local: \'supportAccess.please\'"></b>\r\n                    <div>\r\n                        <b data-bind="text: loginTimeText"></b>\r\n                    </div>\r\n                    <div data-bind="text: accountId"></div>\r\n                    <div data-bind="text: email"></div>\r\n                    <div data-bind="text: tempPass"></div>\r\n                </div>\r\n              </div>\r\n            </div>\r\n    </div>\r\n</div>\n    \n';});


define('text!views/taxAgencies/taxAgenciesList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list taxes-list">\r\n            <div id="messages"></div>\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search Tax Agency by Name" data-bind="local: \'taxAgenies/taxAgeniesList.search_by_name\', localAttr: \'placeholder\'">\r\n\r\n            <div class="btn-group btn-group-lg pull-right">\r\n                <a class="btn btn-primary" href="#newTaxAgency" data-bind="local: \'taxAgenies/taxAgeniesList.new_tax_agency\', click: newTaxAgency">New Tax Agency</a>\r\n            </div>\r\n\r\n\r\n            <button class="btn btn-lg pull-right btn-red delete-button-mark" type="button" data-bind="click: deleteSelected , enable: hasSelected">\r\n                <span class="" data-bind="local: \'common.delete_selected\'">Delete</span>\r\n            </button>\r\n\r\n\r\n            <br class="clear">\r\n\r\n            <table class="datatable selectablelist" id="taxAgeniesTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th>\r\n                            <div class="checkbox">\r\n                                <input type="checkbox" id="taxAgenciesSelectAll" data-bind="checked: selectAll">\r\n                                <label for="taxAgenciesSelectAll"></label>\r\n                            </div>\r\n                        </th>\r\n                        <th data-bind="local: \'taxAgenies/taxAgeniesList.name\'">Name</th>\r\n                        <th data-bind="local: \'taxAgenies/taxAgeniesList.isActive\'">Is Active</th>\r\n                        <th>\r\n                        </th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/taxAgencies/taxAgencyManage.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="form wide-form tax-agency-form" data-bind="with: model">\r\n\r\n                <!--<div data-bind="compose: {\r\n                    model: \'viewmodels/popups/helpPopup\',\r\n                    view: \'views/popups/taxManagerHelp.html\'\r\n                }"></div>-->\r\n\r\n            \r\n                <div id="taxAgencySaveMessages"></div>\r\n\r\n                <div class="form-group ">\r\n                    <label data-bind="local: \'taxAgenies/taxAgencyManage.input_name\'">Tax Agency Name</label>\r\n                    <input class="form-control input-lg" type="text" placeholder="Input Name" maxlength="100"\r\n                           data-bind="enable: !$data.readonly(), value: $data.name, local: \'taxAgenies/taxAgencyManage.input_name\', localAttr: \'placeholder\'" />\r\n                </div>\r\n\r\n                <div class="checkbox">\r\n                    <input type="checkbox" id="isActiveTaxAgency" data-bind="checked: isActive">\r\n                    <label for="isActiveTaxAgency" data-bind="local: \'taxAgenies/taxAgencyManage.is_active\'">Is Active</label>\r\n                </div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: $root.save, local: \'taxAgenies/taxAgencyManage.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: $root.cancel, local: \'taxAgenies/taxAgencyManage.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n\r\n';});


define('text!views/taxes/taxManage.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div class="form wide-form-simple taxes-form" data-bind="with: model">\r\n\r\n                <div data-bind="compose: {\r\n                    model: \'viewmodels/popups/helpPopup\',\r\n                    view: \'views/popups/taxManagerHelp.html\'\r\n                }"></div>\r\n\r\n\r\n                <!--ko compose: { model: $root.langs }--><!--/ko-->\r\n\r\n                <div id="taxSaveMessages"></div>\r\n                \r\n                <div class="form-group no-overflow row">\r\n                    <div data-bind="css: { \'col-xs-4\': !isGroup() && appsData[\'pr\'], \'col-md-4\': !isGroup() && appsData[\'pr\'], \'col-xs-12\': !(!isGroup() && appsData[\'pr\']), \'col-md-12\': !(!isGroup() && appsData[\'pr\'])}">\r\n                        <div class="form-group ">\r\n                            <label data-bind="local: \'taxes/taxManage.tax_name\'">Tax Name</label>\r\n                            <!-- ko foreach: names -->\r\n                            <input class="form-control input-lg tax-name" type="text" placeholder="Input Name" maxlength="100"\r\n                                   data-bind="value: $data.name,\r\n                           visible: ($data.languageId === $parent.currentLocalizedName().languageId),\r\n                           local: \'taxes/taxManage.tax_name\', localAttr: \'placeholder\'" />\r\n                            <!-- /ko -->\r\n                        </div>\r\n                    </div>\r\n                    <div class="col-xs-4 col-md-4">\r\n                        <!-- ko if: !isGroup() && appsData[\'pr\'] -->\r\n                        <div class="pr-accounts-container">\r\n                            <pr-control-number params="value: appsData[\'pr\']"></pr-control-number>\r\n                            <br />\r\n                        </div>\r\n                        <!-- /ko -->\r\n                    </div>\r\n                </div>\r\n\r\n                        <div class="form-group" data-bind="visible: $root.isShowGroupSelector">\r\n                            <div class="radio inline">\r\n                                <input type="radio" id="taxSingle" name="isGroupTax" class="form-control" value="0" data-bind="checked: isGroupChecker" />\r\n                                <label for="taxSingle" class="no-padding"></label>\r\n                                <label for="taxSingle" data-bind="local: \'taxes/taxManage.singe_tax\'"></label>\r\n                            </div>\r\n\r\n                            <div class="radio inline">\r\n                                <input type="radio" id="taxCombined" name="isGroupTax" value="1" data-bind="checked: isGroupChecker" />\r\n                                <label for="taxCombined"></label>\r\n                                <label for="taxCombined" data-bind="local: \'taxes/taxManage.combined_tax\'"></label>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- ko if: !isGroup() -->\r\n\r\n                        <div class="form-group no-overflow row">\r\n                            <div class="col-xs-4 col-md-4">\r\n                                <!-- ko if: selectedTaxType().propertiesArray().length == 1  -->\r\n                                <div class="form-group no-overflow position-relative" data-bind="with: selectedTaxType().propertiesArray()[0]">\r\n                                    <label data-bind="text: ko.T(\'taxes/taxTypes.\' +  $data )"></label>\r\n                                    <div class="input-group">\r\n                                        <input class="form-control input-lg" type="text" placeholder="" maxlength="100"\r\n                                               data-bind="value: $parent.properties()[$data], attr: { placeholder: ko.T(\'taxes/taxTypes.\' +  $data ) }" />\r\n                                        <span class="input-group-addon">\r\n                                            <!-- ko if: $data == \'rate\' -->\r\n                                            %\r\n                                            <!-- /ko -->\r\n                                        </span>\r\n                                    </div>\r\n\r\n\r\n                                </div>\r\n                                <!-- /ko -->\r\n\r\n                            </div>\r\n                            <div data-bind="css: { \'col-xs-4\': !isGroup() && appsData[\'pr\'], \'col-md-4\': !isGroup() && appsData[\'pr\'], \'col-xs-8\': !(!isGroup() && appsData[\'pr\']), \'col-md-8\': !(!isGroup() && appsData[\'pr\']) }">\r\n                                <label data-bind="local: \'taxes/taxManage.tax_Agency\'">Tax Agency</label>\r\n                                <multi-selector params="options: $root.setupTaxAgencyMultiSelect($data)"></multi-selector>\r\n                            </div>\r\n                        </div>\r\n\r\n                        <!-- /ko -->\r\n                        <!-- ko if: isGroup() -->\r\n                        <!-- ko foreach: childTaxes -->\r\n                        <div class="form-group no-overflow row">\r\n\r\n                            <div class="col-xs-5 col-md-5 ">\r\n                                <label data-bind="local: \'taxes/taxManage.tax_component_name\'">Tax Component Name</label>\r\n                                <multi-selector params="options: $root.setupSingeTaxMultiSelect($data)"></multi-selector>\r\n                            </div>\r\n\r\n                            <div class="col-xs-2 col-md-2">\r\n                                <!-- ko if: selectedTaxType().propertiesArray().length == 1  -->\r\n                                <div class="form-group no-overflow position-relative" data-bind="with: selectedTaxType().propertiesArray()[0]">\r\n                                    <label data-bind="text: ko.T(\'taxes/taxTypes.\' +  $data )"></label>\r\n                                    <div class="input-group">\r\n                                        <input class="form-control input-lg" type="text" placeholder="" maxlength="100"\r\n                                               data-bind="enable: !$parent.disabled(),\r\n                                                    value: $parent.properties()[$data], attr: { placeholder: ko.T(\'taxes/taxTypes.\' +  $data ) }" />\r\n                                        <span class="input-group-addon">\r\n                                            <!-- ko if: $data == \'rate\' -->\r\n                                            %\r\n                                            <!-- /ko -->\r\n                                        </span>\r\n                                    </div>\r\n                                </div>\r\n                                <!-- /ko -->\r\n                            </div>\r\n                            <div data-bind="css: { \'col-xs-4\': $parent.canDeleteChildTaxes, \'col-md-4\': $parent.canDeleteChildTaxes, \'col-xs-5\': !$parent.canDeleteChildTaxes(), \'col-md-5\': !$parent.canDeleteChildTaxes() }">\r\n                                <label data-bind="local: \'taxes/taxManage.tax_Agency\'">Tax Agency</label>\r\n                                <multi-selector params="options: $root.setupTaxAgencyMultiSelect($data)"></multi-selector>\r\n                            </div>\r\n\r\n                            <div class="col-xs-1 col-md-1" data-bind="visible: $parent.canDeleteChildTaxes">\r\n                                <div style="padding-top:21px;line-height: 50px;">\r\n                                    <input class="delete-row-button" style="padding-top: 10px;" type="button" data-bind="click: $root.removeTaxFromGroup.bind($data)">\r\n                                </div>\r\n                            </div>\r\n\r\n                        </div>\r\n                        <!-- /ko -->\r\n\r\n                        <div class="form-group no-overflow row">\r\n                            <div style="float:left;padding-left:10px;">\r\n                                <input class="modifier-add-button" type="button" data-bind="click: $root.addTaxToGroup.bind($data), visible: $root.addTaxAllowed">\r\n                            </div>\r\n                        </div>\r\n\r\n\r\n                        <!-- /ko -->\r\n\r\n                        <div class="checkbox">\r\n                            <input type="checkbox" id="isActiveTax" data-bind="checked: isActive">\r\n                            <label for="isActiveTax" data-bind="local: \'taxes/taxManage.is_active\'">Is Active</label>\r\n                        </div>\r\n\r\n\r\n\r\n\r\n                        <div class="form-buttons">\r\n                            <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: $root.save, local: \'categories/categoryManage.done\', enable: $root.canBeSaved ">\r\n                            <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: $root.cancel, local: \'categories/categoryManage.cancel\' ">\r\n                        </div>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n</div>\r\n\r\n';});


define('text!views/taxes/taxesList.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list taxes-list">\r\n            <div id="messages"></div>\r\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search Tax by Name or Code" data-bind="local: \'taxes/taxesList.search_by_name_or_code\', localAttr: \'placeholder\'">\r\n\r\n            <div class="btn-group btn-group-lg pull-right">\r\n                <a class="btn btn-primary" href="#newTax" data-bind="local: \'taxes/taxesList.new_tax\', click: newTax">New Tax</a>\r\n            </div>\r\n\r\n            <br class="clear" />\r\n            \r\n            <div class="pull-right inactive-filter">\r\n                <div class="checkbox">\r\n                    <input type="checkbox" id="chkShowInactiveTaxes" data-bind="checked: isShowInactive">\r\n                    <label for="chkShowInactiveTaxes" data-bind="local: \'taxes/taxesList.show_inactive\'">Show inactive</label>\r\n                </div>\r\n            </div>\r\n\r\n            <br class="clear" />\r\n\r\n            <table class="datatable" id="taxesTable">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'taxes/taxesList.name\'">Name</th>\r\n                        <!--<th data-bind="local: \'taxes/taxesList.code\'">Code</th>-->\r\n                        <!--<th data-bind="local: \'taxes/taxesList.type\'">Type</th>-->\r\n                        <th data-bind="local: \'taxes/taxesList.rate_fee\'">Rate/Fee</th>\r\n                        <th data-bind="local: \'taxes/taxesList.taxAgency\'">Tax Agency</th>\r\n                        <th data-bind="local: \'taxes/taxesList.isCombined\'">Is Combined</th>\r\n                        <th data-bind="local: \'taxes/taxesList.isActive\'">Is Active</th>\r\n                       \r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/terms/TermsAndConditions-EN.html',[],function () { return '<STYLE type="text/css">\r\n    #page_1 {\r\n        position: relative;\r\n        overflow: hidden;\r\n        /*margin: 35px 0px 55px 96px;*/\r\n        padding: 0;\r\n        border: none;\r\n        width: 100%;\r\n    }\r\n\r\n    .ua-header {\r\n        text-align: center;\r\n    }\r\n\r\n        .ua-header p {\r\n            font: bold 15px \'Arial\';\r\n            line-height: 16px;\r\n        }\r\n\r\n    .ua-text {\r\n        font: 12px \'Arial\';\r\n        margin-top: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n        .ua-text ul {\r\n            list-style: none;\r\n        }\r\n\r\n    .bold {\r\n        font-weight: bold;\r\n    }\r\n\r\n    .ft3 {\r\n        font: 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft4 {\r\n        font: 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft5 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft6 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft7 {\r\n        font: bold 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft8 {\r\n        font: 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft9 {\r\n        font: 12px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft10 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 9px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft11 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft12 {\r\n        font: bold 11px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft13 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft14 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft15 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft16 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft17 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 16px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft18 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft19 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 19px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft20 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft21 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft22 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft23 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft24 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft25 {\r\n        font: italic 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft26 {\r\n        font: italic 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft27 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft28 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft29 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft30 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        color: #0000ff;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft31 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft32 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft33 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft34 {\r\n        font: 11px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft35 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft36 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft37 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 37px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft38 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 38px;\r\n        line-height: 15px;\r\n    }\r\n\r\n\r\n\r\n    .p51 {\r\n        text-align: left;\r\n        margin-top: 38px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p52 {\r\n        text-align: left;\r\n        margin-top: 1px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p53 {\r\n        text-align: left;\r\n        margin-top: 658px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    div.ua-text a {\r\n        text-decoration: underline;\r\n    }\r\n\r\n</STYLE>\r\n\r\n<div id="page_1">\r\n    <div class="ua-header">\r\n        <P>\r\n            EHOPPER POINT OF SALE<br />\r\n            MERCHANT USER SOFTWARE LICENSE<br />\r\n            AND SERVICES AGREEMENT\r\n        </P>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Thank you for choosing EHOPPER Point of Sale Software and Services. This Merchant User License together with the sales order form (as defined below) you enter into (the “Sales Order Form”) are referred to collectively as the “License” or the “Agreement”, and gives you certain non-exclusive rights and responsibilities depending on which version of the software and services package you purchase. \r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Software” shall mean the point of sale software provided to you, the merchant (“you” or “Licensee”), by EHopper Services LLC ( the “Company”, “we”, “us” or “our”) under this Agreement (or by any agreement You may have with a reseller or master licensee of the Company’s Software); the term “Software” shall include without limitation, any other programs, apps, tools, internet-based services, plug-ins, components and any “updates” made available to you (for example, Software maintenance, service information, help content, bug fixes, patches or maintenance releases etc.) or “upgrades” of the Software that the Company elects, in its sole discretion, to provide or make available to you after the date you obtained your initial copy of the Software.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Services” means the services selected by you in the most recent sales order form that you may enter into (the “Sales Order Form”), and any technical or attendant support services that are routinely offered by the Company THE COMPANY in connection with the Software, which are subject to change from time to time, in the Company’s sole and absolute discretion.  For purposes of this Agreement, the term “Sales Order Form” includes any invoice, billing sheet, payment schedule, or other written notice of fee or charge (including email notices from the Company or any authorized reseller or master licensee through whom you are provided access to the Software and Services) in connection with Your Use of the Software and Services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        This Agreement is effective as of the later of the date you click the “I accept” and download the Software. By installing the Software, you agree to be bound by the terms and conditions of this Agreement. If you do not accept this Agreement, you will not be able to use these EHOPPER software or services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You may be entitled to download updates to the Software that the Company generally makes available to other users of the Software, in the Company’s sole and absolute discretion.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">1. LICENSE GRANT AND RESTRICTIONS. </span>EHopper Services LLC, a New York limited liability company, subject to its own license of the Software, grants you (“you”, “your” and “Licensee” means you the Licensee on whose behalf the Software is licensed and Services are sold) the following non-exclusive, limited rights on the condition that you comply with all of the terms and conditions of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        License: This License is solely for commercial, in-store use by you within the United States, Puerto Rico, US Virgin Island and Canada, or other approved territory on a compatible tablet or mobile device (each a “CPU”), and is not for use on or in connection with any online sales or e-commerce transactions. You may install the Software on one (1) CPU <span class="ft14">per license</span>.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Your license to use the Software is conditioned on your compliance with the scope of this license, and any use by you outside this scope will cause the agreement to terminate automatically, and shall cause your license to be revoked automatically.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You are not licensed or permitted under this Agreement and you agree that you shall not, nor shall you assist or permit others to, do any of the following: (a) modify, adapt, translate, embed, rent or sublicense (including offering the Software to third parties in any manner, whether on an applications service provider or a time-sharing basis); (b) assign, loan, resell, rebrand, transfer or distribute the Software, CDROM(s), or related materials or create derivative works based upon the Software or any part thereof; (c) decompile, reverse engineer, or disassemble the Software; (d) copy the Software in whole or part, alter, adjust, repair or circumvent any aspect of the Software, or use trade secret information contained in the Software, to develop software to interface with the Software; (e) remove, alter or obscure any confidentiality or proprietary rights notices (including copyright notices) of the Company or its licensors on or within the Software or any copies of the Software; or (f) make the software available to any third party via any server or on the Internet. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Additionally, Licensee shall not use, nor shall it permit others to use the Software: (i) for any unlawful, invasive, infringing, defamatory, fraudulent or obscene purpose; (ii) to send any virus, worm, trojan horse or harmful code or attachment; (iii) to alter, steal, corrupt, evade, disable, destroy, trespass or violate any security or encryption of any computer file, database or network; (iv) so as to interfere with the use of the Company, its Suppliers, or connectivity partner network by other Licensees or authorized users; or (v) in violation of the acceptable use policies of the Company’s Suppliers or service providers, including its backbone providers. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Unless you have entered into an agreement to use an affiliate’s payment processing services, which agreement expressly provides for an extended term, the Company may terminate this License to you any time upon thirty (30) days’ written notice (email notice sent to the email address provided by you will suffice, whether or not received by you).\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">2. RESERVATION OF RIGHTS AND OWNERSHIP. </span>The Software is licensed (not sold) to you, and the Company, for itself and its licensors, reserves all rights not expressly granted to you in this Agreement. In order to continue using the software under license, you must continue to abide by the terms and conditions in this Agreement. The Software is protected by copyright, trade secret and other intellectual property laws. The Company and/or its licensors own the title, copyright, and other worldwide intellectual property rights in the Software and all copies of the Software. This Agreement does not grant you any rights to trademarks or service marks of the Company or those of its licensors. You further agree that you will not challenge the Company’s or its licensor’s copyrights in or to the Software, and further shall not challenge their rights in or to the EHOPPER trademark.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">3. THIRD PARTY SERVICES AND WEBSITES. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">In connection with the promotion or your use of the Software, you may be made aware of or offered services, features, products, and promotions provided by third parties, apart from the Company (“Third Party Services”). If you decide to use Third Party Services, you are responsible for reviewing them and understanding the terms and conditions governing any Third Party Services. For purposes of this Agreement, any authorized reseller or master licensee of EHOPPER Software and Services through whom you have been provided such Software shall be a “Third Party” and its services and website shall be, without limitation, considered “Third Party Services” and “Third Party Websites”. You authorize the Company to use and disclose your contact information, including name and address, for the purpose of making the Third Party Services you choose available to you. You also agree that the third party, and not the Company, is responsible for the performance of the Third Party Services, and that you will look only to such third parties in connection with the provision or any failure to provide such Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">The Software also may contain or reference links to third party websites operated by third parties (“Third Party Websites”). These links are provided as a convenience only. Such Third Party Websites are not under the control of the Company or its licensors, and neither the Company nor its licensor is responsible for the content of any Third Party Website or any link contained in a Third Party Website. Neither the company nor its licensors review, approve, monitor, endorse, warrant, or make any representations with respect to Third Party Websites, and the inclusion of any link in the Software or Services is not and does not imply an affiliation, sponsorship, endorsement, approval, investigation, verification or monitoring by the Company, its licensors of any information contained in any Third Party Website. In no event will the Company or its licensors be responsible for the information or contained at such Third Party Website or for your use of or inability to use such Website. Access to any Third Party Website is at your own risk, and you acknowledge and understand that linked Third Party Websites may contain terms and privacy policies that are different from those of the Company. The Company is not responsible for such terms, policies and content, and you agree and acknowledge that neither the Company nor its licensors shall have any liability for them.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">4. LICENSEE OBLIGATIONS. </span>In connection with this License You acknowledge and agree that you must: (a) provide for your own access to the World Wide Web and pay any service fees associated with such access, and (b) provide all equipment and services necessary for you to make sufficient connection to the World Wide Web to enable the Software and Services to be provided, including a tablet or other mobile device with an up-to-date compatible operating system, Ethernet, modem, and other equipment. You shall, at your own expense, provide all necessary preparations required to connect to the Software and Services and shall comply with the Company’s installation and maintenance specifications for delivery of the Software and the Services, and you are also solely responsible for the costs of any relocation of its equipment or installation of Software. You shall be responsible for the operation and maintenance of all hardware, software, cabling, services and components that are not provided to you by the Company, and if such items impair your use of the Software and any Services, you shall remain liable for any applicable payment to the Company for the Software and Services. Upon notice from the Company or any authorized reseller or master licensee, that any such component causes or is likely to cause a hazard, interference with or obstruction of the Services, you shall eliminate, repair or remedy such problematic component promptly, and the Company may disconnect the Software and Services immediately until such elimination, repair or remedy occurs. The Company shall not be responsible: (a) for the installation, operation, management or maintenance of any hardware, software, cabling or services not provided by the Company in connection with the Software and Services; (b) if any changes in the Software and Services cause hardware, software, configurations, cabling or services not provided by the Company to become obsolete or to require modification; (c) if any modification or configuration performed by you impairs the performance of the Software and Services hereunder; or (d) for the performance or availability of third party services or facilities provided hereunder. By entering into this Agreement, You represent that, to the best of your knowledge and belief, your use of the Software and Services does not directly or indirectly infringe the legal or contractual rights of a third party. You further represent and warrant that all information provided by you in connection with its license of this Software and Services is accurate, current and complete.\r\n    </div>\r\n    <div class="ua-text">\r\n        <span class="ft5">5. LICENSEE CONDUCT ON THE EHOPPER WEB SITE. </span>THE EHOPPER Website is to be used solely in connection with your business. While using the EHOPPER Website, or any other website provided or hosted by the Company or its licensors, including but not limited to: <span class="ft14">ehopper.com</span>, <span class="ft14">b2bsoft.com</span>, <span class="ft14">btbsoft.com</span>, <span class="ft14">b2bim.com</span>, and all other, that the Company of its licensors may create in the future, Licensee may not:\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">Restrict or inhibit any other user from using and enjoying any Service offered through such site;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Post or retransmit any unlawful or fraudulent, information of any kind in connection with the Software, Services or the Company Websites, including without limitation, any transmissions constituting or encouraging conduct that would constitute a criminal offense, give rise to civil liability, or otherwise violate any local, state, national or foreign law, including without limitation the U.S. export control laws and regulations;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">Access any user account apart from the account belonging to Licensee;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">Upload or transmit any information or software which contains a virus, trojan horse, worm or other harmful component;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(e)</span><span class="ft18">Post, publish, transmit, reproduce, distribute or in any way exploit any information, software or other material obtained through the Service for commercial purposes (other than as expressly permitted by the provider of such information, software or other material);</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(f)</span><span class="ft19">Post, publish, transmit, reproduce, or distribute in any way information, software or other material obtained through the Service or the the Company Website which is protected by copyright, publicity or privacy laws or other proprietary right, or derivative works with respect thereto, without obtaining permission of the copyright owner or other rights holder; or</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(g)</span><span class="ft18">Upload, post, publish, reproduce, transmit or distribute in any way any component of the Service itself or derivative works with respect thereto, as the Service is copyrighted as a collective work under U.S. copyright laws.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">6. NO OBLIGATION TO MONITOR. </span>The Company has no obligation to monitor the Software, Service or Third Party Service available through or in connection with its Software. However, Licensee acknowledges and agrees that the Company has the right to monitor the Software and Service electronically from time to time and to disclose any information as necessary or appropriate to satisfy any law, regulation or other governmental request, to operate the Software and Services properly, or to protect itself or its subscribers. The Company will not intentionally monitor or disclose any private electronic-mail message unless required by law.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">7. GENERAL PRACTICES REGARDING USE, STORAGE AND SERVICE ACCESS. </span>Licensee acknowledges that the Company may establish from time to time general practices and limits concerning use of the Software and Services, in its sole discretion, with or without notice, including without limitation, establishing the maximum amount of storage space Licensee have at any time, as well as limiting the number of times (and the maximum duration for which) Licensee may access the Software and Service in a given period of time. <span class="bold">Licensee agrees that the Company has no responsibility or liability for the deletion or failure to store any Content, messages or other communications or transaction information maintained or transmitted by the Software or Services.</span> Licensee understands that all Content, whether publicly posted or privately transmitted, is either your sole responsibility or the responsibility of the person from which such Content originated. This means that Licensee, and not the Company, is entirely responsible for all Content that Licensee uploads or otherwise transmits via the Software and Services. the Company does not control the Content uploaded or otherwise transmitted by Licensee or other Licensees and, as such, does not guarantee the accuracy, integrity or quality of such Content. "Content" means information, data, text (including but not limited to names of files, databases, directories and groups of the same), software, graphics, video, messages or other materials. Licensee therefore acknowledges that it is responsible for periodically backing up or downloading any data or Content that might be available in connection with the Software, and further acknowledges that the Company’s storage and making available of such Content or data is for convenience only, and that the Company shall have no liability in connection with or arising from any damage to, inaccuracies in, or inability of Licensee to access such Content or data, Licensee acknowledges and agrees that the Company shall have access to and may use Licensee’s client data, Licensee’s usage data, and other information for marketing and research purposes, to improve the Software and Services, to produce industry reports, for maintenance and support purposes, to provide Licensee with information regarding the Company’s affiliates or third party services, and further to satisfy any legal obligation that the Company reasonably believes it may have in such connection. You further agree that the Company shall have no obligation to you to retain the Content for more than thirty (30) days after termination of this Agreement, and may withhold providing you with access to Content pending payment by you of any fees or amounts that may be due under this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">8. FEES AND PAYMENT. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">At the outset of this License, there may be no charge to you to use this Software, provided that you adhere to the terms of the License. Notwithstanding the foregoing, in the event that the Company (or any authorized reseller or master licensee) provides written (including email) Sales Order Form to you that fees will be charged in connection with your continued use of the Software or Services, you agree to pay to the Company all fees for the Service or Software you license or use (including any overage fees), in accordance with the pricing and payment terms presented to you in such Sales Order Form. Where fees may be applicable, you will be billed using the billing method you select through your account management interface or as designated by you on a Sales Order Form, or Merchant Application. Payment by you of such fees is an express condition of this license, and non-payment of such fees will result in termination of your access to the Software and Services or unlicensed use, if such use continues. Fees paid by you are non-refundable, except as provided in these Terms or when required by law. In the event that fees are due under this Agreement, if Licensee is delinquent in any such payment on more than two (2) occasions in any twelve-month period, the Company may, upon written notice to Licensee, modify the payment terms to require full payment before the further provision of any Services or require other assurances to secure Licensee’s payment obligations hereunder. Licensee shall furnish financial information to the Company as the Company may, from time to time, reasonably request. Third Party Services, as well as any Services or Software upgrades or modules requested by Licensee may result in fees or other charges in addition to those set forth on the original Sales Order Form. Except as otherwise expressly stated in a particular Sales Order Form for the Services performed thereunder, the Company reserves the right to change the Services it offers to its Licensees generally and the related rates at any time, upon thirty (30) days’ notice. Licensee specifically acknowledges and agrees that it will not attempt to chargeback any fees authorized by it.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Licensee is responsible for any taxes, duties, fees or surcharges that are imposed or authorized by regulatory and governmental entities, including but not limited to sales, use, gross receipts taxes, surcharges, franchise fees, occupational, excise, universal service (state and federal) taxes and surcharges, and shall pay to the Company or reimburse the Company for amounts paid by the Company relating to Services provided to Licensee.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">If Licensee’s Service is disconnected due to nonpayment or late payment by Licensee, Licensee shall be responsible for all costs incurred by the Company resulting from such disconnection.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">If Licensee Fees are subsidized by third parties and such third parties decline to pay same Licensee shall be responsible for those fees based on the pricing on any applicable sales order form.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">9. DISCLAIMER OF WARRANTIES. </span>THE SOFTWARE, SERVICES AND ANY CONTENT ACCESSIBLE THROUGH THE SOFTWARE OR SERVICES ARE PROVIDED "AS-IS," AND TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY, ITS AFFILIATES, LICENSORS, PARTICIPATING FINANCIAL INSTITUTIONS, THIRD PARTY CONTENT OR SERVICE PROVIDERS, DEALERS AND SUPPLIERS (COLLECTIVELY “SUPPLIERS”) DISCLAIM ALL GUARANTEES AND WARRANTIES, WHETHER EXPRESS OR IMPLIED OR STATUTORY, REGARDING THIS SOFTWARE, SERVICES, CONTENT, CDROMS AND RELATED MATERIALS, INCLUDING ANY WARRANTY OF FITNESS FOR A PARTICULAR PURPOSE, TITLE, MERCHANTABILITY, AND NONINFRINGEMENT. THE COMPANY DOES NOT WARRANT OR REPRESENT THAT ANY HARDWARE OR HARDWARE INTERFACE PURCHASED OR LICENSED FROM THE COMPANY OR ITS SUPPLIERS OR OTHERWISE USED IN CONJUNCTION WITH THIS SOFTWARE OR SERVICES ARE SECURE, FREE FROM BUGS, VIRUSES, THREAT OF HACKERS, INTERRUPTION OR ERRORS, OR THAT THE SOFTWARE OR SERVICES WILL MEET YOUR REQUIREMENTS. FURTHER, THE COMPANY AND ITS SUPPLIERS DO NOT WARRANT OR GUARANTEE IN ANY WAY UNINTERRUPTED ACCESS TO THE INTERNET OR TO ANY OTHER SERVICE OR CONTENT OR DATA THROUGH THE SOFTWARE OR CONTINUED ACCESS TO ANY VERSION OF THE SOFTWARE (INCLUDING ANY TRIAL VERSION) OR TO THE DATA ENTERED INTO SUCH VERSION OF THE SOFTWARE AFTER THE TERM OR ANY TRIAL PERIOD IS OVER. IN THAT EVENT, TO THE EXTENT ANY IMPLIED WARRANTIES THAT CANNOT BE DISCLAIMED APPLY DUE TO LOCAL LAWS, THESE ARE LIMITED IN DURATION TO SIXTY (60) DAYS FROM THE DATE OF PURCHASE OR DELIVERY OF THE SOFTWARE, OR THE SHORTEST POSSIBLE DURATION, WHICHEVER IS LONGER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE SOFTWARE AND ANY RELATED SERVICES OR CONTENT ARE DESIGNED TO OPERATE AND PROVIDE INFORMATION WITH THE UNDERSTANDING THAT THE COMPANY AND ITS SUPPLIERS ARE NOT ENGAGED IN RENDERING LEGAL, ACCOUNTING OR OTHER PROFESSIONAL SERVICE. IF LEGAL ADVICE OR OTHER EXPERT ASSISTANCE IS REQUIRED, THE SERVICE OF A COMPETENT PROFESSIONAL SHOULD BE SOUGHT. THE COMPANY EXPRESSLY DISCLAIMS ANY REPRESENTATIONS OR WARRANTIES THAT YOUR USE OF THE SOFTWARE WILL SATISFY ANY STATUTORY OR REGULATORY OBLIGATIONS, OR WILL ASSIST WITH, GUARANTEE OR OTHERWISE ENSURE COMPLIANCE WITH ANY APPLICABLE LAWS OR REGULATIONS INCLUDING BUT NOT LIMITED TO THE HEALTH INSURANCE PORTABILITY AND ACCOUNTABILITY ACT OF 1996 (“HIPAA”), THE GRAMM-LEACH-BLILEY ACT OF 1999, THE SARBANES-OXLEY ACT OF 2002, OR OTHER FEDERAL OR STATE STATUTES OR REGULATIONS. YOU ARE SOLELY RESPONSIBLE FOR ENSURING THAT YOUR USE OF THIS SOFTWARE, RELATED SERVICES OR CONTENT IS IN ACCORDANCE WITH APPLICABLE LAW. IT IS YOUR RESPONSIBILITY TO KEEP ABREAST OF CHANGES IN LAWS, REGULATIONS AND ACCOUNTING PRACTICES THAT AFFECT YOU AND YOUR BUSINESS.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">10. LIMITATION OF LIABILITY AND DAMAGES. </span>YOU AGREE THAT IN NO EVENT WILL THE COMPANY OR ITS SUPPLIERS BE LIABLE FOR ANY LOSS, COST, LIABILITY OR DAMAGE INCURRED AS A RESULT OF YOUR RECEIPT OF, OR PARTICIPATION IN, THIRD PARTY SERVICES OFFERED IN CONNECTION WITH THE SOFTWARE OR SERVICES. THE ENTIRE CUMULATIVE LIABILITY OF THE COMPANY AND ITS SUPPLIERS FOR ANY REASON ARISING FROM OR RELATING TO THIS AGREEMENT, THE SOFTWARE OR ANY SERVICES SHALL BE LIMITED TO THE GREATER OF $100 OR THE HIGHEST AMOUNT PAID BY YOU TO COMPANY (OR IF YOU PAY AN AUTHORIZED RESELLER OR MASTER LICENSEE, TO SUCH RESELLER OR MASTER-LICENSEE) FOR A SINGLE MONTH’S USE OF THE SOFTWARE AND SERVICES DURING THE PREVIOUS TWELVE MONTHS, UNLESS OTHERWISE SEPARATELY AGREED BY THE COMPANY IN WRITING. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY AND ITS SUPPLIERS SHALL NOT BE LIABLE FOR ANY INDIRECT, SPECIAL, INCIDENTAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES OR FOR ANY DAMAGES RELATING TO LOSS OF BUSINESS, TELECOMMUNICATION FAILURES, THE LOSS, CORRUPTION OR THEFT OF DATA, VIRUSES, SPYWARE, LOSS OF PROFITS OR INVESTMENT, TAX POSITIONS TAKEN BY YOU, USE OF THE SOFTWARE WITH HARDWARE OR OTHER SOFTWARE THAT DOES NOT MEET THE COMPANY’S SYSTEMS REQUIREMENTS OR THE LIKE, WHETHER BASED IN CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR OTHERWISE, EVEN IF THE COMPANY, ITS SUPPLIERS OR ITS REPRESENTATIVES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES, AND EVEN IF A REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE. SOME STATES DO NOT ALLOW THE LIMITATION AND/OR EXCLUSION OF LIABILITY FOR INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU. THE LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS OF THE BARGAIN BETWEEN THE COMPANY AND YOU. THE COMPANY WOULD NOT BE ABLE TO HAVE PROVIDED THIS SOFTWARE OR SERVICES WITHOUT SUCH LIMITATIONS. YOU FURTHER AGREE AND ACKNOWLEDGE THAT YOU ARE ENTERING INTO THIS AGREEMENT WITH SOLELY THE COMPANY, AND THAT YOU WILL LOOK ONLY TO THE COMPANY, AND TO NO OTHER PARTY, IN CONNECTION WITH ANY CLAIMS, SUITS OR CAUSES OF ACTION ARISING FROM THE SOFTWARE, INCLUDING, WITHOUT LIMITATION, SERVICE INTERRUPTION, CORRUPTION OR LOSS OF DATA, OR ANY FAILURE TO PERFORM THE SERVICES HEREUNDER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE FOREGOING LIMITATION OF LIABILITY AND DISCLAIMER OF WARRANTIES SET FORTH IN PARAGRAPH 9 SHALL APPLY TO ANY CLAIMS THAT YOU MAY BRING AGAINST AN AUTHORIZED RESELLER OR MASTER LICENSEE IN CONNECTION WITH OR ARISING FROM THE EHOPPER SOFTWARE AND SERVICES.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">11. CONSENT TO CONDUCT BUSINESS ELECTRONICALLY/ RELEASE OF INFORMATION. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Consent to Electronic Communications.</span> the Company may be required by law to send “Communications” (as defined below) to you that may pertain to the Software, the use of information you may submit to the Company, and the Third Party Services you choose. Additionally, certain of the Third Party Services you choose may require Communications with the third parties who administer these programs. You agree that the Company, on behalf of itself, and others who administer such services (as applicable), may send Communications to you by email and/or may make Communications available to you by posting them at one or more of our sponsored websites, such as www.btbsoft.com. You consent to receive these Communications electronically.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">The term “Communications” means any notice, record, agreement, or other type of information that is made available to you or received from you in connection with the Software and the Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Consenting to Do Business Electronically.</span> The decision whether to do business electronically is yours, and you should consider whether you have the required hardware and software capabilities described below. Your consent to do business electronically, and our agreement to do so, applies to this Agreement, the Software and any applicable Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Communication Requirements.</span> In order to access and retain an electronic record of Communications, you will need: a computer, a monitor, a connection to an Internet service provider, an Internet browser software that supports 128-bit encryption, and an e-mail address. We do not provide ISP services. You must have your own Internet service provider.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16"><span class="ft14">Withdrawal of Consent.</span> If you later decide that you do not want to receive future Communications electronically, write to us at EHOPPER SERVICES LLC , 17 Battery Pl Ste # 715, New York, NY 10004 or email us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, with the term WITHDRAWAL OF CONSENT in the subject line. Clearly state your desire to withdraw consent of electronic communication. If you withdraw your consent to receive Communications electronically, we reserve the right to terminate your use of the Software, Services and Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(e)</span><span class="ft16"><span class="ft14">Changes to Your Email Address.</span> In order to provide you with the Communications, you agree to notify us promptly of any change in your email address. You can do so by emailing us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a> (please include both your old and new email addresses).</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">12. TERMINATION AND END OF TERM. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Termination for Cause.</span> The Company may terminate this Agreement immediately upon written notice if: (a) the Licensee materially breaches a non-payment obligation or representation of this Agreement, the Terms of Use of the EHOPPER website, or any applicable Sales Order Form, or if any authorized reseller or master licensee breaches its agreement with EHOPPER; (b) the Licensee fails to function as a going concern or operate in the ordinary course of business; (c) there is an assignment by the Licensee for the benefit its of creditors; or (d) there is a voluntary or involuntary bankruptcy filing by or against the Licensee, (e) any of the foregoing (b), (c) or (d) occurs with respect to the authorized reseller or master licensee. The Company may immediately terminate this Agreement without notice and opportunity to cure and disconnect the Software and services upon a breach of the payment terms in this Agreement. The Company may terminate this Agreement without cause, and for any or no reason, upon thirty (30) days prior written notice to Licensee, unless Licensee has an express written agreement providing for a longer period of notice.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Termination Fees.</span> Except where early termination occurs due to force majeure (as defined below), if Licensee terminates this Agreement prior to the end of any Term specified in a Sales Order Form, Licensee shall immediately pay all charges that would be due to the Company through the end of the Term (the “Termination Fee”), calculated based on the remaining number of months of the Term, at a monthly rate based on the total monthly charges for the month immediately prior to the Termination. Licensee acknowledges that such Termination Fee is not a penalty but is in the nature of a liquidated damage in connection with such early termination. The Company also shall be entitled to its reasonable attorneys’ or collection fees in connection with recovery of such liquidated damages, and this liquidation of damages provision shall not limit in any way the Company’s rights or remedies to seek and recover from Licensee damages or injunctive relief arising from, or in connection with, causes of action that the Company may have other than for early termination.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Effect of Termination.</span> Termination of this Agreement shall not limit either party from pursuing other remedies available to it, including injunctive relief, nor shall such termination relieve Licensee of its obligation to pay all fees that have accrued or are otherwise owed by Licensee, including Termination Fees. Upon expiration or termination of this Agreement: (i) the rights granted to Licensee under this Agreement will cease immediately upon the effective date of such termination and be of no further force or effect; and (ii) Licensee shall immediately surrender to the Company any device that stores the Software.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">13. INDEMNITY. </span>Licensee shall indemnify and hold the Company harmless from and against all loss, liability, damage and expense, including payment of the Company’s reasonable attorneys fees, caused or claimed by Licensee’s customers, officers, employees, agents, vendors, partners or contractors and arising from claims or demands: (a) for damages to property or for injury or death to persons, including without limitation any disability, death or Worker’s Compensation benefits; (b) arising from or relating to data transmitted, received or stored on or over the Company’s network by or through Licensee; (c) for infringement of a third party\'s proprietary rights based on any information, materials or access to property provided by Licensee; or (d) relating to the use by Licensee of any Software or Services provided under this Agreement. This provision shall survive termination of this Agreement. This indemnity and hold harmless provision shall apply to all claims Licensee may bring against any reseller or master licensee of the Company’s Software and Services relating to subject matter of this indemnity provision; to the extent that any such reseller or master licensee may seek contribution or indemnity from Company in connection with such claims, Licensee shall defend, indemnify and hold Company harmless Company to the same extent as if the claims against Company were brought by a third party – which is to say that Licensee will provide Company with a full indemnity in such instance, including in connection with the payment of Company’s reasonable attorneys’ fees.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">14. MISCELLANEOUS. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Equitable Remedies.</span> Licensee acknowledges that any breach or threatened breach by Licensee of any of the agreements or other or provisions contained in Paragraphs 1, 5, 12 and 13 of this Agreement will result in irreparable and continuing harm to the Company for which the Company would not have adequate remedy at law. Therefore Licensee acknowledges and agrees that in the event of any such breach or threatened breach (or any other breach or act which may otherwise be recognized to be cause irreparable harm), in addition to any other remedy which the Company may have at law or in equity, the Company shall be entitled to such injunctive relief or other equitable remedies to restrain Licensee from violating the provisions of this Agreement and Licensee hereby consents to the granting of such injunctive relief or other equitable remedy by any court of competent jurisdiction, without the Company having to prove the inadequacy of the available remedies at law or any actual damages (and without being required to post a bond or other security). Any such remedy sought or obtained shall not be considered either exclusive or a waiver of the rights of the Company to assert a claim for any other remedies it may have at law or in equity.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Severability and Waiver.</span> If any term or provision of this Agreement is held by a court of competent jurisdiction to be invalid, void, or unenforceable, the remainder of the terms and provisions set forth herein shall remain in full force and effect and shall in no way be affected, impaired or invalidated, and the parties hereto shall use their best efforts to find and employ an alternative means to achieve the same or substantially the same result as that contemplated by such term or provision. The waiver by the Company SOFT of any default or breach of this Agreement shall not constitute a waiver of any other or subsequent default or breach.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Governing Law.</span> This Agreement shall be governed by the laws of the State of New York without reference to its or any other state’s conflicts of law principles. Except for a “Intellectual Property Disputes” as defined below, the parties agree that all disputes, controversies, or claims between them (and including claims against the Company’s Suppliers) arising out of or relating to this Agreement or concerning the respective obligations hereunder of the parties hereto, shall be settled and determined by final and binding arbitration by a panel of a single arbitrator in accordance with and subject to the Commercial Arbitration Rules of the American Arbitration Association (“AAA”), or in the event that such entity is not in operation at the time such proceeding may be commenced, pursuant to the corresponding procedures of JAMS. The location of such arbitration shall be New York County, New York. Each party shall bear its own administrative costs and expenses of the arbitration proceeding, including arbitrator’s fees. Licensee waives the right to bring any class arbitration or join as a class member any class arbitration against the Company.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">With respect to “Intellectual Property Disputes”, each party hereby irrevocably submits to the exclusive personal jurisdiction of the courts of the State of New York, sitting in New York County, and the courts of the United States for the Southern District of New York. “Intellectual Property Disputes” shall be defined as those disputes (i) involving or relating to unauthorized use or copying of the software or improper use of the Company’s trademark rights, and/or (ii) any challenge to, or the enforcement of (including declaratory actions regarding the ownership, validity or infringement of) the intellectual property rights licensed hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">Each party irrevocably waives, to the fullest extent permitted by law, any objection which it may now or hereafter have to the laying of the venue of any such suit, action or proceeding brought in any such court, any claim that any such suit, action or proceeding brought in such a court has been brought in an inconvenient forum and the right to object, with respect to any such suit, action or proceeding brought in any such court, that such court does not have jurisdiction over such party. In any such suit, action or proceeding, each party waives, to the fullest extent it may effectively do so, personal service of any summons, complaint or other process and agrees that the service thereof may be made by certified or registered mail, addressed to such party at its address as set forth in the preamble hereinabove. Licensee further waives the right to a jury, and the right to join in (or bring as a class member) a class action against the Company in connection with any claim arising from or in connection with the Software, the Services, any third party services provided via or in connection with the Software.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">In the event that a Court Dispute involves a counterclaim by a party that would ordinarily be heard in arbitration, such counterclaim shall be severable from the Court Dispute, and shall proceed in arbitration, as if such dispute had been brought as an independent claim.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(d)</span><span class="ft15"><span class="ft14">Limitation on Actions.</span> Any action for breach of this Agreement or any other action otherwise arising out of this Agreement must be commenced by the party asserting such action within one (1) year from the date the right, claim, demand, or cause of action first occurs (or 1 year from reasonable discovery of the occurrence of the act or omission giving rise to such cause of action, if such cause of action is not reasonably discoverable), otherwise, such action shall be barred forever and waived by such party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(e)</span><span class="ft16"><span class="ft14">Assignment.</span> Neither this Agreement nor any rights granted hereunder may be sold, leased, assigned, or otherwise transferred, in whole or in part by Licensee, and any such attempted assignment shall be void and of no effect, without the advance written consent of the Company. The Company may freely assign, delegate, sublicense or transfer its rights and obligations hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(f)</span><span class="ft17"><span class="ft14">Force Majeure.</span> Neither Party shall be liable for any delay or failure in performance due to war, acts of terror, riots, embargoes, strikes, accidents, fire, acts of God, supplier or vendor failure, outage or malfunction of local or long distance telecommunications services, utility outage or other occurrence beyond such Party’s direct control (each, a “Force Majeure Event”). The non-performing Party shall notify the other Party of a Force Majeure Event, and if a Force Majeure Event continues for more than sixty (60) days, the Company or Licensee may cancel this Agreement with no further liability (except for any amounts due and not paid by Licensee) as a result of such Force Majeure Event.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(g)</span><span class="ft15"><span class="ft14">Attorneys’ Fees.</span> In any action to enforce the terms of this Agreement, the Company will be entitled to reasonable attorneys’ fees and other costs and expenses incurred by it in connection with such action or arbitral proceeding, including any appeal.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(h)</span><span class="ft16"><span class="ft14">Notices.</span> All notices required to be sent hereunder shall be in writing and shall be deemed to have been given upon (i) the date sent by confirmed facsimile, (ii) on the date it was delivered by courier, (iii) by email if to the Company at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, if to Licensee at the email address provided on the Sales Order Form, or (iv) if by certified mail return receipt requested, on the date received, to the addresses set forth above and to the attention of the signatories of this Agreement and the relevant Sales Order Form, or to such other address or individual as the parties may specify from time to time by written notice to the other Party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(i)</span><span class="ft17"><span class="ft14">Authorized Individual.</span> By downloading this agreement and installing the Software, you represent that you have read and understand all of the Terms and Provisions herein, and further that you, as an individual, are authorized to represent and to bind the Licensee to these terms.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(j)</span><span class="ft17"><span class="ft14">Survival.</span> In addition to as expressly set forth herein, Paragraphs 2, 3, 5, 6, 7, 9, 10, 12, 13 and 14 shall survive termination of this Agreement.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <p class="p51 ft3">Copyright © 2016 EHopper LLC, All rights reserved.</p>\r\n</div>\r\n';});


define('text!views/terms/TermsAndConditions-ES.html',[],function () { return '<STYLE type="text/css">\r\n    #page_1 {\r\n        position: relative;\r\n        overflow: hidden;\r\n        /*margin: 35px 0px 55px 96px;*/\r\n        padding: 0;\r\n        border: none;\r\n        width: 100%;\r\n    }\r\n\r\n    .ua-header {\r\n        text-align: center;\r\n    }\r\n\r\n        .ua-header p {\r\n            font: bold 15px \'Arial\';\r\n            line-height: 16px;\r\n        }\r\n\r\n    .ua-text {\r\n        font: 12px \'Arial\';\r\n        margin-top: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n        .ua-text ul {\r\n            list-style: none;\r\n        }\r\n\r\n    .bold {\r\n        font-weight: bold;\r\n    }\r\n\r\n    .ft3 {\r\n        font: 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft4 {\r\n        font: 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft5 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft6 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft7 {\r\n        font: bold 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft8 {\r\n        font: 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft9 {\r\n        font: 12px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft10 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 9px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft11 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft12 {\r\n        font: bold 11px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft13 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft14 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft15 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft16 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft17 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 16px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft18 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft19 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 19px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft20 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft21 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft22 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft23 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft24 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft25 {\r\n        font: italic 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft26 {\r\n        font: italic 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft27 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft28 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft29 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft30 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        color: #0000ff;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft31 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft32 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft33 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft34 {\r\n        font: 11px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft35 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft36 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft37 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 37px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft38 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 38px;\r\n        line-height: 15px;\r\n    }\r\n\r\n\r\n\r\n    .p51 {\r\n        text-align: left;\r\n        margin-top: 38px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p52 {\r\n        text-align: left;\r\n        margin-top: 1px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p53 {\r\n        text-align: left;\r\n        margin-top: 658px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    div.ua-text a {\r\n        text-decoration: underline;\r\n    }\r\n\r\n</STYLE>\r\n\r\n<div id="page_1">\r\n    <div class="ua-header">\r\n        <P>\r\n            EHOPPER POINT OF SALE<br />\r\n            MERCHANT USER SOFTWARE LICENSE<br />\r\n            AND SERVICES AGREEMENT\r\n        </P>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Thank you for choosing EHOPPER Point of Sale Software and Services. This Merchant User License together with the sales order form (as defined below) you enter into (the “Sales Order Form”) are referred to collectively as the “License” or the “Agreement”, and gives you certain non-exclusive rights and responsibilities depending on which version of the software and services package you purchase. \r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Software” shall mean the point of sale software provided to you, the merchant (“you” or “Licensee”), by EHopper Services LLC ( the “Company”, “we”, “us” or “our”) under this Agreement (or by any agreement You may have with a reseller or master licensee of the Company’s Software); the term “Software” shall include without limitation, any other programs, apps, tools, internet-based services, plug-ins, components and any “updates” made available to you (for example, Software maintenance, service information, help content, bug fixes, patches or maintenance releases etc.) or “upgrades” of the Software that the Company elects, in its sole discretion, to provide or make available to you after the date you obtained your initial copy of the Software.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Services” means the services selected by you in the most recent sales order form that you may enter into (the “Sales Order Form”), and any technical or attendant support services that are routinely offered by the Company THE COMPANY in connection with the Software, which are subject to change from time to time, in the Company’s sole and absolute discretion.  For purposes of this Agreement, the term “Sales Order Form” includes any invoice, billing sheet, payment schedule, or other written notice of fee or charge (including email notices from the Company or any authorized reseller or master licensee through whom you are provided access to the Software and Services) in connection with Your Use of the Software and Services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        This Agreement is effective as of the later of the date you click the “I accept” and download the Software. By installing the Software, you agree to be bound by the terms and conditions of this Agreement. If you do not accept this Agreement, you will not be able to use these EHOPPER software or services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You may be entitled to download updates to the Software that the Company generally makes available to other users of the Software, in the Company’s sole and absolute discretion.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">1. LICENSE GRANT AND RESTRICTIONS. </span>EHopper Services LLC, a New York limited liability company, subject to its own license of the Software, grants you (“you”, “your” and “Licensee” means you the Licensee on whose behalf the Software is licensed and Services are sold) the following non-exclusive, limited rights on the condition that you comply with all of the terms and conditions of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        License: This License is solely for commercial, in-store use by you within the United States, Puerto Rico, US Virgin Island and Canada, or other approved territory on a compatible tablet or mobile device (each a “CPU”), and is not for use on or in connection with any online sales or e-commerce transactions. You may install the Software on one (1) CPU <span class="ft14">per license</span>.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Your license to use the Software is conditioned on your compliance with the scope of this license, and any use by you outside this scope will cause the agreement to terminate automatically, and shall cause your license to be revoked automatically.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You are not licensed or permitted under this Agreement and you agree that you shall not, nor shall you assist or permit others to, do any of the following: (a) modify, adapt, translate, embed, rent or sublicense (including offering the Software to third parties in any manner, whether on an applications service provider or a time-sharing basis); (b) assign, loan, resell, rebrand, transfer or distribute the Software, CDROM(s), or related materials or create derivative works based upon the Software or any part thereof; (c) decompile, reverse engineer, or disassemble the Software; (d) copy the Software in whole or part, alter, adjust, repair or circumvent any aspect of the Software, or use trade secret information contained in the Software, to develop software to interface with the Software; (e) remove, alter or obscure any confidentiality or proprietary rights notices (including copyright notices) of the Company or its licensors on or within the Software or any copies of the Software; or (f) make the software available to any third party via any server or on the Internet. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Additionally, Licensee shall not use, nor shall it permit others to use the Software: (i) for any unlawful, invasive, infringing, defamatory, fraudulent or obscene purpose; (ii) to send any virus, worm, trojan horse or harmful code or attachment; (iii) to alter, steal, corrupt, evade, disable, destroy, trespass or violate any security or encryption of any computer file, database or network; (iv) so as to interfere with the use of the Company, its Suppliers, or connectivity partner network by other Licensees or authorized users; or (v) in violation of the acceptable use policies of the Company’s Suppliers or service providers, including its backbone providers. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Unless you have entered into an agreement to use an affiliate’s payment processing services, which agreement expressly provides for an extended term, the Company may terminate this License to you any time upon thirty (30) days’ written notice (email notice sent to the email address provided by you will suffice, whether or not received by you).\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">2. RESERVATION OF RIGHTS AND OWNERSHIP. </span>The Software is licensed (not sold) to you, and the Company, for itself and its licensors, reserves all rights not expressly granted to you in this Agreement. In order to continue using the software under license, you must continue to abide by the terms and conditions in this Agreement. The Software is protected by copyright, trade secret and other intellectual property laws. The Company and/or its licensors own the title, copyright, and other worldwide intellectual property rights in the Software and all copies of the Software. This Agreement does not grant you any rights to trademarks or service marks of the Company or those of its licensors. You further agree that you will not challenge the Company’s or its licensor’s copyrights in or to the Software, and further shall not challenge their rights in or to the EHOPPER trademark.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">3. THIRD PARTY SERVICES AND WEBSITES. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">In connection with the promotion or your use of the Software, you may be made aware of or offered services, features, products, and promotions provided by third parties, apart from the Company (“Third Party Services”). If you decide to use Third Party Services, you are responsible for reviewing them and understanding the terms and conditions governing any Third Party Services. For purposes of this Agreement, any authorized reseller or master licensee of EHOPPER Software and Services through whom you have been provided such Software shall be a “Third Party” and its services and website shall be, without limitation, considered “Third Party Services” and “Third Party Websites”. You authorize the Company to use and disclose your contact information, including name and address, for the purpose of making the Third Party Services you choose available to you. You also agree that the third party, and not the Company, is responsible for the performance of the Third Party Services, and that you will look only to such third parties in connection with the provision or any failure to provide such Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">The Software also may contain or reference links to third party websites operated by third parties (“Third Party Websites”). These links are provided as a convenience only. Such Third Party Websites are not under the control of the Company or its licensors, and neither the Company nor its licensor is responsible for the content of any Third Party Website or any link contained in a Third Party Website. Neither the company nor its licensors review, approve, monitor, endorse, warrant, or make any representations with respect to Third Party Websites, and the inclusion of any link in the Software or Services is not and does not imply an affiliation, sponsorship, endorsement, approval, investigation, verification or monitoring by the Company, its licensors of any information contained in any Third Party Website. In no event will the Company or its licensors be responsible for the information or contained at such Third Party Website or for your use of or inability to use such Website. Access to any Third Party Website is at your own risk, and you acknowledge and understand that linked Third Party Websites may contain terms and privacy policies that are different from those of the Company. The Company is not responsible for such terms, policies and content, and you agree and acknowledge that neither the Company nor its licensors shall have any liability for them.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">4. LICENSEE OBLIGATIONS. </span>In connection with this License You acknowledge and agree that you must: (a) provide for your own access to the World Wide Web and pay any service fees associated with such access, and (b) provide all equipment and services necessary for you to make sufficient connection to the World Wide Web to enable the Software and Services to be provided, including a tablet or other mobile device with an up-to-date compatible operating system, Ethernet, modem, and other equipment. You shall, at your own expense, provide all necessary preparations required to connect to the Software and Services and shall comply with the Company’s installation and maintenance specifications for delivery of the Software and the Services, and you are also solely responsible for the costs of any relocation of its equipment or installation of Software. You shall be responsible for the operation and maintenance of all hardware, software, cabling, services and components that are not provided to you by the Company, and if such items impair your use of the Software and any Services, you shall remain liable for any applicable payment to the Company for the Software and Services. Upon notice from the Company or any authorized reseller or master licensee, that any such component causes or is likely to cause a hazard, interference with or obstruction of the Services, you shall eliminate, repair or remedy such problematic component promptly, and the Company may disconnect the Software and Services immediately until such elimination, repair or remedy occurs. The Company shall not be responsible: (a) for the installation, operation, management or maintenance of any hardware, software, cabling or services not provided by the Company in connection with the Software and Services; (b) if any changes in the Software and Services cause hardware, software, configurations, cabling or services not provided by the Company to become obsolete or to require modification; (c) if any modification or configuration performed by you impairs the performance of the Software and Services hereunder; or (d) for the performance or availability of third party services or facilities provided hereunder. By entering into this Agreement, You represent that, to the best of your knowledge and belief, your use of the Software and Services does not directly or indirectly infringe the legal or contractual rights of a third party. You further represent and warrant that all information provided by you in connection with its license of this Software and Services is accurate, current and complete.\r\n    </div>\r\n    <div class="ua-text">\r\n        <span class="ft5">5. LICENSEE CONDUCT ON THE EHOPPER WEB SITE. </span>THE EHOPPER Website is to be used solely in connection with your business. While using the EHOPPER Website, or any other website provided or hosted by the Company or its licensors, including but not limited to: <span class="ft14">ehopper.com</span>, <span class="ft14">b2bsoft.com</span>, <span class="ft14">btbsoft.com</span>, <span class="ft14">b2bim.com</span>, and all other, that the Company of its licensors may create in the future, Licensee may not:\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">Restrict or inhibit any other user from using and enjoying any Service offered through such site;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Post or retransmit any unlawful or fraudulent, information of any kind in connection with the Software, Services or the Company Websites, including without limitation, any transmissions constituting or encouraging conduct that would constitute a criminal offense, give rise to civil liability, or otherwise violate any local, state, national or foreign law, including without limitation the U.S. export control laws and regulations;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">Access any user account apart from the account belonging to Licensee;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">Upload or transmit any information or software which contains a virus, trojan horse, worm or other harmful component;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(e)</span><span class="ft18">Post, publish, transmit, reproduce, distribute or in any way exploit any information, software or other material obtained through the Service for commercial purposes (other than as expressly permitted by the provider of such information, software or other material);</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(f)</span><span class="ft19">Post, publish, transmit, reproduce, or distribute in any way information, software or other material obtained through the Service or the the Company Website which is protected by copyright, publicity or privacy laws or other proprietary right, or derivative works with respect thereto, without obtaining permission of the copyright owner or other rights holder; or</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(g)</span><span class="ft18">Upload, post, publish, reproduce, transmit or distribute in any way any component of the Service itself or derivative works with respect thereto, as the Service is copyrighted as a collective work under U.S. copyright laws.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">6. NO OBLIGATION TO MONITOR. </span>The Company has no obligation to monitor the Software, Service or Third Party Service available through or in connection with its Software. However, Licensee acknowledges and agrees that the Company has the right to monitor the Software and Service electronically from time to time and to disclose any information as necessary or appropriate to satisfy any law, regulation or other governmental request, to operate the Software and Services properly, or to protect itself or its subscribers. The Company will not intentionally monitor or disclose any private electronic-mail message unless required by law.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">7. GENERAL PRACTICES REGARDING USE, STORAGE AND SERVICE ACCESS. </span>Licensee acknowledges that the Company may establish from time to time general practices and limits concerning use of the Software and Services, in its sole discretion, with or without notice, including without limitation, establishing the maximum amount of storage space Licensee have at any time, as well as limiting the number of times (and the maximum duration for which) Licensee may access the Software and Service in a given period of time. <span class="bold">Licensee agrees that the Company has no responsibility or liability for the deletion or failure to store any Content, messages or other communications or transaction information maintained or transmitted by the Software or Services.</span> Licensee understands that all Content, whether publicly posted or privately transmitted, is either your sole responsibility or the responsibility of the person from which such Content originated. This means that Licensee, and not the Company, is entirely responsible for all Content that Licensee uploads or otherwise transmits via the Software and Services. the Company does not control the Content uploaded or otherwise transmitted by Licensee or other Licensees and, as such, does not guarantee the accuracy, integrity or quality of such Content. "Content" means information, data, text (including but not limited to names of files, databases, directories and groups of the same), software, graphics, video, messages or other materials. Licensee therefore acknowledges that it is responsible for periodically backing up or downloading any data or Content that might be available in connection with the Software, and further acknowledges that the Company’s storage and making available of such Content or data is for convenience only, and that the Company shall have no liability in connection with or arising from any damage to, inaccuracies in, or inability of Licensee to access such Content or data, Licensee acknowledges and agrees that the Company shall have access to and may use Licensee’s client data, Licensee’s usage data, and other information for marketing and research purposes, to improve the Software and Services, to produce industry reports, for maintenance and support purposes, to provide Licensee with information regarding the Company’s affiliates or third party services, and further to satisfy any legal obligation that the Company reasonably believes it may have in such connection. You further agree that the Company shall have no obligation to you to retain the Content for more than thirty (30) days after termination of this Agreement, and may withhold providing you with access to Content pending payment by you of any fees or amounts that may be due under this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">8. FEES AND PAYMENT. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">At the outset of this License, there may be no charge to you to use this Software, provided that you adhere to the terms of the License. Notwithstanding the foregoing, in the event that the Company (or any authorized reseller or master licensee) provides written (including email) Sales Order Form to you that fees will be charged in connection with your continued use of the Software or Services, you agree to pay to the Company all fees for the Service or Software you license or use (including any overage fees), in accordance with the pricing and payment terms presented to you in such Sales Order Form. Where fees may be applicable, you will be billed using the billing method you select through your account management interface or as designated by you on a Sales Order Form, or Merchant Application. Payment by you of such fees is an express condition of this license, and non-payment of such fees will result in termination of your access to the Software and Services or unlicensed use, if such use continues. Fees paid by you are non-refundable, except as provided in these Terms or when required by law. In the event that fees are due under this Agreement, if Licensee is delinquent in any such payment on more than two (2) occasions in any twelve-month period, the Company may, upon written notice to Licensee, modify the payment terms to require full payment before the further provision of any Services or require other assurances to secure Licensee’s payment obligations hereunder. Licensee shall furnish financial information to the Company as the Company may, from time to time, reasonably request. Third Party Services, as well as any Services or Software upgrades or modules requested by Licensee may result in fees or other charges in addition to those set forth on the original Sales Order Form. Except as otherwise expressly stated in a particular Sales Order Form for the Services performed thereunder, the Company reserves the right to change the Services it offers to its Licensees generally and the related rates at any time, upon thirty (30) days’ notice. Licensee specifically acknowledges and agrees that it will not attempt to chargeback any fees authorized by it.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Licensee is responsible for any taxes, duties, fees or surcharges that are imposed or authorized by regulatory and governmental entities, including but not limited to sales, use, gross receipts taxes, surcharges, franchise fees, occupational, excise, universal service (state and federal) taxes and surcharges, and shall pay to the Company or reimburse the Company for amounts paid by the Company relating to Services provided to Licensee.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">If Licensee’s Service is disconnected due to nonpayment or late payment by Licensee, Licensee shall be responsible for all costs incurred by the Company resulting from such disconnection.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">If Licensee Fees are subsidized by third parties and such third parties decline to pay same Licensee shall be responsible for those fees based on the pricing on any applicable sales order form.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">9. DISCLAIMER OF WARRANTIES. </span>THE SOFTWARE, SERVICES AND ANY CONTENT ACCESSIBLE THROUGH THE SOFTWARE OR SERVICES ARE PROVIDED "AS-IS," AND TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY, ITS AFFILIATES, LICENSORS, PARTICIPATING FINANCIAL INSTITUTIONS, THIRD PARTY CONTENT OR SERVICE PROVIDERS, DEALERS AND SUPPLIERS (COLLECTIVELY “SUPPLIERS”) DISCLAIM ALL GUARANTEES AND WARRANTIES, WHETHER EXPRESS OR IMPLIED OR STATUTORY, REGARDING THIS SOFTWARE, SERVICES, CONTENT, CDROMS AND RELATED MATERIALS, INCLUDING ANY WARRANTY OF FITNESS FOR A PARTICULAR PURPOSE, TITLE, MERCHANTABILITY, AND NONINFRINGEMENT. THE COMPANY DOES NOT WARRANT OR REPRESENT THAT ANY HARDWARE OR HARDWARE INTERFACE PURCHASED OR LICENSED FROM THE COMPANY OR ITS SUPPLIERS OR OTHERWISE USED IN CONJUNCTION WITH THIS SOFTWARE OR SERVICES ARE SECURE, FREE FROM BUGS, VIRUSES, THREAT OF HACKERS, INTERRUPTION OR ERRORS, OR THAT THE SOFTWARE OR SERVICES WILL MEET YOUR REQUIREMENTS. FURTHER, THE COMPANY AND ITS SUPPLIERS DO NOT WARRANT OR GUARANTEE IN ANY WAY UNINTERRUPTED ACCESS TO THE INTERNET OR TO ANY OTHER SERVICE OR CONTENT OR DATA THROUGH THE SOFTWARE OR CONTINUED ACCESS TO ANY VERSION OF THE SOFTWARE (INCLUDING ANY TRIAL VERSION) OR TO THE DATA ENTERED INTO SUCH VERSION OF THE SOFTWARE AFTER THE TERM OR ANY TRIAL PERIOD IS OVER. IN THAT EVENT, TO THE EXTENT ANY IMPLIED WARRANTIES THAT CANNOT BE DISCLAIMED APPLY DUE TO LOCAL LAWS, THESE ARE LIMITED IN DURATION TO SIXTY (60) DAYS FROM THE DATE OF PURCHASE OR DELIVERY OF THE SOFTWARE, OR THE SHORTEST POSSIBLE DURATION, WHICHEVER IS LONGER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE SOFTWARE AND ANY RELATED SERVICES OR CONTENT ARE DESIGNED TO OPERATE AND PROVIDE INFORMATION WITH THE UNDERSTANDING THAT THE COMPANY AND ITS SUPPLIERS ARE NOT ENGAGED IN RENDERING LEGAL, ACCOUNTING OR OTHER PROFESSIONAL SERVICE. IF LEGAL ADVICE OR OTHER EXPERT ASSISTANCE IS REQUIRED, THE SERVICE OF A COMPETENT PROFESSIONAL SHOULD BE SOUGHT. THE COMPANY EXPRESSLY DISCLAIMS ANY REPRESENTATIONS OR WARRANTIES THAT YOUR USE OF THE SOFTWARE WILL SATISFY ANY STATUTORY OR REGULATORY OBLIGATIONS, OR WILL ASSIST WITH, GUARANTEE OR OTHERWISE ENSURE COMPLIANCE WITH ANY APPLICABLE LAWS OR REGULATIONS INCLUDING BUT NOT LIMITED TO THE HEALTH INSURANCE PORTABILITY AND ACCOUNTABILITY ACT OF 1996 (“HIPAA”), THE GRAMM-LEACH-BLILEY ACT OF 1999, THE SARBANES-OXLEY ACT OF 2002, OR OTHER FEDERAL OR STATE STATUTES OR REGULATIONS. YOU ARE SOLELY RESPONSIBLE FOR ENSURING THAT YOUR USE OF THIS SOFTWARE, RELATED SERVICES OR CONTENT IS IN ACCORDANCE WITH APPLICABLE LAW. IT IS YOUR RESPONSIBILITY TO KEEP ABREAST OF CHANGES IN LAWS, REGULATIONS AND ACCOUNTING PRACTICES THAT AFFECT YOU AND YOUR BUSINESS.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">10. LIMITATION OF LIABILITY AND DAMAGES. </span>YOU AGREE THAT IN NO EVENT WILL THE COMPANY OR ITS SUPPLIERS BE LIABLE FOR ANY LOSS, COST, LIABILITY OR DAMAGE INCURRED AS A RESULT OF YOUR RECEIPT OF, OR PARTICIPATION IN, THIRD PARTY SERVICES OFFERED IN CONNECTION WITH THE SOFTWARE OR SERVICES. THE ENTIRE CUMULATIVE LIABILITY OF THE COMPANY AND ITS SUPPLIERS FOR ANY REASON ARISING FROM OR RELATING TO THIS AGREEMENT, THE SOFTWARE OR ANY SERVICES SHALL BE LIMITED TO THE GREATER OF $100 OR THE HIGHEST AMOUNT PAID BY YOU TO COMPANY (OR IF YOU PAY AN AUTHORIZED RESELLER OR MASTER LICENSEE, TO SUCH RESELLER OR MASTER-LICENSEE) FOR A SINGLE MONTH’S USE OF THE SOFTWARE AND SERVICES DURING THE PREVIOUS TWELVE MONTHS, UNLESS OTHERWISE SEPARATELY AGREED BY THE COMPANY IN WRITING. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY AND ITS SUPPLIERS SHALL NOT BE LIABLE FOR ANY INDIRECT, SPECIAL, INCIDENTAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES OR FOR ANY DAMAGES RELATING TO LOSS OF BUSINESS, TELECOMMUNICATION FAILURES, THE LOSS, CORRUPTION OR THEFT OF DATA, VIRUSES, SPYWARE, LOSS OF PROFITS OR INVESTMENT, TAX POSITIONS TAKEN BY YOU, USE OF THE SOFTWARE WITH HARDWARE OR OTHER SOFTWARE THAT DOES NOT MEET THE COMPANY’S SYSTEMS REQUIREMENTS OR THE LIKE, WHETHER BASED IN CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR OTHERWISE, EVEN IF THE COMPANY, ITS SUPPLIERS OR ITS REPRESENTATIVES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES, AND EVEN IF A REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE. SOME STATES DO NOT ALLOW THE LIMITATION AND/OR EXCLUSION OF LIABILITY FOR INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU. THE LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS OF THE BARGAIN BETWEEN THE COMPANY AND YOU. THE COMPANY WOULD NOT BE ABLE TO HAVE PROVIDED THIS SOFTWARE OR SERVICES WITHOUT SUCH LIMITATIONS. YOU FURTHER AGREE AND ACKNOWLEDGE THAT YOU ARE ENTERING INTO THIS AGREEMENT WITH SOLELY THE COMPANY, AND THAT YOU WILL LOOK ONLY TO THE COMPANY, AND TO NO OTHER PARTY, IN CONNECTION WITH ANY CLAIMS, SUITS OR CAUSES OF ACTION ARISING FROM THE SOFTWARE, INCLUDING, WITHOUT LIMITATION, SERVICE INTERRUPTION, CORRUPTION OR LOSS OF DATA, OR ANY FAILURE TO PERFORM THE SERVICES HEREUNDER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE FOREGOING LIMITATION OF LIABILITY AND DISCLAIMER OF WARRANTIES SET FORTH IN PARAGRAPH 9 SHALL APPLY TO ANY CLAIMS THAT YOU MAY BRING AGAINST AN AUTHORIZED RESELLER OR MASTER LICENSEE IN CONNECTION WITH OR ARISING FROM THE EHOPPER SOFTWARE AND SERVICES.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">11. CONSENT TO CONDUCT BUSINESS ELECTRONICALLY/ RELEASE OF INFORMATION. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Consent to Electronic Communications.</span> the Company may be required by law to send “Communications” (as defined below) to you that may pertain to the Software, the use of information you may submit to the Company, and the Third Party Services you choose. Additionally, certain of the Third Party Services you choose may require Communications with the third parties who administer these programs. You agree that the Company, on behalf of itself, and others who administer such services (as applicable), may send Communications to you by email and/or may make Communications available to you by posting them at one or more of our sponsored websites, such as www.btbsoft.com. You consent to receive these Communications electronically.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">The term “Communications” means any notice, record, agreement, or other type of information that is made available to you or received from you in connection with the Software and the Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Consenting to Do Business Electronically.</span> The decision whether to do business electronically is yours, and you should consider whether you have the required hardware and software capabilities described below. Your consent to do business electronically, and our agreement to do so, applies to this Agreement, the Software and any applicable Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Communication Requirements.</span> In order to access and retain an electronic record of Communications, you will need: a computer, a monitor, a connection to an Internet service provider, an Internet browser software that supports 128-bit encryption, and an e-mail address. We do not provide ISP services. You must have your own Internet service provider.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16"><span class="ft14">Withdrawal of Consent.</span> If you later decide that you do not want to receive future Communications electronically, write to us at EHOPPER SERVICES LLC , 17 Battery Pl Ste # 715, New York, NY 10004 or email us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, with the term WITHDRAWAL OF CONSENT in the subject line. Clearly state your desire to withdraw consent of electronic communication. If you withdraw your consent to receive Communications electronically, we reserve the right to terminate your use of the Software, Services and Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(e)</span><span class="ft16"><span class="ft14">Changes to Your Email Address.</span> In order to provide you with the Communications, you agree to notify us promptly of any change in your email address. You can do so by emailing us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a> (please include both your old and new email addresses).</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">12. TERMINATION AND END OF TERM. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Termination for Cause.</span> The Company may terminate this Agreement immediately upon written notice if: (a) the Licensee materially breaches a non-payment obligation or representation of this Agreement, the Terms of Use of the EHOPPER website, or any applicable Sales Order Form, or if any authorized reseller or master licensee breaches its agreement with EHOPPER; (b) the Licensee fails to function as a going concern or operate in the ordinary course of business; (c) there is an assignment by the Licensee for the benefit its of creditors; or (d) there is a voluntary or involuntary bankruptcy filing by or against the Licensee, (e) any of the foregoing (b), (c) or (d) occurs with respect to the authorized reseller or master licensee. The Company may immediately terminate this Agreement without notice and opportunity to cure and disconnect the Software and services upon a breach of the payment terms in this Agreement. The Company may terminate this Agreement without cause, and for any or no reason, upon thirty (30) days prior written notice to Licensee, unless Licensee has an express written agreement providing for a longer period of notice.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Termination Fees.</span> Except where early termination occurs due to force majeure (as defined below), if Licensee terminates this Agreement prior to the end of any Term specified in a Sales Order Form, Licensee shall immediately pay all charges that would be due to the Company through the end of the Term (the “Termination Fee”), calculated based on the remaining number of months of the Term, at a monthly rate based on the total monthly charges for the month immediately prior to the Termination. Licensee acknowledges that such Termination Fee is not a penalty but is in the nature of a liquidated damage in connection with such early termination. The Company also shall be entitled to its reasonable attorneys’ or collection fees in connection with recovery of such liquidated damages, and this liquidation of damages provision shall not limit in any way the Company’s rights or remedies to seek and recover from Licensee damages or injunctive relief arising from, or in connection with, causes of action that the Company may have other than for early termination.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Effect of Termination.</span> Termination of this Agreement shall not limit either party from pursuing other remedies available to it, including injunctive relief, nor shall such termination relieve Licensee of its obligation to pay all fees that have accrued or are otherwise owed by Licensee, including Termination Fees. Upon expiration or termination of this Agreement: (i) the rights granted to Licensee under this Agreement will cease immediately upon the effective date of such termination and be of no further force or effect; and (ii) Licensee shall immediately surrender to the Company any device that stores the Software.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">13. INDEMNITY. </span>Licensee shall indemnify and hold the Company harmless from and against all loss, liability, damage and expense, including payment of the Company’s reasonable attorneys fees, caused or claimed by Licensee’s customers, officers, employees, agents, vendors, partners or contractors and arising from claims or demands: (a) for damages to property or for injury or death to persons, including without limitation any disability, death or Worker’s Compensation benefits; (b) arising from or relating to data transmitted, received or stored on or over the Company’s network by or through Licensee; (c) for infringement of a third party\'s proprietary rights based on any information, materials or access to property provided by Licensee; or (d) relating to the use by Licensee of any Software or Services provided under this Agreement. This provision shall survive termination of this Agreement. This indemnity and hold harmless provision shall apply to all claims Licensee may bring against any reseller or master licensee of the Company’s Software and Services relating to subject matter of this indemnity provision; to the extent that any such reseller or master licensee may seek contribution or indemnity from Company in connection with such claims, Licensee shall defend, indemnify and hold Company harmless Company to the same extent as if the claims against Company were brought by a third party – which is to say that Licensee will provide Company with a full indemnity in such instance, including in connection with the payment of Company’s reasonable attorneys’ fees.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">14. MISCELLANEOUS. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Equitable Remedies.</span> Licensee acknowledges that any breach or threatened breach by Licensee of any of the agreements or other or provisions contained in Paragraphs 1, 5, 12 and 13 of this Agreement will result in irreparable and continuing harm to the Company for which the Company would not have adequate remedy at law. Therefore Licensee acknowledges and agrees that in the event of any such breach or threatened breach (or any other breach or act which may otherwise be recognized to be cause irreparable harm), in addition to any other remedy which the Company may have at law or in equity, the Company shall be entitled to such injunctive relief or other equitable remedies to restrain Licensee from violating the provisions of this Agreement and Licensee hereby consents to the granting of such injunctive relief or other equitable remedy by any court of competent jurisdiction, without the Company having to prove the inadequacy of the available remedies at law or any actual damages (and without being required to post a bond or other security). Any such remedy sought or obtained shall not be considered either exclusive or a waiver of the rights of the Company to assert a claim for any other remedies it may have at law or in equity.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Severability and Waiver.</span> If any term or provision of this Agreement is held by a court of competent jurisdiction to be invalid, void, or unenforceable, the remainder of the terms and provisions set forth herein shall remain in full force and effect and shall in no way be affected, impaired or invalidated, and the parties hereto shall use their best efforts to find and employ an alternative means to achieve the same or substantially the same result as that contemplated by such term or provision. The waiver by the Company SOFT of any default or breach of this Agreement shall not constitute a waiver of any other or subsequent default or breach.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Governing Law.</span> This Agreement shall be governed by the laws of the State of New York without reference to its or any other state’s conflicts of law principles. Except for a “Intellectual Property Disputes” as defined below, the parties agree that all disputes, controversies, or claims between them (and including claims against the Company’s Suppliers) arising out of or relating to this Agreement or concerning the respective obligations hereunder of the parties hereto, shall be settled and determined by final and binding arbitration by a panel of a single arbitrator in accordance with and subject to the Commercial Arbitration Rules of the American Arbitration Association (“AAA”), or in the event that such entity is not in operation at the time such proceeding may be commenced, pursuant to the corresponding procedures of JAMS. The location of such arbitration shall be New York County, New York. Each party shall bear its own administrative costs and expenses of the arbitration proceeding, including arbitrator’s fees. Licensee waives the right to bring any class arbitration or join as a class member any class arbitration against the Company.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">With respect to “Intellectual Property Disputes”, each party hereby irrevocably submits to the exclusive personal jurisdiction of the courts of the State of New York, sitting in New York County, and the courts of the United States for the Southern District of New York. “Intellectual Property Disputes” shall be defined as those disputes (i) involving or relating to unauthorized use or copying of the software or improper use of the Company’s trademark rights, and/or (ii) any challenge to, or the enforcement of (including declaratory actions regarding the ownership, validity or infringement of) the intellectual property rights licensed hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">Each party irrevocably waives, to the fullest extent permitted by law, any objection which it may now or hereafter have to the laying of the venue of any such suit, action or proceeding brought in any such court, any claim that any such suit, action or proceeding brought in such a court has been brought in an inconvenient forum and the right to object, with respect to any such suit, action or proceeding brought in any such court, that such court does not have jurisdiction over such party. In any such suit, action or proceeding, each party waives, to the fullest extent it may effectively do so, personal service of any summons, complaint or other process and agrees that the service thereof may be made by certified or registered mail, addressed to such party at its address as set forth in the preamble hereinabove. Licensee further waives the right to a jury, and the right to join in (or bring as a class member) a class action against the Company in connection with any claim arising from or in connection with the Software, the Services, any third party services provided via or in connection with the Software.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">In the event that a Court Dispute involves a counterclaim by a party that would ordinarily be heard in arbitration, such counterclaim shall be severable from the Court Dispute, and shall proceed in arbitration, as if such dispute had been brought as an independent claim.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(d)</span><span class="ft15"><span class="ft14">Limitation on Actions.</span> Any action for breach of this Agreement or any other action otherwise arising out of this Agreement must be commenced by the party asserting such action within one (1) year from the date the right, claim, demand, or cause of action first occurs (or 1 year from reasonable discovery of the occurrence of the act or omission giving rise to such cause of action, if such cause of action is not reasonably discoverable), otherwise, such action shall be barred forever and waived by such party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(e)</span><span class="ft16"><span class="ft14">Assignment.</span> Neither this Agreement nor any rights granted hereunder may be sold, leased, assigned, or otherwise transferred, in whole or in part by Licensee, and any such attempted assignment shall be void and of no effect, without the advance written consent of the Company. The Company may freely assign, delegate, sublicense or transfer its rights and obligations hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(f)</span><span class="ft17"><span class="ft14">Force Majeure.</span> Neither Party shall be liable for any delay or failure in performance due to war, acts of terror, riots, embargoes, strikes, accidents, fire, acts of God, supplier or vendor failure, outage or malfunction of local or long distance telecommunications services, utility outage or other occurrence beyond such Party’s direct control (each, a “Force Majeure Event”). The non-performing Party shall notify the other Party of a Force Majeure Event, and if a Force Majeure Event continues for more than sixty (60) days, the Company or Licensee may cancel this Agreement with no further liability (except for any amounts due and not paid by Licensee) as a result of such Force Majeure Event.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(g)</span><span class="ft15"><span class="ft14">Attorneys’ Fees.</span> In any action to enforce the terms of this Agreement, the Company will be entitled to reasonable attorneys’ fees and other costs and expenses incurred by it in connection with such action or arbitral proceeding, including any appeal.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(h)</span><span class="ft16"><span class="ft14">Notices.</span> All notices required to be sent hereunder shall be in writing and shall be deemed to have been given upon (i) the date sent by confirmed facsimile, (ii) on the date it was delivered by courier, (iii) by email if to the Company at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, if to Licensee at the email address provided on the Sales Order Form, or (iv) if by certified mail return receipt requested, on the date received, to the addresses set forth above and to the attention of the signatories of this Agreement and the relevant Sales Order Form, or to such other address or individual as the parties may specify from time to time by written notice to the other Party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(i)</span><span class="ft17"><span class="ft14">Authorized Individual.</span> By downloading this agreement and installing the Software, you represent that you have read and understand all of the Terms and Provisions herein, and further that you, as an individual, are authorized to represent and to bind the Licensee to these terms.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(j)</span><span class="ft17"><span class="ft14">Survival.</span> In addition to as expressly set forth herein, Paragraphs 2, 3, 5, 6, 7, 9, 10, 12, 13 and 14 shall survive termination of this Agreement.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <p class="p51 ft3">Copyright © 2016 EHopper LLC, All rights reserved.</p>\r\n</div>\r\n';});


define('text!views/terms/TermsAndConditions-FR.html',[],function () { return '<STYLE type="text/css">\r\n    #page_1 {\r\n        position: relative;\r\n        overflow: hidden;\r\n        /*margin: 35px 0px 55px 96px;*/\r\n        padding: 0;\r\n        border: none;\r\n        width: 100%;\r\n    }\r\n\r\n    .ua-header {\r\n        text-align: center;\r\n    }\r\n\r\n        .ua-header p {\r\n            font: bold 15px \'Arial\';\r\n            line-height: 16px;\r\n        }\r\n\r\n    .ua-text {\r\n        font: 12px \'Arial\';\r\n        margin-top: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n        .ua-text ul {\r\n            list-style: none;\r\n        }\r\n\r\n    .bold {\r\n        font-weight: bold;\r\n    }\r\n\r\n    .ft3 {\r\n        font: 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft4 {\r\n        font: 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft5 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft6 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft7 {\r\n        font: bold 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft8 {\r\n        font: 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft9 {\r\n        font: 12px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft10 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 9px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft11 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft12 {\r\n        font: bold 11px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft13 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft14 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft15 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft16 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft17 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 16px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft18 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft19 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 19px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft20 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft21 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft22 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft23 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft24 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft25 {\r\n        font: italic 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft26 {\r\n        font: italic 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft27 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft28 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft29 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft30 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        color: #0000ff;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft31 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft32 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft33 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft34 {\r\n        font: 11px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft35 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft36 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft37 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 37px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft38 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 38px;\r\n        line-height: 15px;\r\n    }\r\n\r\n\r\n\r\n    .p51 {\r\n        text-align: left;\r\n        margin-top: 38px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p52 {\r\n        text-align: left;\r\n        margin-top: 1px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p53 {\r\n        text-align: left;\r\n        margin-top: 658px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    div.ua-text a {\r\n        text-decoration: underline;\r\n    }\r\n\r\n</STYLE>\r\n\r\n<div id="page_1">\r\n    <div class="ua-header">\r\n        <P>\r\n            EHOPPER POINT OF SALE<br />\r\n            MERCHANT USER SOFTWARE LICENSE<br />\r\n            AND SERVICES AGREEMENT\r\n        </P>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Thank you for choosing EHOPPER Point of Sale Software and Services. This Merchant User License together with the sales order form (as defined below) you enter into (the “Sales Order Form”) are referred to collectively as the “License” or the “Agreement”, and gives you certain non-exclusive rights and responsibilities depending on which version of the software and services package you purchase. \r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Software” shall mean the point of sale software provided to you, the merchant (“you” or “Licensee”), by EHopper Services LLC ( the “Company”, “we”, “us” or “our”) under this Agreement (or by any agreement You may have with a reseller or master licensee of the Company’s Software); the term “Software” shall include without limitation, any other programs, apps, tools, internet-based services, plug-ins, components and any “updates” made available to you (for example, Software maintenance, service information, help content, bug fixes, patches or maintenance releases etc.) or “upgrades” of the Software that the Company elects, in its sole discretion, to provide or make available to you after the date you obtained your initial copy of the Software.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Services” means the services selected by you in the most recent sales order form that you may enter into (the “Sales Order Form”), and any technical or attendant support services that are routinely offered by the Company THE COMPANY in connection with the Software, which are subject to change from time to time, in the Company’s sole and absolute discretion.  For purposes of this Agreement, the term “Sales Order Form” includes any invoice, billing sheet, payment schedule, or other written notice of fee or charge (including email notices from the Company or any authorized reseller or master licensee through whom you are provided access to the Software and Services) in connection with Your Use of the Software and Services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        This Agreement is effective as of the later of the date you click the “I accept” and download the Software. By installing the Software, you agree to be bound by the terms and conditions of this Agreement. If you do not accept this Agreement, you will not be able to use these EHOPPER software or services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You may be entitled to download updates to the Software that the Company generally makes available to other users of the Software, in the Company’s sole and absolute discretion.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">1. LICENSE GRANT AND RESTRICTIONS. </span>EHopper Services LLC, a New York limited liability company, subject to its own license of the Software, grants you (“you”, “your” and “Licensee” means you the Licensee on whose behalf the Software is licensed and Services are sold) the following non-exclusive, limited rights on the condition that you comply with all of the terms and conditions of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        License: This License is solely for commercial, in-store use by you within the United States, Puerto Rico, US Virgin Island and Canada, or other approved territory on a compatible tablet or mobile device (each a “CPU”), and is not for use on or in connection with any online sales or e-commerce transactions. You may install the Software on one (1) CPU <span class="ft14">per license</span>.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Your license to use the Software is conditioned on your compliance with the scope of this license, and any use by you outside this scope will cause the agreement to terminate automatically, and shall cause your license to be revoked automatically.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You are not licensed or permitted under this Agreement and you agree that you shall not, nor shall you assist or permit others to, do any of the following: (a) modify, adapt, translate, embed, rent or sublicense (including offering the Software to third parties in any manner, whether on an applications service provider or a time-sharing basis); (b) assign, loan, resell, rebrand, transfer or distribute the Software, CDROM(s), or related materials or create derivative works based upon the Software or any part thereof; (c) decompile, reverse engineer, or disassemble the Software; (d) copy the Software in whole or part, alter, adjust, repair or circumvent any aspect of the Software, or use trade secret information contained in the Software, to develop software to interface with the Software; (e) remove, alter or obscure any confidentiality or proprietary rights notices (including copyright notices) of the Company or its licensors on or within the Software or any copies of the Software; or (f) make the software available to any third party via any server or on the Internet. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Additionally, Licensee shall not use, nor shall it permit others to use the Software: (i) for any unlawful, invasive, infringing, defamatory, fraudulent or obscene purpose; (ii) to send any virus, worm, trojan horse or harmful code or attachment; (iii) to alter, steal, corrupt, evade, disable, destroy, trespass or violate any security or encryption of any computer file, database or network; (iv) so as to interfere with the use of the Company, its Suppliers, or connectivity partner network by other Licensees or authorized users; or (v) in violation of the acceptable use policies of the Company’s Suppliers or service providers, including its backbone providers. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Unless you have entered into an agreement to use an affiliate’s payment processing services, which agreement expressly provides for an extended term, the Company may terminate this License to you any time upon thirty (30) days’ written notice (email notice sent to the email address provided by you will suffice, whether or not received by you).\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">2. RESERVATION OF RIGHTS AND OWNERSHIP. </span>The Software is licensed (not sold) to you, and the Company, for itself and its licensors, reserves all rights not expressly granted to you in this Agreement. In order to continue using the software under license, you must continue to abide by the terms and conditions in this Agreement. The Software is protected by copyright, trade secret and other intellectual property laws. The Company and/or its licensors own the title, copyright, and other worldwide intellectual property rights in the Software and all copies of the Software. This Agreement does not grant you any rights to trademarks or service marks of the Company or those of its licensors. You further agree that you will not challenge the Company’s or its licensor’s copyrights in or to the Software, and further shall not challenge their rights in or to the EHOPPER trademark.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">3. THIRD PARTY SERVICES AND WEBSITES. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">In connection with the promotion or your use of the Software, you may be made aware of or offered services, features, products, and promotions provided by third parties, apart from the Company (“Third Party Services”). If you decide to use Third Party Services, you are responsible for reviewing them and understanding the terms and conditions governing any Third Party Services. For purposes of this Agreement, any authorized reseller or master licensee of EHOPPER Software and Services through whom you have been provided such Software shall be a “Third Party” and its services and website shall be, without limitation, considered “Third Party Services” and “Third Party Websites”. You authorize the Company to use and disclose your contact information, including name and address, for the purpose of making the Third Party Services you choose available to you. You also agree that the third party, and not the Company, is responsible for the performance of the Third Party Services, and that you will look only to such third parties in connection with the provision or any failure to provide such Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">The Software also may contain or reference links to third party websites operated by third parties (“Third Party Websites”). These links are provided as a convenience only. Such Third Party Websites are not under the control of the Company or its licensors, and neither the Company nor its licensor is responsible for the content of any Third Party Website or any link contained in a Third Party Website. Neither the company nor its licensors review, approve, monitor, endorse, warrant, or make any representations with respect to Third Party Websites, and the inclusion of any link in the Software or Services is not and does not imply an affiliation, sponsorship, endorsement, approval, investigation, verification or monitoring by the Company, its licensors of any information contained in any Third Party Website. In no event will the Company or its licensors be responsible for the information or contained at such Third Party Website or for your use of or inability to use such Website. Access to any Third Party Website is at your own risk, and you acknowledge and understand that linked Third Party Websites may contain terms and privacy policies that are different from those of the Company. The Company is not responsible for such terms, policies and content, and you agree and acknowledge that neither the Company nor its licensors shall have any liability for them.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">4. LICENSEE OBLIGATIONS. </span>In connection with this License You acknowledge and agree that you must: (a) provide for your own access to the World Wide Web and pay any service fees associated with such access, and (b) provide all equipment and services necessary for you to make sufficient connection to the World Wide Web to enable the Software and Services to be provided, including a tablet or other mobile device with an up-to-date compatible operating system, Ethernet, modem, and other equipment. You shall, at your own expense, provide all necessary preparations required to connect to the Software and Services and shall comply with the Company’s installation and maintenance specifications for delivery of the Software and the Services, and you are also solely responsible for the costs of any relocation of its equipment or installation of Software. You shall be responsible for the operation and maintenance of all hardware, software, cabling, services and components that are not provided to you by the Company, and if such items impair your use of the Software and any Services, you shall remain liable for any applicable payment to the Company for the Software and Services. Upon notice from the Company or any authorized reseller or master licensee, that any such component causes or is likely to cause a hazard, interference with or obstruction of the Services, you shall eliminate, repair or remedy such problematic component promptly, and the Company may disconnect the Software and Services immediately until such elimination, repair or remedy occurs. The Company shall not be responsible: (a) for the installation, operation, management or maintenance of any hardware, software, cabling or services not provided by the Company in connection with the Software and Services; (b) if any changes in the Software and Services cause hardware, software, configurations, cabling or services not provided by the Company to become obsolete or to require modification; (c) if any modification or configuration performed by you impairs the performance of the Software and Services hereunder; or (d) for the performance or availability of third party services or facilities provided hereunder. By entering into this Agreement, You represent that, to the best of your knowledge and belief, your use of the Software and Services does not directly or indirectly infringe the legal or contractual rights of a third party. You further represent and warrant that all information provided by you in connection with its license of this Software and Services is accurate, current and complete.\r\n    </div>\r\n    <div class="ua-text">\r\n        <span class="ft5">5. LICENSEE CONDUCT ON THE EHOPPER WEB SITE. </span>THE EHOPPER Website is to be used solely in connection with your business. While using the EHOPPER Website, or any other website provided or hosted by the Company or its licensors, including but not limited to: <span class="ft14">ehopper.com</span>, <span class="ft14">b2bsoft.com</span>, <span class="ft14">btbsoft.com</span>, <span class="ft14">b2bim.com</span>, and all other, that the Company of its licensors may create in the future, Licensee may not:\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">Restrict or inhibit any other user from using and enjoying any Service offered through such site;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Post or retransmit any unlawful or fraudulent, information of any kind in connection with the Software, Services or the Company Websites, including without limitation, any transmissions constituting or encouraging conduct that would constitute a criminal offense, give rise to civil liability, or otherwise violate any local, state, national or foreign law, including without limitation the U.S. export control laws and regulations;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">Access any user account apart from the account belonging to Licensee;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">Upload or transmit any information or software which contains a virus, trojan horse, worm or other harmful component;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(e)</span><span class="ft18">Post, publish, transmit, reproduce, distribute or in any way exploit any information, software or other material obtained through the Service for commercial purposes (other than as expressly permitted by the provider of such information, software or other material);</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(f)</span><span class="ft19">Post, publish, transmit, reproduce, or distribute in any way information, software or other material obtained through the Service or the the Company Website which is protected by copyright, publicity or privacy laws or other proprietary right, or derivative works with respect thereto, without obtaining permission of the copyright owner or other rights holder; or</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(g)</span><span class="ft18">Upload, post, publish, reproduce, transmit or distribute in any way any component of the Service itself or derivative works with respect thereto, as the Service is copyrighted as a collective work under U.S. copyright laws.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">6. NO OBLIGATION TO MONITOR. </span>The Company has no obligation to monitor the Software, Service or Third Party Service available through or in connection with its Software. However, Licensee acknowledges and agrees that the Company has the right to monitor the Software and Service electronically from time to time and to disclose any information as necessary or appropriate to satisfy any law, regulation or other governmental request, to operate the Software and Services properly, or to protect itself or its subscribers. The Company will not intentionally monitor or disclose any private electronic-mail message unless required by law.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">7. GENERAL PRACTICES REGARDING USE, STORAGE AND SERVICE ACCESS. </span>Licensee acknowledges that the Company may establish from time to time general practices and limits concerning use of the Software and Services, in its sole discretion, with or without notice, including without limitation, establishing the maximum amount of storage space Licensee have at any time, as well as limiting the number of times (and the maximum duration for which) Licensee may access the Software and Service in a given period of time. <span class="bold">Licensee agrees that the Company has no responsibility or liability for the deletion or failure to store any Content, messages or other communications or transaction information maintained or transmitted by the Software or Services.</span> Licensee understands that all Content, whether publicly posted or privately transmitted, is either your sole responsibility or the responsibility of the person from which such Content originated. This means that Licensee, and not the Company, is entirely responsible for all Content that Licensee uploads or otherwise transmits via the Software and Services. the Company does not control the Content uploaded or otherwise transmitted by Licensee or other Licensees and, as such, does not guarantee the accuracy, integrity or quality of such Content. "Content" means information, data, text (including but not limited to names of files, databases, directories and groups of the same), software, graphics, video, messages or other materials. Licensee therefore acknowledges that it is responsible for periodically backing up or downloading any data or Content that might be available in connection with the Software, and further acknowledges that the Company’s storage and making available of such Content or data is for convenience only, and that the Company shall have no liability in connection with or arising from any damage to, inaccuracies in, or inability of Licensee to access such Content or data, Licensee acknowledges and agrees that the Company shall have access to and may use Licensee’s client data, Licensee’s usage data, and other information for marketing and research purposes, to improve the Software and Services, to produce industry reports, for maintenance and support purposes, to provide Licensee with information regarding the Company’s affiliates or third party services, and further to satisfy any legal obligation that the Company reasonably believes it may have in such connection. You further agree that the Company shall have no obligation to you to retain the Content for more than thirty (30) days after termination of this Agreement, and may withhold providing you with access to Content pending payment by you of any fees or amounts that may be due under this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">8. FEES AND PAYMENT. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">At the outset of this License, there may be no charge to you to use this Software, provided that you adhere to the terms of the License. Notwithstanding the foregoing, in the event that the Company (or any authorized reseller or master licensee) provides written (including email) Sales Order Form to you that fees will be charged in connection with your continued use of the Software or Services, you agree to pay to the Company all fees for the Service or Software you license or use (including any overage fees), in accordance with the pricing and payment terms presented to you in such Sales Order Form. Where fees may be applicable, you will be billed using the billing method you select through your account management interface or as designated by you on a Sales Order Form, or Merchant Application. Payment by you of such fees is an express condition of this license, and non-payment of such fees will result in termination of your access to the Software and Services or unlicensed use, if such use continues. Fees paid by you are non-refundable, except as provided in these Terms or when required by law. In the event that fees are due under this Agreement, if Licensee is delinquent in any such payment on more than two (2) occasions in any twelve-month period, the Company may, upon written notice to Licensee, modify the payment terms to require full payment before the further provision of any Services or require other assurances to secure Licensee’s payment obligations hereunder. Licensee shall furnish financial information to the Company as the Company may, from time to time, reasonably request. Third Party Services, as well as any Services or Software upgrades or modules requested by Licensee may result in fees or other charges in addition to those set forth on the original Sales Order Form. Except as otherwise expressly stated in a particular Sales Order Form for the Services performed thereunder, the Company reserves the right to change the Services it offers to its Licensees generally and the related rates at any time, upon thirty (30) days’ notice. Licensee specifically acknowledges and agrees that it will not attempt to chargeback any fees authorized by it.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Licensee is responsible for any taxes, duties, fees or surcharges that are imposed or authorized by regulatory and governmental entities, including but not limited to sales, use, gross receipts taxes, surcharges, franchise fees, occupational, excise, universal service (state and federal) taxes and surcharges, and shall pay to the Company or reimburse the Company for amounts paid by the Company relating to Services provided to Licensee.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">If Licensee’s Service is disconnected due to nonpayment or late payment by Licensee, Licensee shall be responsible for all costs incurred by the Company resulting from such disconnection.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">If Licensee Fees are subsidized by third parties and such third parties decline to pay same Licensee shall be responsible for those fees based on the pricing on any applicable sales order form.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">9. DISCLAIMER OF WARRANTIES. </span>THE SOFTWARE, SERVICES AND ANY CONTENT ACCESSIBLE THROUGH THE SOFTWARE OR SERVICES ARE PROVIDED "AS-IS," AND TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY, ITS AFFILIATES, LICENSORS, PARTICIPATING FINANCIAL INSTITUTIONS, THIRD PARTY CONTENT OR SERVICE PROVIDERS, DEALERS AND SUPPLIERS (COLLECTIVELY “SUPPLIERS”) DISCLAIM ALL GUARANTEES AND WARRANTIES, WHETHER EXPRESS OR IMPLIED OR STATUTORY, REGARDING THIS SOFTWARE, SERVICES, CONTENT, CDROMS AND RELATED MATERIALS, INCLUDING ANY WARRANTY OF FITNESS FOR A PARTICULAR PURPOSE, TITLE, MERCHANTABILITY, AND NONINFRINGEMENT. THE COMPANY DOES NOT WARRANT OR REPRESENT THAT ANY HARDWARE OR HARDWARE INTERFACE PURCHASED OR LICENSED FROM THE COMPANY OR ITS SUPPLIERS OR OTHERWISE USED IN CONJUNCTION WITH THIS SOFTWARE OR SERVICES ARE SECURE, FREE FROM BUGS, VIRUSES, THREAT OF HACKERS, INTERRUPTION OR ERRORS, OR THAT THE SOFTWARE OR SERVICES WILL MEET YOUR REQUIREMENTS. FURTHER, THE COMPANY AND ITS SUPPLIERS DO NOT WARRANT OR GUARANTEE IN ANY WAY UNINTERRUPTED ACCESS TO THE INTERNET OR TO ANY OTHER SERVICE OR CONTENT OR DATA THROUGH THE SOFTWARE OR CONTINUED ACCESS TO ANY VERSION OF THE SOFTWARE (INCLUDING ANY TRIAL VERSION) OR TO THE DATA ENTERED INTO SUCH VERSION OF THE SOFTWARE AFTER THE TERM OR ANY TRIAL PERIOD IS OVER. IN THAT EVENT, TO THE EXTENT ANY IMPLIED WARRANTIES THAT CANNOT BE DISCLAIMED APPLY DUE TO LOCAL LAWS, THESE ARE LIMITED IN DURATION TO SIXTY (60) DAYS FROM THE DATE OF PURCHASE OR DELIVERY OF THE SOFTWARE, OR THE SHORTEST POSSIBLE DURATION, WHICHEVER IS LONGER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE SOFTWARE AND ANY RELATED SERVICES OR CONTENT ARE DESIGNED TO OPERATE AND PROVIDE INFORMATION WITH THE UNDERSTANDING THAT THE COMPANY AND ITS SUPPLIERS ARE NOT ENGAGED IN RENDERING LEGAL, ACCOUNTING OR OTHER PROFESSIONAL SERVICE. IF LEGAL ADVICE OR OTHER EXPERT ASSISTANCE IS REQUIRED, THE SERVICE OF A COMPETENT PROFESSIONAL SHOULD BE SOUGHT. THE COMPANY EXPRESSLY DISCLAIMS ANY REPRESENTATIONS OR WARRANTIES THAT YOUR USE OF THE SOFTWARE WILL SATISFY ANY STATUTORY OR REGULATORY OBLIGATIONS, OR WILL ASSIST WITH, GUARANTEE OR OTHERWISE ENSURE COMPLIANCE WITH ANY APPLICABLE LAWS OR REGULATIONS INCLUDING BUT NOT LIMITED TO THE HEALTH INSURANCE PORTABILITY AND ACCOUNTABILITY ACT OF 1996 (“HIPAA”), THE GRAMM-LEACH-BLILEY ACT OF 1999, THE SARBANES-OXLEY ACT OF 2002, OR OTHER FEDERAL OR STATE STATUTES OR REGULATIONS. YOU ARE SOLELY RESPONSIBLE FOR ENSURING THAT YOUR USE OF THIS SOFTWARE, RELATED SERVICES OR CONTENT IS IN ACCORDANCE WITH APPLICABLE LAW. IT IS YOUR RESPONSIBILITY TO KEEP ABREAST OF CHANGES IN LAWS, REGULATIONS AND ACCOUNTING PRACTICES THAT AFFECT YOU AND YOUR BUSINESS.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">10. LIMITATION OF LIABILITY AND DAMAGES. </span>YOU AGREE THAT IN NO EVENT WILL THE COMPANY OR ITS SUPPLIERS BE LIABLE FOR ANY LOSS, COST, LIABILITY OR DAMAGE INCURRED AS A RESULT OF YOUR RECEIPT OF, OR PARTICIPATION IN, THIRD PARTY SERVICES OFFERED IN CONNECTION WITH THE SOFTWARE OR SERVICES. THE ENTIRE CUMULATIVE LIABILITY OF THE COMPANY AND ITS SUPPLIERS FOR ANY REASON ARISING FROM OR RELATING TO THIS AGREEMENT, THE SOFTWARE OR ANY SERVICES SHALL BE LIMITED TO THE GREATER OF $100 OR THE HIGHEST AMOUNT PAID BY YOU TO COMPANY (OR IF YOU PAY AN AUTHORIZED RESELLER OR MASTER LICENSEE, TO SUCH RESELLER OR MASTER-LICENSEE) FOR A SINGLE MONTH’S USE OF THE SOFTWARE AND SERVICES DURING THE PREVIOUS TWELVE MONTHS, UNLESS OTHERWISE SEPARATELY AGREED BY THE COMPANY IN WRITING. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY AND ITS SUPPLIERS SHALL NOT BE LIABLE FOR ANY INDIRECT, SPECIAL, INCIDENTAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES OR FOR ANY DAMAGES RELATING TO LOSS OF BUSINESS, TELECOMMUNICATION FAILURES, THE LOSS, CORRUPTION OR THEFT OF DATA, VIRUSES, SPYWARE, LOSS OF PROFITS OR INVESTMENT, TAX POSITIONS TAKEN BY YOU, USE OF THE SOFTWARE WITH HARDWARE OR OTHER SOFTWARE THAT DOES NOT MEET THE COMPANY’S SYSTEMS REQUIREMENTS OR THE LIKE, WHETHER BASED IN CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR OTHERWISE, EVEN IF THE COMPANY, ITS SUPPLIERS OR ITS REPRESENTATIVES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES, AND EVEN IF A REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE. SOME STATES DO NOT ALLOW THE LIMITATION AND/OR EXCLUSION OF LIABILITY FOR INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU. THE LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS OF THE BARGAIN BETWEEN THE COMPANY AND YOU. THE COMPANY WOULD NOT BE ABLE TO HAVE PROVIDED THIS SOFTWARE OR SERVICES WITHOUT SUCH LIMITATIONS. YOU FURTHER AGREE AND ACKNOWLEDGE THAT YOU ARE ENTERING INTO THIS AGREEMENT WITH SOLELY THE COMPANY, AND THAT YOU WILL LOOK ONLY TO THE COMPANY, AND TO NO OTHER PARTY, IN CONNECTION WITH ANY CLAIMS, SUITS OR CAUSES OF ACTION ARISING FROM THE SOFTWARE, INCLUDING, WITHOUT LIMITATION, SERVICE INTERRUPTION, CORRUPTION OR LOSS OF DATA, OR ANY FAILURE TO PERFORM THE SERVICES HEREUNDER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE FOREGOING LIMITATION OF LIABILITY AND DISCLAIMER OF WARRANTIES SET FORTH IN PARAGRAPH 9 SHALL APPLY TO ANY CLAIMS THAT YOU MAY BRING AGAINST AN AUTHORIZED RESELLER OR MASTER LICENSEE IN CONNECTION WITH OR ARISING FROM THE EHOPPER SOFTWARE AND SERVICES.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">11. CONSENT TO CONDUCT BUSINESS ELECTRONICALLY/ RELEASE OF INFORMATION. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Consent to Electronic Communications.</span> the Company may be required by law to send “Communications” (as defined below) to you that may pertain to the Software, the use of information you may submit to the Company, and the Third Party Services you choose. Additionally, certain of the Third Party Services you choose may require Communications with the third parties who administer these programs. You agree that the Company, on behalf of itself, and others who administer such services (as applicable), may send Communications to you by email and/or may make Communications available to you by posting them at one or more of our sponsored websites, such as www.btbsoft.com. You consent to receive these Communications electronically.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">The term “Communications” means any notice, record, agreement, or other type of information that is made available to you or received from you in connection with the Software and the Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Consenting to Do Business Electronically.</span> The decision whether to do business electronically is yours, and you should consider whether you have the required hardware and software capabilities described below. Your consent to do business electronically, and our agreement to do so, applies to this Agreement, the Software and any applicable Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Communication Requirements.</span> In order to access and retain an electronic record of Communications, you will need: a computer, a monitor, a connection to an Internet service provider, an Internet browser software that supports 128-bit encryption, and an e-mail address. We do not provide ISP services. You must have your own Internet service provider.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16"><span class="ft14">Withdrawal of Consent.</span> If you later decide that you do not want to receive future Communications electronically, write to us at EHOPPER SERVICES LLC , 17 Battery Pl Ste # 715, New York, NY 10004 or email us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, with the term WITHDRAWAL OF CONSENT in the subject line. Clearly state your desire to withdraw consent of electronic communication. If you withdraw your consent to receive Communications electronically, we reserve the right to terminate your use of the Software, Services and Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(e)</span><span class="ft16"><span class="ft14">Changes to Your Email Address.</span> In order to provide you with the Communications, you agree to notify us promptly of any change in your email address. You can do so by emailing us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a> (please include both your old and new email addresses).</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">12. TERMINATION AND END OF TERM. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Termination for Cause.</span> The Company may terminate this Agreement immediately upon written notice if: (a) the Licensee materially breaches a non-payment obligation or representation of this Agreement, the Terms of Use of the EHOPPER website, or any applicable Sales Order Form, or if any authorized reseller or master licensee breaches its agreement with EHOPPER; (b) the Licensee fails to function as a going concern or operate in the ordinary course of business; (c) there is an assignment by the Licensee for the benefit its of creditors; or (d) there is a voluntary or involuntary bankruptcy filing by or against the Licensee, (e) any of the foregoing (b), (c) or (d) occurs with respect to the authorized reseller or master licensee. The Company may immediately terminate this Agreement without notice and opportunity to cure and disconnect the Software and services upon a breach of the payment terms in this Agreement. The Company may terminate this Agreement without cause, and for any or no reason, upon thirty (30) days prior written notice to Licensee, unless Licensee has an express written agreement providing for a longer period of notice.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Termination Fees.</span> Except where early termination occurs due to force majeure (as defined below), if Licensee terminates this Agreement prior to the end of any Term specified in a Sales Order Form, Licensee shall immediately pay all charges that would be due to the Company through the end of the Term (the “Termination Fee”), calculated based on the remaining number of months of the Term, at a monthly rate based on the total monthly charges for the month immediately prior to the Termination. Licensee acknowledges that such Termination Fee is not a penalty but is in the nature of a liquidated damage in connection with such early termination. The Company also shall be entitled to its reasonable attorneys’ or collection fees in connection with recovery of such liquidated damages, and this liquidation of damages provision shall not limit in any way the Company’s rights or remedies to seek and recover from Licensee damages or injunctive relief arising from, or in connection with, causes of action that the Company may have other than for early termination.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Effect of Termination.</span> Termination of this Agreement shall not limit either party from pursuing other remedies available to it, including injunctive relief, nor shall such termination relieve Licensee of its obligation to pay all fees that have accrued or are otherwise owed by Licensee, including Termination Fees. Upon expiration or termination of this Agreement: (i) the rights granted to Licensee under this Agreement will cease immediately upon the effective date of such termination and be of no further force or effect; and (ii) Licensee shall immediately surrender to the Company any device that stores the Software.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">13. INDEMNITY. </span>Licensee shall indemnify and hold the Company harmless from and against all loss, liability, damage and expense, including payment of the Company’s reasonable attorneys fees, caused or claimed by Licensee’s customers, officers, employees, agents, vendors, partners or contractors and arising from claims or demands: (a) for damages to property or for injury or death to persons, including without limitation any disability, death or Worker’s Compensation benefits; (b) arising from or relating to data transmitted, received or stored on or over the Company’s network by or through Licensee; (c) for infringement of a third party\'s proprietary rights based on any information, materials or access to property provided by Licensee; or (d) relating to the use by Licensee of any Software or Services provided under this Agreement. This provision shall survive termination of this Agreement. This indemnity and hold harmless provision shall apply to all claims Licensee may bring against any reseller or master licensee of the Company’s Software and Services relating to subject matter of this indemnity provision; to the extent that any such reseller or master licensee may seek contribution or indemnity from Company in connection with such claims, Licensee shall defend, indemnify and hold Company harmless Company to the same extent as if the claims against Company were brought by a third party – which is to say that Licensee will provide Company with a full indemnity in such instance, including in connection with the payment of Company’s reasonable attorneys’ fees.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">14. MISCELLANEOUS. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Equitable Remedies.</span> Licensee acknowledges that any breach or threatened breach by Licensee of any of the agreements or other or provisions contained in Paragraphs 1, 5, 12 and 13 of this Agreement will result in irreparable and continuing harm to the Company for which the Company would not have adequate remedy at law. Therefore Licensee acknowledges and agrees that in the event of any such breach or threatened breach (or any other breach or act which may otherwise be recognized to be cause irreparable harm), in addition to any other remedy which the Company may have at law or in equity, the Company shall be entitled to such injunctive relief or other equitable remedies to restrain Licensee from violating the provisions of this Agreement and Licensee hereby consents to the granting of such injunctive relief or other equitable remedy by any court of competent jurisdiction, without the Company having to prove the inadequacy of the available remedies at law or any actual damages (and without being required to post a bond or other security). Any such remedy sought or obtained shall not be considered either exclusive or a waiver of the rights of the Company to assert a claim for any other remedies it may have at law or in equity.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Severability and Waiver.</span> If any term or provision of this Agreement is held by a court of competent jurisdiction to be invalid, void, or unenforceable, the remainder of the terms and provisions set forth herein shall remain in full force and effect and shall in no way be affected, impaired or invalidated, and the parties hereto shall use their best efforts to find and employ an alternative means to achieve the same or substantially the same result as that contemplated by such term or provision. The waiver by the Company SOFT of any default or breach of this Agreement shall not constitute a waiver of any other or subsequent default or breach.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Governing Law.</span> This Agreement shall be governed by the laws of the State of New York without reference to its or any other state’s conflicts of law principles. Except for a “Intellectual Property Disputes” as defined below, the parties agree that all disputes, controversies, or claims between them (and including claims against the Company’s Suppliers) arising out of or relating to this Agreement or concerning the respective obligations hereunder of the parties hereto, shall be settled and determined by final and binding arbitration by a panel of a single arbitrator in accordance with and subject to the Commercial Arbitration Rules of the American Arbitration Association (“AAA”), or in the event that such entity is not in operation at the time such proceeding may be commenced, pursuant to the corresponding procedures of JAMS. The location of such arbitration shall be New York County, New York. Each party shall bear its own administrative costs and expenses of the arbitration proceeding, including arbitrator’s fees. Licensee waives the right to bring any class arbitration or join as a class member any class arbitration against the Company.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">With respect to “Intellectual Property Disputes”, each party hereby irrevocably submits to the exclusive personal jurisdiction of the courts of the State of New York, sitting in New York County, and the courts of the United States for the Southern District of New York. “Intellectual Property Disputes” shall be defined as those disputes (i) involving or relating to unauthorized use or copying of the software or improper use of the Company’s trademark rights, and/or (ii) any challenge to, or the enforcement of (including declaratory actions regarding the ownership, validity or infringement of) the intellectual property rights licensed hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">Each party irrevocably waives, to the fullest extent permitted by law, any objection which it may now or hereafter have to the laying of the venue of any such suit, action or proceeding brought in any such court, any claim that any such suit, action or proceeding brought in such a court has been brought in an inconvenient forum and the right to object, with respect to any such suit, action or proceeding brought in any such court, that such court does not have jurisdiction over such party. In any such suit, action or proceeding, each party waives, to the fullest extent it may effectively do so, personal service of any summons, complaint or other process and agrees that the service thereof may be made by certified or registered mail, addressed to such party at its address as set forth in the preamble hereinabove. Licensee further waives the right to a jury, and the right to join in (or bring as a class member) a class action against the Company in connection with any claim arising from or in connection with the Software, the Services, any third party services provided via or in connection with the Software.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">In the event that a Court Dispute involves a counterclaim by a party that would ordinarily be heard in arbitration, such counterclaim shall be severable from the Court Dispute, and shall proceed in arbitration, as if such dispute had been brought as an independent claim.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(d)</span><span class="ft15"><span class="ft14">Limitation on Actions.</span> Any action for breach of this Agreement or any other action otherwise arising out of this Agreement must be commenced by the party asserting such action within one (1) year from the date the right, claim, demand, or cause of action first occurs (or 1 year from reasonable discovery of the occurrence of the act or omission giving rise to such cause of action, if such cause of action is not reasonably discoverable), otherwise, such action shall be barred forever and waived by such party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(e)</span><span class="ft16"><span class="ft14">Assignment.</span> Neither this Agreement nor any rights granted hereunder may be sold, leased, assigned, or otherwise transferred, in whole or in part by Licensee, and any such attempted assignment shall be void and of no effect, without the advance written consent of the Company. The Company may freely assign, delegate, sublicense or transfer its rights and obligations hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(f)</span><span class="ft17"><span class="ft14">Force Majeure.</span> Neither Party shall be liable for any delay or failure in performance due to war, acts of terror, riots, embargoes, strikes, accidents, fire, acts of God, supplier or vendor failure, outage or malfunction of local or long distance telecommunications services, utility outage or other occurrence beyond such Party’s direct control (each, a “Force Majeure Event”). The non-performing Party shall notify the other Party of a Force Majeure Event, and if a Force Majeure Event continues for more than sixty (60) days, the Company or Licensee may cancel this Agreement with no further liability (except for any amounts due and not paid by Licensee) as a result of such Force Majeure Event.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(g)</span><span class="ft15"><span class="ft14">Attorneys’ Fees.</span> In any action to enforce the terms of this Agreement, the Company will be entitled to reasonable attorneys’ fees and other costs and expenses incurred by it in connection with such action or arbitral proceeding, including any appeal.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(h)</span><span class="ft16"><span class="ft14">Notices.</span> All notices required to be sent hereunder shall be in writing and shall be deemed to have been given upon (i) the date sent by confirmed facsimile, (ii) on the date it was delivered by courier, (iii) by email if to the Company at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, if to Licensee at the email address provided on the Sales Order Form, or (iv) if by certified mail return receipt requested, on the date received, to the addresses set forth above and to the attention of the signatories of this Agreement and the relevant Sales Order Form, or to such other address or individual as the parties may specify from time to time by written notice to the other Party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(i)</span><span class="ft17"><span class="ft14">Authorized Individual.</span> By downloading this agreement and installing the Software, you represent that you have read and understand all of the Terms and Provisions herein, and further that you, as an individual, are authorized to represent and to bind the Licensee to these terms.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(j)</span><span class="ft17"><span class="ft14">Survival.</span> In addition to as expressly set forth herein, Paragraphs 2, 3, 5, 6, 7, 9, 10, 12, 13 and 14 shall survive termination of this Agreement.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <p class="p51 ft3">Copyright © 2016 EHopper LLC, All rights reserved.</p>\r\n</div>\r\n';});


define('text!views/terms/TermsAndConditions-RU.html',[],function () { return '<STYLE type="text/css">\r\n    #page_1 {\r\n        position: relative;\r\n        overflow: hidden;\r\n        /*margin: 35px 0px 55px 96px;*/\r\n        padding: 0;\r\n        border: none;\r\n        width: 100%;\r\n    }\r\n\r\n    .ua-header {\r\n        text-align: center;\r\n    }\r\n\r\n        .ua-header p {\r\n            font: bold 15px \'Arial\';\r\n            line-height: 16px;\r\n        }\r\n\r\n    .ua-text {\r\n        font: 12px \'Arial\';\r\n        margin-top: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n        .ua-text ul {\r\n            list-style: none;\r\n        }\r\n\r\n    .bold {\r\n        font-weight: bold;\r\n    }\r\n\r\n    .ft3 {\r\n        font: 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft4 {\r\n        font: 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft5 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft6 {\r\n        font: bold 12px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft7 {\r\n        font: bold 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft8 {\r\n        font: 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft9 {\r\n        font: 12px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft10 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 9px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft11 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft12 {\r\n        font: bold 11px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft13 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft14 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft15 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft16 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft17 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 16px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft18 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 15px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft19 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 19px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft20 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft21 {\r\n        font: 12px \'Arial\';\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft22 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft23 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 3px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft24 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft25 {\r\n        font: italic 11px \'Arial\';\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft26 {\r\n        font: italic 12px \'Arial\';\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft27 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft28 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft29 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 33px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft30 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        color: #0000ff;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft31 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft32 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 14px;\r\n    }\r\n\r\n    .ft33 {\r\n        font: bold 12px \'Arial\';\r\n        margin-left: 4px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft34 {\r\n        font: 11px \'Arial\';\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft35 {\r\n        font: 11px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 13px;\r\n    }\r\n\r\n    .ft36 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 34px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft37 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 37px;\r\n        line-height: 15px;\r\n    }\r\n\r\n    .ft38 {\r\n        font: 12px \'Arial\';\r\n        text-decoration: underline;\r\n        margin-left: 38px;\r\n        line-height: 15px;\r\n    }\r\n\r\n\r\n\r\n    .p51 {\r\n        text-align: left;\r\n        margin-top: 38px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p52 {\r\n        text-align: left;\r\n        margin-top: 1px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    .p53 {\r\n        text-align: left;\r\n        margin-top: 658px;\r\n        margin-bottom: 0px;\r\n    }\r\n\r\n    div.ua-text a {\r\n        text-decoration: underline;\r\n    }\r\n\r\n</STYLE>\r\n\r\n<div id="page_1">\r\n    <div class="ua-header">\r\n        <P>\r\n            EHOPPER POINT OF SALE<br />\r\n            MERCHANT USER SOFTWARE LICENSE<br />\r\n            AND SERVICES AGREEMENT\r\n        </P>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Thank you for choosing EHOPPER Point of Sale Software and Services. This Merchant User License together with the sales order form (as defined below) you enter into (the “Sales Order Form”) are referred to collectively as the “License” or the “Agreement”, and gives you certain non-exclusive rights and responsibilities depending on which version of the software and services package you purchase. \r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Software” shall mean the point of sale software provided to you, the merchant (“you” or “Licensee”), by EHopper Services LLC ( the “Company”, “we”, “us” or “our”) under this Agreement (or by any agreement You may have with a reseller or master licensee of the Company’s Software); the term “Software” shall include without limitation, any other programs, apps, tools, internet-based services, plug-ins, components and any “updates” made available to you (for example, Software maintenance, service information, help content, bug fixes, patches or maintenance releases etc.) or “upgrades” of the Software that the Company elects, in its sole discretion, to provide or make available to you after the date you obtained your initial copy of the Software.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        The term “Services” means the services selected by you in the most recent sales order form that you may enter into (the “Sales Order Form”), and any technical or attendant support services that are routinely offered by the Company THE COMPANY in connection with the Software, which are subject to change from time to time, in the Company’s sole and absolute discretion.  For purposes of this Agreement, the term “Sales Order Form” includes any invoice, billing sheet, payment schedule, or other written notice of fee or charge (including email notices from the Company or any authorized reseller or master licensee through whom you are provided access to the Software and Services) in connection with Your Use of the Software and Services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        This Agreement is effective as of the later of the date you click the “I accept” and download the Software. By installing the Software, you agree to be bound by the terms and conditions of this Agreement. If you do not accept this Agreement, you will not be able to use these EHOPPER software or services.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You may be entitled to download updates to the Software that the Company generally makes available to other users of the Software, in the Company’s sole and absolute discretion.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">1. LICENSE GRANT AND RESTRICTIONS. </span>EHopper Services LLC, a New York limited liability company, subject to its own license of the Software, grants you (“you”, “your” and “Licensee” means you the Licensee on whose behalf the Software is licensed and Services are sold) the following non-exclusive, limited rights on the condition that you comply with all of the terms and conditions of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        License: This License is solely for commercial, in-store use by you within the United States, Puerto Rico, US Virgin Island and Canada, or other approved territory on a compatible tablet or mobile device (each a “CPU”), and is not for use on or in connection with any online sales or e-commerce transactions. You may install the Software on one (1) CPU <span class="ft14">per license</span>.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Your license to use the Software is conditioned on your compliance with the scope of this license, and any use by you outside this scope will cause the agreement to terminate automatically, and shall cause your license to be revoked automatically.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        You are not licensed or permitted under this Agreement and you agree that you shall not, nor shall you assist or permit others to, do any of the following: (a) modify, adapt, translate, embed, rent or sublicense (including offering the Software to third parties in any manner, whether on an applications service provider or a time-sharing basis); (b) assign, loan, resell, rebrand, transfer or distribute the Software, CDROM(s), or related materials or create derivative works based upon the Software or any part thereof; (c) decompile, reverse engineer, or disassemble the Software; (d) copy the Software in whole or part, alter, adjust, repair or circumvent any aspect of the Software, or use trade secret information contained in the Software, to develop software to interface with the Software; (e) remove, alter or obscure any confidentiality or proprietary rights notices (including copyright notices) of the Company or its licensors on or within the Software or any copies of the Software; or (f) make the software available to any third party via any server or on the Internet. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Additionally, Licensee shall not use, nor shall it permit others to use the Software: (i) for any unlawful, invasive, infringing, defamatory, fraudulent or obscene purpose; (ii) to send any virus, worm, trojan horse or harmful code or attachment; (iii) to alter, steal, corrupt, evade, disable, destroy, trespass or violate any security or encryption of any computer file, database or network; (iv) so as to interfere with the use of the Company, its Suppliers, or connectivity partner network by other Licensees or authorized users; or (v) in violation of the acceptable use policies of the Company’s Suppliers or service providers, including its backbone providers. The prohibitions in this paragraph shall survive termination of this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        Unless you have entered into an agreement to use an affiliate’s payment processing services, which agreement expressly provides for an extended term, the Company may terminate this License to you any time upon thirty (30) days’ written notice (email notice sent to the email address provided by you will suffice, whether or not received by you).\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">2. RESERVATION OF RIGHTS AND OWNERSHIP. </span>The Software is licensed (not sold) to you, and the Company, for itself and its licensors, reserves all rights not expressly granted to you in this Agreement. In order to continue using the software under license, you must continue to abide by the terms and conditions in this Agreement. The Software is protected by copyright, trade secret and other intellectual property laws. The Company and/or its licensors own the title, copyright, and other worldwide intellectual property rights in the Software and all copies of the Software. This Agreement does not grant you any rights to trademarks or service marks of the Company or those of its licensors. You further agree that you will not challenge the Company’s or its licensor’s copyrights in or to the Software, and further shall not challenge their rights in or to the EHOPPER trademark.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">3. THIRD PARTY SERVICES AND WEBSITES. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">In connection with the promotion or your use of the Software, you may be made aware of or offered services, features, products, and promotions provided by third parties, apart from the Company (“Third Party Services”). If you decide to use Third Party Services, you are responsible for reviewing them and understanding the terms and conditions governing any Third Party Services. For purposes of this Agreement, any authorized reseller or master licensee of EHOPPER Software and Services through whom you have been provided such Software shall be a “Third Party” and its services and website shall be, without limitation, considered “Third Party Services” and “Third Party Websites”. You authorize the Company to use and disclose your contact information, including name and address, for the purpose of making the Third Party Services you choose available to you. You also agree that the third party, and not the Company, is responsible for the performance of the Third Party Services, and that you will look only to such third parties in connection with the provision or any failure to provide such Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">The Software also may contain or reference links to third party websites operated by third parties (“Third Party Websites”). These links are provided as a convenience only. Such Third Party Websites are not under the control of the Company or its licensors, and neither the Company nor its licensor is responsible for the content of any Third Party Website or any link contained in a Third Party Website. Neither the company nor its licensors review, approve, monitor, endorse, warrant, or make any representations with respect to Third Party Websites, and the inclusion of any link in the Software or Services is not and does not imply an affiliation, sponsorship, endorsement, approval, investigation, verification or monitoring by the Company, its licensors of any information contained in any Third Party Website. In no event will the Company or its licensors be responsible for the information or contained at such Third Party Website or for your use of or inability to use such Website. Access to any Third Party Website is at your own risk, and you acknowledge and understand that linked Third Party Websites may contain terms and privacy policies that are different from those of the Company. The Company is not responsible for such terms, policies and content, and you agree and acknowledge that neither the Company nor its licensors shall have any liability for them.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">4. LICENSEE OBLIGATIONS. </span>In connection with this License You acknowledge and agree that you must: (a) provide for your own access to the World Wide Web and pay any service fees associated with such access, and (b) provide all equipment and services necessary for you to make sufficient connection to the World Wide Web to enable the Software and Services to be provided, including a tablet or other mobile device with an up-to-date compatible operating system, Ethernet, modem, and other equipment. You shall, at your own expense, provide all necessary preparations required to connect to the Software and Services and shall comply with the Company’s installation and maintenance specifications for delivery of the Software and the Services, and you are also solely responsible for the costs of any relocation of its equipment or installation of Software. You shall be responsible for the operation and maintenance of all hardware, software, cabling, services and components that are not provided to you by the Company, and if such items impair your use of the Software and any Services, you shall remain liable for any applicable payment to the Company for the Software and Services. Upon notice from the Company or any authorized reseller or master licensee, that any such component causes or is likely to cause a hazard, interference with or obstruction of the Services, you shall eliminate, repair or remedy such problematic component promptly, and the Company may disconnect the Software and Services immediately until such elimination, repair or remedy occurs. The Company shall not be responsible: (a) for the installation, operation, management or maintenance of any hardware, software, cabling or services not provided by the Company in connection with the Software and Services; (b) if any changes in the Software and Services cause hardware, software, configurations, cabling or services not provided by the Company to become obsolete or to require modification; (c) if any modification or configuration performed by you impairs the performance of the Software and Services hereunder; or (d) for the performance or availability of third party services or facilities provided hereunder. By entering into this Agreement, You represent that, to the best of your knowledge and belief, your use of the Software and Services does not directly or indirectly infringe the legal or contractual rights of a third party. You further represent and warrant that all information provided by you in connection with its license of this Software and Services is accurate, current and complete.\r\n    </div>\r\n    <div class="ua-text">\r\n        <span class="ft5">5. LICENSEE CONDUCT ON THE EHOPPER WEB SITE. </span>THE EHOPPER Website is to be used solely in connection with your business. While using the EHOPPER Website, or any other website provided or hosted by the Company or its licensors, including but not limited to: <span class="ft14">ehopper.com</span>, <span class="ft14">b2bsoft.com</span>, <span class="ft14">btbsoft.com</span>, <span class="ft14">b2bim.com</span>, and all other, that the Company of its licensors may create in the future, Licensee may not:\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">Restrict or inhibit any other user from using and enjoying any Service offered through such site;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Post or retransmit any unlawful or fraudulent, information of any kind in connection with the Software, Services or the Company Websites, including without limitation, any transmissions constituting or encouraging conduct that would constitute a criminal offense, give rise to civil liability, or otherwise violate any local, state, national or foreign law, including without limitation the U.S. export control laws and regulations;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">Access any user account apart from the account belonging to Licensee;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">Upload or transmit any information or software which contains a virus, trojan horse, worm or other harmful component;</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(e)</span><span class="ft18">Post, publish, transmit, reproduce, distribute or in any way exploit any information, software or other material obtained through the Service for commercial purposes (other than as expressly permitted by the provider of such information, software or other material);</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(f)</span><span class="ft19">Post, publish, transmit, reproduce, or distribute in any way information, software or other material obtained through the Service or the the Company Website which is protected by copyright, publicity or privacy laws or other proprietary right, or derivative works with respect thereto, without obtaining permission of the copyright owner or other rights holder; or</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft4">(g)</span><span class="ft18">Upload, post, publish, reproduce, transmit or distribute in any way any component of the Service itself or derivative works with respect thereto, as the Service is copyrighted as a collective work under U.S. copyright laws.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">6. NO OBLIGATION TO MONITOR. </span>The Company has no obligation to monitor the Software, Service or Third Party Service available through or in connection with its Software. However, Licensee acknowledges and agrees that the Company has the right to monitor the Software and Service electronically from time to time and to disclose any information as necessary or appropriate to satisfy any law, regulation or other governmental request, to operate the Software and Services properly, or to protect itself or its subscribers. The Company will not intentionally monitor or disclose any private electronic-mail message unless required by law.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">7. GENERAL PRACTICES REGARDING USE, STORAGE AND SERVICE ACCESS. </span>Licensee acknowledges that the Company may establish from time to time general practices and limits concerning use of the Software and Services, in its sole discretion, with or without notice, including without limitation, establishing the maximum amount of storage space Licensee have at any time, as well as limiting the number of times (and the maximum duration for which) Licensee may access the Software and Service in a given period of time. <span class="bold">Licensee agrees that the Company has no responsibility or liability for the deletion or failure to store any Content, messages or other communications or transaction information maintained or transmitted by the Software or Services.</span> Licensee understands that all Content, whether publicly posted or privately transmitted, is either your sole responsibility or the responsibility of the person from which such Content originated. This means that Licensee, and not the Company, is entirely responsible for all Content that Licensee uploads or otherwise transmits via the Software and Services. the Company does not control the Content uploaded or otherwise transmitted by Licensee or other Licensees and, as such, does not guarantee the accuracy, integrity or quality of such Content. "Content" means information, data, text (including but not limited to names of files, databases, directories and groups of the same), software, graphics, video, messages or other materials. Licensee therefore acknowledges that it is responsible for periodically backing up or downloading any data or Content that might be available in connection with the Software, and further acknowledges that the Company’s storage and making available of such Content or data is for convenience only, and that the Company shall have no liability in connection with or arising from any damage to, inaccuracies in, or inability of Licensee to access such Content or data, Licensee acknowledges and agrees that the Company shall have access to and may use Licensee’s client data, Licensee’s usage data, and other information for marketing and research purposes, to improve the Software and Services, to produce industry reports, for maintenance and support purposes, to provide Licensee with information regarding the Company’s affiliates or third party services, and further to satisfy any legal obligation that the Company reasonably believes it may have in such connection. You further agree that the Company shall have no obligation to you to retain the Content for more than thirty (30) days after termination of this Agreement, and may withhold providing you with access to Content pending payment by you of any fees or amounts that may be due under this Agreement.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">8. FEES AND PAYMENT. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15">At the outset of this License, there may be no charge to you to use this Software, provided that you adhere to the terms of the License. Notwithstanding the foregoing, in the event that the Company (or any authorized reseller or master licensee) provides written (including email) Sales Order Form to you that fees will be charged in connection with your continued use of the Software or Services, you agree to pay to the Company all fees for the Service or Software you license or use (including any overage fees), in accordance with the pricing and payment terms presented to you in such Sales Order Form. Where fees may be applicable, you will be billed using the billing method you select through your account management interface or as designated by you on a Sales Order Form, or Merchant Application. Payment by you of such fees is an express condition of this license, and non-payment of such fees will result in termination of your access to the Software and Services or unlicensed use, if such use continues. Fees paid by you are non-refundable, except as provided in these Terms or when required by law. In the event that fees are due under this Agreement, if Licensee is delinquent in any such payment on more than two (2) occasions in any twelve-month period, the Company may, upon written notice to Licensee, modify the payment terms to require full payment before the further provision of any Services or require other assurances to secure Licensee’s payment obligations hereunder. Licensee shall furnish financial information to the Company as the Company may, from time to time, reasonably request. Third Party Services, as well as any Services or Software upgrades or modules requested by Licensee may result in fees or other charges in addition to those set forth on the original Sales Order Form. Except as otherwise expressly stated in a particular Sales Order Form for the Services performed thereunder, the Company reserves the right to change the Services it offers to its Licensees generally and the related rates at any time, upon thirty (30) days’ notice. Licensee specifically acknowledges and agrees that it will not attempt to chargeback any fees authorized by it.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16">Licensee is responsible for any taxes, duties, fees or surcharges that are imposed or authorized by regulatory and governmental entities, including but not limited to sales, use, gross receipts taxes, surcharges, franchise fees, occupational, excise, universal service (state and federal) taxes and surcharges, and shall pay to the Company or reimburse the Company for amounts paid by the Company relating to Services provided to Licensee.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17">If Licensee’s Service is disconnected due to nonpayment or late payment by Licensee, Licensee shall be responsible for all costs incurred by the Company resulting from such disconnection.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16">If Licensee Fees are subsidized by third parties and such third parties decline to pay same Licensee shall be responsible for those fees based on the pricing on any applicable sales order form.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">9. DISCLAIMER OF WARRANTIES. </span>THE SOFTWARE, SERVICES AND ANY CONTENT ACCESSIBLE THROUGH THE SOFTWARE OR SERVICES ARE PROVIDED "AS-IS," AND TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY, ITS AFFILIATES, LICENSORS, PARTICIPATING FINANCIAL INSTITUTIONS, THIRD PARTY CONTENT OR SERVICE PROVIDERS, DEALERS AND SUPPLIERS (COLLECTIVELY “SUPPLIERS”) DISCLAIM ALL GUARANTEES AND WARRANTIES, WHETHER EXPRESS OR IMPLIED OR STATUTORY, REGARDING THIS SOFTWARE, SERVICES, CONTENT, CDROMS AND RELATED MATERIALS, INCLUDING ANY WARRANTY OF FITNESS FOR A PARTICULAR PURPOSE, TITLE, MERCHANTABILITY, AND NONINFRINGEMENT. THE COMPANY DOES NOT WARRANT OR REPRESENT THAT ANY HARDWARE OR HARDWARE INTERFACE PURCHASED OR LICENSED FROM THE COMPANY OR ITS SUPPLIERS OR OTHERWISE USED IN CONJUNCTION WITH THIS SOFTWARE OR SERVICES ARE SECURE, FREE FROM BUGS, VIRUSES, THREAT OF HACKERS, INTERRUPTION OR ERRORS, OR THAT THE SOFTWARE OR SERVICES WILL MEET YOUR REQUIREMENTS. FURTHER, THE COMPANY AND ITS SUPPLIERS DO NOT WARRANT OR GUARANTEE IN ANY WAY UNINTERRUPTED ACCESS TO THE INTERNET OR TO ANY OTHER SERVICE OR CONTENT OR DATA THROUGH THE SOFTWARE OR CONTINUED ACCESS TO ANY VERSION OF THE SOFTWARE (INCLUDING ANY TRIAL VERSION) OR TO THE DATA ENTERED INTO SUCH VERSION OF THE SOFTWARE AFTER THE TERM OR ANY TRIAL PERIOD IS OVER. IN THAT EVENT, TO THE EXTENT ANY IMPLIED WARRANTIES THAT CANNOT BE DISCLAIMED APPLY DUE TO LOCAL LAWS, THESE ARE LIMITED IN DURATION TO SIXTY (60) DAYS FROM THE DATE OF PURCHASE OR DELIVERY OF THE SOFTWARE, OR THE SHORTEST POSSIBLE DURATION, WHICHEVER IS LONGER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE SOFTWARE AND ANY RELATED SERVICES OR CONTENT ARE DESIGNED TO OPERATE AND PROVIDE INFORMATION WITH THE UNDERSTANDING THAT THE COMPANY AND ITS SUPPLIERS ARE NOT ENGAGED IN RENDERING LEGAL, ACCOUNTING OR OTHER PROFESSIONAL SERVICE. IF LEGAL ADVICE OR OTHER EXPERT ASSISTANCE IS REQUIRED, THE SERVICE OF A COMPETENT PROFESSIONAL SHOULD BE SOUGHT. THE COMPANY EXPRESSLY DISCLAIMS ANY REPRESENTATIONS OR WARRANTIES THAT YOUR USE OF THE SOFTWARE WILL SATISFY ANY STATUTORY OR REGULATORY OBLIGATIONS, OR WILL ASSIST WITH, GUARANTEE OR OTHERWISE ENSURE COMPLIANCE WITH ANY APPLICABLE LAWS OR REGULATIONS INCLUDING BUT NOT LIMITED TO THE HEALTH INSURANCE PORTABILITY AND ACCOUNTABILITY ACT OF 1996 (“HIPAA”), THE GRAMM-LEACH-BLILEY ACT OF 1999, THE SARBANES-OXLEY ACT OF 2002, OR OTHER FEDERAL OR STATE STATUTES OR REGULATIONS. YOU ARE SOLELY RESPONSIBLE FOR ENSURING THAT YOUR USE OF THIS SOFTWARE, RELATED SERVICES OR CONTENT IS IN ACCORDANCE WITH APPLICABLE LAW. IT IS YOUR RESPONSIBILITY TO KEEP ABREAST OF CHANGES IN LAWS, REGULATIONS AND ACCOUNTING PRACTICES THAT AFFECT YOU AND YOUR BUSINESS.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">10. LIMITATION OF LIABILITY AND DAMAGES. </span>YOU AGREE THAT IN NO EVENT WILL THE COMPANY OR ITS SUPPLIERS BE LIABLE FOR ANY LOSS, COST, LIABILITY OR DAMAGE INCURRED AS A RESULT OF YOUR RECEIPT OF, OR PARTICIPATION IN, THIRD PARTY SERVICES OFFERED IN CONNECTION WITH THE SOFTWARE OR SERVICES. THE ENTIRE CUMULATIVE LIABILITY OF THE COMPANY AND ITS SUPPLIERS FOR ANY REASON ARISING FROM OR RELATING TO THIS AGREEMENT, THE SOFTWARE OR ANY SERVICES SHALL BE LIMITED TO THE GREATER OF $100 OR THE HIGHEST AMOUNT PAID BY YOU TO COMPANY (OR IF YOU PAY AN AUTHORIZED RESELLER OR MASTER LICENSEE, TO SUCH RESELLER OR MASTER-LICENSEE) FOR A SINGLE MONTH’S USE OF THE SOFTWARE AND SERVICES DURING THE PREVIOUS TWELVE MONTHS, UNLESS OTHERWISE SEPARATELY AGREED BY THE COMPANY IN WRITING. TO THE MAXIMUM EXTENT PERMITTED BY APPLICABLE LAW, THE COMPANY AND ITS SUPPLIERS SHALL NOT BE LIABLE FOR ANY INDIRECT, SPECIAL, INCIDENTAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES OR FOR ANY DAMAGES RELATING TO LOSS OF BUSINESS, TELECOMMUNICATION FAILURES, THE LOSS, CORRUPTION OR THEFT OF DATA, VIRUSES, SPYWARE, LOSS OF PROFITS OR INVESTMENT, TAX POSITIONS TAKEN BY YOU, USE OF THE SOFTWARE WITH HARDWARE OR OTHER SOFTWARE THAT DOES NOT MEET THE COMPANY’S SYSTEMS REQUIREMENTS OR THE LIKE, WHETHER BASED IN CONTRACT, TORT (INCLUDING NEGLIGENCE), PRODUCT LIABILITY OR OTHERWISE, EVEN IF THE COMPANY, ITS SUPPLIERS OR ITS REPRESENTATIVES HAVE BEEN ADVISED OF THE POSSIBILITY OF SUCH DAMAGES, AND EVEN IF A REMEDY SET FORTH HEREIN IS FOUND TO HAVE FAILED OF ITS ESSENTIAL PURPOSE. SOME STATES DO NOT ALLOW THE LIMITATION AND/OR EXCLUSION OF LIABILITY FOR INCIDENTAL OR CONSEQUENTIAL DAMAGES, SO THE ABOVE LIMITATION OR EXCLUSION MAY NOT APPLY TO YOU. THE LIMITATIONS OF DAMAGES SET FORTH ABOVE ARE FUNDAMENTAL ELEMENTS OF THE BASIS OF THE BARGAIN BETWEEN THE COMPANY AND YOU. THE COMPANY WOULD NOT BE ABLE TO HAVE PROVIDED THIS SOFTWARE OR SERVICES WITHOUT SUCH LIMITATIONS. YOU FURTHER AGREE AND ACKNOWLEDGE THAT YOU ARE ENTERING INTO THIS AGREEMENT WITH SOLELY THE COMPANY, AND THAT YOU WILL LOOK ONLY TO THE COMPANY, AND TO NO OTHER PARTY, IN CONNECTION WITH ANY CLAIMS, SUITS OR CAUSES OF ACTION ARISING FROM THE SOFTWARE, INCLUDING, WITHOUT LIMITATION, SERVICE INTERRUPTION, CORRUPTION OR LOSS OF DATA, OR ANY FAILURE TO PERFORM THE SERVICES HEREUNDER.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        THE FOREGOING LIMITATION OF LIABILITY AND DISCLAIMER OF WARRANTIES SET FORTH IN PARAGRAPH 9 SHALL APPLY TO ANY CLAIMS THAT YOU MAY BRING AGAINST AN AUTHORIZED RESELLER OR MASTER LICENSEE IN CONNECTION WITH OR ARISING FROM THE EHOPPER SOFTWARE AND SERVICES.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">11. CONSENT TO CONDUCT BUSINESS ELECTRONICALLY/ RELEASE OF INFORMATION. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Consent to Electronic Communications.</span> the Company may be required by law to send “Communications” (as defined below) to you that may pertain to the Software, the use of information you may submit to the Company, and the Third Party Services you choose. Additionally, certain of the Third Party Services you choose may require Communications with the third parties who administer these programs. You agree that the Company, on behalf of itself, and others who administer such services (as applicable), may send Communications to you by email and/or may make Communications available to you by posting them at one or more of our sponsored websites, such as www.btbsoft.com. You consent to receive these Communications electronically.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">The term “Communications” means any notice, record, agreement, or other type of information that is made available to you or received from you in connection with the Software and the Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Consenting to Do Business Electronically.</span> The decision whether to do business electronically is yours, and you should consider whether you have the required hardware and software capabilities described below. Your consent to do business electronically, and our agreement to do so, applies to this Agreement, the Software and any applicable Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Communication Requirements.</span> In order to access and retain an electronic record of Communications, you will need: a computer, a monitor, a connection to an Internet service provider, an Internet browser software that supports 128-bit encryption, and an e-mail address. We do not provide ISP services. You must have your own Internet service provider.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(d)</span><span class="ft16"><span class="ft14">Withdrawal of Consent.</span> If you later decide that you do not want to receive future Communications electronically, write to us at EHOPPER SERVICES LLC , 17 Battery Pl Ste # 715, New York, NY 10004 or email us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, with the term WITHDRAWAL OF CONSENT in the subject line. Clearly state your desire to withdraw consent of electronic communication. If you withdraw your consent to receive Communications electronically, we reserve the right to terminate your use of the Software, Services and Third Party Services.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(e)</span><span class="ft16"><span class="ft14">Changes to Your Email Address.</span> In order to provide you with the Communications, you agree to notify us promptly of any change in your email address. You can do so by emailing us at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a> (please include both your old and new email addresses).</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">12. TERMINATION AND END OF TERM. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Termination for Cause.</span> The Company may terminate this Agreement immediately upon written notice if: (a) the Licensee materially breaches a non-payment obligation or representation of this Agreement, the Terms of Use of the EHOPPER website, or any applicable Sales Order Form, or if any authorized reseller or master licensee breaches its agreement with EHOPPER; (b) the Licensee fails to function as a going concern or operate in the ordinary course of business; (c) there is an assignment by the Licensee for the benefit its of creditors; or (d) there is a voluntary or involuntary bankruptcy filing by or against the Licensee, (e) any of the foregoing (b), (c) or (d) occurs with respect to the authorized reseller or master licensee. The Company may immediately terminate this Agreement without notice and opportunity to cure and disconnect the Software and services upon a breach of the payment terms in this Agreement. The Company may terminate this Agreement without cause, and for any or no reason, upon thirty (30) days prior written notice to Licensee, unless Licensee has an express written agreement providing for a longer period of notice.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Termination Fees.</span> Except where early termination occurs due to force majeure (as defined below), if Licensee terminates this Agreement prior to the end of any Term specified in a Sales Order Form, Licensee shall immediately pay all charges that would be due to the Company through the end of the Term (the “Termination Fee”), calculated based on the remaining number of months of the Term, at a monthly rate based on the total monthly charges for the month immediately prior to the Termination. Licensee acknowledges that such Termination Fee is not a penalty but is in the nature of a liquidated damage in connection with such early termination. The Company also shall be entitled to its reasonable attorneys’ or collection fees in connection with recovery of such liquidated damages, and this liquidation of damages provision shall not limit in any way the Company’s rights or remedies to seek and recover from Licensee damages or injunctive relief arising from, or in connection with, causes of action that the Company may have other than for early termination.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Effect of Termination.</span> Termination of this Agreement shall not limit either party from pursuing other remedies available to it, including injunctive relief, nor shall such termination relieve Licensee of its obligation to pay all fees that have accrued or are otherwise owed by Licensee, including Termination Fees. Upon expiration or termination of this Agreement: (i) the rights granted to Licensee under this Agreement will cease immediately upon the effective date of such termination and be of no further force or effect; and (ii) Licensee shall immediately surrender to the Company any device that stores the Software.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">13. INDEMNITY. </span>Licensee shall indemnify and hold the Company harmless from and against all loss, liability, damage and expense, including payment of the Company’s reasonable attorneys fees, caused or claimed by Licensee’s customers, officers, employees, agents, vendors, partners or contractors and arising from claims or demands: (a) for damages to property or for injury or death to persons, including without limitation any disability, death or Worker’s Compensation benefits; (b) arising from or relating to data transmitted, received or stored on or over the Company’s network by or through Licensee; (c) for infringement of a third party\'s proprietary rights based on any information, materials or access to property provided by Licensee; or (d) relating to the use by Licensee of any Software or Services provided under this Agreement. This provision shall survive termination of this Agreement. This indemnity and hold harmless provision shall apply to all claims Licensee may bring against any reseller or master licensee of the Company’s Software and Services relating to subject matter of this indemnity provision; to the extent that any such reseller or master licensee may seek contribution or indemnity from Company in connection with such claims, Licensee shall defend, indemnify and hold Company harmless Company to the same extent as if the claims against Company were brought by a third party – which is to say that Licensee will provide Company with a full indemnity in such instance, including in connection with the payment of Company’s reasonable attorneys’ fees.\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <span class="ft5">14. MISCELLANEOUS. </span>\r\n    </div>\r\n\r\n    <div class="ua-text">\r\n        <ul>\r\n            <li>\r\n                <span class="ft3">(a)</span><span class="ft15"><span class="ft14">Equitable Remedies.</span> Licensee acknowledges that any breach or threatened breach by Licensee of any of the agreements or other or provisions contained in Paragraphs 1, 5, 12 and 13 of this Agreement will result in irreparable and continuing harm to the Company for which the Company would not have adequate remedy at law. Therefore Licensee acknowledges and agrees that in the event of any such breach or threatened breach (or any other breach or act which may otherwise be recognized to be cause irreparable harm), in addition to any other remedy which the Company may have at law or in equity, the Company shall be entitled to such injunctive relief or other equitable remedies to restrain Licensee from violating the provisions of this Agreement and Licensee hereby consents to the granting of such injunctive relief or other equitable remedy by any court of competent jurisdiction, without the Company having to prove the inadequacy of the available remedies at law or any actual damages (and without being required to post a bond or other security). Any such remedy sought or obtained shall not be considered either exclusive or a waiver of the rights of the Company to assert a claim for any other remedies it may have at law or in equity.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(b)</span><span class="ft16"><span class="ft14">Severability and Waiver.</span> If any term or provision of this Agreement is held by a court of competent jurisdiction to be invalid, void, or unenforceable, the remainder of the terms and provisions set forth herein shall remain in full force and effect and shall in no way be affected, impaired or invalidated, and the parties hereto shall use their best efforts to find and employ an alternative means to achieve the same or substantially the same result as that contemplated by such term or provision. The waiver by the Company SOFT of any default or breach of this Agreement shall not constitute a waiver of any other or subsequent default or breach.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(c)</span><span class="ft17"><span class="ft14">Governing Law.</span> This Agreement shall be governed by the laws of the State of New York without reference to its or any other state’s conflicts of law principles. Except for a “Intellectual Property Disputes” as defined below, the parties agree that all disputes, controversies, or claims between them (and including claims against the Company’s Suppliers) arising out of or relating to this Agreement or concerning the respective obligations hereunder of the parties hereto, shall be settled and determined by final and binding arbitration by a panel of a single arbitrator in accordance with and subject to the Commercial Arbitration Rules of the American Arbitration Association (“AAA”), or in the event that such entity is not in operation at the time such proceeding may be commenced, pursuant to the corresponding procedures of JAMS. The location of such arbitration shall be New York County, New York. Each party shall bear its own administrative costs and expenses of the arbitration proceeding, including arbitrator’s fees. Licensee waives the right to bring any class arbitration or join as a class member any class arbitration against the Company.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">With respect to “Intellectual Property Disputes”, each party hereby irrevocably submits to the exclusive personal jurisdiction of the courts of the State of New York, sitting in New York County, and the courts of the United States for the Southern District of New York. “Intellectual Property Disputes” shall be defined as those disputes (i) involving or relating to unauthorized use or copying of the software or improper use of the Company’s trademark rights, and/or (ii) any challenge to, or the enforcement of (including declaratory actions regarding the ownership, validity or infringement of) the intellectual property rights licensed hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">Each party irrevocably waives, to the fullest extent permitted by law, any objection which it may now or hereafter have to the laying of the venue of any such suit, action or proceeding brought in any such court, any claim that any such suit, action or proceeding brought in such a court has been brought in an inconvenient forum and the right to object, with respect to any such suit, action or proceeding brought in any such court, that such court does not have jurisdiction over such party. In any such suit, action or proceeding, each party waives, to the fullest extent it may effectively do so, personal service of any summons, complaint or other process and agrees that the service thereof may be made by certified or registered mail, addressed to such party at its address as set forth in the preamble hereinabove. Licensee further waives the right to a jury, and the right to join in (or bring as a class member) a class action against the Company in connection with any claim arising from or in connection with the Software, the Services, any third party services provided via or in connection with the Software.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">In the event that a Court Dispute involves a counterclaim by a party that would ordinarily be heard in arbitration, such counterclaim shall be severable from the Court Dispute, and shall proceed in arbitration, as if such dispute had been brought as an independent claim.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(d)</span><span class="ft15"><span class="ft14">Limitation on Actions.</span> Any action for breach of this Agreement or any other action otherwise arising out of this Agreement must be commenced by the party asserting such action within one (1) year from the date the right, claim, demand, or cause of action first occurs (or 1 year from reasonable discovery of the occurrence of the act or omission giving rise to such cause of action, if such cause of action is not reasonably discoverable), otherwise, such action shall be barred forever and waived by such party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(e)</span><span class="ft16"><span class="ft14">Assignment.</span> Neither this Agreement nor any rights granted hereunder may be sold, leased, assigned, or otherwise transferred, in whole or in part by Licensee, and any such attempted assignment shall be void and of no effect, without the advance written consent of the Company. The Company may freely assign, delegate, sublicense or transfer its rights and obligations hereunder.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(f)</span><span class="ft17"><span class="ft14">Force Majeure.</span> Neither Party shall be liable for any delay or failure in performance due to war, acts of terror, riots, embargoes, strikes, accidents, fire, acts of God, supplier or vendor failure, outage or malfunction of local or long distance telecommunications services, utility outage or other occurrence beyond such Party’s direct control (each, a “Force Majeure Event”). The non-performing Party shall notify the other Party of a Force Majeure Event, and if a Force Majeure Event continues for more than sixty (60) days, the Company or Licensee may cancel this Agreement with no further liability (except for any amounts due and not paid by Licensee) as a result of such Force Majeure Event.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(g)</span><span class="ft15"><span class="ft14">Attorneys’ Fees.</span> In any action to enforce the terms of this Agreement, the Company will be entitled to reasonable attorneys’ fees and other costs and expenses incurred by it in connection with such action or arbitral proceeding, including any appeal.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft9">(h)</span><span class="ft16"><span class="ft14">Notices.</span> All notices required to be sent hereunder shall be in writing and shall be deemed to have been given upon (i) the date sent by confirmed facsimile, (ii) on the date it was delivered by courier, (iii) by email if to the Company at <a href="mailto:billing@ehopper.com">billing@ehopper.com</a>, if to Licensee at the email address provided on the Sales Order Form, or (iv) if by certified mail return receipt requested, on the date received, to the addresses set forth above and to the attention of the signatories of this Agreement and the relevant Sales Order Form, or to such other address or individual as the parties may specify from time to time by written notice to the other Party.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(i)</span><span class="ft17"><span class="ft14">Authorized Individual.</span> By downloading this agreement and installing the Software, you represent that you have read and understand all of the Terms and Provisions herein, and further that you, as an individual, are authorized to represent and to bind the Licensee to these terms.</span>\r\n            </li>\r\n            <li>\r\n                <span class="ft3">(j)</span><span class="ft17"><span class="ft14">Survival.</span> In addition to as expressly set forth herein, Paragraphs 2, 3, 5, 6, 7, 9, 10, 12, 13 and 14 shall survive termination of this Agreement.</span>\r\n            </li>\r\n        </ul>\r\n    </div>\r\n\r\n    <p class="p51 ft3">Copyright © 2016 EHopper LLC, All rights reserved.</p>\r\n</div>\r\n';});


define('text!views/tips/tipsList.html',[],function () { return '<div class="pane pane-right pane-tips">\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body item-list">\r\n            <div id="messages"></div>\r\n            <div class="pull-left tips-filter">\r\n                <label data-bind="local: \'tips/tipsList.employee\'">Employee:</label>\r\n                <select data-bind="with: filter, value: filter.employee, event: { change: filter.apply }">\r\n                    <option value data-bind="local: \'tips/tipsList.all\'">All</option>\r\n                    <!-- ko foreach: employees -->\r\n                    <option data-bind="attr: { value: id }, text: (firstName + \' \' + lastName)"></option>\r\n                    <!-- /ko -->\r\n                </select>\r\n            </div>\r\n            <div style="float:left;">\r\n            <!--ko compose: { view: \'controls/storesFilter.html\', mode:\'templated\' }-->\r\n             <!--/ko-->\r\n                </div>\r\n            <div class="pull-right tips-filter">\r\n                <date-filter params="value: filter.dateRange"></date-filter>\r\n            </div>\r\n            <div class="report-export-wrapper pull-right">\r\n                <button class="btn-report-export" data-bind="click: exportTableData, local: \'shell.exportReport\'">Export report</button>\r\n                <i class="fa fa-file-excel-o" aria-hidden="true" data-bind="click: exportTableData"></i>\r\n            </div>\r\n\r\n            <br class="clear">\r\n\r\n            <div class="loader-container" data-bind="visible: loading()" style="min-height: 400px"></div>\r\n            <table class="datatable" id="tipsTable" data-bind="visible: !loading()">\r\n                <thead>\r\n                    <tr>\r\n                        <th data-bind="local: \'tips/tipsList.order_id\'">Order ID</th>\r\n                        <th data-bind="local: \'tips/tipsList.ref_num\'">Ref Num</th>\r\n                        <th data-bind="local: \'tips/tipsList.type\'">Type</th>\r\n                        <th data-bind="local: \'tips/tipsList.status\'">Status</th>\r\n                        <th data-bind="local: \'tips/tipsList.price\'">Price</th>\r\n                        <th data-bind="local: \'tips/tipsList.date\'">Date</th>\r\n                        <th data-bind="local: \'tips/tipsList.store\'">Store</th>\r\n                        <th data-bind="local: \'tips/tipsList.employee\'">Employee</th>\r\n                        <th data-bind="local: \'tips/tipsList.tips\'">Tips</th>\r\n                    </tr>\r\n                </thead>\r\n                <tbody></tbody>\r\n                <tfoot>\r\n                    <tr>\r\n                        <th class="text-right" colspan="7" data-bind="local: \'tips/tipsList.total_tips\'">Total Tips:</th>\r\n                        <th></th>\r\n                    </tr>\r\n                </tfoot>\r\n            </table>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/unblockAccount.html',[],function () { return '<div class="form-signin">\r\n    <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png">\r\n    <h2 style="text-align: center" data-bind="text: title, local: \'resetPassword.title-unblock\' "></h2>\r\n\r\n    <div id="resetPasswordMessage"></div>\r\n\r\n    <div class="form-group">\r\n        <input id="trdrtPasswordEmail" class="form-control input-lg" type="text" autocomplete="off" placeholder="Email" maxlength="200"\r\n               data-bind="value: email, local: \'resetPassword.enterEmail\', localAttr: \'placeholder\', disable: isLoading">\r\n    </div>\r\n\r\n    <p class="error-message" data-bind="html: errorMessage"></p>\r\n\r\n    <div class="form-buttons">\r\n        <input class="btn btn-lg btn-primary" type="button" value="Continue"\r\n               data-bind="click: unblockAccount, local: \'resetPassword.unblock\', disable: isLoading, css: { loading: isLoading }">\r\n    </div>\r\n</div>\r\n\r\n<span class="version"></span>';});


define('text!views/unsupportedBrowser.html',[],function () { return '<div id="unsupported-browser-container">\r\n    <img alt="eHopper" src="content/images/login/ehopper-logo-263x83.png" width="263" height="83" />\r\n    <p class="your-version" data-bind="html: yourBrowser()"></p>\r\n    <h4 data-bind="local: \'unsupported.browser\'"></h4>\r\n    <p data-bind="local: \'unsupported.latestVersion\'"></p>\r\n</div>\r\n';});


define('text!views/upgradeDialog.html',[],function () { return '\r\n\r\n<div  data-bind="css: getClass(), style: getStyle()">\r\n    <div class="modal-header" style="height:70px;">        \r\n        <div style="text-align:center; vertical-align:central; font-size:24px; padding-bottom:10px;"> <span data-bind="html: $root.titleText()"></span></div>       \r\n    </div>\r\n     <div class="modal-body" style="height:100px;" >\r\n        <p class="message" style="font-size:16px;" data-bind="html: $root.message()"></p>          \r\n       \r\n     <div  class="loader-container" style="top:35px; height:60px;">\r\n     <br />\r\n    </div>\r\n          <br />\r\n      </div>\r\n     \r\n</div>\r\n\r\n\r\n';});


define('text!views/vendors/manage-tabs/contactInfo.html',[],function () { return '<div data-bind="with: dataContext">\r\n\r\n    <!-- ko ifnot: $parent.modelReady -->\r\n    <div class="form-group row">\r\n        <div class="loader-container global-center"></div>\r\n    </div>\r\n    <!-- /ko -->\r\n\r\n    <!-- ko if: $parent.modelReady -->\r\n\r\n    <div class="form-group padlr row">\r\n        <label data-bind="local: \'vendors/manage-tabs/contactInfo.address\'">Address</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Address" maxlength="255" data-bind="value: addressLine1, local: \'vendors/manage-tabs/contactInfo.address\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group row">\r\n        <div class="col-xs-6">\r\n            <label data-bind="local: \'vendors/manage-tabs/contactInfo.country\'">Country</label>\r\n            <select class="input-lg" data-bind="options: $parent.countries(), optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'vendors/manage-tabs/contactInfo.choose_country\'), value: isoCountryId"></select>\r\n        </div>\r\n        <div class="col-xs-6" data-bind="visible: isStateVisible">\r\n            <label data-bind="local: \'vendors/manage-tabs/contactInfo.state\'">State</label>\r\n            <select class="input-lg jsVemdorContactInfoState" data-bind="options: $parent.states(), optionsText: \'name\', optionsValue: \'id\', optionsCaption: ko.local(\'vendors/manage-tabs/contactInfo.choose_state\'), value: territory"></select>\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group row">\r\n        <div class="col-xs-6">\r\n            <label data-bind="local: \'vendors/manage-tabs/contactInfo.city\'">City</label>\r\n            <input class="form-control input-lg" type="text" placeholder="City" maxlength="100" data-bind="value: city, local: \'vendors/manage-tabs/contactInfo.city\', localAttr: \'placeholder\'">\r\n        </div>\r\n        <div class="col-xs-6">\r\n            <label data-bind="local: \'vendors/manage-tabs/contactInfo.zip\'">Zip</label>\r\n            <input class="form-control input-lg" maxlength="10" type="text" placeholder="Zip" data-bind="value: postalCode, local: \'vendors/manage-tabs/contactInfo.zip\', localAttr: \'placeholder\'">\r\n        </div>\r\n    </div>\r\n\r\n    <div class="form-group padlr row">\r\n        <label data-bind="local: \'vendors/manage-tabs/contactInfo.phone\'">Phone</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Phone" data-bind="value: phone, local: \'vendors/manage-tabs/contactInfo.phone\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group padlr row">\r\n        <label data-bind="local: \'vendors/manage-tabs/contactInfo.fax\'">Fax</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Fax" data-bind="value: fax, local: \'vendors/manage-tabs/contactInfo.fax\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group padlr row">\r\n        <label data-bind="local: \'vendors/manage-tabs/contactInfo.email\'">Email</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Email" data-bind="value: eMail, local: \'vendors/manage-tabs/contactInfo.email\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group padlr row">\r\n        <label data-bind="local: \'vendors/manage-tabs/contactInfo.web_site\'">Web Site</label>\r\n        <input class="form-control input-lg" type="text" placeholder="http://www.address.com" data-bind="value: website, local: \'vendors/manage-tabs/contactInfo.www_address_com\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group padlr row">\r\n        <label data-bind="local: \'vendors/manage-tabs/contactInfo.contact_name\'">Contact Name</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Contact Name" maxlength="100" data-bind="value: contactName, local: \'vendors/manage-tabs/contactInfo.contact_name\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <!-- /ko -->\r\n\r\n</div>\r\n';});


define('text!views/vendors/manage-tabs/general.html',[],function () { return '<div data-bind="with: dataContext ">\r\n\r\n    <!-- ko ifnot: $parent.modelReady -->\r\n    <div class="form-group row">\r\n        <div class="loader-container global-center">\r\n        </div>\r\n    </div>\r\n    <!-- /ko -->\r\n\r\n    <!-- ko if: $parent.modelReady -->\r\n\r\n    <!-- ko if : id -->\r\n    <div class="form-group">\r\n        <label data-bind="local: \'vendors/manage-tabs/general.business_account_#\'">Business Account #</label>\r\n        <p class="form-control-static form-control input-lg" data-bind="text: id"></p>\r\n    </div>\r\n    <!-- /ko -->\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'vendors/manage-tabs/general.vendor_name\'">Vendor Name</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Vendor Name" maxlength="100" data-bind="value: name, local: \'vendors/manage-tabs/general.vendor_name\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'vendors/manage-tabs/general.vendor_type\'">Vendor Type</label>\r\n        <select class="input-lg" data-bind="options: $parent.vendorTypes, optionsText: \'name\', optionsValue: \'code\', optionsCaption: ko.local(\'vendors/manage-tabs/general.choose_vendor_type\'), value: type"></select>\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'vendors/manage-tabs/general.tax_id\'">Tax ID</label>\r\n        <input class="form-control input-lg" type="text" placeholder="Tax ID" maxlength="100" data-bind="value: taxId, local: \'vendors/manage-tabs/general.tax_id\', localAttr: \'placeholder\'">\r\n    </div>\r\n\r\n    <div class="form-group">\r\n        <label data-bind="local: \'vendors/manage-tabs/general.notes\'">Notes</label>\r\n        <textarea class="form-control input-lg" placeholder="Notes" data-bind="value: notes, local: \'vendors/manage-tabs/general.notes\', localAttr: \'placeholder\'"></textarea>\r\n    </div>\r\n\r\n    <div class="checkbox">\r\n        <input type="checkbox" id="isVendorActive" data-bind="checked: isActive">\r\n        <label for="isVendorActive" data-bind="local: \'vendors/manage-tabs/general.is_active\'">Is Active</label>\r\n    </div>\r\n\r\n    <!-- /ko -->\r\n\r\n</div>\r\n\r\n';});


define('text!views/vendors/vendorManage.html',[],function () { return '<div class="pane pane-right">\r\n\r\n    <!--ko compose: { model: \'viewmodels/header\' }-->\r\n    <!--/ko-->\r\n    <div class="pane-body-wrapper">\r\n        <div class="pane-body vendor-manage">\r\n\r\n            <div id="loading" data-bind="visible: loading()"></div>\r\n\r\n            <div class="form vendor-manage-form">\r\n                <div data-bind="css: { active: errors.length > 0 }, foreach: errors">\r\n                    <p class="bg-danger" data-bind="html: $data"></p>\r\n                </div>\r\n\r\n                <div class="vendors-tabs"></div>\r\n\r\n                <div class="vendors-tabs-content" data-bind="foreach: tabConfigs">\r\n                    <div class="tab-content" data-bind="attr: { id: id }, compose: $data.viewModel"></div>\r\n                </div>\r\n\r\n                <div class="form-buttons">\r\n                    <input data-fat="fat-global-done-button" class="btn btn-lg btn-primary" type="button" value="Done" data-bind="click: save, local: \'vendors/vendorManage.done\' ">\r\n                    <input class="btn btn-lg btn-default" type="button" value="Cancel" data-bind="click: cancel, local: \'vendors/vendorManage.cancel\' ">\r\n                </div>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</div>\r\n';});


define('text!views/vendors/vendorsList.html',[],function () { return '<div class="pane pane-right">\n\n    <!--ko compose: { model: \'viewmodels/header\' }-->\n    <!--/ko-->\n    <div class="pane-body-wrapper">\n        <div class="pane-body item-list vendors-list">\n            <div id="messages"></div>\n            <input class="form-control input-lg pull-left datatable-search" type="text" placeholder="Search For Vendor" data-bind="local: \'vendors/vendorsList.search_for_vendor\', localAttr: \'placeholder\'">\n\n            <div class="btn-group btn-group-lg pull-right">\n                <a class="btn btn-primary" href="#vendor" data-bind="local: \'vendors/vendorsList.new_vendor\'">New Vendor</a>\n                     \n                </div>\n\n            <br class="clear">\n\n            <table class="datatable" id="vendorTable">\n                <thead>\n                    <tr>\n                        <th data-bind="local: \'vendors/vendorsList.vendor_name\'">Vendor Name</th>\n                        <th data-bind="local: \'vendors/vendorsList.type\'">Type</th>\n                        <th data-bind="local: \'vendors/vendorsList.status\'">Status</th>\n                        <th>\n                        </th>\n                    </tr>\n                </thead>\n                <tbody></tbody>\n            </table>\n        </div>\n    </div>\n</div>\n';});

define('plugins/observable',["durandal/system","durandal/binder","knockout"],function(e,t,n){function r(e){var t=e[0];return"_"===t||"$"===t||w&&e===w}function a(t){return!(!t||void 0===t.nodeType||!e.isNumber(t.nodeType))}function o(e){if(!e||a(e)||e.ko===n||e.jquery)return!1;var t=m.call(e);return-1==g.indexOf(t)&&!(e===!0||e===!1)}function i(e){var t={};return Object.defineProperty(e,"__observable__",{enumerable:!1,configurable:!1,writable:!1,value:t}),t}function s(e,t,n){var r=e.__observable__,a=!0;if(!r||!r.__full__){r=r||i(e),r.__full__=!0,h.forEach(function(n){t[n]=function(){return T[n].apply(e,arguments)}}),v.forEach(function(n){e[n]=function(){a=!1;var e=I[n].apply(t,arguments);return a=!0,e}}),b.forEach(function(n){e[n]=function(){a&&t.valueWillMutate();var r=T[n].apply(e,arguments);return a&&t.valueHasMutated(),r}}),y.forEach(function(r){e[r]=function(){for(var o=0,i=arguments.length;i>o;o++)l(arguments[o],n);a&&t.valueWillMutate();var s=T[r].apply(e,arguments);return a&&t.valueHasMutated(),s}}),e.splice=function(){for(var r=2,o=arguments.length;o>r;r++)l(arguments[r],n);a&&t.valueWillMutate();var i=T.splice.apply(e,arguments);return a&&t.valueHasMutated(),i};for(var o=0,s=e.length;s>o;o++)l(e[o],n)}}function l(t,r){var a,l;if(w&&t&&t[w]&&(r=r?r.slice(0):[],r.push(t[w])),o(t)&&(a=t.__observable__,!a||!a.__full__)){if(a=a||i(t),a.__full__=!0,e.isArray(t)){var u=n.observableArray(t);s(t,u,r)}else for(var p in t)if(!f(p)&&!a[p]){var m=Object.getPropertyDescriptor(t,p);m&&(m.get||m.set)?d(t,p,{get:m.get,set:m.set}):(l=t[p],e.isFunction(l)||c(t,p,l,r))}x&&e.log("Converted",t)}}function u(e,t,n){n?t?t.destroyAll||s(t,e):(t=[],s(t,e)):l(t),e(t)}function c(t,r,a,o){var c,d,p=t.__observable__||i(t);if(void 0===a&&(a=t[r]),e.isArray(a))c=n.observableArray(a),s(a,c,o),d=!0;else if("function"==typeof a){if(!n.isObservable(a))return null;c=a}else!S&&e.isPromise(a)?(c=n.observable(),a.then(function(t){if(e.isArray(t)){var r=n.observableArray(t);s(t,r,o),t=r}c(t)})):(c=n.observable(a),l(a,o));return o&&o.length>0&&o.forEach(function(n){e.isArray(a)?c.subscribe(function(e){n(t,r,null,e)},null,"arrayChange"):c.subscribe(function(e){n(t,r,e,null)})}),Object.defineProperty(t,r,{configurable:!0,enumerable:!0,get:c,set:n.isWriteableObservable(c)?function(t){t&&e.isPromise(t)&&!S?t.then(function(t){u(c,t,e.isArray(t))}):u(c,t,d)}:void 0}),p[r]=c,c}function d(t,r,a){var o,i={owner:t,deferEvaluation:!0};return"function"==typeof a?i.read=a:("value"in a&&e.error('For defineProperty, you must not specify a "value" for the property. You must provide a "get" function.'),"function"!=typeof a.get&&"function"!=typeof a.read&&e.error('For defineProperty, the third parameter must be either an evaluator function, or an options object containing a function called "get".'),i.read=a.get||a.read,i.write=a.set||a.write),o=n.computed(i),t[r]=o,c(t,r,o)}var p,f,m=Object.prototype.toString,g=["[object Function]","[object String]","[object Boolean]","[object Number]","[object Date]","[object RegExp]"],v=["remove","removeAll","destroy","destroyAll","replace"],b=["pop","reverse","sort","shift","slice"],y=["push","unshift"],h=["filter","map","reduce","reduceRight","forEach","every","some"],T=Array.prototype,I=n.observableArray.fn,x=!1,w=void 0,S=!1;if(!("getPropertyDescriptor"in Object)){var A=Object.getOwnPropertyDescriptor,E=Object.getPrototypeOf;Object.getPropertyDescriptor=function(e,t){for(var n,r=e;r&&!(n=A(r,t));)r=E(r);return n}}return p=function(e,t){var r,a,o;return e?(r=e.__observable__,r&&(a=r[t])?a:(o=e[t],n.isObservable(o)?o:c(e,t,o))):null},p.defineProperty=d,p.convertProperty=c,p.convertObject=l,p.install=function(e){var n=t.binding;t.binding=function(e,t,r){r.applyBindings&&!r.skipConversion&&l(e),n(e,t)},x=e.logConversion,e.changeDetection&&(w=e.changeDetection),S=e.skipPromises,f=e.shouldIgnorePropertyName||r},p});
define('plugins/serializer',["durandal/system"],function(e){return{typeAttribute:"type",space:void 0,replacer:function(e,t){if(e){var n=e[0];if("_"===n||"$"===n)return void 0}return t},serialize:function(t,n){return n=void 0===n?{}:n,(e.isString(n)||e.isNumber(n))&&(n={space:n}),JSON.stringify(t,n.replacer||this.replacer,n.space||this.space)},getTypeId:function(e){return e?e[this.typeAttribute]:void 0},typeMap:{},registerType:function(){var t=arguments[0];if(1==arguments.length){var n=t[this.typeAttribute]||e.getModuleId(t);this.typeMap[n]=t}else this.typeMap[t]=arguments[1]},reviver:function(e,t,n,r){var a=n(t);if(a){var o=r(a);if(o)return o.fromJSON?o.fromJSON(t):new o(t)}return t},deserialize:function(e,t){var n=this;t=t||{};var r=t.getTypeId||function(e){return n.getTypeId(e)},a=t.getConstructor||function(e){return n.typeMap[e]},o=t.reviver||function(e,t){return n.reviver(e,t,r,a)};return JSON.parse(e,o)},clone:function(e,t){return this.deserialize(this.serialize(e,t),t)}}});
define('plugins/widget',["durandal/system","durandal/composition","jquery","knockout"],function(e,t,n,r){function a(e,n){var a=r.utils.domData.get(e,l);a||(a={parts:t.cloneNodes(r.virtualElements.childNodes(e))},r.virtualElements.emptyNode(e),r.utils.domData.set(e,l,a)),n.parts=a.parts}var o={},i={},s=["model","view","kind"],l="durandal-widget-data",u={getSettings:function(t){var n=r.utils.unwrapObservable(t())||{};if(e.isString(n))return{kind:n};for(var a in n)n[a]=-1!=r.utils.arrayIndexOf(s,a)?r.utils.unwrapObservable(n[a]):n[a];return n},registerKind:function(e){r.bindingHandlers[e]={init:function(){return{controlsDescendantBindings:!0}},update:function(t,n,r,o,i){var s=u.getSettings(n);s.kind=e,a(t,s),u.create(t,s,i,!0)}},r.virtualElements.allowedBindings[e]=!0,t.composeBindings.push(e+":")},mapKind:function(e,t,n){t&&(i[e]=t),n&&(o[e]=n)},mapKindToModuleId:function(e){return o[e]||u.convertKindToModulePath(e)},convertKindToModulePath:function(e){return"widgets/"+e+"/viewmodel"},mapKindToViewId:function(e){return i[e]||u.convertKindToViewPath(e)},convertKindToViewPath:function(e){return"widgets/"+e+"/view"},createCompositionSettings:function(e,t){return t.model||(t.model=this.mapKindToModuleId(t.kind)),t.view||(t.view=this.mapKindToViewId(t.kind)),t.preserveContext=!0,t.activate=!0,t.activationData=t,t.mode="templated",t},create:function(e,n,r,a){a||(n=u.getSettings(function(){return n},e));var o=u.createCompositionSettings(e,n);t.compose(e,o,r)},install:function(e){if(e.bindingName=e.bindingName||"widget",e.kinds)for(var n=e.kinds,o=0;o<n.length;o++)u.registerKind(n[o]);r.bindingHandlers[e.bindingName]={init:function(){return{controlsDescendantBindings:!0}},update:function(e,t,n,r,o){var i=u.getSettings(t);a(e,i),u.create(e,i,o,!0)}},t.composeBindings.push(e.bindingName+":"),r.virtualElements.allowedBindings[e.bindingName]=!0}};return u});
define('transitions/entrance',["durandal/system","durandal/composition","jquery"],function(e,t,n){function r(e,t){e.classList.remove(t?"entrance-in-fade":"entrance-in"),e.classList.remove("entrance-out")}var a=100,o={left:"0px",opacity:1},i={left:"",top:"",right:"",bottom:"",position:"",opacity:""},s=navigator.userAgent.match(/Trident/)||navigator.userAgent.match(/MSIE/),l=!1,u="Webkit Moz O ms Khtml".split(" "),c=document.createElement("div");if(void 0!==c.style.animationName&&(l=!0),!l)for(var d=0;d<u.length;d++)if(void 0!==c.style[u[d]+"AnimationName"]){l=!0;break}l?s?e.log("Using CSS3/jQuery mixed animations."):e.log("Using CSS3 animations."):e.log("Using jQuery animations.");var p=function(t){return e.defer(function(e){function u(){e.resolve()}function c(){t.keepScrollPosition||n(document).scrollTop(0)}function d(){c(),t.triggerAttach(),l?(r(t.child,m),t.child.classList.add(m?"entrance-in-fade":"entrance-in"),setTimeout(function(){r(t.child,m),t.activeView&&r(t.activeView,m),f.css(i),u()},p)):f.animate(o,{duration:p,easing:"swing",always:function(){f.css(i),u()}})}if(t.child){var p=t.duration||500,f=n(t.child),m=!!t.fadeOnly,g={display:"block",opacity:0,position:"absolute",left:m||l?"0px":"20px",right:0,top:0,bottom:0};f.css(g),t.activeView?l&&!s?(r(t.activeView,m),t.activeView.classList.add("entrance-out"),setTimeout(d,a)):n(t.activeView).fadeOut({duration:a,always:d}):d()}else n(t.activeView).fadeOut(a,u)}).promise()};return p});

require(["main"]);
